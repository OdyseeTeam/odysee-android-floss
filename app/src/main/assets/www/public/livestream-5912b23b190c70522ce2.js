"use strict";(self.webpackChunkodysee_com=self.webpackChunkodysee_com||[]).push([[1807],{19951:(e,t,n)=>{n.d(t,{Z:()=>v});var a=n(3658),r=n(52705),i=n(88441),l=n(16643),c=n(6993),o=n(77369),s=n(51635),u=n(64177),m=n(96284),d=n(71036).__;const h=function(e){var t=e.claimUri,n=e.title,a=void 0===n?null:n,r=e.doResolveUri,h=(0,l.k6)().push;return i.useEffect((function(){t&&r(t)}),[t,r]),t?i.createElement(s.Z,{className:"livestream__channel-link claim-preview__wrapper--live",title:i.createElement("h1",{className:"page__title"},i.createElement(m.default,{icon:o.LIVESTREAM_MONOCHROME}),i.createElement("label",null,a||d("Live stream in progress"))),onClick:function(){return h((0,c.$U)(t))}},i.createElement(u.default,{uri:t,type:"inline",hideMenu:!0})):null};var f=n(78023),p={doResolveUri:r.nt};const v=(0,f.Z)((0,a.$j)(null,p)(h))},80638:(e,t,n)=>{n.d(t,{Z:()=>S});var a=n(3658),r=n(7920),i=n(17185),l=n(29454),c=n(81352),o=n(33441),s=n(58210),u=n(30115),m=n(28180),d=n(16643),h=n(29679),f=n(77369),p=n(96284),v=n(88441),E=n(71036).__;function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i,l,c=[],o=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(a=i.call(n)).done)&&(c.push(a.value),c.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw r}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const C=function(e){var t=e.hideChat,n=e.hyperchatsHidden,a=e.isCompact,r=e.isMobile,i=e.isPopoutWindow,l=e.noHyperchats,c=e.setPopoutWindow,o=e.toggleHyperchats,s=e.toggleIsCompact,u=e.claimId,b=e.claimIsMine,C=e.channelHasMembershipTiers,_=e.isLivestreamChatMembersOnly,S=e.doToggleLiveChatMembersOnlySettingForClaimId,w=e.doToast,M=(0,d.k6)().location.pathname,N=v.useRef(!1),k=y((0,h.Z)("live-timestamps",!1),2),A=k[0],T=k[1];return v.createElement(v.Fragment,null,v.createElement(g,{showTimestamps:A}),v.createElement(m.v2,null,v.createElement(m.j2,{className:"menu__button"},v.createElement(p.default,{size:r?16:18,icon:f.SETTINGS})),v.createElement(m.qy,{className:"menu__list"},C&&b&&v.createElement(m.sN,{className:"comment__menu-option",onSelect:function(){u&&S(u).then((function(){return w({message:E(_?"Members-only chat is now disabled.":"Members-only chat is now enabled.")})}))}},v.createElement("span",{className:"menu__link"},v.createElement(p.default,{"aria-hidden":!0,icon:f.MEMBERSHIP}),E(_?"Disable Members-Only Chat":"Enable Members-Only Chat"))),v.createElement(m.sN,{className:"comment__menu-option",onSelect:function(){return T(!A)}},v.createElement("span",{className:"menu__link"},v.createElement(p.default,{"aria-hidden":!0,icon:f.TIME}),E("Toggle Timestamps"))),v.createElement(m.sN,{className:"comment__menu-option",onSelect:s},v.createElement("span",{className:"menu__link"},v.createElement(p.default,{"aria-hidden":!0,icon:a?f.EXPAND:f.COMPACT,size:18}),E(a?"Disable Compact Mode":"Enable Compact Mode"))),r?!l&&v.createElement(m.sN,{className:"comment__menu-option",onSelect:o},v.createElement("span",{className:"menu__link"},v.createElement(p.default,{"aria-hidden":!0,icon:n?f.EYE:f.DISMISS_ALL,size:18}),E(n?"Display HyperChats":"Dismiss HyperChats"))):v.createElement(v.Fragment,null,!l&&v.createElement(m.sN,{className:"comment__menu-option",onSelect:o},v.createElement("span",{className:"menu__link"},v.createElement(p.default,{"aria-hidden":!0,icon:n?f.EYE:f.DISMISS_ALL,size:18}),E(n?"Display HyperChats":"Dismiss HyperChats"))),v.createElement(m.sN,{className:"comment__menu-option",onSelect:t},v.createElement("span",{className:"menu__link"},v.createElement(p.default,{"aria-hidden":!0,icon:f.EYE}),E("Hide Chat"))),!i&&v.createElement(m.sN,{className:"comment__menu-option",onSelect:function(){if(c){var e=window.open("/$/popout"+M,"Popout Chat","height=700,width=400");e.onunload=function(t){if(N.current)var n=setInterval((function(t,a){e.closed&&(clearInterval(n),c(void 0))}),300);else N.current=!0},window.focus&&e.focus(),c(e)}}},v.createElement("span",{className:"menu__link"},v.createElement(p.default,{"aria-hidden":!0,icon:f.EXTERNAL}),E("Popout Chat")))))))};var g=function(e){var t=e.showTimestamps;return v.createElement(u.xB,{styles:{":root":{"--live-timestamp-opacity":t?"0.5":"0"}}})},_={doToggleLiveChatMembersOnlySettingForClaimId:i.zS,doToast:o.QJ};const S=(0,a.$j)((function(e,t){var n=t.uri,a=(0,r.B0)(e,n),i=a&&a.claim_id,o=((0,s.tg)(a)||{}).claim_id;return{claimId:i,claimIsMine:(0,r.ZJ)(e,n),channelHasMembershipTiers:o&&(0,c.R)(e,o),isLivestreamChatMembersOnly:(0,l._b)(e,o)}}),_)(C)},30434:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(3658),r=n(15927),i=n(96046),l=n(88441),c=n(44908),o=n(98124),s=n(71036).__;const u=function(e){var t=e.uri,n=e.children,a=e.streamClaim,r=e.doSetMainPlayerDimension,i=l.useCallback((function(e){if(e){var t=e.getBoundingClientRect();r(t)}}),[r]);return l.createElement(o.Z,{uri:t,onClick:a,passedRef:i},l.createElement(c.default,{className:"button--icon button--play",onClick:a,iconSize:30,title:s("Play")}),n)};var m={doSetMainPlayerDimension:r.Wt};const d=(0,i.Z)((0,a.$j)(null,m)(u))},90710:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var a=n(3658),r=n(19208),i=n(7920),l=n(55754),c=n(20983),o=n(31391),s=n(81352),u=n(12278),m=n(88441),d=n(49523),h=n(6993),f=n(13690),p=n(95810),v=m.createContext(),E=n(29454),y=n(44692),b=n(27055),C=n(19951),g=n(11370),_=n(30434),S=n(77369),w=n(28453),M=n(55911),N=n(7781),k=n(80638),A=n(68470),T=n(44908),H=n(66598),I=n.n(H),j=n(29679),O=n(74925),P=(n(19231),n(71036).__);function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i,l,c=[],o=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(a=i.call(n)).done)&&(c.push(a.value),c.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw r}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var L=(0,f.e)((function(){return n.e(5429).then(n.bind(n,88613))})),R=(0,f.e)((function(){return n.e(2348).then(n.bind(n,97726))})),U={CHAT:"chat",SUPERCHAT:"sc"};var V=function(e){var t=e.superChats,n=e.chatViewMode,a=e.setChatViewMode,r=(0,O.ts)(t),i=r.superChatsFiatAmount,l=r.superChatsLBCAmount;return m.createElement("div",{className:"chat-card--drawer-header-mode"},m.createElement(T.default,{title:P("Live Chat"),label:P("Live Chat"),className:I()("button-toggle",{"button-toggle--active":n===U.CHAT&&t}),iconSize:18,onClick:function(){return a(U.CHAT)}}),t&&m.createElement(T.default,{title:P("HyperChats"),label:m.createElement(m.Fragment,null,m.createElement(A.Z,{amount:l||0,size:8})," /",m.createElement(A.Z,{amount:i||0,size:8,isFiat:!0})," ",P("Tipped")),className:I()("button-toggle",{"button-toggle--active":n===U.SUPERCHAT}),iconSize:18,onClick:function(){return a(U.SUPERCHAT)}}))},z={doClearPlayingUri:y.QV};const $=(0,a.$j)((function(e,t){var n=t.uri,a=(0,i.B0)(e,n),o=a&&a.claim_id;return{claim:a,thumbnail:(0,i.SI)(e,n),chatDisabled:(0,l.Rs)(e,n),superChats:(0,E.dt)(e,n),activeViewers:o&&(0,l.fU)(e,o),isCurrentClaimLive:(0,l.dR)(e,n),showScheduledInfo:(0,l.nK)(e,n),activeStreamUri:(0,l.dt)(e,n),videoTheaterMode:(0,c.wr)(e,r.HV)}}),z)((function(e){var t=e.uri,n=e.livestreamChatEnabled,a=e.activeStreamUri,r=e.claim,i=e.chatDisabled,l=e.isCurrentClaimLive,c=e.showScheduledInfo,o=e.superChats,s=e.activeViewers,u=e.videoTheaterMode,d=e.doClearPlayingUri,h=(0,p.dD)(),f=(0,p.Jw)(),v=Z(m.useState(!1),2),E=v[0],y=v[1],A=Z(m.useState(U.CHAT),2),T=A[0],H=A[1],I=Z((0,j.Z)("isCompact",!1),2),O=I[0],D=I[1],z=void 0===a;if(m.useEffect((function(){l||d()}),[l]),!r||!r.signing_channel)return null;var $=r.signing_channel.name;return m.createElement("section",{className:"card-stack file-page__video"},m.createElement("div",{className:g.ap},m.createElement(_.Z,{uri:r.canonical_url},c&&m.createElement(L,{uri:r.canonical_url}))),m.createElement("div",{className:"file-page__secondary-content"},m.createElement("div",{className:"file-page__media-actions"},m.createElement("div",{className:"section card-stack"},z||a||c||l?i&&m.createElement("div",{className:"help--notice"},$?P("%channel% has disabled chat for this stream. Enjoy the stream!",{channel:$}):P("This channel has disabled chat for this stream. Enjoy the stream!")):m.createElement("div",{className:"help--notice",style:{marginTop:"20px"}},$?P("%channelName% isn't live right now, but the chat is! Check back later to watch the stream.",{channelName:$}):P("This channel isn't live right now, but the chat is! Check back later to watch the stream.")),m.createElement(C.Z,{title:P("Click here to access the stream that's currently active"),uri:t}),h&&!f&&n&&m.createElement(m.Suspense,{fallback:null},m.createElement(M.Z,{type:w.J,title:m.createElement("div",{className:"chat-card--drawer-header"},m.createElement(V,{superChats:o,chatViewMode:T,setChatViewMode:function(e){return H(e)},activeViewers:s}),m.createElement(k.Z,{uri:t,noHyperchats:!o||0===o.length,hyperchatsHidden:E,toggleHyperchats:function(){return y(!E)},toggleIsCompact:function(){return D(!O)},isCompact:O,isMobile:!0})),hasSubtitle:s},m.createElement(R,{uri:t,hideHeader:!0,hyperchatsHidden:E,customViewMode:T,setCustomViewMode:function(e){return H(e)}})),m.createElement(N.Z,{icon:S.CHAT,label:P("Open Live Chat"),type:w.J})),m.createElement(b.Z,{uri:t}))),(!h||f)&&u&&n&&m.createElement(m.Suspense,{fallback:null},m.createElement(R,{uri:t,hyperchatsHidden:E,customViewMode:T,setCustomViewMode:function(e){return H(e)}}))))}));var x=n(41165);function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i,l,c=[],o=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(a=i.call(n)).done)&&(c.push(a.value),c.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw r}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var J=(0,f.e)((function(){return n.e(2348).then(n.bind(n,97726))}));var Y={doCommentSocketConnect:u.sB,doCommentSocketDisconnect:u.Vt};const W=(0,a.$j)((function(e,t){var n=t.uri,a=(0,i.B0)(e,n),u=a||{},m=u.claim_id,d=u.canonical_url;return{claim:a,chatDisabled:(0,l.Rs)(e,n),isStreamPlaying:(0,o.G$)(e,n),socketConnection:(0,l.Fz)(e,m),theaterMode:(0,c.wr)(e,r.HV),uri:d||"",contentUnlocked:m&&(0,s.Pt)(e,m)}}),Y)((function(e){var t=e.uri,n=e.chatDisabled,a=e.claim,r=e.socketConnection,i=e.isStreamPlaying,l=e.theaterMode,c=e.contentUnlocked,o=e.doCommentSocketConnect,s=e.doCommentSocketDisconnect,u=(0,p.dD)(),f=(0,p.Jw)(),E=m.useRef(),y=B(m.useState(n||u),2),b=y[0],C=y[1],g=B(m.useState(!1),2),_=g[0],S=g[1],w=!n&&c,M=(!u||f)&&!l&&w;m.useEffect((function(){d.Z.event.playerLoaded("livestream",!1)}),[]);var N=((a||{}).signing_channel||{}).canonical_url;return m.useEffect((function(){var e=a.claim_id,n=a.signing_channel&&(0,h.xY)(N);e&&n&&(null==r||!r.connected)&&c&&o(t,n,e,void 0)}),[N,a,o,s,r,t,c]),m.useEffect((function(){E.current=i}),[i]),m.useEffect((function(){return function(){if(!E.current){var e=a.claim_id,t=a.signing_channel&&(0,h.xY)(N);e&&t&&c&&s(e,t)}}}),[]),m.createElement(v.Provider,{value:{livestreamPage:!0}},(!M||b)&&m.createElement($,{uri:t,livestreamChatEnabled:w}),M&&m.createElement(m.Suspense,{fallback:m.createElement(x.Z,null)},m.createElement(J,{uri:t,hyperchatsHidden:_,toggleHyperchats:function(){return S(!_)},setLayoutRendered:C})))}))}}]);
//# sourceMappingURL=livestream-5912b23b190c70522ce2.js.map