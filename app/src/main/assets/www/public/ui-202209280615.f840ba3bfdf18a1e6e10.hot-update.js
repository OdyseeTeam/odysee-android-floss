webpackHotUpdate("ui-202209280615",{

/***/ "../config.js":
/*!********************!*\
  !*** ../config.js ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(process) {// On Web, this will find .env.defaults and optional .env in web/\n// On Desktop App, this will find .env.defaults and optional .env in root dir\n__webpack_require__(/*! dotenv-defaults */ \"../node_modules/dotenv-defaults/src/index.js\").config({\n  silent: false\n});\n\nvar config = {\n  MINIMUM_VERSION: \"20220825001\",\n  IGNORE_MINIMUM_VERSION: \"true\",\n  WEBPACK_WEB_PORT: \"9090\",\n  WEBPACK_ELECTRON_PORT: \"9091\",\n  WEB_SERVER_PORT: \"1337\",\n  LBRY_WEB_API: \"https://api.na-backend.odysee.com\",\n  // api.na-backend.odysee.com',\n  LBRY_WEB_PUBLISH_API: \"https://publish.na-backend.odysee.com/v1\",\n  LBRY_WEB_PUBLISH_API_V2: \"https://publish.na-backend.odysee.com/api/v2/publish/\",\n  LBRY_WEB_PUBLISH_API_V3: \"https://publish.na-backend.odysee.com/api/v3/publish/\",\n  LBRY_API_URL: \"https://api.odysee.com\",\n  // api.odysee.com',\n  LBRY_WEB_BUFFER_API: \"https://collector-service.api.lbry.tv/api/v1/events/video\",\n  SEARCH_SERVER_API: \"https://lighthouse.odysee.tv/search\",\n  SEARCH_SERVER_API_ALT: \"https://recsys.odysee.tv/search\",\n  COMMENT_SERVER_API: \"https://comments.odysee.tv/api/v2\",\n  SOCKETY_SERVER_API: \"wss://sockety.odysee.tv/ws\",\n  LOCALE_API: \"https://api.odysee.com/legal/requirements\",\n  WELCOME_VERSION: \"1.0\",\n  DOMAIN: \"odysee.com\",\n  SHARE_DOMAIN_URL: process.env.SHARE_DOMAIN_URL,\n  URL: \"https://odysee.com\",\n  RECSYS_ENDPOINT: \"https://recsys.odysee.tv/v1/lvv\",\n  RECSYS_FYP_ENDPOINT: \"https://recsys.odysee.tv/v1/u\",\n  IMAGE_PROXY_URL: process.env.IMAGE_PROXY_URL,\n  THUMBNAIL_CDN_URL: \"https://thumbnails.odycdn.com/optimize/\",\n  THUMBNAIL_CARDS_CDN_URL: \"https://thumbnails.odycdn.com/card/s:1280:720/quality:85/plain/\",\n  THUMBNAIL_HEIGHT: \"220\",\n  THUMBNAIL_HEIGHT_POSTER: \"720\",\n  THUMBNAIL_WIDTH: \"390\",\n  THUMBNAIL_WIDTH_POSTER: \"1280\",\n  THUMBNAIL_QUALITY: \"85\",\n  THUMBNAIL_CDN_SIZE_LIMIT_BYTES: \"5242880\",\n  PLAYER_SERVER: \"https://player.odycdn.com\",\n  SITE_TITLE: \"Odysee\",\n  SITE_NAME: \"Odysee\",\n  SITE_DESCRIPTION: \"Explore a whole universe of videos on Odysee from regular people just like you!\",\n  SITE_HELP_EMAIL: \"help@odysee.com\",\n  // SOCIAL MEDIA\n  TWITTER_ACCOUNT: \"OdyseeTeam\",\n  // LOGO\n  LOGO_TITLE: \"odysee\",\n  LOGO: \"https://thumbnails.odycdn.com/optimize/s:100:100/quality:85/plain/https://spee.ch/odysee-logo-png:3.png\",\n  LOGO_WHITE_TEXT: \"https://thumbnails.odycdn.com/optimize/s:1000:300/quality:85/plain/https://spee.ch/odysee-white-png:f.png\",\n  LOGO_DARK_TEXT: \"https://thumbnails.odycdn.com/optimize/s:1000:300/quality:85/plain/https://spee.ch/odysee-png:2.png\",\n  AVATAR_DEFAULT: \"https://thumbnails.odycdn.com/optimize/s:160:160/quality:85/plain/https://spee.ch/spaceman-png:2.png\",\n  MISSING_THUMB_DEFAULT: \"https://thumbnails.odycdn.com/optimize/s:390:220/quality:85/plain/https://spee.ch/missing-thumb-png\",\n  // OG\n  OG_TITLE_SUFFIX: \"| odysee.com\",\n  OG_HOMEPAGE_TITLE: \"Odysee\",\n  OG_IMAGE_URL: \"https://thumbnails.odycdn.com/optimize/s:1200:630/quality:85/plain/https://spee.ch/odysee-og:e.png\",\n  // MASCOT\n  YRBL_HAPPY_IMG_URL: \"https://thumbnails.odycdn.com/optimize/s:300:300/quality:85/plain/https://spee.ch/spaceman-happy:a.png\",\n  YRBL_SAD_IMG_URL: \"https://thumbnails.odycdn.com/optimize/s:300:300/quality:85/plain/https://spee.ch/spaceman-sad:d.png\",\n  LOGIN_IMG_URL: \"https://thumbnails.odycdn.com/optimize/s:400:507/quality:85/plain/https://player.odycdn.com/speech/odysee-sign-up:d.png\",\n  SITE_CANONICAL_URL: \"odysee.com\",\n  DEFAULT_LANGUAGE: \"en\",\n  AUTO_FOLLOW_CHANNELS: \"lbry://@Odysee#80d2590ad04e36fb1d077a9b9e3a8bba76defdf8 lbry://@OdyseeHelp#b58dfaeab6c70754d792cdd9b56ff59b90aea334\",\n  UNSYNCED_SETTINGS: process.env.UNSYNCED_SETTINGS,\n  // ENABLE FEATURES\n  ENABLE_COMMENT_REACTIONS: \"true\" === 'true',\n  ENABLE_FILE_REACTIONS: \"true\" === 'true',\n  ENABLE_CREATOR_REACTIONS: \"true\" === 'true',\n  ENABLE_NO_SOURCE_CLAIMS: \"true\" === 'true',\n  ENABLE_PREROLL_ADS: \"false\" === 'true',\n  CHANNEL_STAKED_LEVEL_VIDEO_COMMENTS: \"4\",\n  CHANNEL_CREATION_LIMIT: \"5\",\n  WEB_PUBLISH_SIZE_LIMIT_GB: \"10\",\n  LOADING_BAR_COLOR: \"#e50054\",\n  SIMPLE_SITE: \"true\" === 'true',\n  SHOW_ADS: \"true\" === 'true',\n  KNOWN_APP_DOMAINS:  true ? \"open.lbry.com,lbry.tv,lbry.lat,odysee.com\".split(',') : undefined,\n  STRIPE_PUBLIC_KEY: \"pk_test_NoL1JWL7i1ipfhVId5KfDZgo\",\n  ENABLE_UI_NOTIFICATIONS: \"true\" === 'true',\n  ENABLE_MATURE: \"false\" === 'true',\n  CUSTOM_HOMEPAGE: \"true\" === 'true',\n  SHOW_TAGS_INTRO: \"false\" === 'true',\n  LIGHTHOUSE_DEFAULT_TYPES: \"audio,video\",\n  BRANDED_SITE: \"odysee\",\n  // FIREBASE SDK\n  FIREBASE_API_KEY: \"AIzaSyAgc-4QORyglpYZ3qH9E5pDauEDOJXgM3A\",\n  FIREBASE_AUTH_DOMAIN: \"lbry-mobile.firebaseapp.com\",\n  FIREBASE_PROJECT_ID: \"lbry-mobile\",\n  FIREBASE_STORAGE_BUCKET: \"lbry-mobile.appspot.com\",\n  FIREBASE_MESSAGING_SENDER_ID: \"638894153788\",\n  FIREBASE_APP_ID: \"1:638894153788:web:35b295b15297201bd2e339\",\n  FIREBASE_MEASUREMENT_ID: \"G-2MPJGFEEXC\",\n  FIREBASE_VAPID_KEY: \"BFayEBpwMTU9GQQpXgitIJkfx-SD8-ltrFb3wLTZWgA27MfBhG4948pe0eERl432NzPrMKsbkXnA7ap_vLPgLYk\",\n  AD_KEYWORD_BLOCKLIST: \"nigger,jew,faggot\",\n  AD_KEYWORD_BLOCKLIST_CHECK_DESCRIPTION: \"true\",\n  // FROM COMMAND LINE\n  COMMIT_ID: process.env.COMMIT_ID,\n  NODE_ENV: \"development\"\n};\nconfig.SDK_API_PATH = \"\".concat(config.LBRY_WEB_API, \"/api/v1\");\nconfig.PROXY_URL = \"\".concat(config.SDK_API_PATH, \"/proxy\");\nconfig.URL_DEV = \"http://localhost:\".concat(config.WEBPACK_WEB_PORT);\nconfig.URL_LOCAL = \"http://localhost:\".concat(config.WEB_SERVER_PORT);\nconfig.FAVICON = \"/public/favicon-spaceman.png\";\nmodule.exports = config;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./web/node_modules/process/browser.js */ \"./node_modules/process/browser.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY29uZmlnLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL2NvbmZpZy5qcz9iMDVjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIE9uIFdlYiwgdGhpcyB3aWxsIGZpbmQgLmVudi5kZWZhdWx0cyBhbmQgb3B0aW9uYWwgLmVudiBpbiB3ZWIvXG4vLyBPbiBEZXNrdG9wIEFwcCwgdGhpcyB3aWxsIGZpbmQgLmVudi5kZWZhdWx0cyBhbmQgb3B0aW9uYWwgLmVudiBpbiByb290IGRpclxucmVxdWlyZSgnZG90ZW52LWRlZmF1bHRzJykuY29uZmlnKHsgc2lsZW50OiBmYWxzZSB9KTtcblxuY29uc3QgY29uZmlnID0ge1xuICBNSU5JTVVNX1ZFUlNJT046IHByb2Nlc3MuZW52Lk1JTklNVU1fVkVSU0lPTixcbiAgSUdOT1JFX01JTklNVU1fVkVSU0lPTjogcHJvY2Vzcy5lbnYuSUdOT1JFX01JTklNVU1fVkVSU0lPTixcbiAgV0VCUEFDS19XRUJfUE9SVDogcHJvY2Vzcy5lbnYuV0VCUEFDS19XRUJfUE9SVCxcbiAgV0VCUEFDS19FTEVDVFJPTl9QT1JUOiBwcm9jZXNzLmVudi5XRUJQQUNLX0VMRUNUUk9OX1BPUlQsXG4gIFdFQl9TRVJWRVJfUE9SVDogcHJvY2Vzcy5lbnYuV0VCX1NFUlZFUl9QT1JULFxuICBMQlJZX1dFQl9BUEk6IHByb2Nlc3MuZW52LkxCUllfV0VCX0FQSSwgLy8gYXBpLm5hLWJhY2tlbmQub2R5c2VlLmNvbScsXG4gIExCUllfV0VCX1BVQkxJU0hfQVBJOiBwcm9jZXNzLmVudi5MQlJZX1dFQl9QVUJMSVNIX0FQSSxcbiAgTEJSWV9XRUJfUFVCTElTSF9BUElfVjI6IHByb2Nlc3MuZW52LkxCUllfV0VCX1BVQkxJU0hfQVBJX1YyLFxuICBMQlJZX1dFQl9QVUJMSVNIX0FQSV9WMzogcHJvY2Vzcy5lbnYuTEJSWV9XRUJfUFVCTElTSF9BUElfVjMsXG4gIExCUllfQVBJX1VSTDogcHJvY2Vzcy5lbnYuTEJSWV9BUElfVVJMLCAvLyBhcGkub2R5c2VlLmNvbScsXG4gIExCUllfV0VCX0JVRkZFUl9BUEk6IHByb2Nlc3MuZW52LkxCUllfV0VCX0JVRkZFUl9BUEksXG4gIFNFQVJDSF9TRVJWRVJfQVBJOiBwcm9jZXNzLmVudi5TRUFSQ0hfU0VSVkVSX0FQSSxcbiAgU0VBUkNIX1NFUlZFUl9BUElfQUxUOiBwcm9jZXNzLmVudi5TRUFSQ0hfU0VSVkVSX0FQSV9BTFQsXG4gIENPTU1FTlRfU0VSVkVSX0FQSTogcHJvY2Vzcy5lbnYuQ09NTUVOVF9TRVJWRVJfQVBJLFxuICBTT0NLRVRZX1NFUlZFUl9BUEk6IHByb2Nlc3MuZW52LlNPQ0tFVFlfU0VSVkVSX0FQSSxcbiAgTE9DQUxFX0FQSTogcHJvY2Vzcy5lbnYuTE9DQUxFX0FQSSxcbiAgV0VMQ09NRV9WRVJTSU9OOiBwcm9jZXNzLmVudi5XRUxDT01FX1ZFUlNJT04sXG4gIERPTUFJTjogcHJvY2Vzcy5lbnYuRE9NQUlOLFxuICBTSEFSRV9ET01BSU5fVVJMOiBwcm9jZXNzLmVudi5TSEFSRV9ET01BSU5fVVJMLFxuICBVUkw6IHByb2Nlc3MuZW52LlVSTCxcbiAgUkVDU1lTX0VORFBPSU5UOiBwcm9jZXNzLmVudi5SRUNTWVNfRU5EUE9JTlQsXG4gIFJFQ1NZU19GWVBfRU5EUE9JTlQ6IHByb2Nlc3MuZW52LlJFQ1NZU19GWVBfRU5EUE9JTlQsXG4gIElNQUdFX1BST1hZX1VSTDogcHJvY2Vzcy5lbnYuSU1BR0VfUFJPWFlfVVJMLFxuICBUSFVNQk5BSUxfQ0ROX1VSTDogcHJvY2Vzcy5lbnYuVEhVTUJOQUlMX0NETl9VUkwsXG4gIFRIVU1CTkFJTF9DQVJEU19DRE5fVVJMOiBwcm9jZXNzLmVudi5USFVNQk5BSUxfQ0FSRFNfQ0ROX1VSTCxcbiAgVEhVTUJOQUlMX0hFSUdIVDogcHJvY2Vzcy5lbnYuVEhVTUJOQUlMX0hFSUdIVCxcbiAgVEhVTUJOQUlMX0hFSUdIVF9QT1NURVI6IHByb2Nlc3MuZW52LlRIVU1CTkFJTF9IRUlHSFRfUE9TVEVSLFxuICBUSFVNQk5BSUxfV0lEVEg6IHByb2Nlc3MuZW52LlRIVU1CTkFJTF9XSURUSCxcbiAgVEhVTUJOQUlMX1dJRFRIX1BPU1RFUjogcHJvY2Vzcy5lbnYuVEhVTUJOQUlMX1dJRFRIX1BPU1RFUixcbiAgVEhVTUJOQUlMX1FVQUxJVFk6IHByb2Nlc3MuZW52LlRIVU1CTkFJTF9RVUFMSVRZLFxuICBUSFVNQk5BSUxfQ0ROX1NJWkVfTElNSVRfQllURVM6IHByb2Nlc3MuZW52LlRIVU1CTkFJTF9DRE5fU0laRV9MSU1JVF9CWVRFUyxcbiAgUExBWUVSX1NFUlZFUjogcHJvY2Vzcy5lbnYuUExBWUVSX1NFUlZFUixcbiAgU0lURV9USVRMRTogcHJvY2Vzcy5lbnYuU0lURV9USVRMRSxcbiAgU0lURV9OQU1FOiBwcm9jZXNzLmVudi5TSVRFX05BTUUsXG4gIFNJVEVfREVTQ1JJUFRJT046IHByb2Nlc3MuZW52LlNJVEVfREVTQ1JJUFRJT04sXG4gIFNJVEVfSEVMUF9FTUFJTDogcHJvY2Vzcy5lbnYuU0lURV9IRUxQX0VNQUlMLFxuICAvLyBTT0NJQUwgTUVESUFcbiAgVFdJVFRFUl9BQ0NPVU5UOiBwcm9jZXNzLmVudi5UV0lUVEVSX0FDQ09VTlQsXG4gIC8vIExPR09cbiAgTE9HT19USVRMRTogcHJvY2Vzcy5lbnYuTE9HT19USVRMRSxcbiAgTE9HTzogcHJvY2Vzcy5lbnYuTE9HTyxcbiAgTE9HT19XSElURV9URVhUOiBwcm9jZXNzLmVudi5MT0dPX1dISVRFX1RFWFQsXG4gIExPR09fREFSS19URVhUOiBwcm9jZXNzLmVudi5MT0dPX0RBUktfVEVYVCxcbiAgQVZBVEFSX0RFRkFVTFQ6IHByb2Nlc3MuZW52LkFWQVRBUl9ERUZBVUxULFxuICBNSVNTSU5HX1RIVU1CX0RFRkFVTFQ6IHByb2Nlc3MuZW52Lk1JU1NJTkdfVEhVTUJfREVGQVVMVCxcbiAgLy8gT0dcbiAgT0dfVElUTEVfU1VGRklYOiBwcm9jZXNzLmVudi5PR19USVRMRV9TVUZGSVgsXG4gIE9HX0hPTUVQQUdFX1RJVExFOiBwcm9jZXNzLmVudi5PR19IT01FUEFHRV9USVRMRSxcbiAgT0dfSU1BR0VfVVJMOiBwcm9jZXNzLmVudi5PR19JTUFHRV9VUkwsXG4gIC8vIE1BU0NPVFxuICBZUkJMX0hBUFBZX0lNR19VUkw6IHByb2Nlc3MuZW52LllSQkxfSEFQUFlfSU1HX1VSTCxcbiAgWVJCTF9TQURfSU1HX1VSTDogcHJvY2Vzcy5lbnYuWVJCTF9TQURfSU1HX1VSTCxcbiAgTE9HSU5fSU1HX1VSTDogcHJvY2Vzcy5lbnYuTE9HSU5fSU1HX1VSTCxcbiAgU0lURV9DQU5PTklDQUxfVVJMOiBwcm9jZXNzLmVudi5TSVRFX0NBTk9OSUNBTF9VUkwsXG4gIERFRkFVTFRfTEFOR1VBR0U6IHByb2Nlc3MuZW52LkRFRkFVTFRfTEFOR1VBR0UsXG4gIEFVVE9fRk9MTE9XX0NIQU5ORUxTOiBwcm9jZXNzLmVudi5BVVRPX0ZPTExPV19DSEFOTkVMUyxcbiAgVU5TWU5DRURfU0VUVElOR1M6IHByb2Nlc3MuZW52LlVOU1lOQ0VEX1NFVFRJTkdTLFxuXG4gIC8vIEVOQUJMRSBGRUFUVVJFU1xuICBFTkFCTEVfQ09NTUVOVF9SRUFDVElPTlM6IHByb2Nlc3MuZW52LkVOQUJMRV9DT01NRU5UX1JFQUNUSU9OUyA9PT0gJ3RydWUnLFxuICBFTkFCTEVfRklMRV9SRUFDVElPTlM6IHByb2Nlc3MuZW52LkVOQUJMRV9GSUxFX1JFQUNUSU9OUyA9PT0gJ3RydWUnLFxuICBFTkFCTEVfQ1JFQVRPUl9SRUFDVElPTlM6IHByb2Nlc3MuZW52LkVOQUJMRV9DUkVBVE9SX1JFQUNUSU9OUyA9PT0gJ3RydWUnLFxuICBFTkFCTEVfTk9fU09VUkNFX0NMQUlNUzogcHJvY2Vzcy5lbnYuRU5BQkxFX05PX1NPVVJDRV9DTEFJTVMgPT09ICd0cnVlJyxcbiAgRU5BQkxFX1BSRVJPTExfQURTOiBwcm9jZXNzLmVudi5FTkFCTEVfUFJFUk9MTF9BRFMgPT09ICd0cnVlJyxcbiAgQ0hBTk5FTF9TVEFLRURfTEVWRUxfVklERU9fQ09NTUVOVFM6IHByb2Nlc3MuZW52LkNIQU5ORUxfU1RBS0VEX0xFVkVMX1ZJREVPX0NPTU1FTlRTLFxuICBDSEFOTkVMX0NSRUFUSU9OX0xJTUlUOiBwcm9jZXNzLmVudi5DSEFOTkVMX0NSRUFUSU9OX0xJTUlULFxuICBXRUJfUFVCTElTSF9TSVpFX0xJTUlUX0dCOiBwcm9jZXNzLmVudi5XRUJfUFVCTElTSF9TSVpFX0xJTUlUX0dCLFxuICBMT0FESU5HX0JBUl9DT0xPUjogcHJvY2Vzcy5lbnYuTE9BRElOR19CQVJfQ09MT1IsXG4gIFNJTVBMRV9TSVRFOiBwcm9jZXNzLmVudi5TSU1QTEVfU0lURSA9PT0gJ3RydWUnLFxuICBTSE9XX0FEUzogcHJvY2Vzcy5lbnYuU0hPV19BRFMgPT09ICd0cnVlJyxcbiAgS05PV05fQVBQX0RPTUFJTlM6IHByb2Nlc3MuZW52LktOT1dOX0FQUF9ET01BSU5TID8gcHJvY2Vzcy5lbnYuS05PV05fQVBQX0RPTUFJTlMuc3BsaXQoJywnKSA6IFtdLFxuICBTVFJJUEVfUFVCTElDX0tFWTogcHJvY2Vzcy5lbnYuU1RSSVBFX1BVQkxJQ19LRVksXG4gIEVOQUJMRV9VSV9OT1RJRklDQVRJT05TOiBwcm9jZXNzLmVudi5FTkFCTEVfVUlfTk9USUZJQ0FUSU9OUyA9PT0gJ3RydWUnLFxuICBFTkFCTEVfTUFUVVJFOiBwcm9jZXNzLmVudi5FTkFCTEVfTUFUVVJFID09PSAndHJ1ZScsXG4gIENVU1RPTV9IT01FUEFHRTogcHJvY2Vzcy5lbnYuQ1VTVE9NX0hPTUVQQUdFID09PSAndHJ1ZScsXG4gIFNIT1dfVEFHU19JTlRSTzogcHJvY2Vzcy5lbnYuU0hPV19UQUdTX0lOVFJPID09PSAndHJ1ZScsXG4gIExJR0hUSE9VU0VfREVGQVVMVF9UWVBFUzogcHJvY2Vzcy5lbnYuTElHSFRIT1VTRV9ERUZBVUxUX1RZUEVTLFxuICBCUkFOREVEX1NJVEU6IHByb2Nlc3MuZW52LkJSQU5ERURfU0lURSxcblxuICAvLyBGSVJFQkFTRSBTREtcbiAgRklSRUJBU0VfQVBJX0tFWTogcHJvY2Vzcy5lbnYuRklSRUJBU0VfQVBJX0tFWSxcbiAgRklSRUJBU0VfQVVUSF9ET01BSU46IHByb2Nlc3MuZW52LkZJUkVCQVNFX0FVVEhfRE9NQUlOLFxuICBGSVJFQkFTRV9QUk9KRUNUX0lEOiBwcm9jZXNzLmVudi5GSVJFQkFTRV9QUk9KRUNUX0lELFxuICBGSVJFQkFTRV9TVE9SQUdFX0JVQ0tFVDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfU1RPUkFHRV9CVUNLRVQsXG4gIEZJUkVCQVNFX01FU1NBR0lOR19TRU5ERVJfSUQ6IHByb2Nlc3MuZW52LkZJUkVCQVNFX01FU1NBR0lOR19TRU5ERVJfSUQsXG4gIEZJUkVCQVNFX0FQUF9JRDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfQVBQX0lELFxuICBGSVJFQkFTRV9NRUFTVVJFTUVOVF9JRDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfTUVBU1VSRU1FTlRfSUQsXG4gIEZJUkVCQVNFX1ZBUElEX0tFWTogcHJvY2Vzcy5lbnYuRklSRUJBU0VfVkFQSURfS0VZLFxuXG4gIEFEX0tFWVdPUkRfQkxPQ0tMSVNUOiBwcm9jZXNzLmVudi5BRF9LRVlXT1JEX0JMT0NLTElTVCxcbiAgQURfS0VZV09SRF9CTE9DS0xJU1RfQ0hFQ0tfREVTQ1JJUFRJT046IHByb2Nlc3MuZW52LkFEX0tFWVdPUkRfQkxPQ0tMSVNUX0NIRUNLX0RFU0NSSVBUSU9OLFxuXG4gIC8vIEZST00gQ09NTUFORCBMSU5FXG4gIENPTU1JVF9JRDogcHJvY2Vzcy5lbnYuQ09NTUlUX0lELFxuICBOT0RFX0VOVjogcHJvY2Vzcy5lbnYuTk9ERV9FTlYsXG59O1xuXG5jb25maWcuU0RLX0FQSV9QQVRIID0gYCR7Y29uZmlnLkxCUllfV0VCX0FQSX0vYXBpL3YxYDtcbmNvbmZpZy5QUk9YWV9VUkwgPSBgJHtjb25maWcuU0RLX0FQSV9QQVRIfS9wcm94eWA7XG5cbmNvbmZpZy5VUkxfREVWID0gYGh0dHA6Ly9sb2NhbGhvc3Q6JHtjb25maWcuV0VCUEFDS19XRUJfUE9SVH1gO1xuY29uZmlnLlVSTF9MT0NBTCA9IGBodHRwOi8vbG9jYWxob3N0OiR7Y29uZmlnLldFQl9TRVJWRVJfUE9SVH1gO1xuY29uZmlnLkZBVklDT04gPSBgL3B1YmxpYy9mYXZpY29uLXNwYWNlbWFuLnBuZ2A7XG5cbm1vZHVsZS5leHBvcnRzID0gY29uZmlnO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQS9GQTtBQWtHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../config.js\n");

/***/ }),

/***/ "../node_modules/tus-js-client/lib/noopUrlStorage.js":
/*!***********************************************************!*\
  !*** ../node_modules/tus-js-client/lib/noopUrlStorage.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return NoopUrlStorage; });\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n/* eslint no-unused-vars: \"off\" */\n\n\nvar NoopUrlStorage = /*#__PURE__*/function () {\n  function NoopUrlStorage() {\n    _classCallCheck(this, NoopUrlStorage);\n  }\n\n  _createClass(NoopUrlStorage, [{\n    key: \"listAllUploads\",\n    value: function listAllUploads() {\n      return Promise.resolve([]);\n    }\n  }, {\n    key: \"findUploadsByFingerprint\",\n    value: function findUploadsByFingerprint(fingerprint) {\n      return Promise.resolve([]);\n    }\n  }, {\n    key: \"removeUpload\",\n    value: function removeUpload(urlStorageKey) {\n      return Promise.resolve();\n    }\n  }, {\n    key: \"addUpload\",\n    value: function addUpload(fingerprint, upload) {\n      return Promise.resolve(null);\n    }\n  }]);\n\n  return NoopUrlStorage;\n}();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL3R1cy1qcy1jbGllbnQvbGliL25vb3BVcmxTdG9yYWdlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL25vZGVfbW9kdWxlcy90dXMtanMtY2xpZW50L2xpYi9ub29wVXJsU3RvcmFnZS5qcz84NjliIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludCBuby11bnVzZWQtdmFyczogXCJvZmZcIiAqL1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb29wVXJsU3RvcmFnZSB7XG4gIGxpc3RBbGxVcGxvYWRzICgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKVxuICB9XG5cbiAgZmluZFVwbG9hZHNCeUZpbmdlcnByaW50IChmaW5nZXJwcmludCkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pXG4gIH1cblxuICByZW1vdmVVcGxvYWQgKHVybFN0b3JhZ2VLZXkpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgfVxuXG4gIGFkZFVwbG9hZCAoZmluZ2VycHJpbnQsIHVwbG9hZCkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbClcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUFBOzs7Ozs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7Ozs7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../node_modules/tus-js-client/lib/noopUrlStorage.js\n");

/***/ }),

/***/ "../ui/component/app/view.jsx":
/*!************************************!*\
  !*** ../ui/component/app/view.jsx ***!
  \************************************/
/*! exports provided: MAIN_WRAPPER_CLASS, IS_MAC, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MAIN_WRAPPER_CLASS\", function() { return MAIN_WRAPPER_CLASS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"IS_MAC\", function() { return IS_MAC; });\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! constants/pages */ \"../ui/constants/pages.js\");\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(constants_pages__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var util_lazyImport__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! util/lazyImport */ \"../ui/util/lazyImport.js\");\n/* harmony import */ var util_tus__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! util/tus */ \"../ui/util/tus.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! analytics */ \"../ui/analytics.js\");\n/* harmony import */ var redux_actions_search__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! redux/actions/search */ \"../ui/redux/actions/search.js\");\n/* harmony import */ var util_lbryURI__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! util/lbryURI */ \"../ui/util/lbryURI.js\");\n/* harmony import */ var util_url__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! util/url */ \"../ui/util/url.js\");\n/* harmony import */ var component_router_index__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! component/router/index */ \"../ui/component/router/index.js\");\n/* harmony import */ var modal_modalRouter__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! modal/modalRouter */ \"../ui/modal/modalRouter/index.js\");\n/* harmony import */ var react_modal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-modal */ \"../node_modules/react-modal/lib/index.js\");\n/* harmony import */ var react_modal__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_modal__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var util_enhanced_layout__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! util/enhanced-layout */ \"../ui/util/enhanced-layout.js\");\n/* harmony import */ var component_yrbl__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! component/yrbl */ \"../ui/component/yrbl/index.jsx\");\n/* harmony import */ var component_fileRenderFloating__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! component/fileRenderFloating */ \"../ui/component/fileRenderFloating/index.js\");\n/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react-router */ \"../node_modules/react-router/esm/react-router.js\");\n/* harmony import */ var effects_use_previous__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! effects/use-previous */ \"../ui/effects/use-previous.js\");\n/* harmony import */ var component_nag__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! component/nag */ \"../ui/component/nag/index.js\");\n/* harmony import */ var rewards__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rewards */ \"../ui/rewards.js\");\n/* harmony import */ var effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! effects/use-persisted-state */ \"../ui/effects/use-persisted-state.js\");\n/* harmony import */ var effects_use_connection_status__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! effects/use-connection-status */ \"../ui/effects/use-connection-status.js\");\n/* harmony import */ var component_spinner__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! component/spinner */ \"../ui/component/spinner/index.js\");\n/* harmony import */ var constants_languages__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! constants/languages */ \"../ui/constants/languages.js\");\n/* harmony import */ var util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! util/beforeUnload */ \"../ui/util/beforeUnload.js\");\n/* harmony import */ var util_platform__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! util/platform */ \"../ui/util/platform.js\");\n/* harmony import */ var web_component_adBlockTester__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! web/component/adBlockTester */ \"./component/adBlockTester/index.js\");\n/* harmony import */ var web_component_adsSticky__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! web/component/adsSticky */ \"./component/adsSticky/index.js\");\n/* harmony import */ var web_component_youtubeReferralWelcome__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! web/component/youtubeReferralWelcome */ \"./component/youtubeReferralWelcome/index.js\");\n/* harmony import */ var web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! web/effects/use-degraded-performance */ \"./effects/use-degraded-performance.js\");\n/* harmony import */ var constants_language_migrations__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! constants/language-migrations */ \"../ui/constants/language-migrations.js\");\n/* harmony import */ var effects_use_screensize__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! effects/use-screensize */ \"../ui/effects/use-screensize.js\");\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar FileDrop = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | fileDrop */ \"fileDrop\").then(__webpack_require__.bind(null, /*! component/fileDrop */ \"../ui/component/fileDrop/index.js\"));\n});\nvar NagContinueFirstRun = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | nagCFR */ \"nagCFR\").then(__webpack_require__.bind(null, /*! component/nagContinueFirstRun */ \"../ui/component/nagContinueFirstRun/index.js\"));\n});\nvar NagDegradedPerformance = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | NagDegradedPerformance */ \"NagDegradedPerformance\").then(__webpack_require__.bind(null, /*! web/component/nag-degraded-performance */ \"./component/nag-degraded-performance.jsx\"));\n});\nvar NagNoUser = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | nag-no-user */ \"nag-no-user\").then(__webpack_require__.bind(null, /*! web/component/nag-no-user */ \"./component/nag-no-user.jsx\"));\n});\nvar NagSunset = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | nag-sunset */ \"nag-sunset\").then(__webpack_require__.bind(null, /*! web/component/nag-sunset */ \"./component/nag-sunset.jsx\"));\n});\nvar SyncFatalError = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | syncFatalError */ \"syncFatalError\").then(__webpack_require__.bind(null, /*! component/syncFatalError */ \"../ui/component/syncFatalError/index.js\"));\n}); // ****************************************************************************\n\nvar MAIN_WRAPPER_CLASS = 'main-wrapper';\nvar IS_MAC = navigator.userAgent.indexOf('Mac OS X') !== -1; // const imaLibraryPath = 'https://imasdk.googleapis.com/js/sdkloader/ima3.js';\n\nvar oneTrustScriptSrc = 'https://cdn.cookielaw.org/scripttemplates/otSDKStub.js';\nvar LATEST_PATH = \"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"LATEST\"], \"/\");\nvar LIVE_PATH = \"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"LIVE_NOW\"], \"/\");\nvar EMBED_PATH = \"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"EMBED\"], \"/\");\n\nfunction App(props) {\n  var theme = props.theme,\n      user = props.user,\n      locale = props.locale,\n      location = props.location,\n      fetchChannelListMine = props.fetchChannelListMine,\n      fetchCollectionListMine = props.fetchCollectionListMine,\n      signIn = props.signIn,\n      isReloadRequired = props.isReloadRequired,\n      uploadCount = props.uploadCount,\n      history = props.history,\n      syncError = props.syncError,\n      syncIsLocked = props.syncIsLocked,\n      prefsReady = props.prefsReady,\n      language = props.language,\n      languages = props.languages,\n      setLanguage = props.setLanguage,\n      fetchLanguage = props.fetchLanguage,\n      rewards = props.rewards,\n      doUserSetReferrerForUri = props.doUserSetReferrerForUri,\n      isAuthenticated = props.isAuthenticated,\n      syncLoop = props.syncLoop,\n      currentModal = props.currentModal,\n      syncFatalError = props.syncFatalError,\n      myChannelClaimIds = props.myChannelClaimIds,\n      activeChannelClaim = props.activeChannelClaim,\n      setIncognito = props.setIncognito,\n      fetchModBlockedList = props.fetchModBlockedList,\n      fetchModAmIList = props.fetchModAmIList,\n      defaultChannelClaim = props.defaultChannelClaim,\n      nagsShown = props.nagsShown,\n      announcement = props.announcement,\n      doOpenAnnouncements = props.doOpenAnnouncements,\n      doSetLastViewedAnnouncement = props.doSetLastViewedAnnouncement,\n      doSetDefaultChannel = props.doSetDefaultChannel,\n      doSetGdprConsentList = props.doSetGdprConsentList;\n  var isMobile = Object(effects_use_screensize__WEBPACK_IMPORTED_MODULE_29__[\"useIsMobile\"])();\n  var isEnhancedLayout = Object(util_enhanced_layout__WEBPACK_IMPORTED_MODULE_11__[\"default\"])();\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasSignedIn = _useState2[0],\n      setHasSignedIn = _useState2[1];\n\n  var hasVerifiedEmail = user && Boolean(user.has_verified_email);\n  var isRewardApproved = user && user.is_reward_approved;\n  var previousHasVerifiedEmail = Object(effects_use_previous__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(hasVerifiedEmail);\n  var previousRewardApproved = Object(effects_use_previous__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(isRewardApproved);\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_27__[\"STATUS_OK\"]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      lbryTvApiStatus = _useState4[0],\n      setLbryTvApiStatus = _useState4[1];\n\n  var _usePersistedState = Object(effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_18__[\"default\"])('sidebar', false),\n      _usePersistedState2 = _slicedToArray(_usePersistedState, 1),\n      sidebarOpen = _usePersistedState2[0];\n\n  var pathname = location.pathname,\n      hash = location.hash,\n      search = location.search,\n      hostname = location.hostname;\n\n  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      retryingSync = _useState6[0],\n      setRetryingSync = _useState6[1];\n\n  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      langRenderKey = _useState8[0],\n      setLangRenderKey = _useState8[1];\n\n  var _usePersistedState3 = Object(effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_18__[\"default\"])('lbrytv-sunset', false),\n      _usePersistedState4 = _slicedToArray(_usePersistedState3, 2),\n      seenSunsestMessage = _usePersistedState4[0],\n      setSeenSunsetMessage = _usePersistedState4[1]; // referral claiming\n\n\n  var referredRewardAvailable = rewards && rewards.some(function (reward) {\n    return reward.reward_type === rewards__WEBPACK_IMPORTED_MODULE_17__[\"default\"].TYPE_REFEREE;\n  });\n  var urlParams = new URLSearchParams(search);\n  var rawReferrerParam = urlParams.get('r');\n  var fromLbrytvParam = urlParams.get('sunset');\n  var sanitizedReferrerParam = rawReferrerParam && rawReferrerParam.replace(':', '#');\n  var embedPath = pathname.startsWith(EMBED_PATH);\n  var shouldHideNag = embedPath || pathname.startsWith(\"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"AUTH_VERIFY\"]));\n  var userId = user && user.id;\n  var hasMyChannels = myChannelClaimIds && myChannelClaimIds.length > 0;\n  var hasNoChannels = myChannelClaimIds && myChannelClaimIds.length === 0;\n  var shouldMigrateLanguage = constants_language_migrations__WEBPACK_IMPORTED_MODULE_28__[\"default\"][language];\n  var renderFiledrop = !isMobile && isAuthenticated && !util_platform__WEBPACK_IMPORTED_MODULE_23__[\"platform\"].isFirefox();\n  var connectionStatus = Object(effects_use_connection_status__WEBPACK_IMPORTED_MODULE_19__[\"default\"])();\n  var urlPath = pathname + hash;\n  var latestContentPath = urlPath.startsWith(LATEST_PATH);\n  var liveContentPath = urlPath.startsWith(LIVE_PATH);\n  var featureParam = urlParams.get('feature');\n  var embedLatestPath = embedPath && (featureParam === constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"LATEST\"] || featureParam === constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"LIVE_NOW\"]);\n  var isNewestPath = latestContentPath || liveContentPath || embedLatestPath;\n  var path;\n\n  if (isNewestPath) {\n    path = urlPath.replace(embedLatestPath ? EMBED_PATH : latestContentPath ? LATEST_PATH : LIVE_PATH, '');\n  } else {\n    // Remove the leading \"/\" added by the browser\n    path = urlPath.slice(1);\n  }\n\n  path = path.replace(/:/g, '#');\n\n  if (isNewestPath && !path.startsWith('@')) {\n    path = \"@\".concat(path);\n  }\n\n  if (search && search.startsWith('?q=cache:')) {\n    Object(util_url__WEBPACK_IMPORTED_MODULE_7__[\"generateGoogleCacheUrl\"])(search, path);\n  }\n\n  var uri;\n\n  try {\n    // here queryString and startTime are \"removed\" from the buildURI process\n    // to build only the uri itself\n    var _parseURI = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_6__[\"parseURI\"])(path),\n        queryString = _parseURI.queryString,\n        startTime = _parseURI.startTime,\n        parsedUri = _objectWithoutProperties(_parseURI, [\"queryString\", \"startTime\"]);\n\n    uri = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_6__[\"buildURI\"])(_objectSpread({}, parsedUri));\n  } catch (e) {\n    var match = path.match(/[#/:]/);\n\n    if (!path.startsWith('$/') && match && match.index) {\n      uri = \"lbry://\".concat(path.slice(0, match.index));\n    } else if (path.startsWith(\"$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"EMBED\"], \"/\"))) {\n      uri = \"lbry://\".concat(path.replace(\"$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"EMBED\"], \"/\"), ''));\n    }\n  }\n\n  function getStatusNag() {\n    // Handle \"offline\" first. Everything else is meaningless if it's offline.\n    if (!connectionStatus.online) {\n      return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_nag__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n        type: \"helpful\",\n        message: __('You are offline. Check your internet connection.')\n      });\n    } // Only 1 nag is possible, so show the most important:\n\n\n    if (user === null) {\n      return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(NagNoUser, null);\n    }\n\n    if (lbryTvApiStatus === web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_27__[\"STATUS_DEGRADED\"] || lbryTvApiStatus === web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_27__[\"STATUS_FAILING\"]) {\n      if (!shouldHideNag) {\n        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(NagDegradedPerformance, {\n          onClose: function onClose() {\n            return setLbryTvApiStatus(web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_27__[\"STATUS_OK\"]);\n          }\n        });\n      }\n    }\n\n    if (syncFatalError) {\n      if (!retryingSync) {\n        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_nag__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n          type: \"error\",\n          message: __('Failed to synchronize settings. Wait a while before retrying.'),\n          actionText: __('Retry'),\n          onClick: function onClick() {\n            syncLoop(true);\n            setRetryingSync(true);\n            setTimeout(function () {\n              return setRetryingSync(false);\n            }, 4000);\n          }\n        });\n      }\n    } else if (isReloadRequired) {\n      return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_nag__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n        message: __('A new version of Odysee is available.'),\n        actionText: __('Refresh'),\n        onClick: function onClick() {\n          return window.location.reload();\n        }\n      });\n    }\n  }\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (userId) {\n      analytics__WEBPACK_IMPORTED_MODULE_4__[\"default\"].setUser(userId);\n      Object(redux_actions_search__WEBPACK_IMPORTED_MODULE_5__[\"setSearchUserId\"])(userId);\n    }\n  }, [userId]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (syncIsLocked) {\n      var msg = 'There are unsaved settings. Exit the Settings Page to finalize them.';\n\n      var handleBeforeUnload = function handleBeforeUnload(event) {\n        event.preventDefault();\n        event.returnValue = msg;\n      };\n\n      util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"BeforeUnload\"].register(handleBeforeUnload, msg);\n      return function () {\n        return util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"BeforeUnload\"].unregister(handleBeforeUnload);\n      };\n    }\n  }, [syncIsLocked]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!uploadCount) return;\n    var msg = 'Unfinished uploads.';\n\n    var handleUnload = function handleUnload(event) {\n      return Object(util_tus__WEBPACK_IMPORTED_MODULE_3__[\"tusUnlockAndNotify\"])();\n    };\n\n    var handleBeforeUnload = function handleBeforeUnload(event) {\n      event.preventDefault();\n      event.returnValue = __(msg); // without setting this to something it doesn't work in some browsers.\n    };\n\n    util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"Unload\"].register(handleUnload);\n    util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"BeforeUnload\"].register(handleBeforeUnload, msg);\n    return function () {\n      util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"Unload\"].unregister(handleUnload);\n      util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"BeforeUnload\"].unregister(handleBeforeUnload);\n    };\n  }, [uploadCount]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!uploadCount) return;\n\n    var onStorageUpdate = function onStorageUpdate(e) {\n      return Object(util_tus__WEBPACK_IMPORTED_MODULE_3__[\"tusHandleTabUpdates\"])(e.key);\n    };\n\n    window.addEventListener('storage', onStorageUpdate);\n    return function () {\n      return window.removeEventListener('storage', onStorageUpdate);\n    };\n  }, [uploadCount]); // allows user to pause miniplayer using the spacebar without the page scrolling down\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    var handleKeyPress = function handleKeyPress(e) {\n      if (e.key === ' ' && e.target === document.body) {\n        e.preventDefault();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyPress);\n    return function () {\n      return window.removeEventListener('keydown', handleKeyPress);\n    };\n  }, []);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (referredRewardAvailable && sanitizedReferrerParam) {\n      doUserSetReferrerForUri(sanitizedReferrerParam);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [sanitizedReferrerParam, referredRewardAvailable]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {}, [fetchChannelListMine, fetchCollectionListMine]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // $FlowFixMe\n    document.documentElement.setAttribute('theme', theme);\n  }, [theme]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // $FlowFixMe\n    document.body.style.overflowY = currentModal ? 'hidden' : '';\n  }, [currentModal]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (hasNoChannels) {\n      setIncognito(true);\n    }\n\n    if (hasMyChannels) {\n      fetchModBlockedList();\n      fetchModAmIList();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [hasMyChannels, hasNoChannels, setIncognito]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (hasMyChannels && activeChannelClaim && !defaultChannelClaim && prefsReady) {\n      doSetDefaultChannel(activeChannelClaim.claim_id);\n    }\n  }, [activeChannelClaim, defaultChannelClaim, doSetDefaultChannel, hasMyChannels, prefsReady]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // $FlowFixMe\n    document.documentElement.setAttribute('lang', language);\n  }, [language]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!languages.includes(language)) {\n      fetchLanguage(language);\n\n      if (document && document.documentElement && constants_languages__WEBPACK_IMPORTED_MODULE_21__[\"default\"][language].length >= 3) {\n        document.documentElement.dir = constants_languages__WEBPACK_IMPORTED_MODULE_21__[\"default\"][language][2];\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [language, languages]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (shouldMigrateLanguage) {\n      setLanguage(shouldMigrateLanguage);\n    }\n  }, [shouldMigrateLanguage, setLanguage]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // Check that previousHasVerifiedEmail was not undefined instead of just not truthy\n    // This ensures we don't fire the emailVerified event on the initial user fetch\n    if (previousHasVerifiedEmail === false && hasVerifiedEmail) {\n      analytics__WEBPACK_IMPORTED_MODULE_4__[\"default\"].event.emailVerified();\n    }\n  }, [previousHasVerifiedEmail, hasVerifiedEmail, signIn]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (previousRewardApproved === false && isRewardApproved) {\n      analytics__WEBPACK_IMPORTED_MODULE_4__[\"default\"].event.rewardEligible();\n    }\n  }, [previousRewardApproved, isRewardApproved]); // Load IMA3 SDK for aniview\n  // useEffect(() => {\n  //   if (!isAuthenticated && SHOW_ADS) {\n  //     const script = document.createElement('script');\n  //     script.src = imaLibraryPath;\n  //     script.async = true;\n  //     // $FlowFixMe\n  //     document.body.appendChild(script);\n  //     return () => {\n  //       // $FlowFixMe\n  //       document.body.removeChild(script);\n  //     };\n  //   }\n  // }, []);\n  // add OneTrust script\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // don't add script for embedded content\n    function inIframe() {\n      try {\n        return window.self !== window.top;\n      } catch (e) {\n        return true;\n      }\n    }\n\n    if (inIframe() || !locale || !locale.gdpr_required) {\n      var ad = document.getElementsByClassName('OUTBRAIN')[0];\n\n      if (ad) {\n        if (!nagsShown) ad.classList.add('VISIBLE');\n        if (!sidebarOpen || isMobile) ad.classList.add('LEFT');\n      }\n\n      return;\n    } // $FlowFixMe\n\n\n    var useProductionOneTrust =  false && false;\n    var script = document.createElement('script');\n    script.src = oneTrustScriptSrc;\n    script.setAttribute('charset', 'UTF-8');\n\n    if (useProductionOneTrust) {\n      script.setAttribute('data-domain-script', '8a792d84-50a5-4b69-b080-6954ad4d4606');\n    } else {\n      script.setAttribute('data-domain-script', '8a792d84-50a5-4b69-b080-6954ad4d4606-test');\n    }\n\n    var secondScript = document.createElement('script'); // OneTrust asks to add this\n\n    secondScript.innerHTML = 'function OptanonWrapper() { window.gdprCallback() }';\n\n    window.gdprCallback = function () {\n      doSetGdprConsentList(window.OnetrustActiveGroups);\n\n      if (window.OnetrustActiveGroups.indexOf('C0002') !== -1) {\n        var _ad = document.getElementsByClassName('OUTBRAIN')[0];\n        if (_ad && !window.nagsShown) _ad.classList.add('VISIBLE');\n      }\n    }; // $FlowFixMe\n\n\n    document.head.appendChild(script); // $FlowFixMe\n\n    document.head.appendChild(secondScript);\n    return function () {\n      try {\n        // $FlowFixMe\n        document.head.removeChild(script); // $FlowFixMe\n\n        document.head.removeChild(secondScript);\n      } catch (err) {// eslint-disable-next-line no-console\n        // console.log(err); <-- disabling this ... it's clogging up Sentry logs.\n      }\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps -- one time after locale is fetched\n  }, [locale]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    window.nagsShown = nagsShown;\n\n    if (nagsShown) {\n      var ad = document.getElementsByClassName('VISIBLE')[0];\n      if (ad) ad.classList.remove('VISIBLE');\n    } else {\n      var _ad2 = document.getElementsByClassName('OUTBRAIN')[0];\n      if (_ad2) _ad2.classList.add('VISIBLE');\n    }\n  }, [nagsShown]); // ready for sync syncs, however after signin when hasVerifiedEmail, that syncs too.\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // signInSyncPref is cleared after sharedState loop.\n    var syncLoopWithoutInterval = function syncLoopWithoutInterval() {\n      return syncLoop(true);\n    };\n\n    if (hasSignedIn && hasVerifiedEmail) {\n      // In case we are syncing.\n      syncLoop();\n      window.addEventListener('focus', syncLoopWithoutInterval);\n    }\n\n    return function () {\n      window.removeEventListener('focus', syncLoopWithoutInterval);\n    };\n  }, [hasSignedIn, hasVerifiedEmail, syncLoop]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (syncError && isAuthenticated && !pathname.includes(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"AUTH_WALLET_PASSWORD\"]) && !currentModal) {\n      history.push(\"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"AUTH_WALLET_PASSWORD\"], \"?redirect=\").concat(pathname));\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [syncError, pathname, isAuthenticated]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (prefsReady && isAuthenticated && (pathname === '/' || pathname === \"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"HELP\"])) && announcement !== '') {\n      doOpenAnnouncements();\n    }\n  }, [announcement, isAuthenticated, pathname, prefsReady]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    window.clearLastViewedAnnouncement = function () {\n      console.log('Clearing history. Please wait ...'); // eslint-disable-line no-console\n\n      doSetLastViewedAnnouncement('clear');\n    };\n  }, []); // Keep this at the end to ensure initial setup effects are run first\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!hasSignedIn && hasVerifiedEmail) {\n      signIn();\n      setHasSignedIn(true);\n    }\n  }, [hasVerifiedEmail, signIn, hasSignedIn]);\n  Object(web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_27__[\"useDegradedPerformance\"])(setLbryTvApiStatus, user);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!syncIsLocked) {\n      // When language is changed or translations are fetched, we render.\n      setLangRenderKey(Date.now());\n    } // eslint-disable-next-line react-hooks/exhaustive-deps -- don't respond to syncIsLocked, but skip action when locked.\n\n  }, [language, languages]);\n  var appRef = react__WEBPACK_IMPORTED_MODULE_1___default.a.useCallback(function (wrapperElement) {\n    if (wrapperElement) {\n      react_modal__WEBPACK_IMPORTED_MODULE_10___default.a.setAppElement(wrapperElement);\n    }\n  }, []); // Require an internal-api user on lbry.tv\n  // This also prevents the site from loading in the un-authed state while we wait for internal-apis to return for the first time\n  // It's not needed on desktop since there is no un-authed state\n\n  if (user === undefined) {\n    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n      className: \"main--empty\"\n    }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_spinner__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n      delayed: true\n    }));\n  }\n\n  if (connectionStatus.online && lbryTvApiStatus === web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_27__[\"STATUS_DOWN\"]) {\n    // TODO: Rename `SyncFatalError` since it has nothing to do with syncing.\n    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Suspense, {\n      fallback: null\n    }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(SyncFatalError, {\n      lbryTvApiStatus: lbryTvApiStatus\n    }));\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n    className: MAIN_WRAPPER_CLASS,\n    ref: appRef,\n    key: langRenderKey\n  }, lbryTvApiStatus === web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_27__[\"STATUS_DOWN\"] ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_yrbl__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n    className: \"main--empty\",\n    title: __('odysee.com is currently down'),\n    subtitle: __('My wheel broke, but the good news is that someone from LBRY is working on it.')\n  }) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(web_component_adBlockTester__WEBPACK_IMPORTED_MODULE_24__[\"default\"], null), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(web_component_adsSticky__WEBPACK_IMPORTED_MODULE_25__[\"default\"], {\n    uri: uri\n  }), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_router_index__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n    uri: uri\n  }), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(modal_modalRouter__WEBPACK_IMPORTED_MODULE_9__[\"default\"], null), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Suspense, {\n    fallback: null\n  }, renderFiledrop && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(FileDrop, null)), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_fileRenderFloating__WEBPACK_IMPORTED_MODULE_13__[\"default\"], null), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Suspense, {\n    fallback: null\n  }, isEnhancedLayout && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_yrbl__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n    className: \"yrbl--enhanced\"\n  }), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(web_component_youtubeReferralWelcome__WEBPACK_IMPORTED_MODULE_26__[\"default\"], null), !shouldHideNag && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(NagContinueFirstRun, null), fromLbrytvParam && !seenSunsestMessage && !shouldHideNag && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(NagSunset, {\n    email: hasVerifiedEmail,\n    onClose: function onClose() {\n      return setSeenSunsetMessage(true);\n    }\n  }), getStatusNag())));\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_router__WEBPACK_IMPORTED_MODULE_14__[\"withRouter\"])(App));\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvY29tcG9uZW50L2FwcC92aWV3LmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi91aS9jb21wb25lbnQvYXBwL3ZpZXcuanN4P2JkNzgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcbmltcG9ydCAqIGFzIFBBR0VTIGZyb20gJ2NvbnN0YW50cy9wYWdlcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGxhenlJbXBvcnQgfSBmcm9tICd1dGlsL2xhenlJbXBvcnQnO1xuaW1wb3J0IHsgdHVzVW5sb2NrQW5kTm90aWZ5LCB0dXNIYW5kbGVUYWJVcGRhdGVzIH0gZnJvbSAndXRpbC90dXMnO1xuaW1wb3J0IGFuYWx5dGljcyBmcm9tICdhbmFseXRpY3MnO1xuaW1wb3J0IHsgc2V0U2VhcmNoVXNlcklkIH0gZnJvbSAncmVkdXgvYWN0aW9ucy9zZWFyY2gnO1xuaW1wb3J0IHsgcGFyc2VVUkksIGJ1aWxkVVJJIH0gZnJvbSAndXRpbC9sYnJ5VVJJJztcbmltcG9ydCB7IGdlbmVyYXRlR29vZ2xlQ2FjaGVVcmwgfSBmcm9tICd1dGlsL3VybCc7XG5pbXBvcnQgUm91dGVyIGZyb20gJ2NvbXBvbmVudC9yb3V0ZXIvaW5kZXgnO1xuaW1wb3J0IE1vZGFsUm91dGVyIGZyb20gJ21vZGFsL21vZGFsUm91dGVyJztcbmltcG9ydCBSZWFjdE1vZGFsIGZyb20gJ3JlYWN0LW1vZGFsJztcbmltcG9ydCB1c2VLb25hbWlMaXN0ZW5lciBmcm9tICd1dGlsL2VuaGFuY2VkLWxheW91dCc7XG5pbXBvcnQgWXJibCBmcm9tICdjb21wb25lbnQveXJibCc7XG5pbXBvcnQgRmlsZVJlbmRlckZsb2F0aW5nIGZyb20gJ2NvbXBvbmVudC9maWxlUmVuZGVyRmxvYXRpbmcnO1xuaW1wb3J0IHsgd2l0aFJvdXRlciB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5pbXBvcnQgdXNlUHJldmlvdXMgZnJvbSAnZWZmZWN0cy91c2UtcHJldmlvdXMnO1xuaW1wb3J0IE5hZyBmcm9tICdjb21wb25lbnQvbmFnJztcbmltcG9ydCBSRVdBUkRTIGZyb20gJ3Jld2FyZHMnO1xuaW1wb3J0IHVzZVBlcnNpc3RlZFN0YXRlIGZyb20gJ2VmZmVjdHMvdXNlLXBlcnNpc3RlZC1zdGF0ZSc7XG5pbXBvcnQgdXNlQ29ubmVjdGlvblN0YXR1cyBmcm9tICdlZmZlY3RzL3VzZS1jb25uZWN0aW9uLXN0YXR1cyc7XG5pbXBvcnQgU3Bpbm5lciBmcm9tICdjb21wb25lbnQvc3Bpbm5lcic7XG5pbXBvcnQgTEFOR1VBR0VTIGZyb20gJ2NvbnN0YW50cy9sYW5ndWFnZXMnO1xuaW1wb3J0IHsgQmVmb3JlVW5sb2FkLCBVbmxvYWQgfSBmcm9tICd1dGlsL2JlZm9yZVVubG9hZCc7XG5pbXBvcnQgeyBwbGF0Zm9ybSB9IGZyb20gJ3V0aWwvcGxhdGZvcm0nO1xuaW1wb3J0IEFkQmxvY2tUZXN0ZXIgZnJvbSAnd2ViL2NvbXBvbmVudC9hZEJsb2NrVGVzdGVyJztcbmltcG9ydCBBZHNTdGlja3kgZnJvbSAnd2ViL2NvbXBvbmVudC9hZHNTdGlja3knO1xuaW1wb3J0IFlvdXR1YmVXZWxjb21lIGZyb20gJ3dlYi9jb21wb25lbnQveW91dHViZVJlZmVycmFsV2VsY29tZSc7XG5pbXBvcnQge1xuICB1c2VEZWdyYWRlZFBlcmZvcm1hbmNlLFxuICBTVEFUVVNfT0ssXG4gIFNUQVRVU19ERUdSQURFRCxcbiAgU1RBVFVTX0ZBSUxJTkcsXG4gIFNUQVRVU19ET1dOLFxufSBmcm9tICd3ZWIvZWZmZWN0cy91c2UtZGVncmFkZWQtcGVyZm9ybWFuY2UnO1xuaW1wb3J0IExBTkdVQUdFX01JR1JBVElPTlMgZnJvbSAnY29uc3RhbnRzL2xhbmd1YWdlLW1pZ3JhdGlvbnMnO1xuaW1wb3J0IHsgdXNlSXNNb2JpbGUgfSBmcm9tICdlZmZlY3RzL3VzZS1zY3JlZW5zaXplJztcblxuY29uc3QgRmlsZURyb3AgPSBsYXp5SW1wb3J0KCgpID0+IGltcG9ydCgnY29tcG9uZW50L2ZpbGVEcm9wJyAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcImZpbGVEcm9wXCIgKi8pKTtcbmNvbnN0IE5hZ0NvbnRpbnVlRmlyc3RSdW4gPSBsYXp5SW1wb3J0KCgpID0+IGltcG9ydCgnY29tcG9uZW50L25hZ0NvbnRpbnVlRmlyc3RSdW4nIC8qIHdlYnBhY2tDaHVua05hbWU6IFwibmFnQ0ZSXCIgKi8pKTtcbmNvbnN0IE5hZ0RlZ3JhZGVkUGVyZm9ybWFuY2UgPSBsYXp5SW1wb3J0KCgpID0+XG4gIGltcG9ydCgnd2ViL2NvbXBvbmVudC9uYWctZGVncmFkZWQtcGVyZm9ybWFuY2UnIC8qIHdlYnBhY2tDaHVua05hbWU6IFwiTmFnRGVncmFkZWRQZXJmb3JtYW5jZVwiICovKVxuKTtcbmNvbnN0IE5hZ05vVXNlciA9IGxhenlJbXBvcnQoKCkgPT4gaW1wb3J0KCd3ZWIvY29tcG9uZW50L25hZy1uby11c2VyJyAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcIm5hZy1uby11c2VyXCIgKi8pKTtcbmNvbnN0IE5hZ1N1bnNldCA9IGxhenlJbXBvcnQoKCkgPT4gaW1wb3J0KCd3ZWIvY29tcG9uZW50L25hZy1zdW5zZXQnIC8qIHdlYnBhY2tDaHVua05hbWU6IFwibmFnLXN1bnNldFwiICovKSk7XG5jb25zdCBTeW5jRmF0YWxFcnJvciA9IGxhenlJbXBvcnQoKCkgPT4gaW1wb3J0KCdjb21wb25lbnQvc3luY0ZhdGFsRXJyb3InIC8qIHdlYnBhY2tDaHVua05hbWU6IFwic3luY0ZhdGFsRXJyb3JcIiAqLykpO1xuXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbmV4cG9ydCBjb25zdCBNQUlOX1dSQVBQRVJfQ0xBU1MgPSAnbWFpbi13cmFwcGVyJztcbmV4cG9ydCBjb25zdCBJU19NQUMgPSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ01hYyBPUyBYJykgIT09IC0xO1xuXG4vLyBjb25zdCBpbWFMaWJyYXJ5UGF0aCA9ICdodHRwczovL2ltYXNkay5nb29nbGVhcGlzLmNvbS9qcy9zZGtsb2FkZXIvaW1hMy5qcyc7XG5jb25zdCBvbmVUcnVzdFNjcmlwdFNyYyA9ICdodHRwczovL2Nkbi5jb29raWVsYXcub3JnL3NjcmlwdHRlbXBsYXRlcy9vdFNES1N0dWIuanMnO1xuXG5jb25zdCBMQVRFU1RfUEFUSCA9IGAvJC8ke1BBR0VTLkxBVEVTVH0vYDtcbmNvbnN0IExJVkVfUEFUSCA9IGAvJC8ke1BBR0VTLkxJVkVfTk9XfS9gO1xuY29uc3QgRU1CRURfUEFUSCA9IGAvJC8ke1BBR0VTLkVNQkVEfS9gO1xuXG50eXBlIFByb3BzID0ge1xuICBsYW5ndWFnZTogc3RyaW5nLFxuICBsYW5ndWFnZXM6IEFycmF5PHN0cmluZz4sXG4gIHRoZW1lOiBzdHJpbmcsXG4gIHVzZXI6ID97IGlkOiBzdHJpbmcsIGhhc192ZXJpZmllZF9lbWFpbDogYm9vbGVhbiwgaXNfcmV3YXJkX2FwcHJvdmVkOiBib29sZWFuIH0sXG4gIGxvY2FsZTogP0xvY2FsZUluZm8sXG4gIGxvY2F0aW9uOiB7IHBhdGhuYW1lOiBzdHJpbmcsIGhhc2g6IHN0cmluZywgc2VhcmNoOiBzdHJpbmcsIGhvc3RuYW1lOiBzdHJpbmcsIHJlbG9hZDogKCkgPT4gdm9pZCB9LFxuICBoaXN0b3J5OiB7IHB1c2g6IChzdHJpbmcpID0+IHZvaWQsIGxvY2F0aW9uOiB7IHBhdGhuYW1lOiBzdHJpbmcgfSwgcmVwbGFjZTogKHN0cmluZykgPT4gdm9pZCB9LFxuICBmZXRjaENoYW5uZWxMaXN0TWluZTogKCkgPT4gdm9pZCxcbiAgZmV0Y2hDb2xsZWN0aW9uTGlzdE1pbmU6ICgpID0+IHZvaWQsXG4gIHNpZ25JbjogKCkgPT4gdm9pZCxcbiAgc2V0TGFuZ3VhZ2U6IChzdHJpbmcpID0+IHZvaWQsXG4gIGZldGNoTGFuZ3VhZ2U6IChzdHJpbmcpID0+IHZvaWQsXG4gIGlzUmVsb2FkUmVxdWlyZWQ6IGJvb2xlYW4sXG4gIHVwbG9hZENvdW50OiBudW1iZXIsXG4gIGJhbGFuY2U6ID9udW1iZXIsXG4gIHN5bmNJc0xvY2tlZDogYm9vbGVhbixcbiAgc3luY0Vycm9yOiA/c3RyaW5nLFxuICBwcmVmc1JlYWR5OiBib29sZWFuLFxuICByZXdhcmRzOiBBcnJheTxSZXdhcmQ+LFxuICBkb1VzZXJTZXRSZWZlcnJlckZvclVyaTogKHJlZmVycmVyVXJpOiBzdHJpbmcpID0+IHZvaWQsXG4gIGlzQXV0aGVudGljYXRlZDogYm9vbGVhbixcbiAgc3luY0xvb3A6ICg/Ym9vbGVhbikgPT4gdm9pZCxcbiAgY3VycmVudE1vZGFsOiBhbnksXG4gIHN5bmNGYXRhbEVycm9yOiBib29sZWFuLFxuICBhY3RpdmVDaGFubmVsQ2xhaW06ID9DaGFubmVsQ2xhaW0sXG4gIG15Q2hhbm5lbENsYWltSWRzOiA/QXJyYXk8c3RyaW5nPixcbiAgc2V0SW5jb2duaXRvOiAoYm9vbGVhbikgPT4gdm9pZCxcbiAgZmV0Y2hNb2RCbG9ja2VkTGlzdDogKCkgPT4gdm9pZCxcbiAgZmV0Y2hNb2RBbUlMaXN0OiAoKSA9PiB2b2lkLFxuICBob21lcGFnZUZldGNoZWQ6IGJvb2xlYW4sXG4gIGRlZmF1bHRDaGFubmVsQ2xhaW06ID9hbnksXG4gIG5hZ3NTaG93bjogYm9vbGVhbixcbiAgYW5ub3VuY2VtZW50OiBzdHJpbmcsXG4gIGRvT3BlbkFubm91bmNlbWVudHM6ICgpID0+IHZvaWQsXG4gIGRvU2V0TGFzdFZpZXdlZEFubm91bmNlbWVudDogKGhhc2g6IHN0cmluZykgPT4gdm9pZCxcbiAgZG9TZXREZWZhdWx0Q2hhbm5lbDogKGNsYWltSWQ6IHN0cmluZykgPT4gdm9pZCxcbiAgZG9TZXRHZHByQ29uc2VudExpc3Q6IChjc3Y6IHN0cmluZykgPT4gdm9pZCxcbn07XG5cbmZ1bmN0aW9uIEFwcChwcm9wczogUHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIHRoZW1lLFxuICAgIHVzZXIsXG4gICAgbG9jYWxlLFxuICAgIGxvY2F0aW9uLFxuICAgIGZldGNoQ2hhbm5lbExpc3RNaW5lLFxuICAgIGZldGNoQ29sbGVjdGlvbkxpc3RNaW5lLFxuICAgIHNpZ25JbixcbiAgICBpc1JlbG9hZFJlcXVpcmVkLFxuICAgIHVwbG9hZENvdW50LFxuICAgIGhpc3RvcnksXG4gICAgc3luY0Vycm9yLFxuICAgIHN5bmNJc0xvY2tlZCxcbiAgICBwcmVmc1JlYWR5LFxuICAgIGxhbmd1YWdlLFxuICAgIGxhbmd1YWdlcyxcbiAgICBzZXRMYW5ndWFnZSxcbiAgICBmZXRjaExhbmd1YWdlLFxuICAgIHJld2FyZHMsXG4gICAgZG9Vc2VyU2V0UmVmZXJyZXJGb3JVcmksXG4gICAgaXNBdXRoZW50aWNhdGVkLFxuICAgIHN5bmNMb29wLFxuICAgIGN1cnJlbnRNb2RhbCxcbiAgICBzeW5jRmF0YWxFcnJvcixcbiAgICBteUNoYW5uZWxDbGFpbUlkcyxcbiAgICBhY3RpdmVDaGFubmVsQ2xhaW0sXG4gICAgc2V0SW5jb2duaXRvLFxuICAgIGZldGNoTW9kQmxvY2tlZExpc3QsXG4gICAgZmV0Y2hNb2RBbUlMaXN0LFxuICAgIGRlZmF1bHRDaGFubmVsQ2xhaW0sXG4gICAgbmFnc1Nob3duLFxuICAgIGFubm91bmNlbWVudCxcbiAgICBkb09wZW5Bbm5vdW5jZW1lbnRzLFxuICAgIGRvU2V0TGFzdFZpZXdlZEFubm91bmNlbWVudCxcbiAgICBkb1NldERlZmF1bHRDaGFubmVsLFxuICAgIGRvU2V0R2RwckNvbnNlbnRMaXN0LFxuICB9ID0gcHJvcHM7XG5cbiAgY29uc3QgaXNNb2JpbGUgPSB1c2VJc01vYmlsZSgpO1xuICBjb25zdCBpc0VuaGFuY2VkTGF5b3V0ID0gdXNlS29uYW1pTGlzdGVuZXIoKTtcbiAgY29uc3QgW2hhc1NpZ25lZEluLCBzZXRIYXNTaWduZWRJbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGhhc1ZlcmlmaWVkRW1haWwgPSB1c2VyICYmIEJvb2xlYW4odXNlci5oYXNfdmVyaWZpZWRfZW1haWwpO1xuICBjb25zdCBpc1Jld2FyZEFwcHJvdmVkID0gdXNlciAmJiB1c2VyLmlzX3Jld2FyZF9hcHByb3ZlZDtcbiAgY29uc3QgcHJldmlvdXNIYXNWZXJpZmllZEVtYWlsID0gdXNlUHJldmlvdXMoaGFzVmVyaWZpZWRFbWFpbCk7XG4gIGNvbnN0IHByZXZpb3VzUmV3YXJkQXBwcm92ZWQgPSB1c2VQcmV2aW91cyhpc1Jld2FyZEFwcHJvdmVkKTtcblxuICBjb25zdCBbbGJyeVR2QXBpU3RhdHVzLCBzZXRMYnJ5VHZBcGlTdGF0dXNdID0gdXNlU3RhdGUoU1RBVFVTX09LKTtcbiAgY29uc3QgW3NpZGViYXJPcGVuXSA9IHVzZVBlcnNpc3RlZFN0YXRlKCdzaWRlYmFyJywgZmFsc2UpO1xuXG4gIGNvbnN0IHsgcGF0aG5hbWUsIGhhc2gsIHNlYXJjaCwgaG9zdG5hbWUgfSA9IGxvY2F0aW9uO1xuICBjb25zdCBbcmV0cnlpbmdTeW5jLCBzZXRSZXRyeWluZ1N5bmNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbGFuZ1JlbmRlcktleSwgc2V0TGFuZ1JlbmRlcktleV0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW3NlZW5TdW5zZXN0TWVzc2FnZSwgc2V0U2VlblN1bnNldE1lc3NhZ2VdID0gdXNlUGVyc2lzdGVkU3RhdGUoJ2xicnl0di1zdW5zZXQnLCBmYWxzZSk7XG4gIC8vIHJlZmVycmFsIGNsYWltaW5nXG4gIGNvbnN0IHJlZmVycmVkUmV3YXJkQXZhaWxhYmxlID0gcmV3YXJkcyAmJiByZXdhcmRzLnNvbWUoKHJld2FyZCkgPT4gcmV3YXJkLnJld2FyZF90eXBlID09PSBSRVdBUkRTLlRZUEVfUkVGRVJFRSk7XG4gIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoc2VhcmNoKTtcbiAgY29uc3QgcmF3UmVmZXJyZXJQYXJhbSA9IHVybFBhcmFtcy5nZXQoJ3InKTtcbiAgY29uc3QgZnJvbUxicnl0dlBhcmFtID0gdXJsUGFyYW1zLmdldCgnc3Vuc2V0Jyk7XG4gIGNvbnN0IHNhbml0aXplZFJlZmVycmVyUGFyYW0gPSByYXdSZWZlcnJlclBhcmFtICYmIHJhd1JlZmVycmVyUGFyYW0ucmVwbGFjZSgnOicsICcjJyk7XG4gIGNvbnN0IGVtYmVkUGF0aCA9IHBhdGhuYW1lLnN0YXJ0c1dpdGgoRU1CRURfUEFUSCk7XG4gIGNvbnN0IHNob3VsZEhpZGVOYWcgPSBlbWJlZFBhdGggfHwgcGF0aG5hbWUuc3RhcnRzV2l0aChgLyQvJHtQQUdFUy5BVVRIX1ZFUklGWX1gKTtcbiAgY29uc3QgdXNlcklkID0gdXNlciAmJiB1c2VyLmlkO1xuICBjb25zdCBoYXNNeUNoYW5uZWxzID0gbXlDaGFubmVsQ2xhaW1JZHMgJiYgbXlDaGFubmVsQ2xhaW1JZHMubGVuZ3RoID4gMDtcbiAgY29uc3QgaGFzTm9DaGFubmVscyA9IG15Q2hhbm5lbENsYWltSWRzICYmIG15Q2hhbm5lbENsYWltSWRzLmxlbmd0aCA9PT0gMDtcbiAgY29uc3Qgc2hvdWxkTWlncmF0ZUxhbmd1YWdlID0gTEFOR1VBR0VfTUlHUkFUSU9OU1tsYW5ndWFnZV07XG4gIGNvbnN0IHJlbmRlckZpbGVkcm9wID0gIWlzTW9iaWxlICYmIGlzQXV0aGVudGljYXRlZCAmJiAhcGxhdGZvcm0uaXNGaXJlZm94KCk7XG4gIGNvbnN0IGNvbm5lY3Rpb25TdGF0dXMgPSB1c2VDb25uZWN0aW9uU3RhdHVzKCk7XG5cbiAgY29uc3QgdXJsUGF0aCA9IHBhdGhuYW1lICsgaGFzaDtcbiAgY29uc3QgbGF0ZXN0Q29udGVudFBhdGggPSB1cmxQYXRoLnN0YXJ0c1dpdGgoTEFURVNUX1BBVEgpO1xuICBjb25zdCBsaXZlQ29udGVudFBhdGggPSB1cmxQYXRoLnN0YXJ0c1dpdGgoTElWRV9QQVRIKTtcbiAgY29uc3QgZmVhdHVyZVBhcmFtID0gdXJsUGFyYW1zLmdldCgnZmVhdHVyZScpO1xuICBjb25zdCBlbWJlZExhdGVzdFBhdGggPSBlbWJlZFBhdGggJiYgKGZlYXR1cmVQYXJhbSA9PT0gUEFHRVMuTEFURVNUIHx8IGZlYXR1cmVQYXJhbSA9PT0gUEFHRVMuTElWRV9OT1cpO1xuICBjb25zdCBpc05ld2VzdFBhdGggPSBsYXRlc3RDb250ZW50UGF0aCB8fCBsaXZlQ29udGVudFBhdGggfHwgZW1iZWRMYXRlc3RQYXRoO1xuXG4gIGxldCBwYXRoO1xuICBpZiAoaXNOZXdlc3RQYXRoKSB7XG4gICAgcGF0aCA9IHVybFBhdGgucmVwbGFjZShlbWJlZExhdGVzdFBhdGggPyBFTUJFRF9QQVRIIDogbGF0ZXN0Q29udGVudFBhdGggPyBMQVRFU1RfUEFUSCA6IExJVkVfUEFUSCwgJycpO1xuICB9IGVsc2Uge1xuICAgIC8vIFJlbW92ZSB0aGUgbGVhZGluZyBcIi9cIiBhZGRlZCBieSB0aGUgYnJvd3NlclxuICAgIHBhdGggPSB1cmxQYXRoLnNsaWNlKDEpO1xuICB9XG4gIHBhdGggPSBwYXRoLnJlcGxhY2UoLzovZywgJyMnKTtcblxuICBpZiAoaXNOZXdlc3RQYXRoICYmICFwYXRoLnN0YXJ0c1dpdGgoJ0AnKSkge1xuICAgIHBhdGggPSBgQCR7cGF0aH1gO1xuICB9XG5cbiAgaWYgKHNlYXJjaCAmJiBzZWFyY2guc3RhcnRzV2l0aCgnP3E9Y2FjaGU6JykpIHtcbiAgICBnZW5lcmF0ZUdvb2dsZUNhY2hlVXJsKHNlYXJjaCwgcGF0aCk7XG4gIH1cblxuICBsZXQgdXJpO1xuICB0cnkge1xuICAgIC8vIGhlcmUgcXVlcnlTdHJpbmcgYW5kIHN0YXJ0VGltZSBhcmUgXCJyZW1vdmVkXCIgZnJvbSB0aGUgYnVpbGRVUkkgcHJvY2Vzc1xuICAgIC8vIHRvIGJ1aWxkIG9ubHkgdGhlIHVyaSBpdHNlbGZcbiAgICBjb25zdCB7IHF1ZXJ5U3RyaW5nLCBzdGFydFRpbWUsIC4uLnBhcnNlZFVyaSB9ID0gcGFyc2VVUkkocGF0aCk7XG4gICAgdXJpID0gYnVpbGRVUkkoeyAuLi5wYXJzZWRVcmkgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zdCBtYXRjaCA9IHBhdGgubWF0Y2goL1sjLzpdLyk7XG5cbiAgICBpZiAoIXBhdGguc3RhcnRzV2l0aCgnJC8nKSAmJiBtYXRjaCAmJiBtYXRjaC5pbmRleCkge1xuICAgICAgdXJpID0gYGxicnk6Ly8ke3BhdGguc2xpY2UoMCwgbWF0Y2guaW5kZXgpfWA7XG4gICAgfSBlbHNlIGlmIChwYXRoLnN0YXJ0c1dpdGgoYCQvJHtQQUdFUy5FTUJFRH0vYCkpIHtcbiAgICAgIHVyaSA9IGBsYnJ5Oi8vJHtwYXRoLnJlcGxhY2UoYCQvJHtQQUdFUy5FTUJFRH0vYCwgJycpfWA7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0U3RhdHVzTmFnKCkge1xuICAgIC8vIEhhbmRsZSBcIm9mZmxpbmVcIiBmaXJzdC4gRXZlcnl0aGluZyBlbHNlIGlzIG1lYW5pbmdsZXNzIGlmIGl0J3Mgb2ZmbGluZS5cbiAgICBpZiAoIWNvbm5lY3Rpb25TdGF0dXMub25saW5lKSB7XG4gICAgICByZXR1cm4gPE5hZyB0eXBlPVwiaGVscGZ1bFwiIG1lc3NhZ2U9e19fKCdZb3UgYXJlIG9mZmxpbmUuIENoZWNrIHlvdXIgaW50ZXJuZXQgY29ubmVjdGlvbi4nKX0gLz47XG4gICAgfVxuXG4gICAgLy8gT25seSAxIG5hZyBpcyBwb3NzaWJsZSwgc28gc2hvdyB0aGUgbW9zdCBpbXBvcnRhbnQ6XG5cbiAgICBpZiAodXNlciA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIDxOYWdOb1VzZXIgLz47XG4gICAgfVxuXG4gICAgaWYgKGxicnlUdkFwaVN0YXR1cyA9PT0gU1RBVFVTX0RFR1JBREVEIHx8IGxicnlUdkFwaVN0YXR1cyA9PT0gU1RBVFVTX0ZBSUxJTkcpIHtcbiAgICAgIGlmICghc2hvdWxkSGlkZU5hZykge1xuICAgICAgICByZXR1cm4gPE5hZ0RlZ3JhZGVkUGVyZm9ybWFuY2Ugb25DbG9zZT17KCkgPT4gc2V0TGJyeVR2QXBpU3RhdHVzKFNUQVRVU19PSyl9IC8+O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzeW5jRmF0YWxFcnJvcikge1xuICAgICAgaWYgKCFyZXRyeWluZ1N5bmMpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8TmFnXG4gICAgICAgICAgICB0eXBlPVwiZXJyb3JcIlxuICAgICAgICAgICAgbWVzc2FnZT17X18oJ0ZhaWxlZCB0byBzeW5jaHJvbml6ZSBzZXR0aW5ncy4gV2FpdCBhIHdoaWxlIGJlZm9yZSByZXRyeWluZy4nKX1cbiAgICAgICAgICAgIGFjdGlvblRleHQ9e19fKCdSZXRyeScpfVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICBzeW5jTG9vcCh0cnVlKTtcbiAgICAgICAgICAgICAgc2V0UmV0cnlpbmdTeW5jKHRydWUpO1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHNldFJldHJ5aW5nU3luYyhmYWxzZSksIDQwMDApO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNSZWxvYWRSZXF1aXJlZCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPE5hZ1xuICAgICAgICAgIG1lc3NhZ2U9e19fKCdBIG5ldyB2ZXJzaW9uIG9mIE9keXNlZSBpcyBhdmFpbGFibGUuJyl9XG4gICAgICAgICAgYWN0aW9uVGV4dD17X18oJ1JlZnJlc2gnKX1cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCl9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHVzZXJJZCkge1xuICAgICAgYW5hbHl0aWNzLnNldFVzZXIodXNlcklkKTtcbiAgICAgIHNldFNlYXJjaFVzZXJJZCh1c2VySWQpO1xuICAgIH1cbiAgfSwgW3VzZXJJZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN5bmNJc0xvY2tlZCkge1xuICAgICAgY29uc3QgbXNnID0gJ1RoZXJlIGFyZSB1bnNhdmVkIHNldHRpbmdzLiBFeGl0IHRoZSBTZXR0aW5ncyBQYWdlIHRvIGZpbmFsaXplIHRoZW0uJztcbiAgICAgIGNvbnN0IGhhbmRsZUJlZm9yZVVubG9hZCA9IChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IG1zZztcbiAgICAgIH07XG5cbiAgICAgIEJlZm9yZVVubG9hZC5yZWdpc3RlcihoYW5kbGVCZWZvcmVVbmxvYWQsIG1zZyk7XG4gICAgICByZXR1cm4gKCkgPT4gQmVmb3JlVW5sb2FkLnVucmVnaXN0ZXIoaGFuZGxlQmVmb3JlVW5sb2FkKTtcbiAgICB9XG4gIH0sIFtzeW5jSXNMb2NrZWRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdXBsb2FkQ291bnQpIHJldHVybjtcblxuICAgIGNvbnN0IG1zZyA9ICdVbmZpbmlzaGVkIHVwbG9hZHMuJztcbiAgICBjb25zdCBoYW5kbGVVbmxvYWQgPSAoZXZlbnQpID0+IHR1c1VubG9ja0FuZE5vdGlmeSgpO1xuICAgIGNvbnN0IGhhbmRsZUJlZm9yZVVubG9hZCA9IChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gX18obXNnKTsgLy8gd2l0aG91dCBzZXR0aW5nIHRoaXMgdG8gc29tZXRoaW5nIGl0IGRvZXNuJ3Qgd29yayBpbiBzb21lIGJyb3dzZXJzLlxuICAgIH07XG5cbiAgICBVbmxvYWQucmVnaXN0ZXIoaGFuZGxlVW5sb2FkKTtcbiAgICBCZWZvcmVVbmxvYWQucmVnaXN0ZXIoaGFuZGxlQmVmb3JlVW5sb2FkLCBtc2cpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIFVubG9hZC51bnJlZ2lzdGVyKGhhbmRsZVVubG9hZCk7XG4gICAgICBCZWZvcmVVbmxvYWQudW5yZWdpc3RlcihoYW5kbGVCZWZvcmVVbmxvYWQpO1xuICAgIH07XG4gIH0sIFt1cGxvYWRDb3VudF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF1cGxvYWRDb3VudCkgcmV0dXJuO1xuXG4gICAgY29uc3Qgb25TdG9yYWdlVXBkYXRlID0gKGUpID0+IHR1c0hhbmRsZVRhYlVwZGF0ZXMoZS5rZXkpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgb25TdG9yYWdlVXBkYXRlKTtcblxuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIG9uU3RvcmFnZVVwZGF0ZSk7XG4gIH0sIFt1cGxvYWRDb3VudF0pO1xuXG4gIC8vIGFsbG93cyB1c2VyIHRvIHBhdXNlIG1pbmlwbGF5ZXIgdXNpbmcgdGhlIHNwYWNlYmFyIHdpdGhvdXQgdGhlIHBhZ2Ugc2Nyb2xsaW5nIGRvd25cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVLZXlQcmVzcyA9IChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICcgJyAmJiBlLnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleVByZXNzKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlQcmVzcyk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChyZWZlcnJlZFJld2FyZEF2YWlsYWJsZSAmJiBzYW5pdGl6ZWRSZWZlcnJlclBhcmFtKSB7XG4gICAgICBkb1VzZXJTZXRSZWZlcnJlckZvclVyaShzYW5pdGl6ZWRSZWZlcnJlclBhcmFtKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbc2FuaXRpemVkUmVmZXJyZXJQYXJhbSwgcmVmZXJyZWRSZXdhcmRBdmFpbGFibGVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICB9LCBbZmV0Y2hDaGFubmVsTGlzdE1pbmUsIGZldGNoQ29sbGVjdGlvbkxpc3RNaW5lXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyAkRmxvd0ZpeE1lXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgndGhlbWUnLCB0aGVtZSk7XG4gIH0sIFt0aGVtZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gJEZsb3dGaXhNZVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3dZID0gY3VycmVudE1vZGFsID8gJ2hpZGRlbicgOiAnJztcbiAgfSwgW2N1cnJlbnRNb2RhbF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGhhc05vQ2hhbm5lbHMpIHtcbiAgICAgIHNldEluY29nbml0byh0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAoaGFzTXlDaGFubmVscykge1xuICAgICAgZmV0Y2hNb2RCbG9ja2VkTGlzdCgpO1xuICAgICAgZmV0Y2hNb2RBbUlMaXN0KCk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW2hhc015Q2hhbm5lbHMsIGhhc05vQ2hhbm5lbHMsIHNldEluY29nbml0b10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGhhc015Q2hhbm5lbHMgJiYgYWN0aXZlQ2hhbm5lbENsYWltICYmICFkZWZhdWx0Q2hhbm5lbENsYWltICYmIHByZWZzUmVhZHkpIHtcbiAgICAgIGRvU2V0RGVmYXVsdENoYW5uZWwoYWN0aXZlQ2hhbm5lbENsYWltLmNsYWltX2lkKTtcbiAgICB9XG4gIH0sIFthY3RpdmVDaGFubmVsQ2xhaW0sIGRlZmF1bHRDaGFubmVsQ2xhaW0sIGRvU2V0RGVmYXVsdENoYW5uZWwsIGhhc015Q2hhbm5lbHMsIHByZWZzUmVhZHldKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vICRGbG93Rml4TWVcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdsYW5nJywgbGFuZ3VhZ2UpO1xuICB9LCBbbGFuZ3VhZ2VdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghbGFuZ3VhZ2VzLmluY2x1ZGVzKGxhbmd1YWdlKSkge1xuICAgICAgZmV0Y2hMYW5ndWFnZShsYW5ndWFnZSk7XG5cbiAgICAgIGlmIChkb2N1bWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgTEFOR1VBR0VTW2xhbmd1YWdlXS5sZW5ndGggPj0gMykge1xuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZGlyID0gTEFOR1VBR0VTW2xhbmd1YWdlXVsyXTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbbGFuZ3VhZ2UsIGxhbmd1YWdlc10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNob3VsZE1pZ3JhdGVMYW5ndWFnZSkge1xuICAgICAgc2V0TGFuZ3VhZ2Uoc2hvdWxkTWlncmF0ZUxhbmd1YWdlKTtcbiAgICB9XG4gIH0sIFtzaG91bGRNaWdyYXRlTGFuZ3VhZ2UsIHNldExhbmd1YWdlXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBDaGVjayB0aGF0IHByZXZpb3VzSGFzVmVyaWZpZWRFbWFpbCB3YXMgbm90IHVuZGVmaW5lZCBpbnN0ZWFkIG9mIGp1c3Qgbm90IHRydXRoeVxuICAgIC8vIFRoaXMgZW5zdXJlcyB3ZSBkb24ndCBmaXJlIHRoZSBlbWFpbFZlcmlmaWVkIGV2ZW50IG9uIHRoZSBpbml0aWFsIHVzZXIgZmV0Y2hcbiAgICBpZiAocHJldmlvdXNIYXNWZXJpZmllZEVtYWlsID09PSBmYWxzZSAmJiBoYXNWZXJpZmllZEVtYWlsKSB7XG4gICAgICBhbmFseXRpY3MuZXZlbnQuZW1haWxWZXJpZmllZCgpO1xuICAgIH1cbiAgfSwgW3ByZXZpb3VzSGFzVmVyaWZpZWRFbWFpbCwgaGFzVmVyaWZpZWRFbWFpbCwgc2lnbkluXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocHJldmlvdXNSZXdhcmRBcHByb3ZlZCA9PT0gZmFsc2UgJiYgaXNSZXdhcmRBcHByb3ZlZCkge1xuICAgICAgYW5hbHl0aWNzLmV2ZW50LnJld2FyZEVsaWdpYmxlKCk7XG4gICAgfVxuICB9LCBbcHJldmlvdXNSZXdhcmRBcHByb3ZlZCwgaXNSZXdhcmRBcHByb3ZlZF0pO1xuXG4gIC8vIExvYWQgSU1BMyBTREsgZm9yIGFuaXZpZXdcbiAgLy8gdXNlRWZmZWN0KCgpID0+IHtcbiAgLy8gICBpZiAoIWlzQXV0aGVudGljYXRlZCAmJiBTSE9XX0FEUykge1xuICAvLyAgICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gIC8vICAgICBzY3JpcHQuc3JjID0gaW1hTGlicmFyeVBhdGg7XG4gIC8vICAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuICAvLyAgICAgLy8gJEZsb3dGaXhNZVxuICAvLyAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAvLyAgICAgcmV0dXJuICgpID0+IHtcbiAgLy8gICAgICAgLy8gJEZsb3dGaXhNZVxuICAvLyAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gIC8vICAgICB9O1xuICAvLyAgIH1cbiAgLy8gfSwgW10pO1xuXG4gIC8vIGFkZCBPbmVUcnVzdCBzY3JpcHRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBkb24ndCBhZGQgc2NyaXB0IGZvciBlbWJlZGRlZCBjb250ZW50XG4gICAgZnVuY3Rpb24gaW5JZnJhbWUoKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gd2luZG93LnNlbGYgIT09IHdpbmRvdy50b3A7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpbklmcmFtZSgpIHx8ICFsb2NhbGUgfHwgIWxvY2FsZS5nZHByX3JlcXVpcmVkKSB7XG4gICAgICBjb25zdCBhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ09VVEJSQUlOJylbMF07XG4gICAgICBpZiAoYWQpIHtcbiAgICAgICAgaWYgKCFuYWdzU2hvd24pIGFkLmNsYXNzTGlzdC5hZGQoJ1ZJU0lCTEUnKTtcbiAgICAgICAgaWYgKCFzaWRlYmFyT3BlbiB8fCBpc01vYmlsZSkgYWQuY2xhc3NMaXN0LmFkZCgnTEVGVCcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vICRGbG93Rml4TWVcbiAgICBjb25zdCB1c2VQcm9kdWN0aW9uT25lVHJ1c3QgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nICYmIGhvc3RuYW1lID09PSAnb2R5c2VlLmNvbSc7XG5cbiAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICBzY3JpcHQuc3JjID0gb25lVHJ1c3RTY3JpcHRTcmM7XG4gICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnY2hhcnNldCcsICdVVEYtOCcpO1xuICAgIGlmICh1c2VQcm9kdWN0aW9uT25lVHJ1c3QpIHtcbiAgICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZG9tYWluLXNjcmlwdCcsICc4YTc5MmQ4NC01MGE1LTRiNjktYjA4MC02OTU0YWQ0ZDQ2MDYnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnZGF0YS1kb21haW4tc2NyaXB0JywgJzhhNzkyZDg0LTUwYTUtNGI2OS1iMDgwLTY5NTRhZDRkNDYwNi10ZXN0Jyk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2Vjb25kU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgLy8gT25lVHJ1c3QgYXNrcyB0byBhZGQgdGhpc1xuICAgIHNlY29uZFNjcmlwdC5pbm5lckhUTUwgPSAnZnVuY3Rpb24gT3B0YW5vbldyYXBwZXIoKSB7IHdpbmRvdy5nZHByQ2FsbGJhY2soKSB9JztcblxuICAgIHdpbmRvdy5nZHByQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICBkb1NldEdkcHJDb25zZW50TGlzdCh3aW5kb3cuT25ldHJ1c3RBY3RpdmVHcm91cHMpO1xuICAgICAgaWYgKHdpbmRvdy5PbmV0cnVzdEFjdGl2ZUdyb3Vwcy5pbmRleE9mKCdDMDAwMicpICE9PSAtMSkge1xuICAgICAgICBjb25zdCBhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ09VVEJSQUlOJylbMF07XG4gICAgICAgIGlmIChhZCAmJiAhd2luZG93Lm5hZ3NTaG93bikgYWQuY2xhc3NMaXN0LmFkZCgnVklTSUJMRScpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyAkRmxvd0ZpeE1lXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgIC8vICRGbG93Rml4TWVcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNlY29uZFNjcmlwdCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICBkb2N1bWVudC5oZWFkLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5yZW1vdmVDaGlsZChzZWNvbmRTY3JpcHQpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGVycik7IDwtLSBkaXNhYmxpbmcgdGhpcyAuLi4gaXQncyBjbG9nZ2luZyB1cCBTZW50cnkgbG9ncy5cbiAgICAgIH1cbiAgICB9O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHMgLS0gb25lIHRpbWUgYWZ0ZXIgbG9jYWxlIGlzIGZldGNoZWRcbiAgfSwgW2xvY2FsZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgd2luZG93Lm5hZ3NTaG93biA9IG5hZ3NTaG93bjtcbiAgICBpZiAobmFnc1Nob3duKSB7XG4gICAgICBjb25zdCBhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ1ZJU0lCTEUnKVswXTtcbiAgICAgIGlmIChhZCkgYWQuY2xhc3NMaXN0LnJlbW92ZSgnVklTSUJMRScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ09VVEJSQUlOJylbMF07XG4gICAgICBpZiAoYWQpIGFkLmNsYXNzTGlzdC5hZGQoJ1ZJU0lCTEUnKTtcbiAgICB9XG4gIH0sIFtuYWdzU2hvd25dKTtcblxuICAvLyByZWFkeSBmb3Igc3luYyBzeW5jcywgaG93ZXZlciBhZnRlciBzaWduaW4gd2hlbiBoYXNWZXJpZmllZEVtYWlsLCB0aGF0IHN5bmNzIHRvby5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBzaWduSW5TeW5jUHJlZiBpcyBjbGVhcmVkIGFmdGVyIHNoYXJlZFN0YXRlIGxvb3AuXG4gICAgY29uc3Qgc3luY0xvb3BXaXRob3V0SW50ZXJ2YWwgPSAoKSA9PiBzeW5jTG9vcCh0cnVlKTtcbiAgICBpZiAoaGFzU2lnbmVkSW4gJiYgaGFzVmVyaWZpZWRFbWFpbCkge1xuICAgICAgLy8gSW4gY2FzZSB3ZSBhcmUgc3luY2luZy5cbiAgICAgIHN5bmNMb29wKCk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBzeW5jTG9vcFdpdGhvdXRJbnRlcnZhbCk7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBzeW5jTG9vcFdpdGhvdXRJbnRlcnZhbCk7XG4gICAgfTtcbiAgfSwgW2hhc1NpZ25lZEluLCBoYXNWZXJpZmllZEVtYWlsLCBzeW5jTG9vcF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN5bmNFcnJvciAmJiBpc0F1dGhlbnRpY2F0ZWQgJiYgIXBhdGhuYW1lLmluY2x1ZGVzKFBBR0VTLkFVVEhfV0FMTEVUX1BBU1NXT1JEKSAmJiAhY3VycmVudE1vZGFsKSB7XG4gICAgICBoaXN0b3J5LnB1c2goYC8kLyR7UEFHRVMuQVVUSF9XQUxMRVRfUEFTU1dPUkR9P3JlZGlyZWN0PSR7cGF0aG5hbWV9YCk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW3N5bmNFcnJvciwgcGF0aG5hbWUsIGlzQXV0aGVudGljYXRlZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHByZWZzUmVhZHkgJiYgaXNBdXRoZW50aWNhdGVkICYmIChwYXRobmFtZSA9PT0gJy8nIHx8IHBhdGhuYW1lID09PSBgLyQvJHtQQUdFUy5IRUxQfWApICYmIGFubm91bmNlbWVudCAhPT0gJycpIHtcbiAgICAgIGRvT3BlbkFubm91bmNlbWVudHMoKTtcbiAgICB9XG4gIH0sIFthbm5vdW5jZW1lbnQsIGlzQXV0aGVudGljYXRlZCwgcGF0aG5hbWUsIHByZWZzUmVhZHldKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHdpbmRvdy5jbGVhckxhc3RWaWV3ZWRBbm5vdW5jZW1lbnQgPSAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnQ2xlYXJpbmcgaGlzdG9yeS4gUGxlYXNlIHdhaXQgLi4uJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgICAgZG9TZXRMYXN0Vmlld2VkQW5ub3VuY2VtZW50KCdjbGVhcicpO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICAvLyBLZWVwIHRoaXMgYXQgdGhlIGVuZCB0byBlbnN1cmUgaW5pdGlhbCBzZXR1cCBlZmZlY3RzIGFyZSBydW4gZmlyc3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWhhc1NpZ25lZEluICYmIGhhc1ZlcmlmaWVkRW1haWwpIHtcbiAgICAgIHNpZ25JbigpO1xuICAgICAgc2V0SGFzU2lnbmVkSW4odHJ1ZSk7XG4gICAgfVxuICB9LCBbaGFzVmVyaWZpZWRFbWFpbCwgc2lnbkluLCBoYXNTaWduZWRJbl0pO1xuXG4gIHVzZURlZ3JhZGVkUGVyZm9ybWFuY2Uoc2V0TGJyeVR2QXBpU3RhdHVzLCB1c2VyKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghc3luY0lzTG9ja2VkKSB7XG4gICAgICAvLyBXaGVuIGxhbmd1YWdlIGlzIGNoYW5nZWQgb3IgdHJhbnNsYXRpb25zIGFyZSBmZXRjaGVkLCB3ZSByZW5kZXIuXG4gICAgICBzZXRMYW5nUmVuZGVyS2V5KERhdGUubm93KCkpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzIC0tIGRvbid0IHJlc3BvbmQgdG8gc3luY0lzTG9ja2VkLCBidXQgc2tpcCBhY3Rpb24gd2hlbiBsb2NrZWQuXG4gIH0sIFtsYW5ndWFnZSwgbGFuZ3VhZ2VzXSk7XG5cbiAgY29uc3QgYXBwUmVmID0gUmVhY3QudXNlQ2FsbGJhY2soKHdyYXBwZXJFbGVtZW50KSA9PiB7XG4gICAgaWYgKHdyYXBwZXJFbGVtZW50KSB7XG4gICAgICBSZWFjdE1vZGFsLnNldEFwcEVsZW1lbnQod3JhcHBlckVsZW1lbnQpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIC8vIFJlcXVpcmUgYW4gaW50ZXJuYWwtYXBpIHVzZXIgb24gbGJyeS50dlxuICAvLyBUaGlzIGFsc28gcHJldmVudHMgdGhlIHNpdGUgZnJvbSBsb2FkaW5nIGluIHRoZSB1bi1hdXRoZWQgc3RhdGUgd2hpbGUgd2Ugd2FpdCBmb3IgaW50ZXJuYWwtYXBpcyB0byByZXR1cm4gZm9yIHRoZSBmaXJzdCB0aW1lXG4gIC8vIEl0J3Mgbm90IG5lZWRlZCBvbiBkZXNrdG9wIHNpbmNlIHRoZXJlIGlzIG5vIHVuLWF1dGhlZCBzdGF0ZVxuICBpZiAodXNlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWFpbi0tZW1wdHlcIj5cbiAgICAgICAgPFNwaW5uZXIgZGVsYXllZCAvPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIGlmIChjb25uZWN0aW9uU3RhdHVzLm9ubGluZSAmJiBsYnJ5VHZBcGlTdGF0dXMgPT09IFNUQVRVU19ET1dOKSB7XG4gICAgLy8gVE9ETzogUmVuYW1lIGBTeW5jRmF0YWxFcnJvcmAgc2luY2UgaXQgaGFzIG5vdGhpbmcgdG8gZG8gd2l0aCBzeW5jaW5nLlxuICAgIHJldHVybiAoXG4gICAgICA8UmVhY3QuU3VzcGVuc2UgZmFsbGJhY2s9e251bGx9PlxuICAgICAgICA8U3luY0ZhdGFsRXJyb3IgbGJyeVR2QXBpU3RhdHVzPXtsYnJ5VHZBcGlTdGF0dXN9IC8+XG4gICAgICA8L1JlYWN0LlN1c3BlbnNlPlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtNQUlOX1dSQVBQRVJfQ0xBU1N9IHJlZj17YXBwUmVmfSBrZXk9e2xhbmdSZW5kZXJLZXl9PlxuICAgICAge2xicnlUdkFwaVN0YXR1cyA9PT0gU1RBVFVTX0RPV04gPyAoXG4gICAgICAgIDxZcmJsXG4gICAgICAgICAgY2xhc3NOYW1lPVwibWFpbi0tZW1wdHlcIlxuICAgICAgICAgIHRpdGxlPXtfXygnb2R5c2VlLmNvbSBpcyBjdXJyZW50bHkgZG93bicpfVxuICAgICAgICAgIHN1YnRpdGxlPXtfXygnTXkgd2hlZWwgYnJva2UsIGJ1dCB0aGUgZ29vZCBuZXdzIGlzIHRoYXQgc29tZW9uZSBmcm9tIExCUlkgaXMgd29ya2luZyBvbiBpdC4nKX1cbiAgICAgICAgLz5cbiAgICAgICkgOiAoXG4gICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICA8QWRCbG9ja1Rlc3RlciAvPlxuICAgICAgICAgIDxBZHNTdGlja3kgdXJpPXt1cml9IC8+XG4gICAgICAgICAgPFJvdXRlciB1cmk9e3VyaX0gLz5cbiAgICAgICAgICA8TW9kYWxSb3V0ZXIgLz5cblxuICAgICAgICAgIDxSZWFjdC5TdXNwZW5zZSBmYWxsYmFjaz17bnVsbH0+e3JlbmRlckZpbGVkcm9wICYmIDxGaWxlRHJvcCAvPn08L1JlYWN0LlN1c3BlbnNlPlxuXG4gICAgICAgICAgPEZpbGVSZW5kZXJGbG9hdGluZyAvPlxuXG4gICAgICAgICAgPFJlYWN0LlN1c3BlbnNlIGZhbGxiYWNrPXtudWxsfT5cbiAgICAgICAgICAgIHtpc0VuaGFuY2VkTGF5b3V0ICYmIDxZcmJsIGNsYXNzTmFtZT1cInlyYmwtLWVuaGFuY2VkXCIgLz59XG5cbiAgICAgICAgICAgIDxZb3V0dWJlV2VsY29tZSAvPlxuICAgICAgICAgICAgeyFzaG91bGRIaWRlTmFnICYmIDxOYWdDb250aW51ZUZpcnN0UnVuIC8+fVxuICAgICAgICAgICAge2Zyb21MYnJ5dHZQYXJhbSAmJiAhc2VlblN1bnNlc3RNZXNzYWdlICYmICFzaG91bGRIaWRlTmFnICYmIChcbiAgICAgICAgICAgICAgPE5hZ1N1bnNldCBlbWFpbD17aGFzVmVyaWZpZWRFbWFpbH0gb25DbG9zZT17KCkgPT4gc2V0U2VlblN1bnNldE1lc3NhZ2UodHJ1ZSl9IC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge2dldFN0YXR1c05hZygpfVxuICAgICAgICAgIDwvUmVhY3QuU3VzcGVuc2U+XG4gICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoUm91dGVyKEFwcCk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQSxnT0FDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBeUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXVDQTtBQUNBO0FBQ0E7QUF6Q0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQXlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBOUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQXFEQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSEE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBUkE7QUFXQTtBQWRBO0FBZ0JBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQVZBO0FBYUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFiQTtBQW1CQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBTkE7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFQQTtBQVVBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFEQTtBQU9BO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQUNBO0FBREE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFEQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQWhCQTtBQUNBO0FBQ0E7QUFrQkE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUF4Q0E7QUFDQTtBQUNBO0FBMENBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQXpEQTtBQUFBO0FBOERBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBUkE7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQVJBO0FBYUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQURBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFGQTtBQURBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQURBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU9BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBSEE7QUFRQTtBQUFBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFRQTtBQUNBO0FBQ0E7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../ui/component/app/view.jsx\n");

/***/ }),

/***/ "../ui/component/claimPreviewTile/index.js":
/*!*************************************************!*\
  !*** ../ui/component/claimPreviewTile/index.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-redux */ \"../node_modules/react-redux/es/index.js\");\n/* harmony import */ var redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/selectors/claims */ \"../ui/redux/selectors/claims.js\");\n/* harmony import */ var redux_actions_file__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux/actions/file */ \"../ui/redux/actions/file.js\");\n/* harmony import */ var redux_actions_claims__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! redux/actions/claims */ \"../ui/redux/actions/claims.js\");\n/* harmony import */ var lbryinc__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lbryinc */ \"../extras/lbryinc/index.js\");\n/* harmony import */ var redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! redux/selectors/file_info */ \"../ui/redux/selectors/file_info.js\");\n/* harmony import */ var redux_selectors_livestream__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! redux/selectors/livestream */ \"../ui/redux/selectors/livestream.js\");\n/* harmony import */ var redux_selectors_settings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! redux/selectors/settings */ \"../ui/redux/selectors/settings.js\");\n/* harmony import */ var util_claim__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! util/claim */ \"../ui/util/claim.js\");\n/* harmony import */ var _view__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./view */ \"../ui/component/claimPreviewTile/view.jsx\");\n/* harmony import */ var util_formatMediaDuration__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! util/formatMediaDuration */ \"../ui/util/formatMediaDuration.js\");\n\n\n\n\n\n\n\n\n\n\n\n\nvar select = function select(state, props) {\n  var claim = props.uri && Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"makeSelectClaimForUri\"])(props.uri)(state);\n  var media = claim && claim.value && (claim.value.video || claim.value.audio);\n  var mediaDuration = media && media.duration && Object(util_formatMediaDuration__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(media.duration, {\n    screenReader: true\n  });\n  var isLivestream = Object(util_claim__WEBPACK_IMPORTED_MODULE_8__[\"isStreamPlaceholderClaim\"])(claim);\n  var repostSrcUri = claim && claim.repost_url && claim.canonical_url;\n  return {\n    claim: claim,\n    mediaDuration: mediaDuration,\n    date: props.uri && Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectDateForUri\"])(state, props.uri),\n    isResolvingUri: props.uri && Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectIsUriResolving\"])(state, props.uri),\n    claimIsMine: props.uri && Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectClaimIsMine\"])(state, claim),\n    thumbnail: Object(util_claim__WEBPACK_IMPORTED_MODULE_8__[\"getThumbnailFromClaim\"])(claim),\n    title: props.uri && Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectTitleForUri\"])(state, props.uri),\n    banState: Object(lbryinc__WEBPACK_IMPORTED_MODULE_4__[\"selectBanStateForUri\"])(state, props.uri),\n    geoRestriction: Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectGeoRestrictionForUri\"])(state, props.uri),\n    streamingUrl: (repostSrcUri || props.uri) && Object(redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_5__[\"selectStreamingUrlForUri\"])(state, repostSrcUri || props.uri),\n    showMature: Object(redux_selectors_settings__WEBPACK_IMPORTED_MODULE_7__[\"selectShowMatureContent\"])(state),\n    isMature: claim ? Object(util_claim__WEBPACK_IMPORTED_MODULE_8__[\"isClaimNsfw\"])(claim) : false,\n    isLivestream: isLivestream,\n    isLivestreamActive: isLivestream && Object(redux_selectors_livestream__WEBPACK_IMPORTED_MODULE_6__[\"selectIsActiveLivestreamForUri\"])(state, props.uri),\n    livestreamViewerCount: isLivestream && claim ? Object(redux_selectors_livestream__WEBPACK_IMPORTED_MODULE_6__[\"selectViewersForId\"])(state, claim.claim_id) : undefined,\n    viewCount: Object(lbryinc__WEBPACK_IMPORTED_MODULE_4__[\"selectViewCountForUri\"])(state, props.uri)\n  };\n};\n\nvar perform = function perform(dispatch) {\n  return {\n    resolveUri: function resolveUri(uri) {\n      return dispatch(Object(redux_actions_claims__WEBPACK_IMPORTED_MODULE_3__[\"doResolveUri\"])(uri));\n    },\n    getFile: function getFile(uri) {\n      return dispatch(Object(redux_actions_file__WEBPACK_IMPORTED_MODULE_2__[\"doFileGetForUri\"])(uri));\n    }\n  };\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_0__[\"connect\"])(select, perform)(_view__WEBPACK_IMPORTED_MODULE_9__[\"default\"]));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvY29tcG9uZW50L2NsYWltUHJldmlld1RpbGUvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vdWkvY29tcG9uZW50L2NsYWltUHJldmlld1RpbGUvaW5kZXguanM/YzQzYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHtcbiAgbWFrZVNlbGVjdENsYWltRm9yVXJpLFxuICBzZWxlY3RJc1VyaVJlc29sdmluZyxcbiAgc2VsZWN0VGl0bGVGb3JVcmksXG4gIHNlbGVjdERhdGVGb3JVcmksXG4gIHNlbGVjdEdlb1Jlc3RyaWN0aW9uRm9yVXJpLFxuICBzZWxlY3RDbGFpbUlzTWluZSxcbn0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2NsYWltcyc7XG5pbXBvcnQgeyBkb0ZpbGVHZXRGb3JVcmkgfSBmcm9tICdyZWR1eC9hY3Rpb25zL2ZpbGUnO1xuaW1wb3J0IHsgZG9SZXNvbHZlVXJpIH0gZnJvbSAncmVkdXgvYWN0aW9ucy9jbGFpbXMnO1xuaW1wb3J0IHsgc2VsZWN0Vmlld0NvdW50Rm9yVXJpLCBzZWxlY3RCYW5TdGF0ZUZvclVyaSB9IGZyb20gJ2xicnlpbmMnO1xuaW1wb3J0IHsgc2VsZWN0U3RyZWFtaW5nVXJsRm9yVXJpIH0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2ZpbGVfaW5mbyc7XG5pbXBvcnQgeyBzZWxlY3RJc0FjdGl2ZUxpdmVzdHJlYW1Gb3JVcmksIHNlbGVjdFZpZXdlcnNGb3JJZCB9IGZyb20gJ3JlZHV4L3NlbGVjdG9ycy9saXZlc3RyZWFtJztcbmltcG9ydCB7IHNlbGVjdFNob3dNYXR1cmVDb250ZW50IH0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL3NldHRpbmdzJztcbmltcG9ydCB7IGlzQ2xhaW1Oc2Z3LCBpc1N0cmVhbVBsYWNlaG9sZGVyQ2xhaW0sIGdldFRodW1ibmFpbEZyb21DbGFpbSB9IGZyb20gJ3V0aWwvY2xhaW0nO1xuaW1wb3J0IENsYWltUHJldmlld1RpbGUgZnJvbSAnLi92aWV3JztcbmltcG9ydCBmb3JtYXRNZWRpYUR1cmF0aW9uIGZyb20gJ3V0aWwvZm9ybWF0TWVkaWFEdXJhdGlvbic7XG5cbmNvbnN0IHNlbGVjdCA9IChzdGF0ZSwgcHJvcHMpID0+IHtcbiAgY29uc3QgY2xhaW0gPSBwcm9wcy51cmkgJiYgbWFrZVNlbGVjdENsYWltRm9yVXJpKHByb3BzLnVyaSkoc3RhdGUpO1xuICBjb25zdCBtZWRpYSA9IGNsYWltICYmIGNsYWltLnZhbHVlICYmIChjbGFpbS52YWx1ZS52aWRlbyB8fCBjbGFpbS52YWx1ZS5hdWRpbyk7XG4gIGNvbnN0IG1lZGlhRHVyYXRpb24gPSBtZWRpYSAmJiBtZWRpYS5kdXJhdGlvbiAmJiBmb3JtYXRNZWRpYUR1cmF0aW9uKG1lZGlhLmR1cmF0aW9uLCB7IHNjcmVlblJlYWRlcjogdHJ1ZSB9KTtcbiAgY29uc3QgaXNMaXZlc3RyZWFtID0gaXNTdHJlYW1QbGFjZWhvbGRlckNsYWltKGNsYWltKTtcbiAgY29uc3QgcmVwb3N0U3JjVXJpID0gY2xhaW0gJiYgY2xhaW0ucmVwb3N0X3VybCAmJiBjbGFpbS5jYW5vbmljYWxfdXJsO1xuXG4gIHJldHVybiB7XG4gICAgY2xhaW0sXG4gICAgbWVkaWFEdXJhdGlvbixcbiAgICBkYXRlOiBwcm9wcy51cmkgJiYgc2VsZWN0RGF0ZUZvclVyaShzdGF0ZSwgcHJvcHMudXJpKSxcbiAgICBpc1Jlc29sdmluZ1VyaTogcHJvcHMudXJpICYmIHNlbGVjdElzVXJpUmVzb2x2aW5nKHN0YXRlLCBwcm9wcy51cmkpLFxuICAgIGNsYWltSXNNaW5lOiBwcm9wcy51cmkgJiYgc2VsZWN0Q2xhaW1Jc01pbmUoc3RhdGUsIGNsYWltKSxcbiAgICB0aHVtYm5haWw6IGdldFRodW1ibmFpbEZyb21DbGFpbShjbGFpbSksXG4gICAgdGl0bGU6IHByb3BzLnVyaSAmJiBzZWxlY3RUaXRsZUZvclVyaShzdGF0ZSwgcHJvcHMudXJpKSxcbiAgICBiYW5TdGF0ZTogc2VsZWN0QmFuU3RhdGVGb3JVcmkoc3RhdGUsIHByb3BzLnVyaSksXG4gICAgZ2VvUmVzdHJpY3Rpb246IHNlbGVjdEdlb1Jlc3RyaWN0aW9uRm9yVXJpKHN0YXRlLCBwcm9wcy51cmkpLFxuICAgIHN0cmVhbWluZ1VybDogKHJlcG9zdFNyY1VyaSB8fCBwcm9wcy51cmkpICYmIHNlbGVjdFN0cmVhbWluZ1VybEZvclVyaShzdGF0ZSwgcmVwb3N0U3JjVXJpIHx8IHByb3BzLnVyaSksXG4gICAgc2hvd01hdHVyZTogc2VsZWN0U2hvd01hdHVyZUNvbnRlbnQoc3RhdGUpLFxuICAgIGlzTWF0dXJlOiBjbGFpbSA/IGlzQ2xhaW1Oc2Z3KGNsYWltKSA6IGZhbHNlLFxuICAgIGlzTGl2ZXN0cmVhbSxcbiAgICBpc0xpdmVzdHJlYW1BY3RpdmU6IGlzTGl2ZXN0cmVhbSAmJiBzZWxlY3RJc0FjdGl2ZUxpdmVzdHJlYW1Gb3JVcmkoc3RhdGUsIHByb3BzLnVyaSksXG4gICAgbGl2ZXN0cmVhbVZpZXdlckNvdW50OiBpc0xpdmVzdHJlYW0gJiYgY2xhaW0gPyBzZWxlY3RWaWV3ZXJzRm9ySWQoc3RhdGUsIGNsYWltLmNsYWltX2lkKSA6IHVuZGVmaW5lZCxcbiAgICB2aWV3Q291bnQ6IHNlbGVjdFZpZXdDb3VudEZvclVyaShzdGF0ZSwgcHJvcHMudXJpKSxcbiAgfTtcbn07XG5cbmNvbnN0IHBlcmZvcm0gPSAoZGlzcGF0Y2gpID0+ICh7XG4gIHJlc29sdmVVcmk6ICh1cmkpID0+IGRpc3BhdGNoKGRvUmVzb2x2ZVVyaSh1cmkpKSxcbiAgZ2V0RmlsZTogKHVyaSkgPT4gZGlzcGF0Y2goZG9GaWxlR2V0Rm9yVXJpKHVyaSkpLFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3Qoc2VsZWN0LCBwZXJmb3JtKShDbGFpbVByZXZpZXdUaWxlKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoQkE7QUFQQTtBQUNBO0FBMEJBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFFQTtBQUFBO0FBQUE7QUFGQTtBQUFBO0FBQ0E7QUFJQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../ui/component/claimPreviewTile/index.js\n");

/***/ }),

/***/ "../ui/component/fileDownloadLink/index.js":
/*!*************************************************!*\
  !*** ../ui/component/fileDownloadLink/index.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-redux */ \"../node_modules/react-redux/es/index.js\");\n/* harmony import */ var redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/selectors/claims */ \"../ui/redux/selectors/claims.js\");\n/* harmony import */ var redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux/selectors/file_info */ \"../ui/redux/selectors/file_info.js\");\n/* harmony import */ var lbryinc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lbryinc */ \"../extras/lbryinc/index.js\");\n/* harmony import */ var redux_actions_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! redux/actions/app */ \"../ui/redux/actions/app.js\");\n/* harmony import */ var redux_actions_content__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! redux/actions/content */ \"../ui/redux/actions/content.js\");\n/* harmony import */ var _view__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./view */ \"../ui/component/fileDownloadLink/view.jsx\");\n\n\n\n\n\n\n\n\nvar select = function select(state, props) {\n  var claim = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectClaimForUri\"])(state, props.uri);\n  return {\n    fileInfo: Object(redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_2__[\"makeSelectFileInfoForUri\"])(props.uri)(state),\n    downloading: Object(redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_2__[\"makeSelectDownloadingForUri\"])(props.uri)(state),\n    loading: Object(redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_2__[\"makeSelectLoadingForUri\"])(props.uri)(state),\n    claimIsMine: Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectClaimIsMine\"])(state, claim),\n    claim: claim,\n    costInfo: Object(lbryinc__WEBPACK_IMPORTED_MODULE_3__[\"selectCostInfoForUri\"])(state, props.uri),\n    streamingUrl: Object(redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_2__[\"selectStreamingUrlForUri\"])(state, props.uri)\n  };\n};\n\nvar perform = function perform(dispatch) {\n  return {\n    openModal: function openModal(modal, props) {\n      return dispatch(Object(redux_actions_app__WEBPACK_IMPORTED_MODULE_4__[\"doOpenModal\"])(modal, props));\n    },\n    pause: function pause() {\n      return dispatch(Object(redux_actions_content__WEBPACK_IMPORTED_MODULE_5__[\"doClearPlayingUri\"])());\n    },\n    download: function download(uri) {\n      return dispatch(Object(redux_actions_content__WEBPACK_IMPORTED_MODULE_5__[\"doDownloadUri\"])(uri));\n    }\n  };\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_0__[\"connect\"])(select, perform)(_view__WEBPACK_IMPORTED_MODULE_6__[\"default\"]));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvY29tcG9uZW50L2ZpbGVEb3dubG9hZExpbmsvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vdWkvY29tcG9uZW50L2ZpbGVEb3dubG9hZExpbmsvaW5kZXguanM/Nzg4MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHsgc2VsZWN0Q2xhaW1Jc01pbmUsIHNlbGVjdENsYWltRm9yVXJpIH0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2NsYWltcyc7XG5pbXBvcnQge1xuICBtYWtlU2VsZWN0RmlsZUluZm9Gb3JVcmksXG4gIG1ha2VTZWxlY3REb3dubG9hZGluZ0ZvclVyaSxcbiAgbWFrZVNlbGVjdExvYWRpbmdGb3JVcmksXG4gIHNlbGVjdFN0cmVhbWluZ1VybEZvclVyaSxcbn0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2ZpbGVfaW5mbyc7XG5pbXBvcnQgeyBzZWxlY3RDb3N0SW5mb0ZvclVyaSB9IGZyb20gJ2xicnlpbmMnO1xuaW1wb3J0IHsgZG9PcGVuTW9kYWwgfSBmcm9tICdyZWR1eC9hY3Rpb25zL2FwcCc7XG5pbXBvcnQgeyBkb0NsZWFyUGxheWluZ1VyaSwgZG9Eb3dubG9hZFVyaSB9IGZyb20gJ3JlZHV4L2FjdGlvbnMvY29udGVudCc7XG5pbXBvcnQgRmlsZURvd25sb2FkTGluayBmcm9tICcuL3ZpZXcnO1xuXG5jb25zdCBzZWxlY3QgPSAoc3RhdGUsIHByb3BzKSA9PiB7XG4gIGNvbnN0IGNsYWltID0gc2VsZWN0Q2xhaW1Gb3JVcmkoc3RhdGUsIHByb3BzLnVyaSk7XG5cbiAgcmV0dXJuIHtcbiAgICBmaWxlSW5mbzogbWFrZVNlbGVjdEZpbGVJbmZvRm9yVXJpKHByb3BzLnVyaSkoc3RhdGUpLFxuICAgIGRvd25sb2FkaW5nOiBtYWtlU2VsZWN0RG93bmxvYWRpbmdGb3JVcmkocHJvcHMudXJpKShzdGF0ZSksXG4gICAgbG9hZGluZzogbWFrZVNlbGVjdExvYWRpbmdGb3JVcmkocHJvcHMudXJpKShzdGF0ZSksXG4gICAgY2xhaW1Jc01pbmU6IHNlbGVjdENsYWltSXNNaW5lKHN0YXRlLCBjbGFpbSksXG4gICAgY2xhaW0sXG4gICAgY29zdEluZm86IHNlbGVjdENvc3RJbmZvRm9yVXJpKHN0YXRlLCBwcm9wcy51cmkpLFxuICAgIHN0cmVhbWluZ1VybDogc2VsZWN0U3RyZWFtaW5nVXJsRm9yVXJpKHN0YXRlLCBwcm9wcy51cmkpLFxuICB9O1xufTtcblxuY29uc3QgcGVyZm9ybSA9IChkaXNwYXRjaCkgPT4gKHtcbiAgb3Blbk1vZGFsOiAobW9kYWwsIHByb3BzKSA9PiBkaXNwYXRjaChkb09wZW5Nb2RhbChtb2RhbCwgcHJvcHMpKSxcbiAgcGF1c2U6ICgpID0+IGRpc3BhdGNoKGRvQ2xlYXJQbGF5aW5nVXJpKCkpLFxuICBkb3dubG9hZDogKHVyaSkgPT4gZGlzcGF0Y2goZG9Eb3dubG9hZFVyaSh1cmkpKSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KHNlbGVjdCwgcGVyZm9ybSkoRmlsZURvd25sb2FkTGluayk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQUhBO0FBQ0E7QUFhQTtBQUFBO0FBQ0E7QUFBQTtBQURBO0FBRUE7QUFBQTtBQUZBO0FBR0E7QUFBQTtBQUFBO0FBSEE7QUFBQTtBQUNBO0FBS0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../ui/component/fileDownloadLink/index.js\n");

/***/ }),

/***/ "../ui/component/fileRender/index.js":
/*!*******************************************!*\
  !*** ../ui/component/fileRender/index.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-redux */ \"../node_modules/react-redux/es/index.js\");\n/* harmony import */ var redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/selectors/file_info */ \"../ui/redux/selectors/file_info.js\");\n/* harmony import */ var redux_selectors_claims__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux/selectors/claims */ \"../ui/redux/selectors/claims.js\");\n/* harmony import */ var constants_settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! constants/settings */ \"../ui/constants/settings.js\");\n/* harmony import */ var redux_selectors_settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! redux/selectors/settings */ \"../ui/redux/selectors/settings.js\");\n/* harmony import */ var redux_selectors_content__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! redux/selectors/content */ \"../ui/redux/selectors/content.js\");\n/* harmony import */ var _view__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./view */ \"../ui/component/fileRender/view.jsx\");\n\n\n\n\n\n\n\n\nvar select = function select(state, props) {\n  var autoplay = props.embedded ? false : Object(redux_selectors_settings__WEBPACK_IMPORTED_MODULE_4__[\"selectClientSetting\"])(state, constants_settings__WEBPACK_IMPORTED_MODULE_3__[\"AUTOPLAY_MEDIA\"]);\n  return {\n    currentTheme: Object(redux_selectors_settings__WEBPACK_IMPORTED_MODULE_4__[\"selectClientSetting\"])(state, constants_settings__WEBPACK_IMPORTED_MODULE_3__[\"THEME\"]),\n    claim: Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_2__[\"makeSelectClaimForUri\"])(props.uri)(state),\n    thumbnail: Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_2__[\"selectThumbnailForUri\"])(state, props.uri),\n    contentType: Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_2__[\"makeSelectContentTypeForUri\"])(props.uri)(state),\n    downloadPath: Object(redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_1__[\"makeSelectDownloadPathForUri\"])(props.uri)(state),\n    fileExtension: Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_5__[\"makeSelectFileExtensionForUri\"])(props.uri)(state),\n    streamingUrl: Object(redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_1__[\"selectStreamingUrlForUri\"])(state, props.uri),\n    renderMode: Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_5__[\"makeSelectFileRenderModeForUri\"])(props.uri)(state),\n    autoplay: autoplay\n  };\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_0__[\"connect\"])(select)(_view__WEBPACK_IMPORTED_MODULE_6__[\"default\"]));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvY29tcG9uZW50L2ZpbGVSZW5kZXIvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vdWkvY29tcG9uZW50L2ZpbGVSZW5kZXIvaW5kZXguanM/NTE5NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHsgbWFrZVNlbGVjdERvd25sb2FkUGF0aEZvclVyaSwgc2VsZWN0U3RyZWFtaW5nVXJsRm9yVXJpIH0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2ZpbGVfaW5mbyc7XG5pbXBvcnQgeyBtYWtlU2VsZWN0Q2xhaW1Gb3JVcmksIHNlbGVjdFRodW1ibmFpbEZvclVyaSwgbWFrZVNlbGVjdENvbnRlbnRUeXBlRm9yVXJpIH0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2NsYWltcyc7XG5pbXBvcnQgKiBhcyBTRVRUSU5HUyBmcm9tICdjb25zdGFudHMvc2V0dGluZ3MnO1xuaW1wb3J0IHsgc2VsZWN0Q2xpZW50U2V0dGluZyB9IGZyb20gJ3JlZHV4L3NlbGVjdG9ycy9zZXR0aW5ncyc7XG5pbXBvcnQgeyBtYWtlU2VsZWN0RmlsZVJlbmRlck1vZGVGb3JVcmksIG1ha2VTZWxlY3RGaWxlRXh0ZW5zaW9uRm9yVXJpIH0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2NvbnRlbnQnO1xuaW1wb3J0IEZpbGVSZW5kZXIgZnJvbSAnLi92aWV3JztcblxuY29uc3Qgc2VsZWN0ID0gKHN0YXRlLCBwcm9wcykgPT4ge1xuICBjb25zdCBhdXRvcGxheSA9IHByb3BzLmVtYmVkZGVkID8gZmFsc2UgOiBzZWxlY3RDbGllbnRTZXR0aW5nKHN0YXRlLCBTRVRUSU5HUy5BVVRPUExBWV9NRURJQSk7XG4gIHJldHVybiB7XG4gICAgY3VycmVudFRoZW1lOiBzZWxlY3RDbGllbnRTZXR0aW5nKHN0YXRlLCBTRVRUSU5HUy5USEVNRSksXG4gICAgY2xhaW06IG1ha2VTZWxlY3RDbGFpbUZvclVyaShwcm9wcy51cmkpKHN0YXRlKSxcbiAgICB0aHVtYm5haWw6IHNlbGVjdFRodW1ibmFpbEZvclVyaShzdGF0ZSwgcHJvcHMudXJpKSxcbiAgICBjb250ZW50VHlwZTogbWFrZVNlbGVjdENvbnRlbnRUeXBlRm9yVXJpKHByb3BzLnVyaSkoc3RhdGUpLFxuICAgIGRvd25sb2FkUGF0aDogbWFrZVNlbGVjdERvd25sb2FkUGF0aEZvclVyaShwcm9wcy51cmkpKHN0YXRlKSxcbiAgICBmaWxlRXh0ZW5zaW9uOiBtYWtlU2VsZWN0RmlsZUV4dGVuc2lvbkZvclVyaShwcm9wcy51cmkpKHN0YXRlKSxcbiAgICBzdHJlYW1pbmdVcmw6IHNlbGVjdFN0cmVhbWluZ1VybEZvclVyaShzdGF0ZSwgcHJvcHMudXJpKSxcbiAgICByZW5kZXJNb2RlOiBtYWtlU2VsZWN0RmlsZVJlbmRlck1vZGVGb3JVcmkocHJvcHMudXJpKShzdGF0ZSksXG4gICAgYXV0b3BsYXk6IGF1dG9wbGF5LFxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChzZWxlY3QpKEZpbGVSZW5kZXIpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBRkE7QUFDQTtBQWNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../ui/component/fileRender/index.js\n");

/***/ }),

/***/ "../ui/component/fileRenderInline/index.js":
/*!*************************************************!*\
  !*** ../ui/component/fileRenderInline/index.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-redux */ \"../node_modules/react-redux/es/index.js\");\n/* harmony import */ var redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/selectors/file_info */ \"../ui/redux/selectors/file_info.js\");\n/* harmony import */ var redux_selectors_claims__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux/selectors/claims */ \"../ui/redux/selectors/claims.js\");\n/* harmony import */ var redux_actions_rewards__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! redux/actions/rewards */ \"../ui/redux/actions/rewards.js\");\n/* harmony import */ var redux_selectors_content__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! redux/selectors/content */ \"../ui/redux/selectors/content.js\");\n/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-router */ \"../node_modules/react-router/esm/react-router.js\");\n/* harmony import */ var redux_actions_app__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! redux/actions/app */ \"../ui/redux/actions/app.js\");\n/* harmony import */ var _view__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./view */ \"../ui/component/fileRenderInline/view.jsx\");\n/* harmony import */ var lbryinc__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! lbryinc */ \"../extras/lbryinc/index.js\");\n\n\n\n\n\n\n\n\n\n\nvar select = function select(state, props) {\n  var uri = props.uri;\n  return {\n    fileInfo: Object(redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_1__[\"makeSelectFileInfoForUri\"])(uri)(state),\n    isPlaying: Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_4__[\"selectFileIsPlayingOnPage\"])(state, uri),\n    streamingUrl: Object(redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_1__[\"selectStreamingUrlForUri\"])(state, uri),\n    renderMode: Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_4__[\"makeSelectFileRenderModeForUri\"])(uri)(state),\n    costInfo: Object(lbryinc__WEBPACK_IMPORTED_MODULE_8__[\"selectCostInfoForUri\"])(state, uri),\n    claimWasPurchased: Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_2__[\"selectClaimWasPurchasedForUri\"])(state, uri)\n  };\n};\n\nvar perform = function perform(dispatch) {\n  return {\n    triggerAnalyticsView: function triggerAnalyticsView(uri, timeToStart) {\n      return dispatch(Object(redux_actions_app__WEBPACK_IMPORTED_MODULE_6__[\"doAnalyticsView\"])(uri, timeToStart));\n    },\n    claimRewards: function claimRewards() {\n      return dispatch(Object(redux_actions_rewards__WEBPACK_IMPORTED_MODULE_3__[\"doClaimEligiblePurchaseRewards\"])());\n    }\n  };\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_router__WEBPACK_IMPORTED_MODULE_5__[\"withRouter\"])(Object(react_redux__WEBPACK_IMPORTED_MODULE_0__[\"connect\"])(select, perform)(_view__WEBPACK_IMPORTED_MODULE_7__[\"default\"])));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvY29tcG9uZW50L2ZpbGVSZW5kZXJJbmxpbmUvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vdWkvY29tcG9uZW50L2ZpbGVSZW5kZXJJbmxpbmUvaW5kZXguanM/MDIyZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHsgbWFrZVNlbGVjdEZpbGVJbmZvRm9yVXJpLCBzZWxlY3RTdHJlYW1pbmdVcmxGb3JVcmkgfSBmcm9tICdyZWR1eC9zZWxlY3RvcnMvZmlsZV9pbmZvJztcbmltcG9ydCB7IHNlbGVjdENsYWltV2FzUHVyY2hhc2VkRm9yVXJpIH0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2NsYWltcyc7XG5pbXBvcnQgeyBkb0NsYWltRWxpZ2libGVQdXJjaGFzZVJld2FyZHMgfSBmcm9tICdyZWR1eC9hY3Rpb25zL3Jld2FyZHMnO1xuaW1wb3J0IHsgbWFrZVNlbGVjdEZpbGVSZW5kZXJNb2RlRm9yVXJpLCBzZWxlY3RGaWxlSXNQbGF5aW5nT25QYWdlIH0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2NvbnRlbnQnO1xuaW1wb3J0IHsgd2l0aFJvdXRlciB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5pbXBvcnQgeyBkb0FuYWx5dGljc1ZpZXcgfSBmcm9tICdyZWR1eC9hY3Rpb25zL2FwcCc7XG5pbXBvcnQgRmlsZVJlbmRlcklubGluZSBmcm9tICcuL3ZpZXcnO1xuaW1wb3J0IHsgc2VsZWN0Q29zdEluZm9Gb3JVcmkgfSBmcm9tICdsYnJ5aW5jJztcblxuY29uc3Qgc2VsZWN0ID0gKHN0YXRlLCBwcm9wcykgPT4ge1xuICBjb25zdCB7IHVyaSB9ID0gcHJvcHM7XG5cbiAgcmV0dXJuIHtcbiAgICBmaWxlSW5mbzogbWFrZVNlbGVjdEZpbGVJbmZvRm9yVXJpKHVyaSkoc3RhdGUpLFxuICAgIGlzUGxheWluZzogc2VsZWN0RmlsZUlzUGxheWluZ09uUGFnZShzdGF0ZSwgdXJpKSxcbiAgICBzdHJlYW1pbmdVcmw6IHNlbGVjdFN0cmVhbWluZ1VybEZvclVyaShzdGF0ZSwgdXJpKSxcbiAgICByZW5kZXJNb2RlOiBtYWtlU2VsZWN0RmlsZVJlbmRlck1vZGVGb3JVcmkodXJpKShzdGF0ZSksXG4gICAgY29zdEluZm86IHNlbGVjdENvc3RJbmZvRm9yVXJpKHN0YXRlLCB1cmkpLFxuICAgIGNsYWltV2FzUHVyY2hhc2VkOiBzZWxlY3RDbGFpbVdhc1B1cmNoYXNlZEZvclVyaShzdGF0ZSwgdXJpKSxcbiAgfTtcbn07XG5cbmNvbnN0IHBlcmZvcm0gPSAoZGlzcGF0Y2gpID0+ICh7XG4gIHRyaWdnZXJBbmFseXRpY3NWaWV3OiAodXJpLCB0aW1lVG9TdGFydCkgPT4gZGlzcGF0Y2goZG9BbmFseXRpY3NWaWV3KHVyaSwgdGltZVRvU3RhcnQpKSxcbiAgY2xhaW1SZXdhcmRzOiAoKSA9PiBkaXNwYXRjaChkb0NsYWltRWxpZ2libGVQdXJjaGFzZVJld2FyZHMoKSksXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFJvdXRlcihjb25uZWN0KHNlbGVjdCwgcGVyZm9ybSkoRmlsZVJlbmRlcklubGluZSkpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFIQTtBQUNBO0FBWUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUVBO0FBQUE7QUFBQTtBQUZBO0FBQUE7QUFDQTtBQUlBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../ui/component/fileRenderInline/index.js\n");

/***/ }),

/***/ "../ui/redux/actions/content.js":
/*!**************************************!*\
  !*** ../ui/redux/actions/content.js ***!
  \**************************************/
/*! exports provided: doUpdateLoadStatus, doSetPrimaryUri, doClearPlayingUri, doClearPlayingSource, doClearPlayingCollection, doPopOutInlinePlayer, doSetPlayingUri, doChangePlayingUriParam, doPurchaseUriWrapper, doDownloadUri, doUriInitiatePlay, doPlaylistAddAndAllowPlaying, doPlayUri, savePosition, clearPosition, doSetContentHistoryItem, doClearContentHistoryUri, doClearContentHistoryAll, doRecommendationUpdate, doRecommendationClicked, doToggleLoopList, doToggleShuffleList, doSetLastViewedAnnouncement, doSetRecsysEntries, doSendPastRecsysEntries */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUpdateLoadStatus\", function() { return doUpdateLoadStatus; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doSetPrimaryUri\", function() { return doSetPrimaryUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doClearPlayingUri\", function() { return doClearPlayingUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doClearPlayingSource\", function() { return doClearPlayingSource; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doClearPlayingCollection\", function() { return doClearPlayingCollection; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doPopOutInlinePlayer\", function() { return doPopOutInlinePlayer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doSetPlayingUri\", function() { return doSetPlayingUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doChangePlayingUriParam\", function() { return doChangePlayingUriParam; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doPurchaseUriWrapper\", function() { return doPurchaseUriWrapper; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doDownloadUri\", function() { return doDownloadUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUriInitiatePlay\", function() { return doUriInitiatePlay; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doPlaylistAddAndAllowPlaying\", function() { return doPlaylistAddAndAllowPlaying; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doPlayUri\", function() { return doPlayUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"savePosition\", function() { return savePosition; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"clearPosition\", function() { return clearPosition; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doSetContentHistoryItem\", function() { return doSetContentHistoryItem; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doClearContentHistoryUri\", function() { return doClearContentHistoryUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doClearContentHistoryAll\", function() { return doClearContentHistoryAll; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doRecommendationUpdate\", function() { return doRecommendationUpdate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doRecommendationClicked\", function() { return doRecommendationClicked; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doToggleLoopList\", function() { return doToggleLoopList; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doToggleShuffleList\", function() { return doToggleShuffleList; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doSetLastViewedAnnouncement\", function() { return doSetLastViewedAnnouncement; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doSetRecsysEntries\", function() { return doSetRecsysEntries; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doSendPastRecsysEntries\", function() { return doSendPastRecsysEntries; });\n/* harmony import */ var constants_action_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! constants/action_types */ \"../ui/constants/action_types.js\");\n/* harmony import */ var constants_modal_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! constants/modal_types */ \"../ui/constants/modal_types.js\");\n/* harmony import */ var constants_collections__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! constants/collections */ \"../ui/constants/collections.js\");\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! constants/pages */ \"../ui/constants/pages.js\");\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(constants_pages__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var connected_react_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! connected-react-router */ \"../node_modules/connected-react-router/esm/index.js\");\n/* harmony import */ var redux_actions_app__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! redux/actions/app */ \"../ui/redux/actions/app.js\");\n/* harmony import */ var redux_selectors_claims__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! redux/selectors/claims */ \"../ui/redux/selectors/claims.js\");\n/* harmony import */ var redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! redux/selectors/file_info */ \"../ui/redux/selectors/file_info.js\");\n/* harmony import */ var redux_selectors_collections__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! redux/selectors/collections */ \"../ui/redux/selectors/collections.js\");\n/* harmony import */ var redux_actions_collections__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! redux/actions/collections */ \"../ui/redux/actions/collections.js\");\n/* harmony import */ var redux_selectors_user__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! redux/selectors/user */ \"../ui/redux/selectors/user.js\");\n/* harmony import */ var redux_actions_notifications__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! redux/actions/notifications */ \"../ui/redux/actions/notifications.js\");\n/* harmony import */ var redux_actions_file__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! redux/actions/file */ \"../ui/redux/actions/file.js\");\n/* harmony import */ var redux_actions_claims__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! redux/actions/claims */ \"../ui/redux/actions/claims.js\");\n/* harmony import */ var lbry__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! lbry */ \"../ui/lbry.js\");\n/* harmony import */ var recsys__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! recsys */ \"../extras/recsys/index.js\");\n/* harmony import */ var constants_settings__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! constants/settings */ \"../ui/constants/settings.js\");\n/* harmony import */ var lbryinc__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! lbryinc */ \"../extras/lbryinc/index.js\");\n/* harmony import */ var redux_selectors_settings__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! redux/selectors/settings */ \"../ui/redux/selectors/settings.js\");\n/* harmony import */ var redux_selectors_livestream__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! redux/selectors/livestream */ \"../ui/redux/selectors/livestream.js\");\n/* harmony import */ var redux_selectors_content__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! redux/selectors/content */ \"../ui/redux/selectors/content.js\");\n/* harmony import */ var util_claim__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! util/claim */ \"../ui/util/claim.js\");\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar DOWNLOAD_POLL_INTERVAL = 1000;\nfunction doUpdateLoadStatus(uri, outpoint) {// Updates the loading status for a uri as it's downloading\n  // Calls file_list and checks the written_bytes value to see if the number has increased\n  // Not needed on web as users aren't actually downloading the file\n}\nfunction doSetPrimaryUri(uri) {\n  return function _callee(dispatch, getState) {\n    var url, state, claim;\n    return regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            url = uri;\n\n            if (!(uri && !Object(util_claim__WEBPACK_IMPORTED_MODULE_21__[\"isCanonicalUrl\"])(uri))) {\n              _context.next = 9;\n              break;\n            } // -- sanitization --\n            // only set canonical urls\n\n\n            state = getState();\n            url = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_6__[\"selectCanonicalUrlForUri\"])(state, uri);\n\n            if (url) {\n              _context.next = 9;\n              break;\n            }\n\n            _context.next = 7;\n            return regeneratorRuntime.awrap(dispatch(Object(redux_actions_claims__WEBPACK_IMPORTED_MODULE_13__[\"doGetClaimFromUriResolve\"])(url)));\n\n          case 7:\n            claim = _context.sent;\n            if (claim) url = claim.canonical_url;\n\n          case 9:\n            dispatch({\n              type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"SET_PRIMARY_URI\"],\n              data: {\n                uri: url\n              }\n            });\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n}\nvar doClearPlayingUri = function doClearPlayingUri() {\n  return function (dispatch) {\n    return dispatch(doSetPlayingUri({\n      uri: null,\n      collection: {}\n    }));\n  };\n};\nvar doClearPlayingSource = function doClearPlayingSource() {\n  return function (dispatch) {\n    return dispatch(doChangePlayingUriParam({\n      source: null\n    }));\n  };\n};\nvar doClearPlayingCollection = function doClearPlayingCollection() {\n  return function (dispatch) {\n    return dispatch(doChangePlayingUriParam({\n      collection: {\n        collectionId: null\n      }\n    }));\n  };\n};\nvar doPopOutInlinePlayer = function doPopOutInlinePlayer(_ref) {\n  var source = _ref.source;\n  return function (dispatch, getState) {\n    var state = getState();\n    var isFloating = Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_20__[\"makeSelectIsPlayerFloating\"])(window.location)(state);\n    var playingUri = Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_20__[\"selectPlayingUri\"])(state);\n\n    if (playingUri.source === source && !isFloating) {\n      var floatingPlayerEnabled = Object(redux_selectors_settings__WEBPACK_IMPORTED_MODULE_18__[\"selectClientSetting\"])(state, constants_settings__WEBPACK_IMPORTED_MODULE_16__[\"FLOATING_PLAYER\"]);\n      if (floatingPlayerEnabled) return dispatch(doClearPlayingSource());\n      return dispatch(doClearPlayingUri());\n    }\n  };\n};\nfunction doSetPlayingUri(_ref2) {\n  var uri = _ref2.uri,\n      source = _ref2.source,\n      sourceId = _ref2.sourceId,\n      location = _ref2.location,\n      commentId = _ref2.commentId,\n      collection = _ref2.collection;\n  return function _callee2(dispatch, getState) {\n    var state, url, claim;\n    return regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            state = getState();\n            url = uri;\n\n            if (!(uri && !Object(util_claim__WEBPACK_IMPORTED_MODULE_21__[\"isCanonicalUrl\"])(uri))) {\n              _context2.next = 10;\n              break;\n            }\n\n            if (!uri) {\n              _context2.next = 10;\n              break;\n            }\n\n            url = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_6__[\"selectCanonicalUrlForUri\"])(state, uri);\n\n            if (url) {\n              _context2.next = 10;\n              break;\n            }\n\n            _context2.next = 8;\n            return regeneratorRuntime.awrap(dispatch(Object(redux_actions_claims__WEBPACK_IMPORTED_MODULE_13__[\"doGetClaimFromUriResolve\"])(url)));\n\n          case 8:\n            claim = _context2.sent;\n            if (claim) url = claim.canonical_url;\n\n          case 10:\n            dispatch({\n              type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"SET_PLAYING_URI\"],\n              data: {\n                uri: url,\n                source: source,\n                sourceId: sourceId,\n                location: location,\n                commentId: commentId,\n                collection: collection\n              }\n            });\n\n          case 11:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n}\nfunction doChangePlayingUriParam(newParams) {\n  return function (dispatch, getState) {\n    var state = getState();\n    var playingUri = Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_20__[\"selectPlayingUri\"])(state);\n    return dispatch(doSetPlayingUri(_objectSpread({}, playingUri, {}, newParams)));\n  };\n}\nfunction doPurchaseUriWrapper(uri, cost, cb) {\n  return function (dispatch, getState) {\n    function onSuccess(fileInfo) {\n      if (cb) {\n        cb(fileInfo);\n      }\n    }\n\n    dispatch(Object(redux_actions_file__WEBPACK_IMPORTED_MODULE_12__[\"doPurchaseUri\"])(uri, {\n      cost: cost\n    }, onSuccess));\n  };\n}\nfunction doDownloadUri(uri) {\n  return function (dispatch) {\n    return dispatch(doPlayUri(uri, false, true, function () {\n      return dispatch(Object(redux_actions_app__WEBPACK_IMPORTED_MODULE_5__[\"doAnalyticsView\"])(uri));\n    }));\n  };\n}\nfunction doUriInitiatePlay(playingOptions, isPlayable, isFloating, cb) {\n  return function _callee3(dispatch, getState) {\n    var url, source, collection, state, uri, claim, isLive, willPlayCollection, _willPlayCollection, playingUri, playingCollection, playingOtherThanCurrentQueue, permanentUrl, hasClaimInQueue, itemsToAdd, isAuthenticated, playCb;\n\n    return regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            url = playingOptions.uri, source = playingOptions.source, collection = playingOptions.collection;\n            state = getState();\n            uri = url;\n\n            if (!(url && !Object(util_claim__WEBPACK_IMPORTED_MODULE_21__[\"isCanonicalUrl\"])(url))) {\n              _context3.next = 10;\n              break;\n            } // -- sanitization --\n            // only set canonical urls\n\n\n            uri = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_6__[\"selectCanonicalUrlForUri\"])(state, url);\n\n            if (uri) {\n              _context3.next = 10;\n              break;\n            }\n\n            _context3.next = 8;\n            return regeneratorRuntime.awrap(dispatch(Object(redux_actions_claims__WEBPACK_IMPORTED_MODULE_13__[\"doGetClaimFromUriResolve\"])(url)));\n\n          case 8:\n            claim = _context3.sent;\n            if (claim) uri = claim.canonical_url;\n\n          case 10:\n            if (uri) {\n              _context3.next = 12;\n              break;\n            }\n\n            return _context3.abrupt(\"return\");\n\n          case 12:\n            if (!isFloating && (!source || source === constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"QUEUE_ID\"])) dispatch(doSetPrimaryUri(uri));\n            isLive = Object(redux_selectors_livestream__WEBPACK_IMPORTED_MODULE_19__[\"selectIsActiveLivestreamForUri\"])(state, uri);\n\n            if (isPlayable) {\n              _willPlayCollection = Boolean(collection.collectionId);\n              playingUri = Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_20__[\"selectPlayingUri\"])(state);\n              playingCollection = playingUri.collection;\n              playingOtherThanCurrentQueue = collection.collectionId !== constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"QUEUE_ID\"] && playingCollection.collectionId === constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"QUEUE_ID\"];\n\n              if (playingOtherThanCurrentQueue) {\n                // If the current playing uri is from Queue mode and the next isn't, it will continue playing on queue\n                // until the player is closed or the page is refreshed, and queue is cleared\n                permanentUrl = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_6__[\"selectPermanentUrlForUri\"])(state, uri);\n                hasClaimInQueue = Object(redux_selectors_collections__WEBPACK_IMPORTED_MODULE_8__[\"selectCollectionForIdHasClaimUrl\"])(state, constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"QUEUE_ID\"], permanentUrl);\n                itemsToAdd = !_willPlayCollection ? hasClaimInQueue ? undefined : [permanentUrl] : Object(redux_selectors_collections__WEBPACK_IMPORTED_MODULE_8__[\"selectUrlsForCollectionId\"])(state, collection.collectionId || '').filter(function (url) {\n                  return !Object(redux_selectors_collections__WEBPACK_IMPORTED_MODULE_8__[\"selectCollectionForIdHasClaimUrl\"])(state, constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"QUEUE_ID\"], url);\n                });\n\n                if (itemsToAdd) {\n                  dispatch(Object(redux_actions_collections__WEBPACK_IMPORTED_MODULE_9__[\"doCollectionEdit\"])(constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"QUEUE_ID\"], {\n                    uris: _toConsumableArray(itemsToAdd),\n                    type: constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"COL_TYPES\"].PLAYLIST\n                  }));\n                }\n\n                dispatch(doChangePlayingUriParam(_objectSpread({}, playingOptions, {\n                  collection: _objectSpread({}, playingCollection)\n                })));\n              } else {\n                if (collection.collectionId === playingCollection.collectionId) {\n                  // keep current playingCollection data like loop or shuffle if plpaying the same\n                  dispatch(doChangePlayingUriParam(_objectSpread({}, playingOptions, {\n                    collection: _objectSpread({}, playingCollection, {}, collection)\n                  })));\n                } else {\n                  dispatch(doChangePlayingUriParam(_objectSpread({}, playingOptions, {\n                    collection: _willPlayCollection ? collection : {}\n                  })));\n                }\n              }\n            }\n\n            if (!isLive) {\n              isAuthenticated = Object(redux_selectors_user__WEBPACK_IMPORTED_MODULE_10__[\"selectUserVerifiedEmail\"])(state);\n              playCb = isAuthenticated ? function (fileInfo) {\n                return dispatch(Object(redux_actions_app__WEBPACK_IMPORTED_MODULE_5__[\"doAnaltyicsPurchaseEvent\"])(fileInfo));\n              } : undefined;\n              dispatch(doPlayUri(uri, false, true, playCb, willPlayCollection));\n            }\n\n            if (cb) cb(uri);\n\n          case 17:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    });\n  };\n}\nfunction doPlaylistAddAndAllowPlaying(_ref3) {\n  var uri = _ref3.uri,\n      collectionName = _ref3.collectionName,\n      id = _ref3.collectionId,\n      sourceId = _ref3.sourceId,\n      createNew = _ref3.createNew,\n      pushPlay = _ref3.push,\n      createCb = _ref3.createCb;\n  return function (dispatch, getState) {\n    var state = getState();\n    var remove = Boolean(id && uri && Object(redux_selectors_collections__WEBPACK_IMPORTED_MODULE_8__[\"selectCollectionForIdHasClaimUrl\"])(state, id, uri));\n    var collectionId = id;\n\n    if (createNew) {\n      dispatch(Object(redux_actions_collections__WEBPACK_IMPORTED_MODULE_9__[\"doLocalCollectionCreate\"])({\n        name: collectionName,\n        items: uri ? [uri] : [],\n        type: constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"COL_TYPES\"].PLAYLIST,\n        sourceId: sourceId\n      }, function (newId) {\n        collectionId = newId;\n        if (createCb) createCb(newId);\n      }));\n    } else if (collectionId && uri) {\n      if (collectionId === constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"QUEUE_ID\"]) {\n        var _playingUri = Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_20__[\"selectPlayingUri\"])(state);\n\n        var _ref4 = _playingUri.collection || {},\n            playingCollectionId = _ref4.collectionId;\n\n        var _ref5 = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_6__[\"selectClaimForUri\"])(state, _playingUri.uri) || {},\n            playingUrl = _ref5.permanent_url; // $FlowFixMe\n\n\n        var playingCollectionUrls = Object(redux_selectors_collections__WEBPACK_IMPORTED_MODULE_8__[\"selectUrlsForCollectionId\"])(state, playingCollectionId);\n        var itemsToAdd = playingCollectionUrls || [playingUrl];\n        var hasPlayingUriInQueue = Boolean(playingUrl && Object(redux_selectors_collections__WEBPACK_IMPORTED_MODULE_8__[\"selectCollectionForIdHasClaimUrl\"])(state, constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"QUEUE_ID\"], playingUrl)); // $FlowFixMe\n\n        var hasClaimInQueue = Object(redux_selectors_collections__WEBPACK_IMPORTED_MODULE_8__[\"selectCollectionForIdHasClaimUrl\"])(state, constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"QUEUE_ID\"], uri);\n        dispatch(Object(redux_actions_collections__WEBPACK_IMPORTED_MODULE_9__[\"doCollectionEdit\"])(constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"QUEUE_ID\"], {\n          uris: playingUrl && playingUrl !== uri && !hasPlayingUriInQueue ? [].concat(_toConsumableArray(itemsToAdd), [uri]) : [uri],\n          remove: hasClaimInQueue,\n          type: constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"COL_TYPES\"].PLAYLIST\n        }));\n      } else {\n        dispatch(Object(redux_actions_collections__WEBPACK_IMPORTED_MODULE_9__[\"doCollectionEdit\"])(collectionId, {\n          uris: [uri],\n          remove: remove,\n          type: constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"COL_TYPES\"].PLAYLIST\n        }));\n      }\n    }\n\n    if (!uri && createNew) return;\n    var collectionPlayingId = Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_20__[\"selectPlayingCollectionId\"])(state);\n    var playingUri = Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_20__[\"selectPlayingUri\"])(state);\n    var isUriPlaying = uri && Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_20__[\"selectIsUriCurrentlyPlaying\"])(state, uri);\n    var firstItemUri = Object(redux_selectors_collections__WEBPACK_IMPORTED_MODULE_8__[\"selectFirstItemUrlForCollection\"])(state, collectionId);\n    var isPlayingCollection = collectionPlayingId && collectionId && collectionPlayingId === collectionId;\n    var hasItemPlaying = playingUri.uri && !isUriPlaying;\n    var floatingPlayerEnabled = playingUri.collection.collectionId === 'queue' || Object(redux_selectors_settings__WEBPACK_IMPORTED_MODULE_18__[\"selectClientSetting\"])(state, constants_settings__WEBPACK_IMPORTED_MODULE_16__[\"FLOATING_PLAYER\"]);\n\n    var startPlaying = function startPlaying() {\n      if (isUriPlaying) {\n        dispatch(doChangePlayingUriParam({\n          collection: {\n            collectionId: collectionId\n          }\n        }));\n      } else {\n        dispatch(doUriInitiatePlay({\n          uri: createNew ? uri : firstItemUri,\n          collection: {\n            collectionId: collectionId\n          }\n        }, true, true, !floatingPlayerEnabled && pushPlay ? function (url) {\n          return pushPlay(url);\n        } : undefined));\n      }\n    };\n\n    if (collectionId === constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"QUEUE_ID\"]) {\n      var _ref6 = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_6__[\"selectClaimForUri\"])(state, playingUri.uri) || {},\n          _playingUrl = _ref6.permanent_url;\n\n      var _hasPlayingUriInQueue = Boolean(_playingUrl && Object(redux_selectors_collections__WEBPACK_IMPORTED_MODULE_8__[\"selectCollectionForIdHasClaimUrl\"])(state, constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"QUEUE_ID\"], _playingUrl)); // $FlowFixMe\n\n\n      var _hasClaimInQueue = Object(redux_selectors_collections__WEBPACK_IMPORTED_MODULE_8__[\"selectCollectionForIdHasClaimUrl\"])(state, constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"QUEUE_ID\"], uri);\n\n      if (!_hasClaimInQueue) {\n        var paramsToAdd = {\n          collection: {\n            collectionId: constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"QUEUE_ID\"]\n          },\n          source: constants_collections__WEBPACK_IMPORTED_MODULE_2__[\"QUEUE_ID\"]\n        };\n\n        if (_playingUrl) {\n          // adds the queue collection id to the playingUri data so it can be used and updated by other components\n          if (!_hasPlayingUriInQueue) dispatch(doChangePlayingUriParam(_objectSpread({}, paramsToAdd)));\n        } else {\n          // There is nothing playing and added a video to queue -> the first item will play on the floating player with the list open\n          dispatch(doUriInitiatePlay(_objectSpread({\n            uri: uri\n          }, paramsToAdd), true, true));\n        }\n      }\n    } else {\n      var handleEdit = function handleEdit() {\n        return (// $FlowFixMe\n          dispatch(Object(connected_react_router__WEBPACK_IMPORTED_MODULE_4__[\"push\"])({\n            pathname: \"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_3__[\"PLAYLIST\"], \"/\").concat(collectionId),\n            state: {\n              showEdit: true\n            }\n          }))\n        );\n      };\n\n      dispatch(Object(redux_actions_notifications__WEBPACK_IMPORTED_MODULE_11__[\"doToast\"])({\n        message: __(remove ? 'Removed from %playlist_name%' : 'Added to %playlist_name%', {\n          playlist_name: collectionName\n        }),\n        actionText: isPlayingCollection || hasItemPlaying || remove ? __('Edit Playlist') : __('Start Playing'),\n        action: isPlayingCollection || hasItemPlaying || remove ? handleEdit : startPlaying,\n        secondaryActionText: isPlayingCollection || hasItemPlaying || remove ? undefined : __('Edit Playlist'),\n        secondaryAction: isPlayingCollection || hasItemPlaying || remove ? undefined : handleEdit\n      }));\n    }\n  };\n}\nfunction doPlayUri(url) {\n  var skipCostCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var saveFileOverride = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var cb = arguments.length > 3 ? arguments[3] : undefined;\n  var hideFailModal = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n  return function _callee4(dispatch, getState) {\n    var state, uri, claim, isMine, fileInfo, claimWasPurchased, costInfo, cost, instantPurchaseEnabled, instantPurchaseMax, beginGetFile, attemptPlay;\n    return regeneratorRuntime.async(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            attemptPlay = function _attemptPlay() {\n              var instantPurchaseMax = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null; // If you have a file_list entry, you have already purchased the file\n\n              if (!isMine && !fileInfo && !claimWasPurchased && (!instantPurchaseMax || !instantPurchaseEnabled || cost > instantPurchaseMax)) {\n                if (!hideFailModal) dispatch(Object(redux_actions_app__WEBPACK_IMPORTED_MODULE_5__[\"doOpenModal\"])(constants_modal_types__WEBPACK_IMPORTED_MODULE_1__[\"AFFIRM_PURCHASE\"], {\n                  uri: uri\n                }));\n              } else {\n                beginGetFile();\n              }\n            };\n\n            beginGetFile = function _beginGetFile() {\n              dispatch(doPurchaseUriWrapper(uri, cost, cb));\n            };\n\n            state = getState();\n            uri = url;\n\n            if (!(url && !Object(util_claim__WEBPACK_IMPORTED_MODULE_21__[\"isCanonicalUrl\"])(url))) {\n              _context4.next = 11;\n              break;\n            } // -- sanitization --\n            // only set canonical urls\n\n\n            uri = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_6__[\"selectCanonicalUrlForUri\"])(state, url);\n\n            if (uri) {\n              _context4.next = 11;\n              break;\n            }\n\n            _context4.next = 9;\n            return regeneratorRuntime.awrap(dispatch(Object(redux_actions_claims__WEBPACK_IMPORTED_MODULE_13__[\"doGetClaimFromUriResolve\"])(url)));\n\n          case 9:\n            claim = _context4.sent;\n            if (claim) url = claim.canonical_url;\n\n          case 11:\n            isMine = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_6__[\"selectClaimIsMineForUri\"])(state, uri);\n            fileInfo = Object(redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_7__[\"makeSelectFileInfoForUri\"])(uri)(state);\n            claimWasPurchased = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_6__[\"selectClaimWasPurchasedForUri\"])(state, uri);\n            costInfo = Object(lbryinc__WEBPACK_IMPORTED_MODULE_17__[\"selectCostInfoForUri\"])(state, uri);\n\n            if (costInfo) {\n              _context4.next = 19;\n              break;\n            }\n\n            _context4.next = 18;\n            return regeneratorRuntime.awrap(dispatch(Object(lbryinc__WEBPACK_IMPORTED_MODULE_17__[\"doFetchCostInfoForUri\"])(uri)));\n\n          case 18:\n            costInfo = _context4.sent;\n\n          case 19:\n            cost = costInfo && Number(costInfo.cost);\n            instantPurchaseEnabled = Object(redux_selectors_settings__WEBPACK_IMPORTED_MODULE_18__[\"selectClientSetting\"])(state, constants_settings__WEBPACK_IMPORTED_MODULE_16__[\"INSTANT_PURCHASE_ENABLED\"]);\n            instantPurchaseMax = Object(redux_selectors_settings__WEBPACK_IMPORTED_MODULE_18__[\"selectClientSetting\"])(state, constants_settings__WEBPACK_IMPORTED_MODULE_16__[\"INSTANT_PURCHASE_MAX\"]);\n\n            if (!(cost === 0 || skipCostCheck)) {\n              _context4.next = 25;\n              break;\n            }\n\n            beginGetFile();\n            return _context4.abrupt(\"return\");\n\n          case 25:\n            if (instantPurchaseEnabled) {\n              if (instantPurchaseMax.currency === 'LBC') {\n                attemptPlay(instantPurchaseMax.amount);\n              } else {\n                // Need to convert currency of instant purchase maximum before trying to play\n                lbryinc__WEBPACK_IMPORTED_MODULE_17__[\"Lbryio\"].getExchangeRates().then(function (_ref7) {\n                  var LBC_USD = _ref7.LBC_USD;\n                  attemptPlay(instantPurchaseMax.amount / LBC_USD);\n                });\n              }\n            } else {\n              attemptPlay();\n            }\n\n          case 26:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    });\n  };\n}\nfunction savePosition(uri, position) {\n  return function (dispatch, getState) {\n    var state = getState();\n    var claim = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_6__[\"makeSelectClaimForUri\"])(uri)(state);\n    var claimId = claim.claim_id,\n        txid = claim.txid,\n        nout = claim.nout;\n    var outpoint = \"\".concat(txid, \":\").concat(nout);\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"SET_CONTENT_POSITION\"],\n      data: {\n        claimId: claimId,\n        outpoint: outpoint,\n        position: position\n      }\n    });\n  };\n}\nfunction clearPosition(uri) {\n  return function (dispatch, getState) {\n    var state = getState();\n    var claim = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_6__[\"makeSelectClaimForUri\"])(uri)(state);\n    var claimId = claim.claim_id,\n        txid = claim.txid,\n        nout = claim.nout;\n    var outpoint = \"\".concat(txid, \":\").concat(nout);\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"CLEAR_CONTENT_POSITION\"],\n      data: {\n        claimId: claimId,\n        outpoint: outpoint\n      }\n    });\n  };\n}\nfunction doSetContentHistoryItem(uri) {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"SET_CONTENT_LAST_VIEWED\"],\n      data: {\n        uri: uri,\n        lastViewed: Date.now()\n      }\n    });\n  };\n}\nfunction doClearContentHistoryUri(uri) {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"CLEAR_CONTENT_HISTORY_URI\"],\n      data: {\n        uri: uri\n      }\n    });\n  };\n}\nfunction doClearContentHistoryAll() {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"CLEAR_CONTENT_HISTORY_ALL\"]\n    });\n  };\n}\nvar doRecommendationUpdate = function doRecommendationUpdate(claimId, urls, id, parentId) {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"RECOMMENDATION_UPDATED\"],\n      data: {\n        claimId: claimId,\n        urls: urls,\n        id: id,\n        parentId: parentId\n      }\n    });\n  };\n};\nvar doRecommendationClicked = function doRecommendationClicked(claimId, index) {\n  return function (dispatch) {\n    if (index !== undefined && index !== null) {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"RECOMMENDATION_CLICKED\"],\n        data: {\n          claimId: claimId,\n          index: index\n        }\n      });\n    }\n  };\n};\nvar doToggleLoopList = function doToggleLoopList(params) {\n  return function (dispatch, getState) {\n    var collectionId = params.collectionId,\n        hideToast = params.hideToast;\n    var state = getState();\n    var playingUri = Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_20__[\"selectPlayingUri\"])(state);\n    var playingCollection = playingUri.collection;\n    var loopOn = Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_20__[\"selectListIsLoopedForId\"])(state, collectionId);\n    dispatch(doChangePlayingUriParam({\n      collection: _objectSpread({}, playingCollection, {\n        collectionId: collectionId,\n        loop: !loopOn\n      })\n    }));\n\n    if (!hideToast) {\n      return dispatch(Object(redux_actions_notifications__WEBPACK_IMPORTED_MODULE_11__[\"doToast\"])({\n        message: !loopOn ? __('Loop is on.') : __('Loop is off.')\n      }));\n    }\n  };\n};\nvar doToggleShuffleList = function doToggleShuffleList(params) {\n  return function (dispatch, getState) {\n    var currentUri = params.currentUri,\n        collectionId = params.collectionId,\n        hideToast = params.hideToast;\n    var state = getState();\n    var playingUri = Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_20__[\"selectPlayingUri\"])(state);\n    var playingCollection = playingUri.collection; // const collectionIsPlaying = selectIsCollectionPlayingForId(state, collectionId);\n\n    var listIsShuffledForId = Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_20__[\"selectListIsShuffledForId\"])(state, collectionId);\n\n    if (!listIsShuffledForId) {\n      var urls = Object(redux_selectors_collections__WEBPACK_IMPORTED_MODULE_8__[\"selectUrlsForCollectionId\"])(state, collectionId);\n      var newUrls = urls.map(function (item) {\n        return {\n          item: item,\n          sort: Math.random()\n        };\n      }).sort(function (a, b) {\n        return a.sort - b.sort;\n      }).map(function (_ref8) {\n        var item = _ref8.item;\n        return item;\n      }); // the currently playing URI should be first in list or else\n      // can get in strange position where it might be in the middle or last\n      // and the shuffled list ends before scrolling through all entries\n\n      if (currentUri) {\n        newUrls.splice(newUrls.indexOf(currentUri), 1);\n        newUrls.splice(0, 0, currentUri);\n      }\n\n      dispatch(doChangePlayingUriParam({\n        collection: _objectSpread({}, playingCollection, {\n          collectionId: collectionId,\n          shuffle: {\n            newUrls: newUrls\n          }\n        })\n      }));\n    } else {\n      dispatch(doChangePlayingUriParam({\n        collection: _objectSpread({}, playingCollection, {\n          collectionId: collectionId,\n          shuffle: undefined\n        })\n      }));\n    }\n\n    if (!hideToast) {\n      return dispatch(Object(redux_actions_notifications__WEBPACK_IMPORTED_MODULE_11__[\"doToast\"])({\n        message: !listIsShuffledForId ? __('Shuffle is on.') : __('Shuffle is off.')\n      }));\n    }\n  };\n};\nfunction doSetLastViewedAnnouncement(hash) {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"SET_LAST_VIEWED_ANNOUNCEMENT\"],\n      data: hash\n    });\n  };\n}\nfunction doSetRecsysEntries(entries) {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"SET_RECSYS_ENTRIES\"],\n      data: entries\n    });\n  };\n}\n/**\n * Sends any lingering recsys entries from the previous session and deletes it.\n *\n * Should only be called on startup, before a new cycle of recsys data is\n * collected.\n *\n * @returns {(function(Dispatch, GetState): void)|*}\n */\n\nfunction doSendPastRecsysEntries() {\n  return function (dispatch, getState) {\n    var state = getState();\n    var entries = Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_20__[\"selectRecsysEntries\"])(state);\n\n    if (entries) {\n      recsys__WEBPACK_IMPORTED_MODULE_15__[\"default\"].sendEntries(entries, true);\n    }\n  };\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvcmVkdXgvYWN0aW9ucy9jb250ZW50LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL3VpL3JlZHV4L2FjdGlvbnMvY29udGVudC5qcz8yMjUzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5pbXBvcnQgKiBhcyBBQ1RJT05TIGZyb20gJ2NvbnN0YW50cy9hY3Rpb25fdHlwZXMnO1xuaW1wb3J0ICogYXMgTU9EQUxTIGZyb20gJ2NvbnN0YW50cy9tb2RhbF90eXBlcyc7XG5pbXBvcnQgKiBhcyBDT0xMRUNUSU9OU19DT05TVFMgZnJvbSAnY29uc3RhbnRzL2NvbGxlY3Rpb25zJztcbmltcG9ydCB7IENPTF9UWVBFUyB9IGZyb20gJ2NvbnN0YW50cy9jb2xsZWN0aW9ucyc7XG5pbXBvcnQgKiBhcyBQQUdFUyBmcm9tICdjb25zdGFudHMvcGFnZXMnO1xuaW1wb3J0IHsgcHVzaCB9IGZyb20gJ2Nvbm5lY3RlZC1yZWFjdC1yb3V0ZXInO1xuaW1wb3J0IHsgZG9PcGVuTW9kYWwsIGRvQW5hbHl0aWNzVmlldywgZG9BbmFsdHlpY3NQdXJjaGFzZUV2ZW50IH0gZnJvbSAncmVkdXgvYWN0aW9ucy9hcHAnO1xuaW1wb3J0IHtcbiAgbWFrZVNlbGVjdENsYWltRm9yVXJpLFxuICBzZWxlY3RDbGFpbUlzTWluZUZvclVyaSxcbiAgc2VsZWN0Q2xhaW1XYXNQdXJjaGFzZWRGb3JVcmksXG4gIHNlbGVjdFBlcm1hbmVudFVybEZvclVyaSxcbiAgc2VsZWN0Q2Fub25pY2FsVXJsRm9yVXJpLFxuICBzZWxlY3RDbGFpbUZvclVyaSxcbn0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2NsYWltcyc7XG5pbXBvcnQgeyBtYWtlU2VsZWN0RmlsZUluZm9Gb3JVcmksIHNlbGVjdEZpbGVJbmZvc0J5T3V0cG9pbnQgfSBmcm9tICdyZWR1eC9zZWxlY3RvcnMvZmlsZV9pbmZvJztcbmltcG9ydCB7XG4gIHNlbGVjdFVybHNGb3JDb2xsZWN0aW9uSWQsXG4gIHNlbGVjdENvbGxlY3Rpb25Gb3JJZEhhc0NsYWltVXJsLFxuICBzZWxlY3RGaXJzdEl0ZW1VcmxGb3JDb2xsZWN0aW9uLFxufSBmcm9tICdyZWR1eC9zZWxlY3RvcnMvY29sbGVjdGlvbnMnO1xuaW1wb3J0IHsgZG9Db2xsZWN0aW9uRWRpdCwgZG9Mb2NhbENvbGxlY3Rpb25DcmVhdGUgfSBmcm9tICdyZWR1eC9hY3Rpb25zL2NvbGxlY3Rpb25zJztcbmltcG9ydCB7IHNlbGVjdFVzZXJWZXJpZmllZEVtYWlsIH0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL3VzZXInO1xuaW1wb3J0IHsgZG9Ub2FzdCB9IGZyb20gJ3JlZHV4L2FjdGlvbnMvbm90aWZpY2F0aW9ucyc7XG5pbXBvcnQgeyBkb1B1cmNoYXNlVXJpIH0gZnJvbSAncmVkdXgvYWN0aW9ucy9maWxlJztcbmltcG9ydCB7IGRvR2V0Q2xhaW1Gcm9tVXJpUmVzb2x2ZSB9IGZyb20gJ3JlZHV4L2FjdGlvbnMvY2xhaW1zJztcbmltcG9ydCBMYnJ5IGZyb20gJ2xicnknO1xuaW1wb3J0IFJlY1N5cyBmcm9tICdyZWNzeXMnO1xuaW1wb3J0ICogYXMgU0VUVElOR1MgZnJvbSAnY29uc3RhbnRzL3NldHRpbmdzJztcbmltcG9ydCB7IHNlbGVjdENvc3RJbmZvRm9yVXJpLCBMYnJ5aW8sIGRvRmV0Y2hDb3N0SW5mb0ZvclVyaSB9IGZyb20gJ2xicnlpbmMnO1xuaW1wb3J0IHsgc2VsZWN0Q2xpZW50U2V0dGluZywgc2VsZWN0b3NOb3RpZmljYXRpb25zRW5hYmxlZCB9IGZyb20gJ3JlZHV4L3NlbGVjdG9ycy9zZXR0aW5ncyc7XG5pbXBvcnQgeyBzZWxlY3RJc0FjdGl2ZUxpdmVzdHJlYW1Gb3JVcmkgfSBmcm9tICdyZWR1eC9zZWxlY3RvcnMvbGl2ZXN0cmVhbSc7XG5pbXBvcnQge1xuICBzZWxlY3RSZWNzeXNFbnRyaWVzLFxuICBzZWxlY3RQbGF5aW5nVXJpLFxuICBzZWxlY3RMaXN0SXNTaHVmZmxlZEZvcklkLFxuICBzZWxlY3RMaXN0SXNMb29wZWRGb3JJZCxcbiAgc2VsZWN0UGxheWluZ0NvbGxlY3Rpb25JZCxcbiAgc2VsZWN0SXNVcmlDdXJyZW50bHlQbGF5aW5nLFxuICBtYWtlU2VsZWN0SXNQbGF5ZXJGbG9hdGluZyxcbn0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2NvbnRlbnQnO1xuaW1wb3J0IHsgaXNDYW5vbmljYWxVcmwgfSBmcm9tICd1dGlsL2NsYWltJztcblxuY29uc3QgRE9XTkxPQURfUE9MTF9JTlRFUlZBTCA9IDEwMDA7XG5cbmV4cG9ydCBmdW5jdGlvbiBkb1VwZGF0ZUxvYWRTdGF0dXModXJpOiBzdHJpbmcsIG91dHBvaW50OiBzdHJpbmcpIHtcbiAgLy8gVXBkYXRlcyB0aGUgbG9hZGluZyBzdGF0dXMgZm9yIGEgdXJpIGFzIGl0J3MgZG93bmxvYWRpbmdcbiAgLy8gQ2FsbHMgZmlsZV9saXN0IGFuZCBjaGVja3MgdGhlIHdyaXR0ZW5fYnl0ZXMgdmFsdWUgdG8gc2VlIGlmIHRoZSBudW1iZXIgaGFzIGluY3JlYXNlZFxuICAvLyBOb3QgbmVlZGVkIG9uIHdlYiBhcyB1c2VycyBhcmVuJ3QgYWN0dWFsbHkgZG93bmxvYWRpbmcgdGhlIGZpbGVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvU2V0UHJpbWFyeVVyaSh1cmk6ID9zdHJpbmcpIHtcbiAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaDogRGlzcGF0Y2gsIGdldFN0YXRlOiBHZXRTdGF0ZSkgPT4ge1xuICAgIGxldCB1cmwgPSB1cmk7XG5cbiAgICBpZiAodXJpICYmICFpc0Nhbm9uaWNhbFVybCh1cmkpKSB7XG4gICAgICAvLyAtLSBzYW5pdGl6YXRpb24gLS1cbiAgICAgIC8vIG9ubHkgc2V0IGNhbm9uaWNhbCB1cmxzXG4gICAgICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgICB1cmwgPSBzZWxlY3RDYW5vbmljYWxVcmxGb3JVcmkoc3RhdGUsIHVyaSk7XG5cbiAgICAgIGlmICghdXJsKSB7XG4gICAgICAgIGNvbnN0IGNsYWltID0gYXdhaXQgZGlzcGF0Y2goZG9HZXRDbGFpbUZyb21VcmlSZXNvbHZlKHVybCkpO1xuICAgICAgICBpZiAoY2xhaW0pIHVybCA9IGNsYWltLmNhbm9uaWNhbF91cmw7XG4gICAgICB9XG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgfVxuXG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogQUNUSU9OUy5TRVRfUFJJTUFSWV9VUkksXG4gICAgICBkYXRhOiB7IHVyaTogdXJsIH0sXG4gICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBkb0NsZWFyUGxheWluZ1VyaSA9ICgpID0+IChkaXNwYXRjaDogRGlzcGF0Y2gpID0+IGRpc3BhdGNoKGRvU2V0UGxheWluZ1VyaSh7IHVyaTogbnVsbCwgY29sbGVjdGlvbjoge30gfSkpO1xuZXhwb3J0IGNvbnN0IGRvQ2xlYXJQbGF5aW5nU291cmNlID0gKCkgPT4gKGRpc3BhdGNoOiBEaXNwYXRjaCkgPT4gZGlzcGF0Y2goZG9DaGFuZ2VQbGF5aW5nVXJpUGFyYW0oeyBzb3VyY2U6IG51bGwgfSkpO1xuZXhwb3J0IGNvbnN0IGRvQ2xlYXJQbGF5aW5nQ29sbGVjdGlvbiA9ICgpID0+IChkaXNwYXRjaDogRGlzcGF0Y2gpID0+XG4gIGRpc3BhdGNoKGRvQ2hhbmdlUGxheWluZ1VyaVBhcmFtKHsgY29sbGVjdGlvbjogeyBjb2xsZWN0aW9uSWQ6IG51bGwgfSB9KSk7XG5cbmV4cG9ydCBjb25zdCBkb1BvcE91dElubGluZVBsYXllciA9ICh7IHNvdXJjZSB9OiB7IHNvdXJjZTogc3RyaW5nIH0pID0+IChkaXNwYXRjaDogRGlzcGF0Y2gsIGdldFN0YXRlOiBHZXRTdGF0ZSkgPT4ge1xuICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gIGNvbnN0IGlzRmxvYXRpbmcgPSBtYWtlU2VsZWN0SXNQbGF5ZXJGbG9hdGluZyh3aW5kb3cubG9jYXRpb24pKHN0YXRlKTtcbiAgY29uc3QgcGxheWluZ1VyaSA9IHNlbGVjdFBsYXlpbmdVcmkoc3RhdGUpO1xuXG4gIGlmIChwbGF5aW5nVXJpLnNvdXJjZSA9PT0gc291cmNlICYmICFpc0Zsb2F0aW5nKSB7XG4gICAgY29uc3QgZmxvYXRpbmdQbGF5ZXJFbmFibGVkID0gc2VsZWN0Q2xpZW50U2V0dGluZyhzdGF0ZSwgU0VUVElOR1MuRkxPQVRJTkdfUExBWUVSKTtcblxuICAgIGlmIChmbG9hdGluZ1BsYXllckVuYWJsZWQpIHJldHVybiBkaXNwYXRjaChkb0NsZWFyUGxheWluZ1NvdXJjZSgpKTtcblxuICAgIHJldHVybiBkaXNwYXRjaChkb0NsZWFyUGxheWluZ1VyaSgpKTtcbiAgfVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGRvU2V0UGxheWluZ1VyaSh7IHVyaSwgc291cmNlLCBzb3VyY2VJZCwgbG9jYXRpb24sIGNvbW1lbnRJZCwgY29sbGVjdGlvbiB9OiBQbGF5aW5nVXJpKSB7XG4gIHJldHVybiBhc3luYyAoZGlzcGF0Y2g6IERpc3BhdGNoLCBnZXRTdGF0ZTogR2V0U3RhdGUpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgbGV0IHVybCA9IHVyaTtcblxuICAgIGlmICh1cmkgJiYgIWlzQ2Fub25pY2FsVXJsKHVyaSkpIHtcbiAgICAgIC8vIC0tIHNhbml0aXphdGlvbiAtLVxuICAgICAgLy8gb25seSBzZXQgY2Fub25pY2FsIHVybHNcbiAgICAgIGlmICh1cmkpIHtcbiAgICAgICAgdXJsID0gc2VsZWN0Q2Fub25pY2FsVXJsRm9yVXJpKHN0YXRlLCB1cmkpO1xuXG4gICAgICAgIGlmICghdXJsKSB7XG4gICAgICAgICAgY29uc3QgY2xhaW0gPSBhd2FpdCBkaXNwYXRjaChkb0dldENsYWltRnJvbVVyaVJlc29sdmUodXJsKSk7XG4gICAgICAgICAgaWYgKGNsYWltKSB1cmwgPSBjbGFpbS5jYW5vbmljYWxfdXJsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgfVxuXG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogQUNUSU9OUy5TRVRfUExBWUlOR19VUkksXG4gICAgICBkYXRhOiB7IHVyaTogdXJsLCBzb3VyY2UsIHNvdXJjZUlkLCBsb2NhdGlvbiwgY29tbWVudElkLCBjb2xsZWN0aW9uIH0sXG4gICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb0NoYW5nZVBsYXlpbmdVcmlQYXJhbShuZXdQYXJhbXM6IGFueSkge1xuICByZXR1cm4gKGRpc3BhdGNoOiBEaXNwYXRjaCwgZ2V0U3RhdGU6IEdldFN0YXRlKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICAgIGNvbnN0IHBsYXlpbmdVcmkgPSBzZWxlY3RQbGF5aW5nVXJpKHN0YXRlKTtcblxuICAgIHJldHVybiBkaXNwYXRjaChkb1NldFBsYXlpbmdVcmkoeyAuLi5wbGF5aW5nVXJpLCAuLi5uZXdQYXJhbXMgfSkpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9QdXJjaGFzZVVyaVdyYXBwZXIodXJpOiBzdHJpbmcsIGNvc3Q6IG51bWJlciwgY2I6ID8oR2V0UmVzcG9uc2UpID0+IHZvaWQpIHtcbiAgcmV0dXJuIChkaXNwYXRjaDogRGlzcGF0Y2gsIGdldFN0YXRlOiAoKSA9PiBhbnkpID0+IHtcbiAgICBmdW5jdGlvbiBvblN1Y2Nlc3MoZmlsZUluZm8pIHtcbiAgICAgIGlmIChjYikge1xuICAgICAgICBjYihmaWxlSW5mbyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZGlzcGF0Y2goZG9QdXJjaGFzZVVyaSh1cmksIHsgY29zdCB9LCBvblN1Y2Nlc3MpKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvRG93bmxvYWRVcmkodXJpOiBzdHJpbmcpIHtcbiAgcmV0dXJuIChkaXNwYXRjaDogRGlzcGF0Y2gpID0+IGRpc3BhdGNoKGRvUGxheVVyaSh1cmksIGZhbHNlLCB0cnVlLCAoKSA9PiBkaXNwYXRjaChkb0FuYWx5dGljc1ZpZXcodXJpKSkpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvVXJpSW5pdGlhdGVQbGF5KFxuICBwbGF5aW5nT3B0aW9uczogUGxheWluZ1VyaSxcbiAgaXNQbGF5YWJsZT86IGJvb2xlYW4sXG4gIGlzRmxvYXRpbmc/OiBib29sZWFuLFxuICBjYj86ICh1cmw6IHN0cmluZykgPT4gdm9pZFxuKSB7XG4gIHJldHVybiBhc3luYyAoZGlzcGF0Y2g6IERpc3BhdGNoLCBnZXRTdGF0ZTogKCkgPT4gYW55KSA9PiB7XG4gICAgY29uc3QgeyB1cmk6IHVybCwgc291cmNlLCBjb2xsZWN0aW9uIH0gPSBwbGF5aW5nT3B0aW9ucztcblxuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcblxuICAgIGxldCB1cmkgPSB1cmw7XG4gICAgaWYgKHVybCAmJiAhaXNDYW5vbmljYWxVcmwodXJsKSkge1xuICAgICAgLy8gLS0gc2FuaXRpemF0aW9uIC0tXG4gICAgICAvLyBvbmx5IHNldCBjYW5vbmljYWwgdXJsc1xuICAgICAgdXJpID0gc2VsZWN0Q2Fub25pY2FsVXJsRm9yVXJpKHN0YXRlLCB1cmwpO1xuXG4gICAgICBpZiAoIXVyaSkge1xuICAgICAgICBjb25zdCBjbGFpbSA9IGF3YWl0IGRpc3BhdGNoKGRvR2V0Q2xhaW1Gcm9tVXJpUmVzb2x2ZSh1cmwpKTtcbiAgICAgICAgaWYgKGNsYWltKSB1cmkgPSBjbGFpbS5jYW5vbmljYWxfdXJsO1xuICAgICAgfVxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIH1cblxuICAgIGlmICghdXJpKSByZXR1cm47XG5cbiAgICBpZiAoIWlzRmxvYXRpbmcgJiYgKCFzb3VyY2UgfHwgc291cmNlID09PSBDT0xMRUNUSU9OU19DT05TVFMuUVVFVUVfSUQpKSBkaXNwYXRjaChkb1NldFByaW1hcnlVcmkodXJpKSk7XG5cbiAgICBjb25zdCBpc0xpdmUgPSBzZWxlY3RJc0FjdGl2ZUxpdmVzdHJlYW1Gb3JVcmkoc3RhdGUsIHVyaSk7XG4gICAgbGV0IHdpbGxQbGF5Q29sbGVjdGlvbjtcblxuICAgIGlmIChpc1BsYXlhYmxlKSB7XG4gICAgICBjb25zdCB3aWxsUGxheUNvbGxlY3Rpb24gPSBCb29sZWFuKGNvbGxlY3Rpb24uY29sbGVjdGlvbklkKTtcbiAgICAgIGNvbnN0IHBsYXlpbmdVcmkgPSBzZWxlY3RQbGF5aW5nVXJpKHN0YXRlKTtcbiAgICAgIGNvbnN0IHBsYXlpbmdDb2xsZWN0aW9uID0gcGxheWluZ1VyaS5jb2xsZWN0aW9uO1xuICAgICAgY29uc3QgcGxheWluZ090aGVyVGhhbkN1cnJlbnRRdWV1ZSA9XG4gICAgICAgIGNvbGxlY3Rpb24uY29sbGVjdGlvbklkICE9PSBDT0xMRUNUSU9OU19DT05TVFMuUVVFVUVfSUQgJiZcbiAgICAgICAgcGxheWluZ0NvbGxlY3Rpb24uY29sbGVjdGlvbklkID09PSBDT0xMRUNUSU9OU19DT05TVFMuUVVFVUVfSUQ7XG5cbiAgICAgIGlmIChwbGF5aW5nT3RoZXJUaGFuQ3VycmVudFF1ZXVlKSB7XG4gICAgICAgIC8vIElmIHRoZSBjdXJyZW50IHBsYXlpbmcgdXJpIGlzIGZyb20gUXVldWUgbW9kZSBhbmQgdGhlIG5leHQgaXNuJ3QsIGl0IHdpbGwgY29udGludWUgcGxheWluZyBvbiBxdWV1ZVxuICAgICAgICAvLyB1bnRpbCB0aGUgcGxheWVyIGlzIGNsb3NlZCBvciB0aGUgcGFnZSBpcyByZWZyZXNoZWQsIGFuZCBxdWV1ZSBpcyBjbGVhcmVkXG4gICAgICAgIGNvbnN0IHBlcm1hbmVudFVybCA9IHNlbGVjdFBlcm1hbmVudFVybEZvclVyaShzdGF0ZSwgdXJpKTtcbiAgICAgICAgY29uc3QgaGFzQ2xhaW1JblF1ZXVlID0gc2VsZWN0Q29sbGVjdGlvbkZvcklkSGFzQ2xhaW1Vcmwoc3RhdGUsIENPTExFQ1RJT05TX0NPTlNUUy5RVUVVRV9JRCwgcGVybWFuZW50VXJsKTtcbiAgICAgICAgY29uc3QgaXRlbXNUb0FkZCA9ICF3aWxsUGxheUNvbGxlY3Rpb25cbiAgICAgICAgICA/IGhhc0NsYWltSW5RdWV1ZVxuICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgIDogW3Blcm1hbmVudFVybF1cbiAgICAgICAgICA6IHNlbGVjdFVybHNGb3JDb2xsZWN0aW9uSWQoc3RhdGUsIGNvbGxlY3Rpb24uY29sbGVjdGlvbklkIHx8ICcnKS5maWx0ZXIoXG4gICAgICAgICAgICAgICh1cmwpID0+ICFzZWxlY3RDb2xsZWN0aW9uRm9ySWRIYXNDbGFpbVVybChzdGF0ZSwgQ09MTEVDVElPTlNfQ09OU1RTLlFVRVVFX0lELCB1cmwpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGlmIChpdGVtc1RvQWRkKSB7XG4gICAgICAgICAgZGlzcGF0Y2goZG9Db2xsZWN0aW9uRWRpdChDT0xMRUNUSU9OU19DT05TVFMuUVVFVUVfSUQsIHsgdXJpczogWy4uLml0ZW1zVG9BZGRdLCB0eXBlOiBDT0xfVFlQRVMuUExBWUxJU1QgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGRpc3BhdGNoKGRvQ2hhbmdlUGxheWluZ1VyaVBhcmFtKHsgLi4ucGxheWluZ09wdGlvbnMsIGNvbGxlY3Rpb246IHsgLi4ucGxheWluZ0NvbGxlY3Rpb24gfSB9KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoY29sbGVjdGlvbi5jb2xsZWN0aW9uSWQgPT09IHBsYXlpbmdDb2xsZWN0aW9uLmNvbGxlY3Rpb25JZCkge1xuICAgICAgICAgIC8vIGtlZXAgY3VycmVudCBwbGF5aW5nQ29sbGVjdGlvbiBkYXRhIGxpa2UgbG9vcCBvciBzaHVmZmxlIGlmIHBscGF5aW5nIHRoZSBzYW1lXG4gICAgICAgICAgZGlzcGF0Y2goZG9DaGFuZ2VQbGF5aW5nVXJpUGFyYW0oeyAuLi5wbGF5aW5nT3B0aW9ucywgY29sbGVjdGlvbjogeyAuLi5wbGF5aW5nQ29sbGVjdGlvbiwgLi4uY29sbGVjdGlvbiB9IH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkaXNwYXRjaChkb0NoYW5nZVBsYXlpbmdVcmlQYXJhbSh7IC4uLnBsYXlpbmdPcHRpb25zLCBjb2xsZWN0aW9uOiB3aWxsUGxheUNvbGxlY3Rpb24gPyBjb2xsZWN0aW9uIDoge30gfSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFpc0xpdmUpIHtcbiAgICAgIGNvbnN0IGlzQXV0aGVudGljYXRlZCA9IHNlbGVjdFVzZXJWZXJpZmllZEVtYWlsKHN0YXRlKTtcbiAgICAgIGNvbnN0IHBsYXlDYiA9IGlzQXV0aGVudGljYXRlZCA/IChmaWxlSW5mbykgPT4gZGlzcGF0Y2goZG9BbmFsdHlpY3NQdXJjaGFzZUV2ZW50KGZpbGVJbmZvKSkgOiB1bmRlZmluZWQ7XG4gICAgICBkaXNwYXRjaChkb1BsYXlVcmkodXJpLCBmYWxzZSwgdHJ1ZSwgcGxheUNiLCB3aWxsUGxheUNvbGxlY3Rpb24pKTtcbiAgICB9XG5cbiAgICBpZiAoY2IpIGNiKHVyaSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb1BsYXlsaXN0QWRkQW5kQWxsb3dQbGF5aW5nKHtcbiAgdXJpLFxuICBjb2xsZWN0aW9uTmFtZSxcbiAgY29sbGVjdGlvbklkOiBpZCxcbiAgc291cmNlSWQsXG4gIGNyZWF0ZU5ldyxcbiAgcHVzaDogcHVzaFBsYXksXG4gIGNyZWF0ZUNiLFxufToge1xuICB1cmk/OiBzdHJpbmcsXG4gIGNvbGxlY3Rpb25OYW1lOiBzdHJpbmcsXG4gIGNvbGxlY3Rpb25JZD86IHN0cmluZyxcbiAgc291cmNlSWQ/OiBzdHJpbmcsXG4gIGNyZWF0ZU5ldz86IGJvb2xlYW4sXG4gIHB1c2g/OiAodXJpOiBzdHJpbmcpID0+IHZvaWQsXG4gIGNyZWF0ZUNiPzogKGlkOiBzdHJpbmcpID0+IHZvaWQsXG59KSB7XG4gIHJldHVybiAoZGlzcGF0Y2g6IERpc3BhdGNoLCBnZXRTdGF0ZTogKCkgPT4gYW55KSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICAgIGNvbnN0IHJlbW92ZSA9IEJvb2xlYW4oaWQgJiYgdXJpICYmIHNlbGVjdENvbGxlY3Rpb25Gb3JJZEhhc0NsYWltVXJsKHN0YXRlLCBpZCwgdXJpKSk7XG5cbiAgICBsZXQgY29sbGVjdGlvbklkID0gaWQ7XG4gICAgaWYgKGNyZWF0ZU5ldykge1xuICAgICAgZGlzcGF0Y2goXG4gICAgICAgIGRvTG9jYWxDb2xsZWN0aW9uQ3JlYXRlKFxuICAgICAgICAgIHsgbmFtZTogY29sbGVjdGlvbk5hbWUsIGl0ZW1zOiB1cmkgPyBbdXJpXSA6IFtdLCB0eXBlOiBDT0xfVFlQRVMuUExBWUxJU1QsIHNvdXJjZUlkIH0sXG4gICAgICAgICAgKG5ld0lkKSA9PiB7XG4gICAgICAgICAgICBjb2xsZWN0aW9uSWQgPSBuZXdJZDtcbiAgICAgICAgICAgIGlmIChjcmVhdGVDYikgY3JlYXRlQ2IobmV3SWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGNvbGxlY3Rpb25JZCAmJiB1cmkpIHtcbiAgICAgIGlmIChjb2xsZWN0aW9uSWQgPT09IENPTExFQ1RJT05TX0NPTlNUUy5RVUVVRV9JRCkge1xuICAgICAgICBjb25zdCBwbGF5aW5nVXJpID0gc2VsZWN0UGxheWluZ1VyaShzdGF0ZSk7XG4gICAgICAgIGNvbnN0IHsgY29sbGVjdGlvbklkOiBwbGF5aW5nQ29sbGVjdGlvbklkIH0gPSBwbGF5aW5nVXJpLmNvbGxlY3Rpb24gfHwge307XG4gICAgICAgIGNvbnN0IHsgcGVybWFuZW50X3VybDogcGxheWluZ1VybCB9ID0gc2VsZWN0Q2xhaW1Gb3JVcmkoc3RhdGUsIHBsYXlpbmdVcmkudXJpKSB8fCB7fTtcblxuICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgIGNvbnN0IHBsYXlpbmdDb2xsZWN0aW9uVXJscyA9IHNlbGVjdFVybHNGb3JDb2xsZWN0aW9uSWQoc3RhdGUsIHBsYXlpbmdDb2xsZWN0aW9uSWQpO1xuICAgICAgICBjb25zdCBpdGVtc1RvQWRkID0gcGxheWluZ0NvbGxlY3Rpb25VcmxzIHx8IFtwbGF5aW5nVXJsXTtcbiAgICAgICAgY29uc3QgaGFzUGxheWluZ1VyaUluUXVldWUgPSBCb29sZWFuKFxuICAgICAgICAgIHBsYXlpbmdVcmwgJiYgc2VsZWN0Q29sbGVjdGlvbkZvcklkSGFzQ2xhaW1Vcmwoc3RhdGUsIENPTExFQ1RJT05TX0NPTlNUUy5RVUVVRV9JRCwgcGxheWluZ1VybClcbiAgICAgICAgKTtcbiAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICBjb25zdCBoYXNDbGFpbUluUXVldWUgPSBzZWxlY3RDb2xsZWN0aW9uRm9ySWRIYXNDbGFpbVVybChzdGF0ZSwgQ09MTEVDVElPTlNfQ09OU1RTLlFVRVVFX0lELCB1cmkpO1xuXG4gICAgICAgIGRpc3BhdGNoKFxuICAgICAgICAgIGRvQ29sbGVjdGlvbkVkaXQoQ09MTEVDVElPTlNfQ09OU1RTLlFVRVVFX0lELCB7XG4gICAgICAgICAgICB1cmlzOiBwbGF5aW5nVXJsICYmIHBsYXlpbmdVcmwgIT09IHVyaSAmJiAhaGFzUGxheWluZ1VyaUluUXVldWUgPyBbLi4uaXRlbXNUb0FkZCwgdXJpXSA6IFt1cmldLFxuICAgICAgICAgICAgcmVtb3ZlOiBoYXNDbGFpbUluUXVldWUsXG4gICAgICAgICAgICB0eXBlOiBDT0xfVFlQRVMuUExBWUxJU1QsXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpc3BhdGNoKGRvQ29sbGVjdGlvbkVkaXQoY29sbGVjdGlvbklkLCB7IHVyaXM6IFt1cmldLCByZW1vdmUsIHR5cGU6IENPTF9UWVBFUy5QTEFZTElTVCB9KSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF1cmkgJiYgY3JlYXRlTmV3KSByZXR1cm47XG5cbiAgICBjb25zdCBjb2xsZWN0aW9uUGxheWluZ0lkID0gc2VsZWN0UGxheWluZ0NvbGxlY3Rpb25JZChzdGF0ZSk7XG4gICAgY29uc3QgcGxheWluZ1VyaSA9IHNlbGVjdFBsYXlpbmdVcmkoc3RhdGUpO1xuICAgIGNvbnN0IGlzVXJpUGxheWluZyA9IHVyaSAmJiBzZWxlY3RJc1VyaUN1cnJlbnRseVBsYXlpbmcoc3RhdGUsIHVyaSk7XG4gICAgY29uc3QgZmlyc3RJdGVtVXJpID0gc2VsZWN0Rmlyc3RJdGVtVXJsRm9yQ29sbGVjdGlvbihzdGF0ZSwgY29sbGVjdGlvbklkKTtcblxuICAgIGNvbnN0IGlzUGxheWluZ0NvbGxlY3Rpb24gPSBjb2xsZWN0aW9uUGxheWluZ0lkICYmIGNvbGxlY3Rpb25JZCAmJiBjb2xsZWN0aW9uUGxheWluZ0lkID09PSBjb2xsZWN0aW9uSWQ7XG4gICAgY29uc3QgaGFzSXRlbVBsYXlpbmcgPSBwbGF5aW5nVXJpLnVyaSAmJiAhaXNVcmlQbGF5aW5nO1xuICAgIGNvbnN0IGZsb2F0aW5nUGxheWVyRW5hYmxlZCA9XG4gICAgICBwbGF5aW5nVXJpLmNvbGxlY3Rpb24uY29sbGVjdGlvbklkID09PSAncXVldWUnIHx8IHNlbGVjdENsaWVudFNldHRpbmcoc3RhdGUsIFNFVFRJTkdTLkZMT0FUSU5HX1BMQVlFUik7XG5cbiAgICBjb25zdCBzdGFydFBsYXlpbmcgPSAoKSA9PiB7XG4gICAgICBpZiAoaXNVcmlQbGF5aW5nKSB7XG4gICAgICAgIGRpc3BhdGNoKGRvQ2hhbmdlUGxheWluZ1VyaVBhcmFtKHsgY29sbGVjdGlvbjogeyBjb2xsZWN0aW9uSWQgfSB9KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaXNwYXRjaChcbiAgICAgICAgICBkb1VyaUluaXRpYXRlUGxheShcbiAgICAgICAgICAgIHsgdXJpOiBjcmVhdGVOZXcgPyB1cmkgOiBmaXJzdEl0ZW1VcmksIGNvbGxlY3Rpb246IHsgY29sbGVjdGlvbklkIH0gfSxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgIWZsb2F0aW5nUGxheWVyRW5hYmxlZCAmJiBwdXNoUGxheSA/ICh1cmwpID0+IHB1c2hQbGF5KHVybCkgOiB1bmRlZmluZWRcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmIChjb2xsZWN0aW9uSWQgPT09IENPTExFQ1RJT05TX0NPTlNUUy5RVUVVRV9JRCkge1xuICAgICAgY29uc3QgeyBwZXJtYW5lbnRfdXJsOiBwbGF5aW5nVXJsIH0gPSBzZWxlY3RDbGFpbUZvclVyaShzdGF0ZSwgcGxheWluZ1VyaS51cmkpIHx8IHt9O1xuICAgICAgY29uc3QgaGFzUGxheWluZ1VyaUluUXVldWUgPSBCb29sZWFuKFxuICAgICAgICBwbGF5aW5nVXJsICYmIHNlbGVjdENvbGxlY3Rpb25Gb3JJZEhhc0NsYWltVXJsKHN0YXRlLCBDT0xMRUNUSU9OU19DT05TVFMuUVVFVUVfSUQsIHBsYXlpbmdVcmwpXG4gICAgICApO1xuICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgY29uc3QgaGFzQ2xhaW1JblF1ZXVlID0gc2VsZWN0Q29sbGVjdGlvbkZvcklkSGFzQ2xhaW1Vcmwoc3RhdGUsIENPTExFQ1RJT05TX0NPTlNUUy5RVUVVRV9JRCwgdXJpKTtcbiAgICAgIGlmICghaGFzQ2xhaW1JblF1ZXVlKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtc1RvQWRkID0ge1xuICAgICAgICAgIGNvbGxlY3Rpb246IHsgY29sbGVjdGlvbklkOiBDT0xMRUNUSU9OU19DT05TVFMuUVVFVUVfSUQgfSxcbiAgICAgICAgICBzb3VyY2U6IENPTExFQ1RJT05TX0NPTlNUUy5RVUVVRV9JRCxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAocGxheWluZ1VybCkge1xuICAgICAgICAgIC8vIGFkZHMgdGhlIHF1ZXVlIGNvbGxlY3Rpb24gaWQgdG8gdGhlIHBsYXlpbmdVcmkgZGF0YSBzbyBpdCBjYW4gYmUgdXNlZCBhbmQgdXBkYXRlZCBieSBvdGhlciBjb21wb25lbnRzXG4gICAgICAgICAgaWYgKCFoYXNQbGF5aW5nVXJpSW5RdWV1ZSkgZGlzcGF0Y2goZG9DaGFuZ2VQbGF5aW5nVXJpUGFyYW0oeyAuLi5wYXJhbXNUb0FkZCB9KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVGhlcmUgaXMgbm90aGluZyBwbGF5aW5nIGFuZCBhZGRlZCBhIHZpZGVvIHRvIHF1ZXVlIC0+IHRoZSBmaXJzdCBpdGVtIHdpbGwgcGxheSBvbiB0aGUgZmxvYXRpbmcgcGxheWVyIHdpdGggdGhlIGxpc3Qgb3BlblxuICAgICAgICAgIGRpc3BhdGNoKGRvVXJpSW5pdGlhdGVQbGF5KHsgdXJpLCAuLi5wYXJhbXNUb0FkZCB9LCB0cnVlLCB0cnVlKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaGFuZGxlRWRpdCA9ICgpID0+XG4gICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgZGlzcGF0Y2gocHVzaCh7IHBhdGhuYW1lOiBgLyQvJHtQQUdFUy5QTEFZTElTVH0vJHtjb2xsZWN0aW9uSWR9YCwgc3RhdGU6IHsgc2hvd0VkaXQ6IHRydWUgfSB9KSk7XG5cbiAgICAgIGRpc3BhdGNoKFxuICAgICAgICBkb1RvYXN0KHtcbiAgICAgICAgICBtZXNzYWdlOiBfXyhyZW1vdmUgPyAnUmVtb3ZlZCBmcm9tICVwbGF5bGlzdF9uYW1lJScgOiAnQWRkZWQgdG8gJXBsYXlsaXN0X25hbWUlJywge1xuICAgICAgICAgICAgcGxheWxpc3RfbmFtZTogY29sbGVjdGlvbk5hbWUsXG4gICAgICAgICAgfSksXG4gICAgICAgICAgYWN0aW9uVGV4dDogaXNQbGF5aW5nQ29sbGVjdGlvbiB8fCBoYXNJdGVtUGxheWluZyB8fCByZW1vdmUgPyBfXygnRWRpdCBQbGF5bGlzdCcpIDogX18oJ1N0YXJ0IFBsYXlpbmcnKSxcbiAgICAgICAgICBhY3Rpb246IGlzUGxheWluZ0NvbGxlY3Rpb24gfHwgaGFzSXRlbVBsYXlpbmcgfHwgcmVtb3ZlID8gaGFuZGxlRWRpdCA6IHN0YXJ0UGxheWluZyxcbiAgICAgICAgICBzZWNvbmRhcnlBY3Rpb25UZXh0OiBpc1BsYXlpbmdDb2xsZWN0aW9uIHx8IGhhc0l0ZW1QbGF5aW5nIHx8IHJlbW92ZSA/IHVuZGVmaW5lZCA6IF9fKCdFZGl0IFBsYXlsaXN0JyksXG4gICAgICAgICAgc2Vjb25kYXJ5QWN0aW9uOiBpc1BsYXlpbmdDb2xsZWN0aW9uIHx8IGhhc0l0ZW1QbGF5aW5nIHx8IHJlbW92ZSA/IHVuZGVmaW5lZCA6IGhhbmRsZUVkaXQsXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvUGxheVVyaShcbiAgdXJsOiBzdHJpbmcsXG4gIHNraXBDb3N0Q2hlY2s6IGJvb2xlYW4gPSBmYWxzZSxcbiAgc2F2ZUZpbGVPdmVycmlkZTogYm9vbGVhbiA9IGZhbHNlLFxuICBjYj86ICgpID0+IHZvaWQsXG4gIGhpZGVGYWlsTW9kYWw6IGJvb2xlYW4gPSBmYWxzZVxuKSB7XG4gIHJldHVybiBhc3luYyAoZGlzcGF0Y2g6IERpc3BhdGNoLCBnZXRTdGF0ZTogKCkgPT4gYW55KSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuXG4gICAgbGV0IHVyaSA9IHVybDtcbiAgICBpZiAodXJsICYmICFpc0Nhbm9uaWNhbFVybCh1cmwpKSB7XG4gICAgICAvLyAtLSBzYW5pdGl6YXRpb24gLS1cbiAgICAgIC8vIG9ubHkgc2V0IGNhbm9uaWNhbCB1cmxzXG4gICAgICB1cmkgPSBzZWxlY3RDYW5vbmljYWxVcmxGb3JVcmkoc3RhdGUsIHVybCk7XG5cbiAgICAgIGlmICghdXJpKSB7XG4gICAgICAgIGNvbnN0IGNsYWltID0gYXdhaXQgZGlzcGF0Y2goZG9HZXRDbGFpbUZyb21VcmlSZXNvbHZlKHVybCkpO1xuICAgICAgICBpZiAoY2xhaW0pIHVybCA9IGNsYWltLmNhbm9uaWNhbF91cmw7XG4gICAgICB9XG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgfVxuXG4gICAgY29uc3QgaXNNaW5lID0gc2VsZWN0Q2xhaW1Jc01pbmVGb3JVcmkoc3RhdGUsIHVyaSk7XG4gICAgY29uc3QgZmlsZUluZm8gPSBtYWtlU2VsZWN0RmlsZUluZm9Gb3JVcmkodXJpKShzdGF0ZSk7XG4gICAgY29uc3QgY2xhaW1XYXNQdXJjaGFzZWQgPSBzZWxlY3RDbGFpbVdhc1B1cmNoYXNlZEZvclVyaShzdGF0ZSwgdXJpKTtcblxuICAgIGxldCBjb3N0SW5mbyA9IHNlbGVjdENvc3RJbmZvRm9yVXJpKHN0YXRlLCB1cmkpO1xuICAgIGlmICghY29zdEluZm8pIHtcbiAgICAgIGNvc3RJbmZvID0gYXdhaXQgZGlzcGF0Y2goZG9GZXRjaENvc3RJbmZvRm9yVXJpKHVyaSkpO1xuICAgIH1cbiAgICBjb25zdCBjb3N0ID0gY29zdEluZm8gJiYgTnVtYmVyKGNvc3RJbmZvLmNvc3QpO1xuICAgIGNvbnN0IGluc3RhbnRQdXJjaGFzZUVuYWJsZWQgPSBzZWxlY3RDbGllbnRTZXR0aW5nKHN0YXRlLCBTRVRUSU5HUy5JTlNUQU5UX1BVUkNIQVNFX0VOQUJMRUQpO1xuICAgIGNvbnN0IGluc3RhbnRQdXJjaGFzZU1heCA9IHNlbGVjdENsaWVudFNldHRpbmcoc3RhdGUsIFNFVFRJTkdTLklOU1RBTlRfUFVSQ0hBU0VfTUFYKTtcblxuICAgIGZ1bmN0aW9uIGJlZ2luR2V0RmlsZSgpIHtcbiAgICAgIGRpc3BhdGNoKGRvUHVyY2hhc2VVcmlXcmFwcGVyKHVyaSwgY29zdCwgY2IpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdHRlbXB0UGxheShpbnN0YW50UHVyY2hhc2VNYXggPSBudWxsKSB7XG4gICAgICAvLyBJZiB5b3UgaGF2ZSBhIGZpbGVfbGlzdCBlbnRyeSwgeW91IGhhdmUgYWxyZWFkeSBwdXJjaGFzZWQgdGhlIGZpbGVcbiAgICAgIGlmIChcbiAgICAgICAgIWlzTWluZSAmJlxuICAgICAgICAhZmlsZUluZm8gJiZcbiAgICAgICAgIWNsYWltV2FzUHVyY2hhc2VkICYmXG4gICAgICAgICghaW5zdGFudFB1cmNoYXNlTWF4IHx8ICFpbnN0YW50UHVyY2hhc2VFbmFibGVkIHx8IGNvc3QgPiBpbnN0YW50UHVyY2hhc2VNYXgpXG4gICAgICApIHtcbiAgICAgICAgaWYgKCFoaWRlRmFpbE1vZGFsKSBkaXNwYXRjaChkb09wZW5Nb2RhbChNT0RBTFMuQUZGSVJNX1BVUkNIQVNFLCB7IHVyaSB9KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiZWdpbkdldEZpbGUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29zdCA9PT0gMCB8fCBza2lwQ29zdENoZWNrKSB7XG4gICAgICBiZWdpbkdldEZpbGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaW5zdGFudFB1cmNoYXNlRW5hYmxlZCkge1xuICAgICAgaWYgKGluc3RhbnRQdXJjaGFzZU1heC5jdXJyZW5jeSA9PT0gJ0xCQycpIHtcbiAgICAgICAgYXR0ZW1wdFBsYXkoaW5zdGFudFB1cmNoYXNlTWF4LmFtb3VudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOZWVkIHRvIGNvbnZlcnQgY3VycmVuY3kgb2YgaW5zdGFudCBwdXJjaGFzZSBtYXhpbXVtIGJlZm9yZSB0cnlpbmcgdG8gcGxheVxuICAgICAgICBMYnJ5aW8uZ2V0RXhjaGFuZ2VSYXRlcygpLnRoZW4oKHsgTEJDX1VTRCB9KSA9PiB7XG4gICAgICAgICAgYXR0ZW1wdFBsYXkoaW5zdGFudFB1cmNoYXNlTWF4LmFtb3VudCAvIExCQ19VU0QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYXR0ZW1wdFBsYXkoKTtcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYXZlUG9zaXRpb24odXJpOiBzdHJpbmcsIHBvc2l0aW9uOiBudW1iZXIpIHtcbiAgcmV0dXJuIChkaXNwYXRjaDogRGlzcGF0Y2gsIGdldFN0YXRlOiAoKSA9PiBhbnkpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgY29uc3QgY2xhaW0gPSBtYWtlU2VsZWN0Q2xhaW1Gb3JVcmkodXJpKShzdGF0ZSk7XG4gICAgY29uc3QgeyBjbGFpbV9pZDogY2xhaW1JZCwgdHhpZCwgbm91dCB9ID0gY2xhaW07XG4gICAgY29uc3Qgb3V0cG9pbnQgPSBgJHt0eGlkfToke25vdXR9YDtcblxuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IEFDVElPTlMuU0VUX0NPTlRFTlRfUE9TSVRJT04sXG4gICAgICBkYXRhOiB7IGNsYWltSWQsIG91dHBvaW50LCBwb3NpdGlvbiB9LFxuICAgIH0pO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJQb3NpdGlvbih1cmk6IHN0cmluZykge1xuICByZXR1cm4gKGRpc3BhdGNoOiBEaXNwYXRjaCwgZ2V0U3RhdGU6ICgpID0+IGFueSkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBjbGFpbSA9IG1ha2VTZWxlY3RDbGFpbUZvclVyaSh1cmkpKHN0YXRlKTtcbiAgICBjb25zdCB7IGNsYWltX2lkOiBjbGFpbUlkLCB0eGlkLCBub3V0IH0gPSBjbGFpbTtcbiAgICBjb25zdCBvdXRwb2ludCA9IGAke3R4aWR9OiR7bm91dH1gO1xuXG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogQUNUSU9OUy5DTEVBUl9DT05URU5UX1BPU0lUSU9OLFxuICAgICAgZGF0YTogeyBjbGFpbUlkLCBvdXRwb2ludCB9LFxuICAgIH0pO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9TZXRDb250ZW50SGlzdG9yeUl0ZW0odXJpOiBzdHJpbmcpIHtcbiAgcmV0dXJuIChkaXNwYXRjaDogRGlzcGF0Y2gpID0+IHtcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlNFVF9DT05URU5UX0xBU1RfVklFV0VELFxuICAgICAgZGF0YTogeyB1cmksIGxhc3RWaWV3ZWQ6IERhdGUubm93KCkgfSxcbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvQ2xlYXJDb250ZW50SGlzdG9yeVVyaSh1cmk6IHN0cmluZykge1xuICByZXR1cm4gKGRpc3BhdGNoOiBEaXNwYXRjaCkgPT4ge1xuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IEFDVElPTlMuQ0xFQVJfQ09OVEVOVF9ISVNUT1JZX1VSSSxcbiAgICAgIGRhdGE6IHsgdXJpIH0sXG4gICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb0NsZWFyQ29udGVudEhpc3RvcnlBbGwoKSB7XG4gIHJldHVybiAoZGlzcGF0Y2g6IERpc3BhdGNoKSA9PiB7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiBBQ1RJT05TLkNMRUFSX0NPTlRFTlRfSElTVE9SWV9BTEwgfSk7XG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBkb1JlY29tbWVuZGF0aW9uVXBkYXRlID0gKGNsYWltSWQ6IHN0cmluZywgdXJsczogQXJyYXk8c3RyaW5nPiwgaWQ6IHN0cmluZywgcGFyZW50SWQ6IHN0cmluZykgPT4gKFxuICBkaXNwYXRjaDogRGlzcGF0Y2hcbikgPT4ge1xuICBkaXNwYXRjaCh7XG4gICAgdHlwZTogQUNUSU9OUy5SRUNPTU1FTkRBVElPTl9VUERBVEVELFxuICAgIGRhdGE6IHsgY2xhaW1JZCwgdXJscywgaWQsIHBhcmVudElkIH0sXG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGRvUmVjb21tZW5kYXRpb25DbGlja2VkID0gKGNsYWltSWQ6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4gKGRpc3BhdGNoOiBEaXNwYXRjaCkgPT4ge1xuICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCAmJiBpbmRleCAhPT0gbnVsbCkge1xuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IEFDVElPTlMuUkVDT01NRU5EQVRJT05fQ0xJQ0tFRCxcbiAgICAgIGRhdGE6IHsgY2xhaW1JZCwgaW5kZXggfSxcbiAgICB9KTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGRvVG9nZ2xlTG9vcExpc3QgPSAocGFyYW1zOiB7IGNvbGxlY3Rpb25JZDogc3RyaW5nLCBoaWRlVG9hc3Q/OiBib29sZWFuIH0pID0+IChcbiAgZGlzcGF0Y2g6IERpc3BhdGNoLFxuICBnZXRTdGF0ZTogKCkgPT4gYW55XG4pID0+IHtcbiAgY29uc3QgeyBjb2xsZWN0aW9uSWQsIGhpZGVUb2FzdCB9ID0gcGFyYW1zO1xuICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gIGNvbnN0IHBsYXlpbmdVcmkgPSBzZWxlY3RQbGF5aW5nVXJpKHN0YXRlKTtcbiAgY29uc3QgeyBjb2xsZWN0aW9uOiBwbGF5aW5nQ29sbGVjdGlvbiB9ID0gcGxheWluZ1VyaTtcbiAgY29uc3QgbG9vcE9uID0gc2VsZWN0TGlzdElzTG9vcGVkRm9ySWQoc3RhdGUsIGNvbGxlY3Rpb25JZCk7XG5cbiAgZGlzcGF0Y2goZG9DaGFuZ2VQbGF5aW5nVXJpUGFyYW0oeyBjb2xsZWN0aW9uOiB7IC4uLnBsYXlpbmdDb2xsZWN0aW9uLCBjb2xsZWN0aW9uSWQsIGxvb3A6ICFsb29wT24gfSB9KSk7XG5cbiAgaWYgKCFoaWRlVG9hc3QpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2goZG9Ub2FzdCh7IG1lc3NhZ2U6ICFsb29wT24gPyBfXygnTG9vcCBpcyBvbi4nKSA6IF9fKCdMb29wIGlzIG9mZi4nKSB9KSk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBkb1RvZ2dsZVNodWZmbGVMaXN0ID0gKHBhcmFtczogeyBjdXJyZW50VXJpPzogc3RyaW5nLCBjb2xsZWN0aW9uSWQ6IHN0cmluZywgaGlkZVRvYXN0PzogYm9vbGVhbiB9KSA9PiAoXG4gIGRpc3BhdGNoOiBEaXNwYXRjaCxcbiAgZ2V0U3RhdGU6ICgpID0+IGFueVxuKSA9PiB7XG4gIGNvbnN0IHsgY3VycmVudFVyaSwgY29sbGVjdGlvbklkLCBoaWRlVG9hc3QgfSA9IHBhcmFtcztcbiAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICBjb25zdCBwbGF5aW5nVXJpID0gc2VsZWN0UGxheWluZ1VyaShzdGF0ZSk7XG4gIGNvbnN0IHsgY29sbGVjdGlvbjogcGxheWluZ0NvbGxlY3Rpb24gfSA9IHBsYXlpbmdVcmk7XG4gIC8vIGNvbnN0IGNvbGxlY3Rpb25Jc1BsYXlpbmcgPSBzZWxlY3RJc0NvbGxlY3Rpb25QbGF5aW5nRm9ySWQoc3RhdGUsIGNvbGxlY3Rpb25JZCk7XG4gIGNvbnN0IGxpc3RJc1NodWZmbGVkRm9ySWQgPSBzZWxlY3RMaXN0SXNTaHVmZmxlZEZvcklkKHN0YXRlLCBjb2xsZWN0aW9uSWQpO1xuXG4gIGlmICghbGlzdElzU2h1ZmZsZWRGb3JJZCkge1xuICAgIGNvbnN0IHVybHMgPSBzZWxlY3RVcmxzRm9yQ29sbGVjdGlvbklkKHN0YXRlLCBjb2xsZWN0aW9uSWQpO1xuXG4gICAgbGV0IG5ld1VybHMgPSB1cmxzXG4gICAgICAubWFwKChpdGVtKSA9PiAoeyBpdGVtLCBzb3J0OiBNYXRoLnJhbmRvbSgpIH0pKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IGEuc29ydCAtIGIuc29ydClcbiAgICAgIC5tYXAoKHsgaXRlbSB9KSA9PiBpdGVtKTtcblxuICAgIC8vIHRoZSBjdXJyZW50bHkgcGxheWluZyBVUkkgc2hvdWxkIGJlIGZpcnN0IGluIGxpc3Qgb3IgZWxzZVxuICAgIC8vIGNhbiBnZXQgaW4gc3RyYW5nZSBwb3NpdGlvbiB3aGVyZSBpdCBtaWdodCBiZSBpbiB0aGUgbWlkZGxlIG9yIGxhc3RcbiAgICAvLyBhbmQgdGhlIHNodWZmbGVkIGxpc3QgZW5kcyBiZWZvcmUgc2Nyb2xsaW5nIHRocm91Z2ggYWxsIGVudHJpZXNcbiAgICBpZiAoY3VycmVudFVyaSkge1xuICAgICAgbmV3VXJscy5zcGxpY2UobmV3VXJscy5pbmRleE9mKGN1cnJlbnRVcmkpLCAxKTtcbiAgICAgIG5ld1VybHMuc3BsaWNlKDAsIDAsIGN1cnJlbnRVcmkpO1xuICAgIH1cblxuICAgIGRpc3BhdGNoKGRvQ2hhbmdlUGxheWluZ1VyaVBhcmFtKHsgY29sbGVjdGlvbjogeyAuLi5wbGF5aW5nQ29sbGVjdGlvbiwgY29sbGVjdGlvbklkLCBzaHVmZmxlOiB7IG5ld1VybHMgfSB9IH0pKTtcbiAgfSBlbHNlIHtcbiAgICBkaXNwYXRjaChkb0NoYW5nZVBsYXlpbmdVcmlQYXJhbSh7IGNvbGxlY3Rpb246IHsgLi4ucGxheWluZ0NvbGxlY3Rpb24sIGNvbGxlY3Rpb25JZCwgc2h1ZmZsZTogdW5kZWZpbmVkIH0gfSkpO1xuICB9XG5cbiAgaWYgKCFoaWRlVG9hc3QpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2goZG9Ub2FzdCh7IG1lc3NhZ2U6ICFsaXN0SXNTaHVmZmxlZEZvcklkID8gX18oJ1NodWZmbGUgaXMgb24uJykgOiBfXygnU2h1ZmZsZSBpcyBvZmYuJykgfSkpO1xuICB9XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZG9TZXRMYXN0Vmlld2VkQW5ub3VuY2VtZW50KGhhc2g6IHN0cmluZykge1xuICByZXR1cm4gKGRpc3BhdGNoOiBEaXNwYXRjaCkgPT4ge1xuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IEFDVElPTlMuU0VUX0xBU1RfVklFV0VEX0FOTk9VTkNFTUVOVCxcbiAgICAgIGRhdGE6IGhhc2gsXG4gICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb1NldFJlY3N5c0VudHJpZXMoZW50cmllczogeyBbQ2xhaW1JZF06IFJlY3N5c0VudHJ5IH0pIHtcbiAgcmV0dXJuIChkaXNwYXRjaDogRGlzcGF0Y2gpID0+IHtcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlNFVF9SRUNTWVNfRU5UUklFUyxcbiAgICAgIGRhdGE6IGVudHJpZXMsXG4gICAgfSk7XG4gIH07XG59XG5cbi8qKlxuICogU2VuZHMgYW55IGxpbmdlcmluZyByZWNzeXMgZW50cmllcyBmcm9tIHRoZSBwcmV2aW91cyBzZXNzaW9uIGFuZCBkZWxldGVzIGl0LlxuICpcbiAqIFNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbiBzdGFydHVwLCBiZWZvcmUgYSBuZXcgY3ljbGUgb2YgcmVjc3lzIGRhdGEgaXNcbiAqIGNvbGxlY3RlZC5cbiAqXG4gKiBAcmV0dXJucyB7KGZ1bmN0aW9uKERpc3BhdGNoLCBHZXRTdGF0ZSk6IHZvaWQpfCp9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb1NlbmRQYXN0UmVjc3lzRW50cmllcygpIHtcbiAgcmV0dXJuIChkaXNwYXRjaDogRGlzcGF0Y2gsIGdldFN0YXRlOiBHZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBlbnRyaWVzID0gc2VsZWN0UmVjc3lzRW50cmllcyhzdGF0ZSk7XG4gICAgaWYgKGVudHJpZXMpIHtcbiAgICAgIFJlY1N5cy5zZW5kRW50cmllcyhlbnRyaWVzLCB0cnVlKTtcbiAgICB9XG4gIH07XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBUkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBVUE7QUFDQTtBQUNBO0FBWkE7QUFnQkE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBQ0E7QUFqQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFxQkE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFYQTtBQUFBO0FBY0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQU9BO0FBQ0E7QUFUQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFXQTtBQUNBO0FBQ0E7QUFiQTtBQWtCQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBQ0E7QUFuQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUF1QkE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSkE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFQQTtBQVNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQU1BO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFOQTtBQUFBO0FBQUE7QUFBQTtBQVFBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFWQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFZQTtBQUNBO0FBQ0E7QUFkQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFvQkE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFWQTtBQUNBO0FBWUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFoQkE7QUFrQkE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5FQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQW9FQTtBQUVBO0FBZ0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUxBO0FBREE7QUFXQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBZkE7QUFzQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFHQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBR0E7QUFaQTtBQUNBO0FBY0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBcEJBO0FBc0JBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFGQTtBQUFBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFVQTtBQTFHQTtBQTRHQTtBQUVBO0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFnQ0E7QUFBQTtBQUNBO0FBQ0E7QUFNQTtBQUFBO0FBQUE7QUFOQTtBQVFBO0FBQ0E7QUEzQ0E7QUFDQTtBQTJCQTtBQUNBO0FBN0JBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFKQTtBQUFBO0FBQUE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFSQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFVQTtBQUNBO0FBQ0E7QUFaQTtBQWdCQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBckJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQXNCQTtBQUNBO0FBdkJBO0FBd0JBO0FBQ0E7QUFDQTtBQUNBO0FBM0JBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUE4Q0E7QUEvQ0E7QUFDQTtBQURBO0FBbURBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBUkE7QUFVQTtBQUNBO0FBQ0E7QUEvREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFnRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFGQTtBQU5BO0FBV0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFOQTtBQVdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBREE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFEQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQURBO0FBR0E7QUFFQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBSEE7QUFBQTtBQVNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBSUE7QUFOQTtBQUFBO0FBU0E7QUFBQTtBQUdBO0FBQUE7QUFFQTtBQUNBO0FBSEE7QUFLQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQWRBO0FBQUE7QUFpQkE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFFQTtBQUZBO0FBR0E7QUFBQTtBQU5BO0FBU0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFoQkE7QUFrQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFsQ0E7QUFBQTtBQXFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../ui/redux/actions/content.js\n");

/***/ }),

/***/ "../ui/redux/actions/file.js":
/*!***********************************!*\
  !*** ../ui/redux/actions/file.js ***!
  \***********************************/
/*! exports provided: doOpenFileInFolder, doOpenFileInShell, doDeleteFile, doDeleteFileAndMaybeGoBack, doFileGetForUri, doPurchaseUri, doClearPurchasedUriSuccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doOpenFileInFolder\", function() { return doOpenFileInFolder; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doOpenFileInShell\", function() { return doOpenFileInShell; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doDeleteFile\", function() { return doDeleteFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doDeleteFileAndMaybeGoBack\", function() { return doDeleteFileAndMaybeGoBack; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doFileGetForUri\", function() { return doFileGetForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doPurchaseUri\", function() { return doPurchaseUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doClearPurchasedUriSuccess\", function() { return doClearPurchasedUriSuccess; });\n/* harmony import */ var constants_action_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! constants/action_types */ \"../ui/constants/action_types.js\");\n/* harmony import */ var constants_abandon_states__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! constants/abandon_states */ \"../ui/constants/abandon_states.js\");\n/* harmony import */ var lbry__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lbry */ \"../ui/lbry.js\");\n/* harmony import */ var redux_selectors_claims__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! redux/selectors/claims */ \"../ui/redux/selectors/claims.js\");\n/* harmony import */ var redux_actions_claims__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! redux/actions/claims */ \"../ui/redux/actions/claims.js\");\n/* harmony import */ var util_batch_actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! util/batch-actions */ \"../ui/util/batch-actions.js\");\n/* harmony import */ var redux_actions_app__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! redux/actions/app */ \"../ui/redux/actions/app.js\");\n/* harmony import */ var connected_react_router__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! connected-react-router */ \"../node_modules/connected-react-router/esm/index.js\");\n/* harmony import */ var redux_actions_content__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! redux/actions/content */ \"../ui/redux/actions/content.js\");\n/* harmony import */ var redux_selectors_content__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! redux/selectors/content */ \"../ui/redux/selectors/content.js\");\n/* harmony import */ var redux_actions_notifications__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! redux/actions/notifications */ \"../ui/redux/actions/notifications.js\");\n/* harmony import */ var redux_selectors_wallet__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! redux/selectors/wallet */ \"../ui/redux/selectors/wallet.js\");\n/* harmony import */ var redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! redux/selectors/file_info */ \"../ui/redux/selectors/file_info.js\");\n/* harmony import */ var util_claim__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! util/claim */ \"../ui/util/claim.js\");\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction doOpenFileInFolder(path) {\n  return function () {\n    shell.showItemInFolder(path);\n  };\n}\nfunction doOpenFileInShell(path) {\n  return function (dispatch) {\n    var success = shell.openPath(path);\n\n    if (!success) {\n      dispatch(doOpenFileInFolder(path));\n    }\n  };\n}\nfunction doDeleteFile(outpoint, deleteFromComputer, abandonClaim, cb, claim) {\n  return function (dispatch) {\n    if (abandonClaim) {\n      dispatch(Object(redux_actions_claims__WEBPACK_IMPORTED_MODULE_4__[\"doAbandonClaim\"])(claim, cb));\n    }\n  };\n}\nfunction doDeleteFileAndMaybeGoBack(uri, deleteFromComputer, abandonClaim, doGoBack, claim) {\n  return function (dispatch, getState) {\n    var state = getState();\n    var playingUri = Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_9__[\"selectPlayingUri\"])(state);\n\n    var _ref = Object(redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_12__[\"makeSelectFileInfoForUri\"])(uri)(state) || '',\n        outpoint = _ref.outpoint;\n\n    var _selectClaimForUri = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_3__[\"selectClaimForUri\"])(state, uri),\n        nout = _selectClaimForUri.nout,\n        txid = _selectClaimForUri.txid;\n\n    var claimOutpoint = \"\".concat(txid, \":\").concat(nout);\n    var actions = [];\n\n    if (!abandonClaim) {\n      actions.push(Object(redux_actions_app__WEBPACK_IMPORTED_MODULE_6__[\"doHideModal\"])());\n    }\n\n    actions.push(doDeleteFile(outpoint || claimOutpoint, deleteFromComputer, abandonClaim, function (abandonState) {\n      if (abandonState === constants_abandon_states__WEBPACK_IMPORTED_MODULE_1__[\"DONE\"]) {\n        if (abandonClaim) {\n          if (doGoBack) {\n            dispatch(Object(connected_react_router__WEBPACK_IMPORTED_MODULE_7__[\"goBack\"])());\n          }\n\n          dispatch(Object(redux_actions_app__WEBPACK_IMPORTED_MODULE_6__[\"doHideModal\"])());\n        }\n      }\n    }, claim));\n\n    if (playingUri.uri === uri) {\n      actions.push(Object(redux_actions_content__WEBPACK_IMPORTED_MODULE_8__[\"doClearPlayingUri\"])());\n    } // it would be nice to stay on the claim if you just want to delete it\n    // we need to alter autoplay to not start downloading again after you delete it\n\n\n    dispatch(util_batch_actions__WEBPACK_IMPORTED_MODULE_5__[\"batchActions\"].apply(void 0, actions));\n  };\n}\nvar doFileGetForUri = function doFileGetForUri(uri, onSuccess) {\n  return function _callee(dispatch, getState) {\n    var state, alreadyFetching, claim, _claim, nout, txid, outpoint;\n\n    return regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            state = getState();\n            alreadyFetching = Object(redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_12__[\"selectOutpointFetchingForUri\"])(state, uri);\n\n            if (!(alreadyFetching && !onSuccess)) {\n              _context.next = 4;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 4:\n            claim = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_3__[\"selectClaimForUri\"])(state, uri);\n\n            if (claim) {\n              _context.next = 9;\n              break;\n            }\n\n            _context.next = 8;\n            return regeneratorRuntime.awrap(dispatch(Object(redux_actions_claims__WEBPACK_IMPORTED_MODULE_4__[\"doGetClaimFromUriResolve\"])(uri)));\n\n          case 8:\n            claim = _context.sent;\n\n          case 9:\n            _claim = claim, nout = _claim.nout, txid = _claim.txid;\n            outpoint = \"\".concat(txid, \":\").concat(nout);\n            dispatch({\n              type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"FETCH_FILE_INFO_STARTED\"],\n              data: {\n                outpoint: outpoint\n              }\n            });\n            lbry__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get({\n              uri: uri\n            }).then(function (streamInfo) {\n              var timeout = streamInfo === null || _typeof(streamInfo) !== 'object' || streamInfo.error === 'Timeout';\n\n              if (timeout) {\n                dispatch({\n                  type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"FETCH_FILE_INFO_FAILED\"],\n                  data: {\n                    outpoint: outpoint\n                  }\n                });\n                dispatch(Object(redux_actions_notifications__WEBPACK_IMPORTED_MODULE_10__[\"doToast\"])({\n                  message: \"File timeout for uri \".concat(uri),\n                  isError: true\n                }));\n              } else {\n                if (streamInfo.purchase_receipt || streamInfo.content_fee) {\n                  dispatch({\n                    type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"PURCHASE_URI_COMPLETED\"],\n                    data: {\n                      uri: uri,\n                      purchaseReceipt: streamInfo.purchase_receipt || streamInfo.content_fee\n                    }\n                  });\n                }\n\n                dispatch({\n                  type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"FETCH_FILE_INFO_COMPLETED\"],\n                  data: {\n                    fileInfo: streamInfo,\n                    outpoint: outpoint\n                  }\n                });\n\n                if (onSuccess) {\n                  onSuccess(streamInfo);\n                }\n              }\n            })[\"catch\"](function (error) {\n              dispatch({\n                type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"PURCHASE_URI_FAILED\"],\n                data: {\n                  uri: uri,\n                  error: error\n                }\n              });\n              dispatch({\n                type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"FETCH_FILE_INFO_FAILED\"],\n                data: {\n                  outpoint: outpoint\n                }\n              }); // TODO: probably a better way to address this\n              // supress no source error if it's a livestream\n\n              var isLivestreamClaim = Object(util_claim__WEBPACK_IMPORTED_MODULE_13__[\"isStreamPlaceholderClaim\"])(claim);\n              if (isLivestreamClaim && error.message === \"stream doesn't have source data\") return;\n              dispatch(Object(redux_actions_notifications__WEBPACK_IMPORTED_MODULE_10__[\"doToast\"])({\n                message: \"Failed to view \".concat(uri, \", please try again. If this problem persists, visit https://odysee.com/@OdyseeHelp:b?view=about for support.\"),\n                isError: true\n              }));\n            });\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n};\nfunction doPurchaseUri(uri, costInfo, onSuccess) {\n  return function (dispatch, getState) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"PURCHASE_URI_STARTED\"],\n      data: {\n        uri: uri\n      }\n    });\n    var state = getState();\n    var balance = Object(redux_selectors_wallet__WEBPACK_IMPORTED_MODULE_11__[\"selectBalance\"])(state);\n    var cost = costInfo.cost;\n\n    if (parseFloat(cost) > balance) {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"PURCHASE_URI_FAILED\"],\n        data: {\n          uri: uri,\n          error: 'Insufficient credits'\n        }\n      });\n      Promise.resolve();\n      return;\n    }\n\n    dispatch(doFileGetForUri(uri, onSuccess));\n  };\n}\nfunction doClearPurchasedUriSuccess() {\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"CLEAR_PURCHASED_URI_SUCCESS\"]\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvcmVkdXgvYWN0aW9ucy9maWxlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL3VpL3JlZHV4L2FjdGlvbnMvZmlsZS5qcz9hYjY3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5pbXBvcnQgKiBhcyBBQ1RJT05TIGZyb20gJ2NvbnN0YW50cy9hY3Rpb25fdHlwZXMnO1xuaW1wb3J0ICogYXMgQUJBTkRPTl9TVEFURVMgZnJvbSAnY29uc3RhbnRzL2FiYW5kb25fc3RhdGVzJztcbmltcG9ydCBMYnJ5IGZyb20gJ2xicnknO1xuaW1wb3J0IHsgc2VsZWN0Q2xhaW1Gb3JVcmkgfSBmcm9tICdyZWR1eC9zZWxlY3RvcnMvY2xhaW1zJztcbmltcG9ydCB7IGRvQWJhbmRvbkNsYWltLCBkb0dldENsYWltRnJvbVVyaVJlc29sdmUgfSBmcm9tICdyZWR1eC9hY3Rpb25zL2NsYWltcyc7XG5pbXBvcnQgeyBiYXRjaEFjdGlvbnMgfSBmcm9tICd1dGlsL2JhdGNoLWFjdGlvbnMnO1xuXG5pbXBvcnQgeyBkb0hpZGVNb2RhbCB9IGZyb20gJ3JlZHV4L2FjdGlvbnMvYXBwJztcbmltcG9ydCB7IGdvQmFjayB9IGZyb20gJ2Nvbm5lY3RlZC1yZWFjdC1yb3V0ZXInO1xuaW1wb3J0IHsgZG9DbGVhclBsYXlpbmdVcmkgfSBmcm9tICdyZWR1eC9hY3Rpb25zL2NvbnRlbnQnO1xuaW1wb3J0IHsgc2VsZWN0UGxheWluZ1VyaSB9IGZyb20gJ3JlZHV4L3NlbGVjdG9ycy9jb250ZW50JztcbmltcG9ydCB7IGRvVG9hc3QgfSBmcm9tICdyZWR1eC9hY3Rpb25zL25vdGlmaWNhdGlvbnMnO1xuaW1wb3J0IHsgc2VsZWN0QmFsYW5jZSB9IGZyb20gJ3JlZHV4L3NlbGVjdG9ycy93YWxsZXQnO1xuaW1wb3J0IHsgbWFrZVNlbGVjdEZpbGVJbmZvRm9yVXJpLCBzZWxlY3RPdXRwb2ludEZldGNoaW5nRm9yVXJpIH0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2ZpbGVfaW5mbyc7XG5pbXBvcnQgeyBpc1N0cmVhbVBsYWNlaG9sZGVyQ2xhaW0gfSBmcm9tICd1dGlsL2NsYWltJztcblxudHlwZSBEaXNwYXRjaCA9IChhY3Rpb246IGFueSkgPT4gYW55O1xudHlwZSBHZXRTdGF0ZSA9ICgpID0+IHsgY2xhaW1zOiBhbnksIGZpbGU6IEZpbGVTdGF0ZSwgY29udGVudDogYW55LCB1c2VyOiBVc2VyU3RhdGUgfTtcbmV4cG9ydCBmdW5jdGlvbiBkb09wZW5GaWxlSW5Gb2xkZXIocGF0aDogc3RyaW5nKSB7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgc2hlbGwuc2hvd0l0ZW1JbkZvbGRlcihwYXRoKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvT3BlbkZpbGVJblNoZWxsKHBhdGg6IHN0cmluZykge1xuICByZXR1cm4gKGRpc3BhdGNoOiBEaXNwYXRjaCkgPT4ge1xuICAgIGNvbnN0IHN1Y2Nlc3MgPSBzaGVsbC5vcGVuUGF0aChwYXRoKTtcbiAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgIGRpc3BhdGNoKGRvT3BlbkZpbGVJbkZvbGRlcihwYXRoKSk7XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9EZWxldGVGaWxlKFxuICBvdXRwb2ludDogc3RyaW5nLFxuICBkZWxldGVGcm9tQ29tcHV0ZXI/OiBib29sZWFuLFxuICBhYmFuZG9uQ2xhaW0/OiBib29sZWFuLFxuICBjYjogYW55LFxuICBjbGFpbTogQ2xhaW1cbikge1xuICByZXR1cm4gKGRpc3BhdGNoOiBEaXNwYXRjaCkgPT4ge1xuICAgIGlmIChhYmFuZG9uQ2xhaW0pIHtcbiAgICAgIGRpc3BhdGNoKGRvQWJhbmRvbkNsYWltKGNsYWltLCBjYikpO1xuICAgIH1cblxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9EZWxldGVGaWxlQW5kTWF5YmVHb0JhY2soXG4gIHVyaTogc3RyaW5nLFxuICBkZWxldGVGcm9tQ29tcHV0ZXI/OiBib29sZWFuLFxuICBhYmFuZG9uQ2xhaW0/OiBib29sZWFuLFxuICBkb0dvQmFjazogKGFueSkgPT4gdm9pZCxcbiAgY2xhaW06IENsYWltXG4pIHtcbiAgcmV0dXJuIChkaXNwYXRjaDogRGlzcGF0Y2gsIGdldFN0YXRlOiBHZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBwbGF5aW5nVXJpID0gc2VsZWN0UGxheWluZ1VyaShzdGF0ZSk7XG4gICAgY29uc3QgeyBvdXRwb2ludCB9ID0gbWFrZVNlbGVjdEZpbGVJbmZvRm9yVXJpKHVyaSkoc3RhdGUpIHx8ICcnO1xuICAgIGNvbnN0IHsgbm91dCwgdHhpZCB9ID0gc2VsZWN0Q2xhaW1Gb3JVcmkoc3RhdGUsIHVyaSk7XG4gICAgY29uc3QgY2xhaW1PdXRwb2ludCA9IGAke3R4aWR9OiR7bm91dH1gO1xuICAgIGNvbnN0IGFjdGlvbnMgPSBbXTtcblxuICAgIGlmICghYWJhbmRvbkNsYWltKSB7XG4gICAgICBhY3Rpb25zLnB1c2goZG9IaWRlTW9kYWwoKSk7XG4gICAgfVxuXG4gICAgYWN0aW9ucy5wdXNoKFxuICAgICAgZG9EZWxldGVGaWxlKFxuICAgICAgICBvdXRwb2ludCB8fCBjbGFpbU91dHBvaW50LFxuICAgICAgICBkZWxldGVGcm9tQ29tcHV0ZXIsXG4gICAgICAgIGFiYW5kb25DbGFpbSxcbiAgICAgICAgKGFiYW5kb25TdGF0ZSkgPT4ge1xuICAgICAgICAgIGlmIChhYmFuZG9uU3RhdGUgPT09IEFCQU5ET05fU1RBVEVTLkRPTkUpIHtcbiAgICAgICAgICAgIGlmIChhYmFuZG9uQ2xhaW0pIHtcbiAgICAgICAgICAgICAgaWYgKGRvR29CYWNrKSB7XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2goZ29CYWNrKCkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRpc3BhdGNoKGRvSGlkZU1vZGFsKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2xhaW1cbiAgICAgIClcbiAgICApO1xuXG4gICAgaWYgKHBsYXlpbmdVcmkudXJpID09PSB1cmkpIHtcbiAgICAgIGFjdGlvbnMucHVzaChkb0NsZWFyUGxheWluZ1VyaSgpKTtcbiAgICB9XG4gICAgLy8gaXQgd291bGQgYmUgbmljZSB0byBzdGF5IG9uIHRoZSBjbGFpbSBpZiB5b3UganVzdCB3YW50IHRvIGRlbGV0ZSBpdFxuICAgIC8vIHdlIG5lZWQgdG8gYWx0ZXIgYXV0b3BsYXkgdG8gbm90IHN0YXJ0IGRvd25sb2FkaW5nIGFnYWluIGFmdGVyIHlvdSBkZWxldGUgaXRcblxuICAgIGRpc3BhdGNoKGJhdGNoQWN0aW9ucyguLi5hY3Rpb25zKSk7XG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBkb0ZpbGVHZXRGb3JVcmkgPSAodXJpOiBzdHJpbmcsIG9uU3VjY2Vzcz86IChHZXRSZXNwb25zZSkgPT4gYW55KSA9PiBhc3luYyAoXG4gIGRpc3BhdGNoOiBEaXNwYXRjaCxcbiAgZ2V0U3RhdGU6IEdldFN0YXRlXG4pID0+IHtcbiAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICBjb25zdCBhbHJlYWR5RmV0Y2hpbmcgPSBzZWxlY3RPdXRwb2ludEZldGNoaW5nRm9yVXJpKHN0YXRlLCB1cmkpO1xuXG4gIGlmIChhbHJlYWR5RmV0Y2hpbmcgJiYgIW9uU3VjY2VzcykgcmV0dXJuO1xuXG4gIGxldCBjbGFpbSA9IHNlbGVjdENsYWltRm9yVXJpKHN0YXRlLCB1cmkpO1xuICBpZiAoIWNsYWltKSB7XG4gICAgY2xhaW0gPSBhd2FpdCBkaXNwYXRjaChkb0dldENsYWltRnJvbVVyaVJlc29sdmUodXJpKSk7XG4gIH1cbiAgY29uc3QgeyBub3V0LCB0eGlkIH0gPSBjbGFpbTtcbiAgY29uc3Qgb3V0cG9pbnQgPSBgJHt0eGlkfToke25vdXR9YDtcblxuICBkaXNwYXRjaCh7IHR5cGU6IEFDVElPTlMuRkVUQ0hfRklMRV9JTkZPX1NUQVJURUQsIGRhdGE6IHsgb3V0cG9pbnQgfSB9KTtcblxuICBMYnJ5LmdldCh7IHVyaSB9KVxuICAgIC50aGVuKChzdHJlYW1JbmZvOiBHZXRSZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QgdGltZW91dCA9IHN0cmVhbUluZm8gPT09IG51bGwgfHwgdHlwZW9mIHN0cmVhbUluZm8gIT09ICdvYmplY3QnIHx8IHN0cmVhbUluZm8uZXJyb3IgPT09ICdUaW1lb3V0JztcbiAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBBQ1RJT05TLkZFVENIX0ZJTEVfSU5GT19GQUlMRUQsXG4gICAgICAgICAgZGF0YTogeyBvdXRwb2ludCB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBkaXNwYXRjaChkb1RvYXN0KHsgbWVzc2FnZTogYEZpbGUgdGltZW91dCBmb3IgdXJpICR7dXJpfWAsIGlzRXJyb3I6IHRydWUgfSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHN0cmVhbUluZm8ucHVyY2hhc2VfcmVjZWlwdCB8fCBzdHJlYW1JbmZvLmNvbnRlbnRfZmVlKSB7XG4gICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogQUNUSU9OUy5QVVJDSEFTRV9VUklfQ09NUExFVEVELFxuICAgICAgICAgICAgZGF0YTogeyB1cmksIHB1cmNoYXNlUmVjZWlwdDogc3RyZWFtSW5mby5wdXJjaGFzZV9yZWNlaXB0IHx8IHN0cmVhbUluZm8uY29udGVudF9mZWUgfSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBBQ1RJT05TLkZFVENIX0ZJTEVfSU5GT19DT01QTEVURUQsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZmlsZUluZm86IHN0cmVhbUluZm8sXG4gICAgICAgICAgICBvdXRwb2ludDogb3V0cG9pbnQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKG9uU3VjY2Vzcykge1xuICAgICAgICAgIG9uU3VjY2VzcyhzdHJlYW1JbmZvKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBBQ1RJT05TLlBVUkNIQVNFX1VSSV9GQUlMRUQsXG4gICAgICAgIGRhdGE6IHsgdXJpLCBlcnJvciB9LFxuICAgICAgfSk7XG5cbiAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogQUNUSU9OUy5GRVRDSF9GSUxFX0lORk9fRkFJTEVELFxuICAgICAgICBkYXRhOiB7IG91dHBvaW50IH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gVE9ETzogcHJvYmFibHkgYSBiZXR0ZXIgd2F5IHRvIGFkZHJlc3MgdGhpc1xuICAgICAgLy8gc3VwcmVzcyBubyBzb3VyY2UgZXJyb3IgaWYgaXQncyBhIGxpdmVzdHJlYW1cbiAgICAgIGNvbnN0IGlzTGl2ZXN0cmVhbUNsYWltID0gaXNTdHJlYW1QbGFjZWhvbGRlckNsYWltKGNsYWltKTtcbiAgICAgIGlmIChpc0xpdmVzdHJlYW1DbGFpbSAmJiBlcnJvci5tZXNzYWdlID09PSBcInN0cmVhbSBkb2Vzbid0IGhhdmUgc291cmNlIGRhdGFcIikgcmV0dXJuO1xuXG4gICAgICBkaXNwYXRjaChcbiAgICAgICAgZG9Ub2FzdCh7XG4gICAgICAgICAgbWVzc2FnZTogYEZhaWxlZCB0byB2aWV3ICR7dXJpfSwgcGxlYXNlIHRyeSBhZ2Fpbi4gSWYgdGhpcyBwcm9ibGVtIHBlcnNpc3RzLCB2aXNpdCBodHRwczovL29keXNlZS5jb20vQE9keXNlZUhlbHA6Yj92aWV3PWFib3V0IGZvciBzdXBwb3J0LmAsXG4gICAgICAgICAgaXNFcnJvcjogdHJ1ZSxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZG9QdXJjaGFzZVVyaSh1cmk6IHN0cmluZywgY29zdEluZm86IHsgY29zdDogbnVtYmVyIH0sIG9uU3VjY2Vzcz86IChHZXRSZXNwb25zZSkgPT4gYW55KSB7XG4gIHJldHVybiAoZGlzcGF0Y2g6IERpc3BhdGNoLCBnZXRTdGF0ZTogR2V0U3RhdGUpID0+IHtcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlBVUkNIQVNFX1VSSV9TVEFSVEVELFxuICAgICAgZGF0YTogeyB1cmkgfSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBiYWxhbmNlID0gc2VsZWN0QmFsYW5jZShzdGF0ZSk7XG5cbiAgICBjb25zdCB7IGNvc3QgfSA9IGNvc3RJbmZvO1xuICAgIGlmIChwYXJzZUZsb2F0KGNvc3QpID4gYmFsYW5jZSkge1xuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBBQ1RJT05TLlBVUkNIQVNFX1VSSV9GQUlMRUQsXG4gICAgICAgIGRhdGE6IHsgdXJpLCBlcnJvcjogJ0luc3VmZmljaWVudCBjcmVkaXRzJyB9LFxuICAgICAgfSk7XG5cbiAgICAgIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRpc3BhdGNoKGRvRmlsZUdldEZvclVyaSh1cmksIG9uU3VjY2VzcykpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9DbGVhclB1cmNoYXNlZFVyaVN1Y2Nlc3MoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogQUNUSU9OUy5DTEVBUl9QVVJDSEFTRURfVVJJX1NVQ0NFU1MsXG4gIH07XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFFQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUVBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFaQTtBQUNBO0FBaUJBO0FBQ0E7QUFoQ0E7QUFtQ0E7QUFDQTtBQUNBO0FBQUE7QUFyQ0E7QUF1Q0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBTkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQVNBO0FBQ0E7QUFWQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFXQTtBQUNBO0FBWkE7QUFBQTtBQWNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFOQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBN0JBO0FBZ0NBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFGQTtBQWhEQTtBQUNBO0FBbkJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUEwRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQUtBO0FBQ0E7QUFQQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFwQkE7QUFzQkE7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../ui/redux/actions/file.js\n");

/***/ }),

/***/ "../ui/redux/actions/publish.js":
/*!**************************************!*\
  !*** ../ui/redux/actions/publish.js ***!
  \**************************************/
/*! exports provided: NO_FILE, doPublishDesktop, doPublishResume, doResetThumbnailStatus, doBeginPublish, doClearPublish, doUpdatePublishForm, doUploadThumbnail, doPrepareEdit, doPublish, doCheckReflectingFiles, doUpdateUploadAdd, doUpdateUploadProgress, doUpdateUploadRemove */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NO_FILE\", function() { return NO_FILE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doPublishDesktop\", function() { return doPublishDesktop; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doPublishResume\", function() { return doPublishResume; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doResetThumbnailStatus\", function() { return doResetThumbnailStatus; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doBeginPublish\", function() { return doBeginPublish; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doClearPublish\", function() { return doClearPublish; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUpdatePublishForm\", function() { return doUpdatePublishForm; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUploadThumbnail\", function() { return doUploadThumbnail; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doPrepareEdit\", function() { return doPrepareEdit; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doPublish\", function() { return doPublish; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doCheckReflectingFiles\", function() { return doCheckReflectingFiles; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUpdateUploadAdd\", function() { return doUpdateUploadAdd; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUpdateUploadProgress\", function() { return doUpdateUploadProgress; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUpdateUploadRemove\", function() { return doUpdateUploadRemove; });\n/* harmony import */ var constants_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! constants/errors */ \"../ui/constants/errors.js\");\n/* harmony import */ var constants_modal_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! constants/modal_types */ \"../ui/constants/modal_types.js\");\n/* harmony import */ var constants_action_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! constants/action_types */ \"../ui/constants/action_types.js\");\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! constants/pages */ \"../ui/constants/pages.js\");\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(constants_pages__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var util_batch_actions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! util/batch-actions */ \"../ui/util/batch-actions.js\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! config */ \"../config.js\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(config__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var redux_actions_claims__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! redux/actions/claims */ \"../ui/redux/actions/claims.js\");\n/* harmony import */ var redux_selectors_claims__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! redux/selectors/claims */ \"../ui/redux/selectors/claims.js\");\n/* harmony import */ var redux_selectors_publish__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! redux/selectors/publish */ \"../ui/redux/selectors/publish.js\");\n/* harmony import */ var redux_actions_notifications__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! redux/actions/notifications */ \"../ui/redux/actions/notifications.js\");\n/* harmony import */ var connected_react_router__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! connected-react-router */ \"../node_modules/connected-react-router/esm/index.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! analytics */ \"../ui/analytics.js\");\n/* harmony import */ var redux_actions_app__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! redux/actions/app */ \"../ui/redux/actions/app.js\");\n/* harmony import */ var constants_licenses__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! constants/licenses */ \"../ui/constants/licenses.js\");\n/* harmony import */ var constants_cdn_urls__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! constants/cdn_urls */ \"../ui/constants/cdn_urls.js\");\n/* harmony import */ var constants_thumbnail_upload_statuses__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! constants/thumbnail_upload_statuses */ \"../ui/constants/thumbnail_upload_statuses.js\");\n/* harmony import */ var util_format_credits__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! util/format-credits */ \"../ui/util/format-credits.js\");\n/* harmony import */ var lbry__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! lbry */ \"../ui/lbry.js\");\n/* harmony import */ var util_claim__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! util/claim */ \"../ui/util/claim.js\");\n/* harmony import */ var constants_tags__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! constants/tags */ \"../ui/constants/tags.js\");\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // import LbryFirst from 'extras/lbry-first/lbry-first';\n\n\n\n\nfunction resolveClaimTypeForAnalytics(claim) {\n  if (!claim) {\n    return 'undefined_claim';\n  }\n\n  switch (claim.value_type) {\n    case 'stream':\n      if (claim.value) {\n        if (!claim.value.source) {\n          return 'livestream';\n        } else {\n          return claim.value.stream_type;\n        }\n      } else {\n        return 'stream';\n      }\n\n    default:\n      // collection, channel, repost, undefined\n      return claim.value_type;\n  }\n}\n\nvar NO_FILE = '---';\n\nfunction resolvePublishPayload(publishData, myClaimForUri, myChannels, preview) {\n  var name = publishData.name,\n      bid = publishData.bid,\n      filePath = publishData.filePath,\n      description = publishData.description,\n      language = publishData.language,\n      releaseTimeEdited = publishData.releaseTimeEdited,\n      releaseAnytime = publishData.releaseAnytime,\n      licenseUrl = publishData.licenseUrl,\n      useLBRYUploader = publishData.useLBRYUploader,\n      licenseType = publishData.licenseType,\n      otherLicenseDescription = publishData.otherLicenseDescription,\n      thumbnail = publishData.thumbnail,\n      channel = publishData.channel,\n      title = publishData.title,\n      contentIsFree = publishData.contentIsFree,\n      fee = publishData.fee,\n      tags = publishData.tags,\n      optimize = publishData.optimize,\n      isLivestreamPublish = publishData.isLivestreamPublish,\n      remoteFileUrl = publishData.remoteFileUrl; // Handle scenario where we have a claim that has the same name as a channel we are publishing with.\n\n  var myClaimForUriEditing = myClaimForUri && myClaimForUri.name === name ? myClaimForUri : null;\n  var publishingLicense;\n\n  switch (licenseType) {\n    case constants_licenses__WEBPACK_IMPORTED_MODULE_13__[\"COPYRIGHT\"]:\n    case constants_licenses__WEBPACK_IMPORTED_MODULE_13__[\"OTHER\"]:\n      publishingLicense = otherLicenseDescription;\n      break;\n\n    default:\n      publishingLicense = licenseType;\n  } // get the claim id from the channel name, we will use that instead\n\n\n  var namedChannelClaim = myChannels ? myChannels.find(function (myChannel) {\n    return myChannel.name === channel;\n  }) : null;\n  var channelId = namedChannelClaim ? namedChannelClaim.claim_id : '';\n  var nowTimeStamp = Number(Math.round(Date.now() / 1000));\n\n  var _ref = myClaimForUri || {},\n      claimId = _ref.claim_id;\n\n  var publishPayload = {\n    name: name,\n    title: title,\n    description: description,\n    locations: [],\n    bid: Object(util_format_credits__WEBPACK_IMPORTED_MODULE_16__[\"creditsToString\"])(bid),\n    languages: [language],\n    tags: tags && tags.map(function (tag) {\n      return tag.name;\n    }),\n    thumbnail_url: thumbnail,\n    release_time: nowTimeStamp,\n    blocking: true,\n    preview: false\n  };\n\n  if (claimId) {\n    publishPayload.claim_id = claimId;\n  } // Temporary solution to keep the same publish flow with the new tags api\n  // Eventually we will allow users to enter their own tags on publish\n  // `nsfw` will probably be removed\n\n\n  if (remoteFileUrl) {\n    publishPayload.remote_url = remoteFileUrl;\n  }\n\n  if (publishingLicense) {\n    publishPayload.license = publishingLicense;\n  }\n\n  if (licenseUrl) {\n    publishPayload.license_url = licenseUrl;\n  }\n\n  if (thumbnail) {\n    publishPayload.thumbnail_url = thumbnail;\n  }\n\n  if (useLBRYUploader) {\n    publishPayload.tags.push(constants_tags__WEBPACK_IMPORTED_MODULE_19__[\"LBRY_FIRST_TAG\"]);\n  } // Set release time to the newly edited time.\n  // On edits, if not explicitly set to anytime, keep the original release/transaction time as release_time\n\n\n  if (releaseTimeEdited) {\n    publishPayload.release_time = releaseTimeEdited;\n  } else if (!releaseAnytime && myClaimForUriEditing && myClaimForUriEditing.value.release_time) {\n    publishPayload.release_time = Number(myClaimForUri.value.release_time);\n  } else if (!releaseAnytime && myClaimForUriEditing && myClaimForUriEditing.timestamp) {\n    publishPayload.release_time = Number(myClaimForUriEditing.timestamp);\n  } // Remove internal scheduled tag if it exists.\n\n\n  publishPayload.tags = publishPayload.tags.filter(function (tag) {\n    return tag !== constants_tags__WEBPACK_IMPORTED_MODULE_19__[\"SCHEDULED_LIVESTREAM_TAG\"];\n  }); // Add internal scheduled tag if claim is a livestream and is being scheduled in the future.\n\n  if (isLivestreamPublish && publishPayload.release_time > nowTimeStamp) {\n    publishPayload.tags.push(constants_tags__WEBPACK_IMPORTED_MODULE_19__[\"SCHEDULED_LIVESTREAM_TAG\"]);\n  }\n\n  if (channelId) {\n    publishPayload.channel_id = channelId;\n  }\n\n  if (myClaimForUriEditing && myClaimForUriEditing.value && myClaimForUriEditing.value.locations) {\n    publishPayload.locations = myClaimForUriEditing.value.locations;\n  }\n\n  if (!contentIsFree && fee && fee.currency && Number(fee.amount) > 0) {\n    publishPayload.fee_currency = fee.currency;\n    publishPayload.fee_amount = Object(util_format_credits__WEBPACK_IMPORTED_MODULE_16__[\"creditsToString\"])(fee.amount);\n  }\n\n  if (optimize) {\n    publishPayload.optimize_file = true;\n  } // Only pass file on new uploads, not metadata only edits.\n  // The sdk will figure it out\n\n\n  if (filePath && !isLivestreamPublish) {\n    publishPayload.file_path = filePath;\n  }\n\n  if (preview) {\n    publishPayload.preview = true;\n    publishPayload.optimize_file = false;\n  }\n\n  return publishPayload;\n}\n\nvar doPublishDesktop = function doPublishDesktop(filePath, preview) {\n  return function (dispatch, getState) {\n    var publishPreviewFn = function publishPreviewFn(previewResponse) {\n      dispatch(Object(redux_actions_app__WEBPACK_IMPORTED_MODULE_12__[\"doOpenModal\"])(constants_modal_types__WEBPACK_IMPORTED_MODULE_1__[\"PUBLISH_PREVIEW\"], {\n        previewResponse: previewResponse\n      }));\n    };\n\n    var noFileParam = !filePath || filePath === NO_FILE;\n    var state = getState();\n    var editingUri = Object(redux_selectors_publish__WEBPACK_IMPORTED_MODULE_8__[\"selectPublishFormValue\"])(state, 'editingURI') || '';\n    var remoteUrl = Object(redux_selectors_publish__WEBPACK_IMPORTED_MODULE_8__[\"selectPublishFormValue\"])(state, 'remoteFileUrl');\n    var claim = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_7__[\"makeSelectClaimForUri\"])(editingUri)(state) || {};\n    var hasSourceFile = claim.value && claim.value.source;\n    var redirectToLivestream = noFileParam && !hasSourceFile && !remoteUrl;\n\n    var publishSuccess = function publishSuccess(successResponse, lbryFirstError) {\n      var state = getState();\n      var myClaims = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_7__[\"selectMyClaims\"])(state);\n      var pendingClaim = successResponse.outputs[0];\n      analytics__WEBPACK_IMPORTED_MODULE_11__[\"default\"].apiLog.publish(pendingClaim);\n      var url = pendingClaim.permanent_url;\n      var actions = [];\n      actions.push({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"PUBLISH_SUCCESS\"],\n        data: {\n          type: resolveClaimTypeForAnalytics(pendingClaim)\n        }\n      }); // We have to fake a temp claim until the new pending one is returned by claim_list_mine\n      // We can't rely on claim_list_mine because there might be some delay before the new claims are returned\n      // Doing this allows us to show the pending claim immediately, it will get overwritten by the real one\n\n      var isMatch = function isMatch(claim) {\n        return claim.claim_id === pendingClaim.claim_id;\n      };\n\n      var isEdit = myClaims.some(isMatch);\n      actions.push({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"UPDATE_PENDING_CLAIMS\"],\n        data: {\n          claims: [pendingClaim]\n        }\n      });\n      dispatch(util_batch_actions__WEBPACK_IMPORTED_MODULE_4__[\"batchActions\"].apply(void 0, actions));\n      dispatch(Object(redux_actions_app__WEBPACK_IMPORTED_MODULE_12__[\"doOpenModal\"])(constants_modal_types__WEBPACK_IMPORTED_MODULE_1__[\"PUBLISH\"], {\n        uri: url,\n        isEdit: isEdit,\n        filePath: filePath,\n        lbryFirstError: lbryFirstError\n      }));\n      dispatch(Object(redux_actions_claims__WEBPACK_IMPORTED_MODULE_6__[\"doCheckPendingClaims\"])());\n\n      if (redirectToLivestream) {\n        dispatch(Object(connected_react_router__WEBPACK_IMPORTED_MODULE_10__[\"push\"])(\"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_3__[\"LIVESTREAM\"])));\n      }\n    };\n\n    var publishFail = function publishFail(error) {\n      var actions = [];\n      actions.push({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"PUBLISH_FAIL\"]\n      });\n      var message = typeof error === 'string' ? error : error.message;\n\n      if (message.endsWith(constants_errors__WEBPACK_IMPORTED_MODULE_0__[\"SDK_FETCH_TIMEOUT\"])) {\n        message = constants_errors__WEBPACK_IMPORTED_MODULE_0__[\"PUBLISH_TIMEOUT_BUT_LIKELY_SUCCESSFUL\"];\n      }\n\n      actions.push(Object(redux_actions_notifications__WEBPACK_IMPORTED_MODULE_9__[\"doError\"])({\n        message: message,\n        cause: error.cause\n      }));\n      dispatch(util_batch_actions__WEBPACK_IMPORTED_MODULE_4__[\"batchActions\"].apply(void 0, actions));\n    };\n\n    if (preview) {\n      dispatch(doPublish(publishSuccess, publishFail, publishPreviewFn));\n      return;\n    } // Redirect on web immediately because we have a file upload progress componenet\n    // on the publishes page. This doesn't exist on desktop so wait until we get a response\n    // from the SDK\n\n\n    if (!redirectToLivestream) {\n      dispatch(Object(connected_react_router__WEBPACK_IMPORTED_MODULE_10__[\"push\"])(\"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_3__[\"UPLOADS\"])));\n    }\n\n    dispatch(doPublish(publishSuccess, publishFail));\n  };\n};\nvar doPublishResume = function doPublishResume(publishPayload) {\n  return function (dispatch, getState) {\n    var publishSuccess = function publishSuccess(successResponse, lbryFirstError) {\n      var state = getState();\n      var myClaimIds = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_7__[\"selectMyActiveClaims\"])(state);\n      var pendingClaim = successResponse.outputs[0];\n      var url = pendingClaim.permanent_url;\n      analytics__WEBPACK_IMPORTED_MODULE_11__[\"default\"].apiLog.publish(pendingClaim); // We have to fake a temp claim until the new pending one is returned by claim_list_mine\n      // We can't rely on claim_list_mine because there might be some delay before the new claims are returned\n      // Doing this allows us to show the pending claim immediately, it will get overwritten by the real one\n\n      var isEdit = myClaimIds.has(pendingClaim.claim_id);\n      var actions = [];\n      actions.push({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"PUBLISH_SUCCESS\"],\n        data: {\n          type: resolveClaimTypeForAnalytics(pendingClaim)\n        }\n      });\n      actions.push({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"UPDATE_PENDING_CLAIMS\"],\n        data: {\n          claims: [pendingClaim]\n        }\n      });\n      dispatch(util_batch_actions__WEBPACK_IMPORTED_MODULE_4__[\"batchActions\"].apply(void 0, actions));\n      dispatch(Object(redux_actions_app__WEBPACK_IMPORTED_MODULE_12__[\"doOpenModal\"])(constants_modal_types__WEBPACK_IMPORTED_MODULE_1__[\"PUBLISH\"], {\n        uri: url,\n        isEdit: isEdit,\n        lbryFirstError: lbryFirstError\n      }));\n      dispatch(Object(redux_actions_claims__WEBPACK_IMPORTED_MODULE_6__[\"doCheckPendingClaims\"])());\n    };\n\n    var publishFail = function publishFail(error) {\n      var actions = [];\n      actions.push({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"PUBLISH_FAIL\"]\n      });\n      actions.push(Object(redux_actions_notifications__WEBPACK_IMPORTED_MODULE_9__[\"doError\"])({\n        message: error.message,\n        cause: error.cause\n      }));\n      dispatch(util_batch_actions__WEBPACK_IMPORTED_MODULE_4__[\"batchActions\"].apply(void 0, actions));\n    };\n\n    dispatch(doPublish(publishSuccess, publishFail, null, publishPayload));\n  };\n};\nvar doResetThumbnailStatus = function doResetThumbnailStatus() {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"UPDATE_PUBLISH_FORM\"],\n      data: {\n        thumbnailPath: '',\n        thumbnailError: undefined\n      }\n    });\n    return dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"UPDATE_PUBLISH_FORM\"],\n      data: {\n        uploadThumbnailStatus: constants_thumbnail_upload_statuses__WEBPACK_IMPORTED_MODULE_15__[\"READY\"],\n        thumbnail: ''\n      }\n    });\n  };\n};\nvar doBeginPublish = function doBeginPublish(name) {\n  return function (dispatch) {\n    dispatch(doClearPublish()); // $FlowFixMe\n    // dispatch(doPrepareEdit({ name }));\n    // dispatch(push(`/$/${PAGES.UPLOAD}`));\n  };\n};\nvar doClearPublish = function doClearPublish() {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"CLEAR_PUBLISH\"]\n    });\n    return dispatch(doResetThumbnailStatus());\n  };\n};\nvar doUpdatePublishForm = function doUpdatePublishForm(publishFormValue) {\n  return function (dispatch) {\n    return dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"UPDATE_PUBLISH_FORM\"],\n      data: _objectSpread({}, publishFormValue)\n    });\n  };\n};\nvar doUploadThumbnail = function doUploadThumbnail(filePath, thumbnailBlob, fsAdapter, fs, path, cb) {\n  return function (dispatch) {\n    var thumbnail, fileExt, fileName, fileType, stats, size;\n\n    var uploadError = function uploadError() {\n      var error = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      dispatch(Object(util_batch_actions__WEBPACK_IMPORTED_MODULE_4__[\"batchActions\"])({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"UPDATE_PUBLISH_FORM\"],\n        data: {\n          uploadThumbnailStatus: constants_thumbnail_upload_statuses__WEBPACK_IMPORTED_MODULE_15__[\"READY\"],\n          thumbnail: '',\n          nsfw: false\n        }\n      }, Object(redux_actions_notifications__WEBPACK_IMPORTED_MODULE_9__[\"doError\"])(error)));\n    };\n\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"UPDATE_PUBLISH_FORM\"],\n      data: {\n        thumbnailError: undefined\n      }\n    });\n\n    var doUpload = function doUpload(data) {\n      return fetch(constants_cdn_urls__WEBPACK_IMPORTED_MODULE_14__[\"IMG_CDN_PUBLISH_URL\"], {\n        method: 'POST',\n        body: data\n      }).then(function (res) {\n        return res.text();\n      }).then(function (text) {\n        try {\n          return text.length ? JSON.parse(text) : {};\n        } catch (_unused) {\n          throw new Error(text);\n        }\n      }).then(function (json) {\n        if (json.type !== 'success') {\n          return uploadError(json.message || __('There was an error in the upload. The format or extension might not be supported.'));\n        }\n\n        if (cb) {\n          cb(json.message);\n        }\n\n        return dispatch({\n          type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"UPDATE_PUBLISH_FORM\"],\n          data: {\n            uploadThumbnailStatus: constants_thumbnail_upload_statuses__WEBPACK_IMPORTED_MODULE_15__[\"COMPLETE\"],\n            thumbnail: json.message\n          }\n        });\n      })[\"catch\"](function (err) {\n        var message = err.message; // This sucks but \\_()_/\n\n        if (message === 'Failed to fetch') {\n          // message = __('Thumbnail upload service may be down, try again later.');\n          message = __('Thumbnail upload service may be down, try again later. Some plugins like AdGuard Franais may be blocking the service. If using Brave, go to brave://adblock and disable it, or turn down shields.');\n        }\n\n        var userInput = [fileName, fileExt, fileType, thumbnail, size];\n        uploadError({\n          message: message,\n          cause: \"\".concat(userInput.join(' | '))\n        });\n      });\n    };\n\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"UPDATE_PUBLISH_FORM\"],\n      data: {\n        uploadThumbnailStatus: constants_thumbnail_upload_statuses__WEBPACK_IMPORTED_MODULE_15__[\"IN_PROGRESS\"]\n      }\n    });\n\n    if (fsAdapter && fsAdapter.readFile && filePath) {\n      fsAdapter.readFile(filePath, 'base64').then(function (base64Image) {\n        fileExt = 'png';\n        fileName = 'thumbnail.png';\n        fileType = 'image/png';\n        var data = new FormData(); // $FlowFixMe\n\n        data.append('file-input', {\n          uri: 'file://' + filePath,\n          type: fileType,\n          name: fileName\n        });\n        data.append('upload', 'Upload');\n        return doUpload(data);\n      });\n    } else {\n      if (filePath && fs && path) {\n        thumbnail = fs.readFileSync(filePath);\n        fileExt = path.extname(filePath);\n        fileName = path.basename(filePath);\n        stats = fs.statSync(filePath);\n        size = stats.size;\n        fileType = \"image/\".concat(fileExt.slice(1));\n      } else if (thumbnailBlob) {\n        fileExt = \".\".concat(thumbnailBlob.type && thumbnailBlob.type.split('/')[1]);\n        fileName = thumbnailBlob.name;\n        fileType = thumbnailBlob.type;\n        size = thumbnailBlob.size;\n      } else {\n        return null;\n      }\n\n      if (size && size >= config__WEBPACK_IMPORTED_MODULE_5__[\"THUMBNAIL_CDN_SIZE_LIMIT_BYTES\"]) {\n        var maxSizeMB = config__WEBPACK_IMPORTED_MODULE_5__[\"THUMBNAIL_CDN_SIZE_LIMIT_BYTES\"] / (1024 * 1024);\n        uploadError(__('Thumbnail size over %max_size%MB, please edit and reupload.', {\n          max_size: maxSizeMB\n        }));\n        return;\n      }\n\n      var data = new FormData();\n      var file = thumbnailBlob || thumbnail && new File([thumbnail], fileName, {\n        type: fileType\n      }); // $FlowFixMe\n\n      data.append('file-input', file);\n      data.append('upload', 'Upload');\n      return doUpload(data);\n    }\n  };\n};\nvar doPrepareEdit = function doPrepareEdit(claim, uri, claimType) {\n  return function (dispatch, getState) {\n    var name = claim.name,\n        amount = claim.amount,\n        _claim$value = claim.value,\n        value = _claim$value === void 0 ? {} : _claim$value;\n    var channelName = claim && claim.signing_channel && claim.signing_channel.name || null;\n    var author = value.author,\n        description = value.description,\n        _value$fee = value.fee,\n        fee = _value$fee === void 0 ? {\n      amount: '0',\n      currency: 'LBC'\n    } : _value$fee,\n        languages = value.languages,\n        release_time = value.release_time,\n        license = value.license,\n        licenseUrl = value.license_url,\n        thumbnail = value.thumbnail,\n        title = value.title,\n        tags = value.tags;\n    var state = getState();\n    var myClaimForUri = Object(redux_selectors_publish__WEBPACK_IMPORTED_MODULE_8__[\"selectMyClaimForUri\"])(state);\n\n    var _ref2 = myClaimForUri || {},\n        claim_id = _ref2.claim_id;\n\n    var publishData = {\n      claim_id: claim_id,\n      name: name,\n      bid: Number(amount),\n      contentIsFree: fee.amount === '0',\n      author: author,\n      description: description,\n      fee: fee,\n      languages: languages,\n      releaseTime: release_time,\n      releaseTimeEdited: undefined,\n      thumbnail: thumbnail ? thumbnail.url : null,\n      title: title,\n      uri: uri,\n      uploadThumbnailStatus: thumbnail ? constants_thumbnail_upload_statuses__WEBPACK_IMPORTED_MODULE_15__[\"MANUAL\"] : undefined,\n      licenseUrl: licenseUrl,\n      nsfw: Object(util_claim__WEBPACK_IMPORTED_MODULE_18__[\"isClaimNsfw\"])(claim),\n      tags: tags ? tags.map(function (tag) {\n        return {\n          name: tag\n        };\n      }) : []\n    }; // Make sure custom licenses are mapped properly\n    // If the license isn't one of the standard licenses, map the custom license and description/url\n\n    if (!constants_licenses__WEBPACK_IMPORTED_MODULE_13__[\"CC_LICENSES\"].some(function (_ref3) {\n      var value = _ref3.value;\n      return value === license;\n    })) {\n      if (!license || license === constants_licenses__WEBPACK_IMPORTED_MODULE_13__[\"NONE\"] || license === constants_licenses__WEBPACK_IMPORTED_MODULE_13__[\"PUBLIC_DOMAIN\"]) {\n        publishData.licenseType = license;\n      } else if (license && !licenseUrl && license !== constants_licenses__WEBPACK_IMPORTED_MODULE_13__[\"NONE\"]) {\n        publishData.licenseType = constants_licenses__WEBPACK_IMPORTED_MODULE_13__[\"COPYRIGHT\"];\n      } else {\n        publishData.licenseType = constants_licenses__WEBPACK_IMPORTED_MODULE_13__[\"OTHER\"];\n      }\n\n      publishData.otherLicenseDescription = license;\n    } else {\n      publishData.licenseType = license;\n    }\n\n    if (channelName) {\n      publishData['channel'] = channelName;\n    }\n\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"DO_PREPARE_EDIT\"],\n      data: publishData\n    });\n\n    switch (claimType) {\n      case 'post':\n        dispatch(Object(connected_react_router__WEBPACK_IMPORTED_MODULE_10__[\"push\"])(\"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_3__[\"POST\"])));\n        break;\n\n      case 'livestream':\n        dispatch(Object(connected_react_router__WEBPACK_IMPORTED_MODULE_10__[\"push\"])(\"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_3__[\"LIVESTREAM\"])));\n        break;\n\n      default:\n        dispatch(Object(connected_react_router__WEBPACK_IMPORTED_MODULE_10__[\"push\"])(\"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_3__[\"UPLOAD\"])));\n        break;\n    }\n  };\n};\nvar doPublish = function doPublish(success, fail, previewFn, payload) {\n  return function (dispatch, getState) {\n    if (!previewFn) {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"PUBLISH_START\"]\n      });\n    }\n\n    var state = getState();\n    var myClaimForUri = Object(redux_selectors_publish__WEBPACK_IMPORTED_MODULE_8__[\"selectMyClaimForUri\"])(state);\n    var myChannels = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_7__[\"selectMyChannelClaims\"])(state); // const myClaims = selectMyClaimsWithoutChannels(state);\n    // get redux publish form\n\n    var publishData = Object(redux_selectors_publish__WEBPACK_IMPORTED_MODULE_8__[\"selectPublishFormValues\"])(state);\n    var publishPayload = payload || resolvePublishPayload(publishData, myClaimForUri, myChannels, previewFn);\n\n    if (previewFn) {\n      return lbry__WEBPACK_IMPORTED_MODULE_17__[\"default\"].publish(publishPayload).then(function (previewResponse) {\n        // $FlowIgnore\n        return previewFn(previewResponse);\n      }, fail);\n    }\n\n    return lbry__WEBPACK_IMPORTED_MODULE_17__[\"default\"].publish(publishPayload).then(function (response) {\n      // TODO: Restore LbryFirst\n      // if (!useLBRYUploader) {\n      return success(response); // }\n      // $FlowFixMe\n      // publishPayload.permanent_url = response.outputs[0].permanent_url;\n      //\n      // return LbryFirst.upload(publishPayload)\n      //   .then(() => {\n      //     // Return original publish response so app treats it like a normal publish\n      //     return success(response);\n      //   })\n      //   .catch((error) => {\n      //     return success(response, error);\n      //   });\n    }, fail);\n  };\n}; // Calls file_list until any reflecting files are done\n\nvar doCheckReflectingFiles = function doCheckReflectingFiles() {\n  return function (dispatch, getState) {\n    var state = getState();\n    var checkingReflector = state.claims.checkingReflector;\n    var reflectorCheckInterval;\n\n    var checkFileList = function checkFileList() {\n      var state, reflectingById, ids, newReflectingById, promises;\n      return regeneratorRuntime.async(function checkFileList$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              state = getState();\n              reflectingById = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_7__[\"selectReflectingById\"])(state);\n              ids = Object.keys(reflectingById);\n              newReflectingById = {};\n              promises = []; // TODO: just use file_list({claim_id: Array<claimId>})\n\n              if (Object.keys(reflectingById).length) {\n                ids.forEach(function (claimId) {\n                  promises.push(lbry__WEBPACK_IMPORTED_MODULE_17__[\"default\"].file_list({\n                    claim_id: claimId\n                  }));\n                });\n                Promise.all(promises).then(function (results) {\n                  results.forEach(function (res) {\n                    if (res.items[0]) {\n                      var fileListItem = res.items[0];\n                      var fileClaimId = fileListItem.claim_id;\n                      var done = fileListItem.is_fully_reflected,\n                          uploading = fileListItem.uploading_to_reflector,\n                          progress = fileListItem.reflector_progress;\n\n                      if (uploading) {\n                        newReflectingById[fileClaimId] = {\n                          fileListItem: fileListItem,\n                          progress: progress,\n                          stalled: !done && !uploading\n                        };\n                      }\n                    }\n                  });\n                }).then(function () {\n                  dispatch({\n                    type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"UPDATE_FILES_REFLECTING\"],\n                    data: newReflectingById\n                  });\n\n                  if (!Object.keys(newReflectingById).length) {\n                    dispatch({\n                      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"TOGGLE_CHECKING_REFLECTING\"],\n                      data: false\n                    });\n                    clearInterval(reflectorCheckInterval);\n                  }\n                });\n              } else {\n                dispatch({\n                  type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"TOGGLE_CHECKING_REFLECTING\"],\n                  data: false\n                });\n                clearInterval(reflectorCheckInterval);\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }; // do it once...\n\n\n    checkFileList(); // then start the interval if it's not already started\n\n    if (!checkingReflector) {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"TOGGLE_CHECKING_REFLECTING\"],\n        data: true\n      });\n      reflectorCheckInterval = setInterval(function () {\n        checkFileList();\n      }, 5000);\n    }\n  };\n};\nfunction doUpdateUploadAdd(file, params, uploader) {\n  return function (dispatch, getState) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"UPDATE_UPLOAD_ADD\"],\n      data: {\n        file: file,\n        params: params,\n        uploader: uploader\n      }\n    });\n  };\n}\nvar doUpdateUploadProgress = function doUpdateUploadProgress(props) {\n  return function (dispatch) {\n    return dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"UPDATE_UPLOAD_PROGRESS\"],\n      data: props\n    });\n  };\n};\n/**\n * doUpdateUploadRemove\n *\n * @param guid\n * @param params Optional. Retain to allow removal of old keys, which are\n *               derived from `name#channel` instead of using a guid.\n *               Can be removed after January 2022.\n * @returns {(function(Dispatch, GetState): void)|*}\n */\n\nfunction doUpdateUploadRemove(guid, params) {\n  return function (dispatch, getState) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"UPDATE_UPLOAD_REMOVE\"],\n      data: {\n        guid: guid,\n        params: params\n      }\n    });\n  };\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvcmVkdXgvYWN0aW9ucy9wdWJsaXNoLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL3VpL3JlZHV4L2FjdGlvbnMvcHVibGlzaC5qcz85NTMyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5pbXBvcnQgKiBhcyBFUlJPUlMgZnJvbSAnY29uc3RhbnRzL2Vycm9ycyc7XG5pbXBvcnQgKiBhcyBNT0RBTFMgZnJvbSAnY29uc3RhbnRzL21vZGFsX3R5cGVzJztcbmltcG9ydCAqIGFzIEFDVElPTlMgZnJvbSAnY29uc3RhbnRzL2FjdGlvbl90eXBlcyc7XG5pbXBvcnQgKiBhcyBQQUdFUyBmcm9tICdjb25zdGFudHMvcGFnZXMnO1xuaW1wb3J0IHsgYmF0Y2hBY3Rpb25zIH0gZnJvbSAndXRpbC9iYXRjaC1hY3Rpb25zJztcbmltcG9ydCB7IFRIVU1CTkFJTF9DRE5fU0laRV9MSU1JVF9CWVRFUyB9IGZyb20gJ2NvbmZpZyc7XG5pbXBvcnQgeyBkb0NoZWNrUGVuZGluZ0NsYWltcyB9IGZyb20gJ3JlZHV4L2FjdGlvbnMvY2xhaW1zJztcbmltcG9ydCB7XG4gIG1ha2VTZWxlY3RDbGFpbUZvclVyaSxcbiAgc2VsZWN0TXlBY3RpdmVDbGFpbXMsXG4gIHNlbGVjdE15Q2xhaW1zLFxuICBzZWxlY3RNeUNoYW5uZWxDbGFpbXMsXG4gIC8vIHNlbGVjdE15Q2xhaW1zV2l0aG91dENoYW5uZWxzLFxuICBzZWxlY3RSZWZsZWN0aW5nQnlJZCxcbn0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2NsYWltcyc7XG5pbXBvcnQgeyBzZWxlY3RQdWJsaXNoRm9ybVZhbHVlLCBzZWxlY3RQdWJsaXNoRm9ybVZhbHVlcywgc2VsZWN0TXlDbGFpbUZvclVyaSB9IGZyb20gJ3JlZHV4L3NlbGVjdG9ycy9wdWJsaXNoJztcbmltcG9ydCB7IGRvRXJyb3IgfSBmcm9tICdyZWR1eC9hY3Rpb25zL25vdGlmaWNhdGlvbnMnO1xuaW1wb3J0IHsgcHVzaCB9IGZyb20gJ2Nvbm5lY3RlZC1yZWFjdC1yb3V0ZXInO1xuaW1wb3J0IGFuYWx5dGljcyBmcm9tICdhbmFseXRpY3MnO1xuaW1wb3J0IHsgZG9PcGVuTW9kYWwgfSBmcm9tICdyZWR1eC9hY3Rpb25zL2FwcCc7XG5pbXBvcnQgeyBDQ19MSUNFTlNFUywgQ09QWVJJR0hULCBPVEhFUiwgTk9ORSwgUFVCTElDX0RPTUFJTiB9IGZyb20gJ2NvbnN0YW50cy9saWNlbnNlcyc7XG5pbXBvcnQgeyBJTUdfQ0ROX1BVQkxJU0hfVVJMIH0gZnJvbSAnY29uc3RhbnRzL2Nkbl91cmxzJztcbmltcG9ydCAqIGFzIFRIVU1CTkFJTF9TVEFUVVNFUyBmcm9tICdjb25zdGFudHMvdGh1bWJuYWlsX3VwbG9hZF9zdGF0dXNlcyc7XG5pbXBvcnQgeyBjcmVkaXRzVG9TdHJpbmcgfSBmcm9tICd1dGlsL2Zvcm1hdC1jcmVkaXRzJztcbmltcG9ydCBMYnJ5IGZyb20gJ2xicnknO1xuLy8gaW1wb3J0IExicnlGaXJzdCBmcm9tICdleHRyYXMvbGJyeS1maXJzdC9sYnJ5LWZpcnN0JztcbmltcG9ydCB7IGlzQ2xhaW1Oc2Z3IH0gZnJvbSAndXRpbC9jbGFpbSc7XG5pbXBvcnQgeyBMQlJZX0ZJUlNUX1RBRywgU0NIRURVTEVEX0xJVkVTVFJFQU1fVEFHIH0gZnJvbSAnY29uc3RhbnRzL3RhZ3MnO1xuXG5mdW5jdGlvbiByZXNvbHZlQ2xhaW1UeXBlRm9yQW5hbHl0aWNzKGNsYWltKSB7XG4gIGlmICghY2xhaW0pIHtcbiAgICByZXR1cm4gJ3VuZGVmaW5lZF9jbGFpbSc7XG4gIH1cblxuICBzd2l0Y2ggKGNsYWltLnZhbHVlX3R5cGUpIHtcbiAgICBjYXNlICdzdHJlYW0nOlxuICAgICAgaWYgKGNsYWltLnZhbHVlKSB7XG4gICAgICAgIGlmICghY2xhaW0udmFsdWUuc291cmNlKSB7XG4gICAgICAgICAgcmV0dXJuICdsaXZlc3RyZWFtJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gY2xhaW0udmFsdWUuc3RyZWFtX3R5cGU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnc3RyZWFtJztcbiAgICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgLy8gY29sbGVjdGlvbiwgY2hhbm5lbCwgcmVwb3N0LCB1bmRlZmluZWRcbiAgICAgIHJldHVybiBjbGFpbS52YWx1ZV90eXBlO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBOT19GSUxFID0gJy0tLSc7XG5cbmZ1bmN0aW9uIHJlc29sdmVQdWJsaXNoUGF5bG9hZChwdWJsaXNoRGF0YSwgbXlDbGFpbUZvclVyaSwgbXlDaGFubmVscywgcHJldmlldykge1xuICBjb25zdCB7XG4gICAgbmFtZSxcbiAgICBiaWQsXG4gICAgZmlsZVBhdGgsXG4gICAgZGVzY3JpcHRpb24sXG4gICAgbGFuZ3VhZ2UsXG4gICAgcmVsZWFzZVRpbWVFZGl0ZWQsXG4gICAgcmVsZWFzZUFueXRpbWUsXG4gICAgLy8gbGljZW5zZSxcbiAgICBsaWNlbnNlVXJsLFxuICAgIHVzZUxCUllVcGxvYWRlcixcbiAgICBsaWNlbnNlVHlwZSxcbiAgICBvdGhlckxpY2Vuc2VEZXNjcmlwdGlvbixcbiAgICB0aHVtYm5haWwsXG4gICAgY2hhbm5lbCxcbiAgICB0aXRsZSxcbiAgICBjb250ZW50SXNGcmVlLFxuICAgIGZlZSxcbiAgICAvLyB1cmksXG4gICAgdGFncyxcbiAgICAvLyBsb2NhdGlvbnMsXG4gICAgb3B0aW1pemUsXG4gICAgaXNMaXZlc3RyZWFtUHVibGlzaCxcbiAgICByZW1vdGVGaWxlVXJsLFxuICB9ID0gcHVibGlzaERhdGE7XG5cbiAgLy8gSGFuZGxlIHNjZW5hcmlvIHdoZXJlIHdlIGhhdmUgYSBjbGFpbSB0aGF0IGhhcyB0aGUgc2FtZSBuYW1lIGFzIGEgY2hhbm5lbCB3ZSBhcmUgcHVibGlzaGluZyB3aXRoLlxuICBjb25zdCBteUNsYWltRm9yVXJpRWRpdGluZyA9IG15Q2xhaW1Gb3JVcmkgJiYgbXlDbGFpbUZvclVyaS5uYW1lID09PSBuYW1lID8gbXlDbGFpbUZvclVyaSA6IG51bGw7XG5cbiAgbGV0IHB1Ymxpc2hpbmdMaWNlbnNlO1xuICBzd2l0Y2ggKGxpY2Vuc2VUeXBlKSB7XG4gICAgY2FzZSBDT1BZUklHSFQ6XG4gICAgY2FzZSBPVEhFUjpcbiAgICAgIHB1Ymxpc2hpbmdMaWNlbnNlID0gb3RoZXJMaWNlbnNlRGVzY3JpcHRpb247XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgcHVibGlzaGluZ0xpY2Vuc2UgPSBsaWNlbnNlVHlwZTtcbiAgfVxuXG4gIC8vIGdldCB0aGUgY2xhaW0gaWQgZnJvbSB0aGUgY2hhbm5lbCBuYW1lLCB3ZSB3aWxsIHVzZSB0aGF0IGluc3RlYWRcbiAgY29uc3QgbmFtZWRDaGFubmVsQ2xhaW0gPSBteUNoYW5uZWxzID8gbXlDaGFubmVscy5maW5kKChteUNoYW5uZWwpID0+IG15Q2hhbm5lbC5uYW1lID09PSBjaGFubmVsKSA6IG51bGw7XG4gIGNvbnN0IGNoYW5uZWxJZCA9IG5hbWVkQ2hhbm5lbENsYWltID8gbmFtZWRDaGFubmVsQ2xhaW0uY2xhaW1faWQgOiAnJztcblxuICBjb25zdCBub3dUaW1lU3RhbXAgPSBOdW1iZXIoTWF0aC5yb3VuZChEYXRlLm5vdygpIC8gMTAwMCkpO1xuICBjb25zdCB7IGNsYWltX2lkOiBjbGFpbUlkIH0gPSBteUNsYWltRm9yVXJpIHx8IHt9O1xuXG4gIGNvbnN0IHB1Ymxpc2hQYXlsb2FkOiB7XG4gICAgY2xhaW1faWQ/OiBzdHJpbmcsXG4gICAgbmFtZTogP3N0cmluZyxcbiAgICBiaWQ6IHN0cmluZyxcbiAgICBkZXNjcmlwdGlvbj86IHN0cmluZyxcbiAgICBjaGFubmVsX2lkPzogc3RyaW5nLFxuICAgIGZpbGVfcGF0aD86IHN0cmluZyxcbiAgICBsaWNlbnNlX3VybD86IHN0cmluZyxcbiAgICBsaWNlbnNlPzogc3RyaW5nLFxuICAgIHRodW1ibmFpbF91cmw/OiBzdHJpbmcsXG4gICAgcmVsZWFzZV90aW1lOiBudW1iZXIsXG4gICAgZmVlX2N1cnJlbmN5Pzogc3RyaW5nLFxuICAgIGZlZV9hbW91bnQ/OiBzdHJpbmcsXG4gICAgbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPixcbiAgICB0YWdzOiBBcnJheTxzdHJpbmc+LFxuICAgIGxvY2F0aW9ucz86IEFycmF5PGFueT4sXG4gICAgYmxvY2tpbmc6IGJvb2xlYW4sXG4gICAgb3B0aW1pemVfZmlsZT86IGJvb2xlYW4sXG4gICAgcHJldmlldz86IGJvb2xlYW4sXG4gICAgcmVtb3RlX3VybD86IHN0cmluZyxcbiAgfSA9IHtcbiAgICBuYW1lLFxuICAgIHRpdGxlLFxuICAgIGRlc2NyaXB0aW9uLFxuICAgIGxvY2F0aW9uczogW10sXG4gICAgYmlkOiBjcmVkaXRzVG9TdHJpbmcoYmlkKSxcbiAgICBsYW5ndWFnZXM6IFtsYW5ndWFnZV0sXG4gICAgdGFnczogdGFncyAmJiB0YWdzLm1hcCgodGFnKSA9PiB0YWcubmFtZSksXG4gICAgdGh1bWJuYWlsX3VybDogdGh1bWJuYWlsLFxuICAgIHJlbGVhc2VfdGltZTogbm93VGltZVN0YW1wLFxuICAgIGJsb2NraW5nOiB0cnVlLFxuICAgIHByZXZpZXc6IGZhbHNlLFxuICB9O1xuXG4gIGlmIChjbGFpbUlkKSB7XG4gICAgcHVibGlzaFBheWxvYWQuY2xhaW1faWQgPSBjbGFpbUlkO1xuICB9XG5cbiAgLy8gVGVtcG9yYXJ5IHNvbHV0aW9uIHRvIGtlZXAgdGhlIHNhbWUgcHVibGlzaCBmbG93IHdpdGggdGhlIG5ldyB0YWdzIGFwaVxuICAvLyBFdmVudHVhbGx5IHdlIHdpbGwgYWxsb3cgdXNlcnMgdG8gZW50ZXIgdGhlaXIgb3duIHRhZ3Mgb24gcHVibGlzaFxuICAvLyBgbnNmd2Agd2lsbCBwcm9iYWJseSBiZSByZW1vdmVkXG4gIGlmIChyZW1vdGVGaWxlVXJsKSB7XG4gICAgcHVibGlzaFBheWxvYWQucmVtb3RlX3VybCA9IHJlbW90ZUZpbGVVcmw7XG4gIH1cblxuICBpZiAocHVibGlzaGluZ0xpY2Vuc2UpIHtcbiAgICBwdWJsaXNoUGF5bG9hZC5saWNlbnNlID0gcHVibGlzaGluZ0xpY2Vuc2U7XG4gIH1cblxuICBpZiAobGljZW5zZVVybCkge1xuICAgIHB1Ymxpc2hQYXlsb2FkLmxpY2Vuc2VfdXJsID0gbGljZW5zZVVybDtcbiAgfVxuXG4gIGlmICh0aHVtYm5haWwpIHtcbiAgICBwdWJsaXNoUGF5bG9hZC50aHVtYm5haWxfdXJsID0gdGh1bWJuYWlsO1xuICB9XG5cbiAgaWYgKHVzZUxCUllVcGxvYWRlcikge1xuICAgIHB1Ymxpc2hQYXlsb2FkLnRhZ3MucHVzaChMQlJZX0ZJUlNUX1RBRyk7XG4gIH1cblxuICAvLyBTZXQgcmVsZWFzZSB0aW1lIHRvIHRoZSBuZXdseSBlZGl0ZWQgdGltZS5cbiAgLy8gT24gZWRpdHMsIGlmIG5vdCBleHBsaWNpdGx5IHNldCB0byBhbnl0aW1lLCBrZWVwIHRoZSBvcmlnaW5hbCByZWxlYXNlL3RyYW5zYWN0aW9uIHRpbWUgYXMgcmVsZWFzZV90aW1lXG4gIGlmIChyZWxlYXNlVGltZUVkaXRlZCkge1xuICAgIHB1Ymxpc2hQYXlsb2FkLnJlbGVhc2VfdGltZSA9IHJlbGVhc2VUaW1lRWRpdGVkO1xuICB9IGVsc2UgaWYgKCFyZWxlYXNlQW55dGltZSAmJiBteUNsYWltRm9yVXJpRWRpdGluZyAmJiBteUNsYWltRm9yVXJpRWRpdGluZy52YWx1ZS5yZWxlYXNlX3RpbWUpIHtcbiAgICBwdWJsaXNoUGF5bG9hZC5yZWxlYXNlX3RpbWUgPSBOdW1iZXIobXlDbGFpbUZvclVyaS52YWx1ZS5yZWxlYXNlX3RpbWUpO1xuICB9IGVsc2UgaWYgKCFyZWxlYXNlQW55dGltZSAmJiBteUNsYWltRm9yVXJpRWRpdGluZyAmJiBteUNsYWltRm9yVXJpRWRpdGluZy50aW1lc3RhbXApIHtcbiAgICBwdWJsaXNoUGF5bG9hZC5yZWxlYXNlX3RpbWUgPSBOdW1iZXIobXlDbGFpbUZvclVyaUVkaXRpbmcudGltZXN0YW1wKTtcbiAgfVxuXG4gIC8vIFJlbW92ZSBpbnRlcm5hbCBzY2hlZHVsZWQgdGFnIGlmIGl0IGV4aXN0cy5cbiAgcHVibGlzaFBheWxvYWQudGFncyA9IHB1Ymxpc2hQYXlsb2FkLnRhZ3MuZmlsdGVyKCh0YWcpID0+IHRhZyAhPT0gU0NIRURVTEVEX0xJVkVTVFJFQU1fVEFHKTtcblxuICAvLyBBZGQgaW50ZXJuYWwgc2NoZWR1bGVkIHRhZyBpZiBjbGFpbSBpcyBhIGxpdmVzdHJlYW0gYW5kIGlzIGJlaW5nIHNjaGVkdWxlZCBpbiB0aGUgZnV0dXJlLlxuICBpZiAoaXNMaXZlc3RyZWFtUHVibGlzaCAmJiBwdWJsaXNoUGF5bG9hZC5yZWxlYXNlX3RpbWUgPiBub3dUaW1lU3RhbXApIHtcbiAgICBwdWJsaXNoUGF5bG9hZC50YWdzLnB1c2goU0NIRURVTEVEX0xJVkVTVFJFQU1fVEFHKTtcbiAgfVxuXG4gIGlmIChjaGFubmVsSWQpIHtcbiAgICBwdWJsaXNoUGF5bG9hZC5jaGFubmVsX2lkID0gY2hhbm5lbElkO1xuICB9XG5cbiAgaWYgKG15Q2xhaW1Gb3JVcmlFZGl0aW5nICYmIG15Q2xhaW1Gb3JVcmlFZGl0aW5nLnZhbHVlICYmIG15Q2xhaW1Gb3JVcmlFZGl0aW5nLnZhbHVlLmxvY2F0aW9ucykge1xuICAgIHB1Ymxpc2hQYXlsb2FkLmxvY2F0aW9ucyA9IG15Q2xhaW1Gb3JVcmlFZGl0aW5nLnZhbHVlLmxvY2F0aW9ucztcbiAgfVxuXG4gIGlmICghY29udGVudElzRnJlZSAmJiBmZWUgJiYgZmVlLmN1cnJlbmN5ICYmIE51bWJlcihmZWUuYW1vdW50KSA+IDApIHtcbiAgICBwdWJsaXNoUGF5bG9hZC5mZWVfY3VycmVuY3kgPSBmZWUuY3VycmVuY3k7XG4gICAgcHVibGlzaFBheWxvYWQuZmVlX2Ftb3VudCA9IGNyZWRpdHNUb1N0cmluZyhmZWUuYW1vdW50KTtcbiAgfVxuXG4gIGlmIChvcHRpbWl6ZSkge1xuICAgIHB1Ymxpc2hQYXlsb2FkLm9wdGltaXplX2ZpbGUgPSB0cnVlO1xuICB9XG5cbiAgLy8gT25seSBwYXNzIGZpbGUgb24gbmV3IHVwbG9hZHMsIG5vdCBtZXRhZGF0YSBvbmx5IGVkaXRzLlxuICAvLyBUaGUgc2RrIHdpbGwgZmlndXJlIGl0IG91dFxuICBpZiAoZmlsZVBhdGggJiYgIWlzTGl2ZXN0cmVhbVB1Ymxpc2gpIHtcbiAgICBwdWJsaXNoUGF5bG9hZC5maWxlX3BhdGggPSBmaWxlUGF0aDtcbiAgfVxuXG4gIGlmIChwcmV2aWV3KSB7XG4gICAgcHVibGlzaFBheWxvYWQucHJldmlldyA9IHRydWU7XG4gICAgcHVibGlzaFBheWxvYWQub3B0aW1pemVfZmlsZSA9IGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHB1Ymxpc2hQYXlsb2FkO1xufVxuXG5leHBvcnQgY29uc3QgZG9QdWJsaXNoRGVza3RvcCA9IChmaWxlUGF0aDogc3RyaW5nLCBwcmV2aWV3PzogYm9vbGVhbikgPT4gKGRpc3BhdGNoOiBEaXNwYXRjaCwgZ2V0U3RhdGU6ICgpID0+IHt9KSA9PiB7XG4gIGNvbnN0IHB1Ymxpc2hQcmV2aWV3Rm4gPSAocHJldmlld1Jlc3BvbnNlKSA9PiB7XG4gICAgZGlzcGF0Y2goXG4gICAgICBkb09wZW5Nb2RhbChNT0RBTFMuUFVCTElTSF9QUkVWSUVXLCB7XG4gICAgICAgIHByZXZpZXdSZXNwb25zZSxcbiAgICAgIH0pXG4gICAgKTtcbiAgfTtcblxuICBjb25zdCBub0ZpbGVQYXJhbSA9ICFmaWxlUGF0aCB8fCBmaWxlUGF0aCA9PT0gTk9fRklMRTtcbiAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICBjb25zdCBlZGl0aW5nVXJpID0gc2VsZWN0UHVibGlzaEZvcm1WYWx1ZShzdGF0ZSwgJ2VkaXRpbmdVUkknKSB8fCAnJztcbiAgY29uc3QgcmVtb3RlVXJsID0gc2VsZWN0UHVibGlzaEZvcm1WYWx1ZShzdGF0ZSwgJ3JlbW90ZUZpbGVVcmwnKTtcbiAgY29uc3QgY2xhaW0gPSBtYWtlU2VsZWN0Q2xhaW1Gb3JVcmkoZWRpdGluZ1VyaSkoc3RhdGUpIHx8IHt9O1xuICBjb25zdCBoYXNTb3VyY2VGaWxlID0gY2xhaW0udmFsdWUgJiYgY2xhaW0udmFsdWUuc291cmNlO1xuICBjb25zdCByZWRpcmVjdFRvTGl2ZXN0cmVhbSA9IG5vRmlsZVBhcmFtICYmICFoYXNTb3VyY2VGaWxlICYmICFyZW1vdGVVcmw7XG5cbiAgY29uc3QgcHVibGlzaFN1Y2Nlc3MgPSAoc3VjY2Vzc1Jlc3BvbnNlLCBsYnJ5Rmlyc3RFcnJvcikgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBteUNsYWltcyA9IHNlbGVjdE15Q2xhaW1zKHN0YXRlKTtcbiAgICBjb25zdCBwZW5kaW5nQ2xhaW0gPSBzdWNjZXNzUmVzcG9uc2Uub3V0cHV0c1swXTtcbiAgICBhbmFseXRpY3MuYXBpTG9nLnB1Ymxpc2gocGVuZGluZ0NsYWltKTtcbiAgICBjb25zdCB7IHBlcm1hbmVudF91cmw6IHVybCB9ID0gcGVuZGluZ0NsYWltO1xuICAgIGNvbnN0IGFjdGlvbnMgPSBbXTtcblxuXG4gICAgYWN0aW9ucy5wdXNoKHtcbiAgICAgIHR5cGU6IEFDVElPTlMuUFVCTElTSF9TVUNDRVNTLFxuICAgICAgZGF0YToge1xuICAgICAgICB0eXBlOiByZXNvbHZlQ2xhaW1UeXBlRm9yQW5hbHl0aWNzKHBlbmRpbmdDbGFpbSksXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gV2UgaGF2ZSB0byBmYWtlIGEgdGVtcCBjbGFpbSB1bnRpbCB0aGUgbmV3IHBlbmRpbmcgb25lIGlzIHJldHVybmVkIGJ5IGNsYWltX2xpc3RfbWluZVxuICAgIC8vIFdlIGNhbid0IHJlbHkgb24gY2xhaW1fbGlzdF9taW5lIGJlY2F1c2UgdGhlcmUgbWlnaHQgYmUgc29tZSBkZWxheSBiZWZvcmUgdGhlIG5ldyBjbGFpbXMgYXJlIHJldHVybmVkXG4gICAgLy8gRG9pbmcgdGhpcyBhbGxvd3MgdXMgdG8gc2hvdyB0aGUgcGVuZGluZyBjbGFpbSBpbW1lZGlhdGVseSwgaXQgd2lsbCBnZXQgb3ZlcndyaXR0ZW4gYnkgdGhlIHJlYWwgb25lXG4gICAgY29uc3QgaXNNYXRjaCA9IChjbGFpbSkgPT4gY2xhaW0uY2xhaW1faWQgPT09IHBlbmRpbmdDbGFpbS5jbGFpbV9pZDtcbiAgICBjb25zdCBpc0VkaXQgPSBteUNsYWltcy5zb21lKGlzTWF0Y2gpO1xuXG4gICAgYWN0aW9ucy5wdXNoKHtcbiAgICAgIHR5cGU6IEFDVElPTlMuVVBEQVRFX1BFTkRJTkdfQ0xBSU1TLFxuICAgICAgZGF0YToge1xuICAgICAgICBjbGFpbXM6IFtwZW5kaW5nQ2xhaW1dLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGRpc3BhdGNoKGJhdGNoQWN0aW9ucyguLi5hY3Rpb25zKSk7XG4gICAgZGlzcGF0Y2goXG4gICAgICBkb09wZW5Nb2RhbChNT0RBTFMuUFVCTElTSCwge1xuICAgICAgICB1cmk6IHVybCxcbiAgICAgICAgaXNFZGl0LFxuICAgICAgICBmaWxlUGF0aCxcbiAgICAgICAgbGJyeUZpcnN0RXJyb3IsXG4gICAgICB9KVxuICAgICk7XG4gICAgZGlzcGF0Y2goZG9DaGVja1BlbmRpbmdDbGFpbXMoKSk7XG4gICAgaWYgKHJlZGlyZWN0VG9MaXZlc3RyZWFtKSB7XG4gICAgICBkaXNwYXRjaChwdXNoKGAvJC8ke1BBR0VTLkxJVkVTVFJFQU19YCkpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBwdWJsaXNoRmFpbCA9IChlcnJvcikgPT4ge1xuICAgIGNvbnN0IGFjdGlvbnMgPSBbXTtcbiAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgdHlwZTogQUNUSU9OUy5QVUJMSVNIX0ZBSUwsXG4gICAgfSk7XG5cbiAgICBsZXQgbWVzc2FnZSA9IHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycgPyBlcnJvciA6IGVycm9yLm1lc3NhZ2U7XG5cbiAgICBpZiAobWVzc2FnZS5lbmRzV2l0aChFUlJPUlMuU0RLX0ZFVENIX1RJTUVPVVQpKSB7XG4gICAgICBtZXNzYWdlID0gRVJST1JTLlBVQkxJU0hfVElNRU9VVF9CVVRfTElLRUxZX1NVQ0NFU1NGVUw7XG4gICAgfVxuXG4gICAgYWN0aW9ucy5wdXNoKGRvRXJyb3IoeyBtZXNzYWdlLCBjYXVzZTogZXJyb3IuY2F1c2UgfSkpO1xuICAgIGRpc3BhdGNoKGJhdGNoQWN0aW9ucyguLi5hY3Rpb25zKSk7XG4gIH07XG5cbiAgaWYgKHByZXZpZXcpIHtcbiAgICBkaXNwYXRjaChkb1B1Ymxpc2gocHVibGlzaFN1Y2Nlc3MsIHB1Ymxpc2hGYWlsLCBwdWJsaXNoUHJldmlld0ZuKSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gUmVkaXJlY3Qgb24gd2ViIGltbWVkaWF0ZWx5IGJlY2F1c2Ugd2UgaGF2ZSBhIGZpbGUgdXBsb2FkIHByb2dyZXNzIGNvbXBvbmVuZXRcbiAgLy8gb24gdGhlIHB1Ymxpc2hlcyBwYWdlLiBUaGlzIGRvZXNuJ3QgZXhpc3Qgb24gZGVza3RvcCBzbyB3YWl0IHVudGlsIHdlIGdldCBhIHJlc3BvbnNlXG4gIC8vIGZyb20gdGhlIFNES1xuICBpZiAoIXJlZGlyZWN0VG9MaXZlc3RyZWFtKSB7XG4gICAgZGlzcGF0Y2gocHVzaChgLyQvJHtQQUdFUy5VUExPQURTfWApKTtcbiAgfVxuXG4gIGRpc3BhdGNoKGRvUHVibGlzaChwdWJsaXNoU3VjY2VzcywgcHVibGlzaEZhaWwpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBkb1B1Ymxpc2hSZXN1bWUgPSAocHVibGlzaFBheWxvYWQ6IEZpbGVVcGxvYWRTZGtQYXJhbXMpID0+IChkaXNwYXRjaDogRGlzcGF0Y2gsIGdldFN0YXRlOiAoKSA9PiB7fSkgPT4ge1xuICBjb25zdCBwdWJsaXNoU3VjY2VzcyA9IChzdWNjZXNzUmVzcG9uc2UsIGxicnlGaXJzdEVycm9yKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICAgIGNvbnN0IG15Q2xhaW1JZHM6IFNldDxzdHJpbmc+ID0gc2VsZWN0TXlBY3RpdmVDbGFpbXMoc3RhdGUpO1xuXG4gICAgY29uc3QgcGVuZGluZ0NsYWltID0gc3VjY2Vzc1Jlc3BvbnNlLm91dHB1dHNbMF07XG4gICAgY29uc3QgeyBwZXJtYW5lbnRfdXJsOiB1cmwgfSA9IHBlbmRpbmdDbGFpbTtcblxuICAgIGFuYWx5dGljcy5hcGlMb2cucHVibGlzaChwZW5kaW5nQ2xhaW0pO1xuXG4gICAgLy8gV2UgaGF2ZSB0byBmYWtlIGEgdGVtcCBjbGFpbSB1bnRpbCB0aGUgbmV3IHBlbmRpbmcgb25lIGlzIHJldHVybmVkIGJ5IGNsYWltX2xpc3RfbWluZVxuICAgIC8vIFdlIGNhbid0IHJlbHkgb24gY2xhaW1fbGlzdF9taW5lIGJlY2F1c2UgdGhlcmUgbWlnaHQgYmUgc29tZSBkZWxheSBiZWZvcmUgdGhlIG5ldyBjbGFpbXMgYXJlIHJldHVybmVkXG4gICAgLy8gRG9pbmcgdGhpcyBhbGxvd3MgdXMgdG8gc2hvdyB0aGUgcGVuZGluZyBjbGFpbSBpbW1lZGlhdGVseSwgaXQgd2lsbCBnZXQgb3ZlcndyaXR0ZW4gYnkgdGhlIHJlYWwgb25lXG4gICAgY29uc3QgaXNFZGl0ID0gbXlDbGFpbUlkcy5oYXMocGVuZGluZ0NsYWltLmNsYWltX2lkKTtcblxuICAgIGNvbnN0IGFjdGlvbnMgPSBbXTtcblxuICAgIGFjdGlvbnMucHVzaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlBVQkxJU0hfU1VDQ0VTUyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdHlwZTogcmVzb2x2ZUNsYWltVHlwZUZvckFuYWx5dGljcyhwZW5kaW5nQ2xhaW0pLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGFjdGlvbnMucHVzaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlVQREFURV9QRU5ESU5HX0NMQUlNUyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgY2xhaW1zOiBbcGVuZGluZ0NsYWltXSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBkaXNwYXRjaChiYXRjaEFjdGlvbnMoLi4uYWN0aW9ucykpO1xuXG4gICAgZGlzcGF0Y2goXG4gICAgICBkb09wZW5Nb2RhbChNT0RBTFMuUFVCTElTSCwge1xuICAgICAgICB1cmk6IHVybCxcbiAgICAgICAgaXNFZGl0LFxuICAgICAgICBsYnJ5Rmlyc3RFcnJvcixcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIGRpc3BhdGNoKGRvQ2hlY2tQZW5kaW5nQ2xhaW1zKCkpO1xuICB9O1xuXG4gIGNvbnN0IHB1Ymxpc2hGYWlsID0gKGVycm9yKSA9PiB7XG4gICAgY29uc3QgYWN0aW9ucyA9IFtdO1xuICAgIGFjdGlvbnMucHVzaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlBVQkxJU0hfRkFJTCxcbiAgICB9KTtcbiAgICBhY3Rpb25zLnB1c2goZG9FcnJvcih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsIGNhdXNlOiBlcnJvci5jYXVzZSB9KSk7XG4gICAgZGlzcGF0Y2goYmF0Y2hBY3Rpb25zKC4uLmFjdGlvbnMpKTtcbiAgfTtcblxuICBkaXNwYXRjaChkb1B1Ymxpc2gocHVibGlzaFN1Y2Nlc3MsIHB1Ymxpc2hGYWlsLCBudWxsLCBwdWJsaXNoUGF5bG9hZCkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGRvUmVzZXRUaHVtYm5haWxTdGF0dXMgPSAoKSA9PiAoZGlzcGF0Y2g6IERpc3BhdGNoKSA9PiB7XG4gIGRpc3BhdGNoKHtcbiAgICB0eXBlOiBBQ1RJT05TLlVQREFURV9QVUJMSVNIX0ZPUk0sXG4gICAgZGF0YToge1xuICAgICAgdGh1bWJuYWlsUGF0aDogJycsXG4gICAgICB0aHVtYm5haWxFcnJvcjogdW5kZWZpbmVkLFxuICAgIH0sXG4gIH0pO1xuXG4gIHJldHVybiBkaXNwYXRjaCh7XG4gICAgdHlwZTogQUNUSU9OUy5VUERBVEVfUFVCTElTSF9GT1JNLFxuICAgIGRhdGE6IHtcbiAgICAgIHVwbG9hZFRodW1ibmFpbFN0YXR1czogVEhVTUJOQUlMX1NUQVRVU0VTLlJFQURZLFxuICAgICAgdGh1bWJuYWlsOiAnJyxcbiAgICB9LFxuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBkb0JlZ2luUHVibGlzaCA9IChuYW1lOiBzdHJpbmcpID0+IChkaXNwYXRjaDogRGlzcGF0Y2gpID0+IHtcbiAgZGlzcGF0Y2goZG9DbGVhclB1Ymxpc2goKSk7XG4gIC8vICRGbG93Rml4TWVcbiAgLy8gZGlzcGF0Y2goZG9QcmVwYXJlRWRpdCh7IG5hbWUgfSkpO1xuICAvLyBkaXNwYXRjaChwdXNoKGAvJC8ke1BBR0VTLlVQTE9BRH1gKSk7XG59O1xuXG5leHBvcnQgY29uc3QgZG9DbGVhclB1Ymxpc2ggPSAoKSA9PiAoZGlzcGF0Y2g6IERpc3BhdGNoKSA9PiB7XG4gIGRpc3BhdGNoKHsgdHlwZTogQUNUSU9OUy5DTEVBUl9QVUJMSVNIIH0pO1xuICByZXR1cm4gZGlzcGF0Y2goZG9SZXNldFRodW1ibmFpbFN0YXR1cygpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBkb1VwZGF0ZVB1Ymxpc2hGb3JtID0gKHB1Ymxpc2hGb3JtVmFsdWU6IFVwZGF0ZVB1Ymxpc2hGb3JtRGF0YSkgPT4gKGRpc3BhdGNoOiBEaXNwYXRjaCkgPT5cbiAgZGlzcGF0Y2goe1xuICAgIHR5cGU6IEFDVElPTlMuVVBEQVRFX1BVQkxJU0hfRk9STSxcbiAgICBkYXRhOiB7IC4uLnB1Ymxpc2hGb3JtVmFsdWUgfSxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBkb1VwbG9hZFRodW1ibmFpbCA9IChcbiAgZmlsZVBhdGg/OiBzdHJpbmcsXG4gIHRodW1ibmFpbEJsb2I/OiBGaWxlLFxuICBmc0FkYXB0ZXI/OiBhbnksXG4gIGZzPzogYW55LFxuICBwYXRoPzogYW55LFxuICBjYj86IChzdHJpbmcpID0+IHZvaWRcbikgPT4gKGRpc3BhdGNoOiBEaXNwYXRjaCkgPT4ge1xuICBsZXQgdGh1bWJuYWlsLCBmaWxlRXh0LCBmaWxlTmFtZSwgZmlsZVR5cGUsIHN0YXRzLCBzaXplO1xuXG4gIGNvbnN0IHVwbG9hZEVycm9yID0gKGVycm9yID0gJycpID0+IHtcbiAgICBkaXNwYXRjaChcbiAgICAgIGJhdGNoQWN0aW9ucyhcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6IEFDVElPTlMuVVBEQVRFX1BVQkxJU0hfRk9STSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB1cGxvYWRUaHVtYm5haWxTdGF0dXM6IFRIVU1CTkFJTF9TVEFUVVNFUy5SRUFEWSxcbiAgICAgICAgICAgIHRodW1ibmFpbDogJycsXG4gICAgICAgICAgICBuc2Z3OiBmYWxzZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBkb0Vycm9yKGVycm9yKVxuICAgICAgKVxuICAgICk7XG4gIH07XG5cbiAgZGlzcGF0Y2goe1xuICAgIHR5cGU6IEFDVElPTlMuVVBEQVRFX1BVQkxJU0hfRk9STSxcbiAgICBkYXRhOiB7IHRodW1ibmFpbEVycm9yOiB1bmRlZmluZWQgfSxcbiAgfSk7XG5cbiAgY29uc3QgZG9VcGxvYWQgPSAoZGF0YSkgPT4ge1xuICAgIHJldHVybiBmZXRjaChJTUdfQ0ROX1BVQkxJU0hfVVJMLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IGRhdGEsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy50ZXh0KCkpXG4gICAgICAudGhlbigodGV4dCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiB0ZXh0Lmxlbmd0aCA/IEpTT04ucGFyc2UodGV4dCkgOiB7fTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRleHQpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgICAgaWYgKGpzb24udHlwZSAhPT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgcmV0dXJuIHVwbG9hZEVycm9yKFxuICAgICAgICAgICAganNvbi5tZXNzYWdlIHx8IF9fKCdUaGVyZSB3YXMgYW4gZXJyb3IgaW4gdGhlIHVwbG9hZC4gVGhlIGZvcm1hdCBvciBleHRlbnNpb24gbWlnaHQgbm90IGJlIHN1cHBvcnRlZC4nKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2IpIHtcbiAgICAgICAgICBjYihqc29uLm1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBBQ1RJT05TLlVQREFURV9QVUJMSVNIX0ZPUk0sXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdXBsb2FkVGh1bWJuYWlsU3RhdHVzOiBUSFVNQk5BSUxfU1RBVFVTRVMuQ09NUExFVEUsXG4gICAgICAgICAgICB0aHVtYm5haWw6IGpzb24ubWVzc2FnZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBsZXQgbWVzc2FnZSA9IGVyci5tZXNzYWdlO1xuXG4gICAgICAgIC8vIFRoaXMgc3Vja3MgYnV0IMKvXFxfKOODhClfL8KvXG4gICAgICAgIGlmIChtZXNzYWdlID09PSAnRmFpbGVkIHRvIGZldGNoJykge1xuICAgICAgICAgIC8vIG1lc3NhZ2UgPSBfXygnVGh1bWJuYWlsIHVwbG9hZCBzZXJ2aWNlIG1heSBiZSBkb3duLCB0cnkgYWdhaW4gbGF0ZXIuJyk7XG4gICAgICAgICAgbWVzc2FnZSA9IF9fKFxuICAgICAgICAgICAgJ1RodW1ibmFpbCB1cGxvYWQgc2VydmljZSBtYXkgYmUgZG93biwgdHJ5IGFnYWluIGxhdGVyLiBTb21lIHBsdWdpbnMgbGlrZSBBZEd1YXJkIEZyYW7Dp2FpcyBtYXkgYmUgYmxvY2tpbmcgdGhlIHNlcnZpY2UuIElmIHVzaW5nIEJyYXZlLCBnbyB0byBicmF2ZTovL2FkYmxvY2sgYW5kIGRpc2FibGUgaXQsIG9yIHR1cm4gZG93biBzaGllbGRzLidcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdXNlcklucHV0ID0gW2ZpbGVOYW1lLCBmaWxlRXh0LCBmaWxlVHlwZSwgdGh1bWJuYWlsLCBzaXplXTtcbiAgICAgICAgdXBsb2FkRXJyb3IoeyBtZXNzYWdlLCBjYXVzZTogYCR7dXNlcklucHV0LmpvaW4oJyB8ICcpfWAgfSk7XG4gICAgICB9KTtcbiAgfTtcblxuICBkaXNwYXRjaCh7XG4gICAgdHlwZTogQUNUSU9OUy5VUERBVEVfUFVCTElTSF9GT1JNLFxuICAgIGRhdGE6IHsgdXBsb2FkVGh1bWJuYWlsU3RhdHVzOiBUSFVNQk5BSUxfU1RBVFVTRVMuSU5fUFJPR1JFU1MgfSxcbiAgfSk7XG5cbiAgaWYgKGZzQWRhcHRlciAmJiBmc0FkYXB0ZXIucmVhZEZpbGUgJiYgZmlsZVBhdGgpIHtcbiAgICBmc0FkYXB0ZXIucmVhZEZpbGUoZmlsZVBhdGgsICdiYXNlNjQnKS50aGVuKChiYXNlNjRJbWFnZSkgPT4ge1xuICAgICAgZmlsZUV4dCA9ICdwbmcnO1xuICAgICAgZmlsZU5hbWUgPSAndGh1bWJuYWlsLnBuZyc7XG4gICAgICBmaWxlVHlwZSA9ICdpbWFnZS9wbmcnO1xuXG4gICAgICBjb25zdCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICBkYXRhLmFwcGVuZCgnZmlsZS1pbnB1dCcsIHsgdXJpOiAnZmlsZTovLycgKyBmaWxlUGF0aCwgdHlwZTogZmlsZVR5cGUsIG5hbWU6IGZpbGVOYW1lIH0pO1xuICAgICAgZGF0YS5hcHBlbmQoJ3VwbG9hZCcsICdVcGxvYWQnKTtcbiAgICAgIHJldHVybiBkb1VwbG9hZChkYXRhKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoZmlsZVBhdGggJiYgZnMgJiYgcGF0aCkge1xuICAgICAgdGh1bWJuYWlsID0gZnMucmVhZEZpbGVTeW5jKGZpbGVQYXRoKTtcbiAgICAgIGZpbGVFeHQgPSBwYXRoLmV4dG5hbWUoZmlsZVBhdGgpO1xuICAgICAgZmlsZU5hbWUgPSBwYXRoLmJhc2VuYW1lKGZpbGVQYXRoKTtcbiAgICAgIHN0YXRzID0gZnMuc3RhdFN5bmMoZmlsZVBhdGgpO1xuICAgICAgc2l6ZSA9IHN0YXRzLnNpemU7XG4gICAgICBmaWxlVHlwZSA9IGBpbWFnZS8ke2ZpbGVFeHQuc2xpY2UoMSl9YDtcbiAgICB9IGVsc2UgaWYgKHRodW1ibmFpbEJsb2IpIHtcbiAgICAgIGZpbGVFeHQgPSBgLiR7dGh1bWJuYWlsQmxvYi50eXBlICYmIHRodW1ibmFpbEJsb2IudHlwZS5zcGxpdCgnLycpWzFdfWA7XG4gICAgICBmaWxlTmFtZSA9IHRodW1ibmFpbEJsb2IubmFtZTtcbiAgICAgIGZpbGVUeXBlID0gdGh1bWJuYWlsQmxvYi50eXBlO1xuICAgICAgc2l6ZSA9IHRodW1ibmFpbEJsb2Iuc2l6ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHNpemUgJiYgc2l6ZSA+PSBUSFVNQk5BSUxfQ0ROX1NJWkVfTElNSVRfQllURVMpIHtcbiAgICAgIGNvbnN0IG1heFNpemVNQiA9IFRIVU1CTkFJTF9DRE5fU0laRV9MSU1JVF9CWVRFUyAvICgxMDI0ICogMTAyNCk7XG4gICAgICB1cGxvYWRFcnJvcihfXygnVGh1bWJuYWlsIHNpemUgb3ZlciAlbWF4X3NpemUlTUIsIHBsZWFzZSBlZGl0IGFuZCByZXVwbG9hZC4nLCB7IG1heF9zaXplOiBtYXhTaXplTUIgfSkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICBjb25zdCBmaWxlID0gdGh1bWJuYWlsQmxvYiB8fCAodGh1bWJuYWlsICYmIG5ldyBGaWxlKFt0aHVtYm5haWxdLCBmaWxlTmFtZSwgeyB0eXBlOiBmaWxlVHlwZSB9KSk7XG4gICAgLy8gJEZsb3dGaXhNZVxuICAgIGRhdGEuYXBwZW5kKCdmaWxlLWlucHV0JywgZmlsZSk7XG4gICAgZGF0YS5hcHBlbmQoJ3VwbG9hZCcsICdVcGxvYWQnKTtcbiAgICByZXR1cm4gZG9VcGxvYWQoZGF0YSk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBkb1ByZXBhcmVFZGl0ID0gKGNsYWltOiBTdHJlYW1DbGFpbSwgdXJpOiBzdHJpbmcsIGNsYWltVHlwZTogc3RyaW5nKSA9PiAoXG4gIGRpc3BhdGNoOiBEaXNwYXRjaCxcbiAgZ2V0U3RhdGU6ICgpID0+IHt9XG4pID0+IHtcbiAgY29uc3QgeyBuYW1lLCBhbW91bnQsIHZhbHVlID0ge30gfSA9IGNsYWltO1xuICBjb25zdCBjaGFubmVsTmFtZSA9IChjbGFpbSAmJiBjbGFpbS5zaWduaW5nX2NoYW5uZWwgJiYgY2xhaW0uc2lnbmluZ19jaGFubmVsLm5hbWUpIHx8IG51bGw7XG4gIGNvbnN0IHtcbiAgICBhdXRob3IsXG4gICAgZGVzY3JpcHRpb24sXG4gICAgLy8gdXNlIHNhbWUgdmFsdWVzIGFzIGRlZmF1bHQgc3RhdGVcbiAgICAvLyBmZWUgd2lsbCBiZSB1bmRlZmluZWQgZm9yIGZyZWUgY29udGVudFxuICAgIGZlZSA9IHtcbiAgICAgIGFtb3VudDogJzAnLFxuICAgICAgY3VycmVuY3k6ICdMQkMnLFxuICAgIH0sXG4gICAgbGFuZ3VhZ2VzLFxuICAgIHJlbGVhc2VfdGltZSxcbiAgICBsaWNlbnNlLFxuICAgIGxpY2Vuc2VfdXJsOiBsaWNlbnNlVXJsLFxuICAgIHRodW1ibmFpbCxcbiAgICB0aXRsZSxcbiAgICB0YWdzLFxuICB9ID0gdmFsdWU7XG5cbiAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICBjb25zdCBteUNsYWltRm9yVXJpID0gc2VsZWN0TXlDbGFpbUZvclVyaShzdGF0ZSk7XG4gIGNvbnN0IHsgY2xhaW1faWQgfSA9IG15Q2xhaW1Gb3JVcmkgfHwge307XG4gIGNvbnN0IHB1Ymxpc2hEYXRhOiBVcGRhdGVQdWJsaXNoRm9ybURhdGEgPSB7XG4gICAgY2xhaW1faWQ6IGNsYWltX2lkLFxuICAgIG5hbWUsXG4gICAgYmlkOiBOdW1iZXIoYW1vdW50KSxcbiAgICBjb250ZW50SXNGcmVlOiBmZWUuYW1vdW50ID09PSAnMCcsXG4gICAgYXV0aG9yLFxuICAgIGRlc2NyaXB0aW9uLFxuICAgIGZlZSxcbiAgICBsYW5ndWFnZXMsXG4gICAgcmVsZWFzZVRpbWU6IHJlbGVhc2VfdGltZSxcbiAgICByZWxlYXNlVGltZUVkaXRlZDogdW5kZWZpbmVkLFxuICAgIHRodW1ibmFpbDogdGh1bWJuYWlsID8gdGh1bWJuYWlsLnVybCA6IG51bGwsXG4gICAgdGl0bGUsXG4gICAgdXJpLFxuICAgIHVwbG9hZFRodW1ibmFpbFN0YXR1czogdGh1bWJuYWlsID8gVEhVTUJOQUlMX1NUQVRVU0VTLk1BTlVBTCA6IHVuZGVmaW5lZCxcbiAgICBsaWNlbnNlVXJsLFxuICAgIG5zZnc6IGlzQ2xhaW1Oc2Z3KGNsYWltKSxcbiAgICB0YWdzOiB0YWdzID8gdGFncy5tYXAoKHRhZykgPT4gKHsgbmFtZTogdGFnIH0pKSA6IFtdLFxuICB9O1xuXG4gIC8vIE1ha2Ugc3VyZSBjdXN0b20gbGljZW5zZXMgYXJlIG1hcHBlZCBwcm9wZXJseVxuICAvLyBJZiB0aGUgbGljZW5zZSBpc24ndCBvbmUgb2YgdGhlIHN0YW5kYXJkIGxpY2Vuc2VzLCBtYXAgdGhlIGN1c3RvbSBsaWNlbnNlIGFuZCBkZXNjcmlwdGlvbi91cmxcbiAgaWYgKCFDQ19MSUNFTlNFUy5zb21lKCh7IHZhbHVlIH0pID0+IHZhbHVlID09PSBsaWNlbnNlKSkge1xuICAgIGlmICghbGljZW5zZSB8fCBsaWNlbnNlID09PSBOT05FIHx8IGxpY2Vuc2UgPT09IFBVQkxJQ19ET01BSU4pIHtcbiAgICAgIHB1Ymxpc2hEYXRhLmxpY2Vuc2VUeXBlID0gbGljZW5zZTtcbiAgICB9IGVsc2UgaWYgKGxpY2Vuc2UgJiYgIWxpY2Vuc2VVcmwgJiYgbGljZW5zZSAhPT0gTk9ORSkge1xuICAgICAgcHVibGlzaERhdGEubGljZW5zZVR5cGUgPSBDT1BZUklHSFQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHB1Ymxpc2hEYXRhLmxpY2Vuc2VUeXBlID0gT1RIRVI7XG4gICAgfVxuXG4gICAgcHVibGlzaERhdGEub3RoZXJMaWNlbnNlRGVzY3JpcHRpb24gPSBsaWNlbnNlO1xuICB9IGVsc2Uge1xuICAgIHB1Ymxpc2hEYXRhLmxpY2Vuc2VUeXBlID0gbGljZW5zZTtcbiAgfVxuICBpZiAoY2hhbm5lbE5hbWUpIHtcbiAgICBwdWJsaXNoRGF0YVsnY2hhbm5lbCddID0gY2hhbm5lbE5hbWU7XG4gIH1cblxuICBkaXNwYXRjaCh7IHR5cGU6IEFDVElPTlMuRE9fUFJFUEFSRV9FRElULCBkYXRhOiBwdWJsaXNoRGF0YSB9KTtcblxuICBzd2l0Y2ggKGNsYWltVHlwZSkge1xuICAgIGNhc2UgJ3Bvc3QnOlxuICAgICAgZGlzcGF0Y2gocHVzaChgLyQvJHtQQUdFUy5QT1NUfWApKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2xpdmVzdHJlYW0nOlxuICAgICAgZGlzcGF0Y2gocHVzaChgLyQvJHtQQUdFUy5MSVZFU1RSRUFNfWApKTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBkaXNwYXRjaChwdXNoKGAvJC8ke1BBR0VTLlVQTE9BRH1gKSk7XG4gICAgICBicmVhaztcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGRvUHVibGlzaCA9IChzdWNjZXNzOiBGdW5jdGlvbiwgZmFpbDogRnVuY3Rpb24sIHByZXZpZXdGbj86IEZ1bmN0aW9uLCBwYXlsb2FkPzogRmlsZVVwbG9hZFNka1BhcmFtcykgPT4gKFxuICBkaXNwYXRjaDogRGlzcGF0Y2gsXG4gIGdldFN0YXRlOiAoKSA9PiB7fVxuKSA9PiB7XG4gIGlmICghcHJldmlld0ZuKSB7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiBBQ1RJT05TLlBVQkxJU0hfU1RBUlQgfSk7XG4gIH1cblxuICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gIGNvbnN0IG15Q2xhaW1Gb3JVcmkgPSBzZWxlY3RNeUNsYWltRm9yVXJpKHN0YXRlKTtcbiAgY29uc3QgbXlDaGFubmVscyA9IHNlbGVjdE15Q2hhbm5lbENsYWltcyhzdGF0ZSk7XG4gIC8vIGNvbnN0IG15Q2xhaW1zID0gc2VsZWN0TXlDbGFpbXNXaXRob3V0Q2hhbm5lbHMoc3RhdGUpO1xuICAvLyBnZXQgcmVkdXggcHVibGlzaCBmb3JtXG4gIGNvbnN0IHB1Ymxpc2hEYXRhID0gc2VsZWN0UHVibGlzaEZvcm1WYWx1ZXMoc3RhdGUpO1xuXG4gIGNvbnN0IHB1Ymxpc2hQYXlsb2FkID0gcGF5bG9hZCB8fCByZXNvbHZlUHVibGlzaFBheWxvYWQocHVibGlzaERhdGEsIG15Q2xhaW1Gb3JVcmksIG15Q2hhbm5lbHMsIHByZXZpZXdGbik7XG5cbiAgaWYgKHByZXZpZXdGbikge1xuICAgIHJldHVybiBMYnJ5LnB1Ymxpc2gocHVibGlzaFBheWxvYWQpLnRoZW4oKHByZXZpZXdSZXNwb25zZTogUHVibGlzaFJlc3BvbnNlKSA9PiB7XG4gICAgICAvLyAkRmxvd0lnbm9yZVxuICAgICAgcmV0dXJuIHByZXZpZXdGbihwcmV2aWV3UmVzcG9uc2UpO1xuICAgIH0sIGZhaWwpO1xuICB9XG5cbiAgcmV0dXJuIExicnkucHVibGlzaChwdWJsaXNoUGF5bG9hZCkudGhlbigocmVzcG9uc2U6IFB1Ymxpc2hSZXNwb25zZSkgPT4ge1xuICAgIC8vIFRPRE86IFJlc3RvcmUgTGJyeUZpcnN0XG4gICAgLy8gaWYgKCF1c2VMQlJZVXBsb2FkZXIpIHtcbiAgICByZXR1cm4gc3VjY2VzcyhyZXNwb25zZSk7XG4gICAgLy8gfVxuXG4gICAgLy8gJEZsb3dGaXhNZVxuICAgIC8vIHB1Ymxpc2hQYXlsb2FkLnBlcm1hbmVudF91cmwgPSByZXNwb25zZS5vdXRwdXRzWzBdLnBlcm1hbmVudF91cmw7XG4gICAgLy9cbiAgICAvLyByZXR1cm4gTGJyeUZpcnN0LnVwbG9hZChwdWJsaXNoUGF5bG9hZClcbiAgICAvLyAgIC50aGVuKCgpID0+IHtcbiAgICAvLyAgICAgLy8gUmV0dXJuIG9yaWdpbmFsIHB1Ymxpc2ggcmVzcG9uc2Ugc28gYXBwIHRyZWF0cyBpdCBsaWtlIGEgbm9ybWFsIHB1Ymxpc2hcbiAgICAvLyAgICAgcmV0dXJuIHN1Y2Nlc3MocmVzcG9uc2UpO1xuICAgIC8vICAgfSlcbiAgICAvLyAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAvLyAgICAgcmV0dXJuIHN1Y2Nlc3MocmVzcG9uc2UsIGVycm9yKTtcbiAgICAvLyAgIH0pO1xuICB9LCBmYWlsKTtcbn07XG5cbi8vIENhbGxzIGZpbGVfbGlzdCB1bnRpbCBhbnkgcmVmbGVjdGluZyBmaWxlcyBhcmUgZG9uZVxuZXhwb3J0IGNvbnN0IGRvQ2hlY2tSZWZsZWN0aW5nRmlsZXMgPSAoKSA9PiAoZGlzcGF0Y2g6IERpc3BhdGNoLCBnZXRTdGF0ZTogR2V0U3RhdGUpID0+IHtcbiAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICBjb25zdCB7IGNoZWNraW5nUmVmbGVjdG9yIH0gPSBzdGF0ZS5jbGFpbXM7XG4gIGxldCByZWZsZWN0b3JDaGVja0ludGVydmFsO1xuXG4gIGNvbnN0IGNoZWNrRmlsZUxpc3QgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICAgIGNvbnN0IHJlZmxlY3RpbmdCeUlkID0gc2VsZWN0UmVmbGVjdGluZ0J5SWQoc3RhdGUpO1xuICAgIGNvbnN0IGlkcyA9IE9iamVjdC5rZXlzKHJlZmxlY3RpbmdCeUlkKTtcblxuICAgIGNvbnN0IG5ld1JlZmxlY3RpbmdCeUlkID0ge307XG4gICAgY29uc3QgcHJvbWlzZXMgPSBbXTtcbiAgICAvLyBUT0RPOiBqdXN0IHVzZSBmaWxlX2xpc3Qoe2NsYWltX2lkOiBBcnJheTxjbGFpbUlkPn0pXG4gICAgaWYgKE9iamVjdC5rZXlzKHJlZmxlY3RpbmdCeUlkKS5sZW5ndGgpIHtcbiAgICAgIGlkcy5mb3JFYWNoKChjbGFpbUlkKSA9PiB7XG4gICAgICAgIHByb21pc2VzLnB1c2goTGJyeS5maWxlX2xpc3QoeyBjbGFpbV9pZDogY2xhaW1JZCB9KSk7XG4gICAgICB9KTtcblxuICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpXG4gICAgICAgIC50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgICAgcmVzdWx0cy5mb3JFYWNoKChyZXMpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXMuaXRlbXNbMF0pIHtcbiAgICAgICAgICAgICAgY29uc3QgZmlsZUxpc3RJdGVtID0gcmVzLml0ZW1zWzBdO1xuICAgICAgICAgICAgICBjb25zdCBmaWxlQ2xhaW1JZCA9IGZpbGVMaXN0SXRlbS5jbGFpbV9pZDtcbiAgICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgIGlzX2Z1bGx5X3JlZmxlY3RlZDogZG9uZSxcbiAgICAgICAgICAgICAgICB1cGxvYWRpbmdfdG9fcmVmbGVjdG9yOiB1cGxvYWRpbmcsXG4gICAgICAgICAgICAgICAgcmVmbGVjdG9yX3Byb2dyZXNzOiBwcm9ncmVzcyxcbiAgICAgICAgICAgICAgfSA9IGZpbGVMaXN0SXRlbTtcbiAgICAgICAgICAgICAgaWYgKHVwbG9hZGluZykge1xuICAgICAgICAgICAgICAgIG5ld1JlZmxlY3RpbmdCeUlkW2ZpbGVDbGFpbUlkXSA9IHtcbiAgICAgICAgICAgICAgICAgIGZpbGVMaXN0SXRlbTogZmlsZUxpc3RJdGVtLFxuICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MsXG4gICAgICAgICAgICAgICAgICBzdGFsbGVkOiAhZG9uZSAmJiAhdXBsb2FkaW5nLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6IEFDVElPTlMuVVBEQVRFX0ZJTEVTX1JFRkxFQ1RJTkcsXG4gICAgICAgICAgICBkYXRhOiBuZXdSZWZsZWN0aW5nQnlJZCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoIU9iamVjdC5rZXlzKG5ld1JlZmxlY3RpbmdCeUlkKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgdHlwZTogQUNUSU9OUy5UT0dHTEVfQ0hFQ0tJTkdfUkVGTEVDVElORyxcbiAgICAgICAgICAgICAgZGF0YTogZmFsc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwocmVmbGVjdG9yQ2hlY2tJbnRlcnZhbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBBQ1RJT05TLlRPR0dMRV9DSEVDS0lOR19SRUZMRUNUSU5HLFxuICAgICAgICBkYXRhOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgICAgY2xlYXJJbnRlcnZhbChyZWZsZWN0b3JDaGVja0ludGVydmFsKTtcbiAgICB9XG4gIH07XG4gIC8vIGRvIGl0IG9uY2UuLi5cbiAgY2hlY2tGaWxlTGlzdCgpO1xuICAvLyB0aGVuIHN0YXJ0IHRoZSBpbnRlcnZhbCBpZiBpdCdzIG5vdCBhbHJlYWR5IHN0YXJ0ZWRcbiAgaWYgKCFjaGVja2luZ1JlZmxlY3Rvcikge1xuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IEFDVElPTlMuVE9HR0xFX0NIRUNLSU5HX1JFRkxFQ1RJTkcsXG4gICAgICBkYXRhOiB0cnVlLFxuICAgIH0pO1xuICAgIHJlZmxlY3RvckNoZWNrSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBjaGVja0ZpbGVMaXN0KCk7XG4gICAgfSwgNTAwMCk7XG4gIH1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBkb1VwZGF0ZVVwbG9hZEFkZChcbiAgZmlsZTogRmlsZSB8IHN0cmluZyxcbiAgcGFyYW1zOiB7IFtrZXk6IHN0cmluZ106IGFueSB9LFxuICB1cGxvYWRlcjogVHVzVXBsb2FkZXIgfCBYTUxIdHRwUmVxdWVzdFxuKSB7XG4gIHJldHVybiAoZGlzcGF0Y2g6IERpc3BhdGNoLCBnZXRTdGF0ZTogR2V0U3RhdGUpID0+IHtcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlVQREFURV9VUExPQURfQURELFxuICAgICAgZGF0YTogeyBmaWxlLCBwYXJhbXMsIHVwbG9hZGVyIH0sXG4gICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBkb1VwZGF0ZVVwbG9hZFByb2dyZXNzID0gKHByb3BzOiB7IGd1aWQ6IHN0cmluZywgcHJvZ3Jlc3M/OiBzdHJpbmcsIHN0YXR1cz86IFVwbG9hZFN0YXR1cyB9KSA9PiAoXG4gIGRpc3BhdGNoOiBEaXNwYXRjaFxuKSA9PlxuICBkaXNwYXRjaCh7XG4gICAgdHlwZTogQUNUSU9OUy5VUERBVEVfVVBMT0FEX1BST0dSRVNTLFxuICAgIGRhdGE6IHByb3BzLFxuICB9KTtcblxuLyoqXG4gKiBkb1VwZGF0ZVVwbG9hZFJlbW92ZVxuICpcbiAqIEBwYXJhbSBndWlkXG4gKiBAcGFyYW0gcGFyYW1zIE9wdGlvbmFsLiBSZXRhaW4gdG8gYWxsb3cgcmVtb3ZhbCBvZiBvbGQga2V5cywgd2hpY2ggYXJlXG4gKiAgICAgICAgICAgICAgIGRlcml2ZWQgZnJvbSBgbmFtZSNjaGFubmVsYCBpbnN0ZWFkIG9mIHVzaW5nIGEgZ3VpZC5cbiAqICAgICAgICAgICAgICAgQ2FuIGJlIHJlbW92ZWQgYWZ0ZXIgSmFudWFyeSAyMDIyLlxuICogQHJldHVybnMgeyhmdW5jdGlvbihEaXNwYXRjaCwgR2V0U3RhdGUpOiB2b2lkKXwqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZG9VcGRhdGVVcGxvYWRSZW1vdmUoZ3VpZDogc3RyaW5nLCBwYXJhbXM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7XG4gIHJldHVybiAoZGlzcGF0Y2g6IERpc3BhdGNoLCBnZXRTdGF0ZTogR2V0U3RhdGUpID0+IHtcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlVQREFURV9VUExPQURfUkVNT1ZFLFxuICAgICAgZGF0YTogeyBndWlkLCBwYXJhbXMgfSxcbiAgICB9KTtcbiAgfTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFiQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUEyQkE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQU5BO0FBQ0E7QUFDQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQTdDQTtBQUFBO0FBQ0E7QUE4Q0E7QUFxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQVBBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQUNBO0FBYUE7QUFDQTtBQWxGQTtBQXNGQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXpHQTtBQTZHQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFHQTtBQURBO0FBR0E7QUFuSEE7QUFDQTtBQUNBO0FBcUhBO0FBQUE7QUF2SEE7QUFDQTtBQXlIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTVJQTtBQWdKQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBREE7QUFGQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUZBO0FBUUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQXpDQTtBQUNBO0FBMkNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBYkE7QUFDQTtBQWVBO0FBQ0E7QUFDQTtBQS9FQTtBQW1GQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6RkE7QUFBQTtBQTRGQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFKQTtBQU9BO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQU9BO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU9BO0FBeENBO0FBQ0E7QUEwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFOQTtBQUNBO0FBUUE7QUFyREE7QUFBQTtBQXdEQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQVRBO0FBQUE7QUFrQkE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUpBO0FBQUE7QUFPQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFGQTtBQUFBO0FBS0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUZBO0FBREE7QUFBQTtBQU1BO0FBQUE7QUFRQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBRkE7QUFIQTtBQUNBO0FBZUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQU1BO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFWQTtBQWFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQXZCQTtBQWdDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUEzQ0E7QUFEQTtBQUNBO0FBK0NBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVRBO0FBREE7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE3SEE7QUFBQTtBQWdJQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBU0E7QUFDQTtBQUZBO0FBUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFxQkE7QUFDQTtBQUNBO0FBdkJBO0FBQUE7QUFDQTtBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWpCQTtBQXFCQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQVRBO0FBcEVBO0FBQUE7QUFpRkE7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWhCQTtBQXhCQTtBQUFBO0FBQ0E7QUE0Q0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQURBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQWhCQTtBQUZBO0FBc0JBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQWhDQTtBQUxBO0FBd0NBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBdERBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUxBO0FBQ0E7QUFDQTtBQTJEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFEQTtBQUdBO0FBdkVBO0FBQUE7QUEwRUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFEQTtBQU1BO0FBRUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUZBO0FBSEE7QUFBQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBREE7QUFNQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../ui/redux/actions/publish.js\n");

/***/ }),

/***/ "../ui/redux/reducers/file_info.js":
/*!*****************************************!*\
  !*** ../ui/redux/reducers/file_info.js ***!
  \*****************************************/
/*! exports provided: fileInfoReducer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fileInfoReducer\", function() { return fileInfoReducer; });\n/* harmony import */ var constants_action_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! constants/action_types */ \"../ui/constants/action_types.js\");\n/* harmony import */ var constants_sort_options__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! constants/sort_options */ \"../ui/constants/sort_options.js\");\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! constants/pages */ \"../ui/constants/pages.js\");\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(constants_pages__WEBPACK_IMPORTED_MODULE_2__);\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\n\n\n\nvar reducers = {};\nvar defaultState = {\n  fileListPublishedSort: constants_sort_options__WEBPACK_IMPORTED_MODULE_1__[\"DATE_NEW\"],\n  fileListDownloadedSort: constants_sort_options__WEBPACK_IMPORTED_MODULE_1__[\"DATE_NEW\"],\n  fetchingOutpoints: []\n};\n\nreducers[constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"FILE_LIST_STARTED\"]] = function (state) {\n  return Object.assign({}, state, {\n    isFetchingFileList: true\n  });\n};\n\nreducers[constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"FILE_LIST_SUCCEEDED\"]] = function (state, action) {\n  var fileInfos = action.data.fileInfos;\n  var newByOutpoint = Object.assign({}, state.byOutpoint);\n  var pendingByOutpoint = Object.assign({}, state.pendingByOutpoint);\n  fileInfos.forEach(function (fileInfo) {\n    var outpoint = fileInfo.outpoint;\n    if (outpoint) newByOutpoint[fileInfo.outpoint] = fileInfo;\n  });\n  return Object.assign({}, state, {\n    isFetchingFileList: false,\n    byOutpoint: newByOutpoint,\n    pendingByOutpoint: pendingByOutpoint\n  });\n};\n\nreducers[constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"FETCH_FILE_INFO_STARTED\"]] = function (state, action) {\n  var outpoint = action.data.outpoint;\n  var newFetchingOutpoints = new Set(state.fetchingOutpoints);\n  newFetchingOutpoints.add(outpoint);\n  return _objectSpread({}, state, {\n    fetchingOutpoints: Array.from(newFetchingOutpoints)\n  });\n};\n\nreducers[constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"FETCH_FILE_INFO_COMPLETED\"]] = function (state, action) {\n  var _action$data = action.data,\n      fileInfo = _action$data.fileInfo,\n      outpoint = _action$data.outpoint;\n  var newFetchingOutpoints = new Set(state.fetchingOutpoints);\n  newFetchingOutpoints[\"delete\"](outpoint);\n  var newByOutpoint = Object.assign({}, state.byOutpoint);\n  newByOutpoint[outpoint] = fileInfo;\n  return _objectSpread({}, state, {\n    fetchingOutpoints: Array.from(newFetchingOutpoints),\n    byOutpoint: newByOutpoint\n  });\n};\n\nreducers[constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"FETCH_FILE_INFO_FAILED\"]] = function (state, action) {\n  var outpoint = action.data.outpoint;\n  var newFetchingOutpoints = new Set(state.fetchingOutpoints);\n  newFetchingOutpoints[\"delete\"](outpoint);\n  return _objectSpread({}, state, {\n    fetchingOutpoints: Array.from(newFetchingOutpoints)\n  });\n};\n\nreducers[constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"DOWNLOADING_STARTED\"]] = function (state, action) {\n  var _action$data2 = action.data,\n      outpoint = _action$data2.outpoint,\n      fileInfo = _action$data2.fileInfo;\n  var newByOutpoint = Object.assign({}, state.byOutpoint);\n  var newDownloading = Object.assign({}, state.downloadingByOutpoint);\n  newDownloading[outpoint] = true;\n  newByOutpoint[outpoint] = fileInfo;\n  return Object.assign({}, state, {\n    downloadingByOutpoint: newDownloading,\n    byOutpoint: newByOutpoint\n  });\n};\n\nreducers[constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"DOWNLOADING_PROGRESSED\"]] = function (state, action) {\n  var _action$data3 = action.data,\n      outpoint = _action$data3.outpoint,\n      fileInfo = _action$data3.fileInfo;\n  var newByOutpoint = Object.assign({}, state.byOutpoint);\n  var newDownloading = Object.assign({}, state.downloadingByOutpoint);\n  newByOutpoint[outpoint] = fileInfo;\n  newDownloading[outpoint] = true;\n  return Object.assign({}, state, {\n    byOutpoint: newByOutpoint,\n    downloadingByOutpoint: newDownloading\n  });\n};\n\nreducers[constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"DOWNLOADING_CANCELED\"]] = function (state, action) {\n  var outpoint = action.data.outpoint;\n  var newDownloading = Object.assign({}, state.downloadingByOutpoint);\n  delete newDownloading[outpoint];\n  return Object.assign({}, state, {\n    downloadingByOutpoint: newDownloading\n  });\n};\n\nreducers[constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"DOWNLOADING_COMPLETED\"]] = function (state, action) {\n  var _action$data4 = action.data,\n      outpoint = _action$data4.outpoint,\n      fileInfo = _action$data4.fileInfo;\n  var newByOutpoint = Object.assign({}, state.byOutpoint);\n  var newDownloading = Object.assign({}, state.downloadingByOutpoint);\n  newByOutpoint[outpoint] = fileInfo;\n  delete newDownloading[outpoint];\n  return Object.assign({}, state, {\n    byOutpoint: newByOutpoint,\n    downloadingByOutpoint: newDownloading\n  });\n};\n\nreducers[constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"FILE_DELETE\"]] = function (state, action) {\n  var outpoint = action.data.outpoint;\n  var newByOutpoint = Object.assign({}, state.byOutpoint);\n  var downloadingByOutpoint = Object.assign({}, state.downloadingByOutpoint);\n  delete newByOutpoint[outpoint];\n  delete downloadingByOutpoint[outpoint];\n  return Object.assign({}, state, {\n    byOutpoint: newByOutpoint,\n    downloadingByOutpoint: downloadingByOutpoint\n  });\n};\n\nreducers[constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"SET_FILE_LIST_SORT\"]] = function (state, action) {\n  var _pageSortStates;\n\n  var pageSortStates = (_pageSortStates = {}, _defineProperty(_pageSortStates, constants_pages__WEBPACK_IMPORTED_MODULE_2__[\"DEPRECATED__PUBLISH\"], 'fileListPublishedSort'), _defineProperty(_pageSortStates, constants_pages__WEBPACK_IMPORTED_MODULE_2__[\"DEPRECATED__DOWNLOADED\"], 'fileListDownloadedSort'), _pageSortStates);\n  var pageSortState = pageSortStates[action.data.page];\n  var value = action.data.value;\n  return Object.assign({}, state, _defineProperty({}, pageSortState, value));\n};\n\nfunction fileInfoReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var handler = reducers[action.type];\n  if (handler) return handler(state, action);\n  return state;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvcmVkdXgvcmVkdWNlcnMvZmlsZV9pbmZvLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL3VpL3JlZHV4L3JlZHVjZXJzL2ZpbGVfaW5mby5qcz9mYmFlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEFDVElPTlMgZnJvbSAnY29uc3RhbnRzL2FjdGlvbl90eXBlcyc7XG5pbXBvcnQgKiBhcyBTT1JUX09QVElPTlMgZnJvbSAnY29uc3RhbnRzL3NvcnRfb3B0aW9ucyc7XG5pbXBvcnQgKiBhcyBQQUdFUyBmcm9tICdjb25zdGFudHMvcGFnZXMnO1xuXG5jb25zdCByZWR1Y2VycyA9IHt9O1xuY29uc3QgZGVmYXVsdFN0YXRlID0ge1xuICBmaWxlTGlzdFB1Ymxpc2hlZFNvcnQ6IFNPUlRfT1BUSU9OUy5EQVRFX05FVyxcbiAgZmlsZUxpc3REb3dubG9hZGVkU29ydDogU09SVF9PUFRJT05TLkRBVEVfTkVXLFxuICBmZXRjaGluZ091dHBvaW50czogW10sXG59O1xuXG5yZWR1Y2Vyc1tBQ1RJT05TLkZJTEVfTElTVF9TVEFSVEVEXSA9IChzdGF0ZSkgPT5cbiAgT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUsIHtcbiAgICBpc0ZldGNoaW5nRmlsZUxpc3Q6IHRydWUsXG4gIH0pO1xuXG5yZWR1Y2Vyc1tBQ1RJT05TLkZJTEVfTElTVF9TVUNDRUVERURdID0gKHN0YXRlLCBhY3Rpb24pID0+IHtcbiAgY29uc3QgeyBmaWxlSW5mb3MgfSA9IGFjdGlvbi5kYXRhO1xuICBjb25zdCBuZXdCeU91dHBvaW50ID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUuYnlPdXRwb2ludCk7XG4gIGNvbnN0IHBlbmRpbmdCeU91dHBvaW50ID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUucGVuZGluZ0J5T3V0cG9pbnQpO1xuXG4gIGZpbGVJbmZvcy5mb3JFYWNoKChmaWxlSW5mbykgPT4ge1xuICAgIGNvbnN0IHsgb3V0cG9pbnQgfSA9IGZpbGVJbmZvO1xuXG4gICAgaWYgKG91dHBvaW50KSBuZXdCeU91dHBvaW50W2ZpbGVJbmZvLm91dHBvaW50XSA9IGZpbGVJbmZvO1xuICB9KTtcblxuICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUsIHtcbiAgICBpc0ZldGNoaW5nRmlsZUxpc3Q6IGZhbHNlLFxuICAgIGJ5T3V0cG9pbnQ6IG5ld0J5T3V0cG9pbnQsXG4gICAgcGVuZGluZ0J5T3V0cG9pbnQsXG4gIH0pO1xufTtcblxucmVkdWNlcnNbQUNUSU9OUy5GRVRDSF9GSUxFX0lORk9fU1RBUlRFRF0gPSAoc3RhdGUsIGFjdGlvbikgPT4ge1xuICBjb25zdCB7IG91dHBvaW50IH0gPSBhY3Rpb24uZGF0YTtcblxuICBjb25zdCBuZXdGZXRjaGluZ091dHBvaW50cyA9IG5ldyBTZXQoc3RhdGUuZmV0Y2hpbmdPdXRwb2ludHMpO1xuICBuZXdGZXRjaGluZ091dHBvaW50cy5hZGQob3V0cG9pbnQpO1xuXG4gIHJldHVybiB7IC4uLnN0YXRlLCBmZXRjaGluZ091dHBvaW50czogQXJyYXkuZnJvbShuZXdGZXRjaGluZ091dHBvaW50cykgfTtcbn07XG5cbnJlZHVjZXJzW0FDVElPTlMuRkVUQ0hfRklMRV9JTkZPX0NPTVBMRVRFRF0gPSAoc3RhdGUsIGFjdGlvbikgPT4ge1xuICBjb25zdCB7IGZpbGVJbmZvLCBvdXRwb2ludCB9ID0gYWN0aW9uLmRhdGE7XG5cbiAgY29uc3QgbmV3RmV0Y2hpbmdPdXRwb2ludHMgPSBuZXcgU2V0KHN0YXRlLmZldGNoaW5nT3V0cG9pbnRzKTtcbiAgbmV3RmV0Y2hpbmdPdXRwb2ludHMuZGVsZXRlKG91dHBvaW50KTtcblxuICBjb25zdCBuZXdCeU91dHBvaW50ID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUuYnlPdXRwb2ludCk7XG4gIG5ld0J5T3V0cG9pbnRbb3V0cG9pbnRdID0gZmlsZUluZm87XG5cbiAgcmV0dXJuIHsgLi4uc3RhdGUsIGZldGNoaW5nT3V0cG9pbnRzOiBBcnJheS5mcm9tKG5ld0ZldGNoaW5nT3V0cG9pbnRzKSwgYnlPdXRwb2ludDogbmV3QnlPdXRwb2ludCB9O1xufTtcblxucmVkdWNlcnNbQUNUSU9OUy5GRVRDSF9GSUxFX0lORk9fRkFJTEVEXSA9IChzdGF0ZSwgYWN0aW9uKSA9PiB7XG4gIGNvbnN0IHsgb3V0cG9pbnQgfSA9IGFjdGlvbi5kYXRhO1xuXG4gIGNvbnN0IG5ld0ZldGNoaW5nT3V0cG9pbnRzID0gbmV3IFNldChzdGF0ZS5mZXRjaGluZ091dHBvaW50cyk7XG4gIG5ld0ZldGNoaW5nT3V0cG9pbnRzLmRlbGV0ZShvdXRwb2ludCk7XG5cbiAgcmV0dXJuIHsgLi4uc3RhdGUsIGZldGNoaW5nT3V0cG9pbnRzOiBBcnJheS5mcm9tKG5ld0ZldGNoaW5nT3V0cG9pbnRzKSB9O1xufTtcblxucmVkdWNlcnNbQUNUSU9OUy5ET1dOTE9BRElOR19TVEFSVEVEXSA9IChzdGF0ZSwgYWN0aW9uKSA9PiB7XG4gIGNvbnN0IHsgb3V0cG9pbnQsIGZpbGVJbmZvIH0gPSBhY3Rpb24uZGF0YTtcblxuICBjb25zdCBuZXdCeU91dHBvaW50ID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUuYnlPdXRwb2ludCk7XG4gIGNvbnN0IG5ld0Rvd25sb2FkaW5nID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUuZG93bmxvYWRpbmdCeU91dHBvaW50KTtcblxuICBuZXdEb3dubG9hZGluZ1tvdXRwb2ludF0gPSB0cnVlO1xuICBuZXdCeU91dHBvaW50W291dHBvaW50XSA9IGZpbGVJbmZvO1xuXG4gIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSwge1xuICAgIGRvd25sb2FkaW5nQnlPdXRwb2ludDogbmV3RG93bmxvYWRpbmcsXG4gICAgYnlPdXRwb2ludDogbmV3QnlPdXRwb2ludCxcbiAgfSk7XG59O1xuXG5yZWR1Y2Vyc1tBQ1RJT05TLkRPV05MT0FESU5HX1BST0dSRVNTRURdID0gKHN0YXRlLCBhY3Rpb24pID0+IHtcbiAgY29uc3QgeyBvdXRwb2ludCwgZmlsZUluZm8gfSA9IGFjdGlvbi5kYXRhO1xuXG4gIGNvbnN0IG5ld0J5T3V0cG9pbnQgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5ieU91dHBvaW50KTtcbiAgY29uc3QgbmV3RG93bmxvYWRpbmcgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5kb3dubG9hZGluZ0J5T3V0cG9pbnQpO1xuXG4gIG5ld0J5T3V0cG9pbnRbb3V0cG9pbnRdID0gZmlsZUluZm87XG4gIG5ld0Rvd25sb2FkaW5nW291dHBvaW50XSA9IHRydWU7XG5cbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLCB7XG4gICAgYnlPdXRwb2ludDogbmV3QnlPdXRwb2ludCxcbiAgICBkb3dubG9hZGluZ0J5T3V0cG9pbnQ6IG5ld0Rvd25sb2FkaW5nLFxuICB9KTtcbn07XG5cbnJlZHVjZXJzW0FDVElPTlMuRE9XTkxPQURJTkdfQ0FOQ0VMRURdID0gKHN0YXRlLCBhY3Rpb24pID0+IHtcbiAgY29uc3QgeyBvdXRwb2ludCB9ID0gYWN0aW9uLmRhdGE7XG5cbiAgY29uc3QgbmV3RG93bmxvYWRpbmcgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5kb3dubG9hZGluZ0J5T3V0cG9pbnQpO1xuICBkZWxldGUgbmV3RG93bmxvYWRpbmdbb3V0cG9pbnRdO1xuXG4gIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSwge1xuICAgIGRvd25sb2FkaW5nQnlPdXRwb2ludDogbmV3RG93bmxvYWRpbmcsXG4gIH0pO1xufTtcblxucmVkdWNlcnNbQUNUSU9OUy5ET1dOTE9BRElOR19DT01QTEVURURdID0gKHN0YXRlLCBhY3Rpb24pID0+IHtcbiAgY29uc3QgeyBvdXRwb2ludCwgZmlsZUluZm8gfSA9IGFjdGlvbi5kYXRhO1xuXG4gIGNvbnN0IG5ld0J5T3V0cG9pbnQgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5ieU91dHBvaW50KTtcbiAgY29uc3QgbmV3RG93bmxvYWRpbmcgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5kb3dubG9hZGluZ0J5T3V0cG9pbnQpO1xuXG4gIG5ld0J5T3V0cG9pbnRbb3V0cG9pbnRdID0gZmlsZUluZm87XG4gIGRlbGV0ZSBuZXdEb3dubG9hZGluZ1tvdXRwb2ludF07XG5cbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLCB7XG4gICAgYnlPdXRwb2ludDogbmV3QnlPdXRwb2ludCxcbiAgICBkb3dubG9hZGluZ0J5T3V0cG9pbnQ6IG5ld0Rvd25sb2FkaW5nLFxuICB9KTtcbn07XG5cbnJlZHVjZXJzW0FDVElPTlMuRklMRV9ERUxFVEVdID0gKHN0YXRlLCBhY3Rpb24pID0+IHtcbiAgY29uc3QgeyBvdXRwb2ludCB9ID0gYWN0aW9uLmRhdGE7XG5cbiAgY29uc3QgbmV3QnlPdXRwb2ludCA9IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLmJ5T3V0cG9pbnQpO1xuICBjb25zdCBkb3dubG9hZGluZ0J5T3V0cG9pbnQgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5kb3dubG9hZGluZ0J5T3V0cG9pbnQpO1xuXG4gIGRlbGV0ZSBuZXdCeU91dHBvaW50W291dHBvaW50XTtcbiAgZGVsZXRlIGRvd25sb2FkaW5nQnlPdXRwb2ludFtvdXRwb2ludF07XG5cbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLCB7XG4gICAgYnlPdXRwb2ludDogbmV3QnlPdXRwb2ludCxcbiAgICBkb3dubG9hZGluZ0J5T3V0cG9pbnQsXG4gIH0pO1xufTtcblxucmVkdWNlcnNbQUNUSU9OUy5TRVRfRklMRV9MSVNUX1NPUlRdID0gKHN0YXRlLCBhY3Rpb24pID0+IHtcbiAgY29uc3QgcGFnZVNvcnRTdGF0ZXMgPSB7XG4gICAgW1BBR0VTLkRFUFJFQ0FURURfX1BVQkxJU0hdOiAnZmlsZUxpc3RQdWJsaXNoZWRTb3J0JyxcbiAgICBbUEFHRVMuREVQUkVDQVRFRF9fRE9XTkxPQURFRF06ICdmaWxlTGlzdERvd25sb2FkZWRTb3J0JyxcbiAgfTtcbiAgY29uc3QgcGFnZVNvcnRTdGF0ZSA9IHBhZ2VTb3J0U3RhdGVzW2FjdGlvbi5kYXRhLnBhZ2VdO1xuICBjb25zdCB7IHZhbHVlIH0gPSBhY3Rpb24uZGF0YTtcblxuICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUsIHtcbiAgICBbcGFnZVNvcnRTdGF0ZV06IHZhbHVlLFxuICB9KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWxlSW5mb1JlZHVjZXIoc3RhdGUgPSBkZWZhdWx0U3RhdGUsIGFjdGlvbikge1xuICBjb25zdCBoYW5kbGVyID0gcmVkdWNlcnNbYWN0aW9uLnR5cGVdO1xuICBpZiAoaGFuZGxlcikgcmV0dXJuIGhhbmRsZXIoc3RhdGUsIGFjdGlvbik7XG4gIHJldHVybiBzdGF0ZTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFBQTtBQUVBO0FBREE7QUFEQTtBQUNBO0FBSUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBR0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFYQTtBQUNBO0FBaUJBO0FBQUE7QUFHQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBTkE7QUFDQTtBQVFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQVRBO0FBQ0E7QUFXQTtBQUFBO0FBR0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQU5BO0FBQ0E7QUFRQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFUQTtBQUNBO0FBY0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBVEE7QUFDQTtBQWNBO0FBQUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBTkE7QUFDQTtBQVVBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQVRBO0FBQ0E7QUFjQTtBQUFBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQVRBO0FBQ0E7QUFjQTtBQUFBO0FBQ0E7QUFBQTtBQUlBO0FBTEE7QUFRQTtBQVJBO0FBQ0E7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../ui/redux/reducers/file_info.js\n");

/***/ }),

/***/ "../ui/redux/selectors/claims.js":
/*!***************************************!*\
  !*** ../ui/redux/selectors/claims.js ***!
  \***************************************/
/*! exports provided: selectById, selectPendingClaimsById, selectClaimsById, selectClaimIdsByUri, selectCurrentChannelPage, selectCreatingChannel, selectCreateChannelError, selectRepostLoading, selectRepostError, selectLatestByUri, selectLatestClaimForUri, selectClaimsByUri, selectClaimForId, selectClaimUriForId, selectChannelPermanentUriForUri, selectAllClaimsByChannel, selectPendingIds, selectPendingClaims, selectClaimIsPendingForId, makeSelectClaimIsPending, makeSelectClaimIdIsPending, selectClaimIdForUri, selectReflectingById, makeSelectClaimForClaimId, selectClaimForClaimId, selectClaimForUri, selectClaimOutpointForUri, selectChannelClaimIdForUri, selectChannelNameForUri, selectHasClaimForUri, selectHasResolvedClaimForUri, makeSelectClaimForUri, selectMyClaimIdsRaw, selectMyClaimsRaw, selectAbandoningById, selectAbandoningIds, makeSelectAbandoningClaimById, makeSelectIsAbandoningClaimForUri, selectMyActiveClaims, selectClaimIsMine, selectClaimIsMineForUri, selectMyPurchases, selectPurchaseUriSuccess, selectMyPurchasesCount, selectIsFetchingMyPurchases, selectFetchingMyPurchasesError, makeSelectMyPurchasesForPage, selectClaimWasPurchasedForUri, selectAllFetchingChannelClaims, makeSelectFetchingChannelClaims, makeSelectClaimsInChannelForPage, makeSelectTotalClaimsInChannelSearch, makeSelectTotalPagesInChannelSearch, selectIsLivestreamClaimForUri, selectMetadataForUri, makeSelectMetadataForUri, makeSelectMetadataItemForUri, selectTitleForUri, selectDateForUri, makeSelectAmountForUri, makeSelectEffectiveAmountForUri, makeSelectContentTypeForUri, selectThumbnailForUri, selectThumbnailForId, makeSelectCoverForUri, makeSelectAvatarForUri, selectIsFetchingClaimListMine, selectMyClaimsPage, selectMyClaimsPageNumber, selectMyClaimsPageItemCount, selectFetchingMyClaimsPageError, selectMyClaims, selectMyClaimsWithoutChannels, selectMyClaimUrisWithoutChannels, selectAllMyClaimsByOutpoint, selectMyClaimsOutpoints, selectFetchingMyChannels, selectIsFetchingMyCollections, selectMyChannelClaimsById, selectMyChannelClaims, selectMyChannelClaimIds, selectIsChannelMineForClaimId, selectMyChannelClaimUrls, selectHasChannels, selectMyCollectionIds, selectResolvingUris, selectChannelImportPending, selectIsUriResolving, selectChannelClaimCounts, makeSelectPendingClaimForUri, makeSelectTotalItemsForChannel, makeSelectTotalPagesForChannel, makeSelectNsfwCountFromUris, makeSelectOmittedCountForChannel, selectClaimIsNsfwForUri, selectChannelForUri, selectChannelTitleForUri, selectChannelNameForId, selectChannelForClaimUri, selectChannelNameForClaimUri, makeSelectChannelForClaimUri, makeSelectChannelPermUrlForClaimUri, makeSelectMyChannelPermUrlForName, selectTagsForUri, selectPurchaseTagForUri, selectPreorderTagForUri, selectRentalTagForUri, selectPreorderContentClaimIdForUri, selectFetchingClaimSearchByQuery, selectFetchingClaimSearch, selectClaimSearchByQuery, selectClaimSearchByQueryLastPageReached, selectShortUrlForUri, selectCanonicalUrlForUri, selectPermanentUrlForUri, makeSelectSupportsForUri, selectUpdatingChannel, selectUpdateChannelError, makeSelectReflectingClaimForUri, makeSelectMyStreamUrlsForPage, selectMyStreamUrlsCount, makeSelectTagInClaimOrChannelForUri, makeSelectClaimHasSource, selectIsStreamPlaceholderForUri, selectTotalStakedAmountForChannelUri, selectStakedLevelForChannelUri, selectUpdatingCollection, selectUpdateCollectionError, selectCreatingCollection, selectCreateCollectionError, selectIsMyChannelCountOverLimit, selectOdyseeMembershipForUri, selectOdyseeMembershipForChannelId, selectGeoRestrictionForUri, selectClaimRepostedAmountForUri, selectTakeOverAmountForName, selectMyPurchasedClaims, selectPurchaseMadeForClaimId, selectValidRentalPurchaseForClaimId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectById\", function() { return selectById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectPendingClaimsById\", function() { return selectPendingClaimsById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectClaimsById\", function() { return selectClaimsById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectClaimIdsByUri\", function() { return selectClaimIdsByUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectCurrentChannelPage\", function() { return selectCurrentChannelPage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectCreatingChannel\", function() { return selectCreatingChannel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectCreateChannelError\", function() { return selectCreateChannelError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectRepostLoading\", function() { return selectRepostLoading; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectRepostError\", function() { return selectRepostError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectLatestByUri\", function() { return selectLatestByUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectLatestClaimForUri\", function() { return selectLatestClaimForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectClaimsByUri\", function() { return selectClaimsByUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectClaimForId\", function() { return selectClaimForId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectClaimUriForId\", function() { return selectClaimUriForId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectChannelPermanentUriForUri\", function() { return selectChannelPermanentUriForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectAllClaimsByChannel\", function() { return selectAllClaimsByChannel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectPendingIds\", function() { return selectPendingIds; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectPendingClaims\", function() { return selectPendingClaims; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectClaimIsPendingForId\", function() { return selectClaimIsPendingForId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectClaimIsPending\", function() { return makeSelectClaimIsPending; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectClaimIdIsPending\", function() { return makeSelectClaimIdIsPending; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectClaimIdForUri\", function() { return selectClaimIdForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectReflectingById\", function() { return selectReflectingById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectClaimForClaimId\", function() { return makeSelectClaimForClaimId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectClaimForClaimId\", function() { return selectClaimForClaimId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectClaimForUri\", function() { return selectClaimForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectClaimOutpointForUri\", function() { return selectClaimOutpointForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectChannelClaimIdForUri\", function() { return selectChannelClaimIdForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectChannelNameForUri\", function() { return selectChannelNameForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectHasClaimForUri\", function() { return selectHasClaimForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectHasResolvedClaimForUri\", function() { return selectHasResolvedClaimForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectClaimForUri\", function() { return makeSelectClaimForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyClaimIdsRaw\", function() { return selectMyClaimIdsRaw; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyClaimsRaw\", function() { return selectMyClaimsRaw; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectAbandoningById\", function() { return selectAbandoningById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectAbandoningIds\", function() { return selectAbandoningIds; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectAbandoningClaimById\", function() { return makeSelectAbandoningClaimById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectIsAbandoningClaimForUri\", function() { return makeSelectIsAbandoningClaimForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyActiveClaims\", function() { return selectMyActiveClaims; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectClaimIsMine\", function() { return selectClaimIsMine; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectClaimIsMineForUri\", function() { return selectClaimIsMineForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyPurchases\", function() { return selectMyPurchases; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectPurchaseUriSuccess\", function() { return selectPurchaseUriSuccess; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyPurchasesCount\", function() { return selectMyPurchasesCount; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectIsFetchingMyPurchases\", function() { return selectIsFetchingMyPurchases; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectFetchingMyPurchasesError\", function() { return selectFetchingMyPurchasesError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectMyPurchasesForPage\", function() { return makeSelectMyPurchasesForPage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectClaimWasPurchasedForUri\", function() { return selectClaimWasPurchasedForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectAllFetchingChannelClaims\", function() { return selectAllFetchingChannelClaims; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectFetchingChannelClaims\", function() { return makeSelectFetchingChannelClaims; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectClaimsInChannelForPage\", function() { return makeSelectClaimsInChannelForPage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectTotalClaimsInChannelSearch\", function() { return makeSelectTotalClaimsInChannelSearch; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectTotalPagesInChannelSearch\", function() { return makeSelectTotalPagesInChannelSearch; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectIsLivestreamClaimForUri\", function() { return selectIsLivestreamClaimForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMetadataForUri\", function() { return selectMetadataForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectMetadataForUri\", function() { return makeSelectMetadataForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectMetadataItemForUri\", function() { return makeSelectMetadataItemForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectTitleForUri\", function() { return selectTitleForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectDateForUri\", function() { return selectDateForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectAmountForUri\", function() { return makeSelectAmountForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectEffectiveAmountForUri\", function() { return makeSelectEffectiveAmountForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectContentTypeForUri\", function() { return makeSelectContentTypeForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectThumbnailForUri\", function() { return selectThumbnailForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectThumbnailForId\", function() { return selectThumbnailForId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectCoverForUri\", function() { return makeSelectCoverForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectAvatarForUri\", function() { return makeSelectAvatarForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectIsFetchingClaimListMine\", function() { return selectIsFetchingClaimListMine; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyClaimsPage\", function() { return selectMyClaimsPage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyClaimsPageNumber\", function() { return selectMyClaimsPageNumber; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyClaimsPageItemCount\", function() { return selectMyClaimsPageItemCount; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectFetchingMyClaimsPageError\", function() { return selectFetchingMyClaimsPageError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyClaims\", function() { return selectMyClaims; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyClaimsWithoutChannels\", function() { return selectMyClaimsWithoutChannels; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyClaimUrisWithoutChannels\", function() { return selectMyClaimUrisWithoutChannels; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectAllMyClaimsByOutpoint\", function() { return selectAllMyClaimsByOutpoint; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyClaimsOutpoints\", function() { return selectMyClaimsOutpoints; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectFetchingMyChannels\", function() { return selectFetchingMyChannels; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectIsFetchingMyCollections\", function() { return selectIsFetchingMyCollections; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyChannelClaimsById\", function() { return selectMyChannelClaimsById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyChannelClaims\", function() { return selectMyChannelClaims; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyChannelClaimIds\", function() { return selectMyChannelClaimIds; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectIsChannelMineForClaimId\", function() { return selectIsChannelMineForClaimId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyChannelClaimUrls\", function() { return selectMyChannelClaimUrls; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectHasChannels\", function() { return selectHasChannels; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyCollectionIds\", function() { return selectMyCollectionIds; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectResolvingUris\", function() { return selectResolvingUris; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectChannelImportPending\", function() { return selectChannelImportPending; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectIsUriResolving\", function() { return selectIsUriResolving; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectChannelClaimCounts\", function() { return selectChannelClaimCounts; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectPendingClaimForUri\", function() { return makeSelectPendingClaimForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectTotalItemsForChannel\", function() { return makeSelectTotalItemsForChannel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectTotalPagesForChannel\", function() { return makeSelectTotalPagesForChannel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectNsfwCountFromUris\", function() { return makeSelectNsfwCountFromUris; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectOmittedCountForChannel\", function() { return makeSelectOmittedCountForChannel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectClaimIsNsfwForUri\", function() { return selectClaimIsNsfwForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectChannelForUri\", function() { return selectChannelForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectChannelTitleForUri\", function() { return selectChannelTitleForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectChannelNameForId\", function() { return selectChannelNameForId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectChannelForClaimUri\", function() { return selectChannelForClaimUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectChannelNameForClaimUri\", function() { return selectChannelNameForClaimUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectChannelForClaimUri\", function() { return makeSelectChannelForClaimUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectChannelPermUrlForClaimUri\", function() { return makeSelectChannelPermUrlForClaimUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectMyChannelPermUrlForName\", function() { return makeSelectMyChannelPermUrlForName; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectTagsForUri\", function() { return selectTagsForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectPurchaseTagForUri\", function() { return selectPurchaseTagForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectPreorderTagForUri\", function() { return selectPreorderTagForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectRentalTagForUri\", function() { return selectRentalTagForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectPreorderContentClaimIdForUri\", function() { return selectPreorderContentClaimIdForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectFetchingClaimSearchByQuery\", function() { return selectFetchingClaimSearchByQuery; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectFetchingClaimSearch\", function() { return selectFetchingClaimSearch; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectClaimSearchByQuery\", function() { return selectClaimSearchByQuery; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectClaimSearchByQueryLastPageReached\", function() { return selectClaimSearchByQueryLastPageReached; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectShortUrlForUri\", function() { return selectShortUrlForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectCanonicalUrlForUri\", function() { return selectCanonicalUrlForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectPermanentUrlForUri\", function() { return selectPermanentUrlForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectSupportsForUri\", function() { return makeSelectSupportsForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectUpdatingChannel\", function() { return selectUpdatingChannel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectUpdateChannelError\", function() { return selectUpdateChannelError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectReflectingClaimForUri\", function() { return makeSelectReflectingClaimForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectMyStreamUrlsForPage\", function() { return makeSelectMyStreamUrlsForPage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyStreamUrlsCount\", function() { return selectMyStreamUrlsCount; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectTagInClaimOrChannelForUri\", function() { return makeSelectTagInClaimOrChannelForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectClaimHasSource\", function() { return makeSelectClaimHasSource; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectIsStreamPlaceholderForUri\", function() { return selectIsStreamPlaceholderForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectTotalStakedAmountForChannelUri\", function() { return selectTotalStakedAmountForChannelUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectStakedLevelForChannelUri\", function() { return selectStakedLevelForChannelUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectUpdatingCollection\", function() { return selectUpdatingCollection; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectUpdateCollectionError\", function() { return selectUpdateCollectionError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectCreatingCollection\", function() { return selectCreatingCollection; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectCreateCollectionError\", function() { return selectCreateCollectionError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectIsMyChannelCountOverLimit\", function() { return selectIsMyChannelCountOverLimit; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectOdyseeMembershipForUri\", function() { return selectOdyseeMembershipForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectOdyseeMembershipForChannelId\", function() { return selectOdyseeMembershipForChannelId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectGeoRestrictionForUri\", function() { return selectGeoRestrictionForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectClaimRepostedAmountForUri\", function() { return selectClaimRepostedAmountForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectTakeOverAmountForName\", function() { return selectTakeOverAmountForName; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyPurchasedClaims\", function() { return selectMyPurchasedClaims; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectPurchaseMadeForClaimId\", function() { return selectPurchaseMadeForClaimId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectValidRentalPurchaseForClaimId\", function() { return selectValidRentalPurchaseForClaimId; });\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ \"../config.js\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(config__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var util_lbryURI__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! util/lbryURI */ \"../ui/util/lbryURI.js\");\n/* harmony import */ var redux_selectors_blocked__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux/selectors/blocked */ \"../ui/redux/selectors/blocked.js\");\n/* harmony import */ var redux_selectors_user__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! redux/selectors/user */ \"../ui/redux/selectors/user.js\");\n/* harmony import */ var redux_selectors_wallet__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! redux/selectors/wallet */ \"../ui/redux/selectors/wallet.js\");\n/* harmony import */ var reselect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! reselect */ \"../node_modules/reselect/es/index.js\");\n/* harmony import */ var re_reselect__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! re-reselect */ \"../node_modules/re-reselect/dist/index.js\");\n/* harmony import */ var re_reselect__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(re_reselect__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var util_claim__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! util/claim */ \"../ui/util/claim.js\");\n/* harmony import */ var constants_claim__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! constants/claim */ \"../ui/constants/claim.js\");\n/* harmony import */ var constants_tags__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! constants/tags */ \"../ui/constants/tags.js\");\n/* harmony import */ var util_geoRestriction__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! util/geoRestriction */ \"../ui/util/geoRestriction.js\");\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar selectState = function selectState(state) {\n  return state.claims || {};\n};\n\nvar selectById = function selectById(state) {\n  return selectState(state).byId || {};\n};\nvar selectPendingClaimsById = function selectPendingClaimsById(state) {\n  return selectState(state).pendingById || {};\n};\nvar selectClaimsById = function selectClaimsById(state) {\n  var byId = selectById(state);\n  var pendingById = selectPendingClaimsById(state);\n  return Object.assign(byId, pendingById); // do I need merged to keep metadata?\n};\nvar selectClaimIdsByUri = function selectClaimIdsByUri(state) {\n  return selectState(state).claimsByUri || {};\n};\nvar selectCurrentChannelPage = function selectCurrentChannelPage(state) {\n  return selectState(state).currentChannelPage || 1;\n};\nvar selectCreatingChannel = function selectCreatingChannel(state) {\n  return selectState(state).creatingChannel;\n};\nvar selectCreateChannelError = function selectCreateChannelError(state) {\n  return selectState(state).createChannelError;\n};\nvar selectRepostLoading = function selectRepostLoading(state) {\n  return selectState(state).repostLoading;\n};\nvar selectRepostError = function selectRepostError(state) {\n  return selectState(state).repostError;\n};\nvar selectLatestByUri = function selectLatestByUri(state) {\n  return selectState(state).latestByUri;\n};\nvar selectLatestClaimForUri = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(function (state, uri) {\n  return uri;\n}, selectLatestByUri, function (uri, latestByUri) {\n  var latestClaim = latestByUri[uri];\n  if (!latestClaim) return latestClaim;\n  var latestClaims = Object.values(latestClaim);\n  if (!latestClaims.length) return null; // $FlowFixMe\n\n  return latestClaims[0].stream;\n});\nvar selectClaimsByUri = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectClaimIdsByUri, selectClaimsById, function (byUri, byId) {\n  var claims = {};\n  Object.keys(byUri).forEach(function (uri) {\n    var claimId = byUri[uri]; // NOTE returning a null claim allows us to differentiate between an\n    // undefined (never fetched claim) and one which just doesn't exist. Not\n    // the cleanest solution but couldn't think of anything better right now\n\n    if (claimId === null) {\n      claims[uri] = null;\n    } else {\n      claims[uri] = byId[claimId];\n    }\n  });\n  return claims;\n});\n/**\n * Returns the claim with the specified ID. The claim could be undefined if does\n * not exist or have not fetched. Take note of the second parameter, which means\n * an inline function or helper would be required when used as an input to\n * 'createSelector'.\n *\n * @param state\n * @param claimId\n * @returns {*}\n */\n\nvar selectClaimForId = function selectClaimForId(state, claimId) {\n  var byId = selectClaimsById(state);\n  return byId[claimId];\n};\nvar selectClaimUriForId = function selectClaimUriForId(state, claimId) {\n  var claim = selectClaimForId(state, claimId);\n  return claim && (claim.canonical_url || claim.permanent_url);\n};\nvar selectChannelPermanentUriForUri = function selectChannelPermanentUriForUri(state, uri) {\n  return Object(util_claim__WEBPACK_IMPORTED_MODULE_7__[\"getChannelPermanentUrlFromClaim\"])(selectClaimForUri(state, uri));\n};\nvar selectAllClaimsByChannel = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectState, function (state) {\n  return state.paginatedClaimsByChannel || {};\n});\nvar selectPendingIds = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectState, function (state) {\n  return Object.keys(state.pendingById) || [];\n});\nvar selectPendingClaims = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectPendingClaimsById, function (pendingById) {\n  return Object.values(pendingById);\n});\nvar selectClaimIsPendingForId = function selectClaimIsPendingForId(state, claimId) {\n  return Boolean(selectPendingClaimsById(state)[claimId]);\n};\nvar makeSelectClaimIsPending = function makeSelectClaimIsPending(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectClaimIdsByUri, selectPendingClaimsById, function (idsByUri, pendingById) {\n    var claimId = idsByUri[Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_1__[\"normalizeURI\"])(uri)];\n\n    if (claimId) {\n      return Boolean(pendingById[claimId]);\n    }\n\n    return false;\n  });\n};\nvar makeSelectClaimIdIsPending = function makeSelectClaimIdIsPending(claimId) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectPendingClaimsById, function (pendingById) {\n    return Boolean(pendingById[claimId]);\n  });\n};\nvar selectClaimIdForUri = function selectClaimIdForUri(state, uri) {\n  return selectClaimIdsByUri(state)[uri];\n};\nvar selectReflectingById = function selectReflectingById(state) {\n  return selectState(state).reflectingById;\n}; // OBSOLETE: use selectClaimForClaimId instead\n\nvar makeSelectClaimForClaimId = function makeSelectClaimForClaimId(claimId) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectClaimsById, function (byId) {\n    return byId[claimId];\n  });\n};\nvar selectClaimForClaimId = function selectClaimForClaimId(state, claimId) {\n  return selectClaimsById(state)[claimId];\n};\nvar selectClaimForUri = Object(re_reselect__WEBPACK_IMPORTED_MODULE_6__[\"createCachedSelector\"])(selectClaimIdsByUri, selectClaimsById, function (state, uri) {\n  return uri;\n}, function (state, uri) {\n  var returnRepost = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  return returnRepost;\n}, function (byUri, byId, uri, returnRepost) {\n  var validUri = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_1__[\"isURIValid\"])(uri, false);\n\n  if (validUri && byUri) {\n    var normalizedUri = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_1__[\"normalizeURI\"])(uri);\n    var claimId = uri && byUri[normalizedUri];\n    var claim = byId[claimId]; // Make sure to return the claim as is so apps can check if it's been resolved before (null) or still needs to be resolved (undefined)\n\n    if (claimId === null) {\n      return null;\n    } else if (claimId === undefined) {\n      return undefined;\n    }\n\n    var repostedClaim = claim && claim.reposted_claim;\n\n    if (repostedClaim && returnRepost) {\n      var channelUrl = claim.signing_channel && (claim.signing_channel.canonical_url || claim.signing_channel.permanent_url);\n      return _objectSpread({}, repostedClaim, {\n        repost_url: normalizedUri,\n        repost_channel_url: channelUrl,\n        repost_bid_amount: claim && claim.meta && claim.meta.effective_amount\n      });\n    } else {\n      return claim;\n    }\n  }\n})(function (state, uri) {\n  var returnRepost = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  return \"\".concat(String(uri), \":\").concat(returnRepost ? '1' : '0');\n});\nvar selectClaimOutpointForUri = function selectClaimOutpointForUri(state, uri) {\n  var claim = selectClaimForUri(state, uri);\n  if (!claim) return claim;\n  var outpoint = \"\".concat(claim.txid, \":\").concat(claim.nout);\n  return outpoint;\n};\nvar selectChannelClaimIdForUri = function selectChannelClaimIdForUri(state, uri) {\n  return Object(util_claim__WEBPACK_IMPORTED_MODULE_7__[\"getChannelIdFromClaim\"])(selectClaimForUri(state, uri));\n};\nvar selectChannelNameForUri = function selectChannelNameForUri(state, uri) {\n  return Object(util_claim__WEBPACK_IMPORTED_MODULE_7__[\"getChannelNameFromClaim\"])(selectClaimForUri(state, uri));\n};\nvar selectHasClaimForUri = function selectHasClaimForUri(state, uri) {\n  var claim = selectClaimForUri(state, uri);\n  return Boolean(claim);\n};\nvar selectHasResolvedClaimForUri = function selectHasResolvedClaimForUri(state, uri) {\n  // This selector assumes that `uri` is never null and is valid. It\n  // cannot differentiate whether the undefined claim is due to being\n  // unresolved or an invalid `uri`. Client beware.\n  var claim = selectClaimForUri(state, uri);\n  return claim !== undefined;\n}; // Note: this is deprecated. Use \"selectClaimForUri(state, uri)\" instead.\n\nvar makeSelectClaimForUri = function makeSelectClaimForUri(uri) {\n  var returnRepost = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectClaimIdsByUri, selectClaimsById, function (byUri, byId) {\n    var validUri = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_1__[\"isURIValid\"])(uri, false);\n\n    if (validUri && byUri) {\n      var normalizedUri = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_1__[\"normalizeURI\"])(uri);\n      var claimId = uri && byUri[normalizedUri];\n      var claim = byId[claimId]; // Make sure to return the claim as is so apps can check if it's been resolved before (null) or still needs to be resolved (undefined)\n\n      if (claimId === null) {\n        return null;\n      } else if (claimId === undefined) {\n        return undefined;\n      }\n\n      var repostedClaim = claim && claim.reposted_claim;\n\n      if (repostedClaim && returnRepost) {\n        var channelUrl = claim.signing_channel && (claim.signing_channel.canonical_url || claim.signing_channel.permanent_url);\n        return _objectSpread({}, repostedClaim, {\n          repost_url: normalizedUri,\n          repost_channel_url: channelUrl,\n          repost_bid_amount: claim && claim.meta && claim.meta.effective_amount\n        });\n      } else {\n        return claim;\n      }\n    }\n  });\n}; // Returns your claim IDs without handling pending and abandoned claims.\n\nvar selectMyClaimIdsRaw = function selectMyClaimIdsRaw(state) {\n  return selectState(state).myClaims;\n};\nvar selectMyClaimsRaw = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectState, selectClaimsById, function (state, byId) {\n  var ids = state.myClaims;\n\n  if (!ids) {\n    return ids;\n  }\n\n  var claims = [];\n  ids.forEach(function (id) {\n    if (byId[id]) {\n      // I'm not sure why this check is necessary, but it ought to be a quick fix for https://github.com/lbryio/lbry-desktop/issues/544\n      claims.push(byId[id]);\n    }\n  });\n  return claims;\n});\nvar selectAbandoningById = function selectAbandoningById(state) {\n  return selectState(state).abandoningById || {};\n};\nvar selectAbandoningIds = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectAbandoningById, function (abandoningById) {\n  return Object.keys(abandoningById);\n});\nvar makeSelectAbandoningClaimById = function makeSelectAbandoningClaimById(claimId) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectAbandoningIds, function (ids) {\n    return ids.includes(claimId);\n  });\n};\nvar makeSelectIsAbandoningClaimForUri = function makeSelectIsAbandoningClaimForUri(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectClaimIdsByUri, selectAbandoningIds, function (claimIdsByUri, abandoningById) {\n    var claimId = claimIdsByUri[Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_1__[\"normalizeURI\"])(uri)];\n    return abandoningById.indexOf(claimId) >= 0;\n  });\n};\nvar selectMyActiveClaims = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectMyClaimIdsRaw, selectAbandoningIds, function (myClaimIds, abandoningIds) {\n  return new Set(myClaimIds && myClaimIds.filter(function (claimId) {\n    return !abandoningIds.includes(claimId);\n  }));\n}); // Helper for 'selectClaimIsMineForUri'.\n// Returns undefined string if unable to normalize or is not valid.\n\nvar selectNormalizedAndVerifiedUri = Object(re_reselect__WEBPACK_IMPORTED_MODULE_6__[\"createCachedSelector\"])(function (state, rawUri) {\n  return rawUri;\n}, function (rawUri) {\n  try {\n    var uri = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_1__[\"normalizeURI\"])(rawUri);\n\n    if (Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_1__[\"isURIValid\"])(uri, false)) {\n      return uri;\n    }\n  } catch (e) {}\n\n  return undefined;\n})(function (state, rawUri) {\n  return String(rawUri);\n});\nvar selectClaimIsMine = function selectClaimIsMine(state, claim) {\n  if (claim) {\n    if (claim.is_my_output) {\n      return true;\n    }\n\n    var signingChannelId = Object(util_claim__WEBPACK_IMPORTED_MODULE_7__[\"getChannelIdFromClaim\"])(claim);\n    var myChannelIds = selectMyChannelClaimIds(state);\n\n    if (signingChannelId && myChannelIds) {\n      if (myChannelIds.includes(signingChannelId)) {\n        return true;\n      }\n    } else {\n      var myActiveClaims = selectMyActiveClaims(state);\n\n      if (claim.claim_id && myActiveClaims.has(claim.claim_id)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\nvar selectClaimIsMineForUri = function selectClaimIsMineForUri(state, rawUri) {\n  // Not memoizing this selector because:\n  // (1) The workload is somewhat lightweight.\n  // (2) Since it depends on 'selectClaimsByUri', memoization won't work anyway\n  // because the array is constantly invalidated.\n  var uri = selectNormalizedAndVerifiedUri(state, rawUri);\n\n  if (!uri) {\n    return false;\n  }\n\n  var claimsByUri = selectClaimsByUri(state);\n  return selectClaimIsMine(state, claimsByUri && claimsByUri[uri]);\n};\nvar selectMyPurchases = function selectMyPurchases(state) {\n  return selectState(state).myPurchases;\n};\nvar selectPurchaseUriSuccess = function selectPurchaseUriSuccess(state) {\n  return selectState(state).purchaseUriSuccess;\n};\nvar selectMyPurchasesCount = function selectMyPurchasesCount(state) {\n  return selectState(state).myPurchasesPageTotalResults;\n};\nvar selectIsFetchingMyPurchases = function selectIsFetchingMyPurchases(state) {\n  return selectState(state).fetchingMyPurchases;\n};\nvar selectFetchingMyPurchasesError = function selectFetchingMyPurchasesError(state) {\n  return selectState(state).fetchingMyPurchasesError;\n};\nvar makeSelectMyPurchasesForPage = function makeSelectMyPurchasesForPage(query) {\n  var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectMyPurchases, selectClaimsByUri, function (myPurchases, claimsByUri) {\n    if (!myPurchases) {\n      return undefined;\n    }\n\n    if (!query) {\n      // ensure no duplicates from double purchase bugs\n      // return [...new Set(myPurchases)];\n      return Array.from(new Set(myPurchases));\n    }\n\n    var fileInfos = myPurchases.map(function (uri) {\n      return claimsByUri[uri];\n    });\n    var matchingFileInfos = Object(util_claim__WEBPACK_IMPORTED_MODULE_7__[\"filterClaims\"])(fileInfos, query);\n    var start = (Number(page) - 1) * Number(constants_claim__WEBPACK_IMPORTED_MODULE_8__[\"PAGE_SIZE\"]);\n    var end = Number(page) * Number(constants_claim__WEBPACK_IMPORTED_MODULE_8__[\"PAGE_SIZE\"]);\n    return matchingFileInfos && matchingFileInfos.length ? matchingFileInfos.slice(start, end).map(function (fileInfo) {\n      return fileInfo.canonical_url || fileInfo.permanent_url;\n    }) : [];\n  });\n};\nvar selectClaimWasPurchasedForUri = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectClaimForUri, function (claim) {\n  return Boolean((claim === null || claim === void 0 ? void 0 : claim.purchase_receipt) !== undefined);\n});\nvar selectAllFetchingChannelClaims = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectState, function (state) {\n  return state.fetchingChannelClaims || {};\n});\nvar makeSelectFetchingChannelClaims = function makeSelectFetchingChannelClaims(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectAllFetchingChannelClaims, function (fetching) {\n    return fetching && fetching[uri];\n  });\n};\nvar makeSelectClaimsInChannelForPage = function makeSelectClaimsInChannelForPage(uri, page) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectClaimsById, selectAllClaimsByChannel, function (byId, allClaims) {\n    var byChannel = allClaims[uri] || {};\n    var claimIds = byChannel[page || 1];\n    if (!claimIds) return claimIds;\n    return claimIds.map(function (claimId) {\n      return byId[claimId];\n    });\n  });\n}; // THIS IS LEFT OVER FROM ONE TAB CHANNEL_CONTENT\n\nvar makeSelectTotalClaimsInChannelSearch = function makeSelectTotalClaimsInChannelSearch(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectClaimsById, selectAllClaimsByChannel, function (byId, allClaims) {\n    var byChannel = allClaims[uri] || {};\n    return byChannel['itemCount'];\n  });\n}; // THIS IS LEFT OVER FROM ONE_TAB CHANNEL CONTENT\n\nvar makeSelectTotalPagesInChannelSearch = function makeSelectTotalPagesInChannelSearch(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectClaimsById, selectAllClaimsByChannel, function (byId, allClaims) {\n    var byChannel = allClaims[uri] || {};\n    return byChannel['pageCount'];\n  });\n};\nvar selectIsLivestreamClaimForUri = function selectIsLivestreamClaimForUri(state, uri) {\n  var claim = selectClaimForUri(state, uri);\n  return Object(util_claim__WEBPACK_IMPORTED_MODULE_7__[\"isStreamPlaceholderClaim\"])(claim);\n};\nvar selectMetadataForUri = function selectMetadataForUri(state, uri) {\n  var claim = selectClaimForUri(state, uri);\n  var metadata = claim && claim.value;\n  return metadata || (claim === undefined ? undefined : null);\n};\nvar makeSelectMetadataForUri = function makeSelectMetadataForUri(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(makeSelectClaimForUri(uri), function (claim) {\n    var metadata = claim && claim.value;\n    return metadata || (claim === undefined ? undefined : null);\n  });\n};\nvar makeSelectMetadataItemForUri = function makeSelectMetadataItemForUri(uri, key) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(makeSelectMetadataForUri(uri), function (metadata) {\n    if (metadata && metadata.tags && key === 'tags') {\n      return metadata.tags ? metadata.tags.filter(function (tag) {\n        return !constants_tags__WEBPACK_IMPORTED_MODULE_9__[\"INTERNAL_TAGS\"].includes(tag);\n      }) : [];\n    }\n\n    return metadata ? metadata[key] : undefined;\n  });\n};\nvar selectTitleForUri = function selectTitleForUri(state, uri) {\n  var metadata = selectMetadataForUri(state, uri);\n  return metadata && metadata.title;\n};\nvar selectDateForUri = Object(re_reselect__WEBPACK_IMPORTED_MODULE_6__[\"createCachedSelector\"])(selectClaimForUri, // input: (state, uri, ?returnRepost)\nfunction (claim) {\n  var timestamp = claim && claim.value && (claim.value.release_time ? claim.value.release_time * 1000 : claim.meta && claim.meta.creation_timestamp ? claim.meta.creation_timestamp * 1000 : null);\n\n  if (!timestamp) {\n    return undefined;\n  }\n\n  var dateObj = new Date(timestamp);\n  return dateObj;\n})(function (state, uri) {\n  return String(uri);\n});\nvar makeSelectAmountForUri = function makeSelectAmountForUri(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(makeSelectClaimForUri(uri), function (claim) {\n    return claim && claim.amount;\n  });\n};\nvar makeSelectEffectiveAmountForUri = function makeSelectEffectiveAmountForUri(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(makeSelectClaimForUri(uri, false), function (claim) {\n    return claim && claim.meta && typeof claim.meta.effective_amount === 'string' && Number(claim.meta.effective_amount);\n  });\n};\nvar makeSelectContentTypeForUri = function makeSelectContentTypeForUri(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(makeSelectClaimForUri(uri), function (claim) {\n    var isLivestreamClaim = Object(util_claim__WEBPACK_IMPORTED_MODULE_7__[\"isStreamPlaceholderClaim\"])(claim);\n    if (isLivestreamClaim) return 'livestream';\n    var source = claim && claim.value && claim.value.source;\n    return source ? source.media_type : undefined;\n  });\n};\nvar selectThumbnailForUri = function selectThumbnailForUri(state, uri) {\n  var claim = selectClaimForUri(state, uri);\n  return Object(util_claim__WEBPACK_IMPORTED_MODULE_7__[\"getThumbnailFromClaim\"])(claim);\n};\nvar selectThumbnailForId = function selectThumbnailForId(state, claimId) {\n  var claim = selectClaimForId(state, claimId);\n  return Object(util_claim__WEBPACK_IMPORTED_MODULE_7__[\"getThumbnailFromClaim\"])(claim);\n};\nvar makeSelectCoverForUri = function makeSelectCoverForUri(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(makeSelectClaimForUri(uri), function (claim) {\n    if (claim && claim.value.cover) {\n      var cover = claim && claim.value && claim.value.cover;\n      return cover && cover.url ? cover.url.trim().replace(/^http:\\/\\//i, 'https://') : undefined;\n    } else {\n      var _cover = claim && claim.signing_channel && claim.signing_channel.value && claim.signing_channel.value.cover;\n\n      return _cover && _cover.url ? _cover.url.trim().replace(/^http:\\/\\//i, 'https://') : undefined;\n    }\n  });\n};\nvar makeSelectAvatarForUri = function makeSelectAvatarForUri(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(makeSelectClaimForUri(uri), function (claim) {\n    if (claim && claim.value.cover) {\n      var avatar = claim && claim.value && claim.value.thumbnail && claim.value.thumbnail;\n      return avatar && avatar.url ? avatar.url.trim().replace(/^http:\\/\\//i, 'https://') : undefined;\n    } else {\n      var _avatar = claim && claim.signing_channel && claim.signing_channel.value && claim.signing_channel.value.thumbnail && claim.signing_channel.value.thumbnail;\n\n      return _avatar && _avatar.url ? _avatar.url.trim().replace(/^http:\\/\\//i, 'https://') : false;\n    }\n  });\n};\nvar selectIsFetchingClaimListMine = function selectIsFetchingClaimListMine(state) {\n  return selectState(state).isFetchingClaimListMine;\n};\nvar selectMyClaimsPage = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectState, function (state) {\n  return state.myClaimsPageResults || [];\n});\nvar selectMyClaimsPageNumber = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectState, function (state) {\n  return state.claimListMinePage && state.claimListMinePage.items || [];\n}, function (state) {\n  return state.txoPage && state.txoPage.page || 1;\n});\nvar selectMyClaimsPageItemCount = function selectMyClaimsPageItemCount(state) {\n  return selectState(state).myClaimsPageTotalResults || 1;\n};\nvar selectFetchingMyClaimsPageError = function selectFetchingMyClaimsPageError(state) {\n  return selectState(state).fetchingClaimListMinePageError;\n};\nvar selectMyClaims = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectMyActiveClaims, selectClaimsById, selectAbandoningIds, function (myClaimIds, byId, abandoningIds) {\n  var claims = [];\n  myClaimIds.forEach(function (id) {\n    var claim = byId[id];\n    if (claim && abandoningIds.indexOf(id) === -1) claims.push(claim);\n  });\n  return [].concat(claims);\n});\nvar selectMyClaimsWithoutChannels = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectMyClaims, function (myClaims) {\n  return myClaims.filter(function (claim) {\n    return claim && !claim.name.match(/^@/);\n  }).sort(function (a, b) {\n    return a.timestamp - b.timestamp;\n  });\n});\nvar selectMyClaimUrisWithoutChannels = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectMyClaimsWithoutChannels, function (myClaims) {\n  return myClaims.sort(function (a, b) {\n    if (a.height < 1) {\n      return -1;\n    } else if (b.height < 1) {\n      return 1;\n    } else {\n      return b.timestamp - a.timestamp;\n    }\n  }).map(function (claim) {\n    return claim.canonical_url || claim.permanent_url;\n  });\n});\nvar selectAllMyClaimsByOutpoint = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectMyClaimsRaw, function (claims) {\n  return new Set(claims && claims.length ? claims.map(function (claim) {\n    return \"\".concat(claim.txid, \":\").concat(claim.nout);\n  }) : null);\n});\nvar selectMyClaimsOutpoints = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectMyClaims, function (myClaims) {\n  var outpoints = [];\n  myClaims.forEach(function (claim) {\n    return outpoints.push(\"\".concat(claim.txid, \":\").concat(claim.nout));\n  });\n  return outpoints;\n});\nvar selectFetchingMyChannels = function selectFetchingMyChannels(state) {\n  return selectState(state).fetchingMyChannels;\n};\nvar selectIsFetchingMyCollections = function selectIsFetchingMyCollections(state) {\n  return selectState(state).isFetchingMyCollections;\n};\nvar selectMyChannelClaimsById = function selectMyChannelClaimsById(state) {\n  return selectState(state).myChannelClaimsById;\n};\nvar selectMyChannelClaims = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectMyChannelClaimsById, function (myChannelClaimsById) {\n  return myChannelClaimsById && Object.values(myChannelClaimsById);\n});\nvar selectMyChannelClaimIds = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectMyChannelClaimsById, function (myChannelClaimsById) {\n  return myChannelClaimsById && Object.keys(myChannelClaimsById);\n});\nvar selectIsChannelMineForClaimId = function selectIsChannelMineForClaimId(state, channelId) {\n  var myChannelClaimIds = selectMyChannelClaimIds(state);\n  return Boolean(myChannelClaimIds && myChannelClaimIds.includes(channelId));\n};\nvar selectMyChannelClaimUrls = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectMyChannelClaims, function (myChannelClaims) {\n  return myChannelClaims && myChannelClaims.map(function (_ref) {\n    var permanent_url = _ref.permanent_url;\n    return permanent_url;\n  });\n});\nvar selectHasChannels = function selectHasChannels(state) {\n  var myChannelClaimIds = selectMyChannelClaimIds(state);\n  return myChannelClaimIds ? myChannelClaimIds.length > 0 : false;\n};\nvar selectMyCollectionIds = function selectMyCollectionIds(state) {\n  return selectState(state).myCollectionClaims;\n};\nvar selectResolvingUris = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectState, function (state) {\n  return state.resolvingUris || [];\n});\nvar selectChannelImportPending = function selectChannelImportPending(state) {\n  return selectState(state).pendingChannelImport;\n};\nvar selectIsUriResolving = function selectIsUriResolving(state, uri) {\n  var resolvingUris = selectResolvingUris(state);\n  return resolvingUris && resolvingUris.includes(uri);\n};\nvar selectChannelClaimCounts = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectState, function (state) {\n  return state.channelClaimCounts || {};\n});\nvar makeSelectPendingClaimForUri = function makeSelectPendingClaimForUri(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectPendingClaimsById, function (pendingById) {\n    var uriStreamName;\n    var uriChannelName;\n\n    try {\n      var _parseURI = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_1__[\"parseURI\"])(uri);\n\n      uriStreamName = _parseURI.streamName;\n      uriChannelName = _parseURI.channelName;\n    } catch (e) {\n      return null;\n    }\n\n    var pendingClaims = Object.values(pendingById);\n    var matchingClaim = pendingClaims.find(function (claim) {\n      return claim.normalized_name === uriChannelName || claim.normalized_name === uriStreamName;\n    });\n    return matchingClaim || null;\n  });\n};\nvar makeSelectTotalItemsForChannel = function makeSelectTotalItemsForChannel(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectChannelClaimCounts, function (byUri) {\n    return byUri && byUri[Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_1__[\"normalizeURI\"])(uri)];\n  });\n};\nvar makeSelectTotalPagesForChannel = function makeSelectTotalPagesForChannel(uri) {\n  var pageSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectChannelClaimCounts, function (byUri) {\n    return byUri && byUri[uri] && Math.ceil(byUri[Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_1__[\"normalizeURI\"])(uri)] / pageSize);\n  });\n};\nvar makeSelectNsfwCountFromUris = function makeSelectNsfwCountFromUris(uris) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectClaimsByUri, function (claims) {\n    return uris.reduce(function (acc, uri) {\n      var claim = claims[uri];\n\n      if (claim && Object(util_claim__WEBPACK_IMPORTED_MODULE_7__[\"isClaimNsfw\"])(claim)) {\n        return acc + 1;\n      }\n\n      return acc;\n    }, 0);\n  });\n};\nvar makeSelectOmittedCountForChannel = function makeSelectOmittedCountForChannel(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(makeSelectTotalItemsForChannel(uri), makeSelectTotalClaimsInChannelSearch(uri), function (claimsInChannel, claimsInSearch) {\n    if (claimsInChannel && typeof claimsInSearch === 'number' && claimsInSearch >= 0) {\n      return claimsInChannel - claimsInSearch;\n    } else return 0;\n  });\n};\nvar selectClaimIsNsfwForUri = Object(re_reselect__WEBPACK_IMPORTED_MODULE_6__[\"createCachedSelector\"])(selectClaimForUri, // Eventually these will come from some list of tags that are considered adult\n// Or possibly come from users settings of what tags they want to hide\n// For now, there is just a hard coded list of tags inside `isClaimNsfw`\n// selectNaughtyTags(),\nfunction (claim) {\n  return claim ? Object(util_claim__WEBPACK_IMPORTED_MODULE_7__[\"isClaimNsfw\"])(claim) : false;\n})(function (state, uri) {\n  return String(uri);\n});\nvar selectChannelForUri = function selectChannelForUri(state, uri) {\n  var claim = selectClaimForUri(state, uri);\n  return Object(util_claim__WEBPACK_IMPORTED_MODULE_7__[\"getChannelFromClaim\"])(claim);\n};\nvar selectChannelTitleForUri = function selectChannelTitleForUri(state, uri) {\n  var channel = selectChannelForUri(state, uri);\n  return Object(util_claim__WEBPACK_IMPORTED_MODULE_7__[\"getChannelTitleFromClaim\"])(channel);\n};\nvar selectChannelNameForId = function selectChannelNameForId(state, claimId) {\n  var uri = selectClaimUriForId(state, claimId);\n  return selectChannelForClaimUri(state, uri);\n};\nvar selectChannelForClaimUri = Object(re_reselect__WEBPACK_IMPORTED_MODULE_6__[\"createCachedSelector\"])(function (state, uri, includePrefix) {\n  return includePrefix;\n}, selectClaimForUri, function (includePrefix, claim) {\n  if (!claim || !claim.signing_channel || !claim.is_channel_signature_valid) {\n    return null;\n  }\n\n  var _claim$signing_channe = claim.signing_channel,\n      canonicalUrl = _claim$signing_channe.canonical_url,\n      permanentUrl = _claim$signing_channe.permanent_url;\n\n  if (canonicalUrl) {\n    return includePrefix ? canonicalUrl : canonicalUrl.slice('lbry://'.length);\n  } else {\n    return includePrefix ? permanentUrl : permanentUrl.slice('lbry://'.length);\n  }\n})(function (state, uri, includePrefix) {\n  return \"\".concat(String(uri), \":\").concat(String(includePrefix));\n});\nvar selectChannelNameForClaimUri = function selectChannelNameForClaimUri(state, uri) {\n  var channel = selectChannelForClaimUri(state, uri);\n  return Object(util_claim__WEBPACK_IMPORTED_MODULE_7__[\"getNameFromClaim\"])(channel);\n}; // Returns the associated channel uri for a given claim uri\n// accepts a regular claim uri lbry://something\n// returns the channel uri that created this claim lbry://@channel\n\nvar makeSelectChannelForClaimUri = function makeSelectChannelForClaimUri(uri) {\n  var includePrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(makeSelectClaimForUri(uri), function (claim) {\n    if (!claim || !claim.signing_channel || !claim.is_channel_signature_valid) {\n      return null;\n    }\n\n    var _claim$signing_channe2 = claim.signing_channel,\n        canonicalUrl = _claim$signing_channe2.canonical_url,\n        permanentUrl = _claim$signing_channe2.permanent_url;\n\n    if (canonicalUrl) {\n      return includePrefix ? canonicalUrl : canonicalUrl.slice('lbry://'.length);\n    } else {\n      return includePrefix ? permanentUrl : permanentUrl.slice('lbry://'.length);\n    }\n  });\n};\nvar makeSelectChannelPermUrlForClaimUri = function makeSelectChannelPermUrlForClaimUri(uri) {\n  var includePrefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(makeSelectClaimForUri(uri), function (claim) {\n    if (claim && claim.value_type === 'channel') {\n      return claim.permanent_url;\n    }\n\n    if (!claim || !claim.signing_channel || !claim.is_channel_signature_valid) {\n      return null;\n    }\n\n    return claim.signing_channel.permanent_url;\n  });\n};\nvar makeSelectMyChannelPermUrlForName = function makeSelectMyChannelPermUrlForName(name) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectMyChannelClaims, function (claims) {\n    var matchingClaim = claims && claims.find(function (claim) {\n      return claim.name === name;\n    });\n    return matchingClaim ? matchingClaim.permanent_url : null;\n  });\n};\nvar selectTagsForUri = Object(re_reselect__WEBPACK_IMPORTED_MODULE_6__[\"createCachedSelector\"])(selectMetadataForUri, function (metadata) {\n  return metadata && metadata.tags ? metadata.tags.filter(function (tag) {\n    return !constants_tags__WEBPACK_IMPORTED_MODULE_9__[\"INTERNAL_TAGS\"].includes(tag);\n  }) : [];\n})(function (state, uri) {\n  return String(uri);\n});\nvar selectPurchaseTagForUri = Object(re_reselect__WEBPACK_IMPORTED_MODULE_6__[\"createCachedSelector\"])(selectMetadataForUri, function (metadata) {\n  var matchingTag = metadata && metadata.tags && metadata.tags.find(function (tag) {\n    return tag.includes('purchase:');\n  });\n  if (matchingTag) return matchingTag.slice(9);\n})(function (state, uri) {\n  return String(uri);\n});\nvar selectPreorderTagForUri = Object(re_reselect__WEBPACK_IMPORTED_MODULE_6__[\"createCachedSelector\"])(selectMetadataForUri, function (metadata) {\n  var matchingTag = metadata && metadata.tags && metadata.tags.find(function (tag) {\n    return tag.includes('preorder:');\n  });\n  if (matchingTag) return matchingTag.slice(9);\n})(function (state, uri) {\n  return String(uri);\n});\nvar selectRentalTagForUri = Object(re_reselect__WEBPACK_IMPORTED_MODULE_6__[\"createCachedSelector\"])(selectMetadataForUri, function (metadata) {\n  var matchingTag = metadata && metadata.tags && metadata.tags.find(function (tag) {\n    return tag.includes('rental:');\n  });\n\n  if (matchingTag) {\n    var trimmedTag = matchingTag.slice(7);\n    var tags = trimmedTag.split(':');\n\n    if (tags && tags.length === 2) {\n      return {\n        price: tags[0],\n        expirationTimeInSeconds: tags[1]\n      };\n    }\n  }\n})(function (state, uri) {\n  return String(uri);\n});\nvar selectPreorderContentClaimIdForUri = Object(re_reselect__WEBPACK_IMPORTED_MODULE_6__[\"createCachedSelector\"])(selectMetadataForUri, function (metadata) {\n  var matchingTag = metadata && metadata.tags && metadata.tags.find(function (tag) {\n    return tag.includes('full upload:');\n  });\n  if (matchingTag) return matchingTag.slice(12);\n})(function (state, uri) {\n  return String(uri);\n});\nvar selectFetchingClaimSearchByQuery = function selectFetchingClaimSearchByQuery(state) {\n  return selectState(state).fetchingClaimSearchByQuery || {};\n};\nvar selectFetchingClaimSearch = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectFetchingClaimSearchByQuery, function (fetchingClaimSearchByQuery) {\n  return Boolean(Object.keys(fetchingClaimSearchByQuery).length);\n});\nvar selectClaimSearchByQuery = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectState, function (state) {\n  return state.claimSearchByQuery || {};\n});\nvar selectClaimSearchByQueryLastPageReached = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectState, function (state) {\n  return state.claimSearchByQueryLastPageReached || {};\n});\nvar selectShortUrlForUri = function selectShortUrlForUri(state, uri) {\n  var claim = selectClaimForUri(state, uri);\n  return claim && claim.short_url;\n};\nvar selectCanonicalUrlForUri = function selectCanonicalUrlForUri(state, uri) {\n  var claim = selectClaimForUri(state, uri);\n  return claim && claim.canonical_url;\n};\nvar selectPermanentUrlForUri = function selectPermanentUrlForUri(state, uri) {\n  var claim = selectClaimForUri(state, uri);\n  return claim && claim.permanent_url;\n};\nvar makeSelectSupportsForUri = function makeSelectSupportsForUri(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(redux_selectors_wallet__WEBPACK_IMPORTED_MODULE_4__[\"selectSupportsByOutpoint\"], makeSelectClaimForUri(uri), function (byOutpoint, claim) {\n    if (!claim || !claim.is_my_output) {\n      return null;\n    }\n\n    var claimId = claim.claim_id;\n    var total = 0;\n    Object.values(byOutpoint).forEach(function (support) {\n      // $FlowFixMe\n      var claim_id = support.claim_id,\n          amount = support.amount;\n      total = claim_id === claimId && amount ? total + parseFloat(amount) : total;\n    });\n    return total;\n  });\n};\nvar selectUpdatingChannel = function selectUpdatingChannel(state) {\n  return selectState(state).updatingChannel;\n};\nvar selectUpdateChannelError = function selectUpdateChannelError(state) {\n  return selectState(state).updateChannelError;\n};\nvar makeSelectReflectingClaimForUri = function makeSelectReflectingClaimForUri(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectClaimIdsByUri, selectReflectingById, function (claimIdsByUri, reflectingById) {\n    var claimId = claimIdsByUri[Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_1__[\"normalizeURI\"])(uri)];\n    return reflectingById[claimId];\n  });\n};\nvar makeSelectMyStreamUrlsForPage = function makeSelectMyStreamUrlsForPage() {\n  var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectMyClaimUrisWithoutChannels, function (urls) {\n    var start = (Number(page) - 1) * Number(constants_claim__WEBPACK_IMPORTED_MODULE_8__[\"PAGE_SIZE\"]);\n    var end = Number(page) * Number(constants_claim__WEBPACK_IMPORTED_MODULE_8__[\"PAGE_SIZE\"]);\n    return urls && urls.length ? urls.slice(start, end) : [];\n  });\n};\nvar selectMyStreamUrlsCount = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectMyClaimUrisWithoutChannels, function (channels) {\n  return channels.length;\n});\nvar makeSelectTagInClaimOrChannelForUri = function makeSelectTagInClaimOrChannelForUri(uri, tag) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(makeSelectClaimForUri(uri), function (claim) {\n    var claimTags = claim && claim.value && claim.value.tags || [];\n    var channelTags = claim && claim.signing_channel && claim.signing_channel.value && claim.signing_channel.value.tags || [];\n    return claimTags.includes(tag) || channelTags.includes(tag);\n  });\n};\nvar makeSelectClaimHasSource = function makeSelectClaimHasSource(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(makeSelectClaimForUri(uri), function (claim) {\n    if (!claim) {\n      return false;\n    }\n\n    return Boolean(claim.value.source);\n  });\n};\nvar selectIsStreamPlaceholderForUri = function selectIsStreamPlaceholderForUri(state, uri) {\n  var claim = selectClaimForUri(state, uri);\n  return Object(util_claim__WEBPACK_IMPORTED_MODULE_7__[\"isStreamPlaceholderClaim\"])(claim);\n};\nvar selectTotalStakedAmountForChannelUri = Object(re_reselect__WEBPACK_IMPORTED_MODULE_6__[\"createCachedSelector\"])(selectClaimForUri, function (claim) {\n  if (!claim || !claim.amount || !claim.meta || !claim.meta.support_amount) {\n    return 0;\n  }\n\n  return parseFloat(claim.amount) + parseFloat(claim.meta.support_amount) || 0;\n})(function (state, uri) {\n  return String(uri);\n});\nvar selectStakedLevelForChannelUri = Object(re_reselect__WEBPACK_IMPORTED_MODULE_6__[\"createCachedSelector\"])(selectTotalStakedAmountForChannelUri, function (amount) {\n  var level = 1;\n\n  switch (true) {\n    case amount >= constants_claim__WEBPACK_IMPORTED_MODULE_8__[\"LEVEL_2_STAKED_AMOUNT\"] && amount < constants_claim__WEBPACK_IMPORTED_MODULE_8__[\"LEVEL_3_STAKED_AMOUNT\"]:\n      level = 2;\n      break;\n\n    case amount >= constants_claim__WEBPACK_IMPORTED_MODULE_8__[\"LEVEL_3_STAKED_AMOUNT\"] && amount < constants_claim__WEBPACK_IMPORTED_MODULE_8__[\"LEVEL_4_STAKED_AMOUNT\"]:\n      level = 3;\n      break;\n\n    case amount >= constants_claim__WEBPACK_IMPORTED_MODULE_8__[\"LEVEL_4_STAKED_AMOUNT\"] && amount < constants_claim__WEBPACK_IMPORTED_MODULE_8__[\"LEVEL_5_STAKED_AMOUNT\"]:\n      level = 4;\n      break;\n\n    case amount >= constants_claim__WEBPACK_IMPORTED_MODULE_8__[\"LEVEL_5_STAKED_AMOUNT\"]:\n      level = 5;\n      break;\n  }\n\n  return level;\n})(function (state, uri) {\n  return String(uri);\n});\nvar selectUpdatingCollection = function selectUpdatingCollection(state) {\n  return selectState(state).updatingCollection;\n};\nvar selectUpdateCollectionError = function selectUpdateCollectionError(state) {\n  return selectState(state).updateCollectionError;\n};\nvar selectCreatingCollection = function selectCreatingCollection(state) {\n  return selectState(state).creatingCollection;\n};\nvar selectCreateCollectionError = function selectCreateCollectionError(state) {\n  return selectState(state).createCollectionError;\n};\nvar selectIsMyChannelCountOverLimit = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectMyChannelClaimIds, redux_selectors_user__WEBPACK_IMPORTED_MODULE_3__[\"selectYoutubeChannels\"], function (myClaimIds, ytChannels) {\n  if (myClaimIds) {\n    if (ytChannels && ytChannels.length > 0) {\n      // $FlowFixMe - null 'ytChannels' already excluded\n      var ids = myClaimIds.filter(function (id) {\n        return !ytChannels.some(function (yt) {\n          return yt.channel_claim_id === id;\n        });\n      });\n      return ids.length > config__WEBPACK_IMPORTED_MODULE_0__[\"CHANNEL_CREATION_LIMIT\"];\n    }\n\n    return myClaimIds.length > config__WEBPACK_IMPORTED_MODULE_0__[\"CHANNEL_CREATION_LIMIT\"];\n  }\n\n  return false;\n});\n/**\n * Given a uri of a channel, check if there is an Odysee membership value.\n * @param state\n * @param uri\n * @returns {*}\n */\n\nvar selectOdyseeMembershipForUri = function selectOdyseeMembershipForUri(state, uri) {\n  var claim = selectClaimForUri(state, uri);\n  var channelId = Object(util_claim__WEBPACK_IMPORTED_MODULE_7__[\"getChannelIdFromClaim\"])(claim);\n  return channelId ? selectOdyseeMembershipForChannelId(state, channelId) : undefined;\n};\n/**\n * Given a channel ID, check if there is an Odysee membership value.\n * @param state\n * @param channelId\n * @returns {*}\n */\n\nvar selectOdyseeMembershipForChannelId = function selectOdyseeMembershipForChannelId(state, channelId) {\n  // TODO: should access via selector, not from `state` directly.\n  return state.user && state.user.odyseeMembershipsPerClaimIds && state.user.odyseeMembershipsPerClaimIds[channelId];\n};\nvar selectGeoRestrictionForUri = Object(re_reselect__WEBPACK_IMPORTED_MODULE_6__[\"createCachedSelector\"])(selectClaimForUri, redux_selectors_blocked__WEBPACK_IMPORTED_MODULE_2__[\"selectGeoBlockLists\"], redux_selectors_user__WEBPACK_IMPORTED_MODULE_3__[\"selectUserLocale\"], function (claim, geoBlockLists, locale) {\n  return Object(util_geoRestriction__WEBPACK_IMPORTED_MODULE_10__[\"getGeoRestrictionForClaim\"])(claim, locale, geoBlockLists);\n})(function (state, uri) {\n  return String(uri);\n});\nvar selectClaimRepostedAmountForUri = function selectClaimRepostedAmountForUri(state, uri) {\n  var claim = selectClaimForUri(state);\n  return Object(util_claim__WEBPACK_IMPORTED_MODULE_7__[\"getClaimRepostedAmount\"])(claim);\n};\nvar selectTakeOverAmountForName = function selectTakeOverAmountForName(state, name) {\n  if (!name) {\n    return null;\n  }\n\n  var shortUri = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_1__[\"buildURI\"])({\n    streamName: name\n  });\n  var winningClaim = selectClaimForUri(state, shortUri);\n  return winningClaim ? winningClaim.meta.effective_amount || winningClaim.amount : null;\n};\nvar selectMyPurchasedClaims = Object(reselect__WEBPACK_IMPORTED_MODULE_5__[\"createSelector\"])(selectState, function (state) {\n  return state.myPurchasedClaims || [];\n});\nvar selectPurchaseMadeForClaimId = function selectPurchaseMadeForClaimId(state, claimId) {\n  var purchasedClaims = selectMyPurchasedClaims(state);\n  return purchasedClaims.some(function (p) {\n    return (p.reference_claim_id === claimId || p.target_claim_id === claimId) && p.type !== 'rental';\n  });\n};\nvar selectValidRentalPurchaseForClaimId = function selectValidRentalPurchaseForClaimId(state, claimId) {\n  var purchasedClaims = selectMyPurchasedClaims(state);\n  var validRentalClaimForClaimId = purchasedClaims.find(function (purchase) {\n    return purchase.target_claim_id === claimId && purchase.type === 'rental' && new Date(purchase.valid_through) > new Date() // expiry date is sometime in the future\n    ;\n  });\n  return validRentalClaimForClaimId;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvcmVkdXgvc2VsZWN0b3JzL2NsYWltcy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi91aS9yZWR1eC9zZWxlY3RvcnMvY2xhaW1zLmpzPzI1NmQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcbmltcG9ydCB7IENIQU5ORUxfQ1JFQVRJT05fTElNSVQgfSBmcm9tICdjb25maWcnO1xuaW1wb3J0IHsgbm9ybWFsaXplVVJJLCBwYXJzZVVSSSwgaXNVUklWYWxpZCwgYnVpbGRVUkkgfSBmcm9tICd1dGlsL2xicnlVUkknO1xuaW1wb3J0IHsgc2VsZWN0R2VvQmxvY2tMaXN0cyB9IGZyb20gJ3JlZHV4L3NlbGVjdG9ycy9ibG9ja2VkJztcbmltcG9ydCB7IHNlbGVjdFVzZXJMb2NhbGUsIHNlbGVjdFlvdXR1YmVDaGFubmVscyB9IGZyb20gJ3JlZHV4L3NlbGVjdG9ycy91c2VyJztcbmltcG9ydCB7IHNlbGVjdFN1cHBvcnRzQnlPdXRwb2ludCB9IGZyb20gJ3JlZHV4L3NlbGVjdG9ycy93YWxsZXQnO1xuaW1wb3J0IHsgY3JlYXRlU2VsZWN0b3IgfSBmcm9tICdyZXNlbGVjdCc7XG5pbXBvcnQgeyBjcmVhdGVDYWNoZWRTZWxlY3RvciB9IGZyb20gJ3JlLXJlc2VsZWN0JztcbmltcG9ydCB7XG4gIGlzQ2xhaW1Oc2Z3LFxuICBmaWx0ZXJDbGFpbXMsXG4gIGdldENoYW5uZWxJZEZyb21DbGFpbSxcbiAgaXNTdHJlYW1QbGFjZWhvbGRlckNsYWltLFxuICBnZXRUaHVtYm5haWxGcm9tQ2xhaW0sXG4gIGdldENsYWltUmVwb3N0ZWRBbW91bnQsXG4gIGdldE5hbWVGcm9tQ2xhaW0sXG4gIGdldENoYW5uZWxGcm9tQ2xhaW0sXG4gIGdldENoYW5uZWxUaXRsZUZyb21DbGFpbSxcbiAgZ2V0Q2hhbm5lbE5hbWVGcm9tQ2xhaW0sXG4gIGdldENoYW5uZWxQZXJtYW5lbnRVcmxGcm9tQ2xhaW0sXG59IGZyb20gJ3V0aWwvY2xhaW0nO1xuaW1wb3J0ICogYXMgQ0xBSU0gZnJvbSAnY29uc3RhbnRzL2NsYWltJztcbmltcG9ydCB7IElOVEVSTkFMX1RBR1MgfSBmcm9tICdjb25zdGFudHMvdGFncyc7XG5pbXBvcnQgeyBnZXRHZW9SZXN0cmljdGlvbkZvckNsYWltIH0gZnJvbSAndXRpbC9nZW9SZXN0cmljdGlvbic7XG5cbnR5cGUgU3RhdGUgPSB7IGNsYWltczogYW55LCB1c2VyOiBVc2VyU3RhdGUgfTtcblxuY29uc3Qgc2VsZWN0U3RhdGUgPSAoc3RhdGU6IFN0YXRlKSA9PiBzdGF0ZS5jbGFpbXMgfHwge307XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RCeUlkID0gKHN0YXRlOiBTdGF0ZSkgPT4gc2VsZWN0U3RhdGUoc3RhdGUpLmJ5SWQgfHwge307XG5leHBvcnQgY29uc3Qgc2VsZWN0UGVuZGluZ0NsYWltc0J5SWQgPSAoc3RhdGU6IFN0YXRlKSA9PiBzZWxlY3RTdGF0ZShzdGF0ZSkucGVuZGluZ0J5SWQgfHwge307XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RDbGFpbXNCeUlkID0gKHN0YXRlOiBTdGF0ZSkgPT4ge1xuICBjb25zdCBieUlkID0gc2VsZWN0QnlJZChzdGF0ZSk7XG4gIGNvbnN0IHBlbmRpbmdCeUlkID0gc2VsZWN0UGVuZGluZ0NsYWltc0J5SWQoc3RhdGUpO1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihieUlkLCBwZW5kaW5nQnlJZCk7IC8vIGRvIEkgbmVlZCBtZXJnZWQgdG8ga2VlcCBtZXRhZGF0YT9cbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RDbGFpbUlkc0J5VXJpID0gKHN0YXRlOiBTdGF0ZSkgPT4gc2VsZWN0U3RhdGUoc3RhdGUpLmNsYWltc0J5VXJpIHx8IHt9O1xuZXhwb3J0IGNvbnN0IHNlbGVjdEN1cnJlbnRDaGFubmVsUGFnZSA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdFN0YXRlKHN0YXRlKS5jdXJyZW50Q2hhbm5lbFBhZ2UgfHwgMTtcbmV4cG9ydCBjb25zdCBzZWxlY3RDcmVhdGluZ0NoYW5uZWwgPSAoc3RhdGU6IFN0YXRlKSA9PiBzZWxlY3RTdGF0ZShzdGF0ZSkuY3JlYXRpbmdDaGFubmVsO1xuZXhwb3J0IGNvbnN0IHNlbGVjdENyZWF0ZUNoYW5uZWxFcnJvciA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdFN0YXRlKHN0YXRlKS5jcmVhdGVDaGFubmVsRXJyb3I7XG5leHBvcnQgY29uc3Qgc2VsZWN0UmVwb3N0TG9hZGluZyA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdFN0YXRlKHN0YXRlKS5yZXBvc3RMb2FkaW5nO1xuZXhwb3J0IGNvbnN0IHNlbGVjdFJlcG9zdEVycm9yID0gKHN0YXRlOiBTdGF0ZSkgPT4gc2VsZWN0U3RhdGUoc3RhdGUpLnJlcG9zdEVycm9yO1xuZXhwb3J0IGNvbnN0IHNlbGVjdExhdGVzdEJ5VXJpID0gKHN0YXRlOiBTdGF0ZSkgPT4gc2VsZWN0U3RhdGUoc3RhdGUpLmxhdGVzdEJ5VXJpO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0TGF0ZXN0Q2xhaW1Gb3JVcmkgPSBjcmVhdGVTZWxlY3RvcihcbiAgKHN0YXRlLCB1cmkpID0+IHVyaSxcbiAgc2VsZWN0TGF0ZXN0QnlVcmksXG4gICh1cmksIGxhdGVzdEJ5VXJpKSA9PiB7XG4gICAgY29uc3QgbGF0ZXN0Q2xhaW0gPSBsYXRlc3RCeVVyaVt1cmldO1xuICAgIGlmICghbGF0ZXN0Q2xhaW0pIHJldHVybiBsYXRlc3RDbGFpbTtcblxuICAgIGNvbnN0IGxhdGVzdENsYWltcyA9IE9iamVjdC52YWx1ZXMobGF0ZXN0Q2xhaW0pO1xuICAgIGlmICghbGF0ZXN0Q2xhaW1zLmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cbiAgICAvLyAkRmxvd0ZpeE1lXG4gICAgcmV0dXJuIGxhdGVzdENsYWltc1swXS5zdHJlYW07XG4gIH1cbik7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RDbGFpbXNCeVVyaSA9IGNyZWF0ZVNlbGVjdG9yKHNlbGVjdENsYWltSWRzQnlVcmksIHNlbGVjdENsYWltc0J5SWQsIChieVVyaSwgYnlJZCkgPT4ge1xuICBjb25zdCBjbGFpbXMgPSB7fTtcblxuICBPYmplY3Qua2V5cyhieVVyaSkuZm9yRWFjaCgodXJpKSA9PiB7XG4gICAgY29uc3QgY2xhaW1JZCA9IGJ5VXJpW3VyaV07XG5cbiAgICAvLyBOT1RFIHJldHVybmluZyBhIG51bGwgY2xhaW0gYWxsb3dzIHVzIHRvIGRpZmZlcmVudGlhdGUgYmV0d2VlbiBhblxuICAgIC8vIHVuZGVmaW5lZCAobmV2ZXIgZmV0Y2hlZCBjbGFpbSkgYW5kIG9uZSB3aGljaCBqdXN0IGRvZXNuJ3QgZXhpc3QuIE5vdFxuICAgIC8vIHRoZSBjbGVhbmVzdCBzb2x1dGlvbiBidXQgY291bGRuJ3QgdGhpbmsgb2YgYW55dGhpbmcgYmV0dGVyIHJpZ2h0IG5vd1xuICAgIGlmIChjbGFpbUlkID09PSBudWxsKSB7XG4gICAgICBjbGFpbXNbdXJpXSA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNsYWltc1t1cmldID0gYnlJZFtjbGFpbUlkXTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBjbGFpbXM7XG59KTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjbGFpbSB3aXRoIHRoZSBzcGVjaWZpZWQgSUQuIFRoZSBjbGFpbSBjb3VsZCBiZSB1bmRlZmluZWQgaWYgZG9lc1xuICogbm90IGV4aXN0IG9yIGhhdmUgbm90IGZldGNoZWQuIFRha2Ugbm90ZSBvZiB0aGUgc2Vjb25kIHBhcmFtZXRlciwgd2hpY2ggbWVhbnNcbiAqIGFuIGlubGluZSBmdW5jdGlvbiBvciBoZWxwZXIgd291bGQgYmUgcmVxdWlyZWQgd2hlbiB1c2VkIGFzIGFuIGlucHV0IHRvXG4gKiAnY3JlYXRlU2VsZWN0b3InLlxuICpcbiAqIEBwYXJhbSBzdGF0ZVxuICogQHBhcmFtIGNsYWltSWRcbiAqIEByZXR1cm5zIHsqfVxuICovXG5leHBvcnQgY29uc3Qgc2VsZWN0Q2xhaW1Gb3JJZCA9IChzdGF0ZTogU3RhdGUsIGNsYWltSWQ6IHN0cmluZykgPT4ge1xuICBjb25zdCBieUlkID0gc2VsZWN0Q2xhaW1zQnlJZChzdGF0ZSk7XG4gIHJldHVybiBieUlkW2NsYWltSWRdO1xufTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdENsYWltVXJpRm9ySWQgPSAoc3RhdGU6IFN0YXRlLCBjbGFpbUlkOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgY2xhaW0gPSBzZWxlY3RDbGFpbUZvcklkKHN0YXRlLCBjbGFpbUlkKTtcbiAgcmV0dXJuIGNsYWltICYmIChjbGFpbS5jYW5vbmljYWxfdXJsIHx8IGNsYWltLnBlcm1hbmVudF91cmwpO1xufTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdENoYW5uZWxQZXJtYW5lbnRVcmlGb3JVcmkgPSAoc3RhdGU6IFN0YXRlLCB1cmk6IHN0cmluZykgPT5cbiAgZ2V0Q2hhbm5lbFBlcm1hbmVudFVybEZyb21DbGFpbShzZWxlY3RDbGFpbUZvclVyaShzdGF0ZSwgdXJpKSk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RBbGxDbGFpbXNCeUNoYW5uZWwgPSBjcmVhdGVTZWxlY3RvcihzZWxlY3RTdGF0ZSwgKHN0YXRlKSA9PiBzdGF0ZS5wYWdpbmF0ZWRDbGFpbXNCeUNoYW5uZWwgfHwge30pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0UGVuZGluZ0lkcyA9IGNyZWF0ZVNlbGVjdG9yKHNlbGVjdFN0YXRlLCAoc3RhdGUpID0+IE9iamVjdC5rZXlzKHN0YXRlLnBlbmRpbmdCeUlkKSB8fCBbXSk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RQZW5kaW5nQ2xhaW1zID0gY3JlYXRlU2VsZWN0b3Ioc2VsZWN0UGVuZGluZ0NsYWltc0J5SWQsIChwZW5kaW5nQnlJZCkgPT4gT2JqZWN0LnZhbHVlcyhwZW5kaW5nQnlJZCkpO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0Q2xhaW1Jc1BlbmRpbmdGb3JJZCA9IChzdGF0ZTogU3RhdGUsIGNsYWltSWQ6IHN0cmluZykgPT4ge1xuICByZXR1cm4gQm9vbGVhbihzZWxlY3RQZW5kaW5nQ2xhaW1zQnlJZChzdGF0ZSlbY2xhaW1JZF0pO1xufTtcblxuZXhwb3J0IGNvbnN0IG1ha2VTZWxlY3RDbGFpbUlzUGVuZGluZyA9ICh1cmk6IHN0cmluZykgPT5cbiAgY3JlYXRlU2VsZWN0b3Ioc2VsZWN0Q2xhaW1JZHNCeVVyaSwgc2VsZWN0UGVuZGluZ0NsYWltc0J5SWQsIChpZHNCeVVyaSwgcGVuZGluZ0J5SWQpID0+IHtcbiAgICBjb25zdCBjbGFpbUlkID0gaWRzQnlVcmlbbm9ybWFsaXplVVJJKHVyaSldO1xuXG4gICAgaWYgKGNsYWltSWQpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKHBlbmRpbmdCeUlkW2NsYWltSWRdKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KTtcblxuZXhwb3J0IGNvbnN0IG1ha2VTZWxlY3RDbGFpbUlkSXNQZW5kaW5nID0gKGNsYWltSWQ6IHN0cmluZykgPT5cbiAgY3JlYXRlU2VsZWN0b3Ioc2VsZWN0UGVuZGluZ0NsYWltc0J5SWQsIChwZW5kaW5nQnlJZCkgPT4ge1xuICAgIHJldHVybiBCb29sZWFuKHBlbmRpbmdCeUlkW2NsYWltSWRdKTtcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RDbGFpbUlkRm9yVXJpID0gKHN0YXRlOiBTdGF0ZSwgdXJpOiBzdHJpbmcpID0+IHNlbGVjdENsYWltSWRzQnlVcmkoc3RhdGUpW3VyaV07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RSZWZsZWN0aW5nQnlJZCA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdFN0YXRlKHN0YXRlKS5yZWZsZWN0aW5nQnlJZDtcblxuLy8gT0JTT0xFVEU6IHVzZSBzZWxlY3RDbGFpbUZvckNsYWltSWQgaW5zdGVhZFxuZXhwb3J0IGNvbnN0IG1ha2VTZWxlY3RDbGFpbUZvckNsYWltSWQgPSAoY2xhaW1JZDogc3RyaW5nKSA9PiBjcmVhdGVTZWxlY3RvcihzZWxlY3RDbGFpbXNCeUlkLCAoYnlJZCkgPT4gYnlJZFtjbGFpbUlkXSk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RDbGFpbUZvckNsYWltSWQgPSAoc3RhdGU6IFN0YXRlLCBjbGFpbUlkOiBzdHJpbmcpID0+IHNlbGVjdENsYWltc0J5SWQoc3RhdGUpW2NsYWltSWRdO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0Q2xhaW1Gb3JVcmkgPSBjcmVhdGVDYWNoZWRTZWxlY3RvcihcbiAgc2VsZWN0Q2xhaW1JZHNCeVVyaSxcbiAgc2VsZWN0Q2xhaW1zQnlJZCxcbiAgKHN0YXRlLCB1cmkpID0+IHVyaSxcbiAgKHN0YXRlLCB1cmksIHJldHVyblJlcG9zdCA9IHRydWUpID0+IHJldHVyblJlcG9zdCxcbiAgKGJ5VXJpLCBieUlkLCB1cmksIHJldHVyblJlcG9zdCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkVXJpID0gaXNVUklWYWxpZCh1cmksIGZhbHNlKTtcblxuICAgIGlmICh2YWxpZFVyaSAmJiBieVVyaSkge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZFVyaSA9IG5vcm1hbGl6ZVVSSSh1cmkpO1xuICAgICAgY29uc3QgY2xhaW1JZCA9IHVyaSAmJiBieVVyaVtub3JtYWxpemVkVXJpXTtcbiAgICAgIGNvbnN0IGNsYWltID0gYnlJZFtjbGFpbUlkXTtcblxuICAgICAgLy8gTWFrZSBzdXJlIHRvIHJldHVybiB0aGUgY2xhaW0gYXMgaXMgc28gYXBwcyBjYW4gY2hlY2sgaWYgaXQncyBiZWVuIHJlc29sdmVkIGJlZm9yZSAobnVsbCkgb3Igc3RpbGwgbmVlZHMgdG8gYmUgcmVzb2x2ZWQgKHVuZGVmaW5lZClcbiAgICAgIGlmIChjbGFpbUlkID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSBlbHNlIGlmIChjbGFpbUlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVwb3N0ZWRDbGFpbSA9IGNsYWltICYmIGNsYWltLnJlcG9zdGVkX2NsYWltO1xuICAgICAgaWYgKHJlcG9zdGVkQ2xhaW0gJiYgcmV0dXJuUmVwb3N0KSB7XG4gICAgICAgIGNvbnN0IGNoYW5uZWxVcmwgPVxuICAgICAgICAgIGNsYWltLnNpZ25pbmdfY2hhbm5lbCAmJiAoY2xhaW0uc2lnbmluZ19jaGFubmVsLmNhbm9uaWNhbF91cmwgfHwgY2xhaW0uc2lnbmluZ19jaGFubmVsLnBlcm1hbmVudF91cmwpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ucmVwb3N0ZWRDbGFpbSxcbiAgICAgICAgICByZXBvc3RfdXJsOiBub3JtYWxpemVkVXJpLFxuICAgICAgICAgIHJlcG9zdF9jaGFubmVsX3VybDogY2hhbm5lbFVybCxcbiAgICAgICAgICByZXBvc3RfYmlkX2Ftb3VudDogY2xhaW0gJiYgY2xhaW0ubWV0YSAmJiBjbGFpbS5tZXRhLmVmZmVjdGl2ZV9hbW91bnQsXG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY2xhaW07XG4gICAgICB9XG4gICAgfVxuICB9XG4pKChzdGF0ZSwgdXJpLCByZXR1cm5SZXBvc3QgPSB0cnVlKSA9PiBgJHtTdHJpbmcodXJpKX06JHtyZXR1cm5SZXBvc3QgPyAnMScgOiAnMCd9YCk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RDbGFpbU91dHBvaW50Rm9yVXJpID0gKHN0YXRlOiBTdGF0ZSwgdXJpOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgY2xhaW0gPSBzZWxlY3RDbGFpbUZvclVyaShzdGF0ZSwgdXJpKTtcbiAgaWYgKCFjbGFpbSkgcmV0dXJuIGNsYWltO1xuXG4gIGNvbnN0IG91dHBvaW50ID0gYCR7Y2xhaW0udHhpZH06JHtjbGFpbS5ub3V0fWA7XG4gIHJldHVybiBvdXRwb2ludDtcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RDaGFubmVsQ2xhaW1JZEZvclVyaSA9IChzdGF0ZTogU3RhdGUsIHVyaTogc3RyaW5nKSA9PlxuICBnZXRDaGFubmVsSWRGcm9tQ2xhaW0oc2VsZWN0Q2xhaW1Gb3JVcmkoc3RhdGUsIHVyaSkpO1xuZXhwb3J0IGNvbnN0IHNlbGVjdENoYW5uZWxOYW1lRm9yVXJpID0gKHN0YXRlOiBTdGF0ZSwgdXJpOiBzdHJpbmcpID0+XG4gIGdldENoYW5uZWxOYW1lRnJvbUNsYWltKHNlbGVjdENsYWltRm9yVXJpKHN0YXRlLCB1cmkpKTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdEhhc0NsYWltRm9yVXJpID0gKHN0YXRlOiBTdGF0ZSwgdXJpOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgY2xhaW0gPSBzZWxlY3RDbGFpbUZvclVyaShzdGF0ZSwgdXJpKTtcbiAgcmV0dXJuIEJvb2xlYW4oY2xhaW0pO1xufTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdEhhc1Jlc29sdmVkQ2xhaW1Gb3JVcmkgPSAoc3RhdGU6IFN0YXRlLCB1cmk6IHN0cmluZykgPT4ge1xuICAvLyBUaGlzIHNlbGVjdG9yIGFzc3VtZXMgdGhhdCBgdXJpYCBpcyBuZXZlciBudWxsIGFuZCBpcyB2YWxpZC4gSXRcbiAgLy8gY2Fubm90IGRpZmZlcmVudGlhdGUgd2hldGhlciB0aGUgdW5kZWZpbmVkIGNsYWltIGlzIGR1ZSB0byBiZWluZ1xuICAvLyB1bnJlc29sdmVkIG9yIGFuIGludmFsaWQgYHVyaWAuIENsaWVudCBiZXdhcmUuXG4gIGNvbnN0IGNsYWltID0gc2VsZWN0Q2xhaW1Gb3JVcmkoc3RhdGUsIHVyaSk7XG4gIHJldHVybiBjbGFpbSAhPT0gdW5kZWZpbmVkO1xufTtcblxuLy8gTm90ZTogdGhpcyBpcyBkZXByZWNhdGVkLiBVc2UgXCJzZWxlY3RDbGFpbUZvclVyaShzdGF0ZSwgdXJpKVwiIGluc3RlYWQuXG5leHBvcnQgY29uc3QgbWFrZVNlbGVjdENsYWltRm9yVXJpID0gKHVyaTogc3RyaW5nLCByZXR1cm5SZXBvc3Q6IGJvb2xlYW4gPSB0cnVlKSA9PlxuICBjcmVhdGVTZWxlY3RvcihzZWxlY3RDbGFpbUlkc0J5VXJpLCBzZWxlY3RDbGFpbXNCeUlkLCAoYnlVcmksIGJ5SWQpID0+IHtcbiAgICBjb25zdCB2YWxpZFVyaSA9IGlzVVJJVmFsaWQodXJpLCBmYWxzZSk7XG5cbiAgICBpZiAodmFsaWRVcmkgJiYgYnlVcmkpIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRVcmkgPSBub3JtYWxpemVVUkkodXJpKTtcbiAgICAgIGNvbnN0IGNsYWltSWQgPSB1cmkgJiYgYnlVcmlbbm9ybWFsaXplZFVyaV07XG4gICAgICBjb25zdCBjbGFpbSA9IGJ5SWRbY2xhaW1JZF07XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSB0byByZXR1cm4gdGhlIGNsYWltIGFzIGlzIHNvIGFwcHMgY2FuIGNoZWNrIGlmIGl0J3MgYmVlbiByZXNvbHZlZCBiZWZvcmUgKG51bGwpIG9yIHN0aWxsIG5lZWRzIHRvIGJlIHJlc29sdmVkICh1bmRlZmluZWQpXG4gICAgICBpZiAoY2xhaW1JZCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoY2xhaW1JZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlcG9zdGVkQ2xhaW0gPSBjbGFpbSAmJiBjbGFpbS5yZXBvc3RlZF9jbGFpbTtcbiAgICAgIGlmIChyZXBvc3RlZENsYWltICYmIHJldHVyblJlcG9zdCkge1xuICAgICAgICBjb25zdCBjaGFubmVsVXJsID1cbiAgICAgICAgICBjbGFpbS5zaWduaW5nX2NoYW5uZWwgJiYgKGNsYWltLnNpZ25pbmdfY2hhbm5lbC5jYW5vbmljYWxfdXJsIHx8IGNsYWltLnNpZ25pbmdfY2hhbm5lbC5wZXJtYW5lbnRfdXJsKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnJlcG9zdGVkQ2xhaW0sXG4gICAgICAgICAgcmVwb3N0X3VybDogbm9ybWFsaXplZFVyaSxcbiAgICAgICAgICByZXBvc3RfY2hhbm5lbF91cmw6IGNoYW5uZWxVcmwsXG4gICAgICAgICAgcmVwb3N0X2JpZF9hbW91bnQ6IGNsYWltICYmIGNsYWltLm1ldGEgJiYgY2xhaW0ubWV0YS5lZmZlY3RpdmVfYW1vdW50LFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNsYWltO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbi8vIFJldHVybnMgeW91ciBjbGFpbSBJRHMgd2l0aG91dCBoYW5kbGluZyBwZW5kaW5nIGFuZCBhYmFuZG9uZWQgY2xhaW1zLlxuZXhwb3J0IGNvbnN0IHNlbGVjdE15Q2xhaW1JZHNSYXcgPSAoc3RhdGU6IFN0YXRlKSA9PiBzZWxlY3RTdGF0ZShzdGF0ZSkubXlDbGFpbXM7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RNeUNsYWltc1JhdyA9IGNyZWF0ZVNlbGVjdG9yKHNlbGVjdFN0YXRlLCBzZWxlY3RDbGFpbXNCeUlkLCAoc3RhdGUsIGJ5SWQpID0+IHtcbiAgY29uc3QgaWRzID0gc3RhdGUubXlDbGFpbXM7XG4gIGlmICghaWRzKSB7XG4gICAgcmV0dXJuIGlkcztcbiAgfVxuXG4gIGNvbnN0IGNsYWltcyA9IFtdO1xuICBpZHMuZm9yRWFjaCgoaWQpID0+IHtcbiAgICBpZiAoYnlJZFtpZF0pIHtcbiAgICAgIC8vIEknbSBub3Qgc3VyZSB3aHkgdGhpcyBjaGVjayBpcyBuZWNlc3NhcnksIGJ1dCBpdCBvdWdodCB0byBiZSBhIHF1aWNrIGZpeCBmb3IgaHR0cHM6Ly9naXRodWIuY29tL2xicnlpby9sYnJ5LWRlc2t0b3AvaXNzdWVzLzU0NFxuICAgICAgY2xhaW1zLnB1c2goYnlJZFtpZF0pO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBjbGFpbXM7XG59KTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdEFiYW5kb25pbmdCeUlkID0gKHN0YXRlOiBTdGF0ZSkgPT4gc2VsZWN0U3RhdGUoc3RhdGUpLmFiYW5kb25pbmdCeUlkIHx8IHt9O1xuZXhwb3J0IGNvbnN0IHNlbGVjdEFiYW5kb25pbmdJZHMgPSBjcmVhdGVTZWxlY3RvcihzZWxlY3RBYmFuZG9uaW5nQnlJZCwgKGFiYW5kb25pbmdCeUlkKSA9PlxuICBPYmplY3Qua2V5cyhhYmFuZG9uaW5nQnlJZClcbik7XG5cbmV4cG9ydCBjb25zdCBtYWtlU2VsZWN0QWJhbmRvbmluZ0NsYWltQnlJZCA9IChjbGFpbUlkOiBzdHJpbmcpID0+XG4gIGNyZWF0ZVNlbGVjdG9yKHNlbGVjdEFiYW5kb25pbmdJZHMsIChpZHMpID0+IGlkcy5pbmNsdWRlcyhjbGFpbUlkKSk7XG5cbmV4cG9ydCBjb25zdCBtYWtlU2VsZWN0SXNBYmFuZG9uaW5nQ2xhaW1Gb3JVcmkgPSAodXJpOiBzdHJpbmcpID0+XG4gIGNyZWF0ZVNlbGVjdG9yKHNlbGVjdENsYWltSWRzQnlVcmksIHNlbGVjdEFiYW5kb25pbmdJZHMsIChjbGFpbUlkc0J5VXJpLCBhYmFuZG9uaW5nQnlJZCkgPT4ge1xuICAgIGNvbnN0IGNsYWltSWQgPSBjbGFpbUlkc0J5VXJpW25vcm1hbGl6ZVVSSSh1cmkpXTtcbiAgICByZXR1cm4gYWJhbmRvbmluZ0J5SWQuaW5kZXhPZihjbGFpbUlkKSA+PSAwO1xuICB9KTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdE15QWN0aXZlQ2xhaW1zID0gY3JlYXRlU2VsZWN0b3IoXG4gIHNlbGVjdE15Q2xhaW1JZHNSYXcsXG4gIHNlbGVjdEFiYW5kb25pbmdJZHMsXG4gIChteUNsYWltSWRzLCBhYmFuZG9uaW5nSWRzKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBTZXQobXlDbGFpbUlkcyAmJiBteUNsYWltSWRzLmZpbHRlcigoY2xhaW1JZCkgPT4gIWFiYW5kb25pbmdJZHMuaW5jbHVkZXMoY2xhaW1JZCkpKTtcbiAgfVxuKTtcblxuLy8gSGVscGVyIGZvciAnc2VsZWN0Q2xhaW1Jc01pbmVGb3JVcmknLlxuLy8gUmV0dXJucyB1bmRlZmluZWQgc3RyaW5nIGlmIHVuYWJsZSB0byBub3JtYWxpemUgb3IgaXMgbm90IHZhbGlkLlxuY29uc3Qgc2VsZWN0Tm9ybWFsaXplZEFuZFZlcmlmaWVkVXJpID0gY3JlYXRlQ2FjaGVkU2VsZWN0b3IoXG4gIChzdGF0ZSwgcmF3VXJpKSA9PiByYXdVcmksXG4gIChyYXdVcmkpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJpID0gbm9ybWFsaXplVVJJKHJhd1VyaSk7XG4gICAgICBpZiAoaXNVUklWYWxpZCh1cmksIGZhbHNlKSkge1xuICAgICAgICByZXR1cm4gdXJpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4pKChzdGF0ZSwgcmF3VXJpKSA9PiBTdHJpbmcocmF3VXJpKSk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RDbGFpbUlzTWluZSA9IChzdGF0ZTogU3RhdGUsIGNsYWltOiA/Q2xhaW0pID0+IHtcbiAgaWYgKGNsYWltKSB7XG4gICAgaWYgKGNsYWltLmlzX215X291dHB1dCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY29uc3Qgc2lnbmluZ0NoYW5uZWxJZCA9IGdldENoYW5uZWxJZEZyb21DbGFpbShjbGFpbSk7XG4gICAgY29uc3QgbXlDaGFubmVsSWRzID0gc2VsZWN0TXlDaGFubmVsQ2xhaW1JZHMoc3RhdGUpO1xuXG4gICAgaWYgKHNpZ25pbmdDaGFubmVsSWQgJiYgbXlDaGFubmVsSWRzKSB7XG4gICAgICBpZiAobXlDaGFubmVsSWRzLmluY2x1ZGVzKHNpZ25pbmdDaGFubmVsSWQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBteUFjdGl2ZUNsYWltcyA9IHNlbGVjdE15QWN0aXZlQ2xhaW1zKHN0YXRlKTtcbiAgICAgIGlmIChjbGFpbS5jbGFpbV9pZCAmJiBteUFjdGl2ZUNsYWltcy5oYXMoY2xhaW0uY2xhaW1faWQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RDbGFpbUlzTWluZUZvclVyaSA9IChzdGF0ZTogU3RhdGUsIHJhd1VyaTogc3RyaW5nKSA9PiB7XG4gIC8vIE5vdCBtZW1vaXppbmcgdGhpcyBzZWxlY3RvciBiZWNhdXNlOlxuICAvLyAoMSkgVGhlIHdvcmtsb2FkIGlzIHNvbWV3aGF0IGxpZ2h0d2VpZ2h0LlxuICAvLyAoMikgU2luY2UgaXQgZGVwZW5kcyBvbiAnc2VsZWN0Q2xhaW1zQnlVcmknLCBtZW1vaXphdGlvbiB3b24ndCB3b3JrIGFueXdheVxuICAvLyBiZWNhdXNlIHRoZSBhcnJheSBpcyBjb25zdGFudGx5IGludmFsaWRhdGVkLlxuXG4gIGNvbnN0IHVyaSA9IHNlbGVjdE5vcm1hbGl6ZWRBbmRWZXJpZmllZFVyaShzdGF0ZSwgcmF3VXJpKTtcbiAgaWYgKCF1cmkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBjbGFpbXNCeVVyaSA9IHNlbGVjdENsYWltc0J5VXJpKHN0YXRlKTtcbiAgcmV0dXJuIHNlbGVjdENsYWltSXNNaW5lKHN0YXRlLCBjbGFpbXNCeVVyaSAmJiBjbGFpbXNCeVVyaVt1cmldKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RNeVB1cmNoYXNlcyA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdFN0YXRlKHN0YXRlKS5teVB1cmNoYXNlcztcbmV4cG9ydCBjb25zdCBzZWxlY3RQdXJjaGFzZVVyaVN1Y2Nlc3MgPSAoc3RhdGU6IFN0YXRlKSA9PiBzZWxlY3RTdGF0ZShzdGF0ZSkucHVyY2hhc2VVcmlTdWNjZXNzO1xuZXhwb3J0IGNvbnN0IHNlbGVjdE15UHVyY2hhc2VzQ291bnQgPSAoc3RhdGU6IFN0YXRlKSA9PiBzZWxlY3RTdGF0ZShzdGF0ZSkubXlQdXJjaGFzZXNQYWdlVG90YWxSZXN1bHRzO1xuZXhwb3J0IGNvbnN0IHNlbGVjdElzRmV0Y2hpbmdNeVB1cmNoYXNlcyA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdFN0YXRlKHN0YXRlKS5mZXRjaGluZ015UHVyY2hhc2VzO1xuZXhwb3J0IGNvbnN0IHNlbGVjdEZldGNoaW5nTXlQdXJjaGFzZXNFcnJvciA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdFN0YXRlKHN0YXRlKS5mZXRjaGluZ015UHVyY2hhc2VzRXJyb3I7XG5cbmV4cG9ydCBjb25zdCBtYWtlU2VsZWN0TXlQdXJjaGFzZXNGb3JQYWdlID0gKHF1ZXJ5OiA/c3RyaW5nLCBwYWdlOiBudW1iZXIgPSAxKSA9PlxuICBjcmVhdGVTZWxlY3RvcihcbiAgICBzZWxlY3RNeVB1cmNoYXNlcyxcbiAgICBzZWxlY3RDbGFpbXNCeVVyaSxcbiAgICAobXlQdXJjaGFzZXM6IEFycmF5PHN0cmluZz4sIGNsYWltc0J5VXJpOiB7IFtzdHJpbmddOiBDbGFpbSB9KSA9PiB7XG4gICAgICBpZiAoIW15UHVyY2hhc2VzKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIGlmICghcXVlcnkpIHtcbiAgICAgICAgLy8gZW5zdXJlIG5vIGR1cGxpY2F0ZXMgZnJvbSBkb3VibGUgcHVyY2hhc2UgYnVnc1xuICAgICAgICAvLyByZXR1cm4gWy4uLm5ldyBTZXQobXlQdXJjaGFzZXMpXTtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20obmV3IFNldChteVB1cmNoYXNlcykpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmaWxlSW5mb3MgPSBteVB1cmNoYXNlcy5tYXAoKHVyaSkgPT4gY2xhaW1zQnlVcmlbdXJpXSk7XG4gICAgICBjb25zdCBtYXRjaGluZ0ZpbGVJbmZvcyA9IGZpbHRlckNsYWltcyhmaWxlSW5mb3MsIHF1ZXJ5KTtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gKE51bWJlcihwYWdlKSAtIDEpICogTnVtYmVyKENMQUlNLlBBR0VfU0laRSk7XG4gICAgICBjb25zdCBlbmQgPSBOdW1iZXIocGFnZSkgKiBOdW1iZXIoQ0xBSU0uUEFHRV9TSVpFKTtcbiAgICAgIHJldHVybiBtYXRjaGluZ0ZpbGVJbmZvcyAmJiBtYXRjaGluZ0ZpbGVJbmZvcy5sZW5ndGhcbiAgICAgICAgPyBtYXRjaGluZ0ZpbGVJbmZvcy5zbGljZShzdGFydCwgZW5kKS5tYXAoKGZpbGVJbmZvKSA9PiBmaWxlSW5mby5jYW5vbmljYWxfdXJsIHx8IGZpbGVJbmZvLnBlcm1hbmVudF91cmwpXG4gICAgICAgIDogW107XG4gICAgfVxuICApO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0Q2xhaW1XYXNQdXJjaGFzZWRGb3JVcmkgPSBjcmVhdGVTZWxlY3RvcihzZWxlY3RDbGFpbUZvclVyaSwgKGNsYWltKSA9PlxuICBCb29sZWFuKGNsYWltPy5wdXJjaGFzZV9yZWNlaXB0ICE9PSB1bmRlZmluZWQpXG4pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0QWxsRmV0Y2hpbmdDaGFubmVsQ2xhaW1zID0gY3JlYXRlU2VsZWN0b3Ioc2VsZWN0U3RhdGUsIChzdGF0ZSkgPT4gc3RhdGUuZmV0Y2hpbmdDaGFubmVsQ2xhaW1zIHx8IHt9KTtcblxuZXhwb3J0IGNvbnN0IG1ha2VTZWxlY3RGZXRjaGluZ0NoYW5uZWxDbGFpbXMgPSAodXJpOiBzdHJpbmcpID0+XG4gIGNyZWF0ZVNlbGVjdG9yKHNlbGVjdEFsbEZldGNoaW5nQ2hhbm5lbENsYWltcywgKGZldGNoaW5nKSA9PiBmZXRjaGluZyAmJiBmZXRjaGluZ1t1cmldKTtcblxuZXhwb3J0IGNvbnN0IG1ha2VTZWxlY3RDbGFpbXNJbkNoYW5uZWxGb3JQYWdlID0gKHVyaTogc3RyaW5nLCBwYWdlPzogbnVtYmVyKSA9PlxuICBjcmVhdGVTZWxlY3RvcihzZWxlY3RDbGFpbXNCeUlkLCBzZWxlY3RBbGxDbGFpbXNCeUNoYW5uZWwsIChieUlkLCBhbGxDbGFpbXMpID0+IHtcbiAgICBjb25zdCBieUNoYW5uZWwgPSBhbGxDbGFpbXNbdXJpXSB8fCB7fTtcbiAgICBjb25zdCBjbGFpbUlkcyA9IGJ5Q2hhbm5lbFtwYWdlIHx8IDFdO1xuXG4gICAgaWYgKCFjbGFpbUlkcykgcmV0dXJuIGNsYWltSWRzO1xuXG4gICAgcmV0dXJuIGNsYWltSWRzLm1hcCgoY2xhaW1JZCkgPT4gYnlJZFtjbGFpbUlkXSk7XG4gIH0pO1xuXG4vLyBUSElTIElTIExFRlQgT1ZFUiBGUk9NIE9ORSBUQUIgQ0hBTk5FTF9DT05URU5UXG5leHBvcnQgY29uc3QgbWFrZVNlbGVjdFRvdGFsQ2xhaW1zSW5DaGFubmVsU2VhcmNoID0gKHVyaTogc3RyaW5nKSA9PlxuICBjcmVhdGVTZWxlY3RvcihzZWxlY3RDbGFpbXNCeUlkLCBzZWxlY3RBbGxDbGFpbXNCeUNoYW5uZWwsIChieUlkLCBhbGxDbGFpbXMpID0+IHtcbiAgICBjb25zdCBieUNoYW5uZWwgPSBhbGxDbGFpbXNbdXJpXSB8fCB7fTtcbiAgICByZXR1cm4gYnlDaGFubmVsWydpdGVtQ291bnQnXTtcbiAgfSk7XG5cbi8vIFRISVMgSVMgTEVGVCBPVkVSIEZST00gT05FX1RBQiBDSEFOTkVMIENPTlRFTlRcbmV4cG9ydCBjb25zdCBtYWtlU2VsZWN0VG90YWxQYWdlc0luQ2hhbm5lbFNlYXJjaCA9ICh1cmk6IHN0cmluZykgPT5cbiAgY3JlYXRlU2VsZWN0b3Ioc2VsZWN0Q2xhaW1zQnlJZCwgc2VsZWN0QWxsQ2xhaW1zQnlDaGFubmVsLCAoYnlJZCwgYWxsQ2xhaW1zKSA9PiB7XG4gICAgY29uc3QgYnlDaGFubmVsID0gYWxsQ2xhaW1zW3VyaV0gfHwge307XG4gICAgcmV0dXJuIGJ5Q2hhbm5lbFsncGFnZUNvdW50J107XG4gIH0pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0SXNMaXZlc3RyZWFtQ2xhaW1Gb3JVcmkgPSAoc3RhdGU6IFN0YXRlLCB1cmk6IHN0cmluZykgPT4ge1xuICBjb25zdCBjbGFpbSA9IHNlbGVjdENsYWltRm9yVXJpKHN0YXRlLCB1cmkpO1xuICByZXR1cm4gaXNTdHJlYW1QbGFjZWhvbGRlckNsYWltKGNsYWltKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RNZXRhZGF0YUZvclVyaSA9IChzdGF0ZTogU3RhdGUsIHVyaTogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGNsYWltID0gc2VsZWN0Q2xhaW1Gb3JVcmkoc3RhdGUsIHVyaSk7XG4gIGNvbnN0IG1ldGFkYXRhID0gY2xhaW0gJiYgY2xhaW0udmFsdWU7XG4gIHJldHVybiBtZXRhZGF0YSB8fCAoY2xhaW0gPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IG51bGwpO1xufTtcblxuZXhwb3J0IGNvbnN0IG1ha2VTZWxlY3RNZXRhZGF0YUZvclVyaSA9ICh1cmk6IHN0cmluZykgPT5cbiAgY3JlYXRlU2VsZWN0b3IobWFrZVNlbGVjdENsYWltRm9yVXJpKHVyaSksIChjbGFpbSkgPT4ge1xuICAgIGNvbnN0IG1ldGFkYXRhID0gY2xhaW0gJiYgY2xhaW0udmFsdWU7XG4gICAgcmV0dXJuIG1ldGFkYXRhIHx8IChjbGFpbSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogbnVsbCk7XG4gIH0pO1xuXG5leHBvcnQgY29uc3QgbWFrZVNlbGVjdE1ldGFkYXRhSXRlbUZvclVyaSA9ICh1cmk6IHN0cmluZywga2V5OiBzdHJpbmcpID0+XG4gIGNyZWF0ZVNlbGVjdG9yKG1ha2VTZWxlY3RNZXRhZGF0YUZvclVyaSh1cmkpLCAobWV0YWRhdGE6IENoYW5uZWxNZXRhZGF0YSB8IFN0cmVhbU1ldGFkYXRhKSA9PiB7XG4gICAgaWYgKG1ldGFkYXRhICYmIG1ldGFkYXRhLnRhZ3MgJiYga2V5ID09PSAndGFncycpIHtcbiAgICAgIHJldHVybiBtZXRhZGF0YS50YWdzID8gbWV0YWRhdGEudGFncy5maWx0ZXIoKHRhZykgPT4gIUlOVEVSTkFMX1RBR1MuaW5jbHVkZXModGFnKSkgOiBbXTtcbiAgICB9XG4gICAgcmV0dXJuIG1ldGFkYXRhID8gbWV0YWRhdGFba2V5XSA6IHVuZGVmaW5lZDtcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RUaXRsZUZvclVyaSA9IChzdGF0ZTogU3RhdGUsIHVyaTogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IG1ldGFkYXRhID0gc2VsZWN0TWV0YWRhdGFGb3JVcmkoc3RhdGUsIHVyaSk7XG4gIHJldHVybiBtZXRhZGF0YSAmJiBtZXRhZGF0YS50aXRsZTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3REYXRlRm9yVXJpID0gY3JlYXRlQ2FjaGVkU2VsZWN0b3IoXG4gIHNlbGVjdENsYWltRm9yVXJpLCAvLyBpbnB1dDogKHN0YXRlLCB1cmksID9yZXR1cm5SZXBvc3QpXG4gIChjbGFpbSkgPT4ge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9XG4gICAgICBjbGFpbSAmJlxuICAgICAgY2xhaW0udmFsdWUgJiZcbiAgICAgIChjbGFpbS52YWx1ZS5yZWxlYXNlX3RpbWVcbiAgICAgICAgPyBjbGFpbS52YWx1ZS5yZWxlYXNlX3RpbWUgKiAxMDAwXG4gICAgICAgIDogY2xhaW0ubWV0YSAmJiBjbGFpbS5tZXRhLmNyZWF0aW9uX3RpbWVzdGFtcFxuICAgICAgICA/IGNsYWltLm1ldGEuY3JlYXRpb25fdGltZXN0YW1wICogMTAwMFxuICAgICAgICA6IG51bGwpO1xuICAgIGlmICghdGltZXN0YW1wKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBkYXRlT2JqID0gbmV3IERhdGUodGltZXN0YW1wKTtcbiAgICByZXR1cm4gZGF0ZU9iajtcbiAgfVxuKSgoc3RhdGUsIHVyaSkgPT4gU3RyaW5nKHVyaSkpO1xuXG5leHBvcnQgY29uc3QgbWFrZVNlbGVjdEFtb3VudEZvclVyaSA9ICh1cmk6IHN0cmluZykgPT5cbiAgY3JlYXRlU2VsZWN0b3IobWFrZVNlbGVjdENsYWltRm9yVXJpKHVyaSksIChjbGFpbSkgPT4ge1xuICAgIHJldHVybiBjbGFpbSAmJiBjbGFpbS5hbW91bnQ7XG4gIH0pO1xuXG5leHBvcnQgY29uc3QgbWFrZVNlbGVjdEVmZmVjdGl2ZUFtb3VudEZvclVyaSA9ICh1cmk6IHN0cmluZykgPT5cbiAgY3JlYXRlU2VsZWN0b3IobWFrZVNlbGVjdENsYWltRm9yVXJpKHVyaSwgZmFsc2UpLCAoY2xhaW0pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgY2xhaW0gJiYgY2xhaW0ubWV0YSAmJiB0eXBlb2YgY2xhaW0ubWV0YS5lZmZlY3RpdmVfYW1vdW50ID09PSAnc3RyaW5nJyAmJiBOdW1iZXIoY2xhaW0ubWV0YS5lZmZlY3RpdmVfYW1vdW50KVxuICAgICk7XG4gIH0pO1xuXG5leHBvcnQgY29uc3QgbWFrZVNlbGVjdENvbnRlbnRUeXBlRm9yVXJpID0gKHVyaTogc3RyaW5nKSA9PlxuICBjcmVhdGVTZWxlY3RvcihtYWtlU2VsZWN0Q2xhaW1Gb3JVcmkodXJpKSwgKGNsYWltKSA9PiB7XG4gICAgY29uc3QgaXNMaXZlc3RyZWFtQ2xhaW0gPSBpc1N0cmVhbVBsYWNlaG9sZGVyQ2xhaW0oY2xhaW0pO1xuICAgIGlmIChpc0xpdmVzdHJlYW1DbGFpbSkgcmV0dXJuICdsaXZlc3RyZWFtJztcblxuICAgIGNvbnN0IHNvdXJjZSA9IGNsYWltICYmIGNsYWltLnZhbHVlICYmIGNsYWltLnZhbHVlLnNvdXJjZTtcbiAgICByZXR1cm4gc291cmNlID8gc291cmNlLm1lZGlhX3R5cGUgOiB1bmRlZmluZWQ7XG4gIH0pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0VGh1bWJuYWlsRm9yVXJpID0gKHN0YXRlOiBTdGF0ZSwgdXJpOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgY2xhaW0gPSBzZWxlY3RDbGFpbUZvclVyaShzdGF0ZSwgdXJpKTtcbiAgcmV0dXJuIGdldFRodW1ibmFpbEZyb21DbGFpbShjbGFpbSk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0VGh1bWJuYWlsRm9ySWQgPSAoc3RhdGU6IFN0YXRlLCBjbGFpbUlkOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgY2xhaW0gPSBzZWxlY3RDbGFpbUZvcklkKHN0YXRlLCBjbGFpbUlkKTtcbiAgcmV0dXJuIGdldFRodW1ibmFpbEZyb21DbGFpbShjbGFpbSk7XG59O1xuXG5leHBvcnQgY29uc3QgbWFrZVNlbGVjdENvdmVyRm9yVXJpID0gKHVyaTogc3RyaW5nKSA9PlxuICBjcmVhdGVTZWxlY3RvcihtYWtlU2VsZWN0Q2xhaW1Gb3JVcmkodXJpKSwgKGNsYWltKSA9PiB7XG4gICAgaWYgKGNsYWltICYmIGNsYWltLnZhbHVlLmNvdmVyKSB7XG4gICAgICBjb25zdCBjb3ZlciA9IGNsYWltICYmIGNsYWltLnZhbHVlICYmIGNsYWltLnZhbHVlLmNvdmVyO1xuICAgICAgcmV0dXJuIGNvdmVyICYmIGNvdmVyLnVybCA/IGNvdmVyLnVybC50cmltKCkucmVwbGFjZSgvXmh0dHA6XFwvXFwvL2ksICdodHRwczovLycpIDogdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjb3ZlciA9IGNsYWltICYmIGNsYWltLnNpZ25pbmdfY2hhbm5lbCAmJiBjbGFpbS5zaWduaW5nX2NoYW5uZWwudmFsdWUgJiYgY2xhaW0uc2lnbmluZ19jaGFubmVsLnZhbHVlLmNvdmVyO1xuICAgICAgcmV0dXJuIGNvdmVyICYmIGNvdmVyLnVybCA/IGNvdmVyLnVybC50cmltKCkucmVwbGFjZSgvXmh0dHA6XFwvXFwvL2ksICdodHRwczovLycpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBtYWtlU2VsZWN0QXZhdGFyRm9yVXJpID0gKHVyaTogc3RyaW5nKSA9PlxuICBjcmVhdGVTZWxlY3RvcihtYWtlU2VsZWN0Q2xhaW1Gb3JVcmkodXJpKSwgKGNsYWltKSA9PiB7XG4gICAgaWYgKGNsYWltICYmIGNsYWltLnZhbHVlLmNvdmVyKSB7XG4gICAgICBjb25zdCBhdmF0YXIgPSBjbGFpbSAmJiBjbGFpbS52YWx1ZSAmJiBjbGFpbS52YWx1ZS50aHVtYm5haWwgJiYgY2xhaW0udmFsdWUudGh1bWJuYWlsO1xuICAgICAgcmV0dXJuIGF2YXRhciAmJiBhdmF0YXIudXJsID8gYXZhdGFyLnVybC50cmltKCkucmVwbGFjZSgvXmh0dHA6XFwvXFwvL2ksICdodHRwczovLycpIDogdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhdmF0YXIgPVxuICAgICAgICBjbGFpbSAmJlxuICAgICAgICBjbGFpbS5zaWduaW5nX2NoYW5uZWwgJiZcbiAgICAgICAgY2xhaW0uc2lnbmluZ19jaGFubmVsLnZhbHVlICYmXG4gICAgICAgIGNsYWltLnNpZ25pbmdfY2hhbm5lbC52YWx1ZS50aHVtYm5haWwgJiZcbiAgICAgICAgY2xhaW0uc2lnbmluZ19jaGFubmVsLnZhbHVlLnRodW1ibmFpbDtcbiAgICAgIHJldHVybiBhdmF0YXIgJiYgYXZhdGFyLnVybCA/IGF2YXRhci51cmwudHJpbSgpLnJlcGxhY2UoL15odHRwOlxcL1xcLy9pLCAnaHR0cHM6Ly8nKSA6IGZhbHNlO1xuICAgIH1cbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RJc0ZldGNoaW5nQ2xhaW1MaXN0TWluZSA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdFN0YXRlKHN0YXRlKS5pc0ZldGNoaW5nQ2xhaW1MaXN0TWluZTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdE15Q2xhaW1zUGFnZSA9IGNyZWF0ZVNlbGVjdG9yKHNlbGVjdFN0YXRlLCAoc3RhdGUpID0+IHN0YXRlLm15Q2xhaW1zUGFnZVJlc3VsdHMgfHwgW10pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0TXlDbGFpbXNQYWdlTnVtYmVyID0gY3JlYXRlU2VsZWN0b3IoXG4gIHNlbGVjdFN0YXRlLFxuICAoc3RhdGUpID0+IChzdGF0ZS5jbGFpbUxpc3RNaW5lUGFnZSAmJiBzdGF0ZS5jbGFpbUxpc3RNaW5lUGFnZS5pdGVtcykgfHwgW10sXG5cbiAgKHN0YXRlKSA9PiAoc3RhdGUudHhvUGFnZSAmJiBzdGF0ZS50eG9QYWdlLnBhZ2UpIHx8IDFcbik7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RNeUNsYWltc1BhZ2VJdGVtQ291bnQgPSAoc3RhdGU6IFN0YXRlKSA9PiBzZWxlY3RTdGF0ZShzdGF0ZSkubXlDbGFpbXNQYWdlVG90YWxSZXN1bHRzIHx8IDE7XG5leHBvcnQgY29uc3Qgc2VsZWN0RmV0Y2hpbmdNeUNsYWltc1BhZ2VFcnJvciA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdFN0YXRlKHN0YXRlKS5mZXRjaGluZ0NsYWltTGlzdE1pbmVQYWdlRXJyb3I7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RNeUNsYWltcyA9IGNyZWF0ZVNlbGVjdG9yKFxuICBzZWxlY3RNeUFjdGl2ZUNsYWltcyxcbiAgc2VsZWN0Q2xhaW1zQnlJZCxcbiAgc2VsZWN0QWJhbmRvbmluZ0lkcyxcbiAgKG15Q2xhaW1JZHMsIGJ5SWQsIGFiYW5kb25pbmdJZHMpID0+IHtcbiAgICBjb25zdCBjbGFpbXMgPSBbXTtcblxuICAgIG15Q2xhaW1JZHMuZm9yRWFjaCgoaWQpID0+IHtcbiAgICAgIGNvbnN0IGNsYWltID0gYnlJZFtpZF07XG5cbiAgICAgIGlmIChjbGFpbSAmJiBhYmFuZG9uaW5nSWRzLmluZGV4T2YoaWQpID09PSAtMSkgY2xhaW1zLnB1c2goY2xhaW0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIFsuLi5jbGFpbXNdO1xuICB9XG4pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0TXlDbGFpbXNXaXRob3V0Q2hhbm5lbHMgPSBjcmVhdGVTZWxlY3RvcihzZWxlY3RNeUNsYWltcywgKG15Q2xhaW1zKSA9PlxuICBteUNsYWltcy5maWx0ZXIoKGNsYWltKSA9PiBjbGFpbSAmJiAhY2xhaW0ubmFtZS5tYXRjaCgvXkAvKSkuc29ydCgoYSwgYikgPT4gYS50aW1lc3RhbXAgLSBiLnRpbWVzdGFtcClcbik7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RNeUNsYWltVXJpc1dpdGhvdXRDaGFubmVscyA9IGNyZWF0ZVNlbGVjdG9yKHNlbGVjdE15Q2xhaW1zV2l0aG91dENoYW5uZWxzLCAobXlDbGFpbXMpID0+IHtcbiAgcmV0dXJuIG15Q2xhaW1zXG4gICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGlmIChhLmhlaWdodCA8IDEpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfSBlbHNlIGlmIChiLmhlaWdodCA8IDEpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYi50aW1lc3RhbXAgLSBhLnRpbWVzdGFtcDtcbiAgICAgIH1cbiAgICB9KVxuICAgIC5tYXAoKGNsYWltKSA9PiB7XG4gICAgICByZXR1cm4gY2xhaW0uY2Fub25pY2FsX3VybCB8fCBjbGFpbS5wZXJtYW5lbnRfdXJsO1xuICAgIH0pO1xufSk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RBbGxNeUNsYWltc0J5T3V0cG9pbnQgPSBjcmVhdGVTZWxlY3RvcihcbiAgc2VsZWN0TXlDbGFpbXNSYXcsXG4gIChjbGFpbXMpID0+IG5ldyBTZXQoY2xhaW1zICYmIGNsYWltcy5sZW5ndGggPyBjbGFpbXMubWFwKChjbGFpbSkgPT4gYCR7Y2xhaW0udHhpZH06JHtjbGFpbS5ub3V0fWApIDogbnVsbClcbik7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RNeUNsYWltc091dHBvaW50cyA9IGNyZWF0ZVNlbGVjdG9yKHNlbGVjdE15Q2xhaW1zLCAobXlDbGFpbXMpID0+IHtcbiAgY29uc3Qgb3V0cG9pbnRzID0gW107XG5cbiAgbXlDbGFpbXMuZm9yRWFjaCgoY2xhaW0pID0+IG91dHBvaW50cy5wdXNoKGAke2NsYWltLnR4aWR9OiR7Y2xhaW0ubm91dH1gKSk7XG5cbiAgcmV0dXJuIG91dHBvaW50cztcbn0pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0RmV0Y2hpbmdNeUNoYW5uZWxzID0gKHN0YXRlOiBTdGF0ZSkgPT4gc2VsZWN0U3RhdGUoc3RhdGUpLmZldGNoaW5nTXlDaGFubmVscztcbmV4cG9ydCBjb25zdCBzZWxlY3RJc0ZldGNoaW5nTXlDb2xsZWN0aW9ucyA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdFN0YXRlKHN0YXRlKS5pc0ZldGNoaW5nTXlDb2xsZWN0aW9ucztcblxuZXhwb3J0IGNvbnN0IHNlbGVjdE15Q2hhbm5lbENsYWltc0J5SWQgPSAoc3RhdGU6IFN0YXRlKSA9PiBzZWxlY3RTdGF0ZShzdGF0ZSkubXlDaGFubmVsQ2xhaW1zQnlJZDtcbmV4cG9ydCBjb25zdCBzZWxlY3RNeUNoYW5uZWxDbGFpbXMgPSBjcmVhdGVTZWxlY3RvcihcbiAgc2VsZWN0TXlDaGFubmVsQ2xhaW1zQnlJZCxcbiAgKG15Q2hhbm5lbENsYWltc0J5SWQpID0+IG15Q2hhbm5lbENsYWltc0J5SWQgJiYgT2JqZWN0LnZhbHVlcyhteUNoYW5uZWxDbGFpbXNCeUlkKVxuKTtcbmV4cG9ydCBjb25zdCBzZWxlY3RNeUNoYW5uZWxDbGFpbUlkcyA9IGNyZWF0ZVNlbGVjdG9yKFxuICBzZWxlY3RNeUNoYW5uZWxDbGFpbXNCeUlkLFxuICAobXlDaGFubmVsQ2xhaW1zQnlJZCkgPT4gbXlDaGFubmVsQ2xhaW1zQnlJZCAmJiBPYmplY3Qua2V5cyhteUNoYW5uZWxDbGFpbXNCeUlkKVxuKTtcbmV4cG9ydCBjb25zdCBzZWxlY3RJc0NoYW5uZWxNaW5lRm9yQ2xhaW1JZCA9IChzdGF0ZTogU3RhdGUsIGNoYW5uZWxJZDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IG15Q2hhbm5lbENsYWltSWRzID0gc2VsZWN0TXlDaGFubmVsQ2xhaW1JZHMoc3RhdGUpO1xuICByZXR1cm4gQm9vbGVhbihteUNoYW5uZWxDbGFpbUlkcyAmJiBteUNoYW5uZWxDbGFpbUlkcy5pbmNsdWRlcyhjaGFubmVsSWQpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RNeUNoYW5uZWxDbGFpbVVybHMgPSBjcmVhdGVTZWxlY3RvcihcbiAgc2VsZWN0TXlDaGFubmVsQ2xhaW1zLFxuICAobXlDaGFubmVsQ2xhaW1zKSA9PiBteUNoYW5uZWxDbGFpbXMgJiYgbXlDaGFubmVsQ2xhaW1zLm1hcCgoeyBwZXJtYW5lbnRfdXJsIH0pID0+IHBlcm1hbmVudF91cmwpXG4pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0SGFzQ2hhbm5lbHMgPSAoc3RhdGU6IFN0YXRlKSA9PiB7XG4gIGNvbnN0IG15Q2hhbm5lbENsYWltSWRzID0gc2VsZWN0TXlDaGFubmVsQ2xhaW1JZHMoc3RhdGUpO1xuICByZXR1cm4gbXlDaGFubmVsQ2xhaW1JZHMgPyBteUNoYW5uZWxDbGFpbUlkcy5sZW5ndGggPiAwIDogZmFsc2U7XG59O1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0TXlDb2xsZWN0aW9uSWRzID0gKHN0YXRlOiBTdGF0ZSkgPT4gc2VsZWN0U3RhdGUoc3RhdGUpLm15Q29sbGVjdGlvbkNsYWltcztcblxuZXhwb3J0IGNvbnN0IHNlbGVjdFJlc29sdmluZ1VyaXMgPSBjcmVhdGVTZWxlY3RvcihzZWxlY3RTdGF0ZSwgKHN0YXRlKSA9PiBzdGF0ZS5yZXNvbHZpbmdVcmlzIHx8IFtdKTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdENoYW5uZWxJbXBvcnRQZW5kaW5nID0gKHN0YXRlOiBTdGF0ZSkgPT4gc2VsZWN0U3RhdGUoc3RhdGUpLnBlbmRpbmdDaGFubmVsSW1wb3J0O1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0SXNVcmlSZXNvbHZpbmcgPSAoc3RhdGU6IFN0YXRlLCB1cmk6IHN0cmluZykgPT4ge1xuICBjb25zdCByZXNvbHZpbmdVcmlzID0gc2VsZWN0UmVzb2x2aW5nVXJpcyhzdGF0ZSk7XG4gIHJldHVybiByZXNvbHZpbmdVcmlzICYmIHJlc29sdmluZ1VyaXMuaW5jbHVkZXModXJpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RDaGFubmVsQ2xhaW1Db3VudHMgPSBjcmVhdGVTZWxlY3RvcihzZWxlY3RTdGF0ZSwgKHN0YXRlKSA9PiBzdGF0ZS5jaGFubmVsQ2xhaW1Db3VudHMgfHwge30pO1xuXG5leHBvcnQgY29uc3QgbWFrZVNlbGVjdFBlbmRpbmdDbGFpbUZvclVyaSA9ICh1cmk6IHN0cmluZykgPT5cbiAgY3JlYXRlU2VsZWN0b3Ioc2VsZWN0UGVuZGluZ0NsYWltc0J5SWQsIChwZW5kaW5nQnlJZCkgPT4ge1xuICAgIGxldCB1cmlTdHJlYW1OYW1lO1xuICAgIGxldCB1cmlDaGFubmVsTmFtZTtcbiAgICB0cnkge1xuICAgICAgKHsgc3RyZWFtTmFtZTogdXJpU3RyZWFtTmFtZSwgY2hhbm5lbE5hbWU6IHVyaUNoYW5uZWxOYW1lIH0gPSBwYXJzZVVSSSh1cmkpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgcGVuZGluZ0NsYWltcyA9IChPYmplY3QudmFsdWVzKHBlbmRpbmdCeUlkKTogYW55KTtcbiAgICBjb25zdCBtYXRjaGluZ0NsYWltID0gcGVuZGluZ0NsYWltcy5maW5kKChjbGFpbTogR2VuZXJpY0NsYWltKSA9PiB7XG4gICAgICByZXR1cm4gY2xhaW0ubm9ybWFsaXplZF9uYW1lID09PSB1cmlDaGFubmVsTmFtZSB8fCBjbGFpbS5ub3JtYWxpemVkX25hbWUgPT09IHVyaVN0cmVhbU5hbWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIG1hdGNoaW5nQ2xhaW0gfHwgbnVsbDtcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBtYWtlU2VsZWN0VG90YWxJdGVtc0ZvckNoYW5uZWwgPSAodXJpOiBzdHJpbmcpID0+XG4gIGNyZWF0ZVNlbGVjdG9yKHNlbGVjdENoYW5uZWxDbGFpbUNvdW50cywgKGJ5VXJpKSA9PiBieVVyaSAmJiBieVVyaVtub3JtYWxpemVVUkkodXJpKV0pO1xuXG5leHBvcnQgY29uc3QgbWFrZVNlbGVjdFRvdGFsUGFnZXNGb3JDaGFubmVsID0gKHVyaTogc3RyaW5nLCBwYWdlU2l6ZTogbnVtYmVyID0gMTApID0+XG4gIGNyZWF0ZVNlbGVjdG9yKFxuICAgIHNlbGVjdENoYW5uZWxDbGFpbUNvdW50cyxcbiAgICAoYnlVcmkpID0+IGJ5VXJpICYmIGJ5VXJpW3VyaV0gJiYgTWF0aC5jZWlsKGJ5VXJpW25vcm1hbGl6ZVVSSSh1cmkpXSAvIHBhZ2VTaXplKVxuICApO1xuXG5leHBvcnQgY29uc3QgbWFrZVNlbGVjdE5zZndDb3VudEZyb21VcmlzID0gKHVyaXM6IEFycmF5PHN0cmluZz4pID0+XG4gIGNyZWF0ZVNlbGVjdG9yKHNlbGVjdENsYWltc0J5VXJpLCAoY2xhaW1zKSA9PlxuICAgIHVyaXMucmVkdWNlKChhY2MsIHVyaSkgPT4ge1xuICAgICAgY29uc3QgY2xhaW0gPSBjbGFpbXNbdXJpXTtcbiAgICAgIGlmIChjbGFpbSAmJiBpc0NsYWltTnNmdyhjbGFpbSkpIHtcbiAgICAgICAgcmV0dXJuIGFjYyArIDE7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIDApXG4gICk7XG5cbmV4cG9ydCBjb25zdCBtYWtlU2VsZWN0T21pdHRlZENvdW50Rm9yQ2hhbm5lbCA9ICh1cmk6IHN0cmluZykgPT5cbiAgY3JlYXRlU2VsZWN0b3IoXG4gICAgbWFrZVNlbGVjdFRvdGFsSXRlbXNGb3JDaGFubmVsKHVyaSksXG4gICAgbWFrZVNlbGVjdFRvdGFsQ2xhaW1zSW5DaGFubmVsU2VhcmNoKHVyaSksXG4gICAgKGNsYWltc0luQ2hhbm5lbCwgY2xhaW1zSW5TZWFyY2gpID0+IHtcbiAgICAgIGlmIChjbGFpbXNJbkNoYW5uZWwgJiYgdHlwZW9mIGNsYWltc0luU2VhcmNoID09PSAnbnVtYmVyJyAmJiBjbGFpbXNJblNlYXJjaCA+PSAwKSB7XG4gICAgICAgIHJldHVybiBjbGFpbXNJbkNoYW5uZWwgLSBjbGFpbXNJblNlYXJjaDtcbiAgICAgIH0gZWxzZSByZXR1cm4gMDtcbiAgICB9XG4gICk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RDbGFpbUlzTnNmd0ZvclVyaSA9IGNyZWF0ZUNhY2hlZFNlbGVjdG9yKFxuICBzZWxlY3RDbGFpbUZvclVyaSxcbiAgLy8gRXZlbnR1YWxseSB0aGVzZSB3aWxsIGNvbWUgZnJvbSBzb21lIGxpc3Qgb2YgdGFncyB0aGF0IGFyZSBjb25zaWRlcmVkIGFkdWx0XG4gIC8vIE9yIHBvc3NpYmx5IGNvbWUgZnJvbSB1c2VycyBzZXR0aW5ncyBvZiB3aGF0IHRhZ3MgdGhleSB3YW50IHRvIGhpZGVcbiAgLy8gRm9yIG5vdywgdGhlcmUgaXMganVzdCBhIGhhcmQgY29kZWQgbGlzdCBvZiB0YWdzIGluc2lkZSBgaXNDbGFpbU5zZndgXG4gIC8vIHNlbGVjdE5hdWdodHlUYWdzKCksXG4gIChjbGFpbTogQ2xhaW0pID0+IHtcbiAgICByZXR1cm4gY2xhaW0gPyBpc0NsYWltTnNmdyhjbGFpbSkgOiBmYWxzZTtcbiAgfVxuKSgoc3RhdGUsIHVyaSkgPT4gU3RyaW5nKHVyaSkpO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0Q2hhbm5lbEZvclVyaSA9IChzdGF0ZTogU3RhdGUsIHVyaTogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGNsYWltID0gc2VsZWN0Q2xhaW1Gb3JVcmkoc3RhdGUsIHVyaSk7XG4gIHJldHVybiBnZXRDaGFubmVsRnJvbUNsYWltKGNsYWltKTtcbn07XG5leHBvcnQgY29uc3Qgc2VsZWN0Q2hhbm5lbFRpdGxlRm9yVXJpID0gKHN0YXRlOiBTdGF0ZSwgdXJpOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgY2hhbm5lbCA9IHNlbGVjdENoYW5uZWxGb3JVcmkoc3RhdGUsIHVyaSk7XG4gIHJldHVybiBnZXRDaGFubmVsVGl0bGVGcm9tQ2xhaW0oY2hhbm5lbCk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0Q2hhbm5lbE5hbWVGb3JJZCA9IChzdGF0ZTogU3RhdGUsIGNsYWltSWQ6IHN0cmluZykgPT4ge1xuICBjb25zdCB1cmkgPSBzZWxlY3RDbGFpbVVyaUZvcklkKHN0YXRlLCBjbGFpbUlkKTtcbiAgcmV0dXJuIHNlbGVjdENoYW5uZWxGb3JDbGFpbVVyaShzdGF0ZSwgdXJpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RDaGFubmVsRm9yQ2xhaW1VcmkgPSBjcmVhdGVDYWNoZWRTZWxlY3RvcihcbiAgKHN0YXRlLCB1cmksIGluY2x1ZGVQcmVmaXgpID0+IGluY2x1ZGVQcmVmaXgsXG4gIHNlbGVjdENsYWltRm9yVXJpLFxuICAoaW5jbHVkZVByZWZpeD86IGJvb2xlYW4sIGNsYWltOiBDbGFpbSkgPT4ge1xuICAgIGlmICghY2xhaW0gfHwgIWNsYWltLnNpZ25pbmdfY2hhbm5lbCB8fCAhY2xhaW0uaXNfY2hhbm5lbF9zaWduYXR1cmVfdmFsaWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHsgY2Fub25pY2FsX3VybDogY2Fub25pY2FsVXJsLCBwZXJtYW5lbnRfdXJsOiBwZXJtYW5lbnRVcmwgfSA9IGNsYWltLnNpZ25pbmdfY2hhbm5lbDtcblxuICAgIGlmIChjYW5vbmljYWxVcmwpIHtcbiAgICAgIHJldHVybiBpbmNsdWRlUHJlZml4ID8gY2Fub25pY2FsVXJsIDogY2Fub25pY2FsVXJsLnNsaWNlKCdsYnJ5Oi8vJy5sZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaW5jbHVkZVByZWZpeCA/IHBlcm1hbmVudFVybCA6IHBlcm1hbmVudFVybC5zbGljZSgnbGJyeTovLycubGVuZ3RoKTtcbiAgICB9XG4gIH1cbikoKHN0YXRlLCB1cmksIGluY2x1ZGVQcmVmaXgpID0+IGAke1N0cmluZyh1cmkpfToke1N0cmluZyhpbmNsdWRlUHJlZml4KX1gKTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdENoYW5uZWxOYW1lRm9yQ2xhaW1VcmkgPSAoc3RhdGU6IFN0YXRlLCB1cmk6IHN0cmluZykgPT4ge1xuICBjb25zdCBjaGFubmVsID0gc2VsZWN0Q2hhbm5lbEZvckNsYWltVXJpKHN0YXRlLCB1cmkpO1xuICByZXR1cm4gZ2V0TmFtZUZyb21DbGFpbShjaGFubmVsKTtcbn07XG5cbi8vIFJldHVybnMgdGhlIGFzc29jaWF0ZWQgY2hhbm5lbCB1cmkgZm9yIGEgZ2l2ZW4gY2xhaW0gdXJpXG4vLyBhY2NlcHRzIGEgcmVndWxhciBjbGFpbSB1cmkgbGJyeTovL3NvbWV0aGluZ1xuLy8gcmV0dXJucyB0aGUgY2hhbm5lbCB1cmkgdGhhdCBjcmVhdGVkIHRoaXMgY2xhaW0gbGJyeTovL0BjaGFubmVsXG5leHBvcnQgY29uc3QgbWFrZVNlbGVjdENoYW5uZWxGb3JDbGFpbVVyaSA9ICh1cmk6IHN0cmluZywgaW5jbHVkZVByZWZpeDogYm9vbGVhbiA9IGZhbHNlKSA9PlxuICBjcmVhdGVTZWxlY3RvcihtYWtlU2VsZWN0Q2xhaW1Gb3JVcmkodXJpKSwgKGNsYWltOiA/Q2xhaW0pID0+IHtcbiAgICBpZiAoIWNsYWltIHx8ICFjbGFpbS5zaWduaW5nX2NoYW5uZWwgfHwgIWNsYWltLmlzX2NoYW5uZWxfc2lnbmF0dXJlX3ZhbGlkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCB7IGNhbm9uaWNhbF91cmw6IGNhbm9uaWNhbFVybCwgcGVybWFuZW50X3VybDogcGVybWFuZW50VXJsIH0gPSBjbGFpbS5zaWduaW5nX2NoYW5uZWw7XG5cbiAgICBpZiAoY2Fub25pY2FsVXJsKSB7XG4gICAgICByZXR1cm4gaW5jbHVkZVByZWZpeCA/IGNhbm9uaWNhbFVybCA6IGNhbm9uaWNhbFVybC5zbGljZSgnbGJyeTovLycubGVuZ3RoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGluY2x1ZGVQcmVmaXggPyBwZXJtYW5lbnRVcmwgOiBwZXJtYW5lbnRVcmwuc2xpY2UoJ2xicnk6Ly8nLmxlbmd0aCk7XG4gICAgfVxuICB9KTtcblxuZXhwb3J0IGNvbnN0IG1ha2VTZWxlY3RDaGFubmVsUGVybVVybEZvckNsYWltVXJpID0gKHVyaTogc3RyaW5nLCBpbmNsdWRlUHJlZml4OiBib29sZWFuID0gZmFsc2UpID0+XG4gIGNyZWF0ZVNlbGVjdG9yKG1ha2VTZWxlY3RDbGFpbUZvclVyaSh1cmkpLCAoY2xhaW06ID9DbGFpbSkgPT4ge1xuICAgIGlmIChjbGFpbSAmJiBjbGFpbS52YWx1ZV90eXBlID09PSAnY2hhbm5lbCcpIHtcbiAgICAgIHJldHVybiBjbGFpbS5wZXJtYW5lbnRfdXJsO1xuICAgIH1cbiAgICBpZiAoIWNsYWltIHx8ICFjbGFpbS5zaWduaW5nX2NoYW5uZWwgfHwgIWNsYWltLmlzX2NoYW5uZWxfc2lnbmF0dXJlX3ZhbGlkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGNsYWltLnNpZ25pbmdfY2hhbm5lbC5wZXJtYW5lbnRfdXJsO1xuICB9KTtcblxuZXhwb3J0IGNvbnN0IG1ha2VTZWxlY3RNeUNoYW5uZWxQZXJtVXJsRm9yTmFtZSA9IChuYW1lOiBzdHJpbmcpID0+XG4gIGNyZWF0ZVNlbGVjdG9yKHNlbGVjdE15Q2hhbm5lbENsYWltcywgKGNsYWltcykgPT4ge1xuICAgIGNvbnN0IG1hdGNoaW5nQ2xhaW0gPSBjbGFpbXMgJiYgY2xhaW1zLmZpbmQoKGNsYWltKSA9PiBjbGFpbS5uYW1lID09PSBuYW1lKTtcbiAgICByZXR1cm4gbWF0Y2hpbmdDbGFpbSA/IG1hdGNoaW5nQ2xhaW0ucGVybWFuZW50X3VybCA6IG51bGw7XG4gIH0pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0VGFnc0ZvclVyaSA9IGNyZWF0ZUNhY2hlZFNlbGVjdG9yKHNlbGVjdE1ldGFkYXRhRm9yVXJpLCAobWV0YWRhdGE6ID9HZW5lcmljTWV0YWRhdGEpID0+IHtcbiAgcmV0dXJuIG1ldGFkYXRhICYmIG1ldGFkYXRhLnRhZ3MgPyBtZXRhZGF0YS50YWdzLmZpbHRlcigodGFnKSA9PiAhSU5URVJOQUxfVEFHUy5pbmNsdWRlcyh0YWcpKSA6IFtdO1xufSkoKHN0YXRlLCB1cmkpID0+IFN0cmluZyh1cmkpKTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdFB1cmNoYXNlVGFnRm9yVXJpID0gY3JlYXRlQ2FjaGVkU2VsZWN0b3Ioc2VsZWN0TWV0YWRhdGFGb3JVcmksIChtZXRhZGF0YTogP0dlbmVyaWNNZXRhZGF0YSkgPT4ge1xuICBjb25zdCBtYXRjaGluZ1RhZyA9IG1ldGFkYXRhICYmIG1ldGFkYXRhLnRhZ3MgJiYgbWV0YWRhdGEudGFncy5maW5kKCh0YWcpID0+IHRhZy5pbmNsdWRlcygncHVyY2hhc2U6JykpO1xuICBpZiAobWF0Y2hpbmdUYWcpIHJldHVybiBtYXRjaGluZ1RhZy5zbGljZSg5KTtcbn0pKChzdGF0ZSwgdXJpKSA9PiBTdHJpbmcodXJpKSk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RQcmVvcmRlclRhZ0ZvclVyaSA9IGNyZWF0ZUNhY2hlZFNlbGVjdG9yKHNlbGVjdE1ldGFkYXRhRm9yVXJpLCAobWV0YWRhdGE6ID9HZW5lcmljTWV0YWRhdGEpID0+IHtcbiAgY29uc3QgbWF0Y2hpbmdUYWcgPSBtZXRhZGF0YSAmJiBtZXRhZGF0YS50YWdzICYmIG1ldGFkYXRhLnRhZ3MuZmluZCgodGFnKSA9PiB0YWcuaW5jbHVkZXMoJ3ByZW9yZGVyOicpKTtcbiAgaWYgKG1hdGNoaW5nVGFnKSByZXR1cm4gbWF0Y2hpbmdUYWcuc2xpY2UoOSk7XG59KSgoc3RhdGUsIHVyaSkgPT4gU3RyaW5nKHVyaSkpO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0UmVudGFsVGFnRm9yVXJpID0gY3JlYXRlQ2FjaGVkU2VsZWN0b3Ioc2VsZWN0TWV0YWRhdGFGb3JVcmksIChtZXRhZGF0YTogP0dlbmVyaWNNZXRhZGF0YSkgPT4ge1xuICBjb25zdCBtYXRjaGluZ1RhZyA9IG1ldGFkYXRhICYmIG1ldGFkYXRhLnRhZ3MgJiYgbWV0YWRhdGEudGFncy5maW5kKCh0YWcpID0+IHRhZy5pbmNsdWRlcygncmVudGFsOicpKTtcbiAgaWYgKG1hdGNoaW5nVGFnKSB7XG4gICAgY29uc3QgdHJpbW1lZFRhZyA9IG1hdGNoaW5nVGFnLnNsaWNlKDcpO1xuXG4gICAgY29uc3QgdGFncyA9IHRyaW1tZWRUYWcuc3BsaXQoJzonKTtcblxuICAgIGlmICh0YWdzICYmIHRhZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwcmljZTogdGFnc1swXSxcbiAgICAgICAgZXhwaXJhdGlvblRpbWVJblNlY29uZHM6IHRhZ3NbMV0sXG4gICAgICB9O1xuICAgIH1cbiAgfVxufSkoKHN0YXRlLCB1cmkpID0+IFN0cmluZyh1cmkpKTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdFByZW9yZGVyQ29udGVudENsYWltSWRGb3JVcmkgPSBjcmVhdGVDYWNoZWRTZWxlY3RvcihcbiAgc2VsZWN0TWV0YWRhdGFGb3JVcmksXG4gIChtZXRhZGF0YTogP0dlbmVyaWNNZXRhZGF0YSkgPT4ge1xuICAgIGNvbnN0IG1hdGNoaW5nVGFnID0gbWV0YWRhdGEgJiYgbWV0YWRhdGEudGFncyAmJiBtZXRhZGF0YS50YWdzLmZpbmQoKHRhZykgPT4gdGFnLmluY2x1ZGVzKCdmdWxsIHVwbG9hZDonKSk7XG4gICAgaWYgKG1hdGNoaW5nVGFnKSByZXR1cm4gbWF0Y2hpbmdUYWcuc2xpY2UoMTIpO1xuICB9XG4pKChzdGF0ZSwgdXJpKSA9PiBTdHJpbmcodXJpKSk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RGZXRjaGluZ0NsYWltU2VhcmNoQnlRdWVyeSA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdFN0YXRlKHN0YXRlKS5mZXRjaGluZ0NsYWltU2VhcmNoQnlRdWVyeSB8fCB7fTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdEZldGNoaW5nQ2xhaW1TZWFyY2ggPSBjcmVhdGVTZWxlY3RvcihcbiAgc2VsZWN0RmV0Y2hpbmdDbGFpbVNlYXJjaEJ5UXVlcnksXG4gIChmZXRjaGluZ0NsYWltU2VhcmNoQnlRdWVyeSkgPT4gQm9vbGVhbihPYmplY3Qua2V5cyhmZXRjaGluZ0NsYWltU2VhcmNoQnlRdWVyeSkubGVuZ3RoKVxuKTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdENsYWltU2VhcmNoQnlRdWVyeSA9IGNyZWF0ZVNlbGVjdG9yKHNlbGVjdFN0YXRlLCAoc3RhdGUpID0+IHN0YXRlLmNsYWltU2VhcmNoQnlRdWVyeSB8fCB7fSk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RDbGFpbVNlYXJjaEJ5UXVlcnlMYXN0UGFnZVJlYWNoZWQgPSBjcmVhdGVTZWxlY3RvcihcbiAgc2VsZWN0U3RhdGUsXG4gIChzdGF0ZSkgPT4gc3RhdGUuY2xhaW1TZWFyY2hCeVF1ZXJ5TGFzdFBhZ2VSZWFjaGVkIHx8IHt9XG4pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0U2hvcnRVcmxGb3JVcmkgPSAoc3RhdGU6IFN0YXRlLCB1cmk6IHN0cmluZykgPT4ge1xuICBjb25zdCBjbGFpbSA9IHNlbGVjdENsYWltRm9yVXJpKHN0YXRlLCB1cmkpO1xuICByZXR1cm4gY2xhaW0gJiYgY2xhaW0uc2hvcnRfdXJsO1xufTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdENhbm9uaWNhbFVybEZvclVyaSA9IChzdGF0ZTogU3RhdGUsIHVyaTogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGNsYWltID0gc2VsZWN0Q2xhaW1Gb3JVcmkoc3RhdGUsIHVyaSk7XG4gIHJldHVybiBjbGFpbSAmJiBjbGFpbS5jYW5vbmljYWxfdXJsO1xufTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdFBlcm1hbmVudFVybEZvclVyaSA9IChzdGF0ZTogU3RhdGUsIHVyaTogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGNsYWltID0gc2VsZWN0Q2xhaW1Gb3JVcmkoc3RhdGUsIHVyaSk7XG4gIHJldHVybiBjbGFpbSAmJiBjbGFpbS5wZXJtYW5lbnRfdXJsO1xufTtcblxuZXhwb3J0IGNvbnN0IG1ha2VTZWxlY3RTdXBwb3J0c0ZvclVyaSA9ICh1cmk6IHN0cmluZykgPT5cbiAgY3JlYXRlU2VsZWN0b3Ioc2VsZWN0U3VwcG9ydHNCeU91dHBvaW50LCBtYWtlU2VsZWN0Q2xhaW1Gb3JVcmkodXJpKSwgKGJ5T3V0cG9pbnQsIGNsYWltOiA/U3RyZWFtQ2xhaW0pID0+IHtcbiAgICBpZiAoIWNsYWltIHx8ICFjbGFpbS5pc19teV9vdXRwdXQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHsgY2xhaW1faWQ6IGNsYWltSWQgfSA9IGNsYWltO1xuICAgIGxldCB0b3RhbCA9IDA7XG5cbiAgICBPYmplY3QudmFsdWVzKGJ5T3V0cG9pbnQpLmZvckVhY2goKHN1cHBvcnQpID0+IHtcbiAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgIGNvbnN0IHsgY2xhaW1faWQsIGFtb3VudCB9ID0gc3VwcG9ydDtcbiAgICAgIHRvdGFsID0gY2xhaW1faWQgPT09IGNsYWltSWQgJiYgYW1vdW50ID8gdG90YWwgKyBwYXJzZUZsb2F0KGFtb3VudCkgOiB0b3RhbDtcbiAgICB9KTtcblxuICAgIHJldHVybiB0b3RhbDtcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RVcGRhdGluZ0NoYW5uZWwgPSAoc3RhdGU6IFN0YXRlKSA9PiBzZWxlY3RTdGF0ZShzdGF0ZSkudXBkYXRpbmdDaGFubmVsO1xuZXhwb3J0IGNvbnN0IHNlbGVjdFVwZGF0ZUNoYW5uZWxFcnJvciA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdFN0YXRlKHN0YXRlKS51cGRhdGVDaGFubmVsRXJyb3I7XG5cbmV4cG9ydCBjb25zdCBtYWtlU2VsZWN0UmVmbGVjdGluZ0NsYWltRm9yVXJpID0gKHVyaTogc3RyaW5nKSA9PlxuICBjcmVhdGVTZWxlY3RvcihzZWxlY3RDbGFpbUlkc0J5VXJpLCBzZWxlY3RSZWZsZWN0aW5nQnlJZCwgKGNsYWltSWRzQnlVcmksIHJlZmxlY3RpbmdCeUlkKSA9PiB7XG4gICAgY29uc3QgY2xhaW1JZCA9IGNsYWltSWRzQnlVcmlbbm9ybWFsaXplVVJJKHVyaSldO1xuICAgIHJldHVybiByZWZsZWN0aW5nQnlJZFtjbGFpbUlkXTtcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBtYWtlU2VsZWN0TXlTdHJlYW1VcmxzRm9yUGFnZSA9IChwYWdlOiBudW1iZXIgPSAxKSA9PlxuICBjcmVhdGVTZWxlY3RvcihzZWxlY3RNeUNsYWltVXJpc1dpdGhvdXRDaGFubmVscywgKHVybHMpID0+IHtcbiAgICBjb25zdCBzdGFydCA9IChOdW1iZXIocGFnZSkgLSAxKSAqIE51bWJlcihDTEFJTS5QQUdFX1NJWkUpO1xuICAgIGNvbnN0IGVuZCA9IE51bWJlcihwYWdlKSAqIE51bWJlcihDTEFJTS5QQUdFX1NJWkUpO1xuXG4gICAgcmV0dXJuIHVybHMgJiYgdXJscy5sZW5ndGggPyB1cmxzLnNsaWNlKHN0YXJ0LCBlbmQpIDogW107XG4gIH0pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0TXlTdHJlYW1VcmxzQ291bnQgPSBjcmVhdGVTZWxlY3RvcihzZWxlY3RNeUNsYWltVXJpc1dpdGhvdXRDaGFubmVscywgKGNoYW5uZWxzKSA9PiBjaGFubmVscy5sZW5ndGgpO1xuXG5leHBvcnQgY29uc3QgbWFrZVNlbGVjdFRhZ0luQ2xhaW1PckNoYW5uZWxGb3JVcmkgPSAodXJpOiBzdHJpbmcsIHRhZzogc3RyaW5nKSA9PlxuICBjcmVhdGVTZWxlY3RvcihtYWtlU2VsZWN0Q2xhaW1Gb3JVcmkodXJpKSwgKGNsYWltKSA9PiB7XG4gICAgY29uc3QgY2xhaW1UYWdzID0gKGNsYWltICYmIGNsYWltLnZhbHVlICYmIGNsYWltLnZhbHVlLnRhZ3MpIHx8IFtdO1xuICAgIGNvbnN0IGNoYW5uZWxUYWdzID1cbiAgICAgIChjbGFpbSAmJiBjbGFpbS5zaWduaW5nX2NoYW5uZWwgJiYgY2xhaW0uc2lnbmluZ19jaGFubmVsLnZhbHVlICYmIGNsYWltLnNpZ25pbmdfY2hhbm5lbC52YWx1ZS50YWdzKSB8fCBbXTtcbiAgICByZXR1cm4gY2xhaW1UYWdzLmluY2x1ZGVzKHRhZykgfHwgY2hhbm5lbFRhZ3MuaW5jbHVkZXModGFnKTtcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBtYWtlU2VsZWN0Q2xhaW1IYXNTb3VyY2UgPSAodXJpOiBzdHJpbmcpID0+XG4gIGNyZWF0ZVNlbGVjdG9yKG1ha2VTZWxlY3RDbGFpbUZvclVyaSh1cmkpLCAoY2xhaW0pID0+IHtcbiAgICBpZiAoIWNsYWltKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIEJvb2xlYW4oY2xhaW0udmFsdWUuc291cmNlKTtcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RJc1N0cmVhbVBsYWNlaG9sZGVyRm9yVXJpID0gKHN0YXRlOiBTdGF0ZSwgdXJpOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgY2xhaW0gPSBzZWxlY3RDbGFpbUZvclVyaShzdGF0ZSwgdXJpKTtcbiAgcmV0dXJuIGlzU3RyZWFtUGxhY2Vob2xkZXJDbGFpbShjbGFpbSk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0VG90YWxTdGFrZWRBbW91bnRGb3JDaGFubmVsVXJpID0gY3JlYXRlQ2FjaGVkU2VsZWN0b3Ioc2VsZWN0Q2xhaW1Gb3JVcmksIChjbGFpbSkgPT4ge1xuICBpZiAoIWNsYWltIHx8ICFjbGFpbS5hbW91bnQgfHwgIWNsYWltLm1ldGEgfHwgIWNsYWltLm1ldGEuc3VwcG9ydF9hbW91bnQpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHJldHVybiBwYXJzZUZsb2F0KGNsYWltLmFtb3VudCkgKyBwYXJzZUZsb2F0KGNsYWltLm1ldGEuc3VwcG9ydF9hbW91bnQpIHx8IDA7XG59KSgoc3RhdGUsIHVyaSkgPT4gU3RyaW5nKHVyaSkpO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0U3Rha2VkTGV2ZWxGb3JDaGFubmVsVXJpID0gY3JlYXRlQ2FjaGVkU2VsZWN0b3Ioc2VsZWN0VG90YWxTdGFrZWRBbW91bnRGb3JDaGFubmVsVXJpLCAoYW1vdW50KSA9PiB7XG4gIGxldCBsZXZlbCA9IDE7XG4gIHN3aXRjaCAodHJ1ZSkge1xuICAgIGNhc2UgYW1vdW50ID49IENMQUlNLkxFVkVMXzJfU1RBS0VEX0FNT1VOVCAmJiBhbW91bnQgPCBDTEFJTS5MRVZFTF8zX1NUQUtFRF9BTU9VTlQ6XG4gICAgICBsZXZlbCA9IDI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIGFtb3VudCA+PSBDTEFJTS5MRVZFTF8zX1NUQUtFRF9BTU9VTlQgJiYgYW1vdW50IDwgQ0xBSU0uTEVWRUxfNF9TVEFLRURfQU1PVU5UOlxuICAgICAgbGV2ZWwgPSAzO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBhbW91bnQgPj0gQ0xBSU0uTEVWRUxfNF9TVEFLRURfQU1PVU5UICYmIGFtb3VudCA8IENMQUlNLkxFVkVMXzVfU1RBS0VEX0FNT1VOVDpcbiAgICAgIGxldmVsID0gNDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgYW1vdW50ID49IENMQUlNLkxFVkVMXzVfU1RBS0VEX0FNT1VOVDpcbiAgICAgIGxldmVsID0gNTtcbiAgICAgIGJyZWFrO1xuICB9XG4gIHJldHVybiBsZXZlbDtcbn0pKChzdGF0ZSwgdXJpKSA9PiBTdHJpbmcodXJpKSk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RVcGRhdGluZ0NvbGxlY3Rpb24gPSAoc3RhdGU6IFN0YXRlKSA9PiBzZWxlY3RTdGF0ZShzdGF0ZSkudXBkYXRpbmdDb2xsZWN0aW9uO1xuZXhwb3J0IGNvbnN0IHNlbGVjdFVwZGF0ZUNvbGxlY3Rpb25FcnJvciA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdFN0YXRlKHN0YXRlKS51cGRhdGVDb2xsZWN0aW9uRXJyb3I7XG5leHBvcnQgY29uc3Qgc2VsZWN0Q3JlYXRpbmdDb2xsZWN0aW9uID0gKHN0YXRlOiBTdGF0ZSkgPT4gc2VsZWN0U3RhdGUoc3RhdGUpLmNyZWF0aW5nQ29sbGVjdGlvbjtcbmV4cG9ydCBjb25zdCBzZWxlY3RDcmVhdGVDb2xsZWN0aW9uRXJyb3IgPSAoc3RhdGU6IFN0YXRlKSA9PiBzZWxlY3RTdGF0ZShzdGF0ZSkuY3JlYXRlQ29sbGVjdGlvbkVycm9yO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0SXNNeUNoYW5uZWxDb3VudE92ZXJMaW1pdCA9IGNyZWF0ZVNlbGVjdG9yKFxuICBzZWxlY3RNeUNoYW5uZWxDbGFpbUlkcyxcbiAgc2VsZWN0WW91dHViZUNoYW5uZWxzLFxuICAobXlDbGFpbUlkcywgeXRDaGFubmVsczogP0FycmF5PHsgY2hhbm5lbF9jbGFpbV9pZDogc3RyaW5nIH0+KSA9PiB7XG4gICAgaWYgKG15Q2xhaW1JZHMpIHtcbiAgICAgIGlmICh5dENoYW5uZWxzICYmIHl0Q2hhbm5lbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyAkRmxvd0ZpeE1lIC0gbnVsbCAneXRDaGFubmVscycgYWxyZWFkeSBleGNsdWRlZFxuICAgICAgICBjb25zdCBpZHMgPSBteUNsYWltSWRzLmZpbHRlcigoaWQpID0+ICF5dENoYW5uZWxzLnNvbWUoKHl0KSA9PiB5dC5jaGFubmVsX2NsYWltX2lkID09PSBpZCkpO1xuICAgICAgICByZXR1cm4gaWRzLmxlbmd0aCA+IENIQU5ORUxfQ1JFQVRJT05fTElNSVQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gbXlDbGFpbUlkcy5sZW5ndGggPiBDSEFOTkVMX0NSRUFUSU9OX0xJTUlUO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbik7XG5cbi8qKlxuICogR2l2ZW4gYSB1cmkgb2YgYSBjaGFubmVsLCBjaGVjayBpZiB0aGVyZSBpcyBhbiBPZHlzZWUgbWVtYmVyc2hpcCB2YWx1ZS5cbiAqIEBwYXJhbSBzdGF0ZVxuICogQHBhcmFtIHVyaVxuICogQHJldHVybnMgeyp9XG4gKi9cbmV4cG9ydCBjb25zdCBzZWxlY3RPZHlzZWVNZW1iZXJzaGlwRm9yVXJpID0gKHN0YXRlOiBTdGF0ZSwgdXJpOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgY2xhaW0gPSBzZWxlY3RDbGFpbUZvclVyaShzdGF0ZSwgdXJpKTtcbiAgY29uc3QgY2hhbm5lbElkID0gZ2V0Q2hhbm5lbElkRnJvbUNsYWltKGNsYWltKTtcbiAgcmV0dXJuIGNoYW5uZWxJZCA/IHNlbGVjdE9keXNlZU1lbWJlcnNoaXBGb3JDaGFubmVsSWQoc3RhdGUsIGNoYW5uZWxJZCkgOiB1bmRlZmluZWQ7XG59O1xuXG4vKipcbiAqIEdpdmVuIGEgY2hhbm5lbCBJRCwgY2hlY2sgaWYgdGhlcmUgaXMgYW4gT2R5c2VlIG1lbWJlcnNoaXAgdmFsdWUuXG4gKiBAcGFyYW0gc3RhdGVcbiAqIEBwYXJhbSBjaGFubmVsSWRcbiAqIEByZXR1cm5zIHsqfVxuICovXG5leHBvcnQgY29uc3Qgc2VsZWN0T2R5c2VlTWVtYmVyc2hpcEZvckNoYW5uZWxJZCA9IChzdGF0ZTogU3RhdGUsIGNoYW5uZWxJZDogc3RyaW5nKSA9PiB7XG4gIC8vIFRPRE86IHNob3VsZCBhY2Nlc3MgdmlhIHNlbGVjdG9yLCBub3QgZnJvbSBgc3RhdGVgIGRpcmVjdGx5LlxuICByZXR1cm4gc3RhdGUudXNlciAmJiBzdGF0ZS51c2VyLm9keXNlZU1lbWJlcnNoaXBzUGVyQ2xhaW1JZHMgJiYgc3RhdGUudXNlci5vZHlzZWVNZW1iZXJzaGlwc1BlckNsYWltSWRzW2NoYW5uZWxJZF07XG59O1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0R2VvUmVzdHJpY3Rpb25Gb3JVcmkgPSBjcmVhdGVDYWNoZWRTZWxlY3RvcihcbiAgc2VsZWN0Q2xhaW1Gb3JVcmksXG4gIHNlbGVjdEdlb0Jsb2NrTGlzdHMsXG4gIHNlbGVjdFVzZXJMb2NhbGUsXG4gIChjbGFpbSwgZ2VvQmxvY2tMaXN0cywgbG9jYWxlOiBMb2NhbGVJbmZvKSA9PiB7XG4gICAgcmV0dXJuIGdldEdlb1Jlc3RyaWN0aW9uRm9yQ2xhaW0oY2xhaW0sIGxvY2FsZSwgZ2VvQmxvY2tMaXN0cyk7XG4gIH1cbikoKHN0YXRlLCB1cmkpID0+IFN0cmluZyh1cmkpKTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdENsYWltUmVwb3N0ZWRBbW91bnRGb3JVcmkgPSAoc3RhdGU6IFN0YXRlLCB1cmk6IHN0cmluZykgPT4ge1xuICBjb25zdCBjbGFpbSA9IHNlbGVjdENsYWltRm9yVXJpKHN0YXRlKTtcbiAgcmV0dXJuIGdldENsYWltUmVwb3N0ZWRBbW91bnQoY2xhaW0pO1xufTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdFRha2VPdmVyQW1vdW50Rm9yTmFtZSA9IChzdGF0ZTogU3RhdGUsIG5hbWU6IHN0cmluZykgPT4ge1xuICBpZiAoIW5hbWUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IHNob3J0VXJpID0gYnVpbGRVUkkoeyBzdHJlYW1OYW1lOiBuYW1lIH0pO1xuICBjb25zdCB3aW5uaW5nQ2xhaW0gPSBzZWxlY3RDbGFpbUZvclVyaShzdGF0ZSwgc2hvcnRVcmkpO1xuXG4gIHJldHVybiB3aW5uaW5nQ2xhaW0gPyB3aW5uaW5nQ2xhaW0ubWV0YS5lZmZlY3RpdmVfYW1vdW50IHx8IHdpbm5pbmdDbGFpbS5hbW91bnQgOiBudWxsO1xufTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdE15UHVyY2hhc2VkQ2xhaW1zID0gY3JlYXRlU2VsZWN0b3Ioc2VsZWN0U3RhdGUsIChzdGF0ZSkgPT4gc3RhdGUubXlQdXJjaGFzZWRDbGFpbXMgfHwgW10pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0UHVyY2hhc2VNYWRlRm9yQ2xhaW1JZCA9IChzdGF0ZTogU3RhdGUsIGNsYWltSWQ6IHN0cmluZykgPT4ge1xuICBjb25zdCBwdXJjaGFzZWRDbGFpbXMgPSBzZWxlY3RNeVB1cmNoYXNlZENsYWltcyhzdGF0ZSk7XG5cbiAgcmV0dXJuIHB1cmNoYXNlZENsYWltcy5zb21lKFxuICAgIChwKSA9PiAocC5yZWZlcmVuY2VfY2xhaW1faWQgPT09IGNsYWltSWQgfHwgcC50YXJnZXRfY2xhaW1faWQgPT09IGNsYWltSWQpICYmIHAudHlwZSAhPT0gJ3JlbnRhbCdcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RWYWxpZFJlbnRhbFB1cmNoYXNlRm9yQ2xhaW1JZCA9IChzdGF0ZTogU3RhdGUsIGNsYWltSWQ6IHN0cmluZykgPT4ge1xuICBjb25zdCBwdXJjaGFzZWRDbGFpbXMgPSBzZWxlY3RNeVB1cmNoYXNlZENsYWltcyhzdGF0ZSk7XG5cbiAgY29uc3QgdmFsaWRSZW50YWxDbGFpbUZvckNsYWltSWQgPSBwdXJjaGFzZWRDbGFpbXMuZmluZCgocHVyY2hhc2UpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgcHVyY2hhc2UudGFyZ2V0X2NsYWltX2lkID09PSBjbGFpbUlkICYmXG4gICAgICBwdXJjaGFzZS50eXBlID09PSAncmVudGFsJyAmJlxuICAgICAgbmV3IERhdGUocHVyY2hhc2UudmFsaWRfdGhyb3VnaCkgPiBuZXcgRGF0ZSgpIC8vIGV4cGlyeSBkYXRlIGlzIHNvbWV0aW1lIGluIHRoZSBmdXR1cmVcbiAgICApO1xuICB9KTtcblxuICByZXR1cm4gdmFsaWRSZW50YWxDbGFpbUZvckNsYWltSWQ7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBWEE7QUFlQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFWQTtBQWFBO0FBaEJBO0FBbUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQURBO0FBSUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBUEE7QUFBQTtBQVVBO0FBQUE7QUFFQTtBQUZBO0FBQUE7QUFLQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUdBO0FBSEE7QUFJQTtBQUFBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFKQTtBQUpBO0FBV0E7QUFDQTtBQUNBO0FBbENBO0FBb0NBO0FBQUE7QUFwQ0E7QUFzQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUxBO0FBUUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBUUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBSkE7QUFKQTtBQVdBO0FBQ0E7QUFDQTtBQTlCQTtBQUFBO0FBQ0E7QUFpQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBYkE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUdBO0FBQUE7QUFFQTtBQUNBO0FBSEE7QUFBQTtBQU1BO0FBSUE7QUFBQTtBQUFBO0FBSkE7QUFTQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU1BO0FBVkE7QUFZQTtBQVpBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXJCQTtBQXdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBZUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFuQkE7QUFBQTtBQXlCQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQUE7QUFBQTtBQVBBO0FBQUE7QUFDQTtBQVVBO0FBQUE7QUFFQTtBQUNBO0FBSEE7QUFBQTtBQUNBO0FBTUE7QUFBQTtBQUVBO0FBQ0E7QUFIQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFBQTtBQUVBO0FBQ0E7QUFIQTtBQUFBO0FBTUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBTEE7QUFBQTtBQVFBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFmQTtBQWlCQTtBQWpCQTtBQW1CQTtBQUFBO0FBRUE7QUFGQTtBQUFBO0FBS0E7QUFBQTtBQUVBO0FBRkE7QUFBQTtBQU9BO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQU5BO0FBQUE7QUFTQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFSQTtBQUFBO0FBV0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUtBO0FBQ0E7QUFiQTtBQUFBO0FBZ0JBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFGQTtBQUlBO0FBSkE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUtBO0FBRUE7QUFDQTtBQUVBO0FBSEE7QUFNQTtBQWJBO0FBaUJBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFEQTtBQUFBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFEQTtBQUdBO0FBREE7QUFHQTtBQUNBO0FBUkE7QUFXQTtBQVhBO0FBREE7QUFnQkE7QUFFQTtBQUFBO0FBQUE7QUFGQTtBQUtBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUxBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUZBO0FBSUE7QUFFQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFiQTtBQUFBO0FBZ0JBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFHQTtBQUhBO0FBQUE7QUFNQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUxBO0FBRkE7QUFBQTtBQVdBO0FBQUE7QUFLQTtBQUNBO0FBREE7QUFMQTtBQUFBO0FBV0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQVRBO0FBV0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUFBO0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFkQTtBQWdCQTtBQWhCQTtBQWtCQTtBQUNBO0FBQ0E7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFBQTtBQUFBO0FBQ0E7QUFNQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBWkE7QUFBQTtBQWVBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQVJBO0FBQUE7QUFXQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFIQTtBQUFBO0FBTUE7QUFDQTtBQUFBO0FBQUE7QUFEQTtBQUVBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRkE7QUFHQTtBQUhBO0FBS0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUZBO0FBR0E7QUFIQTtBQUtBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBYkE7QUFjQTtBQWRBO0FBZ0JBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFKQTtBQU1BO0FBTkE7QUFRQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBRkE7QUFLQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBRUE7QUFDQTtBQURBO0FBQUE7QUFHQTtBQUhBO0FBTUE7QUFmQTtBQUFBO0FBa0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBSEE7QUFBQTtBQU1BO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUxBO0FBQUE7QUFRQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBTEE7QUFBQTtBQVFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFBQTtBQVNBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFNQTtBQU5BO0FBUUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFaQTtBQUNBO0FBYUE7QUFoQkE7QUFpQkE7QUFqQkE7QUFtQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFaQTtBQWdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFLQTtBQUxBO0FBT0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFSQTtBQVdBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFIQTtBQVFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFEQTtBQVFBO0FBWEEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../ui/redux/selectors/claims.js\n");

/***/ }),

/***/ "../ui/redux/selectors/file_info.js":
/*!******************************************!*\
  !*** ../ui/redux/selectors/file_info.js ***!
  \******************************************/
/*! exports provided: selectState, selectFileInfosByOutpoint, selectIsFetchingFileList, selectFetchingOutpoints, selectIsFetchingFileListDownloadedOrPublished, selectFileInfoForUri, makeSelectFileInfoForUri, selectDownloadingByOutpoint, makeSelectDownloadingForUri, selectOutpointFetchingForUri, selectUrisLoading, makeSelectLoadingForUri, selectFileInfosDownloaded, selectDownloadingFileInfos, selectTotalDownloadProgress, selectFileInfoErrors, selectFileListPublishedSort, selectFileListDownloadedSort, selectDownloadedUris, makeSelectMediaTypeForUri, makeSelectUriIsStreamable, makeSelectDownloadPathForUri, makeSelectFilePartlyDownloaded, makeSelectFileNameForUri, selectDownloadUrlsCount, makeSelectSearchDownloadUrlsForPage, makeSelectSearchDownloadUrlsCount, selectStreamingUrlForUri */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectState\", function() { return selectState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectFileInfosByOutpoint\", function() { return selectFileInfosByOutpoint; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectIsFetchingFileList\", function() { return selectIsFetchingFileList; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectFetchingOutpoints\", function() { return selectFetchingOutpoints; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectIsFetchingFileListDownloadedOrPublished\", function() { return selectIsFetchingFileListDownloadedOrPublished; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectFileInfoForUri\", function() { return selectFileInfoForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectFileInfoForUri\", function() { return makeSelectFileInfoForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectDownloadingByOutpoint\", function() { return selectDownloadingByOutpoint; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectDownloadingForUri\", function() { return makeSelectDownloadingForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectOutpointFetchingForUri\", function() { return selectOutpointFetchingForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectUrisLoading\", function() { return selectUrisLoading; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectLoadingForUri\", function() { return makeSelectLoadingForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectFileInfosDownloaded\", function() { return selectFileInfosDownloaded; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectDownloadingFileInfos\", function() { return selectDownloadingFileInfos; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectTotalDownloadProgress\", function() { return selectTotalDownloadProgress; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectFileInfoErrors\", function() { return selectFileInfoErrors; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectFileListPublishedSort\", function() { return selectFileListPublishedSort; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectFileListDownloadedSort\", function() { return selectFileListDownloadedSort; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectDownloadedUris\", function() { return selectDownloadedUris; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectMediaTypeForUri\", function() { return makeSelectMediaTypeForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectUriIsStreamable\", function() { return makeSelectUriIsStreamable; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectDownloadPathForUri\", function() { return makeSelectDownloadPathForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectFilePartlyDownloaded\", function() { return makeSelectFilePartlyDownloaded; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectFileNameForUri\", function() { return makeSelectFileNameForUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectDownloadUrlsCount\", function() { return selectDownloadUrlsCount; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectSearchDownloadUrlsForPage\", function() { return makeSelectSearchDownloadUrlsForPage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeSelectSearchDownloadUrlsCount\", function() { return makeSelectSearchDownloadUrlsCount; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectStreamingUrlForUri\", function() { return selectStreamingUrlForUri; });\n/* harmony import */ var reselect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! reselect */ \"../node_modules/reselect/es/index.js\");\n/* harmony import */ var redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/selectors/claims */ \"../ui/redux/selectors/claims.js\");\n/* harmony import */ var util_lbryURI__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! util/lbryURI */ \"../ui/util/lbryURI.js\");\n/* harmony import */ var lbry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lbry */ \"../ui/lbry.js\");\n/* harmony import */ var constants_claim__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! constants/claim */ \"../ui/constants/claim.js\");\n\n\n\n\n\nvar selectState = function selectState(state) {\n  return state.fileInfo || {};\n};\nvar selectFileInfosByOutpoint = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectState, function (state) {\n  return state.byOutpoint || {};\n});\nvar selectIsFetchingFileList = function selectIsFetchingFileList(state) {\n  return selectState(state).isFetchingFileList;\n};\nvar selectFetchingOutpoints = function selectFetchingOutpoints(state) {\n  return selectState(state).fetchingOutpoints;\n};\nvar selectIsFetchingFileListDownloadedOrPublished = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectIsFetchingFileList, redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectIsFetchingClaimListMine\"], function (isFetchingFileList, isFetchingClaimListMine) {\n  return isFetchingFileList || isFetchingClaimListMine;\n});\nvar selectFileInfoForUri = function selectFileInfoForUri(state, uri) {\n  var outpoint = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectClaimOutpointForUri\"])(state, uri);\n  if (!outpoint) return outpoint;\n  return selectFileInfosByOutpoint(state)[outpoint];\n};\nvar makeSelectFileInfoForUri = function makeSelectFileInfoForUri(uri) {\n  return function (state) {\n    return selectFileInfoForUri(state, uri);\n  };\n};\nvar selectDownloadingByOutpoint = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectState, function (state) {\n  return state.downloadingByOutpoint || {};\n});\nvar makeSelectDownloadingForUri = function makeSelectDownloadingForUri(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectDownloadingByOutpoint, makeSelectFileInfoForUri(uri), function (byOutpoint, fileInfo) {\n    if (!fileInfo) return false;\n    return byOutpoint[fileInfo.outpoint];\n  });\n};\nvar selectOutpointFetchingForUri = function selectOutpointFetchingForUri(state, uri) {\n  var outpoint = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectClaimOutpointForUri\"])(state, uri);\n  if (!outpoint) return false;\n  return selectFetchingOutpoints(state).includes(outpoint);\n};\nvar selectUrisLoading = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectState, function (state) {\n  return state.urisLoading || {};\n});\nvar makeSelectLoadingForUri = function makeSelectLoadingForUri(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectUrisLoading, Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"makeSelectClaimForUri\"])(uri), function (fetchingByOutpoint, claim) {\n    if (!claim) {\n      return false;\n    }\n\n    var txid = claim.txid,\n        nout = claim.nout;\n    var outpoint = \"\".concat(txid, \":\").concat(nout);\n    var isFetching = fetchingByOutpoint[outpoint];\n    return isFetching;\n  });\n};\nvar selectFileInfosDownloaded = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectFileInfosByOutpoint, redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectMyClaims\"], function (byOutpoint, myClaims) {\n  return Object.values(byOutpoint).filter(function (fileInfo) {\n    var myClaimIds = myClaims.map(function (claim) {\n      return claim.claim_id;\n    });\n    return fileInfo && myClaimIds.indexOf(fileInfo.claim_id) === -1 && (fileInfo.completed || fileInfo.written_bytes);\n  });\n});\nvar selectDownloadingFileInfos = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectDownloadingByOutpoint, selectFileInfosByOutpoint, function (downloadingByOutpoint, fileInfosByOutpoint) {\n  var outpoints = Object.keys(downloadingByOutpoint);\n  var fileInfos = [];\n  outpoints.forEach(function (outpoint) {\n    var fileInfo = fileInfosByOutpoint[outpoint];\n    if (fileInfo) fileInfos.push(fileInfo);\n  });\n  return fileInfos;\n});\nvar selectTotalDownloadProgress = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectDownloadingFileInfos, function (fileInfos) {\n  var progress = [];\n  fileInfos.forEach(function (fileInfo) {\n    progress.push(fileInfo.written_bytes / fileInfo.total_bytes * 100);\n  });\n  var totalProgress = progress.reduce(function (a, b) {\n    return a + b;\n  }, 0);\n  if (fileInfos.length > 0) return totalProgress / fileInfos.length / 100.0;\n  return -1;\n});\nvar selectFileInfoErrors = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectState, function (state) {\n  return state.errors || {};\n});\nvar selectFileListPublishedSort = function selectFileListPublishedSort(state) {\n  return selectState(state).fileListPublishedSort;\n};\nvar selectFileListDownloadedSort = function selectFileListDownloadedSort(state) {\n  return selectState(state).fileListDownloadedSort;\n};\nvar selectDownloadedUris = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectFileInfosDownloaded, // We should use permament_url but it doesn't exist in file_list\nfunction (info) {\n  return info.slice().map(function (claim) {\n    return \"lbry://\".concat(claim.claim_name, \"#\").concat(claim.claim_id);\n  });\n});\nvar makeSelectMediaTypeForUri = function makeSelectMediaTypeForUri(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(makeSelectFileInfoForUri(uri), Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"makeSelectContentTypeForUri\"])(uri), function (fileInfo, contentType) {\n    if (!fileInfo && !contentType) {\n      return undefined;\n    }\n\n    var fileName = fileInfo && fileInfo.file_name;\n    return lbry__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getMediaType(contentType, fileName);\n  });\n};\nvar makeSelectUriIsStreamable = function makeSelectUriIsStreamable(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(makeSelectMediaTypeForUri(uri), function (mediaType) {\n    var isStreamable = ['audio', 'video', 'image'].indexOf(mediaType) !== -1;\n    return isStreamable;\n  });\n};\nvar makeSelectDownloadPathForUri = function makeSelectDownloadPathForUri(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(makeSelectFileInfoForUri(uri), function (fileInfo) {\n    return fileInfo && fileInfo.download_path;\n  });\n};\nvar makeSelectFilePartlyDownloaded = function makeSelectFilePartlyDownloaded(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(makeSelectFileInfoForUri(uri), function (fileInfo) {\n    if (!fileInfo) {\n      return false;\n    }\n\n    return fileInfo.written_bytes > 0 || fileInfo.blobs_completed > 0;\n  });\n};\nvar makeSelectFileNameForUri = function makeSelectFileNameForUri(uri) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(makeSelectFileInfoForUri(uri), function (fileInfo) {\n    return fileInfo && fileInfo.file_name;\n  });\n};\nvar selectDownloadUrlsCount = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectDownloadedUris, function (uris) {\n  return uris.length;\n});\n\nfunction filterFileInfos(fileInfos, query) {\n  if (query) {\n    var queryMatchRegExp = new RegExp(query, 'i');\n    return fileInfos.filter(function (fileInfo) {\n      var metadata = fileInfo.metadata;\n      return metadata.title && metadata.title.match(queryMatchRegExp) || fileInfo.channel_name && fileInfo.channel_name.match(queryMatchRegExp) || fileInfo.claim_name && fileInfo.claim_name.match(queryMatchRegExp);\n    });\n  }\n\n  return fileInfos;\n}\n\nvar makeSelectSearchDownloadUrlsForPage = function makeSelectSearchDownloadUrlsForPage(query) {\n  var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectFileInfosDownloaded, function (fileInfos) {\n    var matchingFileInfos = filterFileInfos(fileInfos, query);\n    var start = (Number(page) - 1) * Number(constants_claim__WEBPACK_IMPORTED_MODULE_4__[\"PAGE_SIZE\"]);\n    var end = Number(page) * Number(constants_claim__WEBPACK_IMPORTED_MODULE_4__[\"PAGE_SIZE\"]);\n    return matchingFileInfos && matchingFileInfos.length ? matchingFileInfos.slice(start, end).map(function (fileInfo) {\n      return Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_2__[\"buildURI\"])({\n        streamName: fileInfo.claim_name,\n        channelName: fileInfo.channel_name,\n        channelClaimId: fileInfo.channel_claim_id\n      });\n    }) : [];\n  });\n};\nvar makeSelectSearchDownloadUrlsCount = function makeSelectSearchDownloadUrlsCount(query) {\n  return Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectFileInfosDownloaded, function (fileInfos) {\n    return fileInfos && fileInfos.length ? filterFileInfos(fileInfos, query).length : 0;\n  });\n};\nvar selectStreamingUrlForUri = function selectStreamingUrlForUri(state, uri) {\n  var fileInfo = selectFileInfoForUri(state, uri);\n  if (!fileInfo) return fileInfo;\n  return fileInfo.streaming_url;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvcmVkdXgvc2VsZWN0b3JzL2ZpbGVfaW5mby5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi91aS9yZWR1eC9zZWxlY3RvcnMvZmlsZV9pbmZvLmpzP2Q4YjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlU2VsZWN0b3IgfSBmcm9tICdyZXNlbGVjdCc7XG5pbXBvcnQge1xuICBzZWxlY3RDbGFpbU91dHBvaW50Rm9yVXJpLFxuICBzZWxlY3RJc0ZldGNoaW5nQ2xhaW1MaXN0TWluZSxcbiAgc2VsZWN0TXlDbGFpbXMsXG4gIG1ha2VTZWxlY3RDb250ZW50VHlwZUZvclVyaSxcbiAgbWFrZVNlbGVjdENsYWltRm9yVXJpLFxufSBmcm9tICdyZWR1eC9zZWxlY3RvcnMvY2xhaW1zJztcbmltcG9ydCB7IGJ1aWxkVVJJIH0gZnJvbSAndXRpbC9sYnJ5VVJJJztcbmltcG9ydCBMYnJ5IGZyb20gJ2xicnknO1xuaW1wb3J0IHsgUEFHRV9TSVpFIH0gZnJvbSAnY29uc3RhbnRzL2NsYWltJztcblxuZXhwb3J0IGNvbnN0IHNlbGVjdFN0YXRlID0gKHN0YXRlKSA9PiBzdGF0ZS5maWxlSW5mbyB8fCB7fTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdEZpbGVJbmZvc0J5T3V0cG9pbnQgPSBjcmVhdGVTZWxlY3RvcihzZWxlY3RTdGF0ZSwgKHN0YXRlKSA9PiBzdGF0ZS5ieU91dHBvaW50IHx8IHt9KTtcbmV4cG9ydCBjb25zdCBzZWxlY3RJc0ZldGNoaW5nRmlsZUxpc3QgPSAoc3RhdGUpID0+IHNlbGVjdFN0YXRlKHN0YXRlKS5pc0ZldGNoaW5nRmlsZUxpc3Q7XG5leHBvcnQgY29uc3Qgc2VsZWN0RmV0Y2hpbmdPdXRwb2ludHMgPSAoc3RhdGUpID0+IHNlbGVjdFN0YXRlKHN0YXRlKS5mZXRjaGluZ091dHBvaW50cztcblxuZXhwb3J0IGNvbnN0IHNlbGVjdElzRmV0Y2hpbmdGaWxlTGlzdERvd25sb2FkZWRPclB1Ymxpc2hlZCA9IGNyZWF0ZVNlbGVjdG9yKFxuICBzZWxlY3RJc0ZldGNoaW5nRmlsZUxpc3QsXG4gIHNlbGVjdElzRmV0Y2hpbmdDbGFpbUxpc3RNaW5lLFxuICAoaXNGZXRjaGluZ0ZpbGVMaXN0LCBpc0ZldGNoaW5nQ2xhaW1MaXN0TWluZSkgPT4gaXNGZXRjaGluZ0ZpbGVMaXN0IHx8IGlzRmV0Y2hpbmdDbGFpbUxpc3RNaW5lXG4pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0RmlsZUluZm9Gb3JVcmkgPSAoc3RhdGUsIHVyaSkgPT4ge1xuICBjb25zdCBvdXRwb2ludCA9IHNlbGVjdENsYWltT3V0cG9pbnRGb3JVcmkoc3RhdGUsIHVyaSk7XG4gIGlmICghb3V0cG9pbnQpIHJldHVybiBvdXRwb2ludDtcblxuICByZXR1cm4gc2VsZWN0RmlsZUluZm9zQnlPdXRwb2ludChzdGF0ZSlbb3V0cG9pbnRdO1xufTtcbmV4cG9ydCBjb25zdCBtYWtlU2VsZWN0RmlsZUluZm9Gb3JVcmkgPSAodXJpKSA9PiAoc3RhdGUpID0+IHNlbGVjdEZpbGVJbmZvRm9yVXJpKHN0YXRlLCB1cmkpO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0RG93bmxvYWRpbmdCeU91dHBvaW50ID0gY3JlYXRlU2VsZWN0b3Ioc2VsZWN0U3RhdGUsIChzdGF0ZSkgPT4gc3RhdGUuZG93bmxvYWRpbmdCeU91dHBvaW50IHx8IHt9KTtcblxuZXhwb3J0IGNvbnN0IG1ha2VTZWxlY3REb3dubG9hZGluZ0ZvclVyaSA9ICh1cmkpID0+XG4gIGNyZWF0ZVNlbGVjdG9yKHNlbGVjdERvd25sb2FkaW5nQnlPdXRwb2ludCwgbWFrZVNlbGVjdEZpbGVJbmZvRm9yVXJpKHVyaSksIChieU91dHBvaW50LCBmaWxlSW5mbykgPT4ge1xuICAgIGlmICghZmlsZUluZm8pIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gYnlPdXRwb2ludFtmaWxlSW5mby5vdXRwb2ludF07XG4gIH0pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0T3V0cG9pbnRGZXRjaGluZ0ZvclVyaSA9IChzdGF0ZSwgdXJpKSA9PiB7XG4gIGNvbnN0IG91dHBvaW50ID0gc2VsZWN0Q2xhaW1PdXRwb2ludEZvclVyaShzdGF0ZSwgdXJpKTtcbiAgaWYgKCFvdXRwb2ludCkgcmV0dXJuIGZhbHNlO1xuXG4gIHJldHVybiBzZWxlY3RGZXRjaGluZ091dHBvaW50cyhzdGF0ZSkuaW5jbHVkZXMob3V0cG9pbnQpO1xufTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdFVyaXNMb2FkaW5nID0gY3JlYXRlU2VsZWN0b3Ioc2VsZWN0U3RhdGUsIChzdGF0ZSkgPT4gc3RhdGUudXJpc0xvYWRpbmcgfHwge30pO1xuXG5leHBvcnQgY29uc3QgbWFrZVNlbGVjdExvYWRpbmdGb3JVcmkgPSAodXJpKSA9PlxuICBjcmVhdGVTZWxlY3RvcihzZWxlY3RVcmlzTG9hZGluZywgbWFrZVNlbGVjdENsYWltRm9yVXJpKHVyaSksIChmZXRjaGluZ0J5T3V0cG9pbnQsIGNsYWltKSA9PiB7XG4gICAgaWYgKCFjbGFpbSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IHsgdHhpZCwgbm91dCB9ID0gY2xhaW07XG4gICAgY29uc3Qgb3V0cG9pbnQgPSBgJHt0eGlkfToke25vdXR9YDtcbiAgICBjb25zdCBpc0ZldGNoaW5nID0gZmV0Y2hpbmdCeU91dHBvaW50W291dHBvaW50XTtcbiAgICByZXR1cm4gaXNGZXRjaGluZztcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RGaWxlSW5mb3NEb3dubG9hZGVkID0gY3JlYXRlU2VsZWN0b3IoXG4gIHNlbGVjdEZpbGVJbmZvc0J5T3V0cG9pbnQsXG4gIHNlbGVjdE15Q2xhaW1zLFxuICAoYnlPdXRwb2ludCwgbXlDbGFpbXMpID0+XG4gICAgT2JqZWN0LnZhbHVlcyhieU91dHBvaW50KS5maWx0ZXIoKGZpbGVJbmZvKSA9PiB7XG4gICAgICBjb25zdCBteUNsYWltSWRzID0gbXlDbGFpbXMubWFwKChjbGFpbSkgPT4gY2xhaW0uY2xhaW1faWQpO1xuXG4gICAgICByZXR1cm4gZmlsZUluZm8gJiYgbXlDbGFpbUlkcy5pbmRleE9mKGZpbGVJbmZvLmNsYWltX2lkKSA9PT0gLTEgJiYgKGZpbGVJbmZvLmNvbXBsZXRlZCB8fCBmaWxlSW5mby53cml0dGVuX2J5dGVzKTtcbiAgICB9KVxuKTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdERvd25sb2FkaW5nRmlsZUluZm9zID0gY3JlYXRlU2VsZWN0b3IoXG4gIHNlbGVjdERvd25sb2FkaW5nQnlPdXRwb2ludCxcbiAgc2VsZWN0RmlsZUluZm9zQnlPdXRwb2ludCxcbiAgKGRvd25sb2FkaW5nQnlPdXRwb2ludCwgZmlsZUluZm9zQnlPdXRwb2ludCkgPT4ge1xuICAgIGNvbnN0IG91dHBvaW50cyA9IE9iamVjdC5rZXlzKGRvd25sb2FkaW5nQnlPdXRwb2ludCk7XG4gICAgY29uc3QgZmlsZUluZm9zID0gW107XG5cbiAgICBvdXRwb2ludHMuZm9yRWFjaCgob3V0cG9pbnQpID0+IHtcbiAgICAgIGNvbnN0IGZpbGVJbmZvID0gZmlsZUluZm9zQnlPdXRwb2ludFtvdXRwb2ludF07XG5cbiAgICAgIGlmIChmaWxlSW5mbykgZmlsZUluZm9zLnB1c2goZmlsZUluZm8pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGZpbGVJbmZvcztcbiAgfVxuKTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdFRvdGFsRG93bmxvYWRQcm9ncmVzcyA9IGNyZWF0ZVNlbGVjdG9yKHNlbGVjdERvd25sb2FkaW5nRmlsZUluZm9zLCAoZmlsZUluZm9zKSA9PiB7XG4gIGNvbnN0IHByb2dyZXNzID0gW107XG5cbiAgZmlsZUluZm9zLmZvckVhY2goKGZpbGVJbmZvKSA9PiB7XG4gICAgcHJvZ3Jlc3MucHVzaCgoZmlsZUluZm8ud3JpdHRlbl9ieXRlcyAvIGZpbGVJbmZvLnRvdGFsX2J5dGVzKSAqIDEwMCk7XG4gIH0pO1xuXG4gIGNvbnN0IHRvdGFsUHJvZ3Jlc3MgPSBwcm9ncmVzcy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKTtcblxuICBpZiAoZmlsZUluZm9zLmxlbmd0aCA+IDApIHJldHVybiB0b3RhbFByb2dyZXNzIC8gZmlsZUluZm9zLmxlbmd0aCAvIDEwMC4wO1xuICByZXR1cm4gLTE7XG59KTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdEZpbGVJbmZvRXJyb3JzID0gY3JlYXRlU2VsZWN0b3Ioc2VsZWN0U3RhdGUsIChzdGF0ZSkgPT4gc3RhdGUuZXJyb3JzIHx8IHt9KTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdEZpbGVMaXN0UHVibGlzaGVkU29ydCA9IChzdGF0ZSkgPT4gc2VsZWN0U3RhdGUoc3RhdGUpLmZpbGVMaXN0UHVibGlzaGVkU29ydDtcbmV4cG9ydCBjb25zdCBzZWxlY3RGaWxlTGlzdERvd25sb2FkZWRTb3J0ID0gKHN0YXRlKSA9PiBzZWxlY3RTdGF0ZShzdGF0ZSkuZmlsZUxpc3REb3dubG9hZGVkU29ydDtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdERvd25sb2FkZWRVcmlzID0gY3JlYXRlU2VsZWN0b3IoXG4gIHNlbGVjdEZpbGVJbmZvc0Rvd25sb2FkZWQsXG4gIC8vIFdlIHNob3VsZCB1c2UgcGVybWFtZW50X3VybCBidXQgaXQgZG9lc24ndCBleGlzdCBpbiBmaWxlX2xpc3RcbiAgKGluZm8pID0+IGluZm8uc2xpY2UoKS5tYXAoKGNsYWltKSA9PiBgbGJyeTovLyR7Y2xhaW0uY2xhaW1fbmFtZX0jJHtjbGFpbS5jbGFpbV9pZH1gKVxuKTtcblxuZXhwb3J0IGNvbnN0IG1ha2VTZWxlY3RNZWRpYVR5cGVGb3JVcmkgPSAodXJpKSA9PlxuICBjcmVhdGVTZWxlY3RvcihtYWtlU2VsZWN0RmlsZUluZm9Gb3JVcmkodXJpKSwgbWFrZVNlbGVjdENvbnRlbnRUeXBlRm9yVXJpKHVyaSksIChmaWxlSW5mbywgY29udGVudFR5cGUpID0+IHtcbiAgICBpZiAoIWZpbGVJbmZvICYmICFjb250ZW50VHlwZSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBjb25zdCBmaWxlTmFtZSA9IGZpbGVJbmZvICYmIGZpbGVJbmZvLmZpbGVfbmFtZTtcbiAgICByZXR1cm4gTGJyeS5nZXRNZWRpYVR5cGUoY29udGVudFR5cGUsIGZpbGVOYW1lKTtcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBtYWtlU2VsZWN0VXJpSXNTdHJlYW1hYmxlID0gKHVyaSkgPT5cbiAgY3JlYXRlU2VsZWN0b3IobWFrZVNlbGVjdE1lZGlhVHlwZUZvclVyaSh1cmkpLCAobWVkaWFUeXBlKSA9PiB7XG4gICAgY29uc3QgaXNTdHJlYW1hYmxlID0gWydhdWRpbycsICd2aWRlbycsICdpbWFnZSddLmluZGV4T2YobWVkaWFUeXBlKSAhPT0gLTE7XG4gICAgcmV0dXJuIGlzU3RyZWFtYWJsZTtcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBtYWtlU2VsZWN0RG93bmxvYWRQYXRoRm9yVXJpID0gKHVyaSkgPT5cbiAgY3JlYXRlU2VsZWN0b3IobWFrZVNlbGVjdEZpbGVJbmZvRm9yVXJpKHVyaSksIChmaWxlSW5mbykgPT4ge1xuICAgIHJldHVybiBmaWxlSW5mbyAmJiBmaWxlSW5mby5kb3dubG9hZF9wYXRoO1xuICB9KTtcblxuZXhwb3J0IGNvbnN0IG1ha2VTZWxlY3RGaWxlUGFydGx5RG93bmxvYWRlZCA9ICh1cmkpID0+XG4gIGNyZWF0ZVNlbGVjdG9yKG1ha2VTZWxlY3RGaWxlSW5mb0ZvclVyaSh1cmkpLCAoZmlsZUluZm8pID0+IHtcbiAgICBpZiAoIWZpbGVJbmZvKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbGVJbmZvLndyaXR0ZW5fYnl0ZXMgPiAwIHx8IGZpbGVJbmZvLmJsb2JzX2NvbXBsZXRlZCA+IDA7XG4gIH0pO1xuXG5leHBvcnQgY29uc3QgbWFrZVNlbGVjdEZpbGVOYW1lRm9yVXJpID0gKHVyaSkgPT5cbiAgY3JlYXRlU2VsZWN0b3IobWFrZVNlbGVjdEZpbGVJbmZvRm9yVXJpKHVyaSksIChmaWxlSW5mbykgPT4ge1xuICAgIHJldHVybiBmaWxlSW5mbyAmJiBmaWxlSW5mby5maWxlX25hbWU7XG4gIH0pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0RG93bmxvYWRVcmxzQ291bnQgPSBjcmVhdGVTZWxlY3RvcihzZWxlY3REb3dubG9hZGVkVXJpcywgKHVyaXMpID0+IHVyaXMubGVuZ3RoKTtcblxuZnVuY3Rpb24gZmlsdGVyRmlsZUluZm9zKGZpbGVJbmZvcywgcXVlcnkpIHtcbiAgaWYgKHF1ZXJ5KSB7XG4gICAgY29uc3QgcXVlcnlNYXRjaFJlZ0V4cCA9IG5ldyBSZWdFeHAocXVlcnksICdpJyk7XG4gICAgcmV0dXJuIGZpbGVJbmZvcy5maWx0ZXIoKGZpbGVJbmZvKSA9PiB7XG4gICAgICBjb25zdCB7IG1ldGFkYXRhIH0gPSBmaWxlSW5mbztcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgKG1ldGFkYXRhLnRpdGxlICYmIG1ldGFkYXRhLnRpdGxlLm1hdGNoKHF1ZXJ5TWF0Y2hSZWdFeHApKSB8fFxuICAgICAgICAoZmlsZUluZm8uY2hhbm5lbF9uYW1lICYmIGZpbGVJbmZvLmNoYW5uZWxfbmFtZS5tYXRjaChxdWVyeU1hdGNoUmVnRXhwKSkgfHxcbiAgICAgICAgKGZpbGVJbmZvLmNsYWltX25hbWUgJiYgZmlsZUluZm8uY2xhaW1fbmFtZS5tYXRjaChxdWVyeU1hdGNoUmVnRXhwKSlcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gZmlsZUluZm9zO1xufVxuXG5leHBvcnQgY29uc3QgbWFrZVNlbGVjdFNlYXJjaERvd25sb2FkVXJsc0ZvclBhZ2UgPSAocXVlcnksIHBhZ2UgPSAxKSA9PlxuICBjcmVhdGVTZWxlY3RvcihzZWxlY3RGaWxlSW5mb3NEb3dubG9hZGVkLCAoZmlsZUluZm9zKSA9PiB7XG4gICAgY29uc3QgbWF0Y2hpbmdGaWxlSW5mb3MgPSBmaWx0ZXJGaWxlSW5mb3MoZmlsZUluZm9zLCBxdWVyeSk7XG4gICAgY29uc3Qgc3RhcnQgPSAoTnVtYmVyKHBhZ2UpIC0gMSkgKiBOdW1iZXIoUEFHRV9TSVpFKTtcbiAgICBjb25zdCBlbmQgPSBOdW1iZXIocGFnZSkgKiBOdW1iZXIoUEFHRV9TSVpFKTtcblxuICAgIHJldHVybiBtYXRjaGluZ0ZpbGVJbmZvcyAmJiBtYXRjaGluZ0ZpbGVJbmZvcy5sZW5ndGhcbiAgICAgID8gbWF0Y2hpbmdGaWxlSW5mb3Muc2xpY2Uoc3RhcnQsIGVuZCkubWFwKChmaWxlSW5mbykgPT5cbiAgICAgICAgICBidWlsZFVSSSh7XG4gICAgICAgICAgICBzdHJlYW1OYW1lOiBmaWxlSW5mby5jbGFpbV9uYW1lLFxuICAgICAgICAgICAgY2hhbm5lbE5hbWU6IGZpbGVJbmZvLmNoYW5uZWxfbmFtZSxcbiAgICAgICAgICAgIGNoYW5uZWxDbGFpbUlkOiBmaWxlSW5mby5jaGFubmVsX2NsYWltX2lkLFxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIDogW107XG4gIH0pO1xuXG5leHBvcnQgY29uc3QgbWFrZVNlbGVjdFNlYXJjaERvd25sb2FkVXJsc0NvdW50ID0gKHF1ZXJ5KSA9PlxuICBjcmVhdGVTZWxlY3RvcihzZWxlY3RGaWxlSW5mb3NEb3dubG9hZGVkLCAoZmlsZUluZm9zKSA9PiB7XG4gICAgcmV0dXJuIGZpbGVJbmZvcyAmJiBmaWxlSW5mb3MubGVuZ3RoID8gZmlsdGVyRmlsZUluZm9zKGZpbGVJbmZvcywgcXVlcnkpLmxlbmd0aCA6IDA7XG4gIH0pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0U3RyZWFtaW5nVXJsRm9yVXJpID0gKHN0YXRlLCB1cmkpID0+IHtcbiAgY29uc3QgZmlsZUluZm8gPSBzZWxlY3RGaWxlSW5mb0ZvclVyaShzdGF0ZSwgdXJpKTtcbiAgaWYgKCFmaWxlSW5mbykgcmV0dXJuIGZpbGVJbmZvO1xuXG4gIHJldHVybiBmaWxlSW5mby5zdHJlYW1pbmdfdXJsO1xufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFHQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUhBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUpBO0FBT0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQVRBO0FBQUE7QUFZQTtBQUdBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFKQTtBQUhBO0FBV0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBSEE7QUFNQTtBQWJBO0FBaUJBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFJQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBVkE7QUFhQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBSEE7QUFNQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFBQTtBQVVBO0FBQUE7QUFFQTtBQUNBO0FBSEE7QUFBQTtBQU1BO0FBQUE7QUFFQTtBQUZBO0FBQUE7QUFLQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQUE7QUFTQTtBQUFBO0FBRUE7QUFGQTtBQUFBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFIQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFGQTtBQU5BO0FBQUE7QUFpQkE7QUFBQTtBQUVBO0FBRkE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBSkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../ui/redux/selectors/file_info.js\n");

/***/ }),

/***/ "../ui/util/search.js":
/*!****************************!*\
  !*** ../ui/util/search.js ***!
  \****************************/
/*! exports provided: createNormalizedSearchKey, getUriForSearchTerm, getRecommendationSearchOptions, getRecommendationSearchKey, tagSearchCsOptionsHook */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createNormalizedSearchKey\", function() { return createNormalizedSearchKey; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getUriForSearchTerm\", function() { return getUriForSearchTerm; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getRecommendationSearchOptions\", function() { return getRecommendationSearchOptions; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getRecommendationSearchKey\", function() { return getRecommendationSearchKey; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"tagSearchCsOptionsHook\", function() { return tagSearchCsOptionsHook; });\n/* harmony import */ var util_lbryURI__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! util/lbryURI */ \"../ui/util/lbryURI.js\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! config */ \"../config.js\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(config__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var constants_claim_search__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! constants/claim_search */ \"../ui/constants/claim_search.js\");\n/* harmony import */ var constants_search__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! constants/search */ \"../ui/constants/search.js\");\n/* harmony import */ var util_query_params__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! util/query-params */ \"../ui/util/query-params.js\");\n\n\n\n\n\nfunction createNormalizedSearchKey(query) {\n  var removeParam = function removeParam(query, param) {\n    // TODO: find a standard way to do this.\n    if (query.includes(param)) {\n      var a = query.indexOf(param);\n      var b = query.indexOf('&', a + param.length);\n\n      if (b > a) {\n        query = query.substring(0, a) + query.substring(b);\n      } else {\n        query = query.substring(0, a);\n      }\n    }\n\n    return query;\n  };\n\n  var normalizedQuery = query; // Ignore the \"page\" (`from`) because we don't care what the last page searched was, we want everything:\n\n  normalizedQuery = removeParam(normalizedQuery, '&from='); // Remove FYP additional info:\n\n  normalizedQuery = removeParam(normalizedQuery, '&gid=');\n  normalizedQuery = removeParam(normalizedQuery, '&uuid=');\n  return normalizedQuery;\n}\n/**\n * getUriForSearchTerm\n * @param term\n * @returns {string[]|*[]|(string|string)[]}\n */\n\nfunction getUriForSearchTerm(term) {\n  var WEB_DEV_PREFIX = \"\".concat(config__WEBPACK_IMPORTED_MODULE_1__[\"URL_DEV\"], \"/\");\n  var WEB_LOCAL_PREFIX = \"\".concat(config__WEBPACK_IMPORTED_MODULE_1__[\"URL_LOCAL\"], \"/\");\n  var WEB_PROD_PREFIX = \"\".concat(config__WEBPACK_IMPORTED_MODULE_1__[\"URL\"], \"/\");\n  var ODYSEE_PREFIX = \"https://odysee.com/\";\n  var includesLbryTvProd = term.includes(WEB_PROD_PREFIX);\n  var includesOdysee = term.includes(ODYSEE_PREFIX);\n  var includesLbryTvLocal = term.includes(WEB_LOCAL_PREFIX);\n  var includesLbryTvDev = term.includes(WEB_DEV_PREFIX);\n  var wasCopiedFromWeb = includesLbryTvDev || includesLbryTvLocal || includesLbryTvProd || includesOdysee;\n  var isLbryUrl = term.startsWith('lbry://') && term !== 'lbry://';\n  var error = '';\n\n  var addLbryIfNot = function addLbryIfNot(term) {\n    return term.startsWith('lbry://') ? term : \"lbry://\".concat(term);\n  };\n\n  if (wasCopiedFromWeb) {\n    var prefix = WEB_PROD_PREFIX;\n    if (includesLbryTvLocal) prefix = WEB_LOCAL_PREFIX;\n    if (includesLbryTvDev) prefix = WEB_DEV_PREFIX;\n    if (includesOdysee) prefix = ODYSEE_PREFIX;\n    var query = term && term.slice(prefix.length).replace(/:/g, '#') || '';\n\n    try {\n      var lbryUrl = \"lbry://\".concat(query);\n      Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_0__[\"parseURI\"])(lbryUrl);\n      return [lbryUrl, null];\n    } catch (e) {\n      return [query, 'error'];\n    }\n  }\n\n  if (!isLbryUrl) {\n    if (term.startsWith('@')) {\n      if (Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_0__[\"isNameValid\"])(term.slice(1))) {\n        return [term, null];\n      } else {\n        return [term, error];\n      }\n    }\n\n    return [addLbryIfNot(term), null];\n  } else {\n    try {\n      var isValid = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_0__[\"isURIValid\"])(term);\n\n      if (isValid) {\n        var uri;\n\n        try {\n          uri = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_0__[\"normalizeURI\"])(term);\n        } catch (e) {\n          return [term, null];\n        }\n\n        return [uri, null];\n      } else {\n        return [term, null];\n      }\n    } catch (e) {\n      return [term, 'error'];\n    }\n  }\n}\n/**\n * The 'Recommended' search query is used as the key to store the results. This\n * function ensures all clients derive the same key by making this the only\n * place to make tweaks.\n *\n * @param matureEnabled\n * @param claimIsMature\n * @param claimId\n * @param language\n * @returns {{size: number, nsfw: boolean, isBackgroundSearch: boolean}}\n */\n\nfunction getRecommendationSearchOptions(matureEnabled, claimIsMature, claimId, language) {\n  var options = {\n    size: 20,\n    nsfw: matureEnabled,\n    isBackgroundSearch: true\n  };\n\n  if (config__WEBPACK_IMPORTED_MODULE_1__[\"SIMPLE_SITE\"]) {\n    options[constants_search__WEBPACK_IMPORTED_MODULE_3__[\"SEARCH_OPTIONS\"].CLAIM_TYPE] = constants_search__WEBPACK_IMPORTED_MODULE_3__[\"SEARCH_OPTIONS\"].INCLUDE_FILES;\n    options[constants_search__WEBPACK_IMPORTED_MODULE_3__[\"SEARCH_OPTIONS\"].MEDIA_VIDEO] = true;\n    options[constants_search__WEBPACK_IMPORTED_MODULE_3__[\"SEARCH_OPTIONS\"].PRICE_FILTER_FREE] = true;\n  }\n\n  if (matureEnabled || !claimIsMature) {\n    options[constants_search__WEBPACK_IMPORTED_MODULE_3__[\"SEARCH_OPTIONS\"].RELATED_TO] = claimId;\n  }\n\n  if (language) {\n    options[constants_search__WEBPACK_IMPORTED_MODULE_3__[\"SEARCH_OPTIONS\"].LANGUAGE] = language;\n  }\n\n  return options;\n}\nfunction getRecommendationSearchKey(title, options) {\n  var searchQuery = Object(util_query_params__WEBPACK_IMPORTED_MODULE_4__[\"getSearchQueryString\"])(title.replace(/\\//, ' '), options);\n  return createNormalizedSearchKey(searchQuery);\n}\nfunction tagSearchCsOptionsHook(options) {\n  if (options.any_tags && options.any_tags.length > 0) {\n    // -- When doing a specific tag search, these restrictions should be lifted to make sense.\n    delete options.limit_claims_per_channel;\n\n    if (JSON.stringify(options.order_by) !== JSON.stringify(constants_claim_search__WEBPACK_IMPORTED_MODULE_2__[\"ORDER_BY_TOP_VALUE\"])) {\n      delete options.release_time;\n    }\n  }\n\n  return options;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvdXRpbC9zZWFyY2guanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vdWkvdXRpbC9zZWFyY2guanM/ZjgwOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuXG5pbXBvcnQgeyBpc05hbWVWYWxpZCwgaXNVUklWYWxpZCwgbm9ybWFsaXplVVJJLCBwYXJzZVVSSSB9IGZyb20gJ3V0aWwvbGJyeVVSSSc7XG5pbXBvcnQgeyBVUkwgYXMgU0lURV9VUkwsIFVSTF9MT0NBTCwgVVJMX0RFViwgU0lNUExFX1NJVEUgfSBmcm9tICdjb25maWcnO1xuaW1wb3J0ICogYXMgQ1MgZnJvbSAnY29uc3RhbnRzL2NsYWltX3NlYXJjaCc7XG5pbXBvcnQgeyBTRUFSQ0hfT1BUSU9OUyB9IGZyb20gJ2NvbnN0YW50cy9zZWFyY2gnO1xuaW1wb3J0IHsgZ2V0U2VhcmNoUXVlcnlTdHJpbmcgfSBmcm9tICd1dGlsL3F1ZXJ5LXBhcmFtcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVOb3JtYWxpemVkU2VhcmNoS2V5KHF1ZXJ5OiBzdHJpbmcpIHtcbiAgY29uc3QgcmVtb3ZlUGFyYW0gPSAocXVlcnk6IHN0cmluZywgcGFyYW06IHN0cmluZykgPT4ge1xuICAgIC8vIFRPRE86IGZpbmQgYSBzdGFuZGFyZCB3YXkgdG8gZG8gdGhpcy5cbiAgICBpZiAocXVlcnkuaW5jbHVkZXMocGFyYW0pKSB7XG4gICAgICBjb25zdCBhID0gcXVlcnkuaW5kZXhPZihwYXJhbSk7XG4gICAgICBjb25zdCBiID0gcXVlcnkuaW5kZXhPZignJicsIGEgKyBwYXJhbS5sZW5ndGgpO1xuICAgICAgaWYgKGIgPiBhKSB7XG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuc3Vic3RyaW5nKDAsIGEpICsgcXVlcnkuc3Vic3RyaW5nKGIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5zdWJzdHJpbmcoMCwgYSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBxdWVyeTtcbiAgfTtcblxuICBsZXQgbm9ybWFsaXplZFF1ZXJ5ID0gcXVlcnk7XG5cbiAgLy8gSWdub3JlIHRoZSBcInBhZ2VcIiAoYGZyb21gKSBiZWNhdXNlIHdlIGRvbid0IGNhcmUgd2hhdCB0aGUgbGFzdCBwYWdlIHNlYXJjaGVkIHdhcywgd2Ugd2FudCBldmVyeXRoaW5nOlxuICBub3JtYWxpemVkUXVlcnkgPSByZW1vdmVQYXJhbShub3JtYWxpemVkUXVlcnksICcmZnJvbT0nKTtcbiAgLy8gUmVtb3ZlIEZZUCBhZGRpdGlvbmFsIGluZm86XG4gIG5vcm1hbGl6ZWRRdWVyeSA9IHJlbW92ZVBhcmFtKG5vcm1hbGl6ZWRRdWVyeSwgJyZnaWQ9Jyk7XG4gIG5vcm1hbGl6ZWRRdWVyeSA9IHJlbW92ZVBhcmFtKG5vcm1hbGl6ZWRRdWVyeSwgJyZ1dWlkPScpO1xuXG4gIHJldHVybiBub3JtYWxpemVkUXVlcnk7XG59XG5cbi8qKlxuICogZ2V0VXJpRm9yU2VhcmNoVGVybVxuICogQHBhcmFtIHRlcm1cbiAqIEByZXR1cm5zIHtzdHJpbmdbXXwqW118KHN0cmluZ3xzdHJpbmcpW119XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVcmlGb3JTZWFyY2hUZXJtKHRlcm06IHN0cmluZykge1xuICBjb25zdCBXRUJfREVWX1BSRUZJWCA9IGAke1VSTF9ERVZ9L2A7XG4gIGNvbnN0IFdFQl9MT0NBTF9QUkVGSVggPSBgJHtVUkxfTE9DQUx9L2A7XG4gIGNvbnN0IFdFQl9QUk9EX1BSRUZJWCA9IGAke1NJVEVfVVJMfS9gO1xuICBjb25zdCBPRFlTRUVfUFJFRklYID0gYGh0dHBzOi8vb2R5c2VlLmNvbS9gO1xuICBjb25zdCBpbmNsdWRlc0xicnlUdlByb2QgPSB0ZXJtLmluY2x1ZGVzKFdFQl9QUk9EX1BSRUZJWCk7XG4gIGNvbnN0IGluY2x1ZGVzT2R5c2VlID0gdGVybS5pbmNsdWRlcyhPRFlTRUVfUFJFRklYKTtcbiAgY29uc3QgaW5jbHVkZXNMYnJ5VHZMb2NhbCA9IHRlcm0uaW5jbHVkZXMoV0VCX0xPQ0FMX1BSRUZJWCk7XG4gIGNvbnN0IGluY2x1ZGVzTGJyeVR2RGV2ID0gdGVybS5pbmNsdWRlcyhXRUJfREVWX1BSRUZJWCk7XG4gIGNvbnN0IHdhc0NvcGllZEZyb21XZWIgPSBpbmNsdWRlc0xicnlUdkRldiB8fCBpbmNsdWRlc0xicnlUdkxvY2FsIHx8IGluY2x1ZGVzTGJyeVR2UHJvZCB8fCBpbmNsdWRlc09keXNlZTtcbiAgY29uc3QgaXNMYnJ5VXJsID0gdGVybS5zdGFydHNXaXRoKCdsYnJ5Oi8vJykgJiYgdGVybSAhPT0gJ2xicnk6Ly8nO1xuICBjb25zdCBlcnJvciA9ICcnO1xuXG4gIGNvbnN0IGFkZExicnlJZk5vdCA9ICh0ZXJtKSA9PiB7XG4gICAgcmV0dXJuIHRlcm0uc3RhcnRzV2l0aCgnbGJyeTovLycpID8gdGVybSA6IGBsYnJ5Oi8vJHt0ZXJtfWA7XG4gIH07XG5cbiAgaWYgKHdhc0NvcGllZEZyb21XZWIpIHtcbiAgICBsZXQgcHJlZml4ID0gV0VCX1BST0RfUFJFRklYO1xuICAgIGlmIChpbmNsdWRlc0xicnlUdkxvY2FsKSBwcmVmaXggPSBXRUJfTE9DQUxfUFJFRklYO1xuICAgIGlmIChpbmNsdWRlc0xicnlUdkRldikgcHJlZml4ID0gV0VCX0RFVl9QUkVGSVg7XG4gICAgaWYgKGluY2x1ZGVzT2R5c2VlKSBwcmVmaXggPSBPRFlTRUVfUFJFRklYO1xuXG4gICAgbGV0IHF1ZXJ5ID0gKHRlcm0gJiYgdGVybS5zbGljZShwcmVmaXgubGVuZ3RoKS5yZXBsYWNlKC86L2csICcjJykpIHx8ICcnO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBsYnJ5VXJsID0gYGxicnk6Ly8ke3F1ZXJ5fWA7XG4gICAgICBwYXJzZVVSSShsYnJ5VXJsKTtcbiAgICAgIHJldHVybiBbbGJyeVVybCwgbnVsbF07XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIFtxdWVyeSwgJ2Vycm9yJ107XG4gICAgfVxuICB9XG5cbiAgaWYgKCFpc0xicnlVcmwpIHtcbiAgICBpZiAodGVybS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgIGlmIChpc05hbWVWYWxpZCh0ZXJtLnNsaWNlKDEpKSkge1xuICAgICAgICByZXR1cm4gW3Rlcm0sIG51bGxdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFt0ZXJtLCBlcnJvcl07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbYWRkTGJyeUlmTm90KHRlcm0pLCBudWxsXTtcbiAgfSBlbHNlIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaXNWYWxpZCA9IGlzVVJJVmFsaWQodGVybSk7XG4gICAgICBpZiAoaXNWYWxpZCkge1xuICAgICAgICBsZXQgdXJpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHVyaSA9IG5vcm1hbGl6ZVVSSSh0ZXJtKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiBbdGVybSwgbnVsbF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFt1cmksIG51bGxdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFt0ZXJtLCBudWxsXTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gW3Rlcm0sICdlcnJvciddO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRoZSAnUmVjb21tZW5kZWQnIHNlYXJjaCBxdWVyeSBpcyB1c2VkIGFzIHRoZSBrZXkgdG8gc3RvcmUgdGhlIHJlc3VsdHMuIFRoaXNcbiAqIGZ1bmN0aW9uIGVuc3VyZXMgYWxsIGNsaWVudHMgZGVyaXZlIHRoZSBzYW1lIGtleSBieSBtYWtpbmcgdGhpcyB0aGUgb25seVxuICogcGxhY2UgdG8gbWFrZSB0d2Vha3MuXG4gKlxuICogQHBhcmFtIG1hdHVyZUVuYWJsZWRcbiAqIEBwYXJhbSBjbGFpbUlzTWF0dXJlXG4gKiBAcGFyYW0gY2xhaW1JZFxuICogQHBhcmFtIGxhbmd1YWdlXG4gKiBAcmV0dXJucyB7e3NpemU6IG51bWJlciwgbnNmdzogYm9vbGVhbiwgaXNCYWNrZ3JvdW5kU2VhcmNoOiBib29sZWFufX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlY29tbWVuZGF0aW9uU2VhcmNoT3B0aW9ucyhcbiAgbWF0dXJlRW5hYmxlZDogYm9vbGVhbixcbiAgY2xhaW1Jc01hdHVyZTogYm9vbGVhbixcbiAgY2xhaW1JZDogc3RyaW5nLFxuICBsYW5ndWFnZTogP3N0cmluZ1xuKSB7XG4gIGNvbnN0IG9wdGlvbnMgPSB7IHNpemU6IDIwLCBuc2Z3OiBtYXR1cmVFbmFibGVkLCBpc0JhY2tncm91bmRTZWFyY2g6IHRydWUgfTtcblxuICBpZiAoU0lNUExFX1NJVEUpIHtcbiAgICBvcHRpb25zW1NFQVJDSF9PUFRJT05TLkNMQUlNX1RZUEVdID0gU0VBUkNIX09QVElPTlMuSU5DTFVERV9GSUxFUztcbiAgICBvcHRpb25zW1NFQVJDSF9PUFRJT05TLk1FRElBX1ZJREVPXSA9IHRydWU7XG4gICAgb3B0aW9uc1tTRUFSQ0hfT1BUSU9OUy5QUklDRV9GSUxURVJfRlJFRV0gPSB0cnVlO1xuICB9XG5cbiAgaWYgKG1hdHVyZUVuYWJsZWQgfHwgIWNsYWltSXNNYXR1cmUpIHtcbiAgICBvcHRpb25zW1NFQVJDSF9PUFRJT05TLlJFTEFURURfVE9dID0gY2xhaW1JZDtcbiAgfVxuXG4gIGlmIChsYW5ndWFnZSkge1xuICAgIG9wdGlvbnNbU0VBUkNIX09QVElPTlMuTEFOR1VBR0VdID0gbGFuZ3VhZ2U7XG4gIH1cblxuICByZXR1cm4gb3B0aW9ucztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlY29tbWVuZGF0aW9uU2VhcmNoS2V5KHRpdGxlOiBzdHJpbmcsIG9wdGlvbnM6IHt9KSB7XG4gIGNvbnN0IHNlYXJjaFF1ZXJ5ID0gZ2V0U2VhcmNoUXVlcnlTdHJpbmcodGl0bGUucmVwbGFjZSgvXFwvLywgJyAnKSwgb3B0aW9ucyk7XG4gIHJldHVybiBjcmVhdGVOb3JtYWxpemVkU2VhcmNoS2V5KHNlYXJjaFF1ZXJ5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRhZ1NlYXJjaENzT3B0aW9uc0hvb2sob3B0aW9uczogYW55KSB7XG4gIGlmIChvcHRpb25zLmFueV90YWdzICYmIG9wdGlvbnMuYW55X3RhZ3MubGVuZ3RoID4gMCkge1xuICAgIC8vIC0tIFdoZW4gZG9pbmcgYSBzcGVjaWZpYyB0YWcgc2VhcmNoLCB0aGVzZSByZXN0cmljdGlvbnMgc2hvdWxkIGJlIGxpZnRlZCB0byBtYWtlIHNlbnNlLlxuICAgIGRlbGV0ZSBvcHRpb25zLmxpbWl0X2NsYWltc19wZXJfY2hhbm5lbDtcblxuICAgIGlmIChKU09OLnN0cmluZ2lmeShvcHRpb25zLm9yZGVyX2J5KSAhPT0gSlNPTi5zdHJpbmdpZnkoQ1MuT1JERVJfQllfVE9QX1ZBTFVFKSkge1xuICAgICAgZGVsZXRlIG9wdGlvbnMucmVsZWFzZV90aW1lO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb3B0aW9ucztcbn1cbiJdLCJtYXBwaW5ncyI6IkFBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQVhBO0FBQ0E7QUFhQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFSQTtBQVVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBUEE7QUFTQTtBQUNBO0FBWkE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../ui/util/search.js\n");

/***/ }),

/***/ "./setup/publish-v3.js":
/*!*****************************!*\
  !*** ./setup/publish-v3.js ***!
  \*****************************/
/*! exports provided: makeResumableUploadRequest */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"makeResumableUploadRequest\", function() { return makeResumableUploadRequest; });\n/* harmony import */ var tus_js_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tus-js-client */ \"../node_modules/tus-js-client/lib.esm/browser/index.js\");\n/* harmony import */ var tus_js_client_lib_noopUrlStorage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tus-js-client/lib/noopUrlStorage */ \"../node_modules/tus-js-client/lib/noopUrlStorage.js\");\n/* harmony import */ var _ui_analytics__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../ui/analytics */ \"../ui/analytics.js\");\n/* harmony import */ var _ui_constants_errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../ui/constants/errors */ \"../ui/constants/errors.js\");\n/* harmony import */ var _ui_constants_token__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../ui/constants/token */ \"../ui/constants/token.js\");\n/* harmony import */ var _ui_redux_actions_publish__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../ui/redux/actions/publish */ \"../ui/redux/actions/publish.js\");\n/* harmony import */ var _publish_error__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./publish-error */ \"./setup/publish-error.js\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! config */ \"../config.js\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(config__WEBPACK_IMPORTED_MODULE_7__);\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\n\n\n\n\n\n\n\n\nvar RESUMABLE_ENDPOINT = config__WEBPACK_IMPORTED_MODULE_7__[\"LBRY_WEB_PUBLISH_API_V3\"];\nvar UPLOAD_CHUNK_SIZE_BYTE = 25 * 1024 * 1024;\nvar SDK_STATUS_RETRY_COUNT = 12;\nvar SDK_STATUS_RETRY_INTERVAL = 10000;\nvar STATUS_FILE_NOT_FOUND = 404;\nvar STATUS_CONFLICT = 409;\nvar STATUS_LOCKED = 423;\n/**\n * Checks whether a given status is in the range of the expected category.\n *\n * @param status\n * @param category\n * @returns {boolean}\n */\n\nfunction inStatusCategory(status, category) {\n  return status >= category && status < category + 100;\n}\n\nfunction isTusStillInProcess(xhr) {\n  var _xhr$response, _xhr$response$error;\n\n  return (xhr === null || xhr === void 0 ? void 0 : (_xhr$response = xhr.response) === null || _xhr$response === void 0 ? void 0 : (_xhr$response$error = _xhr$response.error) === null || _xhr$response$error === void 0 ? void 0 : _xhr$response$error.message) === 'upload is still in process'; // String needs to match backend (not good).\n} // ****************************************************************************\n// sendStatusRequest\n// ****************************************************************************\n\n\nfunction sendStatusRequest(url, guid, token, params, jsonPayload, retryCount, resolve, reject) {\n  var xhr = new XMLHttpRequest(); // $FlowIgnore\n\n  xhr.open('GET', \"\".concat(url, \"/status\"));\n  xhr.setRequestHeader('Content-Type', 'application/json');\n  xhr.setRequestHeader('Tus-Resumable', '1.0.0');\n  xhr.setRequestHeader(_ui_constants_token__WEBPACK_IMPORTED_MODULE_4__[\"X_LBRY_AUTH_TOKEN\"], token);\n  xhr.responseType = 'json';\n\n  xhr.onload = function () {\n    var _xhr$response2, _xhr$response2$error;\n\n    switch (xhr.status) {\n      case 200:\n        // Upload processed and available in network. SDK response in the body.\n        window.store.dispatch(Object(_ui_redux_actions_publish__WEBPACK_IMPORTED_MODULE_5__[\"doUpdateUploadRemove\"])(guid));\n        resolve(xhr);\n        break;\n\n      case 202:\n        // Upload is currently being processed.\n        if (retryCount > 0) {\n          setTimeout(function () {\n            sendStatusRequest(url, guid, token, params, jsonPayload, retryCount - 1, resolve, reject);\n          }, SDK_STATUS_RETRY_INTERVAL);\n        } else {\n          window.store.dispatch(Object(_ui_redux_actions_publish__WEBPACK_IMPORTED_MODULE_5__[\"doUpdateUploadProgress\"])({\n            guid: guid,\n            status: 'error'\n          }));\n          reject(Object(_publish_error__WEBPACK_IMPORTED_MODULE_6__[\"generateError\"])('The file is still being processed. Check back later after a few minutes.', params, xhr));\n        }\n\n        break;\n\n      case 403:\n      case 404:\n        // Upload not found or does not belong to the user.\n        window.store.dispatch(Object(_ui_redux_actions_publish__WEBPACK_IMPORTED_MODULE_5__[\"doUpdateUploadProgress\"])({\n          guid: guid,\n          status: 'error'\n        }));\n        reject(Object(_publish_error__WEBPACK_IMPORTED_MODULE_6__[\"generateError\"])('The upload does not exist.', params, xhr));\n        break;\n\n      case 409:\n        // SDK returned an error and upload cannot be processed. Error details in the body.\n        var sdkError = ((_xhr$response2 = xhr.response) === null || _xhr$response2 === void 0 ? void 0 : (_xhr$response2$error = _xhr$response2.error) === null || _xhr$response2$error === void 0 ? void 0 : _xhr$response2$error.message) || '';\n        var finalError = \"Failed to process the uploaded file.\\n\\n\".concat(sdkError);\n        console.error(sdkError); // eslint-disable-line no-console\n\n        window.store.dispatch(Object(_ui_redux_actions_publish__WEBPACK_IMPORTED_MODULE_5__[\"doUpdateUploadProgress\"])({\n          guid: guid,\n          status: 'error'\n        }));\n        reject(Object(_publish_error__WEBPACK_IMPORTED_MODULE_6__[\"generateError\"])(finalError, params, xhr));\n        break;\n\n      default:\n        _ui_analytics__WEBPACK_IMPORTED_MODULE_2__[\"default\"].log(\"v3/publish/status - unexpected response (\".concat(xhr.status, \")\"));\n        window.store.dispatch(Object(_ui_redux_actions_publish__WEBPACK_IMPORTED_MODULE_5__[\"doUpdateUploadProgress\"])({\n          guid: guid,\n          status: 'error'\n        }));\n        reject(Object(_publish_error__WEBPACK_IMPORTED_MODULE_6__[\"generateError\"])(\"Unexpected error: \".concat(xhr.status), params, xhr));\n        break;\n    }\n  };\n\n  xhr.onerror = function () {\n    reject(Object(_publish_error__WEBPACK_IMPORTED_MODULE_6__[\"generateError\"])(\"Encountered a network error while checking the status of the upload.\", params, xhr));\n  };\n\n  xhr.send();\n} // ****************************************************************************\n// makeResumableUploadRequest\n// ****************************************************************************\n\n\nfunction makeResumableUploadRequest(token, params, file, isPreview) {\n  return new Promise(function (resolve, reject) {\n    if (!RESUMABLE_ENDPOINT) {\n      reject(new Error('Publish: endpoint undefined'));\n    }\n\n    if (params.remote_url) {\n      reject(new Error('Publish: v2 does not support remote_url'));\n    }\n\n    var uploadUrl = params.uploadUrl,\n        guid = params.guid,\n        isMarkdown = params.isMarkdown,\n        sdkRan = params.sdkRan,\n        sdkParams = _objectWithoutProperties(params, [\"uploadUrl\", \"guid\", \"isMarkdown\", \"sdkRan\"]);\n\n    var isEdit = Boolean(sdkParams.claim_id);\n    var jsonPayload = JSON.stringify({\n      jsonrpc: '2.0',\n      method: isEdit ? 'stream_update' : 'stream_create',\n      params: sdkParams,\n      id: new Date().getTime()\n    });\n    var urlOptions = {};\n\n    if (params.uploadUrl) {\n      // Resuming from previous upload. TUS clears the resume fingerprint on any\n      // 4xx error, so we need to use the fixed URL mode instead.\n      urlOptions.uploadUrl = params.uploadUrl;\n    } else {\n      // New upload, so use `endpoint`.\n      urlOptions.endpoint = RESUMABLE_ENDPOINT;\n    }\n\n    if (params.sdkRan) {\n      sendStatusRequest(params.uploadUrl, guid, token, params, jsonPayload, 0, resolve, reject);\n      return;\n    }\n\n    var uploader = new tus_js_client__WEBPACK_IMPORTED_MODULE_0__[\"Upload\"](file, _objectSpread({}, urlOptions, {\n      chunkSize: UPLOAD_CHUNK_SIZE_BYTE,\n      retryDelays: [8000, 15000, 30000],\n      parallelUploads: 1,\n      storeFingerprintForResuming: false,\n      urlStorage: new tus_js_client_lib_noopUrlStorage__WEBPACK_IMPORTED_MODULE_1__[\"default\"](),\n      removeFingerprintOnSuccess: true,\n      headers: _defineProperty({}, _ui_constants_token__WEBPACK_IMPORTED_MODULE_4__[\"X_LBRY_AUTH_TOKEN\"], token),\n      metadata: {\n        filename: file instanceof File ? file.name : file,\n        filetype: file instanceof File ? file.type : undefined\n      },\n      onShouldRetry: function onShouldRetry(err, retryAttempt, options) {\n        window.store.dispatch(Object(_ui_redux_actions_publish__WEBPACK_IMPORTED_MODULE_5__[\"doUpdateUploadProgress\"])({\n          guid: guid,\n          status: 'retry'\n        }));\n        var status = err.originalResponse ? err.originalResponse.getStatus() : 0;\n        return !inStatusCategory(status, 400) || status === STATUS_CONFLICT || status === STATUS_LOCKED;\n      },\n      onError: function onError(err) {\n        var status = err.originalResponse ? err.originalResponse.getStatus() : 0;\n        var errMsg = typeof err === 'string' ? err : err.message;\n        var customErr;\n\n        if (status === STATUS_LOCKED || errMsg === 'file currently locked') {\n          customErr = 'File is locked. Try resuming after waiting a few minutes';\n        } else if (errMsg.startsWith('tus: failed to upload chunk at offset')) {\n          customErr = 'Error uploading chunk. Click \"retry\" in the Uploads page to resume upload.';\n        } else if (status === STATUS_FILE_NOT_FOUND) {\n          window.store.dispatch(Object(_ui_redux_actions_publish__WEBPACK_IMPORTED_MODULE_5__[\"doUpdateUploadProgress\"])({\n            guid: guid,\n            status: 'notify_ok'\n          }));\n          sendStatusRequest(uploader.url, guid, token, params, jsonPayload, SDK_STATUS_RETRY_COUNT, resolve, reject);\n          return;\n        }\n\n        window.store.dispatch(Object(_ui_redux_actions_publish__WEBPACK_IMPORTED_MODULE_5__[\"doUpdateUploadProgress\"])({\n          guid: guid,\n          status: 'error'\n        }));\n        _ui_analytics__WEBPACK_IMPORTED_MODULE_2__[\"default\"].log(err, {}, _ui_constants_errors__WEBPACK_IMPORTED_MODULE_3__[\"ERR_GRP\"].TUS);\n        reject(Object(_publish_error__WEBPACK_IMPORTED_MODULE_6__[\"generateError\"])(customErr || err, params, null, uploader, customErr ? err : null));\n      },\n      onProgress: function onProgress(bytesUploaded, bytesTotal) {\n        var percentage = (bytesUploaded / bytesTotal * 100).toFixed(2);\n        window.store.dispatch(Object(_ui_redux_actions_publish__WEBPACK_IMPORTED_MODULE_5__[\"doUpdateUploadProgress\"])({\n          guid: guid,\n          progress: percentage\n        }));\n      },\n      onSuccess: function onSuccess() {\n        function makeNotifyRequest() {\n          var xhr = new XMLHttpRequest();\n          xhr.open('POST', \"\".concat(uploader.url, \"/notify\"));\n          xhr.setRequestHeader('Content-Type', 'application/json');\n          xhr.setRequestHeader('Tus-Resumable', '1.0.0');\n          xhr.setRequestHeader(_ui_constants_token__WEBPACK_IMPORTED_MODULE_4__[\"X_LBRY_AUTH_TOKEN\"], token);\n          xhr.responseType = 'json';\n\n          xhr.onload = function () {\n            if (isTusStillInProcess(xhr)) {\n              setTimeout(function () {\n                return makeNotifyRequest();\n              }, 5000);\n              return;\n            }\n\n            window.store.dispatch(Object(_ui_redux_actions_publish__WEBPACK_IMPORTED_MODULE_5__[\"doUpdateUploadProgress\"])({\n              guid: guid,\n              status: 'notify_ok'\n            }));\n            sendStatusRequest(uploader.url, guid, token, params, jsonPayload, SDK_STATUS_RETRY_COUNT, resolve, reject);\n          };\n\n          xhr.onerror = function () {\n            window.store.dispatch(Object(_ui_redux_actions_publish__WEBPACK_IMPORTED_MODULE_5__[\"doUpdateUploadProgress\"])({\n              guid: guid,\n              status: 'notify_failed'\n            }));\n            reject(Object(_publish_error__WEBPACK_IMPORTED_MODULE_6__[\"generateError\"])(\"Failed to process the file. Please retry. (\".concat(xhr.status, \")\"), params, xhr, uploader));\n          };\n\n          xhr.onabort = function () {\n            window.store.dispatch(Object(_ui_redux_actions_publish__WEBPACK_IMPORTED_MODULE_5__[\"doUpdateUploadRemove\"])(guid));\n          };\n\n          xhr.send(jsonPayload);\n        }\n\n        makeNotifyRequest();\n      }\n    }));\n    window.store.dispatch(Object(_ui_redux_actions_publish__WEBPACK_IMPORTED_MODULE_5__[\"doUpdateUploadAdd\"])(file, params, uploader));\n    uploader.start();\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zZXR1cC9wdWJsaXNoLXYzLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc2V0dXAvcHVibGlzaC12My5qcz83NjdkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5pbXBvcnQgKiBhcyB0dXMgZnJvbSAndHVzLWpzLWNsaWVudCc7XG5pbXBvcnQgTm9vcFVybFN0b3JhZ2UgZnJvbSAndHVzLWpzLWNsaWVudC9saWIvbm9vcFVybFN0b3JhZ2UnO1xuaW1wb3J0IGFuYWx5dGljcyBmcm9tICcuLi8uLi91aS9hbmFseXRpY3MnO1xuaW1wb3J0IHsgRVJSX0dSUCB9IGZyb20gJy4uLy4uL3VpL2NvbnN0YW50cy9lcnJvcnMnO1xuaW1wb3J0IHsgWF9MQlJZX0FVVEhfVE9LRU4gfSBmcm9tICcuLi8uLi91aS9jb25zdGFudHMvdG9rZW4nO1xuaW1wb3J0IHsgZG9VcGRhdGVVcGxvYWRBZGQsIGRvVXBkYXRlVXBsb2FkUHJvZ3Jlc3MsIGRvVXBkYXRlVXBsb2FkUmVtb3ZlIH0gZnJvbSAnLi4vLi4vdWkvcmVkdXgvYWN0aW9ucy9wdWJsaXNoJztcbmltcG9ydCB7IGdlbmVyYXRlRXJyb3IgfSBmcm9tICcuL3B1Ymxpc2gtZXJyb3InO1xuaW1wb3J0IHsgTEJSWV9XRUJfUFVCTElTSF9BUElfVjMgfSBmcm9tICdjb25maWcnO1xuXG5jb25zdCBSRVNVTUFCTEVfRU5EUE9JTlQgPSBMQlJZX1dFQl9QVUJMSVNIX0FQSV9WMztcbmNvbnN0IFVQTE9BRF9DSFVOS19TSVpFX0JZVEUgPSAyNSAqIDEwMjQgKiAxMDI0O1xuXG5jb25zdCBTREtfU1RBVFVTX1JFVFJZX0NPVU5UID0gMTI7XG5jb25zdCBTREtfU1RBVFVTX1JFVFJZX0lOVEVSVkFMID0gMTAwMDA7XG5cbmNvbnN0IFNUQVRVU19GSUxFX05PVF9GT1VORCA9IDQwNDtcbmNvbnN0IFNUQVRVU19DT05GTElDVCA9IDQwOTtcbmNvbnN0IFNUQVRVU19MT0NLRUQgPSA0MjM7XG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgYSBnaXZlbiBzdGF0dXMgaXMgaW4gdGhlIHJhbmdlIG9mIHRoZSBleHBlY3RlZCBjYXRlZ29yeS5cbiAqXG4gKiBAcGFyYW0gc3RhdHVzXG4gKiBAcGFyYW0gY2F0ZWdvcnlcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpblN0YXR1c0NhdGVnb3J5KHN0YXR1cywgY2F0ZWdvcnkpIHtcbiAgcmV0dXJuIHN0YXR1cyA+PSBjYXRlZ29yeSAmJiBzdGF0dXMgPCBjYXRlZ29yeSArIDEwMDtcbn1cblxuZnVuY3Rpb24gaXNUdXNTdGlsbEluUHJvY2Vzcyh4aHIpIHtcbiAgcmV0dXJuIHhocj8ucmVzcG9uc2U/LmVycm9yPy5tZXNzYWdlID09PSAndXBsb2FkIGlzIHN0aWxsIGluIHByb2Nlc3MnOyAvLyBTdHJpbmcgbmVlZHMgdG8gbWF0Y2ggYmFja2VuZCAobm90IGdvb2QpLlxufVxuXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4vLyBzZW5kU3RhdHVzUmVxdWVzdFxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG5mdW5jdGlvbiBzZW5kU3RhdHVzUmVxdWVzdCh1cmwsIGd1aWQsIHRva2VuLCBwYXJhbXMsIGpzb25QYXlsb2FkLCByZXRyeUNvdW50LCByZXNvbHZlLCByZWplY3QpIHtcbiAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgLy8gJEZsb3dJZ25vcmVcbiAgeGhyLm9wZW4oJ0dFVCcsIGAke3VybH0vc3RhdHVzYCk7XG4gIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICB4aHIuc2V0UmVxdWVzdEhlYWRlcignVHVzLVJlc3VtYWJsZScsICcxLjAuMCcpO1xuICB4aHIuc2V0UmVxdWVzdEhlYWRlcihYX0xCUllfQVVUSF9UT0tFTiwgdG9rZW4pO1xuICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuXG4gIHhoci5vbmxvYWQgPSAoKSA9PiB7XG4gICAgc3dpdGNoICh4aHIuc3RhdHVzKSB7XG4gICAgICBjYXNlIDIwMDpcbiAgICAgICAgLy8gVXBsb2FkIHByb2Nlc3NlZCBhbmQgYXZhaWxhYmxlIGluIG5ldHdvcmsuIFNESyByZXNwb25zZSBpbiB0aGUgYm9keS5cbiAgICAgICAgd2luZG93LnN0b3JlLmRpc3BhdGNoKGRvVXBkYXRlVXBsb2FkUmVtb3ZlKGd1aWQpKTtcbiAgICAgICAgcmVzb2x2ZSh4aHIpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAyMDI6XG4gICAgICAgIC8vIFVwbG9hZCBpcyBjdXJyZW50bHkgYmVpbmcgcHJvY2Vzc2VkLlxuICAgICAgICBpZiAocmV0cnlDb3VudCA+IDApIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHNlbmRTdGF0dXNSZXF1ZXN0KHVybCwgZ3VpZCwgdG9rZW4sIHBhcmFtcywganNvblBheWxvYWQsIHJldHJ5Q291bnQgLSAxLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0sIFNES19TVEFUVVNfUkVUUllfSU5URVJWQUwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdpbmRvdy5zdG9yZS5kaXNwYXRjaChkb1VwZGF0ZVVwbG9hZFByb2dyZXNzKHsgZ3VpZCwgc3RhdHVzOiAnZXJyb3InIH0pKTtcbiAgICAgICAgICByZWplY3QoXG4gICAgICAgICAgICBnZW5lcmF0ZUVycm9yKCdUaGUgZmlsZSBpcyBzdGlsbCBiZWluZyBwcm9jZXNzZWQuIENoZWNrIGJhY2sgbGF0ZXIgYWZ0ZXIgYSBmZXcgbWludXRlcy4nLCBwYXJhbXMsIHhocilcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIDQwMzpcbiAgICAgIGNhc2UgNDA0OlxuICAgICAgICAvLyBVcGxvYWQgbm90IGZvdW5kIG9yIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgdXNlci5cbiAgICAgICAgd2luZG93LnN0b3JlLmRpc3BhdGNoKGRvVXBkYXRlVXBsb2FkUHJvZ3Jlc3MoeyBndWlkLCBzdGF0dXM6ICdlcnJvcicgfSkpO1xuICAgICAgICByZWplY3QoZ2VuZXJhdGVFcnJvcignVGhlIHVwbG9hZCBkb2VzIG5vdCBleGlzdC4nLCBwYXJhbXMsIHhocikpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSA0MDk6XG4gICAgICAgIC8vIFNESyByZXR1cm5lZCBhbiBlcnJvciBhbmQgdXBsb2FkIGNhbm5vdCBiZSBwcm9jZXNzZWQuIEVycm9yIGRldGFpbHMgaW4gdGhlIGJvZHkuXG4gICAgICAgIGNvbnN0IHNka0Vycm9yID0geGhyLnJlc3BvbnNlPy5lcnJvcj8ubWVzc2FnZSB8fCAnJztcbiAgICAgICAgY29uc3QgZmluYWxFcnJvciA9IGBGYWlsZWQgdG8gcHJvY2VzcyB0aGUgdXBsb2FkZWQgZmlsZS5cXG5cXG4ke3Nka0Vycm9yfWA7XG4gICAgICAgIGNvbnNvbGUuZXJyb3Ioc2RrRXJyb3IpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgd2luZG93LnN0b3JlLmRpc3BhdGNoKGRvVXBkYXRlVXBsb2FkUHJvZ3Jlc3MoeyBndWlkLCBzdGF0dXM6ICdlcnJvcicgfSkpO1xuICAgICAgICByZWplY3QoZ2VuZXJhdGVFcnJvcihmaW5hbEVycm9yLCBwYXJhbXMsIHhocikpO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYW5hbHl0aWNzLmxvZyhgdjMvcHVibGlzaC9zdGF0dXMgLSB1bmV4cGVjdGVkIHJlc3BvbnNlICgke3hoci5zdGF0dXN9KWApO1xuICAgICAgICB3aW5kb3cuc3RvcmUuZGlzcGF0Y2goZG9VcGRhdGVVcGxvYWRQcm9ncmVzcyh7IGd1aWQsIHN0YXR1czogJ2Vycm9yJyB9KSk7XG4gICAgICAgIHJlamVjdChnZW5lcmF0ZUVycm9yKGBVbmV4cGVjdGVkIGVycm9yOiAke3hoci5zdGF0dXN9YCwgcGFyYW1zLCB4aHIpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9O1xuXG4gIHhoci5vbmVycm9yID0gKCkgPT4ge1xuICAgIHJlamVjdChnZW5lcmF0ZUVycm9yKGBFbmNvdW50ZXJlZCBhIG5ldHdvcmsgZXJyb3Igd2hpbGUgY2hlY2tpbmcgdGhlIHN0YXR1cyBvZiB0aGUgdXBsb2FkLmAsIHBhcmFtcywgeGhyKSk7XG4gIH07XG5cbiAgeGhyLnNlbmQoKTtcbn1cblxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuLy8gbWFrZVJlc3VtYWJsZVVwbG9hZFJlcXVlc3Rcbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VSZXN1bWFibGVVcGxvYWRSZXF1ZXN0KFxuICB0b2tlbjogc3RyaW5nLFxuICBwYXJhbXM6IEZpbGVVcGxvYWRTZGtQYXJhbXMsXG4gIGZpbGU6IEZpbGUgfCBzdHJpbmcsXG4gIGlzUHJldmlldz86IGJvb2xlYW5cbikge1xuICByZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgaWYgKCFSRVNVTUFCTEVfRU5EUE9JTlQpIHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1B1Ymxpc2g6IGVuZHBvaW50IHVuZGVmaW5lZCcpKTtcbiAgICB9XG5cbiAgICBpZiAocGFyYW1zLnJlbW90ZV91cmwpIHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1B1Ymxpc2g6IHYyIGRvZXMgbm90IHN1cHBvcnQgcmVtb3RlX3VybCcpKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHVwbG9hZFVybCwgZ3VpZCwgaXNNYXJrZG93biwgc2RrUmFuLCAuLi5zZGtQYXJhbXMgfSA9IHBhcmFtcztcbiAgICBjb25zdCBpc0VkaXQgPSBCb29sZWFuKHNka1BhcmFtcy5jbGFpbV9pZCk7XG5cbiAgICBjb25zdCBqc29uUGF5bG9hZCA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGpzb25ycGM6ICcyLjAnLFxuICAgICAgbWV0aG9kOiBpc0VkaXQgPyAnc3RyZWFtX3VwZGF0ZScgOiAnc3RyZWFtX2NyZWF0ZScsXG4gICAgICBwYXJhbXM6IHNka1BhcmFtcyxcbiAgICAgIGlkOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHVybE9wdGlvbnMgPSB7fTtcbiAgICBpZiAocGFyYW1zLnVwbG9hZFVybCkge1xuICAgICAgLy8gUmVzdW1pbmcgZnJvbSBwcmV2aW91cyB1cGxvYWQuIFRVUyBjbGVhcnMgdGhlIHJlc3VtZSBmaW5nZXJwcmludCBvbiBhbnlcbiAgICAgIC8vIDR4eCBlcnJvciwgc28gd2UgbmVlZCB0byB1c2UgdGhlIGZpeGVkIFVSTCBtb2RlIGluc3RlYWQuXG4gICAgICB1cmxPcHRpb25zLnVwbG9hZFVybCA9IHBhcmFtcy51cGxvYWRVcmw7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5ldyB1cGxvYWQsIHNvIHVzZSBgZW5kcG9pbnRgLlxuICAgICAgdXJsT3B0aW9ucy5lbmRwb2ludCA9IFJFU1VNQUJMRV9FTkRQT0lOVDtcbiAgICB9XG5cbiAgICBpZiAocGFyYW1zLnNka1Jhbikge1xuICAgICAgc2VuZFN0YXR1c1JlcXVlc3QocGFyYW1zLnVwbG9hZFVybCwgZ3VpZCwgdG9rZW4sIHBhcmFtcywganNvblBheWxvYWQsIDAsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdXBsb2FkZXIgPSBuZXcgdHVzLlVwbG9hZChmaWxlLCB7XG4gICAgICAuLi51cmxPcHRpb25zLFxuICAgICAgY2h1bmtTaXplOiBVUExPQURfQ0hVTktfU0laRV9CWVRFLFxuICAgICAgcmV0cnlEZWxheXM6IFs4MDAwLCAxNTAwMCwgMzAwMDBdLFxuICAgICAgcGFyYWxsZWxVcGxvYWRzOiAxLFxuICAgICAgc3RvcmVGaW5nZXJwcmludEZvclJlc3VtaW5nOiBmYWxzZSxcbiAgICAgIHVybFN0b3JhZ2U6IG5ldyBOb29wVXJsU3RvcmFnZSgpLFxuICAgICAgcmVtb3ZlRmluZ2VycHJpbnRPblN1Y2Nlc3M6IHRydWUsXG4gICAgICBoZWFkZXJzOiB7IFtYX0xCUllfQVVUSF9UT0tFTl06IHRva2VuIH0sXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBmaWxlbmFtZTogZmlsZSBpbnN0YW5jZW9mIEZpbGUgPyBmaWxlLm5hbWUgOiBmaWxlLFxuICAgICAgICBmaWxldHlwZTogZmlsZSBpbnN0YW5jZW9mIEZpbGUgPyBmaWxlLnR5cGUgOiB1bmRlZmluZWQsXG4gICAgICB9LFxuICAgICAgb25TaG91bGRSZXRyeTogKGVyciwgcmV0cnlBdHRlbXB0LCBvcHRpb25zKSA9PiB7XG4gICAgICAgIHdpbmRvdy5zdG9yZS5kaXNwYXRjaChkb1VwZGF0ZVVwbG9hZFByb2dyZXNzKHsgZ3VpZCwgc3RhdHVzOiAncmV0cnknIH0pKTtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gZXJyLm9yaWdpbmFsUmVzcG9uc2UgPyBlcnIub3JpZ2luYWxSZXNwb25zZS5nZXRTdGF0dXMoKSA6IDA7XG4gICAgICAgIHJldHVybiAhaW5TdGF0dXNDYXRlZ29yeShzdGF0dXMsIDQwMCkgfHwgc3RhdHVzID09PSBTVEFUVVNfQ09ORkxJQ1QgfHwgc3RhdHVzID09PSBTVEFUVVNfTE9DS0VEO1xuICAgICAgfSxcbiAgICAgIG9uRXJyb3I6IChlcnIpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gZXJyLm9yaWdpbmFsUmVzcG9uc2UgPyBlcnIub3JpZ2luYWxSZXNwb25zZS5nZXRTdGF0dXMoKSA6IDA7XG4gICAgICAgIGNvbnN0IGVyck1zZyA9IHR5cGVvZiBlcnIgPT09ICdzdHJpbmcnID8gZXJyIDogZXJyLm1lc3NhZ2U7XG5cbiAgICAgICAgbGV0IGN1c3RvbUVycjtcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gU1RBVFVTX0xPQ0tFRCB8fCBlcnJNc2cgPT09ICdmaWxlIGN1cnJlbnRseSBsb2NrZWQnKSB7XG4gICAgICAgICAgY3VzdG9tRXJyID0gJ0ZpbGUgaXMgbG9ja2VkLiBUcnkgcmVzdW1pbmcgYWZ0ZXIgd2FpdGluZyBhIGZldyBtaW51dGVzJztcbiAgICAgICAgfSBlbHNlIGlmIChlcnJNc2cuc3RhcnRzV2l0aCgndHVzOiBmYWlsZWQgdG8gdXBsb2FkIGNodW5rIGF0IG9mZnNldCcpKSB7XG4gICAgICAgICAgY3VzdG9tRXJyID0gJ0Vycm9yIHVwbG9hZGluZyBjaHVuay4gQ2xpY2sgXCJyZXRyeVwiIGluIHRoZSBVcGxvYWRzIHBhZ2UgdG8gcmVzdW1lIHVwbG9hZC4nO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gU1RBVFVTX0ZJTEVfTk9UX0ZPVU5EKSB7XG4gICAgICAgICAgd2luZG93LnN0b3JlLmRpc3BhdGNoKGRvVXBkYXRlVXBsb2FkUHJvZ3Jlc3MoeyBndWlkLCBzdGF0dXM6ICdub3RpZnlfb2snIH0pKTtcbiAgICAgICAgICBzZW5kU3RhdHVzUmVxdWVzdCh1cGxvYWRlci51cmwsIGd1aWQsIHRva2VuLCBwYXJhbXMsIGpzb25QYXlsb2FkLCBTREtfU1RBVFVTX1JFVFJZX0NPVU5ULCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHdpbmRvdy5zdG9yZS5kaXNwYXRjaChkb1VwZGF0ZVVwbG9hZFByb2dyZXNzKHsgZ3VpZCwgc3RhdHVzOiAnZXJyb3InIH0pKTtcbiAgICAgICAgYW5hbHl0aWNzLmxvZyhlcnIsIHt9LCBFUlJfR1JQLlRVUyk7XG5cbiAgICAgICAgcmVqZWN0KGdlbmVyYXRlRXJyb3IoY3VzdG9tRXJyIHx8IGVyciwgcGFyYW1zLCBudWxsLCB1cGxvYWRlciwgY3VzdG9tRXJyID8gZXJyIDogbnVsbCkpO1xuICAgICAgfSxcbiAgICAgIG9uUHJvZ3Jlc3M6IChieXRlc1VwbG9hZGVkLCBieXRlc1RvdGFsKSA9PiB7XG4gICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSAoKGJ5dGVzVXBsb2FkZWQgLyBieXRlc1RvdGFsKSAqIDEwMCkudG9GaXhlZCgyKTtcbiAgICAgICAgd2luZG93LnN0b3JlLmRpc3BhdGNoKGRvVXBkYXRlVXBsb2FkUHJvZ3Jlc3MoeyBndWlkLCBwcm9ncmVzczogcGVyY2VudGFnZSB9KSk7XG4gICAgICB9LFxuICAgICAgb25TdWNjZXNzOiAoKSA9PiB7XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VOb3RpZnlSZXF1ZXN0KCkge1xuICAgICAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgIHhoci5vcGVuKCdQT1NUJywgYCR7dXBsb2FkZXIudXJsfS9ub3RpZnlgKTtcbiAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignVHVzLVJlc3VtYWJsZScsICcxLjAuMCcpO1xuICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFhfTEJSWV9BVVRIX1RPS0VOLCB0b2tlbik7XG4gICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICAgICAgICB4aHIub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzVHVzU3RpbGxJblByb2Nlc3MoeGhyKSkge1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IG1ha2VOb3RpZnlSZXF1ZXN0KCksIDUwMDApO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aW5kb3cuc3RvcmUuZGlzcGF0Y2goZG9VcGRhdGVVcGxvYWRQcm9ncmVzcyh7IGd1aWQsIHN0YXR1czogJ25vdGlmeV9vaycgfSkpO1xuICAgICAgICAgICAgc2VuZFN0YXR1c1JlcXVlc3QodXBsb2FkZXIudXJsLCBndWlkLCB0b2tlbiwgcGFyYW1zLCBqc29uUGF5bG9hZCwgU0RLX1NUQVRVU19SRVRSWV9DT1VOVCwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHhoci5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgd2luZG93LnN0b3JlLmRpc3BhdGNoKGRvVXBkYXRlVXBsb2FkUHJvZ3Jlc3MoeyBndWlkLCBzdGF0dXM6ICdub3RpZnlfZmFpbGVkJyB9KSk7XG4gICAgICAgICAgICByZWplY3QoZ2VuZXJhdGVFcnJvcihgRmFpbGVkIHRvIHByb2Nlc3MgdGhlIGZpbGUuIFBsZWFzZSByZXRyeS4gKCR7eGhyLnN0YXR1c30pYCwgcGFyYW1zLCB4aHIsIHVwbG9hZGVyKSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICB4aHIub25hYm9ydCA9ICgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5zdG9yZS5kaXNwYXRjaChkb1VwZGF0ZVVwbG9hZFJlbW92ZShndWlkKSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHhoci5zZW5kKGpzb25QYXlsb2FkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1ha2VOb3RpZnlSZXF1ZXN0KCk7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgd2luZG93LnN0b3JlLmRpc3BhdGNoKGRvVXBkYXRlVXBsb2FkQWRkKGZpbGUsIHBhcmFtcywgdXBsb2FkZXIpKTtcbiAgICB1cGxvYWRlci5zdGFydCgpO1xuICB9KTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBekNBO0FBREE7QUFDQTtBQTZDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBU0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBaEJBO0FBa0JBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQXBDQTtBQXNDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUF4Q0E7QUEwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFOQTtBQUNBO0FBT0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRkE7QUFDQTtBQUdBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXRFQTtBQXlFQTtBQUNBO0FBNUdBO0FBOEdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./setup/publish-v3.js\n");

/***/ }),

/***/ "./setup/publish.js":
/*!**************************!*\
  !*** ./setup/publish.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return apiPublishCallViaWeb; });\n/* harmony import */ var tus_js_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tus-js-client */ \"../node_modules/tus-js-client/lib.esm/browser/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"./node_modules/uuid/dist/esm-browser/index.js\");\n/* harmony import */ var _publish_error__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./publish-error */ \"./setup/publish-error.js\");\n/* harmony import */ var _publish_v1__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./publish-v1 */ \"./setup/publish-v1.js\");\n/* harmony import */ var _publish_v3__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./publish-v3 */ \"./setup/publish-v3.js\");\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\n\n\n\n\n // A modified version of Lbry.apiCall that allows\n// to perform calling methods at arbitrary urls\n// and pass form file fields\n\nfunction apiPublishCallViaWeb(apiCall, token, method, params, resolve, reject) {\n  var filePath = params.file_path,\n      preview = params.preview,\n      remoteUrl = params.remote_url,\n      sdkRan = params.sdkRan;\n  var isMarkdown = filePath ? _typeof(filePath) === 'object' && filePath.type === 'text/markdown' : false;\n  params.isMarkdown = isMarkdown;\n\n  if (!filePath && !remoteUrl && !sdkRan) {\n    var claimId = params.claim_id,\n        _isMarkdown = params.isMarkdown,\n        otherParams = _objectWithoutProperties(params, [\"claim_id\", \"isMarkdown\"]);\n\n    return apiCall(method, otherParams, resolve, reject);\n  }\n\n  var fileField = filePath;\n\n  if (preview) {\n    // Send dummy file for the preview. The tx-fee calculation does not depend on it.\n    var dummyContent = 'x';\n    fileField = new File([dummyContent], 'dummy.md', {\n      type: 'text/markdown'\n    });\n  } // Putting a dummy value here, the server is going to process the POSTed file\n  // and set the file_path itself\n\n\n  if (fileField) {\n    params.file_path = '__POST_FILE__';\n  } // Add a random ID to serve as the redux key.\n  // If it already exists, then it is a resumed session.\n\n\n  if (!params.guid) {\n    params.guid = Object(uuid__WEBPACK_IMPORTED_MODULE_1__[\"v4\"])();\n  }\n\n  var useV1 = remoteUrl || isMarkdown || preview || !tus_js_client__WEBPACK_IMPORTED_MODULE_0__[\"isSupported\"];\n  var makeRequest = useV1 ? _publish_v1__WEBPACK_IMPORTED_MODULE_3__[\"makeUploadRequest\"] : _publish_v3__WEBPACK_IMPORTED_MODULE_4__[\"makeResumableUploadRequest\"];\n  return makeRequest(token, params, fileField, preview).then(function (xhr) {\n    var error;\n\n    if (preview && xhr === null) {\n      return resolve(null);\n    }\n\n    if (xhr && xhr.response) {\n      if (xhr.status >= 200 && xhr.status < 300 && !xhr.response.error) {\n        return resolve(xhr.response.result);\n      } else if (xhr.response.error) {\n        error = Object(_publish_error__WEBPACK_IMPORTED_MODULE_2__[\"generateError\"])(xhr.response.error.message, params, xhr);\n      } else {\n        error = Object(_publish_error__WEBPACK_IMPORTED_MODULE_2__[\"generateError\"])(__('Upload likely timed out. Try a smaller file while we work on this.'), params, xhr);\n      }\n    }\n\n    if (error) {\n      return Promise.reject(error);\n    }\n  })[\"catch\"](reject);\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zZXR1cC9wdWJsaXNoLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc2V0dXAvcHVibGlzaC5qcz80ODYyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5pbXBvcnQgKiBhcyB0dXMgZnJvbSAndHVzLWpzLWNsaWVudCc7XG5pbXBvcnQgeyB2NCBhcyB1dWlkIH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgeyBnZW5lcmF0ZUVycm9yIH0gZnJvbSAnLi9wdWJsaXNoLWVycm9yJztcbmltcG9ydCB7IG1ha2VVcGxvYWRSZXF1ZXN0IH0gZnJvbSAnLi9wdWJsaXNoLXYxJztcbmltcG9ydCB7IG1ha2VSZXN1bWFibGVVcGxvYWRSZXF1ZXN0IGFzIG1ha2VVcGxvYWRSZXF1ZXN0VjMgfSBmcm9tICcuL3B1Ymxpc2gtdjMnO1xuXG4vLyBBIG1vZGlmaWVkIHZlcnNpb24gb2YgTGJyeS5hcGlDYWxsIHRoYXQgYWxsb3dzXG4vLyB0byBwZXJmb3JtIGNhbGxpbmcgbWV0aG9kcyBhdCBhcmJpdHJhcnkgdXJsc1xuLy8gYW5kIHBhc3MgZm9ybSBmaWxlIGZpZWxkc1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXBpUHVibGlzaENhbGxWaWFXZWIoXG4gIGFwaUNhbGw6IChhbnksIGFueSwgYW55LCBhbnkpID0+IGFueSxcbiAgdG9rZW46IHN0cmluZyxcbiAgbWV0aG9kOiBzdHJpbmcsXG4gIHBhcmFtczogRmlsZVVwbG9hZFNka1BhcmFtcyxcbiAgcmVzb2x2ZTogRnVuY3Rpb24sXG4gIHJlamVjdDogRnVuY3Rpb25cbikge1xuICBjb25zdCB7IGZpbGVfcGF0aDogZmlsZVBhdGgsIHByZXZpZXcsIHJlbW90ZV91cmw6IHJlbW90ZVVybCwgc2RrUmFuIH0gPSBwYXJhbXM7XG4gIGNvbnN0IGlzTWFya2Rvd24gPSBmaWxlUGF0aCA/IHR5cGVvZiBmaWxlUGF0aCA9PT0gJ29iamVjdCcgJiYgZmlsZVBhdGgudHlwZSA9PT0gJ3RleHQvbWFya2Rvd24nIDogZmFsc2U7XG4gIHBhcmFtcy5pc01hcmtkb3duID0gaXNNYXJrZG93bjtcblxuICBpZiAoIWZpbGVQYXRoICYmICFyZW1vdGVVcmwgJiYgIXNka1Jhbikge1xuICAgIGNvbnN0IHsgY2xhaW1faWQ6IGNsYWltSWQsIGlzTWFya2Rvd24sIC4uLm90aGVyUGFyYW1zIH0gPSBwYXJhbXM7XG4gICAgcmV0dXJuIGFwaUNhbGwobWV0aG9kLCBvdGhlclBhcmFtcywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgfVxuXG4gIGxldCBmaWxlRmllbGQgPSBmaWxlUGF0aDtcblxuICBpZiAocHJldmlldykge1xuICAgIC8vIFNlbmQgZHVtbXkgZmlsZSBmb3IgdGhlIHByZXZpZXcuIFRoZSB0eC1mZWUgY2FsY3VsYXRpb24gZG9lcyBub3QgZGVwZW5kIG9uIGl0LlxuICAgIGNvbnN0IGR1bW15Q29udGVudCA9ICd4JztcbiAgICBmaWxlRmllbGQgPSBuZXcgRmlsZShbZHVtbXlDb250ZW50XSwgJ2R1bW15Lm1kJywgeyB0eXBlOiAndGV4dC9tYXJrZG93bicgfSk7XG4gIH1cblxuICAvLyBQdXR0aW5nIGEgZHVtbXkgdmFsdWUgaGVyZSwgdGhlIHNlcnZlciBpcyBnb2luZyB0byBwcm9jZXNzIHRoZSBQT1NUZWQgZmlsZVxuICAvLyBhbmQgc2V0IHRoZSBmaWxlX3BhdGggaXRzZWxmXG4gIGlmIChmaWxlRmllbGQpIHtcbiAgICBwYXJhbXMuZmlsZV9wYXRoID0gJ19fUE9TVF9GSUxFX18nO1xuICB9XG5cbiAgLy8gQWRkIGEgcmFuZG9tIElEIHRvIHNlcnZlIGFzIHRoZSByZWR1eCBrZXkuXG4gIC8vIElmIGl0IGFscmVhZHkgZXhpc3RzLCB0aGVuIGl0IGlzIGEgcmVzdW1lZCBzZXNzaW9uLlxuICBpZiAoIXBhcmFtcy5ndWlkKSB7XG4gICAgcGFyYW1zLmd1aWQgPSB1dWlkKCk7XG4gIH1cblxuICBjb25zdCB1c2VWMSA9IHJlbW90ZVVybCB8fCBpc01hcmtkb3duIHx8IHByZXZpZXcgfHwgIXR1cy5pc1N1cHBvcnRlZDtcbiAgY29uc3QgbWFrZVJlcXVlc3QgPSB1c2VWMSA/IG1ha2VVcGxvYWRSZXF1ZXN0IDogbWFrZVVwbG9hZFJlcXVlc3RWMztcblxuICByZXR1cm4gbWFrZVJlcXVlc3QodG9rZW4sIHBhcmFtcywgZmlsZUZpZWxkLCBwcmV2aWV3KVxuICAgIC50aGVuKCh4aHIpID0+IHtcbiAgICAgIGxldCBlcnJvcjtcblxuICAgICAgaWYgKHByZXZpZXcgJiYgeGhyID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlKG51bGwpO1xuICAgICAgfVxuXG4gICAgICBpZiAoeGhyICYmIHhoci5yZXNwb25zZSkge1xuICAgICAgICBpZiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDMwMCAmJiAheGhyLnJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoeGhyLnJlc3BvbnNlLnJlc3VsdCk7XG4gICAgICAgIH0gZWxzZSBpZiAoeGhyLnJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgZXJyb3IgPSBnZW5lcmF0ZUVycm9yKHhoci5yZXNwb25zZS5lcnJvci5tZXNzYWdlLCBwYXJhbXMsIHhocik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXJyb3IgPSBnZW5lcmF0ZUVycm9yKF9fKCdVcGxvYWQgbGlrZWx5IHRpbWVkIG91dC4gVHJ5IGEgc21hbGxlciBmaWxlIHdoaWxlIHdlIHdvcmsgb24gdGhpcy4nKSwgcGFyYW1zLCB4aHIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pXG4gICAgLmNhdGNoKHJlamVjdCk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBT0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQWZBO0FBbUJBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFyQkE7QUF5QkE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXBCQTtBQXVCQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./setup/publish.js\n");

/***/ })

})