{"version":3,"file":"claimPage-89bb7e6a5c3b89dd072e-1009.js","mappings":"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","sources":["webpack://odysee.com/../ui/page/claim/internal/claimPageComponent/view.jsx","webpack://odysee.com/../ui/page/claim/internal/claimPageComponent/index.js","webpack://odysee.com/../ui/page/claim/view.jsx","webpack://odysee.com/../ui/page/claim/index.js"],"sourcesContent":["// @flow\nimport { DOMAIN } from 'config';\nimport { LINKED_COMMENT_QUERY_PARAM, THREAD_COMMENT_QUERY_PARAM } from 'constants/comment';\nimport React, { useEffect } from 'react';\nimport { lazyImport } from 'util/lazyImport';\nimport { Redirect } from 'react-router-dom';\nimport Spinner from 'component/spinner';\nimport { formatLbryUrlForWeb } from 'util/url';\nimport { parseURI } from 'util/lbryURI';\nimport * as COLLECTIONS_CONSTS from 'constants/collections';\nimport { COL_TYPES } from 'constants/collections';\nimport PAGES from 'constants/pages';\n\nconst ChannelPage = lazyImport(() => import('./internal/channelPage' /* webpackChunkName: \"channelPage\" */));\nconst StreamClaimPage = lazyImport(() =>\n  import('./internal/streamClaimPage' /* webpackChunkName: \"streamClaimPage\" */)\n);\nconst isDev = process.env.NODE_ENV !== 'production';\n\ntype Props = {\n  uri: string,\n  latestContentPath?: boolean,\n  liveContentPath?: boolean,\n  // -- redux --\n  claim: StreamClaim,\n  channelClaimId: ?string,\n  location: UrlLocation,\n  collectionId: string,\n  collection: Collection,\n  collectionFirstItemUri: ?string,\n  latestClaimUrl: ?string,\n  creatorSettings: { [string]: PerChannelSettings },\n  doFetchCreatorSettings: (channelId: string) => Promise<any>,\n  doFetchLatestClaimForChannel: (uri: string) => void,\n  doFetchChannelIsLiveForId: (channelId: string) => void,\n  doFetchItemsInCollection: (params: { collectionId: string }) => void,\n};\n\nconst ClaimPageComponent = (props: Props) => {\n  const {\n    uri,\n    latestContentPath,\n    liveContentPath,\n    // -- redux --\n    claim,\n    channelClaimId,\n    location,\n    collectionId,\n    collection,\n    collectionFirstItemUri,\n    latestClaimUrl,\n    creatorSettings,\n    doFetchCreatorSettings,\n    doFetchLatestClaimForChannel,\n    doFetchChannelIsLiveForId,\n    doFetchItemsInCollection,\n  } = props;\n\n  const { search, pathname, hash } = location;\n  const urlParams = new URLSearchParams(search);\n  const linkedCommentId = urlParams.get(LINKED_COMMENT_QUERY_PARAM);\n  const threadCommentId = urlParams.get(THREAD_COMMENT_QUERY_PARAM);\n\n  const canonicalUrl = claim && claim.canonical_url;\n  const claimId = claim && claim.claim_id;\n  const isNewestPath = latestContentPath || liveContentPath;\n\n  const isCollection = claim && claim.value_type === 'collection';\n  const isEmbed = pathname && pathname.startsWith('/$/embed');\n\n  // In embed mode with live/latest path, use the resolved URL instead of the channel URL\n  const effectiveUri = isEmbed && isNewestPath && latestClaimUrl ? latestClaimUrl : uri;\n  const { isChannel } = parseURI(effectiveUri);\n\n  useEffect(() => {\n    if (!latestClaimUrl && liveContentPath && claimId) {\n      doFetchChannelIsLiveForId(claimId);\n    }\n  }, [claimId, doFetchChannelIsLiveForId, latestClaimUrl, liveContentPath]);\n\n  useEffect(() => {\n    if (!latestClaimUrl && latestContentPath && canonicalUrl) {\n      doFetchLatestClaimForChannel(canonicalUrl);\n    }\n  }, [canonicalUrl, doFetchLatestClaimForChannel, latestClaimUrl, latestContentPath]);\n\n  useEffect(() => {\n    // Preserve /$/embed/... URLs; do not rewrite to canonical when embedded\n    if (isEmbed) return;\n\n    if (canonicalUrl) {\n      const statePos =\n        hash.indexOf('#state') > -1\n          ? hash.indexOf('#state')\n          : hash.indexOf('&state') > -1\n          ? hash.indexOf('&state')\n          : undefined;\n      const pageHash = statePos === undefined ? hash : hash.substring(0, statePos);\n      const urlPath = pathname + pageHash;\n      const path = urlPath.slice(1).replace(/:/g, '#');\n      // parseURI can parse queries and hashes when they are mixed with the uri\n      let queryString, pathHash;\n      try {\n        ({ queryString, pathHash } = parseURI(path));\n      } catch (e) {}\n      const canonicalUrlPath = '/' + canonicalUrl.replace(/^lbry:\\/\\//, '').replace(/#/g, ':');\n\n      // replaceState will fail if on a different domain (like webcache.googleusercontent.com)\n      const hostname = isDev ? 'localhost' : DOMAIN;\n\n      let replaceUrl = canonicalUrlPath;\n      if (canonicalUrlPath !== urlPath && hostname === window.location.hostname) {\n        const urlParams = new URLSearchParams(search || queryString);\n        if (urlParams.get(COLLECTIONS_CONSTS.COLLECTION_ID)) {\n          const listId = urlParams.get(COLLECTIONS_CONSTS.COLLECTION_ID) || '';\n          urlParams.set(COLLECTIONS_CONSTS.COLLECTION_ID, listId);\n        }\n\n        if (urlParams.toString()) replaceUrl += `?${urlParams.toString()}`;\n        if (pathHash || (!pathHash && !queryString && pageHash)) replaceUrl += String(pathHash || pageHash);\n\n        history.replaceState(history.state, '', replaceUrl);\n      }\n    }\n  }, [canonicalUrl, pathname, hash, search, isEmbed]);\n\n  React.useEffect(() => {\n    if (creatorSettings === undefined && channelClaimId) {\n      doFetchCreatorSettings(channelClaimId).catch(() => {});\n    }\n  }, [channelClaimId, creatorSettings, doFetchCreatorSettings]);\n\n  React.useEffect(() => {\n    if (claim && collectionId) {\n      doFetchItemsInCollection({ collectionId });\n    }\n  }, [claim, collectionFirstItemUri, collectionId, doFetchItemsInCollection, isCollection]);\n\n  // Wait for latest claim fetch\n  if (isNewestPath && latestClaimUrl === undefined) {\n    return (\n      <div className=\"main--empty\">\n        <Spinner delayed />\n      </div>\n    );\n  }\n\n  // Skip redirects in embed mode to preserve the embed URL\n  if (!isEmbed) {\n    if (isNewestPath && latestClaimUrl) {\n      const params = urlParams.toString() !== '' ? `?${urlParams.toString()}` : '';\n      return <Redirect to={`${formatLbryUrlForWeb(latestClaimUrl)}${params}`} />;\n    }\n\n    // Don't navigate directly to repost urls\n    // Always redirect to the actual content\n    // Also redirect to channel page (uri) when on a non-existing latest path (live or content)\n    if (claim && (claim.repost_url === uri || (isNewestPath && latestClaimUrl === null))) {\n      const newUrl = formatLbryUrlForWeb(canonicalUrl);\n      return <Redirect to={newUrl} />;\n    }\n\n    if (claim && isCollection && collectionFirstItemUri) {\n      switch (collection?.type) {\n        case COL_TYPES.COLLECTION:\n        case COL_TYPES.PLAYLIST: {\n          urlParams.set(COLLECTIONS_CONSTS.COLLECTION_ID, claim.claim_id);\n          const newUrl = formatLbryUrlForWeb(`${collectionFirstItemUri}?${urlParams.toString()}`);\n          return <Redirect to={newUrl} />;\n        }\n        case COL_TYPES.FEATURED_CHANNELS:\n          return <Redirect to={`/$/${PAGES.PLAYLIST}/${claim.claim_id}`} />;\n\n        default:\n          // Do nothing\n          break;\n      }\n    }\n  }\n\n  if (isChannel) {\n    return <ChannelPage uri={effectiveUri} location={location} />;\n  }\n\n  return (\n    <StreamClaimPage\n      uri={effectiveUri}\n      collectionId={collectionId}\n      linkedCommentId={linkedCommentId}\n      threadCommentId={threadCommentId}\n    />\n  );\n};\n\nexport default ClaimPageComponent;\n","import { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport {\n  selectClaimForUri,\n  selectIsUriResolving,\n  selectClaimIsMine,\n  makeSelectClaimIsPending,\n  selectGeoRestrictionForUri,\n  selectLatestClaimForUri,\n  makeSelectTagInClaimOrChannelForUri,\n} from 'redux/selectors/claims';\nimport {\n  selectCollectionForId,\n  selectFirstItemUrlForCollection,\n  selectAreCollectionItemsFetchingForId,\n} from 'redux/selectors/collections';\nimport { selectHomepageFetched, selectUserVerifiedEmail } from 'redux/selectors/user';\nimport { doResolveUri, doResolveClaimId, doFetchLatestClaimForChannel } from 'redux/actions/claims';\nimport { doBeginPublish } from 'redux/actions/publish';\nimport { doOpenModal } from 'redux/actions/app';\nimport { getChannelIdFromClaim } from 'util/claim';\nimport * as COLLECTIONS_CONSTS from 'constants/collections';\nimport { selectIsSubscribedForUri } from 'redux/selectors/subscriptions';\nimport { selectLatestLiveClaimForChannel, selectLatestLiveUriForChannel } from 'redux/selectors/livestream';\nimport { doFetchChannelIsLiveForId } from 'redux/actions/livestream';\nimport { doFetchCreatorSettings } from 'redux/actions/comments';\nimport { selectSettingsForChannelId } from 'redux/selectors/comments';\nimport { doFetchItemsInCollection } from 'redux/actions/collections';\nimport { PREFERENCE_EMBED } from 'constants/tags';\n\nimport withResolvedClaimRender from 'hocs/withResolvedClaimRender';\n\nimport ClaimPageComponent from './view';\n\nconst select = (state, props) => {\n  const { uri, location, liveContentPath } = props;\n  const { search } = location;\n\n  const urlParams = new URLSearchParams(search);\n\n  const claim = selectClaimForUri(state, uri);\n  const channelClaimId = getChannelIdFromClaim(claim);\n  const collectionId =\n    urlParams.get(COLLECTIONS_CONSTS.COLLECTION_ID) ||\n    (claim && claim.value_type === 'collection' && claim.claim_id) ||\n    null;\n\n  const { canonical_url: canonicalUrl, claim_id: claimId } = claim || {};\n  const latestContentClaim = liveContentPath\n    ? selectLatestLiveClaimForChannel(state, claimId)\n    : selectLatestClaimForUri(state, canonicalUrl);\n  const latestClaimUrl = liveContentPath\n    ? selectLatestLiveUriForChannel(state, claimId)\n    : latestContentClaim && latestContentClaim.canonical_url;\n  const preferEmbed = makeSelectTagInClaimOrChannelForUri(uri, PREFERENCE_EMBED)(state);\n\n  return {\n    uri,\n    claim,\n    channelClaimId,\n    latestClaimUrl,\n    preferEmbed,\n    isResolvingUri: selectIsUriResolving(state, uri),\n    isSubscribed: selectIsSubscribedForUri(state, uri),\n    claimIsMine: selectClaimIsMine(state, claim),\n    claimIsPending: makeSelectClaimIsPending(uri)(state),\n    collection: selectCollectionForId(state, collectionId),\n    collectionId,\n    collectionFirstItemUri: selectFirstItemUrlForCollection(state, collectionId),\n    isResolvingCollection: selectAreCollectionItemsFetchingForId(state, collectionId),\n    isAuthenticated: selectUserVerifiedEmail(state),\n    geoRestriction: selectGeoRestrictionForUri(state, uri),\n    homepageFetched: selectHomepageFetched(state),\n    creatorSettings: selectSettingsForChannelId(state, channelClaimId),\n  };\n};\n\nconst perform = {\n  doResolveUri,\n  doBeginPublish,\n  doResolveClaimId,\n  doOpenModal,\n  doFetchLatestClaimForChannel,\n  doFetchChannelIsLiveForId,\n  doFetchCreatorSettings,\n  doFetchItemsInCollection,\n};\n\nexport default withResolvedClaimRender(withRouter(connect(select, perform)(ClaimPageComponent)));\n","// @flow\nimport React from 'react';\n\nimport { useLocation } from 'react-router';\nimport { CHANNEL_PAGE } from 'constants/urlParams';\nimport { parseURI } from 'util/lbryURI';\n\nimport Page from 'component/page';\nimport ClaimPageComponent from './internal/claimPageComponent';\n\ntype Props = {\n  uri: string,\n  latestContentPath?: boolean,\n  liveContentPath?: boolean,\n  // -- redux --\n  isMarkdownPost: ?boolean,\n  isLivestreamClaim: ?boolean,\n  chatDisabled: ?boolean,\n};\n\nconst ClaimPage = (props: Props) => {\n  const { uri, latestContentPath, liveContentPath, isMarkdownPost, isLivestreamClaim, chatDisabled } = props;\n\n  const { isChannel } = parseURI(uri);\n\n  const { search, pathname } = useLocation();\n  const isEmbedPath = pathname && pathname.startsWith('/$/embed');\n\n  const ClaimRenderWrapper = React.useMemo(\n    () =>\n      ({ children }: { children: any }) =>\n        (\n          <Page\n            className=\"file-page\"\n            filePage\n            isMarkdown={!!isMarkdownPost}\n            noSideNavigation={isEmbedPath && !!isMarkdownPost}\n          >\n            {children}\n          </Page>\n        ),\n    [isMarkdownPost, isEmbedPath]\n  );\n\n  const LivestreamPageWrapper = React.useMemo(\n    () =>\n      ({ children }: { children: any }) =>\n        (\n          <Page className=\"file-page\" noFooter livestream={!chatDisabled}>\n            {children}\n          </Page>\n        ),\n    [chatDisabled]\n  );\n\n  const ChannelPageWrapper = React.useMemo(\n    () =>\n      ({ children }: { children: any }) =>\n        (\n          <Page className=\"channelPage-wrapper\" noFooter fullWidthPage noSideNavigation={isEmbedPath}>\n            {children}\n          </Page>\n        ),\n    [isEmbedPath]\n  );\n\n  if (isChannel) {\n    const urlParams = new URLSearchParams(search);\n    const editing = urlParams.get(CHANNEL_PAGE.QUERIES.VIEW) === CHANNEL_PAGE.VIEWS.EDIT;\n\n    if (editing) {\n      const ChannelPageEditingWrapperLocal = ({ children }: { children: any }) => (\n        <Page\n          className=\"channelPage-wrapper channelPage-edit-wrapper\"\n          noFooter\n          fullWidthPage\n          noSideNavigation={isEmbedPath}\n        >\n          {children}\n        </Page>\n      );\n      return <ClaimPageComponent uri={uri} ClaimRenderWrapper={ChannelPageEditingWrapperLocal} Wrapper={Page} />;\n    }\n\n    return (\n      <ClaimPageComponent\n        uri={uri}\n        ClaimRenderWrapper={ChannelPageWrapper}\n        Wrapper={Page}\n        latestContentPath={latestContentPath}\n        liveContentPath={liveContentPath}\n      />\n    );\n  }\n\n  if (isLivestreamClaim) {\n    return <ClaimPageComponent uri={uri} ClaimRenderWrapper={LivestreamPageWrapper} Wrapper={Page} />;\n  }\n\n  return (\n    <ClaimPageComponent\n      uri={uri}\n      ClaimRenderWrapper={ClaimRenderWrapper}\n      Wrapper={Page}\n      latestContentPath={latestContentPath}\n      liveContentPath={liveContentPath}\n    />\n  );\n};\n\nexport default ClaimPage;\n","import { connect } from 'react-redux';\n\nimport { selectIsMarkdownPostForUri } from 'redux/selectors/content';\nimport { selectIsStreamPlaceholderForUri, selectChannelClaimIdForUri } from 'redux/selectors/claims';\nimport { selectCommentsDisabledSettingForChannelId } from 'redux/selectors/comments';\n\nimport ClaimPage from './view';\n\nconst select = (state, props) => {\n  const { uri } = props;\n\n  return {\n    isMarkdownPost: selectIsMarkdownPostForUri(state, uri),\n    isLivestreamClaim: selectIsStreamPlaceholderForUri(state, uri),\n    chatDisabled: selectCommentsDisabledSettingForChannelId(state, selectChannelClaimIdForUri(state, uri)),\n  };\n};\n\nexport default connect(select)(ClaimPage);\n"],"names":["ChannelPage","lazyImport","StreamClaimPage","props","uri","latestContentPath","liveContentPath","claim","channelClaimId","location","collectionId","collection","collectionFirstItemUri","latestClaimUrl","creatorSettings","doFetchCreatorSettings","doFetchLatestClaimForChannel","doFetchChannelIsLiveForId","doFetchItemsInCollection","search","pathname","hash","urlParams","URLSearchParams","linkedCommentId","get","LINKED_COMMENT_QUERY_PARAM","threadCommentId","THREAD_COMMENT_QUERY_PARAM","canonicalUrl","canonical_url","claimId","claim_id","isNewestPath","isCollection","value_type","isEmbed","startsWith","effectiveUri","isChannel","parseURI","useEffect","queryString","pathHash","statePos","indexOf","undefined","pageHash","substring","urlPath","path","slice","replace","_parseURI2","e","canonicalUrlPath","hostname","DOMAIN","replaceUrl","window","_urlParams","COLLECTIONS_CONSTS","listId","set","toString","concat","String","history","replaceState","state","React","className","Spinner","delayed","_params","Redirect","to","formatLbryUrlForWeb","repost_url","newUrl","type","COL_TYPES","_newUrl","PAGES","perform","doResolveUri","doBeginPublish","doResolveClaimId","doOpenModal","withResolvedClaimRender","withRouter","connect","selectClaimForUri","getChannelIdFromClaim","_ref","latestContentClaim","selectLatestLiveClaimForChannel","selectLatestClaimForUri","selectLatestLiveUriForChannel","preferEmbed","makeSelectTagInClaimOrChannelForUri","PREFERENCE_EMBED","isResolvingUri","selectIsUriResolving","isSubscribed","selectIsSubscribedForUri","claimIsMine","selectClaimIsMine","claimIsPending","makeSelectClaimIsPending","selectCollectionForId","selectFirstItemUrlForCollection","isResolvingCollection","selectAreCollectionItemsFetchingForId","isAuthenticated","selectUserVerifiedEmail","geoRestriction","selectGeoRestrictionForUri","homepageFetched","selectHomepageFetched","selectSettingsForChannelId","ClaimPageComponent","isMarkdownPost","isLivestreamClaim","chatDisabled","_useLocation","useLocation","isEmbedPath","ClaimRenderWrapper","children","Page","filePage","isMarkdown","noSideNavigation","LivestreamPageWrapper","_ref2","noFooter","livestream","ChannelPageWrapper","_ref3","fullWidthPage","CHANNEL_PAGE","_ref4","Wrapper","selectIsMarkdownPostForUri","selectIsStreamPlaceholderForUri","selectCommentsDisabledSettingForChannelId","selectChannelClaimIdForUri","ClaimPage"],"sourceRoot":""}