(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["settingsStripeCard"],{

/***/ "../ui/page/settingsStripeCard/index.js":
/*!**********************************************!*\
  !*** ../ui/page/settingsStripeCard/index.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-redux */ \"../node_modules/react-redux/es/index.js\");\n/* harmony import */ var redux_actions_settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/actions/settings */ \"../ui/redux/actions/settings.js\");\n/* harmony import */ var redux_selectors_settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux/selectors/settings */ \"../ui/redux/selectors/settings.js\");\n/* harmony import */ var redux_selectors_user__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! redux/selectors/user */ \"../ui/redux/selectors/user.js\");\n/* harmony import */ var redux_actions_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! redux/actions/app */ \"../ui/redux/actions/app.js\");\n/* harmony import */ var redux_actions_notifications__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! redux/actions/notifications */ \"../ui/redux/actions/notifications.js\");\n/* harmony import */ var constants_settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! constants/settings */ \"../ui/constants/settings.js\");\n/* harmony import */ var _view__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./view */ \"../ui/page/settingsStripeCard/view.jsx\");\n\n\n\n\n\n\n\n\n\nvar select = function select(state) {\n  return {\n    isAuthenticated: Boolean(Object(redux_selectors_user__WEBPACK_IMPORTED_MODULE_3__[\"selectUserVerifiedEmail\"])(state)),\n    email: Object(redux_selectors_user__WEBPACK_IMPORTED_MODULE_3__[\"selectUserEmail\"])(state),\n    preferredCurrency: Object(redux_selectors_settings__WEBPACK_IMPORTED_MODULE_2__[\"selectClientSetting\"])(state, constants_settings__WEBPACK_IMPORTED_MODULE_6__[\"PREFERRED_CURRENCY\"]),\n    locale: Object(redux_selectors_user__WEBPACK_IMPORTED_MODULE_3__[\"selectUserLocale\"])(state)\n  };\n};\n\nvar perform = function perform(dispatch) {\n  return {\n    openModal: function openModal(modal, props) {\n      return dispatch(Object(redux_actions_app__WEBPACK_IMPORTED_MODULE_4__[\"doOpenModal\"])(modal, props));\n    },\n    doToast: function doToast(options) {\n      return dispatch(Object(redux_actions_notifications__WEBPACK_IMPORTED_MODULE_5__[\"doToast\"])(options));\n    },\n    setPreferredCurrency: function setPreferredCurrency(value) {\n      dispatch(Object(redux_actions_settings__WEBPACK_IMPORTED_MODULE_1__[\"doSetClientSetting\"])(constants_settings__WEBPACK_IMPORTED_MODULE_6__[\"PREFERRED_CURRENCY\"], value, true));\n    }\n  };\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_0__[\"connect\"])(select, perform)(_view__WEBPACK_IMPORTED_MODULE_7__[\"default\"]));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvcGFnZS9zZXR0aW5nc1N0cmlwZUNhcmQvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vdWkvcGFnZS9zZXR0aW5nc1N0cmlwZUNhcmQvaW5kZXguanM/ZTQ4OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHsgZG9TZXRDbGllbnRTZXR0aW5nIH0gZnJvbSAncmVkdXgvYWN0aW9ucy9zZXR0aW5ncyc7XG5pbXBvcnQgeyBzZWxlY3RDbGllbnRTZXR0aW5nIH0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL3NldHRpbmdzJztcbmltcG9ydCB7IHNlbGVjdFVzZXJWZXJpZmllZEVtYWlsLCBzZWxlY3RVc2VyRW1haWwsIHNlbGVjdFVzZXJMb2NhbGUgfSBmcm9tICdyZWR1eC9zZWxlY3RvcnMvdXNlcic7XG5pbXBvcnQgeyBkb09wZW5Nb2RhbCB9IGZyb20gJ3JlZHV4L2FjdGlvbnMvYXBwJztcbmltcG9ydCB7IGRvVG9hc3QgfSBmcm9tICdyZWR1eC9hY3Rpb25zL25vdGlmaWNhdGlvbnMnO1xuaW1wb3J0ICogYXMgU0VUVElOR1MgZnJvbSAnY29uc3RhbnRzL3NldHRpbmdzJztcblxuaW1wb3J0IFNldHRpbmdzU3RyaXBlQ2FyZCBmcm9tICcuL3ZpZXcnO1xuXG5jb25zdCBzZWxlY3QgPSAoc3RhdGUpID0+ICh7XG4gIGlzQXV0aGVudGljYXRlZDogQm9vbGVhbihzZWxlY3RVc2VyVmVyaWZpZWRFbWFpbChzdGF0ZSkpLFxuICBlbWFpbDogc2VsZWN0VXNlckVtYWlsKHN0YXRlKSxcbiAgcHJlZmVycmVkQ3VycmVuY3k6IHNlbGVjdENsaWVudFNldHRpbmcoc3RhdGUsIFNFVFRJTkdTLlBSRUZFUlJFRF9DVVJSRU5DWSksXG4gIGxvY2FsZTogc2VsZWN0VXNlckxvY2FsZShzdGF0ZSksXG59KTtcblxuY29uc3QgcGVyZm9ybSA9IChkaXNwYXRjaCkgPT4gKHtcbiAgb3Blbk1vZGFsOiAobW9kYWwsIHByb3BzKSA9PiBkaXNwYXRjaChkb09wZW5Nb2RhbChtb2RhbCwgcHJvcHMpKSxcbiAgZG9Ub2FzdDogKG9wdGlvbnMpID0+IGRpc3BhdGNoKGRvVG9hc3Qob3B0aW9ucykpLFxuICBzZXRQcmVmZXJyZWRDdXJyZW5jeTogKHZhbHVlKSA9PiB7XG4gICAgZGlzcGF0Y2goZG9TZXRDbGllbnRTZXR0aW5nKFNFVFRJTkdTLlBSRUZFUlJFRF9DVVJSRU5DWSwgdmFsdWUsIHRydWUpKTtcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KHNlbGVjdCwgcGVyZm9ybSkoU2V0dGluZ3NTdHJpcGVDYXJkKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFBQTtBQUNBO0FBTUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUVBO0FBQUE7QUFGQTtBQUdBO0FBQ0E7QUFDQTtBQUxBO0FBQUE7QUFDQTtBQU9BIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../ui/page/settingsStripeCard/index.js\n");

/***/ }),

/***/ "../ui/page/settingsStripeCard/view.jsx":
/*!**********************************************!*\
  !*** ../ui/page/settingsStripeCard/view.jsx ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var component_page__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! component/page */ \"../ui/component/page/index.js\");\n/* harmony import */ var component_common_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! component/common/card */ \"../ui/component/common/card.jsx\");\n/* harmony import */ var lbryinc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lbryinc */ \"../extras/lbryinc/index.js\");\n/* harmony import */ var react_plastic__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-plastic */ \"../node_modules/react-plastic/lib/index.js\");\n/* harmony import */ var react_plastic__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_plastic__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var component_button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component/button */ \"../ui/component/button/index.js\");\n/* harmony import */ var constants_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! constants/icons */ \"../ui/constants/icons.js\");\n/* harmony import */ var constants_modal_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! constants/modal_types */ \"../ui/constants/modal_types.js\");\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! constants/pages */ \"../ui/constants/pages.js\");\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(constants_pages__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var component_common_form__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! component/common/form */ \"../ui/component/common/form.jsx\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! config */ \"../config.js\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(config__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var util_stripe__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! util/stripe */ \"../ui/util/stripe.js\");\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n} // restore flow\n\n/* eslint-disable no-undef */\n\n/* eslint-disable react/prop-types */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar stripeEnvironment = Object(util_stripe__WEBPACK_IMPORTED_MODULE_11__[\"getStripeEnvironment\"])();\nvar STRIPE_PLUGIN_SRC = 'https://js.stripe.com/v3/';\n\nvar APIS_DOWN_ERROR_RESPONSE = __('There was an error from the server, please try again later');\n\nvar CARD_SETUP_ERROR_RESPONSE = __('There was an error getting your card setup, please try again later'); // eslint-disable-next-line flowtype/no-types-missing-file-annotation\n// type State = {\n//   open: boolean,\n//   currentFlowStage: string,\n//   customerTransactions: Array<any>,\n//   pageTitle: string,\n//   userCardDetails: any, // fill this out\n//   scriptFailedToLoad: boolean,\n// };\n\n\nvar SettingsStripeCard = /*#__PURE__*/function (_React$Component) {\n  _inherits(SettingsStripeCard, _React$Component);\n\n  function SettingsStripeCard(props) {\n    var _this;\n\n    _classCallCheck(this, SettingsStripeCard); // :Props\n\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SettingsStripeCard).call(this, props));\n    _this.state = {\n      open: false,\n      scriptFailedToLoad: false,\n      currentFlowStage: 'loading',\n      // loading, confirmingCard, cardConfirmed\n      customerTransactions: [],\n      pageTitle: 'Add Card',\n      userCardDetails: {},\n      paymentMethodId: '',\n      preferredCurrency: 'USD'\n    };\n    return _this;\n  }\n\n  _createClass(SettingsStripeCard, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var that = this;\n      var _this$props = this.props,\n          preferredCurrency = _this$props.preferredCurrency,\n          locale = _this$props.locale; // use preferredCurrency if it's set on client, otherwise use USD, unless in Europe then use EUR\n\n      if (preferredCurrency) {\n        that.setState({\n          preferredCurrency: preferredCurrency\n        });\n      } else if (locale) {\n        if (locale.continent === 'EU') {\n          that.setState({\n            preferredCurrency: 'EUR'\n          });\n        }\n      }\n\n      var doToast = this.props.doToast; // only add script if it doesn't already exist\n\n      var stripeScriptExists = document.querySelectorAll(\"script[src=\\\"\".concat(STRIPE_PLUGIN_SRC, \"\\\"]\")).length > 0;\n\n      if (!stripeScriptExists) {\n        var script = document.createElement('script');\n        script.src = STRIPE_PLUGIN_SRC;\n        script.async = true; // $FlowFixMe\n\n        document.body.appendChild(script);\n      } // public key of the stripe account\n\n\n      var publicKey = config__WEBPACK_IMPORTED_MODULE_10__[\"STRIPE_PUBLIC_KEY\"]; // client secret of the SetupIntent (don't share with anyone but customer)\n\n      var clientSecret = ''; // setting a timeout to let the client secret populate\n      // TODO: fix this, should be a cleaner way\n\n      setTimeout(function () {\n        // check if customer has card setup already\n        if (stripeEnvironment) {\n          lbryinc__WEBPACK_IMPORTED_MODULE_3__[\"Lbryio\"].call('customer', 'status', {\n            environment: stripeEnvironment\n          }, 'post').then(function (customerStatusResponse) {\n            // user has a card saved if their defaultPaymentMethod has an id\n            var defaultPaymentMethod = customerStatusResponse.Customer.invoice_settings.default_payment_method;\n            var userHasAlreadySetupPayment = Boolean(defaultPaymentMethod && defaultPaymentMethod.id); // show different frontend if user already has card\n\n            if (userHasAlreadySetupPayment) {\n              var card = customerStatusResponse.PaymentMethods[0].card;\n              var customer = customerStatusResponse.Customer;\n              var topOfDisplay = customer.email.split('@')[0];\n              var bottomOfDisplay = '@' + customer.email.split('@')[1];\n              var cardDetails = {\n                brand: card.brand,\n                expiryYear: card.exp_year,\n                expiryMonth: card.exp_month,\n                lastFour: card.last4,\n                topOfDisplay: topOfDisplay,\n                bottomOfDisplay: bottomOfDisplay\n              };\n              that.setState({\n                currentFlowStage: 'cardConfirmed',\n                pageTitle: 'Payment Methods',\n                userCardDetails: cardDetails,\n                paymentMethodId: customerStatusResponse.PaymentMethods[0].id\n              }); // otherwise, prompt them to save a card\n            } else {\n              that.setState({\n                currentFlowStage: 'confirmingCard'\n              }); // get a payment method secret for frontend\n\n              lbryinc__WEBPACK_IMPORTED_MODULE_3__[\"Lbryio\"].call('customer', 'setup', {\n                environment: stripeEnvironment\n              }, 'post').then(function (customerSetupResponse) {\n                clientSecret = customerSetupResponse.client_secret; // instantiate stripe elements\n\n                setupStripe();\n              });\n            } // get customer transactions\n\n\n            lbryinc__WEBPACK_IMPORTED_MODULE_3__[\"Lbryio\"].call('customer', 'list', {\n              environment: stripeEnvironment\n            }, 'post').then(function (customerTransactionsResponse) {\n              that.setState({\n                customerTransactions: customerTransactionsResponse\n              });\n            }); // if the status call fails, either an actual error or need to run setup first\n          })[\"catch\"](function (error) {\n            // errorString passed from the API (with a 403 error)\n            var errorString = 'user as customer is not setup yet'; // if it's beamer's error indicating the account is not linked yet\n\n            if (error.message && error.message.indexOf(errorString) > -1) {\n              // send them to save a card\n              that.setState({\n                currentFlowStage: 'confirmingCard'\n              }); // get a payment method secret for frontend\n\n              lbryinc__WEBPACK_IMPORTED_MODULE_3__[\"Lbryio\"].call('customer', 'setup', {\n                environment: stripeEnvironment\n              }, 'post').then(function (customerSetupResponse) {\n                clientSecret = customerSetupResponse.client_secret; // instantiate stripe elements\n\n                setupStripe();\n              }); // 500 error from the backend being down\n            } else if (error === 'internal_apis_down') {\n              doToast({\n                message: APIS_DOWN_ERROR_RESPONSE,\n                isError: true\n              });\n            } else {\n              // probably an error from stripe\n              doToast({\n                message: CARD_SETUP_ERROR_RESPONSE,\n                isError: true\n              });\n            }\n          });\n        }\n      }, 250);\n\n      function setupStripe() {\n        // TODO: have to fix this, using so that the script is available\n        setTimeout(function () {\n          var stripeElements = function stripeElements(publicKey, setupIntent) {\n            var stripe = Stripe(publicKey);\n            var elements = stripe.elements(); // Element styles\n\n            var style = {\n              base: {\n                fontSize: '16px',\n                color: '#32325d',\n                fontFamily: '-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif',\n                fontSmoothing: 'antialiased',\n                '::placeholder': {\n                  color: 'rgba(0,0,0,0.4)'\n                }\n              }\n            };\n            var card = elements.create('card', {\n              style: style\n            });\n            card.mount('#card-element'); // Element focus ring\n\n            card.on('focus', function () {\n              var el = document.getElementById('card-element');\n              el.classList.add('focused');\n            });\n            card.on('blur', function () {\n              var el = document.getElementById('card-element');\n              el.classList.remove('focused');\n            });\n            card.on('ready', function () {\n              card.focus();\n            });\n            var email = that.props.email;\n\n            function submitForm(event) {\n              event.preventDefault(); // if client secret wasn't loaded properly\n\n              if (!clientSecret) {\n                var displayErrorText = 'There was an error in generating your payment method. Please contact a developer';\n                var displayError = document.getElementById('card-errors');\n                displayError.textContent = displayErrorText;\n                return;\n              }\n\n              changeLoadingState(true);\n              stripe.confirmCardSetup(clientSecret, {\n                payment_method: {\n                  card: card,\n                  billing_details: {\n                    email: email\n                  }\n                }\n              }).then(function (result) {\n                if (result.error) {\n                  changeLoadingState(false);\n                  var displayError = document.getElementById('card-errors');\n                  displayError.textContent = result.error.message;\n                } else {\n                  // The PaymentMethod was successfully set up\n                  // hide and show the proper divs\n                  orderComplete(stripe, clientSecret);\n                }\n              });\n            } // Handle payment submission when user clicks the pay button.\n\n\n            var button = document.getElementById('submit');\n            button.addEventListener('click', function (event) {\n              submitForm(event);\n            }); // currently doesn't work because the iframe javascript context is different\n            // would be nice though if it's even technically possible\n            // window.addEventListener('keyup', function(event) {\n            //   if (event.keyCode === 13) {\n            //     submitForm(event);\n            //   }\n            // }, false);\n          }; // TODO: possible bug here where clientSecret isn't done\n\n\n          stripeElements(publicKey, clientSecret); // Show a spinner on payment submission\n\n          var changeLoadingState = function changeLoadingState(isLoading) {\n            if (isLoading) {\n              // $FlowFixMe\n              document.querySelector('button').disabled = true; // $FlowFixMe\n\n              document.querySelector('#stripe-spinner').classList.remove('hidden'); // $FlowFixMe\n\n              document.querySelector('#button-text').classList.add('hidden');\n            } else {\n              // $FlowFixMe\n              document.querySelector('button').disabled = false; // $FlowFixMe\n\n              document.querySelector('#stripe-spinner').classList.add('hidden'); // $FlowFixMe\n\n              document.querySelector('#button-text').classList.remove('hidden');\n            }\n          }; // shows a success / error message when the payment is complete\n\n\n          var orderComplete = function orderComplete(stripe, clientSecret) {\n            stripe.retrieveSetupIntent(clientSecret).then(function (result) {\n              lbryinc__WEBPACK_IMPORTED_MODULE_3__[\"Lbryio\"].call('customer', 'status', {\n                environment: stripeEnvironment\n              }, 'post').then(function (customerStatusResponse) {\n                var card = customerStatusResponse.PaymentMethods[0].card;\n                var customer = customerStatusResponse.Customer;\n                var topOfDisplay = customer.email.split('@')[0];\n                var bottomOfDisplay = '@' + customer.email.split('@')[1];\n                var cardDetails = {\n                  brand: card.brand,\n                  expiryYear: card.exp_year,\n                  expiryMonth: card.exp_month,\n                  lastFour: card.last4,\n                  topOfDisplay: topOfDisplay,\n                  bottomOfDisplay: bottomOfDisplay\n                };\n                that.setState({\n                  currentFlowStage: 'cardConfirmed',\n                  pageTitle: 'Payment Methods',\n                  userCardDetails: cardDetails,\n                  paymentMethodId: customerStatusResponse.PaymentMethods[0].id\n                });\n              });\n              changeLoadingState(false);\n            });\n          };\n        }, 0);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var that = this;\n      var returnToValue = new URLSearchParams(location.search).get('returnTo');\n      var shouldShowBackToMembershipButton = returnToValue === 'premium';\n\n      function setAsConfirmingCard() {\n        that.setState({\n          currentFlowStage: 'confirmingCard'\n        });\n      }\n\n      var setPreferredCurrency = this.props.setPreferredCurrency; // when user changes currency in selector\n\n      function onCurrencyChange(event) {\n        var value = event.target.value; // update preferred currency in frontend\n\n        that.setState({\n          preferredCurrency: value\n        }); // update client settings\n\n        setPreferredCurrency(value);\n      }\n\n      var _this$props2 = this.props,\n          scriptFailedToLoad = _this$props2.scriptFailedToLoad,\n          openModal = _this$props2.openModal;\n      var _this$state = this.state,\n          currentFlowStage = _this$state.currentFlowStage,\n          pageTitle = _this$state.pageTitle,\n          userCardDetails = _this$state.userCardDetails,\n          paymentMethodId = _this$state.paymentMethodId,\n          preferredCurrency = _this$state.preferredCurrency;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(component_page__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n        noFooter: true,\n        noSideNavigation: true,\n        className: \"card-stack\",\n        backout: {\n          title: __(pageTitle),\n          backLabel: __('Back')\n        }\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, scriptFailedToLoad && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"error__text\"\n      }, __('There was an error connecting to Stripe. Please try again later.'))), currentFlowStage === 'loading' && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"headerCard toConfirmCard\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(component_common_card__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n        title: __('Connect your card with Odysee'),\n        subtitle: __('Getting your card connection status...')\n      })), currentFlowStage === 'confirmingCard' && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"sr-root\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"sr-main\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"sr-payment-form card cardInput\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"sr-form-row\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n        className: \"payment-details\"\n      }, \"Card Details\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"sr-input sr-element sr-card-element\",\n        id: \"card-element\"\n      })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"sr-field-error\",\n        id: \"card-errors\",\n        role: \"alert\"\n      }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"button\", {\n        className: \"linkButton\",\n        id: \"submit\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"stripe__spinner hidden\",\n        id: \"stripe-spinner\"\n      }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        id: \"button-text\"\n      }, __('Add Card')))))), currentFlowStage === 'cardConfirmed' && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"successCard\"\n      }, shouldShowBackToMembershipButton && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(component_button__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n        button: \"primary\",\n        label: __('Back To Odysee Premium'),\n        icon: constants_icons__WEBPACK_IMPORTED_MODULE_6__[\"UPGRADE\"],\n        navigate: \"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_8__[\"ODYSEE_MEMBERSHIP\"]),\n        style: {\n          marginBottom: '20px'\n        }\n      }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(component_common_card__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n        title: __('Card Details'),\n        className: \"add-payment-card-div\",\n        body: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_plastic__WEBPACK_IMPORTED_MODULE_4___default.a, {\n          type: userCardDetails.brand,\n          name: userCardDetails.topOfDisplay + ' ' + userCardDetails.bottomOfDisplay,\n          expiry: userCardDetails.expiryMonth + '/' + userCardDetails.expiryYear,\n          number: '____________' + userCardDetails.lastFour\n        }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(component_button__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n          button: \"primary\",\n          label: __('Remove Card'),\n          icon: constants_icons__WEBPACK_IMPORTED_MODULE_6__[\"DELETE\"],\n          onClick: function onClick(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            openModal(constants_modal_types__WEBPACK_IMPORTED_MODULE_7__[\"CONFIRM_REMOVE_CARD\"], {\n              paymentMethodId: paymentMethodId,\n              setAsConfirmingCard: setAsConfirmingCard\n            });\n          }\n        }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(component_button__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n          button: \"secondary\",\n          label: __('View Transactions'),\n          icon: constants_icons__WEBPACK_IMPORTED_MODULE_6__[\"SETTINGS\"],\n          navigate: \"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_8__[\"WALLET\"], \"?fiatType=outgoing&tab=fiat-payment-history&currency=fiat\"),\n          style: {\n            marginLeft: '10px'\n          }\n        }))\n      }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"br\", null), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"currency-to-use-div\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"h1\", {\n        className: \"currency-to-use-header\"\n      }, __('Currency To Use'), \":\"), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"fieldset-section\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(component_common_form__WEBPACK_IMPORTED_MODULE_9__[\"FormField\"], {\n        className: \"currency-to-use-selector\",\n        name: \"currency_selector\",\n        type: \"select\",\n        onChange: onCurrencyChange,\n        value: preferredCurrency\n      }, ['USD', 'EUR'].map(function (currency) {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"option\", {\n          key: currency,\n          value: currency\n        }, currency);\n      }))))));\n    }\n  }]);\n\n  return SettingsStripeCard;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (SettingsStripeCard);\n/* eslint-enable no-undef */\n\n/* eslint-enable react/prop-types */\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvcGFnZS9zZXR0aW5nc1N0cmlwZUNhcmQvdmlldy5qc3guanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vdWkvcGFnZS9zZXR0aW5nc1N0cmlwZUNhcmQvdmlldy5qc3g/YzZjNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyByZXN0b3JlIGZsb3dcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4vKiBlc2xpbnQtZGlzYWJsZSByZWFjdC9wcm9wLXR5cGVzICovXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFBhZ2UgZnJvbSAnY29tcG9uZW50L3BhZ2UnO1xuaW1wb3J0IENhcmQgZnJvbSAnY29tcG9uZW50L2NvbW1vbi9jYXJkJztcbmltcG9ydCB7IExicnlpbyB9IGZyb20gJ2xicnlpbmMnO1xuaW1wb3J0IFBsYXN0aWMgZnJvbSAncmVhY3QtcGxhc3RpYyc7XG5pbXBvcnQgQnV0dG9uIGZyb20gJ2NvbXBvbmVudC9idXR0b24nO1xuaW1wb3J0ICogYXMgSUNPTlMgZnJvbSAnY29uc3RhbnRzL2ljb25zJztcbmltcG9ydCAqIGFzIE1PREFMUyBmcm9tICdjb25zdGFudHMvbW9kYWxfdHlwZXMnO1xuaW1wb3J0ICogYXMgUEFHRVMgZnJvbSAnY29uc3RhbnRzL3BhZ2VzJztcbmltcG9ydCB7IEZvcm1GaWVsZCB9IGZyb20gJ2NvbXBvbmVudC9jb21tb24vZm9ybSc7XG5pbXBvcnQgeyBTVFJJUEVfUFVCTElDX0tFWSB9IGZyb20gJ2NvbmZpZyc7XG5pbXBvcnQgeyBnZXRTdHJpcGVFbnZpcm9ubWVudCB9IGZyb20gJ3V0aWwvc3RyaXBlJztcbmxldCBzdHJpcGVFbnZpcm9ubWVudCA9IGdldFN0cmlwZUVudmlyb25tZW50KCk7XG5cbmNvbnN0IFNUUklQRV9QTFVHSU5fU1JDID0gJ2h0dHBzOi8vanMuc3RyaXBlLmNvbS92My8nO1xuXG5jb25zdCBBUElTX0RPV05fRVJST1JfUkVTUE9OU0UgPSBfXygnVGhlcmUgd2FzIGFuIGVycm9yIGZyb20gdGhlIHNlcnZlciwgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlcicpO1xuY29uc3QgQ0FSRF9TRVRVUF9FUlJPUl9SRVNQT05TRSA9IF9fKCdUaGVyZSB3YXMgYW4gZXJyb3IgZ2V0dGluZyB5b3VyIGNhcmQgc2V0dXAsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXInKTtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZsb3d0eXBlL25vLXR5cGVzLW1pc3NpbmctZmlsZS1hbm5vdGF0aW9uXG50eXBlIFByb3BzID0ge1xuICBkaXNhYmxlZDogYm9vbGVhbixcbiAgbGFiZWw6ID9zdHJpbmcsXG4gIGVtYWlsOiA/c3RyaW5nLFxuICBzY3JpcHRGYWlsZWRUb0xvYWQ6IGJvb2xlYW4sXG4gIGRvT3Blbk1vZGFsOiAoc3RyaW5nLCB7fSkgPT4gdm9pZCxcbiAgZG9Ub2FzdDogKHt9KSA9PiB2b2lkLFxuICBvcGVuTW9kYWw6IChzdHJpbmcsIHt9KSA9PiB2b2lkLFxuICBzZXRBc0NvbmZpcm1pbmdDYXJkOiAoKSA9PiB2b2lkLFxuICBsb2NhbGU6ID9hbnksXG4gIHByZWZlcnJlZEN1cnJlbmN5OiBzdHJpbmcsXG4gIHNldFByZWZlcnJlZEN1cnJlbmN5OiAoc3RyaW5nKSA9PiB2b2lkLFxufTtcblxuLy8gdHlwZSBTdGF0ZSA9IHtcbi8vICAgb3BlbjogYm9vbGVhbixcbi8vICAgY3VycmVudEZsb3dTdGFnZTogc3RyaW5nLFxuLy8gICBjdXN0b21lclRyYW5zYWN0aW9uczogQXJyYXk8YW55Pixcbi8vICAgcGFnZVRpdGxlOiBzdHJpbmcsXG4vLyAgIHVzZXJDYXJkRGV0YWlsczogYW55LCAvLyBmaWxsIHRoaXMgb3V0XG4vLyAgIHNjcmlwdEZhaWxlZFRvTG9hZDogYm9vbGVhbixcbi8vIH07XG5cbmNsYXNzIFNldHRpbmdzU3RyaXBlQ2FyZCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAvLyA6UHJvcHNcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG9wZW46IGZhbHNlLFxuICAgICAgc2NyaXB0RmFpbGVkVG9Mb2FkOiBmYWxzZSxcbiAgICAgIGN1cnJlbnRGbG93U3RhZ2U6ICdsb2FkaW5nJywgLy8gbG9hZGluZywgY29uZmlybWluZ0NhcmQsIGNhcmRDb25maXJtZWRcbiAgICAgIGN1c3RvbWVyVHJhbnNhY3Rpb25zOiBbXSxcbiAgICAgIHBhZ2VUaXRsZTogJ0FkZCBDYXJkJyxcbiAgICAgIHVzZXJDYXJkRGV0YWlsczoge30sXG4gICAgICBwYXltZW50TWV0aG9kSWQ6ICcnLFxuICAgICAgcHJlZmVycmVkQ3VycmVuY3k6ICdVU0QnLFxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBsZXQgdGhhdCA9IHRoaXM7XG5cbiAgICBjb25zdCB7IHByZWZlcnJlZEN1cnJlbmN5LCBsb2NhbGUgfSA9IHRoaXMucHJvcHM7XG5cbiAgICAvLyB1c2UgcHJlZmVycmVkQ3VycmVuY3kgaWYgaXQncyBzZXQgb24gY2xpZW50LCBvdGhlcndpc2UgdXNlIFVTRCwgdW5sZXNzIGluIEV1cm9wZSB0aGVuIHVzZSBFVVJcbiAgICBpZiAocHJlZmVycmVkQ3VycmVuY3kpIHtcbiAgICAgIHRoYXQuc2V0U3RhdGUoe1xuICAgICAgICBwcmVmZXJyZWRDdXJyZW5jeTogcHJlZmVycmVkQ3VycmVuY3ksXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGxvY2FsZSkge1xuICAgICAgaWYgKGxvY2FsZS5jb250aW5lbnQgPT09ICdFVScpIHtcbiAgICAgICAgdGhhdC5zZXRTdGF0ZSh7XG4gICAgICAgICAgcHJlZmVycmVkQ3VycmVuY3k6ICdFVVInLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgZG9Ub2FzdCA9IHRoaXMucHJvcHMuZG9Ub2FzdDtcblxuICAgIC8vIG9ubHkgYWRkIHNjcmlwdCBpZiBpdCBkb2Vzbid0IGFscmVhZHkgZXhpc3RcbiAgICBjb25zdCBzdHJpcGVTY3JpcHRFeGlzdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBzY3JpcHRbc3JjPVwiJHtTVFJJUEVfUExVR0lOX1NSQ31cIl1gKS5sZW5ndGggPiAwO1xuXG4gICAgaWYgKCFzdHJpcGVTY3JpcHRFeGlzdHMpIHtcbiAgICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgc2NyaXB0LnNyYyA9IFNUUklQRV9QTFVHSU5fU1JDO1xuICAgICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcblxuICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgIH1cblxuICAgIC8vIHB1YmxpYyBrZXkgb2YgdGhlIHN0cmlwZSBhY2NvdW50XG4gICAgbGV0IHB1YmxpY0tleSA9IFNUUklQRV9QVUJMSUNfS0VZO1xuXG4gICAgLy8gY2xpZW50IHNlY3JldCBvZiB0aGUgU2V0dXBJbnRlbnQgKGRvbid0IHNoYXJlIHdpdGggYW55b25lIGJ1dCBjdXN0b21lcilcbiAgICBsZXQgY2xpZW50U2VjcmV0ID0gJyc7XG5cbiAgICAvLyBzZXR0aW5nIGEgdGltZW91dCB0byBsZXQgdGhlIGNsaWVudCBzZWNyZXQgcG9wdWxhdGVcbiAgICAvLyBUT0RPOiBmaXggdGhpcywgc2hvdWxkIGJlIGEgY2xlYW5lciB3YXlcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIGNoZWNrIGlmIGN1c3RvbWVyIGhhcyBjYXJkIHNldHVwIGFscmVhZHlcbiAgICAgIGlmIChzdHJpcGVFbnZpcm9ubWVudCkge1xuICAgICAgICBMYnJ5aW8uY2FsbChcbiAgICAgICAgICAnY3VzdG9tZXInLFxuICAgICAgICAgICdzdGF0dXMnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVudmlyb25tZW50OiBzdHJpcGVFbnZpcm9ubWVudCxcbiAgICAgICAgICB9LFxuICAgICAgICAgICdwb3N0J1xuICAgICAgICApXG4gICAgICAgICAgLnRoZW4oKGN1c3RvbWVyU3RhdHVzUmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIC8vIHVzZXIgaGFzIGEgY2FyZCBzYXZlZCBpZiB0aGVpciBkZWZhdWx0UGF5bWVudE1ldGhvZCBoYXMgYW4gaWRcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRQYXltZW50TWV0aG9kID0gY3VzdG9tZXJTdGF0dXNSZXNwb25zZS5DdXN0b21lci5pbnZvaWNlX3NldHRpbmdzLmRlZmF1bHRfcGF5bWVudF9tZXRob2Q7XG4gICAgICAgICAgICBsZXQgdXNlckhhc0FscmVhZHlTZXR1cFBheW1lbnQgPSBCb29sZWFuKGRlZmF1bHRQYXltZW50TWV0aG9kICYmIGRlZmF1bHRQYXltZW50TWV0aG9kLmlkKTtcblxuICAgICAgICAgICAgLy8gc2hvdyBkaWZmZXJlbnQgZnJvbnRlbmQgaWYgdXNlciBhbHJlYWR5IGhhcyBjYXJkXG4gICAgICAgICAgICBpZiAodXNlckhhc0FscmVhZHlTZXR1cFBheW1lbnQpIHtcbiAgICAgICAgICAgICAgbGV0IGNhcmQgPSBjdXN0b21lclN0YXR1c1Jlc3BvbnNlLlBheW1lbnRNZXRob2RzWzBdLmNhcmQ7XG5cbiAgICAgICAgICAgICAgbGV0IGN1c3RvbWVyID0gY3VzdG9tZXJTdGF0dXNSZXNwb25zZS5DdXN0b21lcjtcblxuICAgICAgICAgICAgICBsZXQgdG9wT2ZEaXNwbGF5ID0gY3VzdG9tZXIuZW1haWwuc3BsaXQoJ0AnKVswXTtcbiAgICAgICAgICAgICAgbGV0IGJvdHRvbU9mRGlzcGxheSA9ICdAJyArIGN1c3RvbWVyLmVtYWlsLnNwbGl0KCdAJylbMV07XG5cbiAgICAgICAgICAgICAgbGV0IGNhcmREZXRhaWxzID0ge1xuICAgICAgICAgICAgICAgIGJyYW5kOiBjYXJkLmJyYW5kLFxuICAgICAgICAgICAgICAgIGV4cGlyeVllYXI6IGNhcmQuZXhwX3llYXIsXG4gICAgICAgICAgICAgICAgZXhwaXJ5TW9udGg6IGNhcmQuZXhwX21vbnRoLFxuICAgICAgICAgICAgICAgIGxhc3RGb3VyOiBjYXJkLmxhc3Q0LFxuICAgICAgICAgICAgICAgIHRvcE9mRGlzcGxheTogdG9wT2ZEaXNwbGF5LFxuICAgICAgICAgICAgICAgIGJvdHRvbU9mRGlzcGxheTogYm90dG9tT2ZEaXNwbGF5LFxuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIHRoYXQuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGN1cnJlbnRGbG93U3RhZ2U6ICdjYXJkQ29uZmlybWVkJyxcbiAgICAgICAgICAgICAgICBwYWdlVGl0bGU6ICdQYXltZW50IE1ldGhvZHMnLFxuICAgICAgICAgICAgICAgIHVzZXJDYXJkRGV0YWlsczogY2FyZERldGFpbHMsXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZElkOiBjdXN0b21lclN0YXR1c1Jlc3BvbnNlLlBheW1lbnRNZXRob2RzWzBdLmlkLFxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAvLyBvdGhlcndpc2UsIHByb21wdCB0aGVtIHRvIHNhdmUgYSBjYXJkXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGF0LnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Rmxvd1N0YWdlOiAnY29uZmlybWluZ0NhcmQnLFxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAvLyBnZXQgYSBwYXltZW50IG1ldGhvZCBzZWNyZXQgZm9yIGZyb250ZW5kXG4gICAgICAgICAgICAgIExicnlpby5jYWxsKFxuICAgICAgICAgICAgICAgICdjdXN0b21lcicsXG4gICAgICAgICAgICAgICAgJ3NldHVwJyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogc3RyaXBlRW52aXJvbm1lbnQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAncG9zdCdcbiAgICAgICAgICAgICAgKS50aGVuKChjdXN0b21lclNldHVwUmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICBjbGllbnRTZWNyZXQgPSBjdXN0b21lclNldHVwUmVzcG9uc2UuY2xpZW50X3NlY3JldDtcblxuICAgICAgICAgICAgICAgIC8vIGluc3RhbnRpYXRlIHN0cmlwZSBlbGVtZW50c1xuICAgICAgICAgICAgICAgIHNldHVwU3RyaXBlKCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBnZXQgY3VzdG9tZXIgdHJhbnNhY3Rpb25zXG4gICAgICAgICAgICBMYnJ5aW8uY2FsbChcbiAgICAgICAgICAgICAgJ2N1c3RvbWVyJyxcbiAgICAgICAgICAgICAgJ2xpc3QnLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZW52aXJvbm1lbnQ6IHN0cmlwZUVudmlyb25tZW50LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAncG9zdCdcbiAgICAgICAgICAgICkudGhlbigoY3VzdG9tZXJUcmFuc2FjdGlvbnNSZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICB0aGF0LnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBjdXN0b21lclRyYW5zYWN0aW9uczogY3VzdG9tZXJUcmFuc2FjdGlvbnNSZXNwb25zZSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBzdGF0dXMgY2FsbCBmYWlscywgZWl0aGVyIGFuIGFjdHVhbCBlcnJvciBvciBuZWVkIHRvIHJ1biBzZXR1cCBmaXJzdFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgLy8gZXJyb3JTdHJpbmcgcGFzc2VkIGZyb20gdGhlIEFQSSAod2l0aCBhIDQwMyBlcnJvcilcbiAgICAgICAgICAgIGNvbnN0IGVycm9yU3RyaW5nID0gJ3VzZXIgYXMgY3VzdG9tZXIgaXMgbm90IHNldHVwIHlldCc7XG5cbiAgICAgICAgICAgIC8vIGlmIGl0J3MgYmVhbWVyJ3MgZXJyb3IgaW5kaWNhdGluZyB0aGUgYWNjb3VudCBpcyBub3QgbGlua2VkIHlldFxuICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UgJiYgZXJyb3IubWVzc2FnZS5pbmRleE9mKGVycm9yU3RyaW5nKSA+IC0xKSB7XG4gICAgICAgICAgICAgIC8vIHNlbmQgdGhlbSB0byBzYXZlIGEgY2FyZFxuICAgICAgICAgICAgICB0aGF0LnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Rmxvd1N0YWdlOiAnY29uZmlybWluZ0NhcmQnLFxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAvLyBnZXQgYSBwYXltZW50IG1ldGhvZCBzZWNyZXQgZm9yIGZyb250ZW5kXG4gICAgICAgICAgICAgIExicnlpby5jYWxsKFxuICAgICAgICAgICAgICAgICdjdXN0b21lcicsXG4gICAgICAgICAgICAgICAgJ3NldHVwJyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogc3RyaXBlRW52aXJvbm1lbnQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAncG9zdCdcbiAgICAgICAgICAgICAgKS50aGVuKChjdXN0b21lclNldHVwUmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICBjbGllbnRTZWNyZXQgPSBjdXN0b21lclNldHVwUmVzcG9uc2UuY2xpZW50X3NlY3JldDtcblxuICAgICAgICAgICAgICAgIC8vIGluc3RhbnRpYXRlIHN0cmlwZSBlbGVtZW50c1xuICAgICAgICAgICAgICAgIHNldHVwU3RyaXBlKCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAvLyA1MDAgZXJyb3IgZnJvbSB0aGUgYmFja2VuZCBiZWluZyBkb3duXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yID09PSAnaW50ZXJuYWxfYXBpc19kb3duJykge1xuICAgICAgICAgICAgICBkb1RvYXN0KHsgbWVzc2FnZTogQVBJU19ET1dOX0VSUk9SX1JFU1BPTlNFLCBpc0Vycm9yOiB0cnVlIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gcHJvYmFibHkgYW4gZXJyb3IgZnJvbSBzdHJpcGVcbiAgICAgICAgICAgICAgZG9Ub2FzdCh7IG1lc3NhZ2U6IENBUkRfU0VUVVBfRVJST1JfUkVTUE9OU0UsIGlzRXJyb3I6IHRydWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwgMjUwKTtcblxuICAgIGZ1bmN0aW9uIHNldHVwU3RyaXBlKCkge1xuICAgICAgLy8gVE9ETzogaGF2ZSB0byBmaXggdGhpcywgdXNpbmcgc28gdGhhdCB0aGUgc2NyaXB0IGlzIGF2YWlsYWJsZVxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdHJpcGVFbGVtZW50cyA9IGZ1bmN0aW9uIChwdWJsaWNLZXksIHNldHVwSW50ZW50KSB7XG4gICAgICAgICAgdmFyIHN0cmlwZSA9IFN0cmlwZShwdWJsaWNLZXkpO1xuICAgICAgICAgIHZhciBlbGVtZW50cyA9IHN0cmlwZS5lbGVtZW50cygpO1xuXG4gICAgICAgICAgLy8gRWxlbWVudCBzdHlsZXNcbiAgICAgICAgICB2YXIgc3R5bGUgPSB7XG4gICAgICAgICAgICBiYXNlOiB7XG4gICAgICAgICAgICAgIGZvbnRTaXplOiAnMTZweCcsXG4gICAgICAgICAgICAgIGNvbG9yOiAnIzMyMzI1ZCcsXG4gICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICctYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsIFNlZ29lIFVJLCBSb2JvdG8sIHNhbnMtc2VyaWYnLFxuICAgICAgICAgICAgICBmb250U21vb3RoaW5nOiAnYW50aWFsaWFzZWQnLFxuICAgICAgICAgICAgICAnOjpwbGFjZWhvbGRlcic6IHtcbiAgICAgICAgICAgICAgICBjb2xvcjogJ3JnYmEoMCwwLDAsMC40KScsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgY2FyZCA9IGVsZW1lbnRzLmNyZWF0ZSgnY2FyZCcsIHsgc3R5bGU6IHN0eWxlIH0pO1xuXG4gICAgICAgICAgY2FyZC5tb3VudCgnI2NhcmQtZWxlbWVudCcpO1xuXG4gICAgICAgICAgLy8gRWxlbWVudCBmb2N1cyByaW5nXG4gICAgICAgICAgY2FyZC5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FyZC1lbGVtZW50Jyk7XG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdmb2N1c2VkJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjYXJkLm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcmQtZWxlbWVudCcpO1xuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnZm9jdXNlZCcpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY2FyZC5vbigncmVhZHknLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjYXJkLmZvY3VzKCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB2YXIgZW1haWwgPSB0aGF0LnByb3BzLmVtYWlsO1xuXG4gICAgICAgICAgZnVuY3Rpb24gc3VibWl0Rm9ybShldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgLy8gaWYgY2xpZW50IHNlY3JldCB3YXNuJ3QgbG9hZGVkIHByb3Blcmx5XG4gICAgICAgICAgICBpZiAoIWNsaWVudFNlY3JldCkge1xuICAgICAgICAgICAgICB2YXIgZGlzcGxheUVycm9yVGV4dCA9ICdUaGVyZSB3YXMgYW4gZXJyb3IgaW4gZ2VuZXJhdGluZyB5b3VyIHBheW1lbnQgbWV0aG9kLiBQbGVhc2UgY29udGFjdCBhIGRldmVsb3Blcic7XG4gICAgICAgICAgICAgIHZhciBkaXNwbGF5RXJyb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FyZC1lcnJvcnMnKTtcbiAgICAgICAgICAgICAgZGlzcGxheUVycm9yLnRleHRDb250ZW50ID0gZGlzcGxheUVycm9yVGV4dDtcblxuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNoYW5nZUxvYWRpbmdTdGF0ZSh0cnVlKTtcblxuICAgICAgICAgICAgc3RyaXBlXG4gICAgICAgICAgICAgIC5jb25maXJtQ2FyZFNldHVwKGNsaWVudFNlY3JldCwge1xuICAgICAgICAgICAgICAgIHBheW1lbnRfbWV0aG9kOiB7XG4gICAgICAgICAgICAgICAgICBjYXJkOiBjYXJkLFxuICAgICAgICAgICAgICAgICAgYmlsbGluZ19kZXRhaWxzOiB7IGVtYWlsOiBlbWFpbCB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICBjaGFuZ2VMb2FkaW5nU3RhdGUoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgdmFyIGRpc3BsYXlFcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJkLWVycm9ycycpO1xuICAgICAgICAgICAgICAgICAgZGlzcGxheUVycm9yLnRleHRDb250ZW50ID0gcmVzdWx0LmVycm9yLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIFRoZSBQYXltZW50TWV0aG9kIHdhcyBzdWNjZXNzZnVsbHkgc2V0IHVwXG4gICAgICAgICAgICAgICAgICAvLyBoaWRlIGFuZCBzaG93IHRoZSBwcm9wZXIgZGl2c1xuICAgICAgICAgICAgICAgICAgb3JkZXJDb21wbGV0ZShzdHJpcGUsIGNsaWVudFNlY3JldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBIYW5kbGUgcGF5bWVudCBzdWJtaXNzaW9uIHdoZW4gdXNlciBjbGlja3MgdGhlIHBheSBidXR0b24uXG4gICAgICAgICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJtaXQnKTtcbiAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHN1Ym1pdEZvcm0oZXZlbnQpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gY3VycmVudGx5IGRvZXNuJ3Qgd29yayBiZWNhdXNlIHRoZSBpZnJhbWUgamF2YXNjcmlwdCBjb250ZXh0IGlzIGRpZmZlcmVudFxuICAgICAgICAgIC8vIHdvdWxkIGJlIG5pY2UgdGhvdWdoIGlmIGl0J3MgZXZlbiB0ZWNobmljYWxseSBwb3NzaWJsZVxuICAgICAgICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgLy8gICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgICAvLyAgICAgc3VibWl0Rm9ybShldmVudCk7XG4gICAgICAgICAgLy8gICB9XG4gICAgICAgICAgLy8gfSwgZmFsc2UpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFRPRE86IHBvc3NpYmxlIGJ1ZyBoZXJlIHdoZXJlIGNsaWVudFNlY3JldCBpc24ndCBkb25lXG4gICAgICAgIHN0cmlwZUVsZW1lbnRzKHB1YmxpY0tleSwgY2xpZW50U2VjcmV0KTtcblxuICAgICAgICAvLyBTaG93IGEgc3Bpbm5lciBvbiBwYXltZW50IHN1Ym1pc3Npb25cbiAgICAgICAgdmFyIGNoYW5nZUxvYWRpbmdTdGF0ZSA9IGZ1bmN0aW9uIChpc0xvYWRpbmcpIHtcbiAgICAgICAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKS5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3RyaXBlLXNwaW5uZXInKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNidXR0b24tdGV4dCcpLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N0cmlwZS1zcGlubmVyJykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV0dG9uLXRleHQnKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gc2hvd3MgYSBzdWNjZXNzIC8gZXJyb3IgbWVzc2FnZSB3aGVuIHRoZSBwYXltZW50IGlzIGNvbXBsZXRlXG4gICAgICAgIHZhciBvcmRlckNvbXBsZXRlID0gZnVuY3Rpb24gKHN0cmlwZSwgY2xpZW50U2VjcmV0KSB7XG4gICAgICAgICAgc3RyaXBlLnJldHJpZXZlU2V0dXBJbnRlbnQoY2xpZW50U2VjcmV0KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIExicnlpby5jYWxsKFxuICAgICAgICAgICAgICAnY3VzdG9tZXInLFxuICAgICAgICAgICAgICAnc3RhdHVzJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGVudmlyb25tZW50OiBzdHJpcGVFbnZpcm9ubWVudCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgJ3Bvc3QnXG4gICAgICAgICAgICApLnRoZW4oKGN1c3RvbWVyU3RhdHVzUmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgbGV0IGNhcmQgPSBjdXN0b21lclN0YXR1c1Jlc3BvbnNlLlBheW1lbnRNZXRob2RzWzBdLmNhcmQ7XG5cbiAgICAgICAgICAgICAgbGV0IGN1c3RvbWVyID0gY3VzdG9tZXJTdGF0dXNSZXNwb25zZS5DdXN0b21lcjtcblxuICAgICAgICAgICAgICBsZXQgdG9wT2ZEaXNwbGF5ID0gY3VzdG9tZXIuZW1haWwuc3BsaXQoJ0AnKVswXTtcbiAgICAgICAgICAgICAgbGV0IGJvdHRvbU9mRGlzcGxheSA9ICdAJyArIGN1c3RvbWVyLmVtYWlsLnNwbGl0KCdAJylbMV07XG5cbiAgICAgICAgICAgICAgbGV0IGNhcmREZXRhaWxzID0ge1xuICAgICAgICAgICAgICAgIGJyYW5kOiBjYXJkLmJyYW5kLFxuICAgICAgICAgICAgICAgIGV4cGlyeVllYXI6IGNhcmQuZXhwX3llYXIsXG4gICAgICAgICAgICAgICAgZXhwaXJ5TW9udGg6IGNhcmQuZXhwX21vbnRoLFxuICAgICAgICAgICAgICAgIGxhc3RGb3VyOiBjYXJkLmxhc3Q0LFxuICAgICAgICAgICAgICAgIHRvcE9mRGlzcGxheSxcbiAgICAgICAgICAgICAgICBib3R0b21PZkRpc3BsYXksXG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgdGhhdC5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgY3VycmVudEZsb3dTdGFnZTogJ2NhcmRDb25maXJtZWQnLFxuICAgICAgICAgICAgICAgIHBhZ2VUaXRsZTogJ1BheW1lbnQgTWV0aG9kcycsXG4gICAgICAgICAgICAgICAgdXNlckNhcmREZXRhaWxzOiBjYXJkRGV0YWlscyxcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kSWQ6IGN1c3RvbWVyU3RhdHVzUmVzcG9uc2UuUGF5bWVudE1ldGhvZHNbMF0uaWQsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNoYW5nZUxvYWRpbmdTdGF0ZShmYWxzZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9LCAwKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgbGV0IHRoYXQgPSB0aGlzO1xuXG4gICAgY29uc3QgcmV0dXJuVG9WYWx1ZSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMobG9jYXRpb24uc2VhcmNoKS5nZXQoJ3JldHVyblRvJyk7XG4gICAgbGV0IHNob3VsZFNob3dCYWNrVG9NZW1iZXJzaGlwQnV0dG9uID0gcmV0dXJuVG9WYWx1ZSA9PT0gJ3ByZW1pdW0nO1xuXG4gICAgZnVuY3Rpb24gc2V0QXNDb25maXJtaW5nQ2FyZCgpIHtcbiAgICAgIHRoYXQuc2V0U3RhdGUoe1xuICAgICAgICBjdXJyZW50Rmxvd1N0YWdlOiAnY29uZmlybWluZ0NhcmQnLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBzZXRQcmVmZXJyZWRDdXJyZW5jeSB9ID0gdGhpcy5wcm9wcztcblxuICAgIC8vIHdoZW4gdXNlciBjaGFuZ2VzIGN1cnJlbmN5IGluIHNlbGVjdG9yXG4gICAgZnVuY3Rpb24gb25DdXJyZW5jeUNoYW5nZShldmVudCkge1xuICAgICAgY29uc3QgeyB2YWx1ZSB9ID0gZXZlbnQudGFyZ2V0O1xuXG4gICAgICAvLyB1cGRhdGUgcHJlZmVycmVkIGN1cnJlbmN5IGluIGZyb250ZW5kXG4gICAgICB0aGF0LnNldFN0YXRlKHtcbiAgICAgICAgcHJlZmVycmVkQ3VycmVuY3k6IHZhbHVlLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIHVwZGF0ZSBjbGllbnQgc2V0dGluZ3NcbiAgICAgIHNldFByZWZlcnJlZEN1cnJlbmN5KHZhbHVlKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHNjcmlwdEZhaWxlZFRvTG9hZCwgb3Blbk1vZGFsIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgY29uc3QgeyBjdXJyZW50Rmxvd1N0YWdlLCBwYWdlVGl0bGUsIHVzZXJDYXJkRGV0YWlscywgcGF5bWVudE1ldGhvZElkLCBwcmVmZXJyZWRDdXJyZW5jeSB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIHJldHVybiAoXG4gICAgICA8UGFnZSBub0Zvb3RlciBub1NpZGVOYXZpZ2F0aW9uIGNsYXNzTmFtZT1cImNhcmQtc3RhY2tcIiBiYWNrb3V0PXt7IHRpdGxlOiBfXyhwYWdlVGl0bGUpLCBiYWNrTGFiZWw6IF9fKCdCYWNrJykgfX0+XG4gICAgICAgIHsvKiBpZiBTdHJpcGUgamF2YXNjcmlwdCBkaWRuJ3QgbG9hZCAqL31cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICB7c2NyaXB0RmFpbGVkVG9Mb2FkICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZXJyb3JfX3RleHRcIj57X18oJ1RoZXJlIHdhcyBhbiBlcnJvciBjb25uZWN0aW5nIHRvIFN0cmlwZS4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nKX08L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogaW5pdGlhbCBtYXJrdXAgdG8gc2hvdyB3aGlsZSBnZXR0aW5nIGluZm9ybWF0aW9uICovfVxuICAgICAgICB7Y3VycmVudEZsb3dTdGFnZSA9PT0gJ2xvYWRpbmcnICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlckNhcmQgdG9Db25maXJtQ2FyZFwiPlxuICAgICAgICAgICAgPENhcmQgdGl0bGU9e19fKCdDb25uZWN0IHlvdXIgY2FyZCB3aXRoIE9keXNlZScpfSBzdWJ0aXRsZT17X18oJ0dldHRpbmcgeW91ciBjYXJkIGNvbm5lY3Rpb24gc3RhdHVzLi4uJyl9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG5cbiAgICAgICAgey8qIGN1c3RvbWVyIGhhcyBub3QgYWRkZWQgYSBjYXJkIHlldCAqL31cbiAgICAgICAge2N1cnJlbnRGbG93U3RhZ2UgPT09ICdjb25maXJtaW5nQ2FyZCcgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3Itcm9vdFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzci1tYWluXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3ItcGF5bWVudC1mb3JtIGNhcmQgY2FyZElucHV0XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzci1mb3JtLXJvd1wiPlxuICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cInBheW1lbnQtZGV0YWlsc1wiPkNhcmQgRGV0YWlsczwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNyLWlucHV0IHNyLWVsZW1lbnQgc3ItY2FyZC1lbGVtZW50XCIgaWQ9XCJjYXJkLWVsZW1lbnRcIiAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3ItZmllbGQtZXJyb3JcIiBpZD1cImNhcmQtZXJyb3JzXCIgcm9sZT1cImFsZXJ0XCIgLz5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImxpbmtCdXR0b25cIiBpZD1cInN1Ym1pdFwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdHJpcGVfX3NwaW5uZXIgaGlkZGVuXCIgaWQ9XCJzdHJpcGUtc3Bpbm5lclwiIC8+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBpZD1cImJ1dHRvbi10ZXh0XCI+e19fKCdBZGQgQ2FyZCcpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgICB7LyogaWYgdGhlIHVzZXIgaGFzIGFscmVhZHkgY29uZmlybWVkIHRoZWlyIGNhcmQgKi99XG4gICAgICAgIHtjdXJyZW50Rmxvd1N0YWdlID09PSAnY2FyZENvbmZpcm1lZCcgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3VjY2Vzc0NhcmRcIj5cbiAgICAgICAgICAgIHsvKiBiYWNrIHRvIG1lbWJlcnNoaXAgYnV0dG9uICovfVxuICAgICAgICAgICAge3Nob3VsZFNob3dCYWNrVG9NZW1iZXJzaGlwQnV0dG9uICYmIChcbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIGJ1dHRvbj1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXtfXygnQmFjayBUbyBPZHlzZWUgUHJlbWl1bScpfVxuICAgICAgICAgICAgICAgIGljb249e0lDT05TLlVQR1JBREV9XG4gICAgICAgICAgICAgICAgbmF2aWdhdGU9e2AvJC8ke1BBR0VTLk9EWVNFRV9NRU1CRVJTSElQfWB9XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiAnMjBweCcgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8Q2FyZFxuICAgICAgICAgICAgICB0aXRsZT17X18oJ0NhcmQgRGV0YWlscycpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhZGQtcGF5bWVudC1jYXJkLWRpdlwiXG4gICAgICAgICAgICAgIGJvZHk9e1xuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICA8UGxhc3RpY1xuICAgICAgICAgICAgICAgICAgICB0eXBlPXt1c2VyQ2FyZERldGFpbHMuYnJhbmR9XG4gICAgICAgICAgICAgICAgICAgIG5hbWU9e3VzZXJDYXJkRGV0YWlscy50b3BPZkRpc3BsYXkgKyAnICcgKyB1c2VyQ2FyZERldGFpbHMuYm90dG9tT2ZEaXNwbGF5fVxuICAgICAgICAgICAgICAgICAgICBleHBpcnk9e3VzZXJDYXJkRGV0YWlscy5leHBpcnlNb250aCArICcvJyArIHVzZXJDYXJkRGV0YWlscy5leHBpcnlZZWFyfVxuICAgICAgICAgICAgICAgICAgICBudW1iZXI9eydfX19fX19fX19fX18nICsgdXNlckNhcmREZXRhaWxzLmxhc3RGb3VyfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxiciAvPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBidXR0b249XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9e19fKCdSZW1vdmUgQ2FyZCcpfVxuICAgICAgICAgICAgICAgICAgICBpY29uPXtJQ09OUy5ERUxFVEV9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgb3Blbk1vZGFsKE1PREFMUy5DT05GSVJNX1JFTU9WRV9DQVJELCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kSWQ6IHBheW1lbnRNZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEFzQ29uZmlybWluZ0NhcmQ6IHNldEFzQ29uZmlybWluZ0NhcmQsXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBidXR0b249XCJzZWNvbmRhcnlcIlxuICAgICAgICAgICAgICAgICAgICBsYWJlbD17X18oJ1ZpZXcgVHJhbnNhY3Rpb25zJyl9XG4gICAgICAgICAgICAgICAgICAgIGljb249e0lDT05TLlNFVFRJTkdTfVxuICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0ZT17YC8kLyR7UEFHRVMuV0FMTEVUfT9maWF0VHlwZT1vdXRnb2luZyZ0YWI9ZmlhdC1wYXltZW50LWhpc3RvcnkmY3VycmVuY3k9ZmlhdGB9XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpbkxlZnQ6ICcxMHB4JyB9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxiciAvPlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImN1cnJlbmN5LXRvLXVzZS1kaXZcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cImN1cnJlbmN5LXRvLXVzZS1oZWFkZXJcIj57X18oJ0N1cnJlbmN5IFRvIFVzZScpfTo8L2gxPlxuXG4gICAgICAgICAgICAgIDxmaWVsZHNldC1zZWN0aW9uPlxuICAgICAgICAgICAgICAgIDxGb3JtRmllbGRcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImN1cnJlbmN5LXRvLXVzZS1zZWxlY3RvclwiXG4gICAgICAgICAgICAgICAgICBuYW1lPVwiY3VycmVuY3lfc2VsZWN0b3JcIlxuICAgICAgICAgICAgICAgICAgdHlwZT1cInNlbGVjdFwiXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25DdXJyZW5jeUNoYW5nZX1cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtwcmVmZXJyZWRDdXJyZW5jeX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7WydVU0QnLCAnRVVSJ10ubWFwKChjdXJyZW5jeSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17Y3VycmVuY3l9IHZhbHVlPXtjdXJyZW5jeX0+XG4gICAgICAgICAgICAgICAgICAgICAge2N1cnJlbmN5fVxuICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIDwvRm9ybUZpZWxkPlxuICAgICAgICAgICAgICA8L2ZpZWxkc2V0LXNlY3Rpb24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvUGFnZT5cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNldHRpbmdzU3RyaXBlQ2FyZDtcbi8qIGVzbGludC1lbmFibGUgbm8tdW5kZWYgKi9cbi8qIGVzbGludC1lbmFibGUgcmVhY3QvcHJvcC10eXBlcyAqL1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBSEE7QUFhQTtBQUNBOzs7QUFDQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQTdCQTtBQUNBO0FBQ0E7QUErQkE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFEQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFqQkE7QUEwQkE7QUFDQTtBQURBO0FBQ0E7QUFJQTtBQUlBO0FBREE7QUFLQTtBQUNBO0FBRUE7QUFYQTtBQXJDQTtBQUNBO0FBQ0E7QUFtREE7QUFJQTtBQURBO0FBS0E7QUFDQTtBQURBO0FBN0RBO0FBUkE7QUE0RUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBSUE7QUFJQTtBQURBO0FBS0E7QUFDQTtBQUVBO0FBbEJBO0FBQUE7QUFzQkE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQTFHQTtBQTRHQTtBQS9HQTtBQUNBO0FBaUhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBTEE7QUFEQTtBQVlBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQURBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBaEJBO0FBcERBO0FBQ0E7QUFDQTtBQXVFQTtBQUNBO0FBQ0E7QUEzRUE7QUErRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBckZBO0FBQ0E7QUFDQTtBQXVGQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzR0E7QUFDQTtBQUNBO0FBNkdBO0FBQ0E7QUFDQTtBQUlBO0FBREE7QUFLQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUF4QkE7QUFnQ0E7QUFqQ0E7QUFEQTtBQS9HQTtBQXFKQTtBQUNBOzs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBWEE7QUFDQTtBQWNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFEQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBMUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQStCQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBTUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQU1BO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBU0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBTEE7QUFTQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQVhBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFMQTtBQXpCQTtBQXFDQTtBQUFBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFBQTtBQUFBO0FBakdBO0FBNEdBOzs7O0FBL2NBO0FBQ0E7QUFpZEE7QUFDQTtBQUNBO0FBQUE7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../ui/page/settingsStripeCard/view.jsx\n");

/***/ })

}]);