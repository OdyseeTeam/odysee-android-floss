(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["openInAppLink"],{

/***/ "./component/openInAppLink/index.js":
/*!******************************************!*\
  !*** ./component/openInAppLink/index.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-redux */ \"../node_modules/react-redux/es/index.js\");\n/* harmony import */ var redux_selectors_user__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/selectors/user */ \"../ui/redux/selectors/user.js\");\n/* harmony import */ var _view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./view */ \"./component/openInAppLink/view.jsx\");\n\n\n\n\nvar select = function select(state) {\n  return {\n    user: Object(redux_selectors_user__WEBPACK_IMPORTED_MODULE_1__[\"selectUser\"])(state)\n  };\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_0__[\"connect\"])(select)(_view__WEBPACK_IMPORTED_MODULE_2__[\"default\"]));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnQvb3BlbkluQXBwTGluay9pbmRleC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2NvbXBvbmVudC9vcGVuSW5BcHBMaW5rL2luZGV4LmpzP2UyNmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB7IHNlbGVjdFVzZXIgfSBmcm9tICdyZWR1eC9zZWxlY3RvcnMvdXNlcic7XG5pbXBvcnQgT3BlbkluQXBwTGluayBmcm9tICcuL3ZpZXcnO1xuXG5jb25zdCBzZWxlY3QgPSBzdGF0ZSA9PiAoe1xuICB1c2VyOiBzZWxlY3RVc2VyKHN0YXRlKSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KHNlbGVjdCkoT3BlbkluQXBwTGluayk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./component/openInAppLink/index.js\n");

/***/ }),

/***/ "./component/openInAppLink/view.jsx":
/*!******************************************!*\
  !*** ./component/openInAppLink/view.jsx ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-router */ \"../node_modules/react-router/esm/react-router.js\");\n/* harmony import */ var util_url__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! util/url */ \"../ui/util/url.js\");\n/* harmony import */ var component_common_nag__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! component/common/nag */ \"../ui/component/common/nag.jsx\");\n/* harmony import */ var effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! effects/use-persisted-state */ \"../ui/effects/use-persisted-state.js\");\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\n\n\n\n\n\nvar userAgent = navigator.userAgent.toLowerCase();\nvar isAndroidDevice = userAgent.includes('android');\nvar isDesktopDevice = typeof window.orientation === 'undefined';\n\nvar addDaysToMs = function addDaysToMs(initialNumberInMs, daysToAdd) {\n  return initialNumberInMs + daysToAdd * 1000 * 60 * 60 * 24;\n};\n\nfunction OpenInAppLink(props) {\n  var replace = props.history.replace,\n      location = props.location,\n      uri = props.uri,\n      user = props.user;\n\n  var _React$useState = react__WEBPACK_IMPORTED_MODULE_0___default.a.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      showNag = _React$useState2[0],\n      setShowNag = _React$useState2[1];\n\n  var _usePersistedState = Object(effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('open-in-app-close-count', 0),\n      _usePersistedState2 = _slicedToArray(_usePersistedState, 2),\n      closeNagClicksCount = _usePersistedState2[0],\n      setCloseNagClicksCount = _usePersistedState2[1];\n\n  var _usePersistedState3 = Object(effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('open-in-app-close-date', 0),\n      _usePersistedState4 = _slicedToArray(_usePersistedState3, 2),\n      closeNagLastDate = _usePersistedState4[0],\n      setCloseNagLastDate = _usePersistedState4[1];\n\n  var pathname = location.pathname,\n      search = location.search;\n  var params = new URLSearchParams(search);\n  var hasSrcParam = params.get('src');\n  var isAndroidUser = false;\n  var isDesktopUser = false;\n  user && user.device_types && user.device_types.forEach(function (usedDevice) {\n    if (usedDevice === 'mobile') {\n      isAndroidUser = true;\n    } else if (usedDevice === 'desktop') {\n      isDesktopUser = true;\n    }\n  });\n  var isWebUserOnly = !isAndroidUser && !isDesktopUser;\n  var appLink = uri;\n\n  if (!appLink) {\n    appLink = Object(util_url__WEBPACK_IMPORTED_MODULE_2__[\"formatWebUrlIntoLbryUrl\"])(pathname, search);\n  }\n\n  function handleClose() {\n    setShowNag(false);\n    setCloseNagClicksCount(closeNagClicksCount + 1);\n    setCloseNagLastDate(Date.now());\n  }\n\n  react__WEBPACK_IMPORTED_MODULE_0___default.a.useEffect(function () {\n    if (hasSrcParam) {\n      params[\"delete\"]('src');\n      var newParams = params.toString();\n      var newUrl = \"\".concat(pathname, \"?\").concat(newParams);\n      replace(newUrl);\n    }\n  }, [hasSrcParam, search, pathname, replace]);\n  react__WEBPACK_IMPORTED_MODULE_0___default.a.useEffect(function () {\n    var isOnDeviceToPrompt = isAndroidUser && isAndroidDevice || isDesktopUser && isDesktopDevice;\n    var dateRightNow = Date.now();\n    var daysToAddToDate = Math.min(30, Math.pow(2, closeNagClicksCount));\n    var startDateForAnotherOpenNag = closeNagLastDate + addDaysToMs(closeNagLastDate, daysToAddToDate);\n    var hasWaitedEnoughTime = dateRightNow > startDateForAnotherOpenNag;\n\n    if (isOnDeviceToPrompt && hasWaitedEnoughTime) {\n      setShowNag(true);\n    } // Don't pass showNag into this effect because we only want the initial value\n    // If the param is removed from the url, the nag should still be shown\n\n  }, [setShowNag, isAndroidUser, isDesktopUser, closeNagLastDate, closeNagClicksCount]);\n\n  if (!showNag || isWebUserOnly) {\n    return null;\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(component_common_nag__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n    type: \"helpful\",\n    message: __('It looks like you may have LBRY %platform% installed.', {\n      platform: isDesktopDevice ? __('Desktop') : __('Android')\n    }),\n    actionText: __('Use the App'),\n    href: appLink,\n    onClose: handleClose\n  });\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_router__WEBPACK_IMPORTED_MODULE_1__[\"withRouter\"])(OpenInAppLink));\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnQvb3BlbkluQXBwTGluay92aWV3LmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2NvbXBvbmVudC9vcGVuSW5BcHBMaW5rL3ZpZXcuanN4P2FjN2QiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB3aXRoUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcbmltcG9ydCB7IGZvcm1hdFdlYlVybEludG9MYnJ5VXJsIH0gZnJvbSAndXRpbC91cmwnO1xuaW1wb3J0IE5hZyBmcm9tICdjb21wb25lbnQvY29tbW9uL25hZyc7XG5pbXBvcnQgdXNlUGVyc2lzdGVkU3RhdGUgZnJvbSAnZWZmZWN0cy91c2UtcGVyc2lzdGVkLXN0YXRlJztcblxuY29uc3QgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuY29uc3QgaXNBbmRyb2lkRGV2aWNlID0gdXNlckFnZW50LmluY2x1ZGVzKCdhbmRyb2lkJyk7XG5jb25zdCBpc0Rlc2t0b3BEZXZpY2UgPSB0eXBlb2Ygd2luZG93Lm9yaWVudGF0aW9uID09PSAndW5kZWZpbmVkJztcbmNvbnN0IGFkZERheXNUb01zID0gKGluaXRpYWxOdW1iZXJJbk1zOiBudW1iZXIsIGRheXNUb0FkZDogbnVtYmVyKSA9PiB7XG4gIHJldHVybiBpbml0aWFsTnVtYmVySW5NcyArIGRheXNUb0FkZCAqIDEwMDAgKiA2MCAqIDYwICogMjQ7XG59O1xuXG50eXBlIFByb3BzID0ge1xuICBoaXN0b3J5OiB7IHJlcGxhY2U6IHN0cmluZyA9PiB2b2lkLCBwdXNoOiBzdHJpbmcgPT4gdm9pZCB9LFxuICBsb2NhdGlvbjogeyBzZWFyY2g6IHN0cmluZywgcGF0aG5hbWU6IHN0cmluZyB9LFxuICB1cmk6IHN0cmluZyxcbiAgdXNlcjogP1VzZXIsXG59O1xuXG5mdW5jdGlvbiBPcGVuSW5BcHBMaW5rKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7XG4gICAgaGlzdG9yeTogeyByZXBsYWNlIH0sXG4gICAgbG9jYXRpb24sXG4gICAgdXJpLFxuICAgIHVzZXIsXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgW3Nob3dOYWcsIHNldFNob3dOYWddID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY2xvc2VOYWdDbGlja3NDb3VudCwgc2V0Q2xvc2VOYWdDbGlja3NDb3VudF0gPSB1c2VQZXJzaXN0ZWRTdGF0ZSgnb3Blbi1pbi1hcHAtY2xvc2UtY291bnQnLCAwKTtcbiAgY29uc3QgW2Nsb3NlTmFnTGFzdERhdGUsIHNldENsb3NlTmFnTGFzdERhdGVdID0gdXNlUGVyc2lzdGVkU3RhdGUoJ29wZW4taW4tYXBwLWNsb3NlLWRhdGUnLCAwKTtcbiAgY29uc3QgeyBwYXRobmFtZSwgc2VhcmNoIH0gPSBsb2NhdGlvbjtcbiAgbGV0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoc2VhcmNoKTtcbiAgY29uc3QgaGFzU3JjUGFyYW0gPSBwYXJhbXMuZ2V0KCdzcmMnKTtcbiAgbGV0IGlzQW5kcm9pZFVzZXIgPSBmYWxzZTtcbiAgbGV0IGlzRGVza3RvcFVzZXIgPSBmYWxzZTtcbiAgdXNlciAmJlxuICAgIHVzZXIuZGV2aWNlX3R5cGVzICYmXG4gICAgdXNlci5kZXZpY2VfdHlwZXMuZm9yRWFjaCh1c2VkRGV2aWNlID0+IHtcbiAgICAgIGlmICh1c2VkRGV2aWNlID09PSAnbW9iaWxlJykge1xuICAgICAgICBpc0FuZHJvaWRVc2VyID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAodXNlZERldmljZSA9PT0gJ2Rlc2t0b3AnKSB7XG4gICAgICAgIGlzRGVza3RvcFVzZXIgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gIGNvbnN0IGlzV2ViVXNlck9ubHkgPSAhaXNBbmRyb2lkVXNlciAmJiAhaXNEZXNrdG9wVXNlcjtcblxuICBsZXQgYXBwTGluayA9IHVyaTtcbiAgaWYgKCFhcHBMaW5rKSB7XG4gICAgYXBwTGluayA9IGZvcm1hdFdlYlVybEludG9MYnJ5VXJsKHBhdGhuYW1lLCBzZWFyY2gpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlQ2xvc2UoKSB7XG4gICAgc2V0U2hvd05hZyhmYWxzZSk7XG4gICAgc2V0Q2xvc2VOYWdDbGlja3NDb3VudChjbG9zZU5hZ0NsaWNrc0NvdW50ICsgMSk7XG4gICAgc2V0Q2xvc2VOYWdMYXN0RGF0ZShEYXRlLm5vdygpKTtcbiAgfVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGhhc1NyY1BhcmFtKSB7XG4gICAgICBwYXJhbXMuZGVsZXRlKCdzcmMnKTtcbiAgICAgIGNvbnN0IG5ld1BhcmFtcyA9IHBhcmFtcy50b1N0cmluZygpO1xuICAgICAgY29uc3QgbmV3VXJsID0gYCR7cGF0aG5hbWV9PyR7bmV3UGFyYW1zfWA7XG4gICAgICByZXBsYWNlKG5ld1VybCk7XG4gICAgfVxuICB9LCBbaGFzU3JjUGFyYW0sIHNlYXJjaCwgcGF0aG5hbWUsIHJlcGxhY2VdKTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGlzT25EZXZpY2VUb1Byb21wdCA9IChpc0FuZHJvaWRVc2VyICYmIGlzQW5kcm9pZERldmljZSkgfHwgKGlzRGVza3RvcFVzZXIgJiYgaXNEZXNrdG9wRGV2aWNlKTtcbiAgICBjb25zdCBkYXRlUmlnaHROb3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGRheXNUb0FkZFRvRGF0ZSA9IE1hdGgubWluKDMwLCBNYXRoLnBvdygyLCBjbG9zZU5hZ0NsaWNrc0NvdW50KSk7XG4gICAgY29uc3Qgc3RhcnREYXRlRm9yQW5vdGhlck9wZW5OYWcgPSBjbG9zZU5hZ0xhc3REYXRlICsgYWRkRGF5c1RvTXMoY2xvc2VOYWdMYXN0RGF0ZSwgZGF5c1RvQWRkVG9EYXRlKTtcbiAgICBjb25zdCBoYXNXYWl0ZWRFbm91Z2hUaW1lID0gZGF0ZVJpZ2h0Tm93ID4gc3RhcnREYXRlRm9yQW5vdGhlck9wZW5OYWc7XG5cbiAgICBpZiAoaXNPbkRldmljZVRvUHJvbXB0ICYmIGhhc1dhaXRlZEVub3VnaFRpbWUpIHtcbiAgICAgIHNldFNob3dOYWcodHJ1ZSk7XG4gICAgfVxuICAgIC8vIERvbid0IHBhc3Mgc2hvd05hZyBpbnRvIHRoaXMgZWZmZWN0IGJlY2F1c2Ugd2Ugb25seSB3YW50IHRoZSBpbml0aWFsIHZhbHVlXG4gICAgLy8gSWYgdGhlIHBhcmFtIGlzIHJlbW92ZWQgZnJvbSB0aGUgdXJsLCB0aGUgbmFnIHNob3VsZCBzdGlsbCBiZSBzaG93blxuICB9LCBbc2V0U2hvd05hZywgaXNBbmRyb2lkVXNlciwgaXNEZXNrdG9wVXNlciwgY2xvc2VOYWdMYXN0RGF0ZSwgY2xvc2VOYWdDbGlja3NDb3VudF0pO1xuXG4gIGlmICghc2hvd05hZyB8fCBpc1dlYlVzZXJPbmx5KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxOYWdcbiAgICAgIHR5cGU9XCJoZWxwZnVsXCJcbiAgICAgIG1lc3NhZ2U9e19fKCdJdCBsb29rcyBsaWtlIHlvdSBtYXkgaGF2ZSBMQlJZICVwbGF0Zm9ybSUgaW5zdGFsbGVkLicsIHtcbiAgICAgICAgcGxhdGZvcm06IGlzRGVza3RvcERldmljZSA/IF9fKCdEZXNrdG9wJykgOiBfXygnQW5kcm9pZCcpLFxuICAgICAgfSl9XG4gICAgICBhY3Rpb25UZXh0PXtfXygnVXNlIHRoZSBBcHAnKX1cbiAgICAgIGhyZWY9e2FwcExpbmt9XG4gICAgICBvbkNsb3NlPXtoYW5kbGVDbG9zZX1cbiAgICAvPlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoUm91dGVyKE9wZW5JbkFwcExpbmspO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFVQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFQQTtBQVVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBV0E7QUFDQTtBQVpBO0FBQ0E7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFQQTtBQVVBO0FBQ0E7QUFDQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./component/openInAppLink/view.jsx\n");

/***/ })

}]);