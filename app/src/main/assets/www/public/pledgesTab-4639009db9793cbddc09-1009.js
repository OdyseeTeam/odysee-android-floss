"use strict";(self.webpackChunkodysee_com=self.webpackChunkodysee_com||[]).push([[939],{75402:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var r=n(24582),a=n(81352),l=n(52338),i=n(52705),c=n(88441),s=n(16062),o=n(91616),u=n(53389),m=n(6993),p=n(15184),d=n(91960),b=n(47021),h=n(91983),A=n(44908),f=n(77369),y=n(22768),E=n.n(y),v=n(94072),w=n(71036).__;var _=n(88374),C=n(7920),g={doMembershipMine:l.fI,doMembershipList:l.OT};const S=(0,r.$j)((function(e,t){var n=(0,C.W7c)(e,t.membershipSub.membership.channel_claim_id),r=t.membershipSub,l=n?(0,u.buildURI)({channelName:null==n?void 0:n.name,channelClaimId:null==n?void 0:n.claim_id}):"",i=r?r.membership.id:void 0,c=(0,a.oC)(e,null==n?void 0:n.claim_id,i);return{activeChannelClaim:(0,_.YG)(e),creatorChannelClaim:n,membershipIndex:c,creatorChannelUri:l,creatorMemberships:(0,a.Yp)(e,l)}}),g)((function(e){var t=e.membershipSub,n=e.creatorChannelClaim,r=e.activeChannelClaim,a=e.membershipIndex,l=e.doMembershipList,i=(null==r?void 0:r.name)||"",s=t.membership.channel_claim_id,y=n?(0,u.buildURI)({channelName:n.name,channelClaimId:s}):null,_=y?(0,m.$U)(y):"",C=t.subscription.current_price?t.subscription.current_price.currency.toUpperCase():"",g=t.subscription.current_price?t.subscription.current_price.amount:"",S=t.subscription.current_price?t.subscription.current_price.frequency:"",x=t.payments.some((function(e){return"submitted"===e.status})),M=!x&&t.subscription.earliest_renewal_at&&new Date>new Date(t.subscription.earliest_renewal_at),N=t.payments.filter((function(e){return e.status&&("paid"===e.status||"submitted"===e.status)})).length,k=1===N?w("1 Month"):w("%paid_months% Months",{paid_months:N});return c.useEffect((function(){-1===a&&l({channel_claim_id:s})}),[s,l,a]),n&&t&&-1!==a?c.createElement("tr",{key:"".concat(t.membership.channel_claim_id).concat(t.membership.name)},c.createElement("td",{className:"channelThumbnail"},c.createElement(p.Z,{xsmall:!0,uri:y}),c.createElement(p.Z,{xxsmall:!0,uri:""===y?void 0:y,tooltipTitle:""===i?w("Anonymous"):i})),c.createElement("td",null,c.createElement(d.Z,{uri:y,link:!0})),c.createElement("td",null,t.membership.name),c.createElement("td",null,E()(t.subscription.ends_at).format("L")),c.createElement("td",null,k),c.createElement("td",null,g?"$".concat((g/100).toFixed(2)," ").concat(C," / ").concat(w((0,h.lV)(S))):null),c.createElement("td",null,x?"Submitted":(0,v.FQ)(t)),c.createElement("td",null,"active"===t.subscription.status?M?c.createElement(b.Z,{uri:y}):w("Active"):"lapsed"===t.subscription.status?w("Past Due"):"pending"===t.subscription.status?w("Pending"):w("Canceled")),c.createElement("td",null,c.createElement("span",{dir:"auto",className:"button__label"},c.createElement(A.default,{button:"alt",icon:f.MEMBERSHIP,navigate:_+"?view=membership"})))):c.createElement("tr",null,c.createElement("td",{colSpan:"9"},c.createElement(o.Z,null)))}));var x=n(1892),M=n.n(x),N=n(95760),k=n.n(N),I=n(38311),B=n.n(I),F=n(58192),Z=n.n(F),K=n(38060),U=n.n(K),O=n(54865),j=n.n(O),G=n(94445),P={};P.styleTagTransform=j(),P.setAttributes=Z(),P.insert=B().bind(null,"head"),P.domAPI=k(),P.insertStyleElement=U();M()(G.Z,P);G.Z&&G.Z.locals&&G.Z.locals;var R=n(71036).__;const T=function(e){var t=e.label,n=e.sortKey,r=e.ownKey,a=e.order,l=e.setKey,i=e.setOrder,s=function(){"desc"!==a||n!==r?(l(r),i("desc")):(l(null),i(null))},o="asc"===a&&n===r,u="desc"===a&&n===r;return c.createElement("th",null,c.createElement("span",{className:"th-label-with-arrows"},R(t),c.createElement("span",{className:"arrows"},c.createElement("span",{className:"arrow-up ".concat(o?"arrow-up--active":""),onClick:function(){"asc"!==a||n!==r?(l(r),i("asc")):(l(null),i(null))},role:"button",tabIndex:0,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||s()}},"▲"),c.createElement("span",{className:"arrow-down ".concat(u?"arrow-down--active":""),onClick:function(){return s()},role:"button",tabIndex:0,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||s()}},"▼"))))};var Y=n(71036).__;function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,i,c=[],s=!0,o=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=l.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){o=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(o)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const z=function(e){var t=e.myMembershipSubs,n=e.isFetchingMembershipSubs,r=e.doMembershipMine,a=e.doResolveClaimIds;c.useEffect((function(){void 0===t&&r()}),[r,t]);var l=c.useMemo((function(){return t?t.map((function(e){return e.membership.channel_claim_id})):[]}),[t]),i=D(c.useState(!1),2),u=i[0],m=i[1];c.useEffect((function(){!u&&l&&l.length&&(m(!0),a(l))}),[l,a,u]);var p=D(c.useState(null),2),d=p[0],b=p[1],h=D(c.useState("desc"),2),A=h[0],f=h[1],y="renewBy",E="amount",w=c.useMemo((function(){var e,n=function(e,t){return(0,v.ae)(e)-((0,v.ae)(t)||999999999999999)};return d?d===y?e="asc"===A?n:function(e,t){return((0,v.ae)(t)||999999999999999)-(0,v.ae)(e)}:d===E&&(e="asc"===A?function(e,t){return e.subscription.current_price.amount-t.subscription.current_price.amount}:function(e,t){return t.subscription.current_price.amount-e.subscription.current_price.amount}):e=n,t?t.filter((function(e){return!0===e.subscription.is_active})).sort(e):[]}),[t,d,A]);return void 0===t&&n?c.createElement("div",{className:"main--empty"},c.createElement(o.Z,null)):void 0!==t||n?t&&0!==t.length?c.createElement("div",{className:"membership__mypledges-wrapper"},c.createElement("div",{className:"membership__mypledges-content"},c.createElement("div",{className:"membership-table__wrapper"},c.createElement("table",{className:"table table--pledges"},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",{className:"channelName-header",colSpan:"2"},Y("Channel Name")),c.createElement("th",null,Y("Tier")),c.createElement("th",null,Y("Paid Until")),c.createElement("th",null,Y("Months Supported")),c.createElement(T,{label:"Amount",sortKey:d,ownKey:E,setKey:b,setOrder:f,order:A}),c.createElement(T,{label:"Renew By",sortKey:d,ownKey:y,setKey:b,setOrder:f,order:A}),c.createElement("th",null,Y("Status")),c.createElement("th",{className:"membership-table__page"},Y("Page")))),c.createElement("tbody",null,w.map((function(e,t){return c.createElement(S,{membershipSub:e,key:t})}))))))):c.createElement("div",{className:"membership__mypledges-wrapper"},c.createElement("div",{className:"membership__mypledges-content"},c.createElement(s.Z,{type:"happy",subtitle:Y("Find creators that you like and support them. Your pledges will show up on this page.")}))):c.createElement("div",{className:"main--empty"},c.createElement("p",null,Y("Failed to fetch memberships")))};var H={doMembershipMine:l.fI,doResolveClaimIds:i.Bf};const L=(0,r.$j)((function(e){return{myMembershipSubs:(0,a.UP)(e),isFetchingMembershipSubs:(0,a.m4)(e),activeChannelClaim:(0,_.YG)(e)}}),H)(z)},94445:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(26612),a=n.n(r),l=n(40805),i=n.n(l)()(a());i.push([e.id,".th-label-with-arrows{align-items:center;display:flex;gap:4px}.arrows{display:flex;flex-direction:row;line-height:1}.arrow-up{font-size:16px;opacity:.5}[dir] .arrow-up{text-align:center}.arrow-up--active{color:var(--color-primary);opacity:1}.arrow-down{font-size:16px;opacity:.5}[dir] .arrow-down{text-align:center}.arrow-down--active{color:var(--color-primary);opacity:1}","",{version:3,sources:["webpack://./../ui/component/buttonSort/style.scss"],names:[],mappings:"AAAA,sBAEE,kBAAA,CADA,YAAA,CAEA,OAAA,CAGF,QACE,YAAA,CACA,kBAAA,CACA,aAAA,CAGF,UACE,cAAA,CAEA,UAAA,CAHF,gBAEE,iBACA,CAGF,kBACE,0BAAA,CACA,SAAA,CAGF,YACE,cAAA,CAEA,UAAA,CAHF,kBAEE,iBACA,CAGF,oBACE,0BAAA,CACA,SAAA",sourcesContent:[".th-label-with-arrows {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.arrows {\n  display: flex;\n  flex-direction: row;\n  line-height: 1;\n}\n\n.arrow-up {\n  font-size: 16px;\n  text-align: center;\n  opacity: 0.5;\n}\n\n.arrow-up--active {\n  color: var(--color-primary);\n  opacity: 1;\n}\n\n.arrow-down {\n  font-size: 16px;\n  text-align: center;\n  opacity: 0.5;\n}\n\n.arrow-down--active {\n  color: var(--color-primary);\n  opacity: 1;\n}\n"],sourceRoot:""}]);const c=i}}]);
//# sourceMappingURL=pledgesTab-4639009db9793cbddc09-1009.js.map