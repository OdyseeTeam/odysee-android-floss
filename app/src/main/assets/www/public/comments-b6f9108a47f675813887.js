/*! For license information please see comments-b6f9108a47f675813887.js.LICENSE.txt */
"use strict";(self.webpackChunkodysee_com=self.webpackChunkodysee_com||[]).push([[8324],{93148:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Te});var r=n(3658),a=n(7920),o=n(63400),i=n(10995),c=n(94720),l=n(15244),u=n(16395),s=n(16643),m=n(77369),d=n(21506),f=n(73249),h=n(17526),p=n(90799),v=n(44908),b=n(66598),y=n.n(b),g=n(6922),E=n(88441),C=n(29679),S=n(19775),w=n(95810),_=n(20206),O=n(69719),k=n(15184),T=n(91960),I=n(71036).__,L=["isReviewingStickerComment","disabled"];function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(this,arguments)}function x(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var A=function(e){var t=e.activeChannelUrl,n=e.src,r=e.price,a=e.exchangeRate;return E.createElement("div",{className:"comment-create__sticker-preview"},E.createElement("div",{className:"comment-create__sticker-preview__info"},E.createElement(k.Z,{xsmall:!0,uri:t}),E.createElement(T.Z,{uri:t,link:!0,showAtSign:!0})),E.createElement("div",{className:"comment-create__sticker-preview__image"},E.createElement(O.Z,{src:n,waitLoad:!0,loading:"lazy"})),Boolean(r&&a)&&E.createElement(_.Z,{customPrices:{priceFiat:r,priceLBC:0!==Number(a)?r/Number(a):0},isFiat:!0}))},j=function(e){var t=e.isReviewingStickerComment,n=e.disabled,r=x(e,L);return E.createElement(v.default,N({disabled:n},r,{title:I("Stickers"),label:t?I("Change"):void 0}))},R=n(68470),M=["name","tab","activeTab","tipSelectorOpen","onClick"];function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(this,arguments)}function F(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var B=function(e){var t=e.activeChannelUrl,n=e.tipAmount,r=e.activeTab,a=e.message,o=e.isReviewingStickerComment,i=e.stickerPreviewComponent;return E.createElement("div",{className:"comment-create__support-comment-preview"},E.createElement(R.Z,{amount:n,className:"comment-create__support-comment-preview__amount",isFiat:"TabFiat"===r,size:"TabLBC"===r?18:2}),o?i:E.createElement(E.Fragment,null,E.createElement(k.Z,{xsmall:!0,uri:t}),E.createElement("div",null,E.createElement(T.Z,{uri:t,link:!0,showAtSign:!0}),E.createElement("div",null,a))))},U=function(e){var t=e.name,n=e.tab,r=e.activeTab,a=e.tipSelectorOpen,o=e.onClick,i=F(e,M);return(!a||r!==n)&&E.createElement(v.default,P({},i,{title:t,label:a?t:void 0,onClick:function(){return o(n)}}))},Z=n(32158),D=n(96284),Y=n(71036).__;const H=function(e){var t=e.fetchingChannels,n=e.myChannelClaims,r=void 0===n?[]:n,a=e.label,o=e.injected,i=void 0===o?[]:o,l=e.tiny,u=e.activeChannelClaimId,s=e.setActiveChannel;return E.createElement(E.Fragment,null,E.createElement(c.Wi,{name:"channel",label:!l&&(a||Y("Channel")),labelOnLeft:l,type:l?"select-tiny":"select",onChange:function(e){var t=e.target.value;s(t)},value:u,disabled:t},t?E.createElement("option",null,Y("Loading your channels...")):E.createElement(E.Fragment,null,r&&r.map((function(e){var t=e.name,n=e.claim_id;return E.createElement("option",{key:n,value:n},t)})),i&&i.map((function(e){return E.createElement("option",{key:e,value:e},e)})))))};var G=n(88374),W=n(15927),z={setActiveChannel:W.ds};const $=(0,r.$j)((function(e){return{myChannelClaims:(0,a.rt)(e),fetchingChannels:(0,a.Y7)(e),activeChannelClaimId:(0,G.zA)(e)}}),z)(H);var q=n(71036).__,V=function(e){var t=e.isReply,n=e.isLivestream;return E.createElement("div",{className:"comment-create__label-wrapper"},E.createElement("span",{className:"comment-create__label"},q(t?"Replying as":n?"Chat as":"Comment as")+" "),E.createElement($,{tiny:!0}))},K=function(e){var t=e.deletedComment,n=e.minAmount,r=e.minSuper,a=e.minTip;return E.createElement(E.Fragment,null,t&&E.createElement("div",{className:"error__text"},q("This comment has been deleted.")),!!n&&E.createElement("div",{className:"help--notice comment-create__min-amount-notice"},E.createElement(Z.Z,{tokens:{lbc:E.createElement(R.Z,{noFormat:!0,amount:n})}},a?"Comment min: %lbc%":r?"HyperChat min: %lbc%":""),E.createElement(D.default,{customTooltipText:a?q("This channel requires a minimum tip for each comment."):r?q("This channel requires a minimum amount for HyperChats to be visible."):"",className:"icon--help",icon:m.HELP,tooltip:!0,size:16})))},J=n(85442),Q=n(14122),X=n(15693),ee=n(10603),te=n(71036).__;function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(){re=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),c=new O(a||[]);return r(i,"_invoke",{value:C(e,n,c)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var m={};function d(){}function f(){}function h(){}var p={};l(p,o,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,o)&&(p=b);var y=h.prototype=d.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function a(r,o,i,c){var l=s(e[r],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==ne(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){a("next",e,i,c)}),(function(e){a("throw",e,i,c)})):t.resolve(m).then((function(e){u.value=e,i(u)}),(function(e){return a("throw",e,i,c)}))}c(l.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function C(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return T()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=S(i,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=s(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,m;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=h,r(y,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:f,configurable:!0}),f.displayName=l(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new E(u(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(y),l(y,c,"Generator"),l(y,o,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},e}function ae(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function oe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ae(o,r,a,i,c,"next",e)}function c(e){ae(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ie.apply(this,arguments)}function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ne(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ne(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,c=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var de=(0,ee.F8)(),fe="TabFiat",he="TabLBC";var pe=(0,X.Z)((function(e){return E.createElement(v.default,e)})),ve=n(1987),be=n(17185),ye=n(86102),ge=n(33441),Ee=n(29454),Ce=n(58210),Se=n(20983),we=n(86189),_e=n(37662),Oe=n(81352),ke={doCommentCreate:be.hR,doFetchCreatorSettings:be.B3,doFetchMyCommentedChannels:be.cB,doToast:ge.QJ,doCommentById:be.pf,doSendCashTip:ye.Ai,doSendTip:ye.T0,doOpenModal:W.DG,doTipAccountCheckForUri:_e.zj};const Te=(0,r.$j)((function(e,t){var n=t.uri,r=(0,a.B0)(e,n),o=r||{},i=o.claim_id,c=o.name,l=o.signing_channel,u=(0,Ce._I)(r),s=l?l.name:c,m=(0,G.YG)(e)||{};return{activeChannelClaimId:m.claim_id,activeChannelName:m.name,activeChannelUrl:m.canonical_url,canReceiveFiatTips:(0,we.kU)(e,n),channelClaimId:u,chatCommentsRestrictedToChannelMembers:Boolean((0,a.zI)(e,n)),claimId:i,claimIsMine:(0,a.pD)(e,r),hasChannels:(0,a.nk)(e),isFetchingChannels:(0,a.Y7)(e),myChannelClaimIds:(0,a.Pg)(e),myCommentedChannelIds:(0,Ee.BA)(e,null==r?void 0:r.claim_id),preferredCurrency:(0,Se.PJ)(e),channelSettings:e.comments.settingsByChannelId[u],supportDisabled:(0,a.YU)(n,ve.Zc)(e),tipChannelName:s,userHasMembersOnlyChatPerk:(0,Oe.Vo)(e,u),commentSettingDisabled:(0,Ee.Yn)(e,u),isLivestreamChatMembersOnly:Boolean((0,Ee._b)(e,u)),areCommentsMembersOnly:Boolean((0,Ee.uy)(e,u)),hasPremiumPlus:(0,Oe.u0)(e)}}),ke)((function(e){var t,n,r,a,b=e.activeChannelClaimId,_=e.activeChannelName,O=e.activeChannelUrl,k=e.bottom,T=e.canReceiveFiatTips,I=e.channelClaimId,L=e.claimId,N=e.claimIsMine,x=e.disableInput,R=e.doCommentById,M=e.doCommentCreate,P=e.doFetchCreatorSettings,F=e.doFetchMyCommentedChannels,Z=e.doOpenModal,D=e.doSendCashTip,Y=e.doSendTip,H=e.doTipAccountCheckForUri,G=e.doToast,W=e.embed,z=e.hasChannels,$=e.isFetchingChannels,q=e.isLivestream,X=e.isNested,ee=e.isReply,ne=e.myChannelClaimIds,ae=e.myCommentedChannelIds,ce=e.onCancelReplying,ue=e.onDoneReplying,me=e.onSlimInputClose,ve=e.parentId,be=e.preferredCurrency,ye=e.setQuickReply,ge=e.channelSettings,Ee=e.shouldFetchComment,Ce=e.supportDisabled,Se=e.textInjection,we=e.tipChannelName,_e=e.uri,Oe=e.commentSettingDisabled,ke=e.userHasMembersOnlyChatPerk,Te=e.isLivestreamChatMembersOnly,Ie=e.areCommentsMembersOnly,Le=e.hasPremiumPlus,Ne=null===(t=E.useContext(Q.Il))||void 0===t?void 0:t.uri,xe=(0,w.dD)(),Ae=E.useRef(),je=E.useRef(),Re=E.useRef(),Me=(0,s.k6)(),Pe=Me.push,Fe=Me.location.pathname,Be=se(E.useState(!1),2),Ue=Be[0],Ze=Be[1],De=se(E.useState(!1),2),Ye=De[0],He=De[1],Ge=se(E.useState({txid:void 0,tipAmount:void 0}),2),We=Ge[0],ze=Ge[1],$e=se(E.useState(),2),qe=$e[0],Ve=$e[1],Ke=se(E.useState(),2),Je=Ke[0],Qe=Ke[1],Xe=se(E.useState(),2),et=Xe[0],tt=Xe[1],nt=se(E.useState(),2),rt=nt[0],at=nt[1],ot=se(E.useState(1),2),it=ot[0],ct=ot[1],lt=se(E.useState(),2),ut=lt[0],st=lt[1],mt=se(E.useState(""),2),dt=mt[0],ft=mt[1],ht=se((0,C.Z)("comment-editor-mode",!1),2),pt=ht[0],vt=ht[1],bt=se(E.useState(),2),yt=bt[0],gt=bt[1],Et=se(E.useState(),2),Ct=Et[0],St=Et[1],wt=se(E.useState(!1),2),_t=wt[0],Ot=wt[1],kt=se(E.useState({tab:void 0,open:!1}),2),Tt=kt[0],It=kt[1],Lt=se(E.useState(),2),Nt=Lt[0],xt=Lt[1],At=se(E.useState(),2),jt=At[0],Rt=At[1],Mt=se(E.useState(void 0),2),Pt=Mt[0],Ft=Mt[1],Bt=dt?dt.length:0,Ut=!dt.length&&!rt,Zt=Oe||_t||Ue||$||Ut||x,Dt=ge&&ge.min_tip_amount_super_chat||0,Yt=ge&&ge.min_tip_amount_comment||0,Ht=Yt||Dt||0,Gt=yt!==he||0===Ht||it>=Ht,Wt=rt&&rt.price,zt=Ct||Nt,$t=p.wA[be].icon,qt=E.useRef(Ht);qt.current=Ht;var Vt=E.useCallback((function(e){ft((function(t){return t+(t&&" "!==t.charAt(t.length-1)?" ".concat(e," "):"".concat(e," "))}))}),[]),Kt=E.useCallback((function(e){at(e),tt(!0),ct(e.price||0),It((function(e){return{tab:e.tab||void 0,open:!1}})),me&&me(),e.price&&e.price>0&&(gt(T?fe:he),Ve(!0))}),[T,me]),Jt=E.useMemo((function(){return{claimIsMine:N,addEmoteToComment:Vt,handleSelectSticker:Kt,isOpen:Tt.open,openTab:Tt.tab||void 0}}),[N,Vt,Kt,Tt.open,Tt.tab]),Qt={button:"primary",type:"submit",requiresAuth:!0},Xt={button:"alt"},en=le(le({},Xt),{},{disabled:!dt.length&&!rt,tipSelectorOpen:qe,activeTab:yt,onClick:cn}),tn={button:"link",label:te("Cancel")},nn={activeChannelUrl:O,src:rt?rt.url:"",price:rt?rt.price:0,exchangeRate:jt},rn=E.useMemo((function(){return E.createElement(g.Z,ie({},Jt,{closeSelector:function(){return It((function(e){return{tab:e.tab||void 0,open:!1}}))}}))}),[Jt]);function an(){return I&&P(I).then((function(e){return q?e.livestream_chat_members_only:e.comments_members_only})).catch((function(){}))}function on(){return Z(h.Vl,{uri:_e,fileUri:Ne})}function cn(e){gt(e),xe?(Ft(!0),Z(h.hj,{uri:_e,isTipOnly:!0,hasSelectedTab:e,customText:te("Preview Comment Tip"),setAmount:function(e){ct(e),Qe(!0)}})):Ve(!0),me&&me()}function ln(){return un.apply(this,arguments)}function un(){return(un=oe(re().mark((function e(){var t;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return");case 2:if(I){e.next=5;break}return G({message:te("Unable to verify channel settings. Try refreshing the page."),isError:!0}),e.abrupt("return");case 5:return e.next=7,an();case 7:if(void 0!==(t=e.sent)){e.next=11;break}return G({message:te("Unable to send the comment."),subMessage:te("Try again later, or refresh the page."),isError:!0}),e.abrupt("return");case 11:if(!fn||!t){e.next=13;break}return e.abrupt("return",on());case 13:if(!Ye||it!==We.tipAmount){e.next=18;break}return mn(We.txid),e.abrupt("return");case 18:ze({txid:void 0,tipAmount:void 0});case 19:P(I).then((function(){if(Ht!==qt.current)return G({message:te("The creator just updated the minimum setting. Please revise or double-check your tip amount."),isError:!0}),void Qe(!1);sn()})).catch((function(){G({message:te("Unable to send the comment."),subMessage:te("Try again later, or refresh the page."),isError:!0})}));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sn(){if(L&&I&&_&&b&&!Ue&&we)if(Ze(!0),yt===he)Y({amount:it,claim_id:L,channel_id:b},!1,(function(e){var t=e.txid;setTimeout((function(){mn(t)}),1500),G({message:te("Tip successfully sent."),subMessage:te("I'm sure they appreciate it!"),linkText:"".concat(it," LBC â‡’ ").concat(we),linkTarget:"/".concat(f.WALLET,"?tab=fiat-payment-history")}),ze({txid:t,tipAmount:it})}),(function(){Ze(!1)}),!1,"comment");else{var e={tipAmount:Math.round(100*it)/100,tipChannelName:we,channelClaimId:I};D(e,!1,{activeChannelName:_,activeChannelId:b},L,de,be,(function(e){mn(null,e.payment_intent_id,de),ft(""),Qe(!1),Ve(!1),He(!1),Ze(!1)}))}}function mn(e,t,n){return dn.apply(this,arguments)}function dn(){return(dn=oe(re().mark((function e(t,n,r){var a,i;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ue&&!x&&L){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,an();case 4:if(void 0!==(a=e.sent)){e.next=8;break}return G({message:te("Unable to send the comment."),subMessage:te("Try again later, or refresh the page."),isError:!0}),e.abrupt("return");case 8:if(!fn||!a){e.next=10;break}return e.abrupt("return",on());case 10:Ze(!0),i=rt&&(0,o.m9)(rt.name),M(_e,q,{comment:i||dt,claim_id:L,parent_id:ve,txid:t,payment_intent_id:n,environment:r,sticker:!!i,is_protected:Boolean(Te||Ie)}).then((function(e){Ze(!1),ye&&ye(e),e&&e.signature&&(i||ft(""),Qe(!1),Ve(!1),He(!1),ue&&ue())})).catch((function(){Ze(!1),He(!0),I&&P(I).catch((function(){}))}));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}E.useEffect((function(){!ge&&I&&P(I).catch((function(){}))}),[]),E.useEffect((function(){xe&&Tt.tab&&Re&&Re.current&&Re.current.click()}),[xe,Tt.tab]),E.useEffect((function(){Ee&&R&&R(ve,!1).then((function(e){Ot(String(e).includes("Error"))}))}),[R,Ee,ve]),E.useEffect((function(){Wt&&!jt&&l.Lbryio.getExchangeRates().then((function(e){var t=e.LBC_USD;return Rt(t)}))}),[jt,Wt]),E.useEffect((function(){void 0===T&&H(_e)}),[T,H,_e]),E.useEffect((function(){function e(e){var t=Ae&&Ae.current&&Ae.current.input;if(t&&t.current===document.activeElement){var n=Boolean(e.target.attributes["typing-term"]);(q&&!n||e.ctrlKey||e.metaKey)&&e.keyCode===d.K5&&(e.preventDefault(),je.current.click()),q&&n&&e.keyCode===d.K5&&t.current.removeAttribute("typing-term")}}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[q]),E.useEffect((function(){void 0===ae&&L&&ne&&F(L)}),[L,ae,ne]),E.useEffect((function(){var e,t,n;if(Se)return ft(""===dt||" "===dt.substring(dt.length-1)?dt+Se+" ":dt+" "+Se+" "),null==Ae||null===(e=Ae.current)||void 0===e||null===(t=e.input)||void 0===t||null===(n=t.current)||void 0===n?void 0:n.focus()}),[Se]);var fn=Boolean((q?Te:Ie)&&!ke&&!N),hn="Say something about this...";return fn&&(hn="The creator has made this chat members-only"),$||z?E.createElement(E.Fragment,null,fn&&E.createElement(J.Z,{title:te(q?"This chat is in members-only mode":"This comment section is in members-only mode"),className:"comment-restriction",subtitle:te("To participate, consider buying a membership with the members-only chat perk from this creator!"),action:E.createElement(v.default,{button:"primary",label:te("Join"),onClick:on})}),E.createElement(c.l0,{onSubmit:function(){},className:y()("comment-create",{"comment-create--reply":ee,"comment-create--nestedReply":X,"comment-create--bottom":k})},Je?O&&yt&&E.createElement(B,{activeChannelUrl:O,tipAmount:it,activeTab:yt,message:dt,isReviewingStickerComment:et,stickerPreviewComponent:rt&&E.createElement(A,nn)}):rt?O&&E.createElement(A,nn):E.createElement(E.Fragment,null,E.createElement(c.Wi,{autoFocus:ee,charCount:Bt,className:y()("",{create__reply:ee,create__comment:!ee,disabled_chat_comments:fn}),disabled:$||x,isLivestream:q,label:E.createElement(V,{isReply:Boolean(ee),isLivestream:Boolean(q)}),noticeLabel:xe&&E.createElement(K,{deletedComment:_t,minAmount:Ht,minSuper:Dt,minTip:Yt}),name:ee?"create__reply":"create__comment",onChange:function(e){return ft(u.SIMPLE_SITE||!pt||ee?e.target.value:e)},handleTip:function(e){return cn(e?he:fe)},handleSubmit:mn,slimInput:xe&&_e,slimInputButtonRef:Re,onSlimInputClose:me,commentSelectorsProps:Jt,submitButtonRef:je,setShowSelectors:It,showSelectors:Tt,tipModalOpen:Pt,placeholder:te(hn),quickActionHandler:u.SIMPLE_SITE?void 0:function(){return vt(!pt)},quickActionLabel:!u.SIMPLE_SITE&&(ee?void 0:te(pt?"Simple Editor":"Advanced Editor")),ref:Ae,textAreaMaxLength:q?i.sW:i.jT,type:u.SIMPLE_SITE||!pt||ee?"textarea":"markdown",value:dt,uri:_e}),!xe&&rn),(!xe||et)&&(qe||et&&Wt)&&E.createElement(S.Z,{activeTab:yt,amount:it,uri:_e,convertedAmount:ut,customTipAmount:Wt,exchangeRate:jt,fiatConversion:rt&&!!rt.price,onChange:function(e){return ct(e)},setConvertedAmount:st,setDisableSubmitButton:xt,setTipError:St,tipError:Ct}),(!xe||et||Je)&&E.createElement("div",{className:"section__actions"},Je?yt===he?E.createElement(v.default,ie({},Qt,{autoFocus:!0,disabled:Zt||!Gt,label:Ue?te("Sending..."):Ye&&it===We.tipAmount?te("Re-submit"):te("Send"),onClick:ln})):E.createElement(pe,ie({},Qt,{autoFocus:!0,disabled:Zt||!Gt,label:Ue?te("Sending..."):Ye&&it===We.tipAmount?te("Re-submit"):te("Send"),onClick:ln})):qe?E.createElement(v.default,ie({},Qt,{disabled:Zt||zt||!Gt,icon:yt===he?m.LBC:$t,label:te("Review"),onClick:function(){Qe(!0),me&&me()}})):(!xe||rt)&&(!Yt||N)&&E.createElement(v.default,ie({},Qt,{ref:je,disabled:Zt,label:te(q?Ue?"Sending...":"Send --[button to send chat message]--":ee?Ue?"Replying...":"Reply":Ue?"Commenting...":"Comment --[button to submit something]--"),onClick:function(){return rt?(Je?ln():mn(),at(null),tt(!1),It({tab:Tt.tab||void 0,open:!1}),void Ve(!1)):mn(void 0,void 0,void 0)}})),(!xe||et)&&E.createElement(E.Fragment,null,E.createElement(j,ie({},Xt,{isReviewingStickerComment:et,icon:m.STICKER,onClick:function(){rt?(tt(!1),at(void 0),It({tab:g.b.STICKER,open:!0})):It({tab:Tt.tab||void 0,open:!Tt.open}),Ve(!1)},onChange:function(){},disabled:fn})),Le&&!q&&E.createElement(v.default,{button:"alt",icon:m.IMAGE,title:te("Upload Image"),onClick:function(){Z(h.Pk,{onUpdate:function(e,t){return function(e,t){t||(t="");var n="![".concat(t,"](").concat(e,")");ft((function(e){return e+(e&&" "!==e.charAt(e.length-1)?" ".concat(n," "):"".concat(n," "))}))}(e,t)},assetName:te("Image")})},onChange:function(){}}),!Ce&&!N&&E.createElement(E.Fragment,null,E.createElement(U,ie({},en,{name:te("Credits"),icon:m.LBC,tab:he})),window.cordova&&!(null!==(n=window)&&void 0!==n&&null!==(r=n.odysee)&&void 0!==r&&null!==(a=r.build)&&void 0!==a&&a.googlePlay)&&de&&E.createElement(U,ie({},en,{name:te("Cash"),icon:$t,tab:fe})))),qe||Je?E.createElement(v.default,ie({},tn,{disabled:Ue,onClick:function(){Je||Ve(!1),Qe(!1),Wt&&(tt(!1),It({tab:Tt.tab||void 0,open:!1}),at(null)),me&&me()}})):et?E.createElement(v.default,ie({},tn,{onClick:function(){tt(!1),at(null),It({tab:void 0,open:!1}),me&&me()}})):ce&&E.createElement(v.default,ie({},tn,{onClick:ce})),E.createElement(K,{deletedComment:_t,minAmount:Ht,minSuper:Dt,minTip:Yt})),E.createElement("div",{className:"chat-resize"},E.createElement("div",null),E.createElement("div",null),E.createElement("div",null)))):E.createElement("div",{role:"button",className:"comment-create__auth",onClick:function(e){if(e.preventDefault(),e.stopPropagation(),W)window.open("https://odysee.com/$/".concat(f.AUTH,"?redirect=/$/").concat(f.LIVESTREAM));else{var t="/$/".concat(f.CHANNEL_NEW,"?redirect=").concat(Fe);q?window.open(t):Pe(t)}}},E.createElement(c.Wi,{type:"textarea",name:"comment__signup-prompt",placeholder:te(hn),disabled:xe}),!xe&&E.createElement("div",{className:"section__actions--no-margin"},E.createElement(v.default,{disabled:!0,button:"primary",label:te("Send --[button to submit something]--"),requiresAuth:!0})))}))},30740:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var r=n(2927),a=n(16395),o=n(95810),i=n(63400),c=n(77369),l=n(44908),u=n(51635),s=n(66598),m=n.n(s),d=n(69809),f=n(76333),h=n(85311),p=n(88441),v=n(60732),b=n(29679),y=n(16643),g=n(3658),E=n(7920),C=n(29454),S=n(81352),w=n(58210),_=n(17185),O=n(52338),k=n(33441),T=n(28180),I=n(96284),L=n(71036).__;const N=function(e){var t=e.claimId,n=e.channelId,r=e.channelName,a=e.claimIsMine,o=e.channelHasMembershipTiers,i=e.areCommentsMembersOnly,l=e.creatorMembershipsFetched,u=e.doToggleMembersOnlyCommentsSettingForClaimId,s=e.doMembershipList,m=e.doToast;return p.useEffect((function(){!l&&r&&n&&s({channel_name:r,channel_id:n})}),[n,r,l,s]),o&&a?p.createElement(T.v2,null,p.createElement(T.j2,{className:"button button--alt menu__button"},p.createElement(I.default,{size:18,icon:c.SETTINGS})),p.createElement(T.qy,{className:"menu__list"},p.createElement(T.sN,{className:"comment__menu-option",onSelect:function(){t&&u(t).then((function(){return m({message:L(i?"Members-only comments are now disabled.":"Members-only comments are now enabled.")})}))}},p.createElement("span",{className:"menu__link"},p.createElement(I.default,{"aria-hidden":!0,icon:c.MEMBERSHIP}),L(i?"Disable members-only comments":"Enable members-only comments"))))):null};var x={doToggleMembersOnlyCommentsSettingForClaimId:_.xw,doMembershipList:O.OT,doToast:k.QJ};const A=(0,g.$j)((function(e,t){var n=t.uri,r=(0,E.B0)(e,n),a=r&&r.claim_id,o=(0,w.tg)(r)||{},i=o.claim_id;return{claimId:a,channelId:i,channelName:o.name,claimIsMine:(0,E.ZJ)(e,n),channelHasMembershipTiers:i&&(0,S.R)(e,i),areCommentsMembersOnly:i&&(0,C.uy)(e,i),creatorMembershipsFetched:(0,S.p$)(e,n)}}),x)(N);var j=n(13690),R=n(71036).__,M=["activeSort","sortOption","changeSort"];function P(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F.apply(this,arguments)}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,c=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z=200,D=(0,j.e)((function(){return Promise.all([n.e(3431),n.e(5275),n.e(8324)]).then(n.bind(n,93148))}));var Y=function(e){var t=e.uri,n=e.totalComments,o=e.sort,i=e.changeSort,u=e.handleRefresh,s={activeSort:o,changeSort:i};return p.createElement("div",{className:"comment__actions"},n>1&&a.ENABLE_COMMENT_REACTIONS&&p.createElement("span",{className:"comment__sort"},p.createElement(H,F({},s,{label:R("Best"),icon:c.BEST,sortOption:r.dY.POPULARITY})),p.createElement(H,F({},s,{label:R("Controversial"),icon:c.CONTROVERSIAL,sortOption:r.dY.CONTROVERSY})),p.createElement(H,F({},s,{label:R("New"),icon:c.NEW,sortOption:r.dY.NEWEST}))),p.createElement("div",{className:"comment__settings"},p.createElement(l.default,{button:"alt",icon:c.REFRESH,title:R("Refresh"),onClick:u}),p.createElement(A,{uri:t})))},H=function(e){var t=e.activeSort,n=e.sortOption,r=e.changeSort,a=P(e,M);return p.createElement(l.default,F({},a,{className:m()("button-toggle",{"button-toggle--active":t===n}),button:"alt",iconSize:18,onClick:function(){return r(n)}}))},G=function(e){var t=e.label,n=e.isViewAll,a=e.threadCommentParent,o=e.threadCommentId,i=(0,y.k6)(),u=i.push,s=i.location,m=s.pathname,d=s.search;return p.createElement(l.default,{button:"link",label:t,icon:c.ARROW_LEFT,iconSize:12,onClick:function(){var e=new URLSearchParams(d);n?(e.delete(r.ee),e.set(r.Hj,a)):(e.set(r.ee,a),e.set(r.Hj,o)),window.pendingLinkedCommentScroll=!0,u({pathname:m,search:e.toString()})}})},W=n(44692),z=n(88374),$={fetchTopLevelComments:_.Xp,fetchComment:_.pf,fetchReacts:_.wk,resetComments:_.vg,doFetchOdyseeMembershipForChannelIds:O.i6,doFetchChannelMembershipsForChannelIds:O.RG,doPopOutInlinePlayer:W.aH};const q=(0,g.$j)((function(e,t){var n=t.uri,r=t.threadCommentId,a=t.linkedCommentId,o=(0,E.B0)(e,n),i=(0,w._I)(o),c=(0,z.YG)(e),l=(0,C.xT)(e,r);return{activeChannelId:c&&c.claim_id,allCommentIds:(0,C.RT)(e,n),channelId:i,chatCommentsRestrictedToChannelMembers:Boolean((0,E.Rv)(e,n)),claimId:o&&o.claim_id,claimIsMine:(0,E.pD)(e,o),fetchingChannels:(0,E.Y7)(e),isAChannelMember:(0,S.QL)(e,i),isFetchingComments:(0,C.vz)(e),isFetchingReacts:(0,C.xs)(e),isFetchingTopLevelComments:(0,C.DV)(e),linkedCommentAncestors:(0,C.kP)(e,a),commentsEnabledSetting:(0,C.E7)(e,i),myReactsByCommentId:(0,C.zQ)(e),othersReactsById:(0,C._M)(e),pinnedComments:(0,C.ZY)(e,n),threadComment:l,threadCommentAncestors:(0,C.kP)(e,r),topLevelComments:(0,C.C2)(e,n),topLevelTotalPages:(0,C.TY)(e,n),totalComments:(0,C.pC)(e,n),scheduledState:(0,E.r_)(e,n)}}),$)((function(e){var t,n=e.allCommentIds,c=e.uri,s=e.pinnedComments,g=e.topLevelComments,E=e.topLevelTotalPages,C=e.claimId,S=e.channelId,w=e.claimIsMine,_=e.isFetchingComments,O=e.isFetchingTopLevelComments,k=e.isFetchingReacts,T=e.linkedCommentId,I=e.totalComments,L=e.fetchingChannels,N=e.myReactsByCommentId,x=e.othersReactsById,A=e.activeChannelId,j=e.commentsEnabledSetting,M=e.commentsAreExpanded,P=e.threadCommentId,U=e.threadComment,H=e.notInDrawer,W=e.threadCommentAncestors,z=e.linkedCommentAncestors,$=e.fetchTopLevelComments,q=e.fetchComment,V=e.fetchReacts,K=e.resetComments,J=e.doFetchOdyseeMembershipForChannelIds,Q=e.doPopOutInlinePlayer,X=e.doFetchChannelMembershipsForChannelIds,ee=e.chatCommentsRestrictedToChannelMembers,te=e.isAChannelMember,ne=e.scheduledState,re=p.useRef(!1),ae=(0,y.k6)(),oe=ae.push,ie=ae.location,ce=ie.pathname,le=ie.search,ue=(0,o.dD)(),se=(0,o.lj)(),me=Math.ceil(g.length/r.t5),de=p.useRef(),fe=p.useRef(),he=a.ENABLE_COMMENT_REACTIONS?r.dY.POPULARITY:r.dY.NEWEST,pe=B((0,b.Z)("comment-sort-by",he),2),ve=pe[0],be=pe[1],ye=B(p.useState(me>0?me:1),2),ge=ye[0],Ee=ye[1],Ce=B(p.useState(!1),2),Se=Ce[0],we=Ce[1],_e=M||!se||ue,Oe=B(p.useState(_e),2),ke=Oe[0],Te=Oe[1],Ie=B(p.useState(),2),Le=Ie[0],Ne=Ie[1],xe=n?n.length:0,Ae=ge<E,je=(0,i.YD)(I),Re=ue?3:10;W&&W.some((function(e,n){if(n>=Re-1)return!0;t=e}));var Me=W&&W[W.length-1],Pe=B(p.useState(Boolean(x)||!a.ENABLE_COMMENT_REACTIONS),2),Fe=Pe[0],Be=Pe[1],Ue=p.useMemo((function(){return g.map((function(e){return e.channel_id}))}),[g]);p.useEffect((function(){Ue.length>0&&S&&(J(Ue),X(S,Ue))}),[S,Ue.length,X,J]);var Ze=p.useCallback((function(){C&&K(C),Ee(1)}),[C,K]);function De(){Ee(0),Q({source:"comment"})}p.useEffect((function(){if(!P&&T&&z&&z.length>Re-1&&!re.current){var e=new URLSearchParams(le);e.set(r.ee,T),oe({pathname:ce,search:e.toString()}),re.current=!0}}),[z,T,ce,oe,le,P,Re]);var Ye=ee&&!te&&!w;(0,p.useEffect)((function(){Le&&Le===c&&(Ee(ge+1),Ne(void 0))}),[Le,c]),(0,p.useEffect)((function(){0===ge&&Ze()}),[Ze,ge]),(0,p.useEffect)((function(){return function(){return Ee(1)}}),[c]),(0,p.useEffect)((function(){ge<me&&Ee(me>0?me:1)}),[c]),(0,p.useEffect)((function(){var e=1!==ge&&ge!==me,t=Number(0===me)^Number(e);0!==ge&&t&&(1===ge&&(P&&q(P),T&&q(T)),$(c,void 0,ge,r.t5,ve,!1))}),[me,q,$,T,ge,ve,P,c]),p.useEffect((function(){P&&De()}),[P]),(0,p.useEffect)((function(){var e;xe>0&&a.ENABLE_COMMENT_REACTIONS&&!L&&!k&&(0!==(e=x&&N?n.filter((function(e){var t=A?"".concat(e,":").concat(A):e;return!x[t]||A&&!N[t]})):n).length&&V(e).then((function(){Be(!0)})).catch((function(){return Be(!0)})))}),[A,n,V,L,k,N,x,xe]),(0,p.useEffect)((function(){T||P?window.pendingLinkedCommentScroll=!0:delete window.pendingLinkedCommentScroll}),[]),(0,p.useEffect)((function(){if(0!==g.length){var e=(0,f.Z)((function(){n(ge,E)&&(Ne(c),we(!0))}),Z);if(Se||(e(),we(!0)),_e&&!_&&Fe&&Ae){var t=Boolean(document.querySelector(".MuiDrawer-root .card--enable-overflow"))?document.querySelector(".card--enable-overflow"):window;if(t)return t.addEventListener("scroll",e),function(){return t.removeEventListener("scroll",e)}}}function n(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!de||!de.current)return!1;var r,a,o=de.current.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||document.documentElement.clientWidth,l=0!==n&&o.top<i+(r=n,(a=window.devicePixelRatio||1)<1?Math.ceil(r/a):Math.ceil(r*a));return(o.width>0&&o.height>0&&o.bottom>=0&&o.right>=0&&o.top<=i&&o.left<=c||l)&&e<t}}),[g,_e,Se,_,ue,Ae,ge,Fe,E,c]);var He={isTopLevel:!0,uri:c,linkedCommentId:T,threadCommentId:P,threadDepthLevel:Re},Ge={uri:c,totalComments:I,sort:ve,changeSort:function(e){ve!==e&&(be(e),De(),Q({source:"comment"}))},handleRefresh:De};return"scheduled"===ne?null:p.createElement(u.Z,{className:"card--enable-overflow comment__list",title:(!ue||H)&&je,titleActions:p.createElement(Y,Ge),actions:p.createElement(p.Fragment,null,ue&&!H&&p.createElement(Y,Ge),p.createElement(D,{uri:c}),P&&U&&p.createElement("span",{className:"comment__actions comment__thread-links"},p.createElement(G,{label:R("View all comments"),threadCommentParent:Me||P,threadCommentId:P,isViewAll:!0}),t&&p.createElement(G,{label:R("Show parent comments"),threadCommentParent:t,threadCommentId:P})),j&&!_&&!I&&!P&&p.createElement(h.Z,{padded:!0,text:R("That was pretty deep. What do you think?")}),p.createElement("ul",{ref:fe,className:m()("comments",{"comments--contracted":se&&!ke&&I>1})},Fe&&p.createElement(p.Fragment,null,s&&!P&&s.map((function(e){return p.createElement(d.Z,F({key:e.comment_id,comment:e,disabled:Ye},He))})),g.map((function(e){return p.createElement(d.Z,F({key:e.comment_id,comment:e,disabled:Ye},He))})))),!_e&&p.createElement("div",{className:"card__bottom-actions card__bottom-actions--comments"},(!ke||Ae)&&I>1&&p.createElement(l.default,{button:"link",title:R(ke?"More":"Expand"),label:R(ke?"More":"Expand"),onClick:function(){return ke?Ee(ge+1):Te(!0)}}),ke&&I>1&&p.createElement(l.default,{button:"link",title:R("Collapse"),label:R("Collapse"),onClick:function(){if(Te(!1),fe.current){var e=fe.current.getBoundingClientRect().top;window.scrollTo({top:e+window.pageYOffset-200,behavior:"smooth"})}}})),(P?!Fe:O||_e&&Ae)&&p.createElement("div",{className:"main--empty",ref:de},p.createElement(v.Z,{type:"small"})))})}))},85442:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(88441);const a=function(e){var t=e.children,n=e.title,a=e.subtitle,o=e.action;return n&&a&&o?r.createElement("div",{className:"error-bubble"},r.createElement("div",null,r.createElement("label",null,n),r.createElement("span",null,a)),o):t?r.createElement("span",{className:"error-bubble"},t):null}}}]);
//# sourceMappingURL=comments-b6f9108a47f675813887.js.map