{"version":3,"file":"suggestions-2e13297a55d2a0f7bf40-1009.js","mappings":"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","sources":["webpack://odysee.com/../ui/component/common/busy-indicator.jsx","webpack://odysee.com/../ui/component/textareaSuggestionsItem/index.js","webpack://odysee.com/../ui/component/textareaSuggestionsItem/view.jsx","webpack://odysee.com/../ui/component/textareaWithSuggestions/render-option.jsx","webpack://odysee.com/../ui/component/textareaWithSuggestions/render-input.jsx","webpack://odysee.com/../ui/component/textareaWithSuggestions/render-group.jsx","webpack://odysee.com/../ui/component/textareaWithSuggestions/view.jsx","webpack://odysee.com/../ui/component/textareaWithSuggestions/index.js","webpack://odysee.com/../ui/effects/use-lighthouse.js","webpack://odysee.com/../ui/effects/use-throttle.js"],"sourcesContent":["// @flow\nimport React from 'react';\n\ntype Props = {\n  message: ?string,\n};\n\nclass BusyIndicator extends React.PureComponent<Props> {\n  static defaultProps = {\n    message: '',\n  };\n\n  render() {\n    const { message } = this.props;\n\n    return (\n      <span className=\"busy-indicator\">\n        {message} <span className=\"busy-indicator__loader\" />\n      </span>\n    );\n  }\n}\n\nexport default BusyIndicator;\n","import { connect } from 'react-redux';\nimport { selectClaimForUri } from 'redux/selectors/claims';\nimport TextareaSuggestionsItem from './view';\nimport { formatLbryChannelName } from 'util/url';\nimport { getClaimTitle, getChannelIdFromClaim } from 'util/claim';\nimport { selectUserOdyseeMembership } from 'redux/selectors/memberships';\n\nconst select = (state, props) => {\n  const { uri } = props;\n\n  const claim = uri && selectClaimForUri(state, uri);\n\n  return {\n    odyseeMembership: selectUserOdyseeMembership(state, getChannelIdFromClaim(claim)),\n    claimLabel: claim && formatLbryChannelName(claim.canonical_url),\n    claimTitle: claim && getClaimTitle(claim),\n  };\n};\n\nexport default connect(select)(TextareaSuggestionsItem);\n","// @flow\nimport ChannelThumbnail from 'component/channelThumbnail';\nimport React from 'react';\nimport MembershipBadge from 'component/membershipBadge';\nimport twemoji from 'twemoji';\n\ntype Props = {\n  claimLabel?: string,\n  claimTitle?: string,\n  emote?: any,\n  uri?: string,\n  emoji?: string,\n  odyseeMembership: ?string,\n};\n\nexport default function TextareaSuggestionsItem(props: Props) {\n  const { claimLabel, claimTitle, emote, uri, odyseeMembership, ...autocompleteProps } = props;\n\n  const Twemoji = ({ emoji }) => (\n    <span\n      dangerouslySetInnerHTML={{\n        __html: twemoji.parse(emoji, {\n          folder: 'svg',\n          ext: '.svg',\n        }),\n      }}\n    />\n  );\n\n  if (emote) {\n    const { name: value, url, unicode } = emote;\n\n    return (\n      <div {...autocompleteProps}>\n        {unicode ? (\n          <div className=\"emote\">\n            <Twemoji emoji={unicode} />\n          </div>\n        ) : (\n          <img className=\"emote\" src={url} />\n        )}\n\n        <div className=\"textarea-suggestion__label\">\n          <span className=\"textarea-suggestion__title textarea-suggestion__value textarea-suggestion__value--emote\">\n            {value}\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  if (claimLabel) {\n    const value = claimLabel;\n\n    return (\n      <div {...autocompleteProps}>\n        <ChannelThumbnail xsmall uri={uri} />\n\n        <div className=\"textarea-suggestion__label\">\n          <span className=\"textarea-suggestion__title\">{claimTitle || value}</span>\n          <span className=\"textarea-suggestion__value\">\n            {value}\n            {odyseeMembership && <MembershipBadge membershipName={odyseeMembership} />}\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n}\n","// @flow\nimport { EMOTES_48px as EMOTES, TWEMOTEARRAY } from 'constants/emotes';\nimport React from 'react';\nimport TextareaSuggestionsItem from 'component/textareaSuggestionsItem';\n\ntype Props = {\n  label: string,\n  isEmote?: boolean,\n  optionProps: any,\n};\n\nconst TextareaSuggestionsOption = (props: Props) => {\n  const { label, isEmote, optionProps } = props;\n\n  const emoteFound =\n    // $FlowIgnore\n    isEmote && (EMOTES.find(({ name }) => name === label) || TWEMOTEARRAY.find(({ name }) => name === label));\n  const emoteValue = emoteFound ? { name: label, url: emoteFound.url } : undefined;\n\n  return <TextareaSuggestionsItem key={label} uri={label} emote={emoteValue} {...optionProps} />;\n};\n\nexport default TextareaSuggestionsOption;\n","// @flow\nimport * as ICONS from 'constants/icons';\nimport React from 'react';\nimport TextField from '@mui/material/TextField';\nimport Button from 'component/button';\nimport Zoom from '@mui/material/Zoom';\n\ntype Props = {\n  params: any,\n  messageValue: string,\n  inputDefaultProps: any,\n  inputRef: any,\n  submitButtonRef?: any,\n  claimIsMine?: boolean,\n  slimInput?: boolean,\n  toggleSelectors: () => any,\n  handleTip: (isLBC: boolean) => void,\n  handleSubmit: () => any,\n  handlePreventClick?: () => void,\n};\n\nconst TextareaSuggestionsInput = (props: Props) => {\n  const {\n    params,\n    messageValue,\n    inputRef,\n    inputDefaultProps,\n    submitButtonRef,\n    claimIsMine,\n    slimInput,\n    toggleSelectors,\n    handleTip,\n    handleSubmit,\n    handlePreventClick,\n  } = props;\n\n  const { InputProps, disabled, fullWidth, id, inputProps: autocompleteInputProps } = params;\n  const inputProps = { ...autocompleteInputProps, ...inputDefaultProps };\n  const autocompleteProps = { InputProps, disabled, fullWidth, id, inputProps };\n\n  if (slimInput) {\n    InputProps.startAdornment = (\n      <Button\n        icon={ICONS.STICKER}\n        onClick={() => {\n          if (handlePreventClick) handlePreventClick();\n          toggleSelectors();\n        }}\n      />\n    );\n    InputProps.endAdornment = (\n      <>\n        {!claimIsMine && (\n          <Button\n            disabled={!messageValue || messageValue.length === 0}\n            icon={ICONS.USD}\n            onClick={() => handleTip(false)}\n          />\n        )}\n\n        <Zoom in={messageValue ? messageValue.length > 0 : undefined} mountOnEnter unmountOnExit>\n          <div>\n            <Button\n              ref={submitButtonRef}\n              button=\"primary\"\n              icon={ICONS.SUBMIT}\n              iconColor=\"red\"\n              onClick={() => handleSubmit()}\n            />\n          </div>\n        </Zoom>\n      </>\n    );\n\n    return (\n      <TextField\n        inputRef={inputRef}\n        variant=\"outlined\"\n        multiline\n        minRows={1}\n        maxRows={15}\n        select={false}\n        {...autocompleteProps}\n      />\n    );\n  }\n\n  return <TextField inputRef={inputRef} multiline select={false} {...autocompleteProps} />;\n};\n\nexport default TextareaSuggestionsInput;\n","// @flow\nimport LbcSymbol from 'component/common/lbc-symbol';\nimport React from 'react';\n\ntype Props = {\n  groupName: string,\n  suggestionTerm?: ?string,\n  searchQuery?: string,\n  children: any,\n};\n\nconst TextareaSuggestionsGroup = (props: Props) => {\n  const { groupName, suggestionTerm, searchQuery, children } = props;\n\n  return (\n    <div key={groupName} className=\"textarea-suggestions__group\">\n      <label className=\"textarea-suggestions__group-label\">\n        {groupName === 'Top' ? (\n          <LbcSymbol prefix={__('Winning Search for %matching_term%', { matching_term: searchQuery })} />\n        ) : suggestionTerm && suggestionTerm.length > 1 ? (\n          __('%group_name% matching %matching_term%', { group_name: groupName, matching_term: suggestionTerm })\n        ) : (\n          groupName\n        )}\n      </label>\n\n      {children}\n      <hr className=\"textarea-suggestions__separator\" />\n    </div>\n  );\n};\n\nexport default TextareaSuggestionsGroup;\n","// @flow\nimport { EMOTES_48px as EMOTES, TWEMOTENAMES } from 'constants/emotes';\nimport { matchSorter } from 'match-sorter';\nimport { LIGHTHOUSE_MIN_CHARACTERS, SEARCH_OPTIONS } from 'constants/search';\nimport * as KEYCODES from 'constants/keycodes';\nimport Autocomplete from '@mui/material/Autocomplete';\nimport BusyIndicator from 'component/common/busy-indicator';\n// import EMOJIS from 'emoji-dictionary';\nimport Popper from '@mui/material/Popper';\nimport React from 'react';\nimport useLighthouse from 'effects/use-lighthouse';\nimport useThrottle from 'effects/use-throttle';\nimport { parseURI } from 'util/lbryURI';\nimport TextareaSuggestionsOption from './render-option';\nimport TextareaSuggestionsInput from './render-input';\nimport TextareaSuggestionsGroup from './render-group';\n\nconst SUGGESTION_REGEX = new RegExp(\n  '((?:^| |\\n)@[^\\\\s=&#$@%?:;/\\\\\"<>%{}|^~[]*(?::[\\\\w]+)?)|((?:^| |\\n):[\\\\w+-]*:?)',\n  'gm'\n);\n\n/** Regex Explained step-by-step:\n *\n * 1) ()|() = different capturing groups (either Mention or Emote)\n * 2) (?:^| |\\n) = only allow for: sentence beginning, space or newline before the match (no words or symbols)\n * 3) [^\\s=&#$@%?:;/\\\\\"<>%{}|^~[]* = anything, except the characters inside\n * 4) (?::[\\w]+)? = A mention can be matched with a ':' as a claim modifier with words or digits after as ID digits,\n * or else it's everything before the ':' (will then match the winning uri for the mention behind since has no canonical ID)\n * 5) :\\w*:? = the emote Regex, possible to be matched with a ':' at the end to consider previously typed emotes\n *\n */\n\nconst SEARCH_SIZE = 10;\nconst INPUT_DEBOUNCE_MS = 1000;\n\ntype Props = {\n  canonicalCommentors?: Array<string>,\n  canonicalCreatorUri?: string,\n  canonicalSearch?: Array<string>,\n  canonicalSubscriptions?: Array<string>,\n  canonicalTop?: string,\n  className?: string,\n  commentorUris?: Array<string>,\n  disabled?: boolean,\n  hasNewResolvedResults?: boolean,\n  id: string,\n  inputRef: any,\n  isLivestream?: boolean,\n  maxLength?: number,\n  placeholder?: string,\n  searchQuery?: string,\n  type?: string,\n  uri?: string,\n  value: any,\n  autoFocus?: boolean,\n  submitButtonRef?: any,\n  spellCheck?: boolean,\n  claimIsMine?: boolean,\n  slimInput?: boolean,\n  doResolveUris: (uris: Array<string>, cache: boolean) => void,\n  doSetMentionSearchResults: (query: string, uris: Array<string>) => void,\n  onBlur: (any) => any,\n  onChange: (any) => any,\n  onFocus: (any) => any,\n  toggleSelectors: () => any,\n  handleTip: (isLBC: boolean) => any,\n  handleSubmit: () => any,\n  handlePreventClick?: () => void,\n};\n\nexport default function TextareaWithSuggestions(props: Props) {\n  const {\n    canonicalCommentors,\n    canonicalCreatorUri,\n    canonicalSearch,\n    canonicalSubscriptions: canonicalSubs,\n    canonicalTop,\n    className,\n    commentorUris,\n    disabled,\n    hasNewResolvedResults,\n    id,\n    inputRef,\n    isLivestream,\n    maxLength,\n    placeholder,\n    searchQuery,\n    type,\n    value: messageValue = '',\n    autoFocus,\n    submitButtonRef,\n    spellCheck,\n    claimIsMine,\n    slimInput,\n    doResolveUris,\n    doSetMentionSearchResults,\n    onBlur,\n    onChange,\n    onFocus,\n    toggleSelectors,\n    handleTip,\n    handleSubmit,\n    handlePreventClick,\n  } = props;\n\n  const inputDefaultProps = { className, placeholder, maxLength, spellCheck, type, disabled };\n\n  const [suggestionValue, setSuggestionValue] = React.useState(undefined);\n  const [highlightedSuggestion, setHighlightedSuggestion] = React.useState('');\n  const [shouldClose, setClose] = React.useState();\n  const [debouncedTerm, setDebouncedTerm] = React.useState('');\n\n  const suggestionTerm = suggestionValue && suggestionValue.term;\n  const isEmote = Boolean(suggestionValue && suggestionValue.isEmote);\n  const isMention = suggestionValue && !suggestionValue.isEmote;\n\n  let invalidTerm = suggestionTerm && isMention && suggestionTerm.charAt(1) === ':';\n  if (isMention && suggestionTerm) {\n    try {\n      parseURI(suggestionTerm);\n    } catch (error) {\n      invalidTerm = true;\n    }\n  }\n\n  const additionalOptions = { isBackgroundSearch: false, [SEARCH_OPTIONS.CLAIM_TYPE]: SEARCH_OPTIONS.INCLUDE_CHANNELS };\n  const { results, loading } = useLighthouse(debouncedTerm, false, SEARCH_SIZE, additionalOptions, 0);\n  const stringifiedResults = JSON.stringify(results);\n\n  const hasMinLength = suggestionTerm && isMention && suggestionTerm.length >= LIGHTHOUSE_MIN_CHARACTERS;\n  const isTyping = isMention && debouncedTerm !== suggestionTerm;\n  const showPlaceholder =\n    isMention && !invalidTerm && (isTyping || loading || (results && results.length > 0 && !hasNewResolvedResults));\n\n  const shouldFilter = (uri, previous) => uri !== canonicalCreatorUri && (!previous || !previous.includes(uri));\n  const filteredCommentors = canonicalCommentors && canonicalCommentors.filter((uri) => shouldFilter(uri));\n  const filteredSubs = canonicalSubs && canonicalSubs.filter((uri) => shouldFilter(uri, filteredCommentors));\n  const filteredTop =\n    canonicalTop &&\n    shouldFilter(canonicalTop, filteredSubs) &&\n    shouldFilter(canonicalTop, filteredCommentors) &&\n    canonicalTop;\n  const filteredSearch =\n    canonicalSearch &&\n    canonicalSearch.filter(\n      (uri) => shouldFilter(uri, filteredSubs) && shouldFilter(uri, filteredCommentors) && uri !== filteredTop\n    );\n\n  let emoteNames;\n  // let emojiNames;\n  const allOptions = [];\n  if (isEmote) {\n    emoteNames = EMOTES.map(({ name }) => name);\n    const emotesAndEmojis = [...emoteNames, ...TWEMOTENAMES];\n\n    allOptions.push(...emotesAndEmojis);\n  } else {\n    if (canonicalCreatorUri) allOptions.push(canonicalCreatorUri);\n    if (filteredSubs) allOptions.push(...filteredSubs);\n    if (filteredCommentors) allOptions.push(...filteredCommentors);\n    if (filteredTop) allOptions.push(filteredTop);\n    if (filteredSearch) allOptions.push(...filteredSearch);\n  }\n\n  const allOptionsGrouped =\n    allOptions.length > 0\n      ? allOptions.map((option) => {\n          const groupName = isEmote\n            ? (emoteNames.includes(option) && __('Emotes')) || (TWEMOTENAMES.includes(option) && __('Emojis'))\n            : (canonicalCreatorUri === option && __('Creator')) ||\n              (filteredSubs && filteredSubs.includes(option) && __('Following')) ||\n              (filteredCommentors && filteredCommentors.includes(option) && __('From Comments')) ||\n              (filteredTop && filteredTop === option && 'Top') ||\n              (filteredSearch && filteredSearch.includes(option) && __('From Search'));\n\n          let emoteLabel;\n          if (isEmote) {\n            // $FlowFixMe\n            emoteLabel = `:${option.replace(/:/g, '')}:`;\n          }\n\n          return {\n            label: emoteLabel || option.replace('lbry://', '').replace('#', ':'),\n            group: groupName,\n          };\n        })\n      : [];\n\n  const allMatches =\n    useSuggestionMatch(\n      suggestionTerm || '',\n      allOptionsGrouped.map(({ label }) => label)\n    ) || [];\n\n  const restoreCursorPosition = (cursorIndex) => {\n    if (inputRef && inputRef.current && typeof cursorIndex === 'number' && cursorIndex >= 0) {\n      // $FlowIgnore\n      queueMicrotask(() => {\n        inputRef.current.setSelectionRange(cursorIndex, cursorIndex);\n      });\n    }\n  };\n\n  /** --------- **/\n  /** Functions **/\n  /** --------- **/\n\n  function handleInputChange(value: string) {\n    onChange({ target: { value } });\n\n    const cursorIndex = inputRef && inputRef.current && inputRef.current.selectionStart;\n\n    const suggestionMatches = value.match(SUGGESTION_REGEX);\n\n    if (!suggestionMatches) {\n      if (suggestionValue) {\n        setSuggestionValue(null);\n        restoreCursorPosition(cursorIndex);\n      }\n      return; // Exit here and avoid unnecessary behavior\n    }\n\n    const exec = SUGGESTION_REGEX.exec(value);\n\n    const previousLastIndexes = [];\n    let isEmote = exec && exec[2];\n    let currentSuggestionIndex = exec && exec.index;\n    let currentLastIndex = exec && SUGGESTION_REGEX.lastIndex;\n    let currentSuggestionValue =\n      cursorIndex >= currentSuggestionIndex &&\n      cursorIndex <= currentLastIndex &&\n      suggestionMatches &&\n      suggestionMatches[0];\n\n    if (suggestionMatches && suggestionMatches.length > 1) {\n      currentSuggestionValue = suggestionMatches.find((match, index) => {\n        const previousLastIndex = previousLastIndexes[index - 1] || 0;\n        const valueWithoutPrevious = value.substring(previousLastIndex);\n\n        const tempRe = new RegExp(SUGGESTION_REGEX);\n        const tempExec = tempRe.exec(valueWithoutPrevious);\n\n        if (tempExec) {\n          isEmote = tempExec && tempExec[2];\n          currentSuggestionIndex = previousLastIndex + tempExec.index;\n          currentLastIndex = previousLastIndex + tempRe.lastIndex;\n          previousLastIndexes.push(currentLastIndex);\n        }\n\n        // the current mention term will be the one on the text cursor's range,\n        // in case of there being more in the same comment message\n        if (previousLastIndexes) {\n          return cursorIndex >= currentSuggestionIndex && cursorIndex <= currentLastIndex;\n        }\n      });\n    }\n\n    if (currentSuggestionValue) {\n      const token = isEmote ? ':' : '@';\n      const tokenIndex = currentSuggestionValue.indexOf(token);\n\n      if (inputRef && inputRef.current) inputRef.current.setAttribute('typing-term', '');\n      // $FlowFixMe\n      setSuggestionValue({\n        beforeTerm: currentSuggestionValue.substring(0, tokenIndex), // in case of a space or newline\n        term: currentSuggestionValue.substring(tokenIndex),\n        index: currentSuggestionIndex,\n        lastIndex: currentLastIndex,\n        isEmote,\n      });\n    } else if (suggestionValue) {\n      inputRef.current.removeAttribute('typing-term');\n      setSuggestionValue(null);\n    }\n\n    restoreCursorPosition(cursorIndex);\n  }\n\n  const handleSelect = React.useCallback(\n    (selectedValue: string, key?: number) => {\n      if (!suggestionValue) return;\n      if (!selectedValue) {\n        setSuggestionValue(undefined);\n        setClose(true);\n        return;\n      }\n\n      const elem = inputRef && inputRef.current;\n      // $FlowFixMe\n      const newCursorPos =\n        suggestionValue &&\n        suggestionValue.beforeTerm &&\n        suggestionValue.beforeTerm.length + suggestionValue.index + selectedValue.length + 1;\n      // $FlowFixMe\n      const contentBegin = messageValue.substring(0, suggestionValue.index);\n      // $FlowFixMe\n      const replaceValue = suggestionValue.beforeTerm + selectedValue;\n      // $FlowFixMe\n      const endTo = messageValue.substring(suggestionValue.lastIndex, messageValue.length);\n      // $FlowFixMe\n      const contentEnd = endTo.startsWith(' ') ? endTo : ' ' + endTo;\n\n      const newValue = contentBegin + replaceValue + contentEnd;\n\n      onChange({ target: { value: newValue } });\n      setSuggestionValue(null);\n\n      // no keycode === was selected with TAB (function was called by effect) or on click\n      // ENTER is handled on commentCreate after attempting to send on livestream\n      if (!key && inputRef && inputRef.current) inputRef.current.removeAttribute('typing-term');\n\n      elem.focus();\n      restoreCursorPosition(newCursorPos);\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- restoreCursorPosition excluded, just a helper function\n    [messageValue, inputRef, onChange, suggestionValue]\n  );\n\n  /** ------- **/\n  /** Effects **/\n  /** ------- **/\n\n  React.useEffect(() => {\n    if (!autoFocus) return;\n\n    const inputElement = inputRef && inputRef.current;\n    if (inputElement) {\n      inputElement.focus();\n      if (messageValue) inputElement.setSelectionRange(messageValue.length, messageValue.length);\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- do NOT listen to messageValue, otherwise will autofocus while typing\n  }, [autoFocus, inputRef]);\n\n  React.useEffect(() => {\n    if (!isMention) return;\n\n    if (isTyping && suggestionTerm && !invalidTerm) {\n      const timer = setTimeout(() => {\n        setDebouncedTerm(!hasMinLength ? '' : suggestionTerm);\n      }, INPUT_DEBOUNCE_MS);\n\n      return () => clearTimeout(timer);\n    }\n  }, [hasMinLength, invalidTerm, isMention, isTyping, suggestionTerm]);\n\n  React.useEffect(() => {\n    if (!stringifiedResults) return;\n\n    const arrayResults = JSON.parse(stringifiedResults);\n    if (debouncedTerm && arrayResults && arrayResults.length > 0) {\n      doResolveUris([debouncedTerm, ...arrayResults], true);\n      doSetMentionSearchResults(debouncedTerm, arrayResults);\n    }\n  }, [debouncedTerm, doResolveUris, doSetMentionSearchResults, stringifiedResults, suggestionTerm]);\n\n  // Only resolve commentors on Livestreams when first trying to mention/looking for it\n  React.useEffect(() => {\n    if (isLivestream && commentorUris && suggestionTerm) doResolveUris(commentorUris, true);\n  }, [commentorUris, doResolveUris, isLivestream, suggestionTerm]);\n\n  // Allow selecting with TAB key\n  React.useEffect(() => {\n    if (!suggestionTerm) return; // only if there is a term, or else can't tab to navigate page\n\n    function handleKeyDown(e: SyntheticKeyboardEvent<*>) {\n      const { keyCode } = e;\n\n      if (highlightedSuggestion && keyCode === KEYCODES.TAB) {\n        e.preventDefault();\n        handleSelect(highlightedSuggestion.label);\n      }\n    }\n\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [handleSelect, highlightedSuggestion, suggestionTerm]);\n\n  // Prevent keyboard keys Up and Down being overriden by MUI listeners when not in use\n  React.useEffect(() => {\n    const inputElement = inputRef && inputRef.current;\n\n    function overrideKeyHandling(event) {\n      const { keyCode } = event;\n\n      if (!suggestionTerm && (keyCode === KEYCODES.UP || keyCode === KEYCODES.DOWN)) {\n        event.stopPropagation();\n      }\n    }\n\n    if (inputElement) {\n      inputElement.addEventListener('keydown', overrideKeyHandling);\n    }\n\n    return () => {\n      if (inputElement) {\n        inputElement.removeEventListener('keydown', overrideKeyHandling);\n      }\n    };\n  }, [inputRef, suggestionTerm]);\n\n  /** ------ **/\n  /** Render **/\n  /** ------ **/\n\n  return (\n    <Autocomplete\n      PopperComponent={AutocompletePopper}\n      autoHighlight\n      disableClearable\n      filterOptions={(options) => options.filter(({ label }) => allMatches.includes(label))}\n      freeSolo\n      fullWidth\n      getOptionLabel={(option) => option.label || ''}\n      groupBy={(option) => option.group}\n      id={id}\n      inputValue={messageValue}\n      loading={allMatches.length === 0 || showPlaceholder}\n      loadingText={showPlaceholder ? <BusyIndicator message={__('Searching...')} /> : __('Nothing found')}\n      onBlur={() => onBlur && onBlur()}\n      /* Different from onInputChange, onChange is only used for the selected value,\n        so here it is acting simply as a selection handler (see it as onSelect) */\n      onChange={(event, value) => handleSelect(value.label, event.keyCode)}\n      onClose={(event, reason) => reason !== 'selectOption' && setClose(true)}\n      onFocus={() => onFocus && onFocus()}\n      onHighlightChange={(event, option) => setHighlightedSuggestion(option)}\n      onInputChange={(event, value, reason) => reason === 'input' && handleInputChange(value)}\n      onOpen={() => suggestionTerm && setClose(false)}\n      /* 'open' is for the popper box component, set to check for a valid term\n        or else it will be displayed all the time as empty (no options) */\n      open={!!suggestionTerm && !shouldClose}\n      options={allOptionsGrouped}\n      renderGroup={({ group, children }) => (\n        <TextareaSuggestionsGroup groupName={group} suggestionTerm={suggestionTerm} searchQuery={searchQuery}>\n          {children}\n        </TextareaSuggestionsGroup>\n      )}\n      renderInput={(params) => (\n        <TextareaSuggestionsInput\n          params={params}\n          messageValue={messageValue}\n          inputRef={inputRef}\n          inputDefaultProps={inputDefaultProps}\n          toggleSelectors={toggleSelectors}\n          handleTip={handleTip}\n          handleSubmit={handleSubmit}\n          handlePreventClick={handlePreventClick}\n          submitButtonRef={submitButtonRef}\n          claimIsMine={claimIsMine}\n          slimInput={slimInput}\n        />\n      )}\n      renderOption={(optionProps, option) => (\n        <TextareaSuggestionsOption label={option.label} isEmote={isEmote} optionProps={optionProps} />\n      )}\n    />\n  );\n}\n\nconst AutocompletePopper = (props: any) => <Popper {...props} placement=\"top\" />;\n\nfunction useSuggestionMatch(term: string, list: Array<string>) {\n  const throttledTerm = useThrottle(term);\n\n  return React.useMemo(() => {\n    return !throttledTerm || throttledTerm.trim() === ''\n      ? undefined\n      : matchSorter(list, term, { keys: [(item) => item] });\n  }, [list, term, throttledTerm]);\n}\n","import { connect } from 'react-redux';\nimport { doResolveUris } from 'redux/actions/claims';\nimport { doSetMentionSearchResults } from 'redux/actions/search';\nimport { makeSelectWinningUriForQuery } from 'redux/selectors/search';\nimport { MAX_LIVESTREAM_COMMENTS } from 'constants/livestream';\nimport { selectChannelMentionData } from 'redux/selectors/comments';\nimport { withRouter } from 'react-router';\nimport TextareaWithSuggestions from './view';\n\nconst select = (state, props) => {\n  const { uri } = props;\n\n  const maxComments = props.isLivestream ? MAX_LIVESTREAM_COMMENTS : -1;\n  const data = selectChannelMentionData(state, uri, maxComments);\n  const {\n    canonicalCommentors,\n    canonicalCreatorUri,\n    canonicalSearch,\n    canonicalSubscriptions,\n    commentorUris,\n    hasNewResolvedResults,\n    query,\n  } = data;\n\n  return {\n    canonicalCommentors,\n    canonicalCreatorUri,\n    canonicalSearch,\n    canonicalSubscriptions,\n    canonicalTop: makeSelectWinningUriForQuery(query)(state),\n    commentorUris,\n    hasNewResolvedResults,\n    searchQuery: query,\n  };\n};\n\nconst perform = {\n  doResolveUris,\n  doSetMentionSearchResults,\n};\n\nexport default withRouter(connect(select, perform)(TextareaWithSuggestions));\n","// @flow\nimport React from 'react';\nimport { lighthouse } from 'redux/actions/search';\nimport { getSearchQueryString } from 'util/query-params';\nimport { isURIValid } from 'util/lbryURI';\nimport useThrottle from './use-throttle';\n\nexport default function useLighthouse(\n  query: string,\n  showMature: boolean,\n  size: number = 5,\n  additionalOptions: any = {},\n  throttleMs: number = 500\n) {\n  const [results, setResults] = React.useState();\n  const [loading, setLoading] = React.useState();\n  const queryString = query ? getSearchQueryString(query, { nsfw: showMature, size, ...additionalOptions }) : '';\n  const throttledQuery = useThrottle(queryString, throttleMs);\n\n  React.useEffect(() => {\n    if (throttledQuery) {\n      setLoading(true);\n      setResults(null);\n\n      let isSubscribed = true;\n      lighthouse\n        .search(throttledQuery)\n        .then(({ body: results }) => {\n          if (isSubscribed) {\n            setResults(\n              results.map((result) => `lbry://${result.name}#${result.claimId}`).filter((uri) => isURIValid(uri))\n            );\n            setLoading(false);\n          }\n        })\n        .catch(() => {\n          setLoading(false);\n        });\n\n      return () => {\n        isSubscribed = false;\n      };\n    }\n  }, [throttledQuery]);\n\n  return { results, loading };\n}\n","// @flow\nimport React from 'react';\n\nconst useEffectOnce = (effect) => {\n  React.useEffect(effect, []);\n};\n\nfunction useUnmount(fn: () => any): void {\n  const fnRef = React.useRef(fn);\n\n  // update the ref each render so if it change the newest callback will be invoked\n  fnRef.current = fn;\n\n  useEffectOnce(() => () => fnRef.current());\n}\n\nexport default function useThrottle(value: string, ms: number = 200) {\n  const [state, setState] = React.useState(value);\n  const timeout = React.useRef();\n  const nextValue = React.useRef(null);\n  const hasNextValue = React.useRef(0);\n\n  React.useEffect(() => {\n    if (!timeout.current) {\n      setState(value);\n      const timeoutCallback = () => {\n        if (hasNextValue.current) {\n          hasNextValue.current = false;\n          setState(nextValue.current);\n          timeout.current = setTimeout(timeoutCallback, ms);\n        } else {\n          timeout.current = undefined;\n        }\n      };\n      timeout.current = setTimeout(timeoutCallback, ms);\n    } else {\n      nextValue.current = value;\n      hasNextValue.current = true;\n    }\n  }, [ms, value]);\n\n  useUnmount(() => {\n    timeout.current && clearTimeout(timeout.current);\n  });\n\n  return state;\n}\n"],"names":["BusyIndicator","_React$PureComponent","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","key","value","message","this","props","React","className","connect","state","uri","claim","selectClaimForUri","odyseeMembership","selectUserOdyseeMembership","getChannelIdFromClaim","claimLabel","formatLbryChannelName","canonical_url","claimTitle","getClaimTitle","emote","autocompleteProps","_objectWithoutProperties","_excluded","Twemoji","_ref","emoji","dangerouslySetInnerHTML","__html","twemoji","folder","ext","name","url","unicode","src","_value","ChannelThumbnail","xsmall","MembershipBadge","membershipName","label","isEmote","optionProps","emoteFound","EMOTES","TWEMOTEARRAY","_ref2","emoteValue","undefined","TextareaSuggestionsItem","_extends","params","messageValue","inputRef","inputDefaultProps","submitButtonRef","claimIsMine","slimInput","toggleSelectors","handleTip","handleSubmit","handlePreventClick","InputProps","disabled","fullWidth","id","inputProps","_objectSpread","startAdornment","Button","icon","ICONS","onClick","endAdornment","length","Zoom","in","mountOnEnter","unmountOnExit","ref","button","iconColor","TextField","variant","multiline","minRows","maxRows","select","groupName","suggestionTerm","searchQuery","children","LbcSymbol","prefix","__","matching_term","group_name","SUGGESTION_REGEX","RegExp","SEARCH_SIZE","INPUT_DEBOUNCE_MS","AutocompletePopper","Popper","placement","perform","doResolveUris","doSetMentionSearchResults","withRouter","maxComments","isLivestream","MAX_LIVESTREAM_COMMENTS","data","selectChannelMentionData","canonicalCommentors","canonicalCreatorUri","canonicalSearch","canonicalSubscriptions","commentorUris","hasNewResolvedResults","query","canonicalTop","makeSelectWinningUriForQuery","canonicalSubs","maxLength","placeholder","type","_props$value","autoFocus","spellCheck","_onBlur","onBlur","onChange","_onFocus","onFocus","_React$useState2","_slicedToArray","suggestionValue","setSuggestionValue","_React$useState4","highlightedSuggestion","setHighlightedSuggestion","_React$useState6","shouldClose","setClose","_React$useState8","debouncedTerm","setDebouncedTerm","term","Boolean","isMention","invalidTerm","charAt","parseURI","error","emoteNames","additionalOptions","_defineProperty","isBackgroundSearch","SEARCH_OPTIONS","_useLighthouse","useLighthouse","results","loading","stringifiedResults","JSON","stringify","hasMinLength","LIGHTHOUSE_MIN_CHARACTERS","isTyping","showPlaceholder","shouldFilter","previous","includes","filteredCommentors","filter","filteredSubs","filteredTop","filteredSearch","allOptions","emotesAndEmojis","concat","_toConsumableArray","TWEMOTENAMES","push","list","throttledTerm","allOptionsGrouped","map","option","emoteLabel","replace","group","allMatches","useThrottle","trim","matchSorter","keys","item","restoreCursorPosition","cursorIndex","current","queueMicrotask","setSelectionRange","handleSelect","selectedValue","elem","newCursorPos","beforeTerm","index","contentBegin","substring","replaceValue","endTo","lastIndex","contentEnd","startsWith","target","removeAttribute","focus","inputElement","timer","setTimeout","clearTimeout","arrayResults","parse","window","addEventListener","handleKeyDown","removeEventListener","e","keyCode","KEYCODES","preventDefault","overrideKeyHandling","event","stopPropagation","Autocomplete","PopperComponent","autoHighlight","disableClearable","filterOptions","options","_ref3","freeSolo","getOptionLabel","groupBy","inputValue","loadingText","onClose","reason","onHighlightChange","onInputChange","selectionStart","suggestionMatches","match","exec","previousLastIndexes","currentSuggestionIndex","currentLastIndex","currentSuggestionValue","find","previousLastIndex","valueWithoutPrevious","tempRe","tempExec","token","tokenIndex","indexOf","setAttribute","handleInputChange","onOpen","open","renderGroup","_ref4","TextareaSuggestionsGroup","renderInput","TextareaSuggestionsInput","renderOption","TextareaSuggestionsOption","showMature","size","throttleMs","setResults","setLoading","queryString","getSearchQueryString","nsfw","throttledQuery","isSubscribed","lighthouse","then","body","result","claimId","isURIValid","useEffectOnce","effect","fn","fnRef","ms","setState","timeout","nextValue","hasNextValue","timeoutCallback"],"sourceRoot":""}