{"version":3,"file":"comments-6669746b50beb524b71c-1009.js","mappings":"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","sources":["webpack://odysee.com/../ui/component/commentCreate/internal/sticker-contents.jsx","webpack://odysee.com/../ui/component/commentCreate/internal/tip-contents.jsx","webpack://odysee.com/../ui/component/selectChannel/view.jsx","webpack://odysee.com/../ui/component/selectChannel/index.js","webpack://odysee.com/../ui/component/commentCreate/internal/extra-contents.jsx","webpack://odysee.com/../ui/component/commentCreate/view.jsx","webpack://odysee.com/../ui/component/commentCreate/index.js","webpack://odysee.com/../ui/component/commentsList/internal/commentListMenu/view.jsx","webpack://odysee.com/../ui/component/commentsList/internal/commentListMenu/index.js","webpack://odysee.com/../ui/component/commentsList/view.jsx","webpack://odysee.com/../ui/component/commentsList/index.js","webpack://odysee.com/../ui/component/common/error-bubble.jsx"],"sourcesContent":["// @flow\nimport Button from 'component/button';\nimport React from 'react';\nimport FilePrice from 'component/filePrice';\nimport OptimizedImage from 'component/optimizedImage';\nimport ChannelThumbnail from 'component/channelThumbnail';\nimport UriIndicator from 'component/uriIndicator';\n\ntype Props = {\n  activeChannelUrl: string,\n  src: string,\n  price: number,\n  exchangeRate?: number,\n};\n\nexport const StickerReviewBox = (props: Props) => {\n  const { activeChannelUrl, src, price, exchangeRate } = props;\n\n  return (\n    <div className=\"comment-create__sticker-preview\">\n      <div className=\"comment-create__sticker-preview__info\">\n        <ChannelThumbnail xsmall uri={activeChannelUrl} />\n        <UriIndicator uri={activeChannelUrl} link showAtSign />\n      </div>\n\n      <div className=\"comment-create__sticker-preview__image\">\n        <OptimizedImage src={src} waitLoad loading=\"lazy\" />\n      </div>\n\n      {Boolean(price && exchangeRate) && (\n        <FilePrice\n          customPrices={{\n            // TODO PRICE FILE\n            priceFiat: price,\n            priceLBC: Number(exchangeRate) !== 0 ? price / Number(exchangeRate) : 0,\n          }}\n          isFiat\n        />\n      )}\n    </div>\n  );\n};\n\ntype StickerButtonProps = {\n  isReviewingStickerComment: boolean,\n  disabled?: boolean,\n};\n\nexport const StickerActionButton = (stickerButtonProps: StickerButtonProps) => {\n  const { isReviewingStickerComment, disabled, ...buttonProps } = stickerButtonProps;\n\n  return (\n    <Button\n      disabled={disabled}\n      {...buttonProps}\n      title={__('Stickers')}\n      label={isReviewingStickerComment ? __('Change') : undefined}\n    />\n  );\n};\n","// @flow\nimport Button from 'component/button';\nimport React from 'react';\nimport ChannelThumbnail from 'component/channelThumbnail';\nimport UriIndicator from 'component/uriIndicator';\nimport CreditAmount from 'component/common/credit-amount';\nimport { TAB_USD } from 'constants/tip_tabs';\n\ntype Props = {\n  activeChannelUrl: string,\n  tipAmount: number,\n  activeTab: string,\n  message: string,\n  isReviewingStickerComment?: boolean,\n  stickerPreviewComponent?: any,\n};\n\nexport const TipReviewBox = (props: Props) => {\n  const { activeChannelUrl, tipAmount, activeTab, message, isReviewingStickerComment, stickerPreviewComponent } = props;\n\n  return (\n    <div className=\"comment-create__support-comment-preview\">\n      <CreditAmount\n        amount={tipAmount}\n        className=\"comment-create__support-comment-preview__amount\"\n        isFiat={activeTab === TAB_USD}\n        size={2}\n      />\n\n      {isReviewingStickerComment ? (\n        stickerPreviewComponent\n      ) : (\n        <>\n          <ChannelThumbnail xsmall uri={activeChannelUrl} />\n\n          <div>\n            <UriIndicator uri={activeChannelUrl} link showAtSign />\n            <div>{message}</div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\ntype TipButtonProps = {\n  name: string,\n  tab: string,\n  activeTab: string,\n  tipSelectorOpen: boolean,\n  onClick: (tab: string) => void,\n};\n\nexport const TipActionButton = (tipButtonProps: TipButtonProps) => {\n  const { name, tab, activeTab, tipSelectorOpen, onClick, ...buttonProps } = tipButtonProps;\n\n  return (\n    (!tipSelectorOpen || activeTab !== tab) && (\n      <Button {...buttonProps} title={name} label={tipSelectorOpen ? name : undefined} onClick={() => onClick(tab)} />\n    )\n  );\n};\n","// @flow\nimport React from 'react';\nimport { FormField } from 'component/common/form';\n\ntype Props = {\n  tiny?: boolean,\n  label?: string,\n  injected?: ?Array<string>,\n  // --- Redux ---\n  myChannelClaims: ?Array<ChannelClaim>,\n  fetchingChannels: boolean,\n  activeChannelClaimId: ?string,\n  setActiveChannel: (claimId: ?string, override?: boolean) => void,\n};\n\nfunction SelectChannel(props: Props) {\n  const {\n    fetchingChannels,\n    myChannelClaims = [],\n    label,\n    injected = [],\n    tiny,\n    activeChannelClaimId,\n    setActiveChannel,\n  } = props;\n\n  function handleChannelChange(event: SyntheticInputEvent<*>) {\n    const channelClaimId = event.target.value;\n    setActiveChannel(channelClaimId);\n  }\n\n  return (\n    <>\n      <FormField\n        name=\"channel\"\n        label={!tiny && (label || __('Channel'))}\n        labelOnLeft={tiny}\n        type={tiny ? 'select-tiny' : 'select'}\n        onChange={handleChannelChange}\n        value={activeChannelClaimId}\n        disabled={fetchingChannels}\n      >\n        {fetchingChannels ? (\n          <option>{__('Loading your channels...')}</option>\n        ) : (\n          <>\n            {myChannelClaims &&\n              myChannelClaims.map(({ name, claim_id: claimId }) => (\n                <option key={claimId} value={claimId}>\n                  {name}\n                </option>\n              ))}\n            {injected &&\n              injected.map((item) => (\n                <option key={item} value={item}>\n                  {item}\n                </option>\n              ))}\n          </>\n        )}\n      </FormField>\n    </>\n  );\n}\n\nexport default SelectChannel;\n","import { connect } from 'react-redux';\nimport SelectChannel from './view';\nimport { selectMyChannelClaims, selectFetchingMyChannels } from 'redux/selectors/claims';\nimport { selectActiveChannelClaimId } from 'redux/selectors/app';\nimport { doSetActiveChannel } from 'redux/actions/app';\n\nconst select = (state) => ({\n  myChannelClaims: selectMyChannelClaims(state),\n  fetchingChannels: selectFetchingMyChannels(state),\n  activeChannelClaimId: selectActiveChannelClaimId(state),\n});\n\nconst perform = {\n  setActiveChannel: doSetActiveChannel,\n};\n\nexport default connect(select, perform)(SelectChannel);\n","// @flow\nimport React from 'react';\nimport * as ICONS from 'constants/icons';\nimport CreditAmount from 'component/common/credit-amount';\nimport I18nMessage from 'component/i18nMessage';\nimport Icon from 'component/common/icon';\nimport SelectChannel from 'component/selectChannel';\n\ntype SelectorProps = {\n  isReply: boolean,\n  isLivestream: boolean,\n};\n\nexport const FormChannelSelector = (selectorProps: SelectorProps) => {\n  const { isReply, isLivestream } = selectorProps;\n\n  return (\n    <div className=\"comment-create__label-wrapper\">\n      <span className=\"comment-create__label\">\n        {(isReply ? __('Replying as') : isLivestream ? __('Chat as') : __('Comment as')) + ' '}\n      </span>\n\n      <SelectChannel tiny />\n    </div>\n  );\n};\n\ntype HelpTextProps = {\n  deletedComment: boolean,\n  minAmount: number,\n  minTip: number,\n  minSuper: number,\n  minUSDAmount: number,\n  minUSDSuper: number,\n  minUSDTip: number,\n};\n\nexport const HelpText = (helpTextProps: HelpTextProps) => {\n  const { deletedComment, minAmount, minTip, minSuper, minUSDAmount, minUSDSuper, minUSDTip } = helpTextProps;\n\n  return (\n    <>\n      {deletedComment && <div className=\"error__text\">{__('This comment has been deleted.')}</div>}\n\n      {(!!minAmount || !!minUSDAmount) && (\n        <div className=\"help--notice comment-create__min-amount-notice\">\n          <span>{!!minTip || !!minUSDTip ? __('Comment minimum: ') : __('HyperChat minimum: ')}</span>\n          {(!!minTip || !!minSuper || !!minUSDTip || !!minUSDSuper) && (\n            <>\n              <I18nMessage\n                tokens={{\n                  usd: <CreditAmount noFormat isFiat amount={minUSDAmount || 0.01} />,\n                }}\n              >\n                {`%usd%`}\n              </I18nMessage>\n            </>\n          )}\n\n          <Icon\n            customTooltipText={\n              minTip || minUSDTip\n                ? __('This channel requires a minimum tip for each comment.')\n                : minSuper || minUSDSuper\n                ? __('This channel requires a minimum amount for HyperChats to be visible.')\n                : ''\n            }\n            className=\"icon--help\"\n            icon={ICONS.HELP}\n            tooltip\n            size={16}\n          />\n        </div>\n      )}\n    </>\n  );\n};\n","// @flow\nimport React from 'react';\nimport type { ElementRef } from 'react';\nimport { buildValidSticker } from 'util/comments';\nimport { FF_MAX_CHARS_IN_COMMENT, FF_MAX_CHARS_IN_LIVESTREAM_COMMENT } from 'constants/form-field';\nimport { FormField, Form } from 'component/common/form';\nimport { Lbryio } from 'lbryinc';\nimport { SIMPLE_SITE } from 'config';\nimport { useHistory } from 'react-router';\nimport * as ICONS from 'constants/icons';\nimport * as KEYCODES from 'constants/keycodes';\nimport * as PAGES from 'constants/pages';\nimport * as MODALS from 'constants/modal_types';\n// import * as STRIPE from 'constants/stripe';\nimport Button from 'component/button';\nimport classnames from 'classnames';\nimport CommentSelectors, { SELECTOR_TABS } from './internal/comment-selectors';\nimport usePersistedState from 'effects/use-persisted-state';\nimport WalletTipAmountSelector from 'component/walletTipAmountSelector';\nimport { useIsMobile } from 'effects/use-screensize';\nimport { StickerReviewBox, StickerActionButton } from './internal/sticker-contents';\nimport { TipReviewBox, TipActionButton } from './internal/tip-contents';\nimport { FormChannelSelector, HelpText } from './internal/extra-contents';\nimport ErrorBubble from 'component/common/error-bubble';\nimport { AppContext } from 'component/app/view';\nimport { getStripeEnvironment } from 'util/stripe';\nimport { TAB_USD } from 'constants/tip_tabs';\nimport { useArStatus } from 'effects/use-ar-status';\nimport './style.lazy.scss';\n\nconst stripeEnvironment = getStripeEnvironment();\n\ntype TipParams = { tipAmount: number, tipChannelName: string, channelClaimId: string };\ntype ArTipParams = {\n  tipAmountTwoPlaces: number,\n  tipChannelName: string,\n  channelClaimId: string,\n  recipientAddress: string,\n  currency: string,\n};\n\ntype UserParams = { activeChannelName: ?string, activeChannelId: ?string };\n\ntype Props = {\n  activeChannelClaimId?: string,\n  activeChannelName?: string,\n  activeChannelUrl?: string,\n  bottom: boolean,\n  hasChannels: boolean,\n  claimId?: string,\n  channelClaimId?: string,\n  tipChannelName?: string,\n  claimIsMine: boolean,\n  embed?: boolean,\n  isFetchingChannels: boolean,\n  isFetchingCreatorSettings: boolean,\n  isNested: boolean,\n  isReply: boolean,\n  isLivestream?: boolean,\n  parentId: string,\n  channelSettings: ?PerChannelSettings,\n  shouldFetchComment: boolean,\n  supportDisabled: boolean,\n  uri: string,\n  disableInput?: boolean,\n  recipientArweaveTipInfo: any,\n  canReceiveTips: boolean,\n  onSlimInputClose?: () => void,\n  setQuickReply: (any) => void,\n  onCancelReplying?: () => void,\n  onDoneReplying?: () => void,\n  // redux\n  doCommentCreate: (uri: string, isLivestream?: boolean, params: CommentSubmitParams) => Promise<any>,\n  doFetchCreatorSettings: (channelId: string) => Promise<any>,\n  doToast: ({ message: string }) => void,\n  doCommentById: (commentId: string, toastIfNotFound: boolean) => Promise<any>,\n  doSendCashTip: (\n    TipParams,\n    anonymous: boolean,\n    UserParams,\n    claimId: string,\n    stripe: ?string,\n    preferredCurrency: string,\n    (any) => void\n  ) => string,\n  doArTip: (ArTipParams, anonymous: boolean, UserParams, claimId: string, stripe: ?string) => Promise<any>,\n  doOpenModal: (id: string, any) => void,\n  preferredCurrency: string,\n  myChannelClaimIds: ?Array<string>,\n  myCommentedChannelIds: ?Array<string>,\n  doFetchMyCommentedChannels: (claimId: ?string) => void,\n  doTipAccountCheckForUri: (uri: string) => void,\n  textInjection?: string,\n  chatCommentsRestrictedToChannelMembers: boolean,\n  isAChannelMember: boolean,\n  commentSettingDisabled: ?boolean,\n  userHasMembersOnlyChatPerk: boolean,\n  isLivestreamChatMembersOnly: boolean,\n  areCommentsMembersOnly: boolean,\n  hasPremiumPlus: boolean,\n  arweaveTippingError: string,\n};\n\nexport function CommentCreate(props: Props) {\n  const {\n    // chatCommentsRestrictedToChannelMembers,\n    activeChannelClaimId,\n    activeChannelName,\n    activeChannelUrl,\n    bottom,\n    recipientArweaveTipInfo,\n    canReceiveTips,\n    channelClaimId,\n    claimId,\n    claimIsMine,\n    disableInput,\n    doCommentById,\n    doCommentCreate,\n    doFetchCreatorSettings,\n    doFetchMyCommentedChannels,\n    doOpenModal,\n    doSendCashTip,\n    doArTip,\n    doTipAccountCheckForUri,\n    doToast,\n    embed,\n    hasChannels,\n    isFetchingChannels,\n    isFetchingCreatorSettings,\n    isLivestream,\n    isNested,\n    isReply,\n    myChannelClaimIds,\n    myCommentedChannelIds,\n    onCancelReplying,\n    onDoneReplying,\n    onSlimInputClose,\n    parentId,\n    preferredCurrency,\n    setQuickReply,\n    channelSettings,\n    shouldFetchComment,\n    supportDisabled,\n    textInjection,\n    tipChannelName,\n    uri,\n    commentSettingDisabled,\n    userHasMembersOnlyChatPerk,\n    isLivestreamChatMembersOnly,\n    areCommentsMembersOnly,\n    hasPremiumPlus,\n    arweaveTippingError,\n  } = props;\n\n  const { activeArStatus } = useArStatus();\n  const fileUri = React.useContext(AppContext)?.uri;\n  const isMobile = useIsMobile();\n\n  const formFieldRef: ElementRef<any> = React.useRef();\n  const buttonRef: ElementRef<any> = React.useRef();\n  const slimInputButtonRef: ElementRef<any> = React.useRef();\n\n  const {\n    push,\n    location: { pathname },\n  } = useHistory();\n\n  const [isSubmitting, setSubmitting] = React.useState(false);\n  const [commentFailure, setCommentFailure] = React.useState(false);\n  const [successTip, setSuccessTip] = React.useState({ txid: undefined, tipAmount: undefined });\n  const [tipSelectorOpen, setTipSelector] = React.useState();\n  const [isReviewingSupportComment, setReviewingSupportComment] = React.useState();\n  const [isReviewingStickerComment, setReviewingStickerComment] = React.useState();\n  const [selectedSticker, setSelectedSticker] = React.useState();\n  const [tipAmount, setTipAmount] = React.useState(1);\n  // const [convertedAmount, setConvertedAmount] = React.useState();\n  const [commentValue, setCommentValue] = React.useState('');\n  const [advancedEditor, setAdvancedEditor] = usePersistedState('comment-editor-mode', false);\n  const [activeTab, setActiveTab] = React.useState();\n  const [tipError, setTipError] = React.useState();\n  const [deletedComment, setDeletedComment] = React.useState(false);\n  const [showSelectors, setShowSelectors] = React.useState({ tab: undefined, open: false });\n  const [disableReviewButton, setDisableReviewButton] = React.useState();\n  const [exchangeRate, setExchangeRate] = React.useState();\n  const [tipModalOpen, setTipModalOpen] = React.useState(undefined);\n\n  const charCount = commentValue ? commentValue.length : 0;\n  const hasNothingToSumbit = !commentValue.length && !selectedSticker;\n  const minSuper = (channelSettings && channelSettings.min_tip_amount_super_chat) || 0;\n  const minTip = (channelSettings && channelSettings.min_tip_amount_comment) || 0;\n  const minAmount = minTip || minSuper || 0;\n  const minUSDSuper = (channelSettings && channelSettings.min_usdc_tip_amount_super_chat) || 0;\n  const minUSDTip = (channelSettings && channelSettings.min_usdc_tip_amount_comment) || 0;\n  const minUSDAmount = minUSDTip || minUSDSuper || 0;\n\n  // Convert legacy LBC minimums to 1 cent USD if they exist\n  const legacyMinAsUSD = minAmount > 0 ? 0.01 : 0;\n\n  // For regular comments: only check minUSDTip (and legacy minTip)\n  // For hyperchat comments: check minUSDAmount (includes both minUSDTip and minUSDSuper)\n  const isHyperchat = activeTab === TAB_USD;\n\n  const minAmountMet =\n    claimIsMine || (isHyperchat ? tipAmount >= (minUSDAmount || legacyMinAsUSD) : !(minUSDTip || minTip)); // Regular comments are blocked only if minUSDTip/minTip is set\n\n  const stickerPrice = selectedSticker && selectedSticker.price;\n  const tipSelectorError = tipError || disableReviewButton;\n  const disabled =\n    commentSettingDisabled ||\n    deletedComment ||\n    isSubmitting ||\n    isFetchingChannels ||\n    isFetchingCreatorSettings ||\n    hasNothingToSumbit ||\n    !minAmountMet ||\n    disableInput;\n\n  const minUSDAmountRef = React.useRef(minUSDAmount);\n  minUSDAmountRef.current = minUSDAmount;\n\n  const addEmoteToComment = React.useCallback((emote: string) => {\n    setCommentValue((prev) => prev + (prev && prev.charAt(prev.length - 1) !== ' ' ? ` ${emote} ` : `${emote} `));\n  }, []);\n\n  const handleSelectSticker = React.useCallback(\n    (sticker: any) => {\n      // $FlowFixMe\n      setSelectedSticker(sticker);\n      setReviewingStickerComment(true);\n      setTipAmount(sticker.price || 0);\n      setShowSelectors((prev) => ({ tab: prev.tab || undefined, open: false }));\n\n      // added this here since selecting a sticker can cause scroll issues\n      if (onSlimInputClose) onSlimInputClose();\n\n      if (sticker.price && sticker.price > 0) {\n        setActiveTab(TAB_USD);\n        setTipSelector(true);\n      }\n    },\n    [onSlimInputClose]\n  );\n\n  const commentSelectorsProps = React.useMemo(() => {\n    return {\n      claimIsMine,\n      addEmoteToComment,\n      handleSelectSticker,\n      isOpen: showSelectors.open,\n      openTab: showSelectors.tab || undefined,\n    };\n  }, [claimIsMine, addEmoteToComment, handleSelectSticker, showSelectors.open, showSelectors.tab]);\n\n  const submitButtonProps = { button: 'primary', type: 'submit', requiresAuth: true };\n  const actionButtonProps = { button: 'alt' };\n  const tipButtonProps = {\n    ...actionButtonProps,\n    disabled: !commentValue.length && !selectedSticker,\n    tipSelectorOpen,\n    activeTab,\n    onClick: handleSelectTipComment,\n  };\n  const cancelButtonProps = { button: 'link', label: __('Cancel') };\n  const stickerReviewProps = {\n    activeChannelUrl,\n    src: selectedSticker ? selectedSticker.url : '',\n    price: selectedSticker ? selectedSticker.price : 0,\n    exchangeRate,\n  };\n\n  const commentSelectorElem = React.useMemo(\n    () => (\n      <CommentSelectors\n        {...commentSelectorsProps}\n        closeSelector={() => setShowSelectors((prev) => ({ tab: prev.tab || undefined, open: false }))}\n      />\n    ),\n    [commentSelectorsProps]\n  );\n\n  // **************************************************************************\n  // Functions\n  // **************************************************************************\n\n  function isRestrictedToMembersOnly() {\n    const isAnonymous = claimId && !channelClaimId;\n    if (isAnonymous) {\n      return false;\n    }\n\n    return (\n      channelClaimId &&\n      doFetchCreatorSettings(channelClaimId)\n        .then((cs: SettingsResponse) => (isLivestream ? cs.livestream_chat_members_only : cs.comments_members_only))\n        .catch(() => undefined)\n    );\n  }\n\n  function handleJoinMembersOnlyChat() {\n    return doOpenModal(MODALS.JOIN_MEMBERSHIP, { uri, fileUri });\n  }\n\n  function handleSelectTipComment(tab: string) {\n    setActiveTab(tab);\n\n    if (isMobile) {\n      setTipModalOpen(true);\n      doOpenModal(MODALS.SEND_TIP, {\n        uri,\n        isTipOnly: true,\n        hasSelectedTab: tab,\n        customText: __('Preview Comment Tip'),\n        setAmount: (amount, activeTab) => {\n          setActiveTab(activeTab);\n          setTipAmount(amount);\n          setReviewingSupportComment(true);\n        },\n      });\n    } else {\n      setTipSelector(true);\n    }\n\n    if (onSlimInputClose) onSlimInputClose();\n  }\n\n  function handleStickerComment() {\n    if (selectedSticker) {\n      setReviewingStickerComment(false);\n      setSelectedSticker(undefined);\n      setShowSelectors({ tab: SELECTOR_TABS.STICKER, open: true });\n    } else {\n      setShowSelectors({ tab: showSelectors.tab || undefined, open: !showSelectors.open });\n    }\n\n    setTipSelector(false);\n  }\n\n  function handleCancelSticker() {\n    setReviewingStickerComment(false);\n    setSelectedSticker(null);\n    setShowSelectors({ tab: undefined, open: false });\n    if (onSlimInputClose) onSlimInputClose();\n  }\n\n  function handleImageUpload() {\n    doOpenModal(MODALS.IMAGE_UPLOAD, {\n      onUpdate: (imageUrl, imageTitle) => updateComment(imageUrl, imageTitle),\n      assetName: __('Image'),\n    });\n  }\n\n  function updateComment(imageUrl, imageTitle) {\n    if (!imageTitle) imageTitle = '';\n    let markdown = `![${imageTitle}](${imageUrl})`;\n    setCommentValue((prev) => prev + (prev && prev.charAt(prev.length - 1) !== ' ' ? ` ${markdown} ` : `${markdown} `));\n  }\n\n  function handleCancelSupport() {\n    if (!isReviewingSupportComment) setTipSelector(false);\n    setReviewingSupportComment(false);\n\n    if (stickerPrice) {\n      setReviewingStickerComment(false);\n      setShowSelectors({ tab: showSelectors.tab || undefined, open: false });\n      setSelectedSticker(null);\n    }\n\n    if (onSlimInputClose) onSlimInputClose();\n  }\n\n  const getAmount = () => {\n    if (activeTab === TAB_USD) {\n      return tipAmount * 100; // pennies\n    }\n  };\n\n  async function handleSupportComment() {\n    if (!activeChannelClaimId) return;\n\n    if (!channelClaimId) {\n      doToast({\n        message: __('Unable to verify channel settings. Try refreshing the page.'),\n        isError: true,\n      });\n      return;\n    }\n\n    // do another creator settings fetch here to make sure that on submit, the setting did not change\n    const commentsAreMembersOnly = await isRestrictedToMembersOnly();\n    if (commentsAreMembersOnly === undefined) {\n      doToast({\n        message: __('Unable to send the comment.'),\n        subMessage: __('Try again later, or refresh the page.'),\n        isError: true,\n      });\n      return;\n    }\n\n    if (notAuthedToLiveChat && commentsAreMembersOnly) return handleJoinMembersOnlyChat();\n\n    // if comment post didn't work, but tip was already made, try again to create comment\n    if (commentFailure && tipAmount === successTip.tipAmount) {\n      handleCreateComment(successTip.txid);\n      return;\n    } else {\n      setSuccessTip({ txid: undefined, tipAmount: undefined });\n    }\n\n    // !! Beware of stale closure when editing the then-block, including doSubmitTip().\n    doFetchCreatorSettings(channelClaimId)\n      .then(() => {\n        // const lockedMinAmount = minAmount; // value during closure.\n        // const currentMinAmount = minAmountRef.current; // value from latest doFetchCreatorSettings().\n\n        const lockedMinUSDAmount = minUSDAmount; // value during closure.\n        const currentMinUSDAmount = minUSDAmountRef.current; // value from latest doFetchCreatorSettings().\n\n        if (activeTab === TAB_USD && lockedMinUSDAmount !== currentMinUSDAmount) {\n          doToast({\n            message: __('The creator just updated the minimum setting. Please revise or double-check your tip amount.'),\n            isError: true,\n          });\n          setReviewingSupportComment(false);\n          return;\n        }\n\n        // look, this is crazy complex. I just put the dry run inside doSendTip() for USDC instead of here.\n        if (activeTab === TAB_USD) {\n          doSubmitTip();\n          return;\n        }\n        // DryRun comment creation before submitting the tip\n        handleCreateComment(undefined, undefined, undefined, undefined, true).then((res) => {\n          if (res !== 'success') {\n            setSubmitting(false);\n            return;\n          }\n          doSubmitTip();\n        });\n      })\n      .catch(() => {\n        doToast({\n          message: __('Unable to send the comment.'),\n          subMessage: __('Try again later, or refresh the page.'),\n          isError: true,\n        });\n      });\n  }\n\n  function doSubmitTip() {\n    if (!claimId || !channelClaimId || !activeChannelName || !activeChannelClaimId || isSubmitting || !tipChannelName) {\n      return;\n    }\n\n    setSubmitting(true);\n\n    if (activeTab === TAB_USD) {\n      const arweaveTipAddress = recipientArweaveTipInfo && recipientArweaveTipInfo.address;\n      const transactionCurrency = activeTab === TAB_USD ? 'AR' : 'USD';\n      const tipParams: ArTipParams = {\n        tipAmountTwoPlaces: Math.round(tipAmount * 100) / 100,\n        tipChannelName,\n        channelClaimId,\n        recipientAddress: arweaveTipAddress,\n        currency: transactionCurrency,\n      };\n      const userParams: UserParams = { activeChannelName, activeChannelId: activeChannelClaimId };\n\n      const anonymous = false;\n      // dryrun comment\n      const dryRunCommentParams = {\n        comment: commentValue,\n        claim_id: claimId,\n        parent_id: parentId,\n        txid: undefined,\n        payment_tx_id: activeTab === TAB_USD ? 'dummy_txid' : undefined,\n        environment: stripeEnvironment,\n        sticker: false, // dummy value for lint\n        is_protected: Boolean(isLivestreamChatMembersOnly || areCommentsMembersOnly),\n        amount: getAmount(), // dummy amount\n        currency: transactionCurrency, // AR\n        dry_run: true,\n      };\n      doCommentCreate(uri, isLivestream, dryRunCommentParams)\n        .then((res: Object) => {\n          if (res && res.signature) {\n            // tell apis about a tip, get a token and amount\n            // make transaction\n            // notify transaction id\n            doArTip(tipParams, anonymous, userParams, claimId, stripeEnvironment)\n              .then(\n                (arTipResponse: {\n                  transactionId: string,\n                  currency: string,\n                  referenceToken: string,\n                  error?: string,\n                }) => {\n                  if (arTipResponse.error) {\n                    throw new Error(arTipResponse.error);\n                  }\n                  const { transactionId } = arTipResponse;\n                  const params = Object.assign({}, dryRunCommentParams);\n                  params.payment_tx_id = transactionId;\n                  params.dryrun = undefined;\n                  params.amount = tipAmount; // dollars\n\n                  // ...\n                  handleCreateComment(null, null, transactionId, stripeEnvironment);\n                  setCommentValue('');\n                  setReviewingSupportComment(false);\n                  setTipSelector(false);\n                  setCommentFailure(false);\n                  setSubmitting(false);\n                }\n              )\n              .catch((e) => {\n                // do the error handling\n                doToast({\n                  message: __('Tip failed to send.'),\n                  subMessage: e?.message || e,\n                  isError: true,\n                });\n                setSubmitting(false);\n              });\n          }\n        })\n        .catch((e) => {\n          doToast({\n            message: __('Comment failed to send.'),\n            subMessage: e?.message || e,\n            isError: true,\n          });\n          console.log('do commentcreate e', e);\n          setSubmitting(false);\n        });\n    } else {\n      const tipParams: TipParams = { tipAmount: Math.round(tipAmount * 100) / 100, tipChannelName, channelClaimId };\n      const userParams: UserParams = { activeChannelName, activeChannelId: activeChannelClaimId };\n\n      doSendCashTip(\n        tipParams,\n        false,\n        userParams,\n        claimId,\n        stripeEnvironment,\n        preferredCurrency,\n        (customerTipResponse) => {\n          const { payment_intent_id } = customerTipResponse;\n          handleCreateComment(null, payment_intent_id, null, stripeEnvironment);\n          setCommentValue('');\n          setReviewingSupportComment(false);\n          setTipSelector(false);\n          setCommentFailure(false);\n          setSubmitting(false);\n        }\n      );\n    }\n  }\n\n  /**\n   *\n   * @param {string} [txid] Optional transaction id generated by\n   * @param {string} [payment_intent_id] Optional payment_intent_id from Stripe payment\n   * @param {string} [payment_tx_id] Optional payment_tx_id from Arweave payment\n   * @param {string} [environment] Optional environment for Stripe (test|live)\n   * @param {boolean} [dryRun] Optional flag to simulate the comment creation\n   */\n  async function handleCreateComment(txid, payment_intent_id, payment_tx_id, environment, dryRun = false) {\n    if (isSubmitting || disableInput || !claimId) return;\n\n    // do another creator settings fetch here to make sure that on submit, the setting did not change\n    const commentsAreMembersOnly = await isRestrictedToMembersOnly();\n    if (commentsAreMembersOnly === undefined) {\n      doToast({\n        message: __('Unable to send the comment.'),\n        subMessage: __('Try again later, or refresh the page.'),\n        isError: true,\n      });\n      return;\n    }\n\n    if (notAuthedToLiveChat && commentsAreMembersOnly) return handleJoinMembersOnlyChat();\n\n    setSubmitting(true);\n\n    const stickerValue = selectedSticker && buildValidSticker(selectedSticker.name);\n\n    return doCommentCreate(uri, isLivestream, {\n      comment: stickerValue || commentValue,\n      claim_id: claimId,\n      parent_id: parentId,\n      txid,\n      payment_intent_id,\n      payment_tx_id,\n      environment,\n      sticker: !!stickerValue,\n      is_protected: Boolean(isLivestreamChatMembersOnly || areCommentsMembersOnly),\n      amount: !!txid || !!payment_intent_id || !!payment_tx_id ? getAmount() : undefined,\n      currency: 'AR',\n      dry_run: dryRun,\n    })\n      .then((res) => {\n        setSubmitting(false);\n        if (dryRun) {\n          return res.comment_id ? 'success' : 'fail';\n        }\n        if (setQuickReply) setQuickReply(res);\n\n        if (res && res.signature) {\n          if (!stickerValue) setCommentValue('');\n          setReviewingSupportComment(false);\n          setTipSelector(false);\n          setCommentFailure(false);\n\n          if (onDoneReplying) {\n            onDoneReplying();\n          }\n        }\n      })\n      .catch(() => {\n        setSubmitting(false);\n        if (dryRun) {\n          return;\n        }\n        setCommentFailure(true);\n\n        if (channelClaimId) {\n          // It could be that the creator added a minimum tip setting.\n          // Manually update for now until a websocket msg is available.\n          doFetchCreatorSettings(channelClaimId).catch(() => {});\n        }\n      });\n  }\n\n  function handleSubmitSticker() {\n    if (isReviewingSupportComment) {\n      handleSupportComment();\n    } else {\n      handleCreateComment();\n    }\n\n    setSelectedSticker(null);\n    setReviewingStickerComment(false);\n    setShowSelectors({ tab: showSelectors.tab || undefined, open: false });\n    setTipSelector(false);\n  }\n\n  // **************************************************************************\n  // Effects\n  // **************************************************************************\n\n  // Fetch channel constraints if not already.\n  React.useEffect(() => {\n    if (!channelSettings && channelClaimId) {\n      doFetchCreatorSettings(channelClaimId).catch(() => {});\n    }\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // change sticker selection\n  React.useEffect(() => {\n    if (isMobile && showSelectors.tab && slimInputButtonRef && slimInputButtonRef.current) {\n      slimInputButtonRef.current.click();\n    }\n  }, [isMobile, showSelectors.tab]);\n\n  // Notifications: Fetch top-level comments to identify if it has been deleted and can reply to it\n  React.useEffect(() => {\n    if (shouldFetchComment && doCommentById) {\n      doCommentById(parentId, false).then((result) => {\n        setDeletedComment(String(result).includes('Error'));\n      });\n    }\n  }, [doCommentById, shouldFetchComment, parentId]);\n\n  // Stickers: Get LBC-USD exchange rate if hasn't yet and selected a paid sticker\n  React.useEffect(() => {\n    if (stickerPrice && !exchangeRate) Lbryio.getExchangeRates().then(({ LBC_USD }) => setExchangeRate(LBC_USD));\n  }, [exchangeRate, stickerPrice]);\n\n  React.useEffect(() => {\n    if (recipientArweaveTipInfo === undefined) {\n      doTipAccountCheckForUri(uri);\n    }\n  }, [recipientArweaveTipInfo, doTipAccountCheckForUri, uri]);\n\n  // Handle keyboard shortcut comment creation\n  React.useEffect(() => {\n    function altEnterListener(e: SyntheticKeyboardEvent<*>) {\n      const inputRef = formFieldRef && formFieldRef.current && formFieldRef.current.input;\n\n      if (inputRef && inputRef.current === document.activeElement) {\n        // $FlowFixMe\n        const isTyping = Boolean(e.target.attributes['typing-term']);\n\n        if (((isLivestream && !isTyping) || e.ctrlKey || e.metaKey) && e.keyCode === KEYCODES.ENTER) {\n          e.preventDefault();\n          buttonRef.current.click();\n        }\n\n        if (isLivestream && isTyping && e.keyCode === KEYCODES.ENTER) {\n          inputRef.current.removeAttribute('typing-term');\n        }\n      }\n    }\n\n    window.addEventListener('keydown', altEnterListener);\n\n    // removes the listener so it doesn't cause problems elsewhere in the app\n    return () => {\n      window.removeEventListener('keydown', altEnterListener);\n    };\n  }, [isLivestream]);\n\n  // Determine my channels that have commented\n  React.useEffect(() => {\n    if (myCommentedChannelIds === undefined && claimId && myChannelClaimIds) {\n      doFetchMyCommentedChannels(claimId);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- @see TODO_NEED_VERIFICATION\n  }, [claimId, myCommentedChannelIds, myChannelClaimIds]);\n\n  React.useEffect(() => {\n    if (textInjection) {\n      setCommentValue(\n        commentValue === ''\n          ? commentValue + textInjection + ' '\n          : commentValue.substring(commentValue.length - 1) === ' '\n          ? commentValue + textInjection + ' '\n          : commentValue + ' ' + textInjection + ' '\n      );\n      // $FlowFixMe\n      return formFieldRef?.current?.input?.current?.focus();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- @see TODO_NEED_VERIFICATION\n  }, [textInjection]);\n\n  const notAuthedToLiveChat = Boolean(\n    (isLivestream ? isLivestreamChatMembersOnly : areCommentsMembersOnly) && !userHasMembersOnlyChatPerk && !claimIsMine\n  );\n\n  let commentLabelText = 'Say something about this...';\n  if (notAuthedToLiveChat) {\n    commentLabelText = 'The creator has made this chat members-only';\n  }\n\n  // **************************************************************************\n  // Render\n  // **************************************************************************\n\n  if (!isFetchingChannels && !hasChannels) {\n    return (\n      <div\n        role=\"button\"\n        className=\"comment-create__auth\"\n        onClick={(e) => {\n          e.preventDefault();\n          e.stopPropagation();\n\n          if (embed) {\n            window.open(`https://odysee.com/$/${PAGES.AUTH}?redirect=/$/${PAGES.LIVESTREAM}`);\n            return;\n          }\n\n          doOpenModal(MODALS.CONFIRM, {\n            title: __('Channel is required for commenting'),\n            subtitle: __(\"You'll need a channel to comment on this upload.\"),\n            labelOk: __('Continue to channel creation'),\n            onConfirm: (closeModal) => {\n              const pathPlusRedirect = `/$/${PAGES.CHANNEL_NEW}?redirect=${pathname}`;\n              if (isLivestream) {\n                window.open(pathPlusRedirect);\n              } else {\n                push(pathPlusRedirect);\n              }\n              closeModal();\n            },\n          });\n        }}\n      >\n        <FormField\n          type=\"textarea\"\n          name=\"comment__signup-prompt\"\n          placeholder={__(commentLabelText)}\n          disabled={isMobile}\n        />\n\n        {!isMobile && (\n          <div className=\"section__actions--no-margin\">\n            <Button disabled button=\"primary\" label={__('Send --[button to submit something]--')} requiresAuth />\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {notAuthedToLiveChat && (\n        <ErrorBubble\n          title={\n            isLivestream ? __('This chat is in members-only mode') : __('This comment section is in members-only mode')\n          }\n          className=\"comment-restriction\"\n          subtitle={__(\n            'To participate, consider buying a membership with the members-only chat perk from this creator!'\n          )}\n          action={<Button button=\"primary\" label={__('Join')} onClick={handleJoinMembersOnlyChat} />}\n        />\n      )}\n\n      <Form\n        onSubmit={() => {}}\n        className={classnames('comment-create', {\n          'comment-create--reply': isReply,\n          'comment-create--nestedReply': isNested,\n          'comment-create--bottom': bottom,\n        })}\n      >\n        {isReviewingSupportComment ? (\n          activeChannelUrl &&\n          activeTab && (\n            <>\n              <TipReviewBox\n                activeChannelUrl={activeChannelUrl}\n                tipAmount={tipAmount}\n                activeTab={activeTab}\n                message={commentValue}\n                isReviewingStickerComment={isReviewingStickerComment}\n                stickerPreviewComponent={selectedSticker && <StickerReviewBox {...stickerReviewProps} />}\n              />\n              {arweaveTippingError && <div className={'error'}>{arweaveTippingError}</div>}\n            </>\n          )\n        ) : selectedSticker ? (\n          activeChannelUrl && <StickerReviewBox {...stickerReviewProps} />\n        ) : (\n          <>\n            <FormField\n              autoFocus={isReply}\n              charCount={charCount}\n              className={classnames('', {\n                create__reply: isReply,\n                create__comment: !isReply,\n                disabled_chat_comments: notAuthedToLiveChat,\n              })}\n              disabled={isFetchingChannels || disableInput}\n              isLivestream={isLivestream}\n              label={<FormChannelSelector isReply={Boolean(isReply)} isLivestream={Boolean(isLivestream)} />}\n              noticeLabel={\n                (isMobile || isLivestream) && (\n                  <HelpText\n                    minAmount={minAmount}\n                    minTip={minTip}\n                    minSuper={minSuper}\n                    deletedComment={deletedComment}\n                    minUSDAmount={minUSDAmount}\n                    minUSDSuper={minUSDSuper}\n                    minUSDTip={minUSDTip}\n                  />\n                )\n              }\n              name={isReply ? 'create__reply' : 'create__comment'}\n              onChange={(e) => setCommentValue(SIMPLE_SITE || !advancedEditor || isReply ? e.target.value : e)}\n              handleTip={() => handleSelectTipComment(TAB_USD)}\n              handleSubmit={handleCreateComment}\n              slimInput={isMobile && uri} // \"uri\": make sure it's on a file page\n              slimInputButtonRef={slimInputButtonRef}\n              onSlimInputClose={onSlimInputClose}\n              commentSelectorsProps={commentSelectorsProps}\n              submitButtonRef={buttonRef}\n              setShowSelectors={setShowSelectors}\n              showSelectors={showSelectors}\n              tipModalOpen={tipModalOpen}\n              placeholder={__(commentLabelText)}\n              quickActionHandler={!SIMPLE_SITE ? () => setAdvancedEditor(!advancedEditor) : undefined}\n              quickActionLabel={\n                !SIMPLE_SITE && (isReply ? undefined : advancedEditor ? __('Simple Editor') : __('Advanced Editor'))\n              }\n              ref={formFieldRef}\n              textAreaMaxLength={isLivestream ? FF_MAX_CHARS_IN_LIVESTREAM_COMMENT : FF_MAX_CHARS_IN_COMMENT}\n              type={!SIMPLE_SITE && advancedEditor && !isReply ? 'markdown' : 'textarea'}\n              value={commentValue}\n              uri={uri}\n            />\n            {!isMobile && commentSelectorElem}\n          </>\n        )}\n\n        {(!isMobile || isReviewingStickerComment) &&\n          (tipSelectorOpen || (isReviewingStickerComment && stickerPrice)) && (\n            <WalletTipAmountSelector\n              activeTab={TAB_USD}\n              amount={tipAmount}\n              uri={uri}\n              // convertedAmount={convertedAmount}\n              customTipAmount={stickerPrice}\n              exchangeRate={exchangeRate}\n              fiatConversion={selectedSticker && !!selectedSticker.price}\n              onChange={(amount) => setTipAmount(amount)}\n              setDisableSubmitButton={setDisableReviewButton}\n              setTipError={setTipError}\n              tipError={tipError}\n              isComment\n            />\n          )}\n\n        {(!isMobile || isReviewingStickerComment || isReviewingSupportComment) && (\n          <div className=\"section__actions\">\n            {/* Submit Button */}\n            {isReviewingSupportComment && (\n              <>\n                {activeTab === TAB_USD && (\n                  <Button\n                    {...submitButtonProps}\n                    autoFocus\n                    disabled={disabled || !minAmountMet}\n                    label={\n                      isSubmitting\n                        ? __('Sending...')\n                        : commentFailure && tipAmount === successTip.tipAmount\n                        ? __('Re-submit')\n                        : __('Send')\n                    }\n                    onClick={handleSupportComment}\n                  />\n                )}\n              </>\n            )}\n            {!isReviewingSupportComment && (\n              <>\n                {tipSelectorOpen ? (\n                  <Button\n                    {...submitButtonProps}\n                    disabled={disabled || tipSelectorError || !minAmountMet || !canReceiveTips}\n                    icon={ICONS.USD}\n                    label={__('Review')}\n                    onClick={() => {\n                      setReviewingSupportComment(true);\n                      if (onSlimInputClose) onSlimInputClose();\n                    }}\n                  />\n                ) : (\n                  <>\n                    {(!isMobile || selectedSticker) && (!minUSDTip || claimIsMine) && (\n                      <Button\n                        {...submitButtonProps}\n                        ref={buttonRef}\n                        disabled={disabled}\n                        label={\n                          isLivestream\n                            ? isSubmitting\n                              ? __('Sending...')\n                              : __('Send --[button to send chat message]--')\n                            : isReply\n                            ? isSubmitting\n                              ? __('Replying...')\n                              : __('Reply')\n                            : isSubmitting\n                            ? __('Commenting...')\n                            : __('Comment --[button to submit something]--')\n                        }\n                        onClick={() =>\n                          selectedSticker\n                            ? handleSubmitSticker()\n                            : handleCreateComment(undefined, undefined, undefined, undefined)\n                        }\n                      />\n                    )}\n                  </>\n                )}\n              </>\n            )}\n\n            {(!isMobile || isReviewingStickerComment) && (\n              <>\n                <StickerActionButton\n                  {...actionButtonProps}\n                  isReviewingStickerComment={isReviewingStickerComment}\n                  icon={ICONS.STICKER}\n                  onClick={handleStickerComment}\n                  onChange={() => {}}\n                  disabled={notAuthedToLiveChat}\n                />\n\n                {hasPremiumPlus && !isLivestream && (\n                  <Button\n                    button=\"alt\"\n                    icon={ICONS.IMAGE}\n                    title={__('Upload Image')}\n                    onClick={handleImageUpload}\n                    onChange={() => {}}\n                  />\n                )}\n\n                {!supportDisabled && !claimIsMine && (\n                  <>\n                    <TipActionButton\n                      {...tipButtonProps}\n                      name={__('AR')}\n                      icon={ICONS.USD}\n                      tab={TAB_USD}\n                      disabled={tipButtonProps.disabled || activeArStatus !== 'connected'}\n                    />\n                  </>\n                )}\n              </>\n            )}\n\n            {tipSelectorOpen || isReviewingSupportComment ? (\n              <Button {...cancelButtonProps} disabled={isSubmitting} onClick={handleCancelSupport} />\n            ) : isReviewingStickerComment ? (\n              <Button {...cancelButtonProps} onClick={handleCancelSticker} />\n            ) : (\n              onCancelReplying && <Button {...cancelButtonProps} onClick={onCancelReplying} />\n            )}\n            {!isLivestream && (\n              <HelpText\n                deletedComment={deletedComment}\n                minAmount={minAmount}\n                minTip={minTip}\n                minSuper={minSuper}\n                minUSDAmount={minUSDAmount}\n                minUSDSuper={minUSDSuper}\n                minUSDTip={minUSDTip}\n              />\n            )}\n          </div>\n        )}\n        <div className=\"chat-resize\">\n          <div />\n          <div />\n          <div />\n        </div>\n      </Form>\n    </>\n  );\n}\n","import { connect } from 'react-redux';\nimport { hasLegacyOdyseePremium } from 'redux/selectors/user';\nimport {\n  selectClaimForUri,\n  selectClaimIsMine,\n  selectHasChannels,\n  selectFetchingMyChannels,\n  makeSelectTagInClaimOrChannelForUri,\n  selectMyChannelClaimIds,\n  selectedRestrictedCommentsChatTagForUri,\n} from 'redux/selectors/claims';\nimport { DISABLE_SUPPORT_TAG } from 'constants/tags';\nimport {\n  doCommentCreate,\n  doFetchCreatorSettings,\n  doCommentById,\n  doFetchMyCommentedChannels,\n} from 'redux/actions/comments';\nimport { doSendTip, doSendCashTip } from 'redux/actions/wallet';\nimport { doToast } from 'redux/actions/notifications';\nimport { selectActiveChannelClaim } from 'redux/selectors/app';\nimport {\n  selectMyCommentedChannelIdsForId,\n  selectCommentsDisabledSettingForChannelId,\n  selectLivestreamChatMembersOnlyForChannelId,\n  selectMembersOnlyCommentsForChannelId,\n  selectFetchingCreatorSettings,\n} from 'redux/selectors/comments';\nimport { getChannelIdFromClaim } from 'util/claim';\nimport { doOpenModal } from 'redux/actions/app';\nimport { selectPreferredCurrency } from 'redux/selectors/settings';\nimport { selectArweaveTipDataForId } from 'redux/selectors/stripe';\nimport { doTipAccountCheckForUri } from 'redux/actions/stripe';\nimport { selectUserIsMemberOfMembersOnlyChatForCreatorId } from 'redux/selectors/memberships';\nimport { doArTip } from 'redux/actions/arwallet';\nimport { CommentCreate } from './view';\nimport { selectArweaveTippingErrorForId } from 'redux/selectors/arwallet';\n\nconst select = (state, props) => {\n  const { uri } = props;\n\n  const claim = selectClaimForUri(state, uri);\n  const { claim_id: claimId, name, signing_channel: channel } = claim || {};\n\n  // setup variables for tip API\n  const channelClaimId = getChannelIdFromClaim(claim);\n  const tipChannelName = channel ? channel.name : name;\n\n  const activeChannelClaim = selectActiveChannelClaim(state);\n  const {\n    claim_id: activeChannelClaimId,\n    name: activeChannelName,\n    canonical_url: activeChannelUrl,\n  } = activeChannelClaim || {};\n\n  const tipData = selectArweaveTipDataForId(state, channelClaimId);\n  const canReceiveTips = tipData?.status === 'active' && tipData?.default;\n\n  return {\n    activeChannelClaimId,\n    activeChannelName,\n    activeChannelUrl,\n    channelClaimId,\n    chatCommentsRestrictedToChannelMembers: Boolean(selectedRestrictedCommentsChatTagForUri(state, uri)),\n    claimId,\n    claimIsMine: selectClaimIsMine(state, claim),\n    hasChannels: selectHasChannels(state),\n    isFetchingChannels: selectFetchingMyChannels(state),\n    isFetchingCreatorSettings: selectFetchingCreatorSettings(state),\n    myChannelClaimIds: selectMyChannelClaimIds(state),\n    myCommentedChannelIds: selectMyCommentedChannelIdsForId(state, claim?.claim_id),\n    preferredCurrency: selectPreferredCurrency(state),\n    channelSettings: state.comments.settingsByChannelId[channelClaimId],\n    supportDisabled: makeSelectTagInClaimOrChannelForUri(uri, DISABLE_SUPPORT_TAG)(state),\n    tipChannelName,\n    userHasMembersOnlyChatPerk: selectUserIsMemberOfMembersOnlyChatForCreatorId(state, channelClaimId),\n    commentSettingDisabled: selectCommentsDisabledSettingForChannelId(state, channelClaimId),\n    isLivestreamChatMembersOnly: Boolean(selectLivestreamChatMembersOnlyForChannelId(state, channelClaimId)),\n    areCommentsMembersOnly: Boolean(selectMembersOnlyCommentsForChannelId(state, channelClaimId)),\n    hasPremiumPlus: hasLegacyOdyseePremium(state),\n    recipientArweaveTipInfo: selectArweaveTipDataForId(state, channelClaimId),\n    arweaveTippingError: selectArweaveTippingErrorForId(state, channelClaimId),\n    canReceiveTips,\n  };\n};\n\nconst perform = {\n  doCommentCreate,\n  doFetchCreatorSettings,\n  doFetchMyCommentedChannels,\n  doToast,\n  doCommentById,\n  doSendCashTip,\n  doSendTip,\n  doOpenModal,\n  doTipAccountCheckForUri,\n  doArTip,\n};\n\nexport default connect(select, perform)(CommentCreate);\n","// @flow\n\nimport { Menu, MenuButton, MenuList, MenuItem } from '@reach/menu-button';\n\nimport * as ICONS from 'constants/icons';\n\nimport Icon from 'component/common/icon';\nimport React from 'react';\n\ntype Props = {\n  // -- redux --\n  claimId: ?string,\n  channelId: ?string,\n  channelName: ?string,\n  claimIsMine: boolean,\n  channelHasMembershipTiers: boolean,\n  areCommentsMembersOnly?: boolean,\n  creatorMembershipsFetched: boolean,\n  doToggleMembersOnlyCommentsSettingForClaimId: (claimId: ClaimId) => Promise<any>,\n  doMembershipList: (params: MembershipListParams) => Promise<CreatorMemberships>,\n  doToast: ({ message: string }) => void,\n};\n\nconst CommentListMenu = (props: Props) => {\n  const {\n    // -- redux --\n    claimId,\n    channelId,\n    channelName,\n    claimIsMine,\n    channelHasMembershipTiers,\n    areCommentsMembersOnly,\n    creatorMembershipsFetched,\n    doToggleMembersOnlyCommentsSettingForClaimId,\n    doMembershipList,\n    doToast,\n  } = props;\n\n  function updateMembersOnlyComments() {\n    if (claimId) {\n      doToggleMembersOnlyCommentsSettingForClaimId(claimId).then(() =>\n        doToast({\n          message: __(\n            areCommentsMembersOnly\n              ? 'Members-only comments are now disabled.'\n              : 'Members-only comments are now enabled.'\n          ),\n        })\n      );\n    }\n  }\n\n  React.useEffect(() => {\n    if (!creatorMembershipsFetched && channelName && channelId) {\n      doMembershipList({ channel_claim_id: channelId });\n    }\n  }, [channelId, channelName, creatorMembershipsFetched, doMembershipList]);\n\n  if (channelHasMembershipTiers && claimIsMine) {\n    return (\n      <Menu>\n        <MenuButton className=\"button button--alt menu__button\">\n          <Icon size={18} icon={ICONS.SETTINGS} />\n        </MenuButton>\n\n        <MenuList className=\"menu__list\">\n          <MenuItem className=\"comment__menu-option\" onSelect={() => updateMembersOnlyComments()}>\n            <span className=\"menu__link\">\n              <Icon aria-hidden icon={ICONS.MEMBERSHIP} />\n              {__(areCommentsMembersOnly ? 'Disable members-only comments' : 'Enable members-only comments')}\n            </span>\n          </MenuItem>\n        </MenuList>\n      </Menu>\n    );\n  }\n\n  return null;\n};\n\nexport default CommentListMenu;\n","import { connect } from 'react-redux';\nimport { selectClaimForUri, selectClaimIsMineForUri } from 'redux/selectors/claims';\nimport { selectMembersOnlyCommentsForChannelId } from 'redux/selectors/comments';\nimport {\n  selectChannelHasMembershipTiersForId,\n  selectCreatorMembershipsFetchedByUri,\n} from 'redux/selectors/memberships';\nimport { getChannelFromClaim } from 'util/claim';\n\nimport { doToggleMembersOnlyCommentsSettingForClaimId } from 'redux/actions/comments';\nimport { doMembershipList } from 'redux/actions/memberships';\nimport { doToast } from 'redux/actions/notifications';\n\nimport CommentListMenu from './view';\n\nconst select = (state, props) => {\n  const { uri } = props;\n\n  const claim = selectClaimForUri(state, uri);\n  const claimId = claim && claim.claim_id;\n  const { claim_id: channelId, name: channelName } = getChannelFromClaim(claim) || {};\n\n  return {\n    claimId,\n    channelId,\n    channelName,\n    claimIsMine: selectClaimIsMineForUri(state, uri),\n    channelHasMembershipTiers: channelId && selectChannelHasMembershipTiersForId(state, channelId),\n    areCommentsMembersOnly: channelId && selectMembersOnlyCommentsForChannelId(state, channelId),\n    creatorMembershipsFetched: selectCreatorMembershipsFetchedByUri(state, uri),\n  };\n};\n\nconst perform = {\n  doToggleMembersOnlyCommentsSettingForClaimId,\n  doMembershipList,\n  doToast,\n};\n\nexport default connect(select, perform)(CommentListMenu);\n","// @flow\nimport {\n  COMMENT_PAGE_SIZE_TOP_LEVEL,\n  SORT_BY,\n  LINKED_COMMENT_QUERY_PARAM,\n  THREAD_COMMENT_QUERY_PARAM,\n} from 'constants/comment';\nimport { ENABLE_COMMENT_REACTIONS } from 'config';\nimport { useIsMobile, useIsSmallScreen } from 'effects/use-screensize';\nimport { getCommentsListTitle } from 'util/comments';\nimport * as ICONS from 'constants/icons';\nimport * as REACTION_TYPES from 'constants/reactions';\nimport Button from 'component/button';\nimport Card from 'component/common/card';\nimport classnames from 'classnames';\nimport CommentView from 'component/comment';\nimport debounce from 'util/debounce';\nimport Empty from 'component/common/empty';\nimport React, { useEffect } from 'react';\nimport Spinner from 'component/spinner';\nimport usePersistedState from 'effects/use-persisted-state';\nimport { useHistory } from 'react-router-dom';\nimport CommentListMenu from './internal/commentListMenu';\nimport { lazyImport } from 'util/lazyImport';\n\nconst DEBOUNCE_SCROLL_HANDLER_MS = 200;\nconst CommentCreate = lazyImport(() => import('component/commentCreate' /* webpackChunkName: \"comments\" */));\n\nfunction scaleToDevicePixelRatio(value) {\n  const devicePixelRatio = window.devicePixelRatio || 1.0;\n  if (devicePixelRatio < 1.0) {\n    return Math.ceil(value / devicePixelRatio);\n  }\n  return Math.ceil(value * devicePixelRatio);\n}\n\n// ****************************************************************************\n// ****************************************************************************\n\nexport type Props = {|\n  uri: string,\n  linkedCommentId?: string,\n  commentsAreExpanded?: boolean,\n  threadCommentId: ?string,\n  notInDrawer?: boolean,\n|};\n\ntype StateProps = {|\n  topLevelComments: Array<Comment>,\n  pinnedComments: Array<Comment>,\n  allCommentIds: Array<CommentId>,\n  threadComment: ?Comment, // comment object for 'threadCommentId'\n  totalComments: number,\n  topLevelTotalPages: number,\n  threadCommentAncestors: ?Array<string>,\n  linkedCommentAncestors: ?Array<string>,\n  myReactsByCommentId: ?{ [string]: Array<string> }, // \"CommentId:MyChannelId\" -> reaction array (note the ID concatenation)\n  othersReactsById: ?{ [string]: { [REACTION_TYPES.LIKE | REACTION_TYPES.DISLIKE]: number } },\n  commentsEnabledSetting: ?boolean,\n  claimId: ?string,\n  channelId: ?string,\n  claimIsMine: ?boolean,\n  activeChannelId: ?string,\n  isFetchingComments: boolean,\n  isFetchingTopLevelComments: boolean,\n  isFetchingReacts: boolean,\n  fetchingChannels: boolean,\n  chatCommentsRestrictedToChannelMembers: boolean,\n  isAChannelMember: boolean,\n  scheduledState: ClaimScheduledState,\n|};\n\ntype DispatchProps = {|\n  fetchTopLevelComments: (\n    uri: string,\n    parentId: ?string,\n    page: number,\n    pageSize: number,\n    sortBy: number,\n    isLivestream?: boolean\n  ) => void,\n  fetchComment: (CommentId) => void,\n  fetchReacts: (Array<CommentId>) => Promise<any>,\n  resetComments: (ClaimId) => void,\n  doFetchOdyseeMembershipForChannelIds: (claimIds: ClaimIds) => void,\n  doFetchChannelMembershipsForChannelIds: (channelId: string, claimIds: Array<string>) => void,\n  doPopOutInlinePlayer: (param: { source: string }) => void,\n|};\n\n// ****************************************************************************\n// CommentList\n// ****************************************************************************\n\nexport default function CommentList(props: Props & StateProps & DispatchProps) {\n  const {\n    allCommentIds,\n    uri,\n    pinnedComments,\n    topLevelComments,\n    topLevelTotalPages,\n    claimId,\n    channelId,\n    claimIsMine,\n    isFetchingComments,\n    isFetchingTopLevelComments,\n    isFetchingReacts,\n    linkedCommentId,\n    totalComments,\n    fetchingChannels,\n    myReactsByCommentId,\n    othersReactsById,\n    activeChannelId,\n    commentsEnabledSetting,\n    commentsAreExpanded,\n    threadCommentId,\n    threadComment,\n    notInDrawer,\n    threadCommentAncestors,\n    linkedCommentAncestors,\n    fetchTopLevelComments,\n    fetchComment,\n    fetchReacts,\n    resetComments,\n    doFetchOdyseeMembershipForChannelIds,\n    doPopOutInlinePlayer,\n    doFetchChannelMembershipsForChannelIds,\n    chatCommentsRestrictedToChannelMembers,\n    isAChannelMember,\n    scheduledState,\n  } = props;\n\n  const threadRedirect = React.useRef(false);\n\n  const {\n    push,\n    location: { pathname, search },\n  } = useHistory();\n\n  const isMobile = useIsMobile();\n  const isSmallScreen = useIsSmallScreen();\n\n  const currentFetchedPage = Math.ceil(topLevelComments.length / COMMENT_PAGE_SIZE_TOP_LEVEL);\n  const spinnerRef = React.useRef();\n  const commentListRef = React.useRef();\n  const DEFAULT_SORT = ENABLE_COMMENT_REACTIONS ? SORT_BY.POPULARITY : SORT_BY.NEWEST;\n  const [sort, setSort] = usePersistedState('comment-sort-by', DEFAULT_SORT);\n  const [page, setPage] = React.useState(currentFetchedPage > 0 ? currentFetchedPage : 1);\n  const [didInitialPageFetch, setInitialPageFetch] = React.useState(false);\n  const hasDefaultExpansion = commentsAreExpanded || !isSmallScreen || isMobile;\n  const [expandedComments, setExpandedComments] = React.useState(hasDefaultExpansion);\n  const [debouncedUri, setDebouncedUri] = React.useState();\n\n  const [uiFilteredComments, setUiFilteredComments] = React.useState([]);\n  const updateUiFilteredComments = React.useCallback((commentIds) => {\n    setUiFilteredComments((prevCommentIds) => {\n      const newCommentIds = commentIds.filter((id) => !prevCommentIds.includes(id));\n      return newCommentIds.length > 0 ? [...prevCommentIds, ...newCommentIds] : prevCommentIds;\n    });\n  }, []);\n\n  const totalUnfilteredComments = totalComments > 0 ? totalComments - uiFilteredComments.length : totalComments;\n\n  const totalFetchedComments = allCommentIds ? allCommentIds.length : 0;\n  const moreBelow = page < topLevelTotalPages;\n  const title = getCommentsListTitle(totalUnfilteredComments);\n  const threadDepthLevel = isMobile ? 3 : 10;\n  let threadCommentParent;\n  if (threadCommentAncestors) {\n    threadCommentAncestors.some((ancestor, index) => {\n      if (index >= threadDepthLevel - 1) return true;\n\n      threadCommentParent = ancestor;\n    });\n  }\n  const threadTopLevelComment = threadCommentAncestors && threadCommentAncestors[threadCommentAncestors.length - 1];\n\n  // Display comments immediately if not fetching reactions\n  // If not, wait to show comments until reactions are fetched\n  const [readyToDisplayComments, setReadyToDisplayComments] = React.useState(\n    Boolean(othersReactsById) || !ENABLE_COMMENT_REACTIONS\n  );\n\n  // get commenter claim ids for checking premium status\n  const commenterClaimIds = React.useMemo(() => {\n    return topLevelComments.map((comment) => comment.channel_id);\n  }, [topLevelComments]);\n\n  React.useEffect(() => {\n    if (commenterClaimIds.length > 0 && channelId) {\n      doFetchOdyseeMembershipForChannelIds(commenterClaimIds);\n      doFetchChannelMembershipsForChannelIds(channelId, commenterClaimIds);\n    }\n    // todo: investigate why topLevelComments triggers a re-render even though the comments are the same\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- keep commenterClaimIds.length instead\n  }, [\n    channelId,\n    commenterClaimIds.length,\n    doFetchChannelMembershipsForChannelIds,\n    doFetchOdyseeMembershipForChannelIds,\n  ]);\n\n  const handleReset = React.useCallback(() => {\n    if (claimId) resetComments(claimId);\n    setPage(1);\n  }, [claimId, resetComments]);\n\n  function refreshComments() {\n    // Invalidate existing comments\n    setPage(0);\n    doPopOutInlinePlayer({ source: 'comment' });\n  }\n\n  function changeSort(newSort) {\n    if (sort !== newSort) {\n      setSort(newSort);\n      refreshComments();\n      doPopOutInlinePlayer({ source: 'comment' });\n    }\n  }\n\n  // If a linked comment is deep within a thread, redirect to it's own thread page\n  // based on the set depthLevel (mobile/desktop)\n  React.useEffect(() => {\n    if (\n      !threadCommentId &&\n      linkedCommentId &&\n      linkedCommentAncestors &&\n      linkedCommentAncestors.length > threadDepthLevel - 1 &&\n      !threadRedirect.current\n    ) {\n      const urlParams = new URLSearchParams(search);\n      urlParams.set(THREAD_COMMENT_QUERY_PARAM, linkedCommentId);\n\n      push({ pathname, search: urlParams.toString() });\n      // to do it only once\n      threadRedirect.current = true;\n    }\n  }, [linkedCommentAncestors, linkedCommentId, pathname, push, search, threadCommentId, threadDepthLevel]);\n\n  // TODO: still have to change this to use the new check\n  const notAuthedToChat = chatCommentsRestrictedToChannelMembers && !isAChannelMember && !claimIsMine;\n\n  // set new page on scroll debounce and avoid setting the page after navigated uris\n  useEffect(() => {\n    if (debouncedUri && debouncedUri === uri) {\n      setPage(page + 1);\n      setDebouncedUri(undefined);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- Only for comparing uri with debounced uri\n  }, [debouncedUri, uri]);\n\n  // Force comments reset\n  useEffect(() => {\n    if (page === 0) {\n      handleReset();\n    }\n  }, [handleReset, page]);\n\n  // Set page back to 1 on every claim switch\n  useEffect(() => {\n    return () => setPage(1);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [uri]);\n\n  // When navigating to a new claim, the page will be 1 due to the above\n  // and if there was already fetched top level comments, the fetched page will be higher\n  // so set the current page as the fetched page to start fetching new pages from there\n  useEffect(() => {\n    if (page < currentFetchedPage) setPage(currentFetchedPage > 0 ? currentFetchedPage : 1);\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- Only on uri change\n  }, [uri]);\n\n  // Fetch top-level comments\n  useEffect(() => {\n    const isInitialFetch = currentFetchedPage === 0;\n    const isNewPage = page !== 1 && page !== currentFetchedPage;\n    // only one or the other should be true, if both are true it means\n    // it will fetch the wrong page initially. needs Number so it's 0 or 1\n    const hasRightFetchPage = Number(isInitialFetch) ^ Number(isNewPage);\n\n    if (page !== 0 && hasRightFetchPage) {\n      if (page === 1) {\n        if (threadCommentId) {\n          fetchComment(threadCommentId);\n        }\n        if (linkedCommentId) {\n          fetchComment(linkedCommentId);\n        }\n      }\n\n      fetchTopLevelComments(uri, undefined, page, COMMENT_PAGE_SIZE_TOP_LEVEL, sort, false);\n    }\n  }, [currentFetchedPage, fetchComment, fetchTopLevelComments, linkedCommentId, page, sort, threadCommentId, uri]);\n\n  React.useEffect(() => {\n    if (threadCommentId) {\n      refreshComments();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- @see TODO_NEED_VERIFICATION\n  }, [threadCommentId]);\n\n  // Fetch reacts\n  useEffect(() => {\n    if (totalFetchedComments > 0 && ENABLE_COMMENT_REACTIONS && !fetchingChannels && !isFetchingReacts) {\n      let idsForReactionFetch;\n\n      if (!othersReactsById || !myReactsByCommentId) {\n        idsForReactionFetch = allCommentIds;\n      } else {\n        idsForReactionFetch = allCommentIds.filter((commentId) => {\n          const key = activeChannelId ? `${commentId}:${activeChannelId}` : commentId;\n          return !othersReactsById[key] || (activeChannelId && !myReactsByCommentId[key]);\n        });\n      }\n\n      if (idsForReactionFetch.length !== 0) {\n        fetchReacts(idsForReactionFetch)\n          .then(() => {\n            setReadyToDisplayComments(true);\n          })\n          .catch(() => setReadyToDisplayComments(true));\n      }\n    }\n  }, [\n    activeChannelId,\n    allCommentIds,\n    fetchReacts,\n    fetchingChannels,\n    isFetchingReacts,\n    myReactsByCommentId,\n    othersReactsById,\n    totalFetchedComments,\n  ]);\n\n  // Scroll to linked-comment\n  useEffect(() => {\n    if (linkedCommentId || threadCommentId) {\n      window.pendingLinkedCommentScroll = true;\n    } else {\n      delete window.pendingLinkedCommentScroll;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Infinite scroll\n  useEffect(() => {\n    if (topLevelComments.length === 0) return;\n\n    function shouldFetchNextPage(page, topLevelTotalPages, yPrefetchPx = 1000) {\n      if (!spinnerRef || !spinnerRef.current) return false;\n\n      const rect = spinnerRef.current.getBoundingClientRect(); // $FlowFixMe\n      const windowH = window.innerHeight || document.documentElement.clientHeight; // $FlowFixMe\n      const windowW = window.innerWidth || document.documentElement.clientWidth;\n\n      const isApproachingViewport = yPrefetchPx !== 0 && rect.top < windowH + scaleToDevicePixelRatio(yPrefetchPx);\n\n      const isInViewport =\n        rect.width > 0 &&\n        rect.height > 0 &&\n        rect.bottom >= 0 &&\n        rect.right >= 0 &&\n        rect.top <= windowH &&\n        rect.left <= windowW;\n\n      return (isInViewport || isApproachingViewport) && page < topLevelTotalPages;\n    }\n\n    const handleCommentScroll = debounce(() => {\n      if (shouldFetchNextPage(page, topLevelTotalPages)) {\n        setDebouncedUri(uri);\n        setInitialPageFetch(true);\n      }\n    }, DEBOUNCE_SCROLL_HANDLER_MS);\n\n    if (!didInitialPageFetch) {\n      handleCommentScroll();\n      setInitialPageFetch(true);\n    }\n\n    if (hasDefaultExpansion && !isFetchingComments && readyToDisplayComments && moreBelow) {\n      const commentsInDrawer = Boolean(document.querySelector('.MuiDrawer-root .card--enable-overflow'));\n      const scrollingElement = commentsInDrawer ? document.querySelector('.card--enable-overflow') : window;\n\n      if (scrollingElement) {\n        scrollingElement.addEventListener('scroll', handleCommentScroll);\n\n        return () => scrollingElement.removeEventListener('scroll', handleCommentScroll);\n      }\n    }\n  }, [\n    topLevelComments,\n    hasDefaultExpansion,\n    didInitialPageFetch,\n    isFetchingComments,\n    isMobile,\n    moreBelow,\n    page,\n    readyToDisplayComments,\n    topLevelTotalPages,\n    uri,\n  ]);\n\n  const commentProps = {\n    isTopLevel: true,\n    uri,\n    linkedCommentId,\n    threadCommentId,\n    threadDepthLevel,\n  };\n\n  const actionButtonsProps = {\n    uri,\n    totalUnfilteredComments,\n    sort,\n    changeSort,\n    handleRefresh: refreshComments,\n  };\n\n  if (scheduledState === 'scheduled') {\n    // Not ready yet, so hide it.\n    return null;\n  }\n\n  return (\n    <Card\n      className=\"card--enable-overflow comment__list\"\n      title={(!isMobile || notInDrawer) && title}\n      titleActions={<CommentActionButtons {...actionButtonsProps} />}\n      actions={\n        <>\n          {isMobile && !notInDrawer && <CommentActionButtons {...actionButtonsProps} />}\n\n          <CommentCreate uri={uri} />\n\n          {threadCommentId && threadComment && (\n            <span className=\"comment__actions comment__thread-links\">\n              <ThreadLinkButton\n                label={__('View all comments')}\n                threadCommentParent={threadTopLevelComment || threadCommentId}\n                threadCommentId={threadCommentId}\n                isViewAll\n              />\n\n              {threadCommentParent && (\n                <ThreadLinkButton\n                  label={__('Show parent comments')}\n                  threadCommentParent={threadCommentParent}\n                  threadCommentId={threadCommentId}\n                />\n              )}\n            </span>\n          )}\n\n          {commentsEnabledSetting && !isFetchingComments && !totalUnfilteredComments && !threadCommentId && (\n            <Empty padded text={__('That was pretty deep. What do you think?')} />\n          )}\n\n          <ul\n            ref={commentListRef}\n            className={classnames('comments', {\n              'comments--contracted': isSmallScreen && !expandedComments && totalUnfilteredComments > 1,\n            })}\n          >\n            {readyToDisplayComments && (\n              <>\n                {threadComment && (\n                  <CommentView\n                    key={threadComment.comment_id}\n                    comment={threadComment}\n                    disabled={notAuthedToChat}\n                    updateUiFilteredComments={updateUiFilteredComments}\n                    {...commentProps}\n                  />\n                )}\n                {pinnedComments &&\n                  pinnedComments.map((c) => {\n                    if (threadComment && threadCommentAncestors && threadCommentAncestors.includes(c.comment_id)) {\n                      // Skip if part of the linked comment thread - thread is shown at the top\n                      return;\n                    }\n                    return (\n                      <CommentView\n                        key={c.comment_id}\n                        comment={c}\n                        disabled={notAuthedToChat}\n                        updateUiFilteredComments={updateUiFilteredComments}\n                        {...commentProps}\n                      />\n                    );\n                  })}\n\n                {topLevelComments.map((c) => {\n                  if (threadComment && threadCommentAncestors && threadCommentAncestors.includes(c.comment_id)) {\n                    // Skip if part of the linked comment thread - thread is shown at the top\n                    return;\n                  }\n                  return (\n                    <CommentView\n                      key={c.comment_id}\n                      comment={c}\n                      disabled={notAuthedToChat}\n                      updateUiFilteredComments={updateUiFilteredComments}\n                      {...commentProps}\n                    />\n                  );\n                })}\n              </>\n            )}\n          </ul>\n\n          {!hasDefaultExpansion && (\n            <div className=\"card__bottom-actions card__bottom-actions--comments\">\n              {(!expandedComments || moreBelow) && totalUnfilteredComments > 1 && (\n                <Button\n                  button=\"link\"\n                  title={!expandedComments ? __('Expand') : __('More')}\n                  label={!expandedComments ? __('Expand') : __('More')}\n                  onClick={() => (!expandedComments ? setExpandedComments(true) : setPage(page + 1))}\n                />\n              )}\n              {expandedComments && totalUnfilteredComments > 1 && (\n                <Button\n                  button=\"link\"\n                  title={__('Collapse')}\n                  label={__('Collapse')}\n                  onClick={() => {\n                    setExpandedComments(false);\n                    if (commentListRef.current) {\n                      const ADDITIONAL_OFFSET = 200;\n                      const refTop = commentListRef.current.getBoundingClientRect().top;\n                      window.scrollTo({\n                        top: refTop + window.pageYOffset - ADDITIONAL_OFFSET,\n                        behavior: 'smooth',\n                      });\n                    }\n                  }}\n                />\n              )}\n            </div>\n          )}\n\n          {(threadCommentId\n            ? !readyToDisplayComments\n            : isFetchingTopLevelComments || (hasDefaultExpansion && moreBelow)) && (\n            <div className=\"main--empty\" ref={spinnerRef}>\n              <Spinner type=\"small\" />\n            </div>\n          )}\n        </>\n      }\n    />\n  );\n}\n\ntype ActionButtonsProps = {\n  uri: string,\n  totalUnfilteredComments: number,\n  sort: string,\n  changeSort: (string) => void,\n  handleRefresh: () => void,\n};\n\nconst CommentActionButtons = (actionButtonsProps: ActionButtonsProps) => {\n  const { uri, totalUnfilteredComments, sort, changeSort, handleRefresh } = actionButtonsProps;\n\n  const sortButtonProps = { activeSort: sort, changeSort };\n\n  return (\n    <div className=\"comment__actions\">\n      {totalUnfilteredComments > 1 && ENABLE_COMMENT_REACTIONS && (\n        <span className=\"comment__sort\">\n          <SortButton {...sortButtonProps} label={__('Best')} icon={ICONS.BEST} sortOption={SORT_BY.POPULARITY} />\n          <SortButton\n            {...sortButtonProps}\n            label={__('Controversial')}\n            icon={ICONS.CONTROVERSIAL}\n            sortOption={SORT_BY.CONTROVERSY}\n          />\n          <SortButton {...sortButtonProps} label={__('New')} icon={ICONS.NEW} sortOption={SORT_BY.NEWEST} />\n        </span>\n      )}\n\n      <div className=\"comment__settings\">\n        <Button button=\"alt\" icon={ICONS.REFRESH} title={__('Refresh')} onClick={handleRefresh} />\n        <CommentListMenu uri={uri} />\n      </div>\n    </div>\n  );\n};\n\ntype SortButtonProps = {\n  activeSort: string,\n  sortOption: string,\n  changeSort: (string) => void,\n};\n\nconst SortButton = (sortButtonProps: SortButtonProps) => {\n  const { activeSort, sortOption, changeSort, ...buttonProps } = sortButtonProps;\n\n  return (\n    <Button\n      {...buttonProps}\n      className={classnames(`button-toggle`, { 'button-toggle--active': activeSort === sortOption })}\n      button=\"alt\"\n      iconSize={18}\n      onClick={() => changeSort(sortOption)}\n    />\n  );\n};\n\ntype ThreadLinkProps = {\n  label: string,\n  isViewAll?: boolean,\n  threadCommentParent: string,\n  threadCommentId: string,\n};\n\nconst ThreadLinkButton = (props: ThreadLinkProps) => {\n  const { label, isViewAll, threadCommentParent, threadCommentId } = props;\n\n  const {\n    push,\n    location: { pathname, search },\n  } = useHistory();\n\n  return (\n    <Button\n      button=\"link\"\n      label={label}\n      icon={ICONS.ARROW_LEFT}\n      iconSize={12}\n      onClick={() => {\n        const urlParams = new URLSearchParams(search);\n\n        if (!isViewAll) {\n          urlParams.set(THREAD_COMMENT_QUERY_PARAM, threadCommentParent);\n          // on moving back, link the current thread comment so that it auto-expands into the correct conversation\n          urlParams.set(LINKED_COMMENT_QUERY_PARAM, threadCommentId);\n        } else {\n          urlParams.delete(THREAD_COMMENT_QUERY_PARAM);\n          // links the top-level comment when going back to all comments, for easy locating\n          // in the middle of big comment sections\n          urlParams.set(LINKED_COMMENT_QUERY_PARAM, threadCommentParent);\n        }\n        window.pendingLinkedCommentScroll = true;\n\n        push({ pathname, search: urlParams.toString() });\n      }}\n    />\n  );\n};\n","// @flow\nimport type { Props } from './view';\nimport CommentsList from './view';\nimport { connect } from 'react-redux';\nimport {\n  selectClaimForUri,\n  selectClaimIsMine,\n  selectFetchingMyChannels,\n  selectScheduledStateForUri,\n  selectProtectedContentTagForUri,\n} from 'redux/selectors/claims';\nimport {\n  selectTopLevelCommentsForUri,\n  selectTopLevelTotalPagesForUri,\n  selectIsFetchingComments,\n  selectIsFetchingTopLevelComments,\n  selectIsFetchingReacts,\n  selectTotalCommentsCountForUri,\n  selectOthersReacts,\n  selectMyReacts,\n  selectCommentIdsForUri,\n  selectCommentsEnabledSettingForChannelId,\n  selectPinnedCommentsForUri,\n  selectCommentForCommentId,\n  selectCommentAncestorsForId,\n} from 'redux/selectors/comments';\nimport { doCommentReset, doCommentList, doCommentById, doCommentReactList } from 'redux/actions/comments';\nimport { doPopOutInlinePlayer } from 'redux/actions/content';\nimport { selectActiveChannelClaim } from 'redux/selectors/app';\nimport { getChannelIdFromClaim } from 'util/claim';\nimport {\n  doFetchOdyseeMembershipForChannelIds,\n  doFetchChannelMembershipsForChannelIds,\n} from 'redux/actions/memberships';\nimport { selectUserHasValidMembershipForCreatorId } from 'redux/selectors/memberships';\n\nconst select = (state, props) => {\n  const { uri, threadCommentId, linkedCommentId } = props;\n\n  const claim = selectClaimForUri(state, uri);\n  const channelId = getChannelIdFromClaim(claim);\n\n  const activeChannelClaim = selectActiveChannelClaim(state);\n  const threadComment = selectCommentForCommentId(state, threadCommentId);\n  const activeChannelId = activeChannelClaim && activeChannelClaim.claim_id;\n\n  return {\n    activeChannelId,\n    allCommentIds: selectCommentIdsForUri(state, uri),\n    channelId,\n    chatCommentsRestrictedToChannelMembers: Boolean(selectProtectedContentTagForUri(state, uri)),\n    claimId: claim && claim.claim_id,\n    claimIsMine: selectClaimIsMine(state, claim),\n    fetchingChannels: selectFetchingMyChannels(state),\n    // $FlowFixMe\n    isAChannelMember: selectUserHasValidMembershipForCreatorId(state, channelId),\n    isFetchingComments: selectIsFetchingComments(state),\n    isFetchingReacts: selectIsFetchingReacts(state),\n    isFetchingTopLevelComments: selectIsFetchingTopLevelComments(state),\n    linkedCommentAncestors: selectCommentAncestorsForId(state, linkedCommentId),\n    // $FlowFixMe\n    commentsEnabledSetting: selectCommentsEnabledSettingForChannelId(state, channelId),\n    myReactsByCommentId: selectMyReacts(state),\n    othersReactsById: selectOthersReacts(state),\n    pinnedComments: selectPinnedCommentsForUri(state, uri),\n    threadComment,\n    threadCommentAncestors: selectCommentAncestorsForId(state, threadCommentId),\n    topLevelComments: selectTopLevelCommentsForUri(state, uri),\n    topLevelTotalPages: selectTopLevelTotalPagesForUri(state, uri),\n    totalComments: selectTotalCommentsCountForUri(state, uri),\n    scheduledState: selectScheduledStateForUri(state, uri),\n  };\n};\n\nconst perform = {\n  fetchTopLevelComments: doCommentList,\n  fetchComment: doCommentById,\n  fetchReacts: doCommentReactList,\n  resetComments: doCommentReset,\n  doFetchOdyseeMembershipForChannelIds,\n  doFetchChannelMembershipsForChannelIds,\n  doPopOutInlinePlayer,\n};\n\nexport default connect<_, Props, _, _, _, _>(select, perform)(CommentsList);\n","// @flow\nimport React from 'react';\n\ntype Props = {\n  title?: string,\n  subtitle?: string,\n  action?: any,\n  children?: string,\n};\n\nconst ErrorBubble = (props: Props) => {\n  const { children, title, subtitle, action } = props;\n\n  if (title && subtitle && action) {\n    return (\n      <div className=\"error-bubble\">\n        <div>\n          <label>{title}</label>\n          <span>{subtitle}</span>\n        </div>\n        {action}\n      </div>\n    );\n  }\n\n  if (!children) {\n    return null;\n  }\n\n  return <span className=\"error-bubble\">{children}</span>;\n};\n\nexport default ErrorBubble;\n"],"names":["StickerReviewBox","props","activeChannelUrl","src","price","exchangeRate","React","className","ChannelThumbnail","xsmall","uri","UriIndicator","link","showAtSign","OptimizedImage","waitLoad","loading","Boolean","FilePrice","customPrices","priceFiat","priceLBC","Number","isFiat","StickerActionButton","stickerButtonProps","isReviewingStickerComment","disabled","buttonProps","_objectWithoutProperties","_excluded","Button","_extends","title","__","label","undefined","TipReviewBox","tipAmount","activeTab","message","stickerPreviewComponent","CreditAmount","amount","TAB_USD","size","TipActionButton","tipButtonProps","name","tab","tipSelectorOpen","_onClick","onClick","fetchingChannels","_props$myChannelClaim","myChannelClaims","_props$injected","injected","tiny","activeChannelClaimId","setActiveChannel","FormField","labelOnLeft","type","onChange","event","channelClaimId","target","value","map","_ref","claimId","claim_id","key","item","perform","doSetActiveChannel","connect","state","selectMyChannelClaims","selectFetchingMyChannels","selectActiveChannelClaimId","SelectChannel","FormChannelSelector","selectorProps","isReply","isLivestream","HelpText","helpTextProps","deletedComment","minAmount","minTip","minSuper","minUSDAmount","minUSDSuper","minUSDTip","I18nMessage","tokens","usd","noFormat","Icon","customTooltipText","icon","ICONS","tooltip","_regeneratorRuntime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","desc","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","_typeof","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","assign","bind","source","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","_objectSpread","_defineProperty","getOwnPropertyDescriptors","defineProperties","input","hint","prim","toPrimitive","res","String","_toPrimitive","_toPropertyKey","_slicedToArray","arr","Array","isArray","_arrayWithHoles","_i","_s","_e","_x","_r","_arr","_n","_d","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","toString","from","test","_unsupportedIterableToArray","_nonIterableRest","len","arr2","stripeEnvironment","getStripeEnvironment","doCommentCreate","doFetchCreatorSettings","doFetchMyCommentedChannels","doToast","doCommentById","doSendCashTip","doSendTip","doOpenModal","doTipAccountCheckForUri","doArTip","claim","selectClaimForUri","channel","signing_channel","getChannelIdFromClaim","tipChannelName","_ref2","selectActiveChannelClaim","activeChannelName","canonical_url","tipData","selectArweaveTipDataForId","canReceiveTips","status","chatCommentsRestrictedToChannelMembers","selectedRestrictedCommentsChatTagForUri","claimIsMine","selectClaimIsMine","hasChannels","selectHasChannels","isFetchingChannels","isFetchingCreatorSettings","selectFetchingCreatorSettings","myChannelClaimIds","selectMyChannelClaimIds","myCommentedChannelIds","selectMyCommentedChannelIdsForId","preferredCurrency","selectPreferredCurrency","channelSettings","comments","settingsByChannelId","supportDisabled","makeSelectTagInClaimOrChannelForUri","DISABLE_SUPPORT_TAG","userHasMembersOnlyChatPerk","selectUserIsMemberOfMembersOnlyChatForCreatorId","commentSettingDisabled","selectCommentsDisabledSettingForChannelId","isLivestreamChatMembersOnly","selectLivestreamChatMembersOnlyForChannelId","areCommentsMembersOnly","selectMembersOnlyCommentsForChannelId","hasPremiumPlus","hasLegacyOdyseePremium","recipientArweaveTipInfo","arweaveTippingError","selectArweaveTippingErrorForId","_React$useContext","bottom","disableInput","embed","isNested","onCancelReplying","onDoneReplying","onSlimInputClose","parentId","setQuickReply","shouldFetchComment","textInjection","activeArStatus","useArStatus","fileUri","AppContext","isMobile","useIsMobile","formFieldRef","buttonRef","slimInputButtonRef","_useHistory","useHistory","pathname","location","_React$useState2","isSubmitting","setSubmitting","_React$useState4","commentFailure","setCommentFailure","_React$useState6","txid","successTip","setSuccessTip","_React$useState8","setTipSelector","_React$useState10","isReviewingSupportComment","setReviewingSupportComment","_React$useState12","setReviewingStickerComment","_React$useState14","selectedSticker","setSelectedSticker","_React$useState16","setTipAmount","_React$useState18","commentValue","setCommentValue","_usePersistedState2","usePersistedState","advancedEditor","setAdvancedEditor","_React$useState20","setActiveTab","_React$useState22","tipError","setTipError","_React$useState24","setDeletedComment","_React$useState26","open","showSelectors","setShowSelectors","_React$useState28","disableReviewButton","setDisableReviewButton","_React$useState30","setExchangeRate","_React$useState32","tipModalOpen","setTipModalOpen","charCount","hasNothingToSumbit","min_tip_amount_super_chat","min_tip_amount_comment","min_usdc_tip_amount_super_chat","min_usdc_tip_amount_comment","legacyMinAsUSD","isHyperchat","minAmountMet","stickerPrice","tipSelectorError","minUSDAmountRef","current","addEmoteToComment","emote","concat","handleSelectSticker","sticker","commentSelectorsProps","isOpen","openTab","submitButtonProps","button","requiresAuth","actionButtonProps","handleSelectTipComment","cancelButtonProps","stickerReviewProps","url","commentSelectorElem","CommentSelectors","closeSelector","isRestrictedToMembersOnly","cs","livestream_chat_members_only","comments_members_only","handleJoinMembersOnlyChat","MODALS","isTipOnly","hasSelectedTab","customText","setAmount","getAmount","handleSupportComment","_handleSupportComment","_callee","commentsAreMembersOnly","_context","isError","subMessage","notAuthedToLiveChat","handleCreateComment","lockedMinUSDAmount","currentMinUSDAmount","doSubmitTip","arweaveTipAddress","address","transactionCurrency","tipParams","tipAmountTwoPlaces","Math","round","recipientAddress","currency","userParams","activeChannelId","dryRunCommentParams","comment","parent_id","payment_tx_id","environment","is_protected","dry_run","signature","arTipResponse","transactionId","params","dryrun","e","console","log","_tipParams","customerTipResponse","payment_intent_id","_x2","_x3","_x4","_x5","_handleCreateComment","_callee2","dryRun","stickerValue","_args2","_context2","buildValidSticker","comment_id","click","includes","Lbryio","LBC_USD","altEnterListener","inputRef","document","activeElement","isTyping","attributes","ctrlKey","metaKey","keyCode","KEYCODES","preventDefault","removeAttribute","window","addEventListener","removeEventListener","_formFieldRef$current","_formFieldRef$current2","_formFieldRef$current3","substring","focus","commentLabelText","ErrorBubble","subtitle","action","Form","onSubmit","classnames","autoFocus","create__reply","create__comment","disabled_chat_comments","noticeLabel","SIMPLE_SITE","handleTip","handleSubmit","slimInput","submitButtonRef","placeholder","quickActionHandler","quickActionLabel","ref","textAreaMaxLength","FF_MAX_CHARS_IN_LIVESTREAM_COMMENT","FF_MAX_CHARS_IN_COMMENT","WalletTipAmountSelector","customTipAmount","fiatConversion","setDisableSubmitButton","isComment","SELECTOR_TABS","onUpdate","imageUrl","imageTitle","markdown","updateComment","assetName","role","stopPropagation","PAGES","labelOk","onConfirm","closeModal","pathPlusRedirect","channelId","channelName","channelHasMembershipTiers","creatorMembershipsFetched","doToggleMembersOnlyCommentsSettingForClaimId","doMembershipList","channel_claim_id","Menu","MenuButton","MenuList","MenuItem","onSelect","getChannelFromClaim","selectClaimIsMineForUri","selectChannelHasMembershipTiersForId","selectCreatorMembershipsFetchedByUri","CommentListMenu","DEBOUNCE_SCROLL_HANDLER_MS","CommentCreate","lazyImport","CommentActionButtons","actionButtonsProps","totalUnfilteredComments","sort","changeSort","handleRefresh","sortButtonProps","activeSort","ENABLE_COMMENT_REACTIONS","SortButton","sortOption","SORT_BY","iconSize","ThreadLinkButton","isViewAll","threadCommentParent","threadCommentId","_useHistory2","_useHistory2$location","search","urlParams","URLSearchParams","THREAD_COMMENT_QUERY_PARAM","set","LINKED_COMMENT_QUERY_PARAM","pendingLinkedCommentScroll","fetchTopLevelComments","doCommentList","fetchComment","fetchReacts","doCommentReactList","resetComments","doCommentReset","doFetchOdyseeMembershipForChannelIds","doFetchChannelMembershipsForChannelIds","doPopOutInlinePlayer","linkedCommentId","activeChannelClaim","threadComment","selectCommentForCommentId","allCommentIds","selectCommentIdsForUri","selectProtectedContentTagForUri","isAChannelMember","selectUserHasValidMembershipForCreatorId","isFetchingComments","selectIsFetchingComments","isFetchingReacts","selectIsFetchingReacts","isFetchingTopLevelComments","selectIsFetchingTopLevelComments","linkedCommentAncestors","selectCommentAncestorsForId","commentsEnabledSetting","selectCommentsEnabledSettingForChannelId","myReactsByCommentId","selectMyReacts","othersReactsById","selectOthersReacts","pinnedComments","selectPinnedCommentsForUri","threadCommentAncestors","topLevelComments","selectTopLevelCommentsForUri","topLevelTotalPages","selectTopLevelTotalPagesForUri","totalComments","selectTotalCommentsCountForUri","scheduledState","selectScheduledStateForUri","commentsAreExpanded","notInDrawer","threadRedirect","_useHistory$location","isSmallScreen","useIsSmallScreen","currentFetchedPage","ceil","COMMENT_PAGE_SIZE_TOP_LEVEL","spinnerRef","commentListRef","DEFAULT_SORT","setSort","page","setPage","didInitialPageFetch","setInitialPageFetch","hasDefaultExpansion","expandedComments","setExpandedComments","debouncedUri","setDebouncedUri","uiFilteredComments","setUiFilteredComments","updateUiFilteredComments","commentIds","prevCommentIds","newCommentIds","id","_toConsumableArray","totalFetchedComments","moreBelow","getCommentsListTitle","threadDepthLevel","some","ancestor","index","threadTopLevelComment","readyToDisplayComments","setReadyToDisplayComments","commenterClaimIds","channel_id","handleReset","refreshComments","notAuthedToChat","useEffect","isNewPage","hasRightFetchPage","idsForReactionFetch","commentId","handleCommentScroll","debounce","shouldFetchNextPage","scrollingElement","querySelector","yPrefetchPx","devicePixelRatio","rect","getBoundingClientRect","windowH","innerHeight","documentElement","clientHeight","windowW","innerWidth","clientWidth","isApproachingViewport","top","width","height","right","left","commentProps","isTopLevel","newSort","Card","titleActions","actions","Empty","padded","text","CommentView","c","refTop","scrollTo","pageYOffset","behavior","Spinner","children"],"sourceRoot":""}