{"version":3,"file":"pledgesTab-4639009db9793cbddc09-1009.js","mappings":"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","sources":["webpack://odysee.com/../ui/page/creatorMemberships/supporterArea/pledgesTab/internal/membershipRow/index.js","webpack://odysee.com/../ui/page/creatorMemberships/supporterArea/pledgesTab/internal/membershipRow/view.jsx","webpack://odysee.com/../ui/component/buttonSort/style.scss?9f30","webpack://odysee.com/../ui/component/buttonSort/index.js","webpack://odysee.com/../ui/component/buttonSort/view.jsx","webpack://odysee.com/../ui/page/creatorMemberships/supporterArea/pledgesTab/view.jsx","webpack://odysee.com/../ui/page/creatorMemberships/supporterArea/pledgesTab/index.js","webpack://odysee.com/../ui/component/buttonSort/style.scss"],"sourcesContent":["import { connect } from 'react-redux';\nimport { doMembershipList, doMembershipMine } from 'redux/actions/memberships';\n\nimport MembershipRow from './view';\nimport { selectActiveChannelClaim } from 'redux/selectors/app';\nimport { selectClaimForId } from 'redux/selectors/claims';\nimport {\n  selectIndexForCreatorMembership,\n  selectArEnabledMembershipTiersForChannelUri,\n} from 'redux/selectors/memberships';\nimport { buildURI } from 'util/lbryURI';\n\nconst select = (state, props) => {\n  const creatorChannelClaim = selectClaimForId(state, props.membershipSub.membership.channel_claim_id);\n  const { membershipSub } = props;\n\n  const creatorChannelUri = creatorChannelClaim\n    ? buildURI({ channelName: creatorChannelClaim?.name, channelClaimId: creatorChannelClaim?.claim_id })\n    : '';\n\n  // select membership for creator and membershipid\n  const membershipId = membershipSub ? membershipSub.membership.id : undefined;\n  const index = selectIndexForCreatorMembership(state, creatorChannelClaim?.claim_id, membershipId);\n\n  return {\n    activeChannelClaim: selectActiveChannelClaim(state),\n    creatorChannelClaim,\n    membershipIndex: index,\n    creatorChannelUri,\n    creatorMemberships: selectArEnabledMembershipTiersForChannelUri(state, creatorChannelUri),\n  };\n};\n\nconst perform = {\n  doMembershipMine,\n  doMembershipList,\n};\n\nexport default connect(select, perform)(MembershipRow);\n","// @flow\nimport React from 'react';\nimport { buildURI } from 'util/lbryURI';\nimport Spinner from 'component/spinner';\nimport { formatLbryUrlForWeb } from 'util/url';\nimport ChannelThumbnail from 'component/channelThumbnail';\nimport UriIndicator from 'component/uriIndicator';\nimport JoinMembershipButton from 'component/joinMembershipButton';\nimport { toCapitalCase } from 'util/string';\nimport Button from 'component/button';\nimport * as ICONS from 'constants/icons';\nimport moment from 'moment';\nimport { getFormattedRenewBy } from 'util/memberships';\n\ntype Props = {\n  membershipSub: MembershipSub,\n  creatorChannelClaim: Claim,\n  activeChannelClaim: Claim,\n  doMembershipList: (params: MembershipListParams) => void,\n  membershipIndex: number,\n  creatorChannelUri: string,\n};\nexport default function MembershipRow(props: Props) {\n  const { membershipSub, creatorChannelClaim, activeChannelClaim, membershipIndex, doMembershipList } = props;\n  const memberChannelName = activeChannelClaim?.name || '';\n  const creatorChannelId = membershipSub.membership.channel_claim_id;\n  const creatorChannelUri = creatorChannelClaim\n    ? buildURI({\n        channelName: creatorChannelClaim.name,\n        channelClaimId: creatorChannelId,\n      })\n    : null;\n  const creatorChannelPath = creatorChannelUri ? formatLbryUrlForWeb(creatorChannelUri) : '';\n\n  const currency = membershipSub.subscription.current_price\n    ? membershipSub.subscription.current_price.currency.toUpperCase()\n    : '';\n  const supportAmount = membershipSub.subscription.current_price ? membershipSub.subscription.current_price.amount : ''; // in cents or 1/100th EUR\n  const interval = membershipSub.subscription.current_price ? membershipSub.subscription.current_price.frequency : '';\n\n  // const startDate = new Date(membershipSub.subscription.started_at);\n  // const endDate =\n  //   membershipSub.subscription.ends_at === '0001-01-01T00:00:00Z'\n  //     ? new Date(Date.now()).toISOString()\n  //     : new Date(membershipSub.subscription.ends_at);\n  const hasPendingPayment = membershipSub.payments.some((m) => m.status === 'submitted');\n  const canRenew =\n    !hasPendingPayment &&\n    membershipSub.subscription.earliest_renewal_at &&\n    new Date() > new Date(membershipSub.subscription.earliest_renewal_at);\n\n  const paidMonths = membershipSub.payments.filter(\n    (m) => m.status && (m.status === 'paid' || m.status === 'submitted')\n  ).length;\n  const monthsSupported = paidMonths === 1 ? __('1 Month') : __('%paid_months% Months', { paid_months: paidMonths });\n  React.useEffect(() => {\n    if (membershipIndex === -1) {\n      doMembershipList({ channel_claim_id: creatorChannelId });\n    }\n  }, [creatorChannelId, doMembershipList, membershipIndex]);\n\n  // TODO refactor status content\n  // let buttonContent;\n  //\n  // const status = membershipSub.subscription.status;\n  // if (status === 'active' || status === 'lapsed') {\n  //   if (canRenew) {\n  //     buttonContent = (<Button\n  //       icon={ICONS.MEMBERSHIP}\n  //       button=\"primary\"\n  //       label={__('Renew', {\n  //         membership_price: (membershipSub.subscription.current_price.amount / 100).toFixed(\n  //           membershipSub?.subscription.current_price.amount < 100 ? 2 : 0\n  //         ), // tiers\n  //       })}\n  //       onClick={() => {\n  //         doOpenModal(MODALS.JOIN_MEMBERSHIP, { uri: creatorChannelUri, membershipIndex: membershipIndex, passedTierIndex: membershipIndex, isChannelTab: true, isRenewal: true });\n  //       }}\n  //       disabled={false}\n  //     />)\n  //   } else {\n  //     buttonContent = __('Active');\n  //   }\n  // }\n  //\n  // if (status === 'pending') {\n  //   // check if payment status is submitted...\n  // }\n  //\n  // if (status === 'canceled') {\n  //   buttonContent = __('Canceled');\n  // }\n  //\n  //\n  //\n  //\n  if (!creatorChannelClaim || !membershipSub || membershipIndex === -1) {\n    return (\n      <tr>\n        <td colSpan=\"9\">\n          <Spinner />\n        </td>\n      </tr>\n    );\n  }\n  return (\n    <tr key={`${membershipSub.membership.channel_claim_id}${membershipSub.membership.name}`}>\n      <td className=\"channelThumbnail\">\n        <ChannelThumbnail xsmall uri={creatorChannelUri} />\n        <ChannelThumbnail\n          xxsmall\n          uri={creatorChannelUri === '' ? undefined : creatorChannelUri}\n          tooltipTitle={memberChannelName === '' ? __('Anonymous') : memberChannelName}\n        />\n      </td>\n\n      <td>\n        <UriIndicator uri={creatorChannelUri} link />\n      </td>\n\n      <td>{membershipSub.membership.name}</td>\n      <td>{moment(membershipSub.subscription.ends_at).format('L')}</td>\n\n      <td>{monthsSupported}</td>\n\n      <td>\n        {supportAmount ? `$${(supportAmount / 100).toFixed(2)} ${currency} / ${__(toCapitalCase(interval))}` : null}\n      </td>\n      <td>{hasPendingPayment ? 'Submitted' : getFormattedRenewBy(membershipSub)}</td>\n      <td>\n        {membershipSub.subscription.status === 'active' ? (\n          canRenew ? (\n            <JoinMembershipButton uri={creatorChannelUri} />\n          ) : (\n            __('Active')\n          )\n        ) : membershipSub.subscription.status === 'lapsed' ? (\n          __('Past Due')\n        ) : membershipSub.subscription.status === 'pending' ? (\n          __('Pending')\n        ) : (\n          __('Canceled')\n        )}\n      </td>\n      <td>\n        <span dir=\"auto\" className=\"button__label\">\n          <Button button=\"alt\" icon={ICONS.MEMBERSHIP} navigate={creatorChannelPath + '?view=membership'} />\n        </span>\n      </td>\n    </tr>\n  );\n}\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./style.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./style.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import ButtonSort from './view';\n\nexport default ButtonSort;\n","// @flow\nimport React from 'react';\nimport './style.scss';\n\ntype Props = {\n  label: string,\n  sortKey: string | null,\n  ownKey: string,\n  order: string | null,\n  setKey: (key: ?string) => void,\n  setOrder: (order: ?string) => void,\n};\n\nexport default function (props: Props) {\n  const { label, sortKey, ownKey, order, setKey, setOrder } = props;\n\n  const onUpClick = () => {\n    if (order !== 'asc' || sortKey !== ownKey) {\n      setKey(ownKey);\n      setOrder('asc');\n    } else {\n      setKey(null);\n      setOrder(null);\n    }\n  };\n\n  const onDownClick = () => {\n    if (order !== 'desc' || sortKey !== ownKey) {\n      setKey(ownKey);\n      setOrder('desc');\n    } else {\n      setKey(null);\n      setOrder(null);\n    }\n  };\n\n  const upActive = order === 'asc' && sortKey === ownKey;\n  const downActive = order === 'desc' && sortKey === ownKey;\n\n  return (\n    <th>\n      <span className=\"th-label-with-arrows\">\n        {__(label)}\n        <span className=\"arrows\">\n          <span\n            className={`arrow-up ${upActive ? 'arrow-up--active' : ''}`}\n            onClick={() => onUpClick()}\n            role=\"button\"\n            tabIndex={0}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter' || e.key === ' ') onDownClick();\n            }}\n          >\n            &#9650;\n          </span>\n          <span\n            className={`arrow-down ${downActive ? 'arrow-down--active' : ''}`}\n            onClick={() => onDownClick()}\n            role=\"button\"\n            tabIndex={0}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter' || e.key === ' ') onDownClick();\n            }}\n          >\n            &#9660;\n          </span>\n        </span>\n      </span>\n    </th>\n  );\n}\n","// @flow\nimport React from 'react';\nimport Yrbl from 'component/yrbl';\nimport Spinner from 'component/spinner';\nimport MembershipRow from './internal/membershipRow';\nimport ButtonSort from 'component/buttonSort';\nimport { getRenewByMoment } from 'util/memberships';\n\ntype Props = {\n  // -- redux --\n  myMembershipSubs: Array<MembershipSub>,\n  isFetchingMembershipSubs: boolean,\n  doMembershipMine: () => Promise<MembershipSub>,\n  activeChannelClaim: ChannelClaim,\n  doResolveClaimIds: (claimIds: Array<string>) => Promise<any>,\n};\n\nfunction PledgesTab(props: Props) {\n  const { myMembershipSubs, isFetchingMembershipSubs, doMembershipMine, doResolveClaimIds } = props;\n  React.useEffect(() => {\n    if (myMembershipSubs === undefined) {\n      doMembershipMine();\n    }\n  }, [doMembershipMine, myMembershipSubs]);\n  const subChannelIds = React.useMemo(() => {\n    return myMembershipSubs ? myMembershipSubs.map((sub) => sub.membership.channel_claim_id) : [];\n  }, [myMembershipSubs]);\n\n  const [resolved, setResolved] = React.useState(false);\n  React.useEffect(() => {\n    if (!resolved && subChannelIds && subChannelIds.length) {\n      setResolved(true);\n      doResolveClaimIds(subChannelIds);\n    }\n  }, [subChannelIds, doResolveClaimIds, resolved]);\n\n  const [sortKey, setSortKey] = React.useState(null);\n  const [order, setOrder] = React.useState('desc');\n\n  const RENEW_KEY = 'renewBy';\n  // const STARTED_AT_KEY = 'startedAt';\n  const AMOUNT_KEY = 'amount';\n  const ORDER_ASC = 'asc';\n  // const ORDER_DESC = 'desc';\n\n  const sortedMembershipSubs = React.useMemo(() => {\n    // let startedAtSort = (a, b) => new Date(b.subscription.started_at).getTime() - new Date(a.subscription.started_at).getTime();\n    let amountSortAsc = (a, b) => a.subscription.current_price.amount - b.subscription.current_price.amount;\n    let amountSortDesc = (a, b) => b.subscription.current_price.amount - a.subscription.current_price.amount;\n    // $FlowIgnore\n    let renewBySortAsc = (a, b) => getRenewByMoment(a) - (getRenewByMoment(b) || 999999999999999); // if null, make it really big so it's last\n    // $FlowIgnore\n    let renewBySortDesc = (a, b) => (getRenewByMoment(b) || 999999999999999) - getRenewByMoment(a); // if null, make it really big so it's last\n\n    const defaultSort = renewBySortAsc;\n    let sortFn;\n    if (!sortKey) {\n      sortFn = defaultSort;\n    } else if (sortKey === RENEW_KEY) {\n      if (order === ORDER_ASC) {\n        sortFn = renewBySortAsc;\n      } else {\n        sortFn = renewBySortDesc;\n      }\n    } else if (sortKey === AMOUNT_KEY) {\n      if (order === ORDER_ASC) {\n        sortFn = amountSortAsc;\n      } else {\n        sortFn = amountSortDesc;\n      }\n    }\n    return myMembershipSubs ? myMembershipSubs.filter((sub) => sub.subscription.is_active === true).sort(sortFn) : [];\n  }, [myMembershipSubs, sortKey, order]);\n\n  if (myMembershipSubs === undefined && isFetchingMembershipSubs) {\n    return (\n      <div className=\"main--empty\">\n        <Spinner />\n      </div>\n    );\n  } else if (myMembershipSubs === undefined && !isFetchingMembershipSubs) {\n    return (\n      <div className=\"main--empty\">\n        <p>{__('Failed to fetch memberships')}</p>\n      </div>\n    );\n  }\n\n  if (!myMembershipSubs || myMembershipSubs.length === 0) {\n    return (\n      <div className=\"membership__mypledges-wrapper\">\n        <div className=\"membership__mypledges-content\">\n          <Yrbl\n            type=\"happy\"\n            subtitle={__('Find creators that you like and support them. Your pledges will show up on this page.')}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"membership__mypledges-wrapper\">\n      <div className=\"membership__mypledges-content\">\n        <div className=\"membership-table__wrapper\">\n          <table className=\"table table--pledges\">\n            <thead>\n              <tr>\n                <th className=\"channelName-header\" colSpan=\"2\">\n                  {__('Channel Name')}\n                </th>\n                <th>{__('Tier')}</th>\n                <th>{__('Paid Until')}</th>\n                <th>{__('Months Supported')}</th>\n                <ButtonSort\n                  label={'Amount'}\n                  sortKey={sortKey}\n                  ownKey={AMOUNT_KEY}\n                  setKey={setSortKey}\n                  setOrder={setOrder}\n                  order={order}\n                />\n                <ButtonSort\n                  label={'Renew By'}\n                  sortKey={sortKey}\n                  ownKey={RENEW_KEY}\n                  setKey={setSortKey}\n                  setOrder={setOrder}\n                  order={order}\n                />\n                <th>{__('Status')}</th>\n                <th className=\"membership-table__page\">{__('Page')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {sortedMembershipSubs.map((membershipSub, index) => {\n                return <MembershipRow membershipSub={membershipSub} key={index} />;\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\nexport default PledgesTab;\n","import { connect } from 'react-redux';\nimport { selectMembershipMineFetching, selectMyPurchasedMembershipsFromCreators } from 'redux/selectors/memberships';\nimport { doMembershipMine } from 'redux/actions/memberships';\nimport { doResolveClaimIds } from 'redux/actions/claims';\nimport PledgesTab from './view';\nimport { selectActiveChannelClaim } from 'redux/selectors/app';\n\nconst select = (state) => ({\n  myMembershipSubs: selectMyPurchasedMembershipsFromCreators(state),\n  isFetchingMembershipSubs: selectMembershipMineFetching(state),\n  activeChannelClaim: selectActiveChannelClaim(state),\n});\n\nconst perform = {\n  doMembershipMine,\n  doResolveClaimIds,\n};\n\nexport default connect(select, perform)(PledgesTab);\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".th-label-with-arrows{align-items:center;display:flex;gap:4px}.arrows{display:flex;flex-direction:row;line-height:1}.arrow-up{font-size:16px;opacity:.5}[dir] .arrow-up{text-align:center}.arrow-up--active{color:var(--color-primary);opacity:1}.arrow-down{font-size:16px;opacity:.5}[dir] .arrow-down{text-align:center}.arrow-down--active{color:var(--color-primary);opacity:1}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../ui/component/buttonSort/style.scss\"],\"names\":[],\"mappings\":\"AAAA,sBAEE,kBAAA,CADA,YAAA,CAEA,OAAA,CAGF,QACE,YAAA,CACA,kBAAA,CACA,aAAA,CAGF,UACE,cAAA,CAEA,UAAA,CAHF,gBAEE,iBACA,CAGF,kBACE,0BAAA,CACA,SAAA,CAGF,YACE,cAAA,CAEA,UAAA,CAHF,kBAEE,iBACA,CAGF,oBACE,0BAAA,CACA,SAAA\",\"sourcesContent\":[\".th-label-with-arrows {\\n  display: flex;\\n  align-items: center;\\n  gap: 4px;\\n}\\n\\n.arrows {\\n  display: flex;\\n  flex-direction: row;\\n  line-height: 1;\\n}\\n\\n.arrow-up {\\n  font-size: 16px;\\n  text-align: center;\\n  opacity: 0.5;\\n}\\n\\n.arrow-up--active {\\n  color: var(--color-primary);\\n  opacity: 1;\\n}\\n\\n.arrow-down {\\n  font-size: 16px;\\n  text-align: center;\\n  opacity: 0.5;\\n}\\n\\n.arrow-down--active {\\n  color: var(--color-primary);\\n  opacity: 1;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["perform","doMembershipMine","doMembershipList","connect","state","props","creatorChannelClaim","selectClaimForId","membershipSub","membership","channel_claim_id","creatorChannelUri","buildURI","channelName","name","channelClaimId","claim_id","membershipId","id","undefined","index","selectIndexForCreatorMembership","activeChannelClaim","selectActiveChannelClaim","membershipIndex","creatorMemberships","selectArEnabledMembershipTiersForChannelUri","memberChannelName","creatorChannelId","creatorChannelPath","formatLbryUrlForWeb","currency","subscription","current_price","toUpperCase","supportAmount","amount","interval","frequency","hasPendingPayment","payments","some","m","status","canRenew","earliest_renewal_at","Date","paidMonths","filter","length","monthsSupported","__","paid_months","React","key","concat","className","ChannelThumbnail","xsmall","uri","xxsmall","tooltipTitle","UriIndicator","link","moment","ends_at","format","toFixed","toCapitalCase","getFormattedRenewBy","JoinMembershipButton","dir","Button","button","icon","ICONS","navigate","colSpan","Spinner","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","label","sortKey","ownKey","order","setKey","setOrder","onDownClick","upActive","downActive","onClick","role","tabIndex","onKeyDown","e","myMembershipSubs","isFetchingMembershipSubs","doResolveClaimIds","subChannelIds","map","sub","_React$useState2","_slicedToArray","resolved","setResolved","_React$useState4","setSortKey","_React$useState6","RENEW_KEY","AMOUNT_KEY","sortedMembershipSubs","sortFn","renewBySortAsc","a","b","getRenewByMoment","is_active","sort","ButtonSort","MembershipRow","Yrbl","type","subtitle","selectMyPurchasedMembershipsFromCreators","selectMembershipMineFetching","PledgesTab","___CSS_LOADER_EXPORT___","push","module"],"sourceRoot":""}