webpackHotUpdate("ui-202209270633",{

/***/ "../ui/component/claimListDiscover/view.jsx":
/*!**************************************************!*\
  !*** ../ui/component/claimListDiscover/view.jsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ \"../config.js\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(config__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var constants_claim_search__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! constants/claim_search */ \"../ui/constants/claim_search.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router */ \"../node_modules/react-router/esm/react-router.js\");\n/* harmony import */ var constants_tags__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! constants/tags */ \"../ui/constants/tags.js\");\n/* harmony import */ var util_default_languages__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! util/default-languages */ \"../ui/util/default-languages.js\");\n/* harmony import */ var util_claim__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! util/claim */ \"../ui/util/claim.js\");\n/* harmony import */ var util_claim_search__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! util/claim-search */ \"../ui/util/claim-search.js\");\n/* harmony import */ var util_lbryURI__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! util/lbryURI */ \"../ui/util/lbryURI.js\");\n/* harmony import */ var component_button__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! component/button */ \"../ui/component/button/index.js\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! moment */ \"../node_modules/moment/moment.js\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var component_claimList__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! component/claimList */ \"../ui/component/claimList/index.js\");\n/* harmony import */ var component_claimPreview__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! component/claimPreview */ \"../ui/component/claimPreview/index.js\");\n/* harmony import */ var component_claimPreviewTile__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! component/claimPreviewTile */ \"../ui/component/claimPreviewTile/index.js\");\n/* harmony import */ var component_i18nMessage__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! component/i18nMessage */ \"../ui/component/i18nMessage/index.js\");\n/* harmony import */ var component_langFilterIndicator__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! component/langFilterIndicator */ \"../ui/component/langFilterIndicator/index.js\");\n/* harmony import */ var component_claimListHeader__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! component/claimListHeader */ \"../ui/component/claimListHeader/index.js\");\n/* harmony import */ var effects_use_fetch_view_count__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! effects/use-fetch-view-count */ \"../ui/effects/use-fetch-view-count.js\");\n/* harmony import */ var effects_use_resolve_pins__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! effects/use-resolve-pins */ \"../ui/effects/use-resolve-pins.js\");\n/* harmony import */ var effects_use_screensize__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! effects/use-screensize */ \"../ui/effects/use-screensize.js\");\n/* harmony import */ var effects_use_persistent_user_param__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! effects/use-persistent-user-param */ \"../ui/effects/use-persistent-user-param.js\");\n/* harmony import */ var effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! effects/use-persisted-state */ \"../ui/effects/use-persisted-state.js\");\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction ClaimListDiscover(props) {\n  var doClaimSearch = props.doClaimSearch,\n      claimSearchByQuery = props.claimSearchByQuery,\n      _props$showHeader = props.showHeader,\n      showHeader = _props$showHeader === void 0 ? true : _props$showHeader,\n      type = props.type,\n      claimSearchByQueryLastPageReached = props.claimSearchByQueryLastPageReached,\n      tags = props.tags,\n      notTags = props.notTags,\n      defaultTags = props.defaultTags,\n      loading = props.loading,\n      meta = props.meta,\n      subSection = props.subSection,\n      channelIds = props.channelIds,\n      excludedChannelIds = props.excludedChannelIds,\n      showNsfw = props.showNsfw,\n      hideReposts = props.hideReposts,\n      fetchViewCount = props.fetchViewCount,\n      history = props.history,\n      location = props.location,\n      mutedUris = props.mutedUris,\n      blockedUris = props.blockedUris,\n      hiddenNsfwMessage = props.hiddenNsfwMessage,\n      defaultOrderBy = props.defaultOrderBy,\n      sortBy = props.sortBy,\n      orderBy = props.orderBy,\n      headerLabel = props.headerLabel,\n      header = props.header,\n      name = props.name,\n      claimType = props.claimType,\n      defaultClaimType = props.defaultClaimType,\n      streamType = props.streamType,\n      defaultStreamType = props.defaultStreamType,\n      freshness = props.freshness,\n      _props$defaultFreshne = props.defaultFreshness,\n      defaultFreshness = _props$defaultFreshne === void 0 ? constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FRESH_WEEK\"] : _props$defaultFreshne,\n      renderProperties = props.renderProperties,\n      includeSupportAction = props.includeSupportAction,\n      repostedClaimId = props.repostedClaimId,\n      hideAdvancedFilter = props.hideAdvancedFilter,\n      hideMembersOnly = props.hideMembersOnly,\n      _props$infiniteScroll = props.infiniteScroll,\n      infiniteScroll = _props$infiniteScroll === void 0 ? true : _props$infiniteScroll,\n      followedTags = props.followedTags,\n      injectedItem = props.injectedItem,\n      feeAmount = props.feeAmount,\n      uris = props.uris,\n      prefixUris = props.prefixUris,\n      pins = props.pins,\n      tileLayout = props.tileLayout,\n      _props$hideFilters = props.hideFilters,\n      hideFilters = _props$hideFilters === void 0 ? false : _props$hideFilters,\n      claimIds = props.claimIds,\n      maxPages = props.maxPages,\n      hideRepostsOverride = props.hideRepostsOverride,\n      languageSetting = props.languageSetting,\n      searchLanguages = props.searchLanguages,\n      searchInLanguage = props.searchInLanguage,\n      ignoreSearchInLanguage = props.ignoreSearchInLanguage,\n      limitClaimsPerChannel = props.limitClaimsPerChannel,\n      releaseTime = props.releaseTime,\n      scrollAnchor = props.scrollAnchor,\n      _props$showHiddenByUs = props.showHiddenByUser,\n      showHiddenByUser = _props$showHiddenByUs === void 0 ? false : _props$showHiddenByUs,\n      hasSource = props.hasSource,\n      hasNoSource = props.hasNoSource,\n      _props$isChannel = props.isChannel,\n      isChannel = _props$isChannel === void 0 ? false : _props$isChannel,\n      showNoSourceClaims = props.showNoSourceClaims,\n      empty = props.empty,\n      claimsByUri = props.claimsByUri,\n      claimsById = props.claimsById,\n      doFetchViewCount = props.doFetchViewCount,\n      _props$hideLayoutButt = props.hideLayoutButton,\n      hideLayoutButton = _props$hideLayoutButt === void 0 ? false : _props$hideLayoutButt,\n      loadedCallback = props.loadedCallback,\n      maxClaimRender = props.maxClaimRender,\n      _props$useSkeletonScr = props.useSkeletonScreen,\n      useSkeletonScreen = _props$useSkeletonScr === void 0 ? true : _props$useSkeletonScr,\n      _props$excludeUris = props.excludeUris,\n      excludeUris = _props$excludeUris === void 0 ? [] : _props$excludeUris,\n      doFetchOdyseeMembershipForChannelIds = props.doFetchOdyseeMembershipForChannelIds,\n      _props$swipeLayout = props.swipeLayout,\n      swipeLayout = _props$swipeLayout === void 0 ? false : _props$swipeLayout,\n      doResolveUris = props.doResolveUris,\n      doResolveClaimIds = props.doResolveClaimIds;\n  var resolvedPinUris = Object(effects_use_resolve_pins__WEBPACK_IMPORTED_MODULE_18__[\"default\"])({\n    pins: pins,\n    claimsById: claimsById,\n    doResolveClaimIds: doResolveClaimIds,\n    doResolveUris: doResolveUris\n  });\n  var didNavigateForward = history.action === 'PUSH';\n  var search = location.search;\n  var prevUris = react__WEBPACK_IMPORTED_MODULE_2___default.a.useRef();\n\n  var _React$useState = react__WEBPACK_IMPORTED_MODULE_2___default.a.useState(1),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      page = _React$useState2[0],\n      setPage = _React$useState2[1];\n\n  var _React$useState3 = react__WEBPACK_IMPORTED_MODULE_2___default.a.useState(),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      forceRefresh = _React$useState4[0],\n      setForceRefresh = _React$useState4[1];\n\n  var isLargeScreen = Object(effects_use_screensize__WEBPACK_IMPORTED_MODULE_19__[\"useIsLargeScreen\"])();\n  var followed = followedTags && followedTags.map(function (t) {\n    return t.name;\n  }) || [];\n  var urlParams = new URLSearchParams(search);\n  var tagsParam = // can be 'x,y,z' or 'x' or ['x','y'] or CS.CONSTANT\n  tags && getParamFromTags(tags) || urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"TAGS_KEY\"]) !== null && urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"TAGS_KEY\"]) || defaultTags && getParamFromTags(defaultTags);\n  var freshnessParam = freshness || urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FRESH_KEY\"]) || defaultFreshness;\n  var sortByParam = sortBy || urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"SORT_BY_KEY\"]) || constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"SORT_BY\"].NEWEST.key;\n  var mutedAndBlockedChannelIds = Array.from(new Set(mutedUris.concat(blockedUris).map(function (uri) {\n    return Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_8__[\"splitBySeparator\"])(uri)[1];\n  })));\n\n  var _React$useState5 = react__WEBPACK_IMPORTED_MODULE_2___default.a.useState([]),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      hiddenBuffer = _React$useState6[0],\n      setHiddenBuffer = _React$useState6[1];\n\n  var hideRepostsEffective = resolveHideReposts(hideReposts, hideRepostsOverride);\n  var langParam = urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"LANGUAGE_KEY\"]) || null;\n  var searchInSelectedLang = searchInLanguage && !ignoreSearchInLanguage;\n  var languageParams = Object(util_default_languages__WEBPACK_IMPORTED_MODULE_5__[\"resolveLangForClaimSearch\"])(languageSetting, searchInSelectedLang, searchLanguages, langParam);\n  var claimTypeParam = claimType || defaultClaimType || null;\n  var streamTypeParam = streamType || defaultStreamType || null;\n  var contentTypeParam = urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CONTENT_KEY\"]);\n\n  if (contentTypeParam) {\n    switch (contentTypeParam) {\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CLAIM_COLLECTION\"]:\n        claimTypeParam = contentTypeParam;\n        streamTypeParam = undefined;\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CLAIM_REPOST\"]:\n        claimTypeParam = contentTypeParam;\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CLAIM_CHANNEL\"]:\n        claimTypeParam = constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CLAIM_CHANNEL\"];\n        streamTypeParam = undefined;\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FILE_VIDEO\"]:\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FILE_AUDIO\"]:\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FILE_IMAGE\"]:\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FILE_MODEL\"]:\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FILE_BINARY\"]:\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FILE_DOCUMENT\"]:\n        streamTypeParam = contentTypeParam;\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CONTENT_ALL\"]:\n        claimTypeParam = undefined;\n        streamTypeParam = undefined;\n        break;\n\n      default:\n        console.log('Invalid or unhandled CONTENT_KEY:', contentTypeParam); // eslint-disable-line no-console\n\n        break;\n    }\n  }\n\n  var durationParam = Object(effects_use_persistent_user_param__WEBPACK_IMPORTED_MODULE_20__[\"default\"])([urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"DURATION_KEY\"]) || constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"DURATION_ALL\"]], 'durUser', null);\n\n  var _usePersistedState = Object(effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_21__[\"default\"])(\"durUserMinutes-\".concat(location.pathname), 5),\n      _usePersistedState2 = _slicedToArray(_usePersistedState, 1),\n      durationMinutes = _usePersistedState2[0];\n\n  var channelIdsInUrl = urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CHANNEL_IDS_KEY\"]);\n  var channelIdsParam = channelIdsInUrl ? channelIdsInUrl.split(',') : channelIds;\n  var excludedIdsParam = excludedChannelIds;\n  var feeAmountParam = urlParams.get('fee_amount') || feeAmount;\n  var originalPageSize = 12;\n  var dynamicPageSize = isLargeScreen ? Math.ceil(originalPageSize / 2 * 6) : Math.ceil(originalPageSize / 2 * 4);\n  var orderParam = Object(effects_use_persistent_user_param__WEBPACK_IMPORTED_MODULE_20__[\"default\"])([orderBy, urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_KEY\"]), defaultOrderBy], 'orderUser', constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_TRENDING\"]);\n  var options = {\n    page_size: dynamicPageSize,\n    page: page,\n    name: name,\n    claim_type: claimType || ['stream', 'repost', 'channel'],\n    // no_totals makes it so the sdk doesn't have to calculate total number pages for pagination\n    // it's faster, but we will need to remove it if we start using total_pages\n    no_totals: true,\n    not_channel_ids: isChannel ? undefined : mutedAndBlockedChannelIds,\n    not_tags: util_claim_search__WEBPACK_IMPORTED_MODULE_7__[\"CsOptions\"].not_tags(notTags, showNsfw, hideMembersOnly),\n    order_by: resolveOrderByOption(orderParam, sortByParam),\n    remove_duplicates: isChannel ? undefined : true\n  };\n\n  if (config__WEBPACK_IMPORTED_MODULE_0__[\"ENABLE_NO_SOURCE_CLAIMS\"] && hasNoSource) {\n    options.has_no_source = true;\n  } else if (hasSource || !config__WEBPACK_IMPORTED_MODULE_0__[\"ENABLE_NO_SOURCE_CLAIMS\"] && (!claimType || claimType === 'stream')) {\n    options.has_source = true;\n  }\n\n  if (limitClaimsPerChannel) {\n    options.limit_claims_per_channel = limitClaimsPerChannel;\n  }\n\n  if (feeAmountParam && claimType !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CLAIM_CHANNEL\"]) {\n    options.fee_amount = feeAmountParam;\n  }\n\n  if (claimIds) {\n    options.claim_ids = claimIds;\n  }\n\n  if (channelIdsParam) {\n    options.channel_ids = channelIdsParam;\n  }\n\n  if (excludedIdsParam) {\n    options.not_channel_ids = (options.not_channel_ids || []).concat(excludedIdsParam);\n  }\n\n  if (tagsParam) {\n    if (tagsParam !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"TAGS_ALL\"] && tagsParam !== '') {\n      if (tagsParam === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"TAGS_FOLLOWED\"]) {\n        options.any_tags = followed;\n      } else if (Array.isArray(tagsParam)) {\n        options.any_tags = tagsParam;\n      } else {\n        options.any_tags = tagsParam.split(',');\n      }\n    }\n  }\n\n  if (repostedClaimId) {\n    // SDK chokes on reposted_claim_id of null or false, needs to not be present if no value\n    options.reposted_claim_id = repostedClaimId;\n  } // IF release time, set it, else set fallback release times using the hack below.\n\n\n  if (releaseTime && claimTypeParam !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CLAIM_CHANNEL\"]) {\n    options.release_time = releaseTime;\n  } else if (claimTypeParam !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CLAIM_CHANNEL\"]) {\n    if (orderParam === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_TOP\"] && freshnessParam !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FRESH_ALL\"]) {\n      options.release_time = \">\".concat(Math.floor(moment__WEBPACK_IMPORTED_MODULE_10___default()().subtract(1, freshnessParam).startOf('hour').unix()));\n    } else if (orderParam === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_NEW\"] || orderParam === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_TRENDING\"]) {\n      // Warning - hack below\n      // If users are following more than 10 channels or tags, limit results to stuff less than a year old\n      // For more than 20, drop it down to 6 months\n      // This helps with timeout issues for users that are following a ton of stuff\n      // https://github.com/lbryio/lbry-sdk/issues/2420\n      if (options.channel_ids && options.channel_ids.length > 20 || options.any_tags && options.any_tags.length > 20) {\n        options.release_time = \">\".concat(Math.floor(moment__WEBPACK_IMPORTED_MODULE_10___default()().subtract(3, constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FRESH_MONTH\"]).startOf('week').unix()));\n      } else if (options.channel_ids && options.channel_ids.length > 10 || options.any_tags && options.any_tags.length > 10) {\n        options.release_time = \">\".concat(Math.floor(moment__WEBPACK_IMPORTED_MODULE_10___default()().subtract(1, constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FRESH_YEAR\"]).startOf('week').unix()));\n      } else {\n        // Hack for at least the New page until https://github.com/lbryio/lbry-sdk/issues/2591 is fixed\n        options.release_time = \"<\".concat(Math.floor(moment__WEBPACK_IMPORTED_MODULE_10___default()().startOf('minute').unix()));\n      }\n    }\n  }\n\n  if (durationParam) {\n    switch (durationParam) {\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"DURATION_ALL\"]:\n        // Do nothing (no options needed)\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"DURATION_SHORT\"]:\n        options.duration = '<=240';\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"DURATION_LONG\"]:\n        options.duration = '>=1200';\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"DURATION_GT_EQ\"]:\n        options.duration = \">=\".concat((durationMinutes || 0) * 60);\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"DURATION_LT_EQ\"]:\n        options.duration = \"<=\".concat((durationMinutes || 0) * 60);\n        break;\n\n      default:\n        console.error('Unhandled duration: ' + durationParam);\n        break;\n    }\n  }\n\n  if (streamTypeParam && streamTypeParam !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CONTENT_ALL\"] && claimType !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CLAIM_CHANNEL\"]) {\n    options.stream_types = typeof streamTypeParam === 'string' ? [streamTypeParam] : streamTypeParam;\n  }\n\n  if (claimTypeParam) {\n    if (claimTypeParam !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CONTENT_ALL\"]) {\n      if (Array.isArray(claimTypeParam)) {\n        options.claim_type = claimTypeParam;\n      } else {\n        options.claim_type = [claimTypeParam];\n      }\n    }\n  }\n\n  if (languageParams) {\n    if (languageParams !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"LANGUAGES_ALL\"]) {\n      options.any_languages = languageParams.split(',');\n    }\n  }\n\n  if (tagsParam) {\n    if (tagsParam !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"TAGS_ALL\"] && tagsParam !== '') {\n      if (tagsParam === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"TAGS_FOLLOWED\"]) {\n        options.any_tags = followed;\n      } else if (Array.isArray(tagsParam)) {\n        options.any_tags = tagsParam;\n      } else {\n        options.any_tags = tagsParam.split(',');\n      }\n    }\n  }\n\n  if (hideRepostsEffective && !options.reposted_claim_id) {\n    if (Array.isArray(options.claim_type)) {\n      if (options.claim_type.length > 1) {\n        options.claim_type = options.claim_type.filter(function (claimType) {\n          return claimType !== 'repost';\n        });\n      }\n    } else {\n      options.claim_type = ['stream', 'channel'];\n    }\n  }\n\n  var hasMatureTags = tagsParam && tagsParam.split(',').some(function (t) {\n    return constants_tags__WEBPACK_IMPORTED_MODULE_4__[\"MATURE_TAGS\"].includes(t);\n  });\n  var searchKey = Object(util_claim__WEBPACK_IMPORTED_MODULE_6__[\"createNormalizedClaimSearchKey\"])(options);\n  var claimSearchResult = claimSearchByQuery[searchKey];\n  var claimSearchResultLastPageReached = claimSearchByQueryLastPageReached[searchKey];\n  var isUnfetchedClaimSearch = claimSearchResult === undefined; // uncomment to fix an item on a page\n  //   const fixUri = 'lbry://@corbettreport#0/lbryodysee#5';\n  //   if (\n  //     orderParam === CS.ORDER_BY_NEW &&\n  //     claimSearchResult &&\n  //     claimSearchResult.length > 2 &&\n  //     window.location.pathname === '/$/rabbithole'\n  //   ) {\n  //     if (claimSearchResult.indexOf(fixUri) !== -1) {\n  //       claimSearchResult.splice(claimSearchResult.indexOf(fixUri), 1);\n  //     } else {\n  //       claimSearchResult.pop();\n  //     }\n  //     claimSearchResult.splice(2, 0, fixUri);\n  //   }\n\n  var _React$useState7 = react__WEBPACK_IMPORTED_MODULE_2___default.a.useState(null),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      prevOptions = _React$useState8[0],\n      setPrevOptions = _React$useState8[1];\n\n  if (!isJustScrollingToNewPage(prevOptions, options)) {\n    // --- New search, or search options changed.\n    setPrevOptions(options);\n\n    if (didNavigateForward) {\n      // --- Reset the page.\n      options.page = 1;\n      setPage(options.page);\n    } else if (claimSearchResult) {\n      // --- Update 'page' based on retrieved 'claimSearchResult'.\n      options.page = Math.ceil(claimSearchResult.length / dynamicPageSize);\n\n      if (options.page !== page) {\n        setPage(options.page);\n      }\n    }\n  }\n\n  var shouldPerformSearch = !uris && (claimSearchResult === undefined || didNavigateForward || !loading && !claimSearchResultLastPageReached && claimSearchResult && claimSearchResult.length && claimSearchResult.length < dynamicPageSize * options.page && claimSearchResult.length % dynamicPageSize === 0); // Don't use the query from createNormalizedClaimSearchKey for the effect since that doesn't include page & release_time\n\n  var optionsStringForEffect = JSON.stringify(options);\n  var timedOutMessage = react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"p\", null, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_i18nMessage__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n    tokens: {\n      again: react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_button__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n        button: \"link\",\n        label: __('try again in a few seconds.'),\n        onClick: function onClick() {\n          return setForceRefresh(Date.now());\n        }\n      })\n    }\n  }, \"Sorry, your request timed out. Modify your options or %again%\")), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"p\", null, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_i18nMessage__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n    tokens: {\n      contact_support: react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_button__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n        button: \"link\",\n        label: __('contact support'),\n        href: \"https://odysee.com/@OdyseeHelp:b?view=about\"\n      })\n    }\n  }, \"If you continue to have issues, please %contact_support%.\"))); // **************************************************************************\n  // **************************************************************************\n\n  var finalUris;\n\n  if (uris) {\n    // --- direct uris\n    finalUris = uris;\n    injectPinUrls(finalUris, orderParam, pins, resolvedPinUris);\n    finalUris = filterExcludedUris(finalUris, excludeUris);\n  } else {\n    // --- searched uris\n    if (isUnfetchedClaimSearch && prevUris.current) {\n      finalUris = prevUris.current;\n    } else {\n      finalUris = claimSearchResult;\n      injectPinUrls(finalUris, orderParam, pins, resolvedPinUris);\n      finalUris = filterExcludedUris(finalUris, excludeUris);\n      prevUris.current = finalUris;\n    }\n  } // **************************************************************************\n  // Helpers\n  // **************************************************************************\n  // Returns true if the change in 'options' indicate that we are simply scrolling\n  // down to a new page; false otherwise.\n\n\n  function isJustScrollingToNewPage(prevOptions, options) {\n    if (!prevOptions) {\n      // It's a new search, or we just popped back from a different view.\n      return false;\n    } // Compare every field except for 'page' and 'release_time'.\n    // There might be better ways to achieve this.\n\n\n    var tmpPrevOptions = _objectSpread({}, prevOptions);\n\n    tmpPrevOptions.page = -1;\n    tmpPrevOptions.release_time = '';\n\n    var tmpOptions = _objectSpread({}, options);\n\n    tmpOptions.page = -1;\n    tmpOptions.release_time = '';\n    return JSON.stringify(tmpOptions) === JSON.stringify(tmpPrevOptions);\n  }\n\n  function getParamFromTags(t) {\n    if (t === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"TAGS_ALL\"] || t === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"TAGS_FOLLOWED\"]) {\n      return t;\n    } else if (Array.isArray(t)) {\n      return t.join(',');\n    }\n  }\n\n  function handleScrollBottom() {\n    if (maxPages !== undefined && page === maxPages) {\n      return;\n    }\n\n    if (!loading && infiniteScroll) {\n      if (claimSearchResult && !claimSearchResultLastPageReached) {\n        setPage(page + 1);\n      }\n    }\n  }\n\n  function resolveHideReposts(hideRepostSetting, hideRepostOverride) {\n    if (hideRepostOverride === undefined || hideRepostOverride === null) {\n      return hideRepostSetting;\n    } else {\n      return hideRepostOverride;\n    }\n  }\n\n  function resolveOrderByOption(orderBy, sortBy) {\n    var order_by;\n\n    switch (orderBy) {\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_TRENDING\"]:\n        order_by = constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_TRENDING_VALUE\"];\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_NEW\"]:\n        order_by = constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_NEW_VALUE\"];\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_NEW_ASC\"]:\n        order_by = constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_NEW_ASC_VALUE\"];\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_NAME_ASC\"]:\n        order_by = constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_NAME_ASC_VALUE\"];\n        break;\n\n      default:\n        order_by = constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_TOP_VALUE\"];\n    }\n\n    if (orderBy === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_NEW\"] && sortBy === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"SORT_BY\"].OLDEST.key) {\n      return order_by.map(function (x) {\n        return \"\".concat(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"SORT_BY\"].OLDEST.opt).concat(x);\n      });\n    }\n\n    return order_by;\n  }\n\n  function injectPinUrls(uris, order, pins, resolvedPinUris) {\n    if (!pins || !uris || uris.length <= 2 || pins.onlyPinForOrder && pins.onlyPinForOrder !== order) {\n      return;\n    }\n\n    if (resolvedPinUris) {\n      resolvedPinUris.forEach(function (pin) {\n        if (uris.includes(pin)) {\n          uris.splice(uris.indexOf(pin), 1);\n        } else {\n          uris.pop();\n        }\n      });\n      uris.splice.apply(uris, [2, 0].concat(_toConsumableArray(resolvedPinUris)));\n    }\n  }\n\n  function filterExcludedUris(uris, excludeUris) {\n    if (uris && excludeUris && excludeUris.length) {\n      return uris.filter(function (uri) {\n        return !excludeUris.includes(uri);\n      });\n    }\n\n    return uris;\n  }\n\n  function onHidden(uri) {\n    if (hiddenBuffer.indexOf(uri) === -1) {\n      var newBuffer = hiddenBuffer;\n      newBuffer.push(uri);\n      setHiddenBuffer(newBuffer);\n    }\n  } // **************************************************************************\n  // **************************************************************************\n\n\n  Object(effects_use_fetch_view_count__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(fetchViewCount, finalUris, claimsByUri, doFetchViewCount);\n  react__WEBPACK_IMPORTED_MODULE_2___default.a.useEffect(function () {\n    console.log('channelIds: ', channelIds);\n\n    if (channelIds) {\n      doFetchOdyseeMembershipForChannelIds(channelIds);\n    }\n  }, [channelIds, doFetchOdyseeMembershipForChannelIds]);\n  react__WEBPACK_IMPORTED_MODULE_2___default.a.useEffect(function () {\n    if (shouldPerformSearch) {\n      var searchOptions = JSON.parse(optionsStringForEffect);\n      doClaimSearch(searchOptions);\n    }\n  }, [doClaimSearch, shouldPerformSearch, optionsStringForEffect, forceRefresh]);\n  var headerToUse = header || react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_claimListHeader__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n    channelIds: channelIds,\n    defaultTags: defaultTags,\n    tags: tags,\n    freshness: freshness,\n    defaultFreshness: defaultFreshness,\n    claimType: claimType,\n    streamType: streamType,\n    defaultStreamType: defaultStreamType,\n    feeAmount: feeAmount // ENABLE_PAID_CONTENT_DISCOVER or something\n    ,\n    orderBy: orderBy,\n    defaultOrderBy: defaultOrderBy,\n    hideAdvancedFilter: hideAdvancedFilter,\n    hasMatureTags: hasMatureTags,\n    hiddenNsfwMessage: hiddenNsfwMessage,\n    setPage: setPage,\n    tileLayout: tileLayout,\n    hideLayoutButton: hideLayoutButton,\n    hideFilters: hideFilters,\n    scrollAnchor: scrollAnchor\n  });\n  return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, headerLabel && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"label\", {\n    className: \"claim-list__header-label\"\n  }, headerLabel), tileLayout ? react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", null, !repostedClaimId && showHeader && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"section__header--actions\"\n  }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"section__actions\"\n  }, headerToUse, searchInSelectedLang && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_langFilterIndicator__WEBPACK_IMPORTED_MODULE_15__[\"default\"], null)), meta && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"section__actions--no-margin\"\n  }, meta)), subSection && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", null, subSection), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_claimList__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n    tileLayout: true,\n    loading: loading,\n    uris: finalUris,\n    prefixUris: prefixUris,\n    onScrollBottom: handleScrollBottom,\n    page: page,\n    pageSize: dynamicPageSize,\n    timedOutMessage: timedOutMessage,\n    renderProperties: renderProperties,\n    includeSupportAction: includeSupportAction,\n    injectedItem: injectedItem,\n    showHiddenByUser: showHiddenByUser,\n    searchOptions: options,\n    showNoSourceClaims: showNoSourceClaims,\n    empty: empty,\n    maxClaimRender: maxClaimRender,\n    loadedCallback: loadedCallback,\n    swipeLayout: swipeLayout,\n    onHidden: onHidden\n  }), loading && useSkeletonScreen && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"claim-grid\"\n  }, new Array(dynamicPageSize).fill(1).map(function (x, i) {\n    return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_claimPreviewTile__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n      key: i,\n      placeholder: \"loading\",\n      pulse: true\n    });\n  }))) : react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", null, showHeader && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"section__header--actions\"\n  }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"section__actions\"\n  }, headerToUse, searchInSelectedLang && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_langFilterIndicator__WEBPACK_IMPORTED_MODULE_15__[\"default\"], null)), meta && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"section__actions--no-margin\"\n  }, meta)), subSection && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", null, subSection), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_claimList__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n    type: type,\n    loading: loading,\n    uris: finalUris,\n    prefixUris: prefixUris,\n    onScrollBottom: handleScrollBottom,\n    page: page,\n    pageSize: dynamicPageSize,\n    timedOutMessage: timedOutMessage,\n    renderProperties: renderProperties,\n    includeSupportAction: includeSupportAction,\n    injectedItem: injectedItem,\n    showHiddenByUser: showHiddenByUser,\n    searchOptions: options,\n    showNoSourceClaims: hasNoSource || showNoSourceClaims,\n    empty: empty,\n    maxClaimRender: maxClaimRender,\n    loadedCallback: loadedCallback,\n    swipeLayout: swipeLayout,\n    onHidden: onHidden\n  }), loading && useSkeletonScreen && new Array(dynamicPageSize).fill(1).map(function (x, i) {\n    return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_claimPreview__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n      showNoSourceClaims: hasNoSource || showNoSourceClaims,\n      key: i,\n      placeholder: \"loading\",\n      type: type\n    });\n  })));\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_router__WEBPACK_IMPORTED_MODULE_3__[\"withRouter\"])(ClaimListDiscover));\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvY29tcG9uZW50L2NsYWltTGlzdERpc2NvdmVyL3ZpZXcuanN4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL3VpL2NvbXBvbmVudC9jbGFpbUxpc3REaXNjb3Zlci92aWV3LmpzeD8wN2Y4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5pbXBvcnQgeyBFTkFCTEVfTk9fU09VUkNFX0NMQUlNUyB9IGZyb20gJ2NvbmZpZyc7XG5pbXBvcnQgdHlwZSB7IE5vZGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgKiBhcyBDUyBmcm9tICdjb25zdGFudHMvY2xhaW1fc2VhcmNoJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB3aXRoUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcbmltcG9ydCB7IE1BVFVSRV9UQUdTIH0gZnJvbSAnY29uc3RhbnRzL3RhZ3MnO1xuaW1wb3J0IHsgcmVzb2x2ZUxhbmdGb3JDbGFpbVNlYXJjaCB9IGZyb20gJ3V0aWwvZGVmYXVsdC1sYW5ndWFnZXMnO1xuaW1wb3J0IHsgY3JlYXRlTm9ybWFsaXplZENsYWltU2VhcmNoS2V5IH0gZnJvbSAndXRpbC9jbGFpbSc7XG5pbXBvcnQgeyBDc09wdGlvbnMgfSBmcm9tICd1dGlsL2NsYWltLXNlYXJjaCc7XG5pbXBvcnQgeyBzcGxpdEJ5U2VwYXJhdG9yIH0gZnJvbSAndXRpbC9sYnJ5VVJJJztcbmltcG9ydCBCdXR0b24gZnJvbSAnY29tcG9uZW50L2J1dHRvbic7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgQ2xhaW1MaXN0IGZyb20gJ2NvbXBvbmVudC9jbGFpbUxpc3QnO1xuaW1wb3J0IENsYWltUHJldmlldyBmcm9tICdjb21wb25lbnQvY2xhaW1QcmV2aWV3JztcbmltcG9ydCBDbGFpbVByZXZpZXdUaWxlIGZyb20gJ2NvbXBvbmVudC9jbGFpbVByZXZpZXdUaWxlJztcbmltcG9ydCBJMThuTWVzc2FnZSBmcm9tICdjb21wb25lbnQvaTE4bk1lc3NhZ2UnO1xuaW1wb3J0IExhbmdGaWx0ZXJJbmRpY2F0b3IgZnJvbSAnY29tcG9uZW50L2xhbmdGaWx0ZXJJbmRpY2F0b3InO1xuaW1wb3J0IENsYWltTGlzdEhlYWRlciBmcm9tICdjb21wb25lbnQvY2xhaW1MaXN0SGVhZGVyJztcbmltcG9ydCB1c2VGZXRjaFZpZXdDb3VudCBmcm9tICdlZmZlY3RzL3VzZS1mZXRjaC12aWV3LWNvdW50JztcbmltcG9ydCB1c2VSZXNvbHZlUGlucyBmcm9tICdlZmZlY3RzL3VzZS1yZXNvbHZlLXBpbnMnO1xuaW1wb3J0IHsgdXNlSXNMYXJnZVNjcmVlbiB9IGZyb20gJ2VmZmVjdHMvdXNlLXNjcmVlbnNpemUnO1xuaW1wb3J0IHVzZVBlcnNpc3RlbnRVc2VyUGFyYW0gZnJvbSAnZWZmZWN0cy91c2UtcGVyc2lzdGVudC11c2VyLXBhcmFtJztcbmltcG9ydCB1c2VQZXJzaXN0ZWRTdGF0ZSBmcm9tICdlZmZlY3RzL3VzZS1wZXJzaXN0ZWQtc3RhdGUnO1xuXG50eXBlIFByb3BzID0ge1xuICB1cmlzOiBBcnJheTxzdHJpbmc+LFxuICBwcmVmaXhVcmlzPzogQXJyYXk8c3RyaW5nPixcbiAgcGlucz86IHsgdXJscz86IEFycmF5PHN0cmluZz4sIGNsYWltSWRzPzogQXJyYXk8c3RyaW5nPiwgb25seVBpbkZvck9yZGVyPzogc3RyaW5nIH0sXG4gIG5hbWU/OiBzdHJpbmcsXG4gIHR5cGU6IHN0cmluZyxcbiAgcGFnZVNpemU/OiBudW1iZXIsXG5cbiAgZmV0Y2hWaWV3Q291bnQ/OiBib29sZWFuLFxuICBoaWRlTWVtYmVyc09ubHk/OiBib29sZWFuLCAvLyB1bmRlZmluZWQgPSB1c2UgU0VUVElORy5ISURFX01FTUJFUlNfT05MWV9DT05URU5UOyB0cnVlL2ZhbHNlOiB1c2UgdGhpcyBvdmVycmlkZS5cbiAgaGlkZVJlcG9zdHNPdmVycmlkZT86IGJvb2xlYW4sIC8vIHVuZGVmaW5lZCA9IHVzZSBTRVRUSU5HUy5ISURFX1JFUE9TVFM7IHRydWUvZmFsc2U6IHVzZSB0aGlzIG92ZXJyaWRlLlxuICBoYXNOb1NvdXJjZT86IGJvb2xlYW4sXG4gIGhhc1NvdXJjZT86IGJvb2xlYW4sXG4gIGhpZGVBZHZhbmNlZEZpbHRlcj86IGJvb2xlYW4sXG4gIGhpZGVGaWx0ZXJzPzogYm9vbGVhbixcbiAgaW5jbHVkZVN1cHBvcnRBY3Rpb24/OiBib29sZWFuLFxuICBpbmZpbml0ZVNjcm9sbD86IEJvb2xlYW4sXG4gIGlzQ2hhbm5lbD86IGJvb2xlYW4sXG4gIHBlcnNvbmFsVmlldzogYm9vbGVhbixcbiAgc2hvd0hlYWRlcjogYm9vbGVhbixcbiAgc2hvd0hpZGRlbkJ5VXNlcj86IGJvb2xlYW4sXG4gIHNob3dOb1NvdXJjZUNsYWltcz86IGJvb2xlYW4sXG4gIHRpbGVMYXlvdXQ6IGJvb2xlYW4sXG4gIHNlYXJjaExhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sXG4gIGlnbm9yZVNlYXJjaEluTGFuZ3VhZ2U/OiBib29sZWFuLCAvLyBOZWdhdGUgdGhlIHJlZHV4IHNldHRpbmcgd2hlcmUgaXQgZG9lc24ndCBtYWtlIHNlbnNlLlxuXG4gIG9yZGVyQnk/OiBBcnJheTxzdHJpbmc+LCAvLyBUcmVuZGluZywgTmV3LCBUb3BcbiAgZGVmYXVsdE9yZGVyQnk/OiBzdHJpbmcsXG4gIHNvcnRCeT86IEFycmF5PHN0cmluZz4sIC8vIE5ld2VzdCBGaXJzdCwgT2xkZXN0IEZpcnN0XG4gIGZyZXNobmVzcz86IHN0cmluZyxcbiAgZGVmYXVsdEZyZXNobmVzcz86IHN0cmluZyxcblxuICB0YWdzOiBzdHJpbmcsIC8vIHRoZXNlIGFyZSBqdXN0IGdvaW5nIHRvIGJlIHN0cmluZy4gcGFzcyBhIENTViBpZiB5b3Ugd2FudCBtdWx0aVxuICBub3RUYWdzPzogQXJyYXk8c3RyaW5nPixcbiAgZGVmYXVsdFRhZ3M6IHN0cmluZyxcblxuICBjbGFpbVR5cGU/OiBzdHJpbmcgfCBBcnJheTxzdHJpbmc+LFxuICBkZWZhdWx0Q2xhaW1UeXBlPzogQXJyYXk8c3RyaW5nPixcblxuICBzdHJlYW1UeXBlPzogc3RyaW5nIHwgQXJyYXk8c3RyaW5nPixcbiAgZGVmYXVsdFN0cmVhbVR5cGU/OiBzdHJpbmcgfCBBcnJheTxzdHJpbmc+LFxuXG4gIGVtcHR5Pzogc3RyaW5nLFxuICBmZWVBbW91bnQ/OiBzdHJpbmcsXG4gIHJlbGVhc2VUaW1lPzogc3RyaW5nLFxuICByZXBvc3RlZENsYWltSWQ/OiBzdHJpbmcsXG4gIHNjcm9sbEFuY2hvcj86IHN0cmluZyxcbiAgbWF4UGFnZXM/OiBudW1iZXIsXG4gIGxpbWl0Q2xhaW1zUGVyQ2hhbm5lbD86IG51bWJlcixcblxuICBjaGFubmVsSWRzPzogQXJyYXk8c3RyaW5nPixcbiAgZXhjbHVkZWRDaGFubmVsSWRzPzogQXJyYXk8c3RyaW5nPixcbiAgY2xhaW1JZHM/OiBBcnJheTxzdHJpbmc+LFxuICBzdWJzY3JpYmVkQ2hhbm5lbHM6IEFycmF5PFN1YnNjcmlwdGlvbj4sXG5cbiAgaGVhZGVyPzogTm9kZSxcbiAgaGVhZGVyTGFiZWw/OiBzdHJpbmcgfCBOb2RlLFxuICBoaWRkZW5Oc2Z3TWVzc2FnZT86IE5vZGUsXG4gIGluamVjdGVkSXRlbT86IExpc3RJbmplY3RlZEl0ZW0sXG4gIG1ldGE/OiBOb2RlLFxuICBzdWJTZWN0aW9uPzogTm9kZSwgLy8gQWRkaXRpb25hbCBzZWN0aW9uIGJlbG93IFtIZWFkZXJ8TWV0YV1cbiAgcmVuZGVyUHJvcGVydGllcz86IChDbGFpbSkgPT4gTm9kZSxcblxuICBoaXN0b3J5OiB7IGFjdGlvbjogc3RyaW5nLCBwdXNoOiAoc3RyaW5nKSA9PiB2b2lkLCByZXBsYWNlOiAoc3RyaW5nKSA9PiB2b2lkIH0sXG4gIGxvY2F0aW9uOiB7IHNlYXJjaDogc3RyaW5nLCBwYXRobmFtZTogc3RyaW5nIH0sXG5cbiAgLy8gLS0tIHNlbGVjdCAtLS1cbiAgZm9sbG93ZWRUYWdzPzogQXJyYXk8VGFnPixcbiAgY2xhaW1TZWFyY2hCeVF1ZXJ5OiB7IFtzdHJpbmddOiBBcnJheTxzdHJpbmc+IH0sXG4gIGNsYWltU2VhcmNoQnlRdWVyeUxhc3RQYWdlUmVhY2hlZDogeyBbc3RyaW5nXTogYm9vbGVhbiB9LFxuICBjbGFpbXNCeVVyaTogeyBbc3RyaW5nXTogYW55IH0sXG4gIGNsYWltc0J5SWQ6IHsgW3N0cmluZ106IGFueSB9LFxuICBsb2FkaW5nOiBib29sZWFuLFxuICBzaG93TnNmdzogYm9vbGVhbixcbiAgaGlkZVJlcG9zdHM6IGJvb2xlYW4sXG4gIGxhbmd1YWdlU2V0dGluZzogc3RyaW5nLFxuICBtdXRlZFVyaXM6IEFycmF5PHN0cmluZz4sXG4gIGJsb2NrZWRVcmlzOiBBcnJheTxzdHJpbmc+LFxuICBzZWFyY2hJbkxhbmd1YWdlOiBib29sZWFuLFxuXG4gIC8vIC0tLSBwZXJmb3JtIC0tLVxuICBkb0NsYWltU2VhcmNoOiAoe30pID0+IHZvaWQsXG4gIGRvRmV0Y2hWaWV3Q291bnQ6IChjbGFpbUlkQ3N2OiBzdHJpbmcpID0+IHZvaWQsXG4gIGRvRmV0Y2hPZHlzZWVNZW1iZXJzaGlwRm9yQ2hhbm5lbElkczogKGNsYWltSWRzOiBDbGFpbUlkcykgPT4gdm9pZCxcbiAgZG9SZXNvbHZlQ2xhaW1JZHM6IChBcnJheTxzdHJpbmc+KSA9PiBQcm9taXNlPGFueT4sXG4gIGRvUmVzb2x2ZVVyaXM6IChBcnJheTxzdHJpbmc+LCBib29sZWFuKSA9PiBQcm9taXNlPGFueT4sXG5cbiAgaGlkZUxheW91dEJ1dHRvbj86IGJvb2xlYW4sXG4gIGxvYWRlZENhbGxiYWNrPzogKG51bWJlcikgPT4gdm9pZCxcbiAgbWF4Q2xhaW1SZW5kZXI/OiBudW1iZXIsXG4gIHVzZVNrZWxldG9uU2NyZWVuPzogYm9vbGVhbixcbiAgZXhjbHVkZVVyaXM/OiBBcnJheTxzdHJpbmc+LFxuXG4gIHN3aXBlTGF5b3V0OiBib29sZWFuLFxufTtcblxuZnVuY3Rpb24gQ2xhaW1MaXN0RGlzY292ZXIocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBkb0NsYWltU2VhcmNoLFxuICAgIGNsYWltU2VhcmNoQnlRdWVyeSxcbiAgICBzaG93SGVhZGVyID0gdHJ1ZSxcbiAgICB0eXBlLFxuICAgIGNsYWltU2VhcmNoQnlRdWVyeUxhc3RQYWdlUmVhY2hlZCxcbiAgICB0YWdzLFxuICAgIG5vdFRhZ3MsXG4gICAgZGVmYXVsdFRhZ3MsXG4gICAgbG9hZGluZyxcbiAgICBtZXRhLFxuICAgIHN1YlNlY3Rpb24sXG4gICAgY2hhbm5lbElkcyxcbiAgICBleGNsdWRlZENoYW5uZWxJZHMsXG4gICAgc2hvd05zZncsXG4gICAgaGlkZVJlcG9zdHMsXG4gICAgZmV0Y2hWaWV3Q291bnQsXG4gICAgaGlzdG9yeSxcbiAgICBsb2NhdGlvbixcbiAgICBtdXRlZFVyaXMsXG4gICAgYmxvY2tlZFVyaXMsXG4gICAgaGlkZGVuTnNmd01lc3NhZ2UsXG4gICAgZGVmYXVsdE9yZGVyQnksXG4gICAgc29ydEJ5LFxuICAgIG9yZGVyQnksXG4gICAgaGVhZGVyTGFiZWwsXG4gICAgaGVhZGVyLFxuICAgIG5hbWUsXG4gICAgY2xhaW1UeXBlLFxuICAgIGRlZmF1bHRDbGFpbVR5cGUsXG4gICAgc3RyZWFtVHlwZSxcbiAgICBkZWZhdWx0U3RyZWFtVHlwZSxcbiAgICBmcmVzaG5lc3MsXG4gICAgZGVmYXVsdEZyZXNobmVzcyA9IENTLkZSRVNIX1dFRUssXG4gICAgcmVuZGVyUHJvcGVydGllcyxcbiAgICBpbmNsdWRlU3VwcG9ydEFjdGlvbixcbiAgICByZXBvc3RlZENsYWltSWQsXG4gICAgaGlkZUFkdmFuY2VkRmlsdGVyLFxuICAgIGhpZGVNZW1iZXJzT25seSxcbiAgICBpbmZpbml0ZVNjcm9sbCA9IHRydWUsXG4gICAgZm9sbG93ZWRUYWdzLFxuICAgIGluamVjdGVkSXRlbSxcbiAgICBmZWVBbW91bnQsXG4gICAgdXJpcyxcbiAgICBwcmVmaXhVcmlzLFxuICAgIHBpbnMsXG4gICAgdGlsZUxheW91dCxcbiAgICBoaWRlRmlsdGVycyA9IGZhbHNlLFxuICAgIGNsYWltSWRzLFxuICAgIG1heFBhZ2VzLFxuICAgIGhpZGVSZXBvc3RzT3ZlcnJpZGUsXG4gICAgbGFuZ3VhZ2VTZXR0aW5nLFxuICAgIHNlYXJjaExhbmd1YWdlcyxcbiAgICBzZWFyY2hJbkxhbmd1YWdlLFxuICAgIGlnbm9yZVNlYXJjaEluTGFuZ3VhZ2UsXG4gICAgbGltaXRDbGFpbXNQZXJDaGFubmVsLFxuICAgIHJlbGVhc2VUaW1lLFxuICAgIHNjcm9sbEFuY2hvcixcbiAgICBzaG93SGlkZGVuQnlVc2VyID0gZmFsc2UsXG4gICAgaGFzU291cmNlLFxuICAgIGhhc05vU291cmNlLFxuICAgIGlzQ2hhbm5lbCA9IGZhbHNlLFxuICAgIHNob3dOb1NvdXJjZUNsYWltcyxcbiAgICBlbXB0eSxcbiAgICBjbGFpbXNCeVVyaSxcbiAgICBjbGFpbXNCeUlkLFxuICAgIGRvRmV0Y2hWaWV3Q291bnQsXG4gICAgaGlkZUxheW91dEJ1dHRvbiA9IGZhbHNlLFxuICAgIGxvYWRlZENhbGxiYWNrLFxuICAgIG1heENsYWltUmVuZGVyLFxuICAgIHVzZVNrZWxldG9uU2NyZWVuID0gdHJ1ZSxcbiAgICBleGNsdWRlVXJpcyA9IFtdLFxuICAgIGRvRmV0Y2hPZHlzZWVNZW1iZXJzaGlwRm9yQ2hhbm5lbElkcyxcbiAgICBzd2lwZUxheW91dCA9IGZhbHNlLFxuICAgIGRvUmVzb2x2ZVVyaXMsXG4gICAgZG9SZXNvbHZlQ2xhaW1JZHMsXG4gIH0gPSBwcm9wcztcblxuICBjb25zdCByZXNvbHZlZFBpblVyaXMgPSB1c2VSZXNvbHZlUGlucyh7IHBpbnMsIGNsYWltc0J5SWQsIGRvUmVzb2x2ZUNsYWltSWRzLCBkb1Jlc29sdmVVcmlzIH0pO1xuICBjb25zdCBkaWROYXZpZ2F0ZUZvcndhcmQgPSBoaXN0b3J5LmFjdGlvbiA9PT0gJ1BVU0gnO1xuICBjb25zdCB7IHNlYXJjaCB9ID0gbG9jYXRpb247XG4gIGNvbnN0IHByZXZVcmlzID0gUmVhY3QudXNlUmVmKCk7XG4gIGNvbnN0IFtwYWdlLCBzZXRQYWdlXSA9IFJlYWN0LnVzZVN0YXRlKDEpO1xuICBjb25zdCBbZm9yY2VSZWZyZXNoLCBzZXRGb3JjZVJlZnJlc2hdID0gUmVhY3QudXNlU3RhdGUoKTtcbiAgY29uc3QgaXNMYXJnZVNjcmVlbiA9IHVzZUlzTGFyZ2VTY3JlZW4oKTtcbiAgY29uc3QgZm9sbG93ZWQgPSAoZm9sbG93ZWRUYWdzICYmIGZvbGxvd2VkVGFncy5tYXAoKHQpID0+IHQubmFtZSkpIHx8IFtdO1xuICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHNlYXJjaCk7XG4gIGNvbnN0IHRhZ3NQYXJhbSA9IC8vIGNhbiBiZSAneCx5LHonIG9yICd4JyBvciBbJ3gnLCd5J10gb3IgQ1MuQ09OU1RBTlRcbiAgICAodGFncyAmJiBnZXRQYXJhbUZyb21UYWdzKHRhZ3MpKSB8fFxuICAgICh1cmxQYXJhbXMuZ2V0KENTLlRBR1NfS0VZKSAhPT0gbnVsbCAmJiB1cmxQYXJhbXMuZ2V0KENTLlRBR1NfS0VZKSkgfHxcbiAgICAoZGVmYXVsdFRhZ3MgJiYgZ2V0UGFyYW1Gcm9tVGFncyhkZWZhdWx0VGFncykpO1xuICBjb25zdCBmcmVzaG5lc3NQYXJhbSA9IGZyZXNobmVzcyB8fCB1cmxQYXJhbXMuZ2V0KENTLkZSRVNIX0tFWSkgfHwgZGVmYXVsdEZyZXNobmVzcztcbiAgY29uc3Qgc29ydEJ5UGFyYW0gPSBzb3J0QnkgfHwgdXJsUGFyYW1zLmdldChDUy5TT1JUX0JZX0tFWSkgfHwgQ1MuU09SVF9CWS5ORVdFU1Qua2V5O1xuICBjb25zdCBtdXRlZEFuZEJsb2NrZWRDaGFubmVsSWRzID0gQXJyYXkuZnJvbShcbiAgICBuZXcgU2V0KG11dGVkVXJpcy5jb25jYXQoYmxvY2tlZFVyaXMpLm1hcCgodXJpKSA9PiBzcGxpdEJ5U2VwYXJhdG9yKHVyaSlbMV0pKVxuICApO1xuICBjb25zdCBbaGlkZGVuQnVmZmVyLCBzZXRIaWRkZW5CdWZmZXJdID0gUmVhY3QudXNlU3RhdGUoW10pO1xuICBjb25zdCBoaWRlUmVwb3N0c0VmZmVjdGl2ZSA9IHJlc29sdmVIaWRlUmVwb3N0cyhoaWRlUmVwb3N0cywgaGlkZVJlcG9zdHNPdmVycmlkZSk7XG5cbiAgY29uc3QgbGFuZ1BhcmFtID0gdXJsUGFyYW1zLmdldChDUy5MQU5HVUFHRV9LRVkpIHx8IG51bGw7XG4gIGNvbnN0IHNlYXJjaEluU2VsZWN0ZWRMYW5nID0gc2VhcmNoSW5MYW5ndWFnZSAmJiAhaWdub3JlU2VhcmNoSW5MYW5ndWFnZTtcbiAgY29uc3QgbGFuZ3VhZ2VQYXJhbXMgPSByZXNvbHZlTGFuZ0ZvckNsYWltU2VhcmNoKGxhbmd1YWdlU2V0dGluZywgc2VhcmNoSW5TZWxlY3RlZExhbmcsIHNlYXJjaExhbmd1YWdlcywgbGFuZ1BhcmFtKTtcblxuICBsZXQgY2xhaW1UeXBlUGFyYW0gPSBjbGFpbVR5cGUgfHwgZGVmYXVsdENsYWltVHlwZSB8fCBudWxsO1xuICBsZXQgc3RyZWFtVHlwZVBhcmFtID0gc3RyZWFtVHlwZSB8fCBkZWZhdWx0U3RyZWFtVHlwZSB8fCBudWxsO1xuXG4gIGNvbnN0IGNvbnRlbnRUeXBlUGFyYW0gPSB1cmxQYXJhbXMuZ2V0KENTLkNPTlRFTlRfS0VZKTtcbiAgaWYgKGNvbnRlbnRUeXBlUGFyYW0pIHtcbiAgICBzd2l0Y2ggKGNvbnRlbnRUeXBlUGFyYW0pIHtcbiAgICAgIGNhc2UgQ1MuQ0xBSU1fQ09MTEVDVElPTjpcbiAgICAgICAgY2xhaW1UeXBlUGFyYW0gPSBjb250ZW50VHlwZVBhcmFtO1xuICAgICAgICBzdHJlYW1UeXBlUGFyYW0gPSB1bmRlZmluZWQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDUy5DTEFJTV9SRVBPU1Q6XG4gICAgICAgIGNsYWltVHlwZVBhcmFtID0gY29udGVudFR5cGVQYXJhbTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQ1MuQ0xBSU1fQ0hBTk5FTDpcbiAgICAgICAgY2xhaW1UeXBlUGFyYW0gPSBDUy5DTEFJTV9DSEFOTkVMO1xuICAgICAgICBzdHJlYW1UeXBlUGFyYW0gPSB1bmRlZmluZWQ7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIENTLkZJTEVfVklERU86XG4gICAgICBjYXNlIENTLkZJTEVfQVVESU86XG4gICAgICBjYXNlIENTLkZJTEVfSU1BR0U6XG4gICAgICBjYXNlIENTLkZJTEVfTU9ERUw6XG4gICAgICBjYXNlIENTLkZJTEVfQklOQVJZOlxuICAgICAgY2FzZSBDUy5GSUxFX0RPQ1VNRU5UOlxuICAgICAgICBzdHJlYW1UeXBlUGFyYW0gPSBjb250ZW50VHlwZVBhcmFtO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBDUy5DT05URU5UX0FMTDpcbiAgICAgICAgY2xhaW1UeXBlUGFyYW0gPSB1bmRlZmluZWQ7XG4gICAgICAgIHN0cmVhbVR5cGVQYXJhbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnNvbGUubG9nKCdJbnZhbGlkIG9yIHVuaGFuZGxlZCBDT05URU5UX0tFWTonLCBjb250ZW50VHlwZVBhcmFtKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGR1cmF0aW9uUGFyYW0gPSB1c2VQZXJzaXN0ZW50VXNlclBhcmFtKFt1cmxQYXJhbXMuZ2V0KENTLkRVUkFUSU9OX0tFWSkgfHwgQ1MuRFVSQVRJT05fQUxMXSwgJ2R1clVzZXInLCBudWxsKTtcbiAgY29uc3QgW2R1cmF0aW9uTWludXRlc10gPSB1c2VQZXJzaXN0ZWRTdGF0ZShgZHVyVXNlck1pbnV0ZXMtJHtsb2NhdGlvbi5wYXRobmFtZX1gLCA1KTtcbiAgY29uc3QgY2hhbm5lbElkc0luVXJsID0gdXJsUGFyYW1zLmdldChDUy5DSEFOTkVMX0lEU19LRVkpO1xuICBjb25zdCBjaGFubmVsSWRzUGFyYW0gPSBjaGFubmVsSWRzSW5VcmwgPyBjaGFubmVsSWRzSW5Vcmwuc3BsaXQoJywnKSA6IGNoYW5uZWxJZHM7XG4gIGNvbnN0IGV4Y2x1ZGVkSWRzUGFyYW0gPSBleGNsdWRlZENoYW5uZWxJZHM7XG4gIGNvbnN0IGZlZUFtb3VudFBhcmFtID0gdXJsUGFyYW1zLmdldCgnZmVlX2Ftb3VudCcpIHx8IGZlZUFtb3VudDtcbiAgY29uc3Qgb3JpZ2luYWxQYWdlU2l6ZSA9IDEyO1xuICBjb25zdCBkeW5hbWljUGFnZVNpemUgPSBpc0xhcmdlU2NyZWVuID8gTWF0aC5jZWlsKChvcmlnaW5hbFBhZ2VTaXplIC8gMikgKiA2KSA6IE1hdGguY2VpbCgob3JpZ2luYWxQYWdlU2l6ZSAvIDIpICogNCk7XG4gIGNvbnN0IG9yZGVyUGFyYW0gPSB1c2VQZXJzaXN0ZW50VXNlclBhcmFtKFxuICAgIFtvcmRlckJ5LCB1cmxQYXJhbXMuZ2V0KENTLk9SREVSX0JZX0tFWSksIGRlZmF1bHRPcmRlckJ5XSxcbiAgICAnb3JkZXJVc2VyJyxcbiAgICBDUy5PUkRFUl9CWV9UUkVORElOR1xuICApO1xuXG4gIGxldCBvcHRpb25zOiB7XG4gICAgcGFnZV9zaXplOiBudW1iZXIsXG4gICAgcGFnZTogbnVtYmVyLFxuICAgIG5vX3RvdGFsczogYm9vbGVhbixcbiAgICBhbnlfdGFncz86IEFycmF5PHN0cmluZz4sXG4gICAgYW55X2xhbmd1YWdlcz86IEFycmF5PHN0cmluZz4sXG4gICAgbm90X3RhZ3M6IEFycmF5PHN0cmluZz4sXG4gICAgY2hhbm5lbF9pZHM/OiBBcnJheTxzdHJpbmc+LFxuICAgIGNsYWltX2lkcz86IEFycmF5PHN0cmluZz4sXG4gICAgbm90X2NoYW5uZWxfaWRzPzogQXJyYXk8c3RyaW5nPixcbiAgICBvcmRlcl9ieTogQXJyYXk8c3RyaW5nPixcbiAgICByZWxlYXNlX3RpbWU/OiBzdHJpbmcsXG4gICAgY2xhaW1fdHlwZT86IHN0cmluZyB8IEFycmF5PHN0cmluZz4sXG4gICAgbmFtZT86IHN0cmluZyxcbiAgICBkdXJhdGlvbj86IHN0cmluZyxcbiAgICByZXBvc3RlZF9jbGFpbV9pZD86IHN0cmluZyxcbiAgICBzdHJlYW1fdHlwZXM/OiBhbnksXG4gICAgZmVlX2Ftb3VudD86IHN0cmluZyxcbiAgICBoYXNfc291cmNlPzogYm9vbGVhbixcbiAgICBoYXNfbm9fc291cmNlPzogYm9vbGVhbixcbiAgICBsaW1pdF9jbGFpbXNfcGVyX2NoYW5uZWw/OiBudW1iZXIsXG4gICAgcmVtb3ZlX2R1cGxpY2F0ZXM/OiBib29sZWFuLFxuICB9ID0ge1xuICAgIHBhZ2Vfc2l6ZTogZHluYW1pY1BhZ2VTaXplLFxuICAgIHBhZ2UsXG4gICAgbmFtZSxcbiAgICBjbGFpbV90eXBlOiBjbGFpbVR5cGUgfHwgWydzdHJlYW0nLCAncmVwb3N0JywgJ2NoYW5uZWwnXSxcbiAgICAvLyBub190b3RhbHMgbWFrZXMgaXQgc28gdGhlIHNkayBkb2Vzbid0IGhhdmUgdG8gY2FsY3VsYXRlIHRvdGFsIG51bWJlciBwYWdlcyBmb3IgcGFnaW5hdGlvblxuICAgIC8vIGl0J3MgZmFzdGVyLCBidXQgd2Ugd2lsbCBuZWVkIHRvIHJlbW92ZSBpdCBpZiB3ZSBzdGFydCB1c2luZyB0b3RhbF9wYWdlc1xuICAgIG5vX3RvdGFsczogdHJ1ZSxcbiAgICBub3RfY2hhbm5lbF9pZHM6IGlzQ2hhbm5lbCA/IHVuZGVmaW5lZCA6IG11dGVkQW5kQmxvY2tlZENoYW5uZWxJZHMsXG4gICAgbm90X3RhZ3M6IENzT3B0aW9ucy5ub3RfdGFncyhub3RUYWdzLCBzaG93TnNmdywgaGlkZU1lbWJlcnNPbmx5KSxcbiAgICBvcmRlcl9ieTogcmVzb2x2ZU9yZGVyQnlPcHRpb24ob3JkZXJQYXJhbSwgc29ydEJ5UGFyYW0pLFxuICAgIHJlbW92ZV9kdXBsaWNhdGVzOiBpc0NoYW5uZWwgPyB1bmRlZmluZWQgOiB0cnVlLFxuICB9O1xuXG4gIGlmIChFTkFCTEVfTk9fU09VUkNFX0NMQUlNUyAmJiBoYXNOb1NvdXJjZSkge1xuICAgIG9wdGlvbnMuaGFzX25vX3NvdXJjZSA9IHRydWU7XG4gIH0gZWxzZSBpZiAoaGFzU291cmNlIHx8ICghRU5BQkxFX05PX1NPVVJDRV9DTEFJTVMgJiYgKCFjbGFpbVR5cGUgfHwgY2xhaW1UeXBlID09PSAnc3RyZWFtJykpKSB7XG4gICAgb3B0aW9ucy5oYXNfc291cmNlID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChsaW1pdENsYWltc1BlckNoYW5uZWwpIHtcbiAgICBvcHRpb25zLmxpbWl0X2NsYWltc19wZXJfY2hhbm5lbCA9IGxpbWl0Q2xhaW1zUGVyQ2hhbm5lbDtcbiAgfVxuXG4gIGlmIChmZWVBbW91bnRQYXJhbSAmJiBjbGFpbVR5cGUgIT09IENTLkNMQUlNX0NIQU5ORUwpIHtcbiAgICBvcHRpb25zLmZlZV9hbW91bnQgPSBmZWVBbW91bnRQYXJhbTtcbiAgfVxuXG4gIGlmIChjbGFpbUlkcykge1xuICAgIG9wdGlvbnMuY2xhaW1faWRzID0gY2xhaW1JZHM7XG4gIH1cblxuICBpZiAoY2hhbm5lbElkc1BhcmFtKSB7XG4gICAgb3B0aW9ucy5jaGFubmVsX2lkcyA9IGNoYW5uZWxJZHNQYXJhbTtcbiAgfVxuXG4gIGlmIChleGNsdWRlZElkc1BhcmFtKSB7XG4gICAgb3B0aW9ucy5ub3RfY2hhbm5lbF9pZHMgPSAob3B0aW9ucy5ub3RfY2hhbm5lbF9pZHMgfHwgW10pLmNvbmNhdChleGNsdWRlZElkc1BhcmFtKTtcbiAgfVxuXG4gIGlmICh0YWdzUGFyYW0pIHtcbiAgICBpZiAodGFnc1BhcmFtICE9PSBDUy5UQUdTX0FMTCAmJiB0YWdzUGFyYW0gIT09ICcnKSB7XG4gICAgICBpZiAodGFnc1BhcmFtID09PSBDUy5UQUdTX0ZPTExPV0VEKSB7XG4gICAgICAgIG9wdGlvbnMuYW55X3RhZ3MgPSBmb2xsb3dlZDtcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0YWdzUGFyYW0pKSB7XG4gICAgICAgIG9wdGlvbnMuYW55X3RhZ3MgPSB0YWdzUGFyYW07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zLmFueV90YWdzID0gdGFnc1BhcmFtLnNwbGl0KCcsJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKHJlcG9zdGVkQ2xhaW1JZCkge1xuICAgIC8vIFNESyBjaG9rZXMgb24gcmVwb3N0ZWRfY2xhaW1faWQgb2YgbnVsbCBvciBmYWxzZSwgbmVlZHMgdG8gbm90IGJlIHByZXNlbnQgaWYgbm8gdmFsdWVcbiAgICBvcHRpb25zLnJlcG9zdGVkX2NsYWltX2lkID0gcmVwb3N0ZWRDbGFpbUlkO1xuICB9XG4gIC8vIElGIHJlbGVhc2UgdGltZSwgc2V0IGl0LCBlbHNlIHNldCBmYWxsYmFjayByZWxlYXNlIHRpbWVzIHVzaW5nIHRoZSBoYWNrIGJlbG93LlxuICBpZiAocmVsZWFzZVRpbWUgJiYgY2xhaW1UeXBlUGFyYW0gIT09IENTLkNMQUlNX0NIQU5ORUwpIHtcbiAgICBvcHRpb25zLnJlbGVhc2VfdGltZSA9IHJlbGVhc2VUaW1lO1xuICB9IGVsc2UgaWYgKGNsYWltVHlwZVBhcmFtICE9PSBDUy5DTEFJTV9DSEFOTkVMKSB7XG4gICAgaWYgKG9yZGVyUGFyYW0gPT09IENTLk9SREVSX0JZX1RPUCAmJiBmcmVzaG5lc3NQYXJhbSAhPT0gQ1MuRlJFU0hfQUxMKSB7XG4gICAgICBvcHRpb25zLnJlbGVhc2VfdGltZSA9IGA+JHtNYXRoLmZsb29yKG1vbWVudCgpLnN1YnRyYWN0KDEsIGZyZXNobmVzc1BhcmFtKS5zdGFydE9mKCdob3VyJykudW5peCgpKX1gO1xuICAgIH0gZWxzZSBpZiAob3JkZXJQYXJhbSA9PT0gQ1MuT1JERVJfQllfTkVXIHx8IG9yZGVyUGFyYW0gPT09IENTLk9SREVSX0JZX1RSRU5ESU5HKSB7XG4gICAgICAvLyBXYXJuaW5nIC0gaGFjayBiZWxvd1xuICAgICAgLy8gSWYgdXNlcnMgYXJlIGZvbGxvd2luZyBtb3JlIHRoYW4gMTAgY2hhbm5lbHMgb3IgdGFncywgbGltaXQgcmVzdWx0cyB0byBzdHVmZiBsZXNzIHRoYW4gYSB5ZWFyIG9sZFxuICAgICAgLy8gRm9yIG1vcmUgdGhhbiAyMCwgZHJvcCBpdCBkb3duIHRvIDYgbW9udGhzXG4gICAgICAvLyBUaGlzIGhlbHBzIHdpdGggdGltZW91dCBpc3N1ZXMgZm9yIHVzZXJzIHRoYXQgYXJlIGZvbGxvd2luZyBhIHRvbiBvZiBzdHVmZlxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2xicnlpby9sYnJ5LXNkay9pc3N1ZXMvMjQyMFxuICAgICAgaWYgKFxuICAgICAgICAob3B0aW9ucy5jaGFubmVsX2lkcyAmJiBvcHRpb25zLmNoYW5uZWxfaWRzLmxlbmd0aCA+IDIwKSB8fFxuICAgICAgICAob3B0aW9ucy5hbnlfdGFncyAmJiBvcHRpb25zLmFueV90YWdzLmxlbmd0aCA+IDIwKVxuICAgICAgKSB7XG4gICAgICAgIG9wdGlvbnMucmVsZWFzZV90aW1lID0gYD4ke01hdGguZmxvb3IobW9tZW50KCkuc3VidHJhY3QoMywgQ1MuRlJFU0hfTU9OVEgpLnN0YXJ0T2YoJ3dlZWsnKS51bml4KCkpfWA7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAob3B0aW9ucy5jaGFubmVsX2lkcyAmJiBvcHRpb25zLmNoYW5uZWxfaWRzLmxlbmd0aCA+IDEwKSB8fFxuICAgICAgICAob3B0aW9ucy5hbnlfdGFncyAmJiBvcHRpb25zLmFueV90YWdzLmxlbmd0aCA+IDEwKVxuICAgICAgKSB7XG4gICAgICAgIG9wdGlvbnMucmVsZWFzZV90aW1lID0gYD4ke01hdGguZmxvb3IobW9tZW50KCkuc3VidHJhY3QoMSwgQ1MuRlJFU0hfWUVBUikuc3RhcnRPZignd2VlaycpLnVuaXgoKSl9YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEhhY2sgZm9yIGF0IGxlYXN0IHRoZSBOZXcgcGFnZSB1bnRpbCBodHRwczovL2dpdGh1Yi5jb20vbGJyeWlvL2xicnktc2RrL2lzc3Vlcy8yNTkxIGlzIGZpeGVkXG4gICAgICAgIG9wdGlvbnMucmVsZWFzZV90aW1lID0gYDwke01hdGguZmxvb3IobW9tZW50KCkuc3RhcnRPZignbWludXRlJykudW5peCgpKX1gO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChkdXJhdGlvblBhcmFtKSB7XG4gICAgc3dpdGNoIChkdXJhdGlvblBhcmFtKSB7XG4gICAgICBjYXNlIENTLkRVUkFUSU9OX0FMTDpcbiAgICAgICAgLy8gRG8gbm90aGluZyAobm8gb3B0aW9ucyBuZWVkZWQpXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDUy5EVVJBVElPTl9TSE9SVDpcbiAgICAgICAgb3B0aW9ucy5kdXJhdGlvbiA9ICc8PTI0MCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDUy5EVVJBVElPTl9MT05HOlxuICAgICAgICBvcHRpb25zLmR1cmF0aW9uID0gJz49MTIwMCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDUy5EVVJBVElPTl9HVF9FUTpcbiAgICAgICAgb3B0aW9ucy5kdXJhdGlvbiA9IGA+PSR7KGR1cmF0aW9uTWludXRlcyB8fCAwKSAqIDYwfWA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDUy5EVVJBVElPTl9MVF9FUTpcbiAgICAgICAgb3B0aW9ucy5kdXJhdGlvbiA9IGA8PSR7KGR1cmF0aW9uTWludXRlcyB8fCAwKSAqIDYwfWA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29uc29sZS5lcnJvcignVW5oYW5kbGVkIGR1cmF0aW9uOiAnICsgZHVyYXRpb25QYXJhbSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlmIChzdHJlYW1UeXBlUGFyYW0gJiYgc3RyZWFtVHlwZVBhcmFtICE9PSBDUy5DT05URU5UX0FMTCAmJiBjbGFpbVR5cGUgIT09IENTLkNMQUlNX0NIQU5ORUwpIHtcbiAgICBvcHRpb25zLnN0cmVhbV90eXBlcyA9IHR5cGVvZiBzdHJlYW1UeXBlUGFyYW0gPT09ICdzdHJpbmcnID8gW3N0cmVhbVR5cGVQYXJhbV0gOiBzdHJlYW1UeXBlUGFyYW07XG4gIH1cblxuICBpZiAoY2xhaW1UeXBlUGFyYW0pIHtcbiAgICBpZiAoY2xhaW1UeXBlUGFyYW0gIT09IENTLkNPTlRFTlRfQUxMKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShjbGFpbVR5cGVQYXJhbSkpIHtcbiAgICAgICAgb3B0aW9ucy5jbGFpbV90eXBlID0gY2xhaW1UeXBlUGFyYW07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zLmNsYWltX3R5cGUgPSBbY2xhaW1UeXBlUGFyYW1dO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChsYW5ndWFnZVBhcmFtcykge1xuICAgIGlmIChsYW5ndWFnZVBhcmFtcyAhPT0gQ1MuTEFOR1VBR0VTX0FMTCkge1xuICAgICAgb3B0aW9ucy5hbnlfbGFuZ3VhZ2VzID0gbGFuZ3VhZ2VQYXJhbXMuc3BsaXQoJywnKTtcbiAgICB9XG4gIH1cblxuICBpZiAodGFnc1BhcmFtKSB7XG4gICAgaWYgKHRhZ3NQYXJhbSAhPT0gQ1MuVEFHU19BTEwgJiYgdGFnc1BhcmFtICE9PSAnJykge1xuICAgICAgaWYgKHRhZ3NQYXJhbSA9PT0gQ1MuVEFHU19GT0xMT1dFRCkge1xuICAgICAgICBvcHRpb25zLmFueV90YWdzID0gZm9sbG93ZWQ7XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodGFnc1BhcmFtKSkge1xuICAgICAgICBvcHRpb25zLmFueV90YWdzID0gdGFnc1BhcmFtO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3B0aW9ucy5hbnlfdGFncyA9IHRhZ3NQYXJhbS5zcGxpdCgnLCcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChoaWRlUmVwb3N0c0VmZmVjdGl2ZSAmJiAhb3B0aW9ucy5yZXBvc3RlZF9jbGFpbV9pZCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMuY2xhaW1fdHlwZSkpIHtcbiAgICAgIGlmIChvcHRpb25zLmNsYWltX3R5cGUubGVuZ3RoID4gMSkge1xuICAgICAgICBvcHRpb25zLmNsYWltX3R5cGUgPSBvcHRpb25zLmNsYWltX3R5cGUuZmlsdGVyKChjbGFpbVR5cGUpID0+IGNsYWltVHlwZSAhPT0gJ3JlcG9zdCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zLmNsYWltX3R5cGUgPSBbJ3N0cmVhbScsICdjaGFubmVsJ107XG4gICAgfVxuICB9XG5cbiAgY29uc3QgaGFzTWF0dXJlVGFncyA9IHRhZ3NQYXJhbSAmJiB0YWdzUGFyYW0uc3BsaXQoJywnKS5zb21lKCh0KSA9PiBNQVRVUkVfVEFHUy5pbmNsdWRlcyh0KSk7XG5cbiAgY29uc3Qgc2VhcmNoS2V5ID0gY3JlYXRlTm9ybWFsaXplZENsYWltU2VhcmNoS2V5KG9wdGlvbnMpO1xuICBjb25zdCBjbGFpbVNlYXJjaFJlc3VsdCA9IGNsYWltU2VhcmNoQnlRdWVyeVtzZWFyY2hLZXldO1xuICBjb25zdCBjbGFpbVNlYXJjaFJlc3VsdExhc3RQYWdlUmVhY2hlZCA9IGNsYWltU2VhcmNoQnlRdWVyeUxhc3RQYWdlUmVhY2hlZFtzZWFyY2hLZXldO1xuICBjb25zdCBpc1VuZmV0Y2hlZENsYWltU2VhcmNoID0gY2xhaW1TZWFyY2hSZXN1bHQgPT09IHVuZGVmaW5lZDtcblxuICAvLyB1bmNvbW1lbnQgdG8gZml4IGFuIGl0ZW0gb24gYSBwYWdlXG4gIC8vICAgY29uc3QgZml4VXJpID0gJ2xicnk6Ly9AY29yYmV0dHJlcG9ydCMwL2xicnlvZHlzZWUjNSc7XG4gIC8vICAgaWYgKFxuICAvLyAgICAgb3JkZXJQYXJhbSA9PT0gQ1MuT1JERVJfQllfTkVXICYmXG4gIC8vICAgICBjbGFpbVNlYXJjaFJlc3VsdCAmJlxuICAvLyAgICAgY2xhaW1TZWFyY2hSZXN1bHQubGVuZ3RoID4gMiAmJlxuICAvLyAgICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09PSAnLyQvcmFiYml0aG9sZSdcbiAgLy8gICApIHtcbiAgLy8gICAgIGlmIChjbGFpbVNlYXJjaFJlc3VsdC5pbmRleE9mKGZpeFVyaSkgIT09IC0xKSB7XG4gIC8vICAgICAgIGNsYWltU2VhcmNoUmVzdWx0LnNwbGljZShjbGFpbVNlYXJjaFJlc3VsdC5pbmRleE9mKGZpeFVyaSksIDEpO1xuICAvLyAgICAgfSBlbHNlIHtcbiAgLy8gICAgICAgY2xhaW1TZWFyY2hSZXN1bHQucG9wKCk7XG4gIC8vICAgICB9XG4gIC8vICAgICBjbGFpbVNlYXJjaFJlc3VsdC5zcGxpY2UoMiwgMCwgZml4VXJpKTtcbiAgLy8gICB9XG5cbiAgY29uc3QgW3ByZXZPcHRpb25zLCBzZXRQcmV2T3B0aW9uc10gPSBSZWFjdC51c2VTdGF0ZShudWxsKTtcblxuICBpZiAoIWlzSnVzdFNjcm9sbGluZ1RvTmV3UGFnZShwcmV2T3B0aW9ucywgb3B0aW9ucykpIHtcbiAgICAvLyAtLS0gTmV3IHNlYXJjaCwgb3Igc2VhcmNoIG9wdGlvbnMgY2hhbmdlZC5cbiAgICBzZXRQcmV2T3B0aW9ucyhvcHRpb25zKTtcblxuICAgIGlmIChkaWROYXZpZ2F0ZUZvcndhcmQpIHtcbiAgICAgIC8vIC0tLSBSZXNldCB0aGUgcGFnZS5cbiAgICAgIG9wdGlvbnMucGFnZSA9IDE7XG4gICAgICBzZXRQYWdlKG9wdGlvbnMucGFnZSk7XG4gICAgfSBlbHNlIGlmIChjbGFpbVNlYXJjaFJlc3VsdCkge1xuICAgICAgLy8gLS0tIFVwZGF0ZSAncGFnZScgYmFzZWQgb24gcmV0cmlldmVkICdjbGFpbVNlYXJjaFJlc3VsdCcuXG4gICAgICBvcHRpb25zLnBhZ2UgPSBNYXRoLmNlaWwoY2xhaW1TZWFyY2hSZXN1bHQubGVuZ3RoIC8gZHluYW1pY1BhZ2VTaXplKTtcbiAgICAgIGlmIChvcHRpb25zLnBhZ2UgIT09IHBhZ2UpIHtcbiAgICAgICAgc2V0UGFnZShvcHRpb25zLnBhZ2UpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHNob3VsZFBlcmZvcm1TZWFyY2ggPVxuICAgICF1cmlzICYmXG4gICAgKGNsYWltU2VhcmNoUmVzdWx0ID09PSB1bmRlZmluZWQgfHxcbiAgICAgIGRpZE5hdmlnYXRlRm9yd2FyZCB8fFxuICAgICAgKCFsb2FkaW5nICYmXG4gICAgICAgICFjbGFpbVNlYXJjaFJlc3VsdExhc3RQYWdlUmVhY2hlZCAmJlxuICAgICAgICBjbGFpbVNlYXJjaFJlc3VsdCAmJlxuICAgICAgICBjbGFpbVNlYXJjaFJlc3VsdC5sZW5ndGggJiZcbiAgICAgICAgY2xhaW1TZWFyY2hSZXN1bHQubGVuZ3RoIDwgZHluYW1pY1BhZ2VTaXplICogb3B0aW9ucy5wYWdlICYmXG4gICAgICAgIGNsYWltU2VhcmNoUmVzdWx0Lmxlbmd0aCAlIGR5bmFtaWNQYWdlU2l6ZSA9PT0gMCkpO1xuXG4gIC8vIERvbid0IHVzZSB0aGUgcXVlcnkgZnJvbSBjcmVhdGVOb3JtYWxpemVkQ2xhaW1TZWFyY2hLZXkgZm9yIHRoZSBlZmZlY3Qgc2luY2UgdGhhdCBkb2Vzbid0IGluY2x1ZGUgcGFnZSAmIHJlbGVhc2VfdGltZVxuICBjb25zdCBvcHRpb25zU3RyaW5nRm9yRWZmZWN0ID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucyk7XG5cbiAgY29uc3QgdGltZWRPdXRNZXNzYWdlID0gKFxuICAgIDxkaXY+XG4gICAgICA8cD5cbiAgICAgICAgPEkxOG5NZXNzYWdlXG4gICAgICAgICAgdG9rZW5zPXt7XG4gICAgICAgICAgICBhZ2FpbjogKFxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgYnV0dG9uPVwibGlua1wiXG4gICAgICAgICAgICAgICAgbGFiZWw9e19fKCd0cnkgYWdhaW4gaW4gYSBmZXcgc2Vjb25kcy4nKX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRGb3JjZVJlZnJlc2goRGF0ZS5ub3coKSl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApLFxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICBTb3JyeSwgeW91ciByZXF1ZXN0IHRpbWVkIG91dC4gTW9kaWZ5IHlvdXIgb3B0aW9ucyBvciAlYWdhaW4lXG4gICAgICAgIDwvSTE4bk1lc3NhZ2U+XG4gICAgICA8L3A+XG4gICAgICA8cD5cbiAgICAgICAgPEkxOG5NZXNzYWdlXG4gICAgICAgICAgdG9rZW5zPXt7XG4gICAgICAgICAgICBjb250YWN0X3N1cHBvcnQ6IChcbiAgICAgICAgICAgICAgPEJ1dHRvbiBidXR0b249XCJsaW5rXCIgbGFiZWw9e19fKCdjb250YWN0IHN1cHBvcnQnKX0gaHJlZj1cImh0dHBzOi8vb2R5c2VlLmNvbS9AT2R5c2VlSGVscDpiP3ZpZXc9YWJvdXRcIiAvPlxuICAgICAgICAgICAgKSxcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgSWYgeW91IGNvbnRpbnVlIHRvIGhhdmUgaXNzdWVzLCBwbGVhc2UgJWNvbnRhY3Rfc3VwcG9ydCUuXG4gICAgICAgIDwvSTE4bk1lc3NhZ2U+XG4gICAgICA8L3A+XG4gICAgPC9kaXY+XG4gICk7XG5cbiAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuICBsZXQgZmluYWxVcmlzO1xuXG4gIGlmICh1cmlzKSB7XG4gICAgLy8gLS0tIGRpcmVjdCB1cmlzXG4gICAgZmluYWxVcmlzID0gdXJpcztcbiAgICBpbmplY3RQaW5VcmxzKGZpbmFsVXJpcywgb3JkZXJQYXJhbSwgcGlucywgcmVzb2x2ZWRQaW5VcmlzKTtcbiAgICBmaW5hbFVyaXMgPSBmaWx0ZXJFeGNsdWRlZFVyaXMoZmluYWxVcmlzLCBleGNsdWRlVXJpcyk7XG4gIH0gZWxzZSB7XG4gICAgLy8gLS0tIHNlYXJjaGVkIHVyaXNcbiAgICBpZiAoaXNVbmZldGNoZWRDbGFpbVNlYXJjaCAmJiBwcmV2VXJpcy5jdXJyZW50KSB7XG4gICAgICBmaW5hbFVyaXMgPSBwcmV2VXJpcy5jdXJyZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBmaW5hbFVyaXMgPSBjbGFpbVNlYXJjaFJlc3VsdDtcbiAgICAgIGluamVjdFBpblVybHMoZmluYWxVcmlzLCBvcmRlclBhcmFtLCBwaW5zLCByZXNvbHZlZFBpblVyaXMpO1xuICAgICAgZmluYWxVcmlzID0gZmlsdGVyRXhjbHVkZWRVcmlzKGZpbmFsVXJpcywgZXhjbHVkZVVyaXMpO1xuICAgICAgcHJldlVyaXMuY3VycmVudCA9IGZpbmFsVXJpcztcbiAgICB9XG4gIH1cblxuICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAvLyBIZWxwZXJzXG4gIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiAgLy8gUmV0dXJucyB0cnVlIGlmIHRoZSBjaGFuZ2UgaW4gJ29wdGlvbnMnIGluZGljYXRlIHRoYXQgd2UgYXJlIHNpbXBseSBzY3JvbGxpbmdcbiAgLy8gZG93biB0byBhIG5ldyBwYWdlOyBmYWxzZSBvdGhlcndpc2UuXG4gIGZ1bmN0aW9uIGlzSnVzdFNjcm9sbGluZ1RvTmV3UGFnZShwcmV2T3B0aW9ucywgb3B0aW9ucykge1xuICAgIGlmICghcHJldk9wdGlvbnMpIHtcbiAgICAgIC8vIEl0J3MgYSBuZXcgc2VhcmNoLCBvciB3ZSBqdXN0IHBvcHBlZCBiYWNrIGZyb20gYSBkaWZmZXJlbnQgdmlldy5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBDb21wYXJlIGV2ZXJ5IGZpZWxkIGV4Y2VwdCBmb3IgJ3BhZ2UnIGFuZCAncmVsZWFzZV90aW1lJy5cbiAgICAvLyBUaGVyZSBtaWdodCBiZSBiZXR0ZXIgd2F5cyB0byBhY2hpZXZlIHRoaXMuXG4gICAgbGV0IHRtcFByZXZPcHRpb25zID0geyAuLi5wcmV2T3B0aW9ucyB9O1xuICAgIHRtcFByZXZPcHRpb25zLnBhZ2UgPSAtMTtcbiAgICB0bXBQcmV2T3B0aW9ucy5yZWxlYXNlX3RpbWUgPSAnJztcblxuICAgIGxldCB0bXBPcHRpb25zID0geyAuLi5vcHRpb25zIH07XG4gICAgdG1wT3B0aW9ucy5wYWdlID0gLTE7XG4gICAgdG1wT3B0aW9ucy5yZWxlYXNlX3RpbWUgPSAnJztcblxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0bXBPcHRpb25zKSA9PT0gSlNPTi5zdHJpbmdpZnkodG1wUHJldk9wdGlvbnMpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UGFyYW1Gcm9tVGFncyh0KSB7XG4gICAgaWYgKHQgPT09IENTLlRBR1NfQUxMIHx8IHQgPT09IENTLlRBR1NfRk9MTE9XRUQpIHtcbiAgICAgIHJldHVybiB0O1xuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0KSkge1xuICAgICAgcmV0dXJuIHQuam9pbignLCcpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVNjcm9sbEJvdHRvbSgpIHtcbiAgICBpZiAobWF4UGFnZXMgIT09IHVuZGVmaW5lZCAmJiBwYWdlID09PSBtYXhQYWdlcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghbG9hZGluZyAmJiBpbmZpbml0ZVNjcm9sbCkge1xuICAgICAgaWYgKGNsYWltU2VhcmNoUmVzdWx0ICYmICFjbGFpbVNlYXJjaFJlc3VsdExhc3RQYWdlUmVhY2hlZCkge1xuICAgICAgICBzZXRQYWdlKHBhZ2UgKyAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZXNvbHZlSGlkZVJlcG9zdHMoaGlkZVJlcG9zdFNldHRpbmcsIGhpZGVSZXBvc3RPdmVycmlkZSkge1xuICAgIGlmIChoaWRlUmVwb3N0T3ZlcnJpZGUgPT09IHVuZGVmaW5lZCB8fCBoaWRlUmVwb3N0T3ZlcnJpZGUgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBoaWRlUmVwb3N0U2V0dGluZztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGhpZGVSZXBvc3RPdmVycmlkZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZXNvbHZlT3JkZXJCeU9wdGlvbihvcmRlckJ5OiBzdHJpbmcgfCBBcnJheTxzdHJpbmc+LCBzb3J0Qnk6IHN0cmluZyB8IEFycmF5PHN0cmluZz4pIHtcbiAgICBsZXQgb3JkZXJfYnk7XG5cbiAgICBzd2l0Y2ggKG9yZGVyQnkpIHtcbiAgICAgIGNhc2UgQ1MuT1JERVJfQllfVFJFTkRJTkc6XG4gICAgICAgIG9yZGVyX2J5ID0gQ1MuT1JERVJfQllfVFJFTkRJTkdfVkFMVUU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDUy5PUkRFUl9CWV9ORVc6XG4gICAgICAgIG9yZGVyX2J5ID0gQ1MuT1JERVJfQllfTkVXX1ZBTFVFO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ1MuT1JERVJfQllfTkVXX0FTQzpcbiAgICAgICAgb3JkZXJfYnkgPSBDUy5PUkRFUl9CWV9ORVdfQVNDX1ZBTFVFO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ1MuT1JERVJfQllfTkFNRV9BU0M6XG4gICAgICAgIG9yZGVyX2J5ID0gQ1MuT1JERVJfQllfTkFNRV9BU0NfVkFMVUU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgb3JkZXJfYnkgPSBDUy5PUkRFUl9CWV9UT1BfVkFMVUU7XG4gICAgfVxuXG4gICAgaWYgKG9yZGVyQnkgPT09IENTLk9SREVSX0JZX05FVyAmJiBzb3J0QnkgPT09IENTLlNPUlRfQlkuT0xERVNULmtleSkge1xuICAgICAgcmV0dXJuIG9yZGVyX2J5Lm1hcCgoeCkgPT4gYCR7Q1MuU09SVF9CWS5PTERFU1Qub3B0fSR7eH1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3JkZXJfYnk7XG4gIH1cblxuICBmdW5jdGlvbiBpbmplY3RQaW5VcmxzKHVyaXMsIG9yZGVyLCBwaW5zLCByZXNvbHZlZFBpblVyaXMpIHtcbiAgICBpZiAoIXBpbnMgfHwgIXVyaXMgfHwgdXJpcy5sZW5ndGggPD0gMiB8fCAocGlucy5vbmx5UGluRm9yT3JkZXIgJiYgcGlucy5vbmx5UGluRm9yT3JkZXIgIT09IG9yZGVyKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChyZXNvbHZlZFBpblVyaXMpIHtcbiAgICAgIHJlc29sdmVkUGluVXJpcy5mb3JFYWNoKChwaW4pID0+IHtcbiAgICAgICAgaWYgKHVyaXMuaW5jbHVkZXMocGluKSkge1xuICAgICAgICAgIHVyaXMuc3BsaWNlKHVyaXMuaW5kZXhPZihwaW4pLCAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cmlzLnBvcCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdXJpcy5zcGxpY2UoMiwgMCwgLi4ucmVzb2x2ZWRQaW5VcmlzKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBmaWx0ZXJFeGNsdWRlZFVyaXModXJpcywgZXhjbHVkZVVyaXMpIHtcbiAgICBpZiAodXJpcyAmJiBleGNsdWRlVXJpcyAmJiBleGNsdWRlVXJpcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB1cmlzLmZpbHRlcigodXJpKSA9PiAhZXhjbHVkZVVyaXMuaW5jbHVkZXModXJpKSk7XG4gICAgfVxuICAgIHJldHVybiB1cmlzO1xuICB9XG5cbiAgZnVuY3Rpb24gb25IaWRkZW4odXJpKSB7XG4gICAgaWYgKGhpZGRlbkJ1ZmZlci5pbmRleE9mKHVyaSkgPT09IC0xKSB7XG4gICAgICBsZXQgbmV3QnVmZmVyID0gaGlkZGVuQnVmZmVyO1xuICAgICAgbmV3QnVmZmVyLnB1c2godXJpKTtcbiAgICAgIHNldEhpZGRlbkJ1ZmZlcihuZXdCdWZmZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiAgdXNlRmV0Y2hWaWV3Q291bnQoZmV0Y2hWaWV3Q291bnQsIGZpbmFsVXJpcywgY2xhaW1zQnlVcmksIGRvRmV0Y2hWaWV3Q291bnQpO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2NoYW5uZWxJZHM6ICcsIGNoYW5uZWxJZHMpXG4gICAgaWYgKGNoYW5uZWxJZHMpIHtcbiAgICAgIGRvRmV0Y2hPZHlzZWVNZW1iZXJzaGlwRm9yQ2hhbm5lbElkcyhjaGFubmVsSWRzKTtcbiAgICB9XG4gIH0sIFtjaGFubmVsSWRzLCBkb0ZldGNoT2R5c2VlTWVtYmVyc2hpcEZvckNoYW5uZWxJZHNdKTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzaG91bGRQZXJmb3JtU2VhcmNoKSB7XG4gICAgICBjb25zdCBzZWFyY2hPcHRpb25zID0gSlNPTi5wYXJzZShvcHRpb25zU3RyaW5nRm9yRWZmZWN0KTtcbiAgICAgIGRvQ2xhaW1TZWFyY2goc2VhcmNoT3B0aW9ucyk7XG4gICAgfVxuICB9LCBbZG9DbGFpbVNlYXJjaCwgc2hvdWxkUGVyZm9ybVNlYXJjaCwgb3B0aW9uc1N0cmluZ0ZvckVmZmVjdCwgZm9yY2VSZWZyZXNoXSk7XG5cbiAgY29uc3QgaGVhZGVyVG9Vc2UgPSBoZWFkZXIgfHwgKFxuICAgIDxDbGFpbUxpc3RIZWFkZXJcbiAgICAgIGNoYW5uZWxJZHM9e2NoYW5uZWxJZHN9XG4gICAgICBkZWZhdWx0VGFncz17ZGVmYXVsdFRhZ3N9XG4gICAgICB0YWdzPXt0YWdzfVxuICAgICAgZnJlc2huZXNzPXtmcmVzaG5lc3N9XG4gICAgICBkZWZhdWx0RnJlc2huZXNzPXtkZWZhdWx0RnJlc2huZXNzfVxuICAgICAgY2xhaW1UeXBlPXtjbGFpbVR5cGV9XG4gICAgICBzdHJlYW1UeXBlPXtzdHJlYW1UeXBlfVxuICAgICAgZGVmYXVsdFN0cmVhbVR5cGU9e2RlZmF1bHRTdHJlYW1UeXBlfVxuICAgICAgZmVlQW1vdW50PXtmZWVBbW91bnR9IC8vIEVOQUJMRV9QQUlEX0NPTlRFTlRfRElTQ09WRVIgb3Igc29tZXRoaW5nXG4gICAgICBvcmRlckJ5PXtvcmRlckJ5fVxuICAgICAgZGVmYXVsdE9yZGVyQnk9e2RlZmF1bHRPcmRlckJ5fVxuICAgICAgaGlkZUFkdmFuY2VkRmlsdGVyPXtoaWRlQWR2YW5jZWRGaWx0ZXJ9XG4gICAgICBoYXNNYXR1cmVUYWdzPXtoYXNNYXR1cmVUYWdzfVxuICAgICAgaGlkZGVuTnNmd01lc3NhZ2U9e2hpZGRlbk5zZndNZXNzYWdlfVxuICAgICAgc2V0UGFnZT17c2V0UGFnZX1cbiAgICAgIHRpbGVMYXlvdXQ9e3RpbGVMYXlvdXR9XG4gICAgICBoaWRlTGF5b3V0QnV0dG9uPXtoaWRlTGF5b3V0QnV0dG9ufVxuICAgICAgaGlkZUZpbHRlcnM9e2hpZGVGaWx0ZXJzfVxuICAgICAgc2Nyb2xsQW5jaG9yPXtzY3JvbGxBbmNob3J9XG4gICAgLz5cbiAgKTtcblxuICByZXR1cm4gKFxuICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgIHtoZWFkZXJMYWJlbCAmJiA8bGFiZWwgY2xhc3NOYW1lPVwiY2xhaW0tbGlzdF9faGVhZGVyLWxhYmVsXCI+e2hlYWRlckxhYmVsfTwvbGFiZWw+fVxuICAgICAge3RpbGVMYXlvdXQgPyAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgeyFyZXBvc3RlZENsYWltSWQgJiYgc2hvd0hlYWRlciAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlY3Rpb25fX2hlYWRlci0tYWN0aW9uc1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlY3Rpb25fX2FjdGlvbnNcIj5cbiAgICAgICAgICAgICAgICB7aGVhZGVyVG9Vc2V9XG4gICAgICAgICAgICAgICAge3NlYXJjaEluU2VsZWN0ZWRMYW5nICYmIDxMYW5nRmlsdGVySW5kaWNhdG9yIC8+fVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge21ldGEgJiYgPGRpdiBjbGFzc05hbWU9XCJzZWN0aW9uX19hY3Rpb25zLS1uby1tYXJnaW5cIj57bWV0YX08L2Rpdj59XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtzdWJTZWN0aW9uICYmIDxkaXY+e3N1YlNlY3Rpb259PC9kaXY+fVxuICAgICAgICAgIDxDbGFpbUxpc3RcbiAgICAgICAgICAgIHRpbGVMYXlvdXRcbiAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmd9XG4gICAgICAgICAgICB1cmlzPXtmaW5hbFVyaXN9XG4gICAgICAgICAgICBwcmVmaXhVcmlzPXtwcmVmaXhVcmlzfVxuICAgICAgICAgICAgb25TY3JvbGxCb3R0b209e2hhbmRsZVNjcm9sbEJvdHRvbX1cbiAgICAgICAgICAgIHBhZ2U9e3BhZ2V9XG4gICAgICAgICAgICBwYWdlU2l6ZT17ZHluYW1pY1BhZ2VTaXplfVxuICAgICAgICAgICAgdGltZWRPdXRNZXNzYWdlPXt0aW1lZE91dE1lc3NhZ2V9XG4gICAgICAgICAgICByZW5kZXJQcm9wZXJ0aWVzPXtyZW5kZXJQcm9wZXJ0aWVzfVxuICAgICAgICAgICAgaW5jbHVkZVN1cHBvcnRBY3Rpb249e2luY2x1ZGVTdXBwb3J0QWN0aW9ufVxuICAgICAgICAgICAgaW5qZWN0ZWRJdGVtPXtpbmplY3RlZEl0ZW19XG4gICAgICAgICAgICBzaG93SGlkZGVuQnlVc2VyPXtzaG93SGlkZGVuQnlVc2VyfVxuICAgICAgICAgICAgc2VhcmNoT3B0aW9ucz17b3B0aW9uc31cbiAgICAgICAgICAgIHNob3dOb1NvdXJjZUNsYWltcz17c2hvd05vU291cmNlQ2xhaW1zfVxuICAgICAgICAgICAgZW1wdHk9e2VtcHR5fVxuICAgICAgICAgICAgbWF4Q2xhaW1SZW5kZXI9e21heENsYWltUmVuZGVyfVxuICAgICAgICAgICAgbG9hZGVkQ2FsbGJhY2s9e2xvYWRlZENhbGxiYWNrfVxuICAgICAgICAgICAgc3dpcGVMYXlvdXQ9e3N3aXBlTGF5b3V0fVxuICAgICAgICAgICAgb25IaWRkZW49e29uSGlkZGVufVxuICAgICAgICAgIC8+XG4gICAgICAgICAge2xvYWRpbmcgJiYgdXNlU2tlbGV0b25TY3JlZW4gJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjbGFpbS1ncmlkXCI+XG4gICAgICAgICAgICAgIHtuZXcgQXJyYXkoZHluYW1pY1BhZ2VTaXplKS5maWxsKDEpLm1hcCgoeCwgaSkgPT4gKFxuICAgICAgICAgICAgICAgIDxDbGFpbVByZXZpZXdUaWxlIGtleT17aX0gcGxhY2Vob2xkZXI9XCJsb2FkaW5nXCIgcHVsc2UgLz5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICkgOiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAge3Nob3dIZWFkZXIgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWN0aW9uX19oZWFkZXItLWFjdGlvbnNcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWN0aW9uX19hY3Rpb25zXCI+XG4gICAgICAgICAgICAgICAge2hlYWRlclRvVXNlfVxuICAgICAgICAgICAgICAgIHtzZWFyY2hJblNlbGVjdGVkTGFuZyAmJiA8TGFuZ0ZpbHRlckluZGljYXRvciAvPn1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHttZXRhICYmIDxkaXYgY2xhc3NOYW1lPVwic2VjdGlvbl9fYWN0aW9ucy0tbm8tbWFyZ2luXCI+e21ldGF9PC9kaXY+fVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7c3ViU2VjdGlvbiAmJiA8ZGl2PntzdWJTZWN0aW9ufTwvZGl2Pn1cbiAgICAgICAgICA8Q2xhaW1MaXN0XG4gICAgICAgICAgICB0eXBlPXt0eXBlfVxuICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ31cbiAgICAgICAgICAgIHVyaXM9e2ZpbmFsVXJpc31cbiAgICAgICAgICAgIHByZWZpeFVyaXM9e3ByZWZpeFVyaXN9XG4gICAgICAgICAgICBvblNjcm9sbEJvdHRvbT17aGFuZGxlU2Nyb2xsQm90dG9tfVxuICAgICAgICAgICAgcGFnZT17cGFnZX1cbiAgICAgICAgICAgIHBhZ2VTaXplPXtkeW5hbWljUGFnZVNpemV9XG4gICAgICAgICAgICB0aW1lZE91dE1lc3NhZ2U9e3RpbWVkT3V0TWVzc2FnZX1cbiAgICAgICAgICAgIHJlbmRlclByb3BlcnRpZXM9e3JlbmRlclByb3BlcnRpZXN9XG4gICAgICAgICAgICBpbmNsdWRlU3VwcG9ydEFjdGlvbj17aW5jbHVkZVN1cHBvcnRBY3Rpb259XG4gICAgICAgICAgICBpbmplY3RlZEl0ZW09e2luamVjdGVkSXRlbX1cbiAgICAgICAgICAgIHNob3dIaWRkZW5CeVVzZXI9e3Nob3dIaWRkZW5CeVVzZXJ9XG4gICAgICAgICAgICBzZWFyY2hPcHRpb25zPXtvcHRpb25zfVxuICAgICAgICAgICAgc2hvd05vU291cmNlQ2xhaW1zPXtoYXNOb1NvdXJjZSB8fCBzaG93Tm9Tb3VyY2VDbGFpbXN9XG4gICAgICAgICAgICBlbXB0eT17ZW1wdHl9XG4gICAgICAgICAgICBtYXhDbGFpbVJlbmRlcj17bWF4Q2xhaW1SZW5kZXJ9XG4gICAgICAgICAgICBsb2FkZWRDYWxsYmFjaz17bG9hZGVkQ2FsbGJhY2t9XG4gICAgICAgICAgICBzd2lwZUxheW91dD17c3dpcGVMYXlvdXR9XG4gICAgICAgICAgICBvbkhpZGRlbj17b25IaWRkZW59XG4gICAgICAgICAgLz5cbiAgICAgICAgICB7bG9hZGluZyAmJlxuICAgICAgICAgICAgdXNlU2tlbGV0b25TY3JlZW4gJiZcbiAgICAgICAgICAgIG5ldyBBcnJheShkeW5hbWljUGFnZVNpemUpXG4gICAgICAgICAgICAgIC5maWxsKDEpXG4gICAgICAgICAgICAgIC5tYXAoKHgsIGkpID0+IChcbiAgICAgICAgICAgICAgICA8Q2xhaW1QcmV2aWV3XG4gICAgICAgICAgICAgICAgICBzaG93Tm9Tb3VyY2VDbGFpbXM9e2hhc05vU291cmNlIHx8IHNob3dOb1NvdXJjZUNsYWltc31cbiAgICAgICAgICAgICAgICAgIGtleT17aX1cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwibG9hZGluZ1wiXG4gICAgICAgICAgICAgICAgICB0eXBlPXt0eXBlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgd2l0aFJvdXRlcihDbGFpbUxpc3REaXNjb3Zlcik7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWlHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBK0VBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBaEZBO0FBa0ZBO0FBQ0E7QUFuRkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFvRkE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUEvRkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWlHQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUE5QkE7QUFnQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoSkE7QUFBQTtBQUFBO0FBQ0E7QUFnSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFDQTtBQWFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6T0E7QUFDQTtBQUNBO0FBME9BO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSkE7QUFTQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFsQkE7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQS9WQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBaVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFXQTtBQUVBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFIQTtBQUZBO0FBREE7QUFnQkE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFEQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbmJBO0FBdWJBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFPQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBZEE7QUFDQTtBQWdCQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFMQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFwaUJBO0FBd2lCQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkJBO0FBdUJBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFDQTtBQUFBO0FBSUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkJBO0FBc0JBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBcENBO0FBNENBO0FBQUE7QUFDQTtBQUFBO0FBSUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkJBO0FBeUJBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQWxGQTtBQTZGQTtBQUNBO0FBQ0E7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../ui/component/claimListDiscover/view.jsx\n");

/***/ })

})