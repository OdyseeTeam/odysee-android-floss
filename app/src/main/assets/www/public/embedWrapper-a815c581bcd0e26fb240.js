"use strict";(self.webpackChunkodysee_com=self.webpackChunkodysee_com||[]).push([[2959],{78538:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var r=n(3658),a=n(73249),l=n(88441),i=n(66598),c=n.n(i),o=n(6993),m=n(16643),u=n(6170),s=n(53389),d=n(7920),h=n(31391),f=n(55754),v=n(51031),b=n(12562),p=n(13690),C=n(96046),E=n(60732),I=n(32158),k=n(44908),_=n(71036).__,g=(0,p.e)((function(){return n.e(5429).then(n.bind(n,88613))})),y=(0,p.e)((function(){return Promise.resolve().then(n.bind(n,41522))})),U=(0,p.e)((function(){return Promise.resolve().then(n.bind(n,64177))})),w=(0,p.e)((function(){return Promise.resolve().then(n.bind(n,36554))})),L=(0,C.Z)((function(e){var t=e.uri,n=e.streamClaim;return l.createElement(w,{uri:t,embedded:!0,streamClaim:n})})),S=(0,C.Z)((function(e){var t=e.uri;return l.createElement(y,{uri:t,onlyThumb:!0})}));const N=function(e){var t=e.uri,n=e.latestClaimUrl,r=e.renderMode,a=e.isLivestreamClaim,i=e.showScheduledInfo,u=(0,m.k6)().location.search,d=new URLSearchParams(u).get("feature"),h=(0,s.parseURI)(t),f=h.isChannel,v=h.channelName,p=b.jp.includes(r),C=l.useMemo((function(){return function(){return l.createElement(k.default,{button:"link",label:_("Click Here"),href:(0,o.$U)(t)})}}),[t]);return f?d&&null!==n?l.createElement("div",{className:"main--empty"},l.createElement(E.Z,null)):l.createElement(l.Suspense,{fallback:l.createElement("div",{className:"main--empty"},l.createElement(E.Z,{text:_("Loading...")}))},l.createElement(U,{uri:t}),null===n&&l.createElement("div",{className:"help--notice",style:{marginTop:"20px"}},_("%channelName% isn't live right now, check back later to watch the stream.",{channelName:v}))):p?l.createElement(l.Fragment,null,l.createElement(L,{uri:t,embedded:!0},a&&l.createElement(l.Fragment,null,i&&l.createElement(g,{uri:t}),l.createElement("div",{className:c()("help--notice help--notice-embed-livestream",{"help--notice-short":i})},i?l.createElement(I.Z,{tokens:{click_here:l.createElement(C,null)}},"%click_here% if you want to join the chat for this stream."):l.createElement(I.Z,{tokens:{channel_name:v,click_here:l.createElement(C,null)}},"%channel_name% isn't live right now, but the chat is! Check back later to watch the stream, or %click_here% to start chatting."))))):l.createElement(S,{uri:t})};const O=(0,v.Z)((0,r.$j)((function(e,t){var n=t.uri;return{renderMode:(0,h.To)(n)(e),isLivestreamClaim:(0,d.CD)(e,n),showScheduledInfo:(0,f.nK)(e,n)}}))(N));function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,i,c=[],o=!0,m=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(c.push(r.value),c.length!==t);o=!0);}catch(e){m=!0,a=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(m)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const R=function(e){var t=e.uri,n=e.claimId,r=e.latestClaimId,i=e.canonicalUrl,d=e.channelUri,h=e.channelClaimId,f=e.isLivestreamClaim,v=e.latestClaimUrl,b=e.doFetchLatestClaimForChannel,p=e.doFetchChannelIsLiveForId,C=e.doCommentSocketConnect,E=e.doCommentSocketDisconnect,I=e.contentUnlocked,k=l.useRef(),_=(0,m.k6)().location.search,g=(0,s.parseURI)(t).isChannel,y=F(l.useState(!1),2),U=y[0],w=y[1],L=d&&(0,o.xY)(d),S=new URLSearchParams(_),N=S.get("feature"),j=N===a.LATEST,R=N===a.LIVE_NOW,P=S.get("embedBackgroundLight"),x=R?r:n;return l.useEffect((function(){!v&&R&&h&&(p(h),k.current=!0)}),[h,p,v,R]),l.useEffect((function(){!v&&j&&i&&b(i,!0)}),[i,b,v,j]),l.useEffect((function(){if(f&&x&&L&&i){var e=(0,o.xY)(L);return I&&C(i,e,x,void 0),function(){x&&E(x,e)}}}),[i,L,I,C,E,f,x]),l.createElement("div",{className:c()("embed__wrapper",{"embed__wrapper--light-background":P,"embed__wrapper--channel":g,"embed__wrapper--channel-notice":g&&null===v})},l.createElement(u.D.Provider,{value:{setVideoEnded:w,videoEnded:U,fetchedLiveStatus:k.current}},l.createElement(O,{uri:t,latestClaimUrl:v})))};var P=n(52705),x=n(12278),A=n(10561),T=n(58210),Z=n(81352),V={doFetchChannelIsLiveForId:A.vk,doCommentSocketConnect:x.sB,doCommentSocketDisconnect:x.Vt,doFetchLatestClaimForChannel:P.T$};const W=(0,r.$j)((function(e,t){var n=e.router.location,r=n.search,l=n.hash,i=function(e,t){var n=Object.assign({},e);if(t&&t.length>0)if(t.includes("/")){var r=n.params.claimName,a=t.substring(0,t.indexOf("/"));r.includes(a)||(n.params.claimName=r+a,n.params.claimId=t.substring(t.indexOf("/")+1))}else n.params.claimId=n.params.claimId+t;return n}((t||{}).match,l),c=function(e){if(e){var t=e.params,n=t.claimName,r=t.claimId,a=!n.startsWith("@")&&!n.includes(":")&&!n.includes("#")&&r,l=!a;if(a){try{return(0,s.buildURI)({claimName:n,claimId:r})}catch(e){}try{return(0,s.buildURI)({claimName:n,claimId:r})}catch(e){}}if(l)return(0,s.normalizeURI)(n+"/"+(r||""))}return""}(i),o=new URLSearchParams(r).get("feature"),m=(0,d.B0)(e,c),u=(m||{}).canonical_url,h=null==m?void 0:m.claim_id,v=(0,T.tg)(m)||{},b=v.claim_id,p=v.canonical_url,C=o===a.LIVE_NOW?(0,f.XO)(e,b):(0,d.hI)(e,u),E=o===a.LIVE_NOW?(0,f.ds)(e,b):C&&C.canonical_url;return E&&(c=E),{uri:c,claimId:h,latestClaimId:C&&C.claim_id,canonicalUrl:u,channelUri:p,channelClaimId:b,latestClaimUrl:E,isResolvingUri:c&&(0,d.ki)(e,c),isLivestreamClaim:o===a.LIVE_NOW||(0,T.F)(m),contentUnlocked:m&&(0,Z.Pt)(e,m.claim_id)}}),V)(R)}}]);
//# sourceMappingURL=embedWrapper-a815c581bcd0e26fb240.js.map