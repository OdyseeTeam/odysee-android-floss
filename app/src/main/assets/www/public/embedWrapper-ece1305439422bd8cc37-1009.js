"use strict";(self.webpackChunkodysee_com=self.webpackChunkodysee_com||[]).push([[2959],{30357:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var r=n(24582),a=n(73249),i=n(46351),l=n(88441),c=n(66598),o=n.n(c),s=n(16643),m=n(80398),u=n.n(m),d=n(13690),f=n(12562),p=n(6170),h=n(91616),v=n(53389),I=n(6993),y=n(71036).__;function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,l,c=[],o=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C=(0,d.e)((function(){return Promise.all([n.e(1031),n.e(2861)]).then(n.bind(n,92687))})),_=(0,d.e)((function(){return Promise.all([n.e(4316),n.e(5475),n.e(8137)]).then(n.bind(n,75181))})),E=(0,d.e)((function(){return Promise.all([n.e(1031),n.e(9226)]).then(n.bind(n,24428))})),U=function(e){var t,n=b(l.useState(!1),2),r=n[0],c=n[1],m=e.uri,u=e.collectionId,d=e.collectionFirstItemUri,g=e.isCollection,U=e.renderMode,O=e.doFetchItemsInCollection,N=(0,s.useHistory)(),L=N.location,w=L.search,S=L.pathname,k=N.match,F=new URLSearchParams(w),R=F.get("feature"),x=R===a.LATEST,P=R===a.LIVE_NOW,j=S&&S.includes("/playlist/");if(P||x)t=m;else{var A,T,B=function(e,t){var n=Object.assign({},e||{});if(t&&t.length>0&&n.params)if(t.includes("/")){var r=n.params.claimName,a=t.substring(0,t.indexOf("/"));r&&!r.includes(a)&&(n.params.claimName=r+a,n.params.claimId=t.substring(t.indexOf("/")+1))}else n.params.claimId=(n.params.claimId||"")+t;return n}(k,null===(A=window)||void 0===A||null===(T=A.location)||void 0===T?void 0:T.hash);t=function(e){if(e){var t=e.params||{},n=t.claimName,r=t.claimId;if("home"===n&&!r)return"";var a=n&&!n.startsWith("@")&&!n.includes(":")&&!n.includes("#")&&r,i=!a;if(a)try{return(0,v.buildURI)({claimName:n,claimId:r})}catch(e){}if(i&&n)return(0,v.normalizeURI)(n+"/"+(r||""))}return""}(B),t||(t=m)}var V=F.get("embedBackgroundLight");if(l.useEffect((function(){u&&O&&O({collectionId:u})}),[u,O]),j&&u&&d){var W=(0,I.$U)(d),$="/$/embed".concat(W,"?").concat(i.COLLECTION_ID,"=").concat(u);return l.createElement(s.Redirect,{to:$})}if(j&&u&&!d)return l.createElement("div",{className:"main--empty"},l.createElement(h.Z,{text:y("Loading playlist...")}));var M=(t?(0,v.parseURI)(t):{isChannel:!1}).isChannel,D=U===f.yh,z=Boolean(M||g||D);return l.createElement(p.D.Provider,{value:{videoEnded:r,setVideoEnded:c}},l.createElement("div",{className:o()("embed__wrapper",{"embed__wrapper--light-background":V,"embed__wrapper--page":z})},l.createElement(l.Suspense,{fallback:l.createElement("div",{className:"main--empty"},l.createElement(h.Z,{text:y("Loading...")}))},u&&!j?l.createElement(_,{collectionId:u}):z?l.createElement(C,{uri:t,latestContentPath:x,liveContentPath:P}):l.createElement(E,{uri:t}))))};U.propTypes={uri:u().string,collectionId:u().string,collectionFirstItemUri:u().string,isCollection:u().bool,renderMode:u().string,doFetchItemsInCollection:u().func};const O=U;var N=n(7920),L=n(52705),w=n(58210),S=n(12278),k=n(10561),F=n(55754),R=n(31391),x=n(81352),P=n(32583),j=n(2038),A={doFetchChannelIsLiveForId:k.vk,doCommentSocketConnect:S.sB,doCommentSocketDisconnect:S.Vt,doFetchLatestClaimForChannel:L.T$,doFetchItemsInCollection:j.x3};const T=(0,r.$j)((function(e,t){var n=e.router.location,r=n.search,i=n.hash,l=(t||{}).match,c=(e.router.location||{}).pathname,o=l?function(e,t){var n=Object.assign({},e);n.params||(n.params={});if(t&&t.length>0&&n.params)if(t.includes("/")){var r=n.params.claimName,a=t.substring(0,t.indexOf("/"));r&&!r.includes(a)&&(n.params.claimName=r+a,n.params.claimId=t.substring(t.indexOf("/")+1))}else n.params.claimId=(n.params.claimId||"")+t;return n}(l,i):function(e){var t={params:{}};try{if(!e)return t;var n=e.split("/").filter(Boolean),r=n.indexOf("embed");if(r>-1){var a=decodeURIComponent(n[r+1]||""),i=decodeURIComponent(n[r+2]||"");t.params.claimName=a,i&&(t.params.claimId=i)}}catch(e){}return t}(c),s=function(e){if(e&&e.params){var t=e.params||{},n=t.claimName,r=t.claimId;if(!n)return"";if("home"===n&&!r)return"";var a="string"==typeof n&&!n.startsWith("@")&&!n.includes(":")&&!n.includes("#")&&r,i=!a;if(a)try{return(0,v.buildURI)({claimName:n,claimId:r})}catch(e){}if(i)return(0,v.normalizeURI)(String(n)+"/"+(r||""))}return""}(o),m=new URLSearchParams(r).get("feature"),u=null,d=c&&c.match(/\/\$\/(?:embed\/)?playlist\/([a-f0-9]{40})/i);d&&(u=d[1]);var f=(0,N.B0y)(e,s),p=(f||{}).canonical_url,h=null==f?void 0:f.claim_id,I=(0,w.tg)(f),y=(0,w._I)(f),b=(I||{}).canonical_url,g=m===a.LIVE_NOW?(0,F.XO)(e,y):(0,N.hIv)(e,p),C=m===a.LIVE_NOW?(0,F.ds)(e,y):g&&g.canonical_url,_=g&&g.claim_id;C&&(s=C);var E=u;if(!E&&s&&"string"==typeof s&&s.toLowerCase().includes("/playlist")){var U=s.match(/[#:/]([0-9a-f]{40})/i);U&&(E=U[1])}var O=f&&"collection"===f.value_type||Boolean(E),L=f&&"collection"===f.value_type?f.claim_id:E;return{uri:s,claimId:h,latestClaimId:_,canonicalUrl:p,channelUri:b,channelClaimId:y,isCollection:O,collectionId:L,collectionFirstItemUri:L?(0,P.cu)(e,L):null,renderMode:s?(0,R.To)(s)(e):void 0,latestClaimUrl:C,isResolvingUri:s&&(0,N.kic)(e,s),isLivestreamClaim:m===a.LIVE_NOW||(0,w.F)(f),contentUnlocked:f&&(0,x.Pt)(e,f.claim_id)}}),A)(O)}}]);
//# sourceMappingURL=embedWrapper-ece1305439422bd8cc37-1009.js.map