{"version":3,"file":"modalAutoUpdateDownloaded-d09ee5bc3274022baff6.js","mappings":"utCAkFA,MChFA,EDQ2B,SAACA,GAC1B,IAAQC,EAAuBD,EAAvBC,mBACwCC,EAAAC,GAAZC,EAAAA,EAAAA,UAAS,IAAG,GAAzCC,EAAUH,EAAA,GAAEI,EAAaJ,EAAA,GACwBK,EAAAJ,GAAZC,EAAAA,EAAAA,UAAS,IAAG,GAAjDI,EAAcD,EAAA,GAAEE,EAAiBF,EAAA,GACmCG,EAAAP,GAAfC,EAAAA,EAAAA,WAAS,GAAM,GAApEO,EAAsBD,EAAA,GAAEE,EAAyBF,EAAA,GACWG,EAAAV,GAAfC,EAAAA,EAAAA,WAAS,GAAM,GAA5DU,EAAkBD,EAAA,GAAEE,EAAqBF,EAAA,GAE1CG,EACJC,EAAAA,cAAA,UACIhB,GAAsBiB,EAAG,wDAAyD,CAAEC,YAAad,KAGjGe,EACJH,EAAAA,cAAA,KAAGI,UAAU,QACXJ,EAAAA,cAACK,EAAAA,EAAW,CACVC,OAAQ,CACNC,cACEP,EAAAA,cAACQ,EAAAA,QAAM,CAACC,OAAO,OAAOC,MAAOT,EAAG,iBAAkBU,KAAK,sDAG5D,4DA4BL,OAtBAC,EAAAA,EAAAA,YAAU,WAORjB,GAA0B,GAC1BkB,MAPuB,mEACP,CACdC,OAAQ,MACRC,QAAS,CAAEC,OAAQ,oCAKlBC,MAAK,SAACC,GAAQ,OAAKA,EAASC,MAAM,IAClCF,MAAK,SAACC,GACL7B,EAAc6B,EAASE,UACvB5B,EAAkB0B,EAASG,MAC3B1B,GAA0B,GAC1BG,GAAsB,EACxB,IAAE,OACK,WACLH,GAA0B,GAC1BG,GAAsB,EACxB,GACJ,GAAG,IAECJ,EACKM,EAAAA,cAAA,SAAIC,EAAG,eAGZJ,EAEAG,EAAAA,cAAA,WACGD,EACAI,GAMLH,EAAAA,cAAA,OAAKI,UAAU,kBACZL,EACDC,EAAAA,cAAA,SACEA,EAAAA,cAACsB,EAAAA,EAAe,CAACC,QAAShC,KAE3BY,EAGP,C,spCEvCA,QA/BkC,SAACpB,GACjC,IAAQyC,EAAkCzC,EAAlCyC,WAAYC,EAAsB1C,EAAtB0C,kBAC2BxC,EAAAC,GAAfC,EAAAA,EAAAA,WAAS,GAAM,GAAxCuC,EAAQzC,EAAA,GAAE0C,EAAW1C,EAAA,GAY5B,OACEe,EAAAA,cAAC4B,EAAAA,GAAK,CACJC,QAAM,EACNC,KAAK,UACLC,aAAc9B,EAAG,sBACjB+B,MAAO/B,EAAG,mBACVgC,mBAAoBhC,EAAG,eACvBiC,iBAAkBjC,EAAG,WACrBkC,sBAAuBT,EACvBU,YAnBkB,WACpBT,GAAY,GACZU,YAAYC,KAAK,qBACnB,EAiBIC,UAfgB,WAClBd,IACAD,GACF,GAcIxB,EAAAA,cAACwC,EAAAA,EAAkB,MAGzB,EC9BA,SAAeC,EAAAA,EAAAA,IACb,MANc,SAAAC,GAAQ,MAAK,CAC3BlB,WAAY,kBAAMkB,GAASC,EAAAA,EAAAA,MAAc,EACzClB,kBAAmB,kBAAMiB,GAASE,EAAAA,EAAAA,MAAuB,EAC1D,GAED,CAGEC,E","sources":["webpack://odysee.com/../ui/component/lastReleaseChanges/view.jsx","webpack://odysee.com/../ui/component/lastReleaseChanges/index.js","webpack://odysee.com/../ui/modal/modalAutoUpdateDownloaded/view.jsx","webpack://odysee.com/../ui/modal/modalAutoUpdateDownloaded/index.js"],"sourcesContent":["// @flow\nimport React, { useState, useEffect } from 'react';\nimport MarkdownPreview from 'component/common/markdown-preview';\nimport Button from 'component/button';\nimport I18nMessage from 'component/i18nMessage';\n\ntype Props = {\n  hideReleaseVersion?: boolean,\n};\n\nconst LastReleaseChanges = (props: Props) => {\n  const { hideReleaseVersion } = props;\n  const [releaseTag, setReleaseTag] = useState('');\n  const [releaseChanges, setReleaseChanges] = useState('');\n  const [fetchingReleaseChanges, setFetchingReleaseChanges] = useState(false);\n  const [fetchReleaseFailed, setFetchReleaseFailed] = useState(false);\n\n  const releaseVersionTitle = (\n    <p>\n      {!hideReleaseVersion && __('A new version %release_tag% of LBRY is ready for you.', { release_tag: releaseTag })}\n    </p>\n  );\n  const seeReleaseNotes = (\n    <p className=\"help\">\n      <I18nMessage\n        tokens={{\n          release_notes: (\n            <Button button=\"link\" label={__('release notes')} href=\"https://github.com/lbryio/lbry-desktop/releases\" />\n          ),\n        }}\n      >\n        Want to know what has changed? See the %release_notes%.\n      </I18nMessage>\n    </p>\n  );\n\n  useEffect(() => {\n    const lastReleaseUrl = 'https://api.github.com/repos/lbryio/lbry-desktop/releases/latest';\n    const options = {\n      method: 'GET',\n      headers: { Accept: 'application/vnd.github.v3+json' },\n    };\n\n    setFetchingReleaseChanges(true);\n    fetch(lastReleaseUrl, options)\n      .then((response) => response.json())\n      .then((response) => {\n        setReleaseTag(response.tag_name);\n        setReleaseChanges(response.body);\n        setFetchingReleaseChanges(false);\n        setFetchReleaseFailed(false);\n      })\n      .catch(() => {\n        setFetchingReleaseChanges(false);\n        setFetchReleaseFailed(true);\n      });\n  }, []);\n\n  if (fetchingReleaseChanges) {\n    return <p>{__('Loading...')}</p>;\n  }\n\n  if (fetchReleaseFailed) {\n    return (\n      <div>\n        {releaseVersionTitle}\n        {seeReleaseNotes}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"release__notes\">\n      {releaseVersionTitle}\n      <p>\n        <MarkdownPreview content={releaseChanges} />\n      </p>\n      {seeReleaseNotes}\n    </div>\n  );\n};\n\nexport default LastReleaseChanges;\n","import LastReleaseChanges from './view';\n\nexport default LastReleaseChanges;\n","// @flow\nimport React, { useState } from 'react';\nimport { Modal } from 'modal/modal';\nimport LastReleaseChanges from 'component/lastReleaseChanges';\n\ntype Props = {\n  closeModal: any => any,\n  declineAutoUpdate: () => any,\n};\n\nconst ModalAutoUpdateDownloaded = (props: Props) => {\n  const { closeModal, declineAutoUpdate } = props;\n  const [disabled, setDisabled] = useState(false);\n\n  const handleConfirm = () => {\n    setDisabled(true);\n    ipcRenderer.send('autoUpdateAccepted');\n  };\n\n  const handleAbort = () => {\n    declineAutoUpdate();\n    closeModal();\n  };\n\n  return (\n    <Modal\n      isOpen\n      type=\"confirm\"\n      contentLabel={__('Upgrade Downloaded')}\n      title={__('LBRY leveled up')}\n      confirmButtonLabel={__('Upgrade Now')}\n      abortButtonLabel={__('Not Now')}\n      confirmButtonDisabled={disabled}\n      onConfirmed={handleConfirm}\n      onAborted={handleAbort}\n    >\n      <LastReleaseChanges />\n    </Modal>\n  );\n};\n\nexport default ModalAutoUpdateDownloaded;\n","import { connect } from 'react-redux';\nimport { doAutoUpdateDeclined, doHideModal } from 'redux/actions/app';\nimport ModalAutoUpdateDownloaded from './view';\n\nconst perform = dispatch => ({\n  closeModal: () => dispatch(doHideModal()),\n  declineAutoUpdate: () => dispatch(doAutoUpdateDeclined()),\n});\n\nexport default connect(\n  null,\n  perform\n)(ModalAutoUpdateDownloaded);\n"],"names":["props","hideReleaseVersion","_useState2","_slicedToArray","useState","releaseTag","setReleaseTag","_useState4","releaseChanges","setReleaseChanges","_useState6","fetchingReleaseChanges","setFetchingReleaseChanges","_useState8","fetchReleaseFailed","setFetchReleaseFailed","releaseVersionTitle","React","__","release_tag","seeReleaseNotes","className","I18nMessage","tokens","release_notes","Button","button","label","href","useEffect","fetch","method","headers","Accept","then","response","json","tag_name","body","MarkdownPreview","content","closeModal","declineAutoUpdate","disabled","setDisabled","Modal","isOpen","type","contentLabel","title","confirmButtonLabel","abortButtonLabel","confirmButtonDisabled","onConfirmed","ipcRenderer","send","onAborted","LastReleaseChanges","connect","dispatch","doHideModal","doAutoUpdateDeclined","ModalAutoUpdateDownloaded"],"sourceRoot":""}