{"version":3,"file":"discover-ec11c57cc4eadcf05606-1009.js","mappings":"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","sources":["webpack://odysee.com/../ui/component/common/hidden-nsfw.jsx","webpack://odysee.com/../ui/page/discover/view.jsx","webpack://odysee.com/../ui/page/discover/index.js","webpack://odysee.com/../ui/page/discover/internal/livestreamSection/view.jsx","webpack://odysee.com/../ui/page/discover/internal/livestreamSection/index.js"],"sourcesContent":["// @flow\nimport * as PAGES from 'constants/pages';\nimport * as ICONS from 'constants/icons';\nimport React from 'react';\nimport Button from 'component/button';\nimport Icon from 'component/common/icon';\nimport I18nMessage from 'component/i18nMessage';\n\ntype Props = {\n  type?: string,\n};\n\nexport default function HiddenNsfw(props: Props) {\n  const { type = 'page' } = props;\n\n  return (\n    <div className=\"section--padded section__subtitle\">\n      <Icon className=\"icon--hidden\" icon={ICONS.EYE_OFF} />\n      <I18nMessage\n        tokens={{\n          type,\n          settings: (\n            <Button button=\"link\" label={__('settings')} navigate={`/$/${PAGES.SETTINGS}`} requiresAuth={IS_WEB} />\n          ),\n        }}\n      >\n        Content may be hidden on this %type% because of your %settings%.\n      </I18nMessage>\n    </div>\n  );\n}\n","// @flow\nimport React from 'react';\nimport classnames from 'classnames';\nimport { DOMAIN, SIMPLE_SITE } from 'config';\nimport * as ICONS from 'constants/icons';\nimport * as PAGES from 'constants/pages';\nimport * as CS from 'constants/claim_search';\nimport Page from 'component/page';\nimport ClaimListDiscover from 'component/claimListDiscover';\nimport Button from 'component/button';\nimport { ClaimSearchFilterContext } from 'contexts/claimSearchFilterContext';\nimport HiddenNsfw from 'component/common/hidden-nsfw';\nimport Icon from 'component/common/icon';\nimport LbcSymbol from 'component/common/lbc-symbol';\nimport I18nMessage from 'component/i18nMessage';\nimport moment from 'moment';\nimport LivestreamSection from './internal/livestreamSection';\nimport { tagSearchCsOptionsHook } from 'util/search';\n\nconst CATEGORY_CONTENT_TYPES_FILTER = CS.CONTENT_TYPES.filter((x) => x !== CS.CLAIM_REPOST);\n\ntype Props = {\n  dynamicRouteProps: RowDataItem,\n  location: { search: string },\n  followedTags: Array<Tag>,\n  repostedUri: string,\n  repostedClaim: ?GenericClaim,\n  doToggleTagFollowDesktop: (string) => void,\n  doResolveUri: (string) => void,\n  tileLayout: boolean,\n  discoverDataNew: ?Array<string>,\n};\n\nfunction DiscoverPage(props: Props) {\n  const {\n    location: { search },\n    repostedClaim,\n    repostedUri,\n    doResolveUri,\n    tileLayout,\n    dynamicRouteProps,\n    discoverDataNew,\n  } = props;\n\n  const isWildWest = dynamicRouteProps && dynamicRouteProps.id === 'WILD_WEST';\n  const isExplore = dynamicRouteProps && dynamicRouteProps.id === 'EXPLORABLE_CHANNEL';\n  const exploreChannelsIds = isExplore && discoverDataNew && discoverDataNew.length > 0 ? discoverDataNew : undefined;\n  const isCategory = Boolean(dynamicRouteProps);\n  const hideFilter = dynamicRouteProps?.hideSort || undefined;\n\n  const urlParams = new URLSearchParams(search);\n  const langParam = urlParams.get(CS.LANGUAGE_KEY) || null;\n  const claimType = urlParams.get('claim_type');\n  const tagsQuery = urlParams.get('t') || null;\n  const orderParam = urlParams.get(CS.ORDER_BY_KEY);\n  const tags = tagsQuery ? tagsQuery.split(',') : null;\n  const repostedClaimIsResolved = repostedUri && repostedClaim;\n  const hideRepostRibbon = isCategory && !isWildWest;\n  const hideMembersOnlyContent = isCategory && !isWildWest;\n\n  // Eventually allow more than one tag on this page\n  // Restricting to one to make follow/unfollow simpler\n  const tag = (tags && tags[0]) || null;\n  const routedChannelIds = dynamicRouteProps?.options?.channelIds;\n  const channelIds = routedChannelIds && routedChannelIds.length > 0 ? routedChannelIds : undefined;\n  const excludedChannelIds = dynamicRouteProps?.options?.excludedChannelIds || undefined;\n\n  const claimSearchFilters = {\n    contentTypes: isCategory && !isWildWest ? CATEGORY_CONTENT_TYPES_FILTER : CS.CONTENT_TYPES,\n    liftUpTagSearch: true,\n  };\n\n  // **************************************************************************\n  // **************************************************************************\n\n  function getMeta() {\n    if (!dynamicRouteProps) {\n      return (\n        <a\n          className=\"help\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          href=\"https://help.odysee.tv/category-blockchain/category-staking/increase/\"\n          title={__('Learn more about Credits on %DOMAIN%', { DOMAIN })}\n        >\n          <I18nMessage tokens={{ lbc: <LbcSymbol /> }}>Results boosted by %lbc%</I18nMessage>\n        </a>\n      );\n    }\n\n    return null;\n  }\n\n  function getSubSection() {\n    const includeLivestreams = !tagsQuery;\n    if (includeLivestreams && (isWildWest || (channelIds && channelIds.length > 0))) {\n      return (\n        <LivestreamSection\n          tileLayout={repostedUri ? false : tileLayout}\n          channelIds={channelIds}\n          excludedChannelIds={isWildWest ? excludedChannelIds : null}\n          searchLanguages={dynamicRouteProps?.options?.searchLanguages}\n          langParam={langParam}\n          hideMembersOnlyContent={hideMembersOnlyContent}\n        />\n      );\n    }\n    return null;\n  }\n\n  function getPins(routeProps) {\n    if (routeProps && (routeProps.pinnedUrls || routeProps.pinnedClaimIds)) {\n      return {\n        urls: routeProps.pinnedUrls,\n        claimIds: routeProps.pinnedClaimIds,\n        onlyPinForOrder: CS.ORDER_BY_TRENDING,\n      };\n    }\n  }\n\n  function getHeaderLabel() {\n    let headerLabel;\n    if (repostedClaim) {\n      headerLabel = __('Reposts of %uri%', { uri: repostedUri });\n    } else if (tag && !isCategory) {\n      headerLabel = (\n        <h1 className=\"page__title\">\n          <Icon icon={ICONS.TAG} size={10} />\n          <span>\n            #{(tag === CS.TAGS_ALL && __('All Content')) || (tag === CS.TAGS_FOLLOWED && __('Followed Tags')) || tag}\n          </span>\n\n          <span>\n            <Button\n              className=\"claim-search__tags-link\"\n              button=\"link\"\n              label={__('Manage Tags')}\n              navigate={`/$/${PAGES.TAGS_FOLLOWING_MANAGE}`}\n            />\n          </span>\n        </h1>\n      );\n    } else {\n      headerLabel = (\n        <>\n          <h1 className=\"page__title\">\n            <Icon icon={(dynamicRouteProps && dynamicRouteProps.icon) || ICONS.DISCOVER} size={10} />\n            <label>{(dynamicRouteProps && __(`${dynamicRouteProps.title}`)) || __('All Content')}</label>\n          </h1>\n        </>\n      );\n    }\n    return headerLabel;\n  }\n\n  function getDefaultOrderBy() {\n    // We were passing undefined to 'ClaimListDiscover::defaultOrderBy', so we\n    // don't know what the fallback actually is for our remaining logic (i.e.\n    // getReleaseTime()) to work correctly.\n    // Make it explicit here rather than depending on the component's default.\n    return isWildWest || tags ? CS.ORDER_BY_TRENDING : dynamicRouteProps?.options?.orderBy || CS.ORDER_BY_TOP;\n  }\n\n  function getReleaseTime() {\n    const defaultOrder = getDefaultOrderBy();\n    const order = orderParam || defaultOrder;\n    const isOrderTop = order === CS.ORDER_BY_TOP;\n    const categoryReleaseTime = dynamicRouteProps?.options?.releaseTime;\n\n    if (isWildWest) {\n      // The homepage definition currently does not support 'start-of-week', so\n      // continue to hardcode here for now.\n      return `>${Math.floor(moment().subtract(0, 'hour').startOf('week').unix())}`;\n    }\n\n    if (categoryReleaseTime && !isOrderTop) {\n      return categoryReleaseTime;\n    }\n\n    return undefined;\n  }\n\n  // **************************************************************************\n  // **************************************************************************\n\n  React.useEffect(() => {\n    if (repostedUri && !repostedClaimIsResolved) {\n      doResolveUri(repostedUri);\n    }\n  }, [repostedUri, repostedClaimIsResolved, doResolveUri]);\n\n  // **************************************************************************\n  // **************************************************************************\n\n  return (\n    <Page noFooter fullWidthPage={tileLayout} className={classnames({ 'hide-ribbon': hideRepostRibbon })}>\n      <ClaimSearchFilterContext.Provider value={claimSearchFilters}>\n        <ClaimListDiscover\n          pins={getPins(dynamicRouteProps)}\n          hideFilters={isWildWest ? true : hideFilter}\n          header={repostedUri ? <span /> : undefined}\n          subSection={getSubSection()}\n          tileLayout={repostedUri ? false : tileLayout}\n          defaultOrderBy={getDefaultOrderBy()}\n          claimType={claimType ? [claimType] : undefined}\n          defaultStreamType={undefined}\n          // defaultStreamType={isCategory && !isWildWest ? [CS.FILE_VIDEO, CS.FILE_AUDIO, CS.FILE_DOCUMENT] : undefined} remove due to claim search bug with reposts\n          headerLabel={getHeaderLabel()}\n          tags={tags}\n          hiddenNsfwMessage={<HiddenNsfw type=\"page\" />}\n          repostedClaimId={repostedClaim ? repostedClaim.claim_id : null}\n          // TODO: find a better way to determine discover / wild west vs other modes release times\n          // for now including && !tags so that\n          releaseTime={getReleaseTime()}\n          feeAmount={undefined}\n          channelIds={isExplore && exploreChannelsIds ? exploreChannelsIds : channelIds}\n          excludedChannelIds={excludedChannelIds}\n          limitClaimsPerChannel={\n            orderParam === CS.ORDER_BY_NEW\n              ? 5\n              : SIMPLE_SITE\n              ? (dynamicRouteProps && dynamicRouteProps.options && dynamicRouteProps.options.limitClaimsPerChannel) || 3\n              : 3\n          }\n          meta={getMeta()}\n          hasSource\n          hideRepostsOverride={dynamicRouteProps ? false : undefined}\n          hideMembersOnlyContent={hideMembersOnlyContent}\n          searchLanguages={dynamicRouteProps?.options?.searchLanguages}\n          duration={dynamicRouteProps?.options?.duration}\n          csOptionsHook={tagSearchCsOptionsHook}\n          sectionTitle={dynamicRouteProps?.title}\n        />\n      </ClaimSearchFilterContext.Provider>\n    </Page>\n  );\n}\n\nexport default DiscoverPage;\n","import * as CS from 'constants/claim_search';\nimport { connect } from 'react-redux';\nimport { doResolveUri } from 'redux/actions/claims';\nimport { selectClaimForUri } from 'redux/selectors/claims';\nimport * as SETTINGS from 'constants/settings';\nimport { selectClientSetting, selectHomepageDiscoverNew } from 'redux/selectors/settings';\nimport DiscoverPage from './view';\n\nconst select = (state, props) => {\n  const urlParams = new URLSearchParams(props.location.search);\n  const repostedUriInUrl = urlParams.get(CS.REPOSTED_URI_KEY);\n  const repostedUri = repostedUriInUrl ? decodeURIComponent(repostedUriInUrl) : undefined;\n\n  const discoverDataNew = selectHomepageDiscoverNew(state);\n\n  return {\n    repostedUri: repostedUri,\n    repostedClaim: repostedUri ? selectClaimForUri(state, repostedUri, false) : null,\n    tileLayout: selectClientSetting(state, SETTINGS.TILE_LAYOUT),\n    discoverDataNew: discoverDataNew,\n  };\n};\n\nconst perform = {\n  doResolveUri,\n};\n\nexport default connect(select, perform)(DiscoverPage);\n","// @flow\nimport React from 'react';\nimport Button from 'component/button';\nimport { ENABLE_NO_SOURCE_CLAIMS } from 'config';\nimport * as ICONS from 'constants/icons';\nimport ClaimListDiscover from 'component/claimListDiscover';\nimport { useIsMobile, useIsLargeScreen } from 'effects/use-screensize';\nimport usePersistedState from 'effects/use-persisted-state';\n\nconst DEFAULT_LIVESTREAM_TILE_LIMIT = 8;\nconst SECTION = Object.freeze({ COLLAPSED: 1, EXPANDED: 2 });\n\nfunction getTileLimit(isLargeScreen, originalSize) {\n  return isLargeScreen ? originalSize * (3 / 2) : originalSize;\n}\n\n// ****************************************************************************\n// ****************************************************************************\n\ntype Props = {\n  tileLayout: boolean,\n  hideMembersOnlyContent?: boolean,\n  // -- redux --\n  livestreamSectionQueryStr: string,\n  activeLivestreamUris: ?Array<string>,\n  doFetchAllActiveLivestreamsForQuery: (query?: { orderBy: ?Array<string>, lang: ?Array<string> }) => void,\n};\n\nexport default function LivestreamSection(props: Props) {\n  const {\n    tileLayout,\n    hideMembersOnlyContent,\n    // -- redux --\n    livestreamSectionQueryStr,\n    activeLivestreamUris,\n    doFetchAllActiveLivestreamsForQuery,\n  } = props;\n\n  const [liveSectionStore, setLiveSectionStore] = usePersistedState('discover:lsSection', SECTION.COLLAPSED);\n  const [expandedYPos, setExpandedYPos] = React.useState(null);\n\n  const isMobile = useIsMobile();\n  const isLargeScreen = useIsLargeScreen();\n\n  const initialLiveTileLimit = isMobile ? 6 : getTileLimit(isLargeScreen, DEFAULT_LIVESTREAM_TILE_LIMIT);\n  const [liveSection, setLiveSection] = React.useState(liveSectionStore || SECTION.COLLAPSED);\n  const liveTilesOverLimit = activeLivestreamUris && activeLivestreamUris.length > initialLiveTileLimit;\n\n  function collapseSection() {\n    window.scrollTo(0, 0);\n    setLiveSection(SECTION.COLLAPSED);\n  }\n\n  React.useEffect(() => {\n    // Sync liveSection --> liveSectionStore\n    if (liveSection !== liveSectionStore) {\n      setLiveSectionStore(liveSection);\n    }\n  }, [liveSection, setLiveSectionStore, liveSectionStore]);\n\n  React.useEffect(() => {\n    doFetchAllActiveLivestreamsForQuery(JSON.parse(livestreamSectionQueryStr));\n  }, [doFetchAllActiveLivestreamsForQuery, livestreamSectionQueryStr]);\n\n  React.useEffect(() => {\n    // Maintain y-position when expanding livestreams section:\n    if (liveSection === SECTION.EXPANDED && expandedYPos !== null) {\n      window.scrollTo(0, expandedYPos);\n      setExpandedYPos(null);\n    }\n  }, [liveSection, expandedYPos]);\n\n  if (!activeLivestreamUris || activeLivestreamUris.length === 0) {\n    return null;\n  }\n\n  if (isMobile) {\n    return (\n      <div className=\"livestream-list\">\n        <ClaimListDiscover\n          uris={\n            liveSection === SECTION.COLLAPSED\n              ? activeLivestreamUris.slice(0, initialLiveTileLimit)\n              : activeLivestreamUris\n          }\n          tileLayout={tileLayout}\n          headerLabel={<h1 className=\"page__title\">{__('Livestreams')}</h1>}\n          useSkeletonScreen={false}\n          showHeader={false}\n          hideFilters\n          hideMembersOnlyContent={hideMembersOnlyContent}\n          infiniteScroll={false}\n          loading={false}\n          showNoSourceClaims={ENABLE_NO_SOURCE_CLAIMS}\n        />\n\n        {liveTilesOverLimit && liveSection === SECTION.COLLAPSED && (\n          <div className=\"upcoming-list__view-more\">\n            <Button\n              label={__('Show more livestreams')}\n              button=\"link\"\n              iconRight={ICONS.DOWN}\n              className=\"claim-grid__title--secondary\"\n              onClick={() => {\n                doFetchAllActiveLivestreamsForQuery();\n                setExpandedYPos(window.scrollY);\n                setLiveSection(SECTION.EXPANDED);\n              }}\n            />\n          </div>\n        )}\n\n        {liveTilesOverLimit && liveSection === SECTION.EXPANDED && (\n          <div className=\"upcoming-list__view-more\">\n            <Button\n              label={__('Show fewer livestreams')}\n              button=\"link\"\n              iconRight={ICONS.UP}\n              className=\"claim-grid__title--secondary\"\n              onClick={collapseSection}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"livestream-list\">\n      <ClaimListDiscover\n        uris={\n          liveSection === SECTION.COLLAPSED ? activeLivestreamUris.slice(0, initialLiveTileLimit) : activeLivestreamUris\n        }\n        tileLayout={tileLayout}\n        showHeader={false}\n        hideFilters\n        infiniteScroll={false}\n        loading={false}\n        showNoSourceClaims={ENABLE_NO_SOURCE_CLAIMS}\n        hideMembersOnlyContent={hideMembersOnlyContent}\n      />\n\n      {liveTilesOverLimit && liveSection === SECTION.COLLAPSED && (\n        <div className=\"upcoming-list__view-more\">\n          <Button\n            label={__('Show more livestreams')}\n            button=\"link\"\n            iconRight={ICONS.DOWN}\n            className=\"claim-grid__title--secondary\"\n            onClick={() => {\n              doFetchAllActiveLivestreamsForQuery();\n              setExpandedYPos(window.scrollY);\n              setLiveSection(SECTION.EXPANDED);\n            }}\n          />\n        </div>\n      )}\n\n      {liveTilesOverLimit && liveSection === SECTION.EXPANDED && (\n        <div className=\"upcoming-list__view-more\">\n          <Button\n            label={__('Show fewer livestreams')}\n            button=\"link\"\n            iconRight={ICONS.UP}\n            className=\"claim-grid__title--secondary\"\n            onClick={collapseSection}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n","import { connect } from 'react-redux';\n\nimport * as SETTINGS from 'constants/settings';\n\nimport { resolveLangForClaimSearch } from 'util/default-languages';\n\nimport { selectFilteredActiveLivestreamUris } from 'redux/selectors/livestream';\nimport { selectClientSetting, selectLanguage } from 'redux/selectors/settings';\n\nimport { doFetchAllActiveLivestreamsForQuery } from 'redux/actions/livestream';\n\nimport LivestreamSection from './view';\n\nconst select = (state, props) => {\n  const { searchLanguages, langParam, channelIds, excludedChannelIds } = props;\n\n  const languageSetting = selectLanguage(state);\n  const searchInLanguage = selectClientSetting(state, SETTINGS.SEARCH_IN_LANGUAGE);\n\n  const langCsv = resolveLangForClaimSearch(languageSetting, searchInLanguage, searchLanguages, langParam);\n  const lang = langCsv ? langCsv.split(',') : null;\n  const livestreamSectionQuery = { any_languages: lang };\n  const livestreamSectionQueryStr = JSON.stringify(livestreamSectionQuery);\n\n  return {\n    livestreamSectionQueryStr,\n    activeLivestreamUris: selectFilteredActiveLivestreamUris(\n      state,\n      channelIds,\n      excludedChannelIds,\n      livestreamSectionQueryStr\n    ),\n  };\n};\n\nconst perform = {\n  doFetchAllActiveLivestreamsForQuery,\n};\n\nexport default connect(select, perform)(LivestreamSection);\n"],"names":["HiddenNsfw","props","_props$type","type","React","className","Icon","icon","ICONS","I18nMessage","tokens","settings","Button","button","label","__","navigate","concat","PAGES","requiresAuth","IS_WEB","CATEGORY_CONTENT_TYPES_FILTER","CS","x","_dynamicRouteProps$op","_dynamicRouteProps$op2","_dynamicRouteProps$op6","_dynamicRouteProps$op7","_dynamicRouteProps$op5","defaultOrder","isOrderTop","categoryReleaseTime","_dynamicRouteProps$op3","search","location","repostedClaim","repostedUri","doResolveUri","tileLayout","dynamicRouteProps","discoverDataNew","isWildWest","id","isExplore","exploreChannelsIds","length","undefined","isCategory","Boolean","hideFilter","hideSort","urlParams","URLSearchParams","langParam","get","claimType","tagsQuery","orderParam","tags","split","repostedClaimIsResolved","hideRepostRibbon","hideMembersOnlyContent","tag","routedChannelIds","options","channelIds","excludedChannelIds","claimSearchFilters","contentTypes","liftUpTagSearch","getDefaultOrderBy","_dynamicRouteProps$op4","orderBy","Page","noFooter","fullWidthPage","classnames","ClaimSearchFilterContext","value","ClaimListDiscover","pins","routeProps","pinnedUrls","pinnedClaimIds","urls","claimIds","onlyPinForOrder","getPins","hideFilters","header","subSection","LivestreamSection","searchLanguages","defaultOrderBy","defaultStreamType","headerLabel","uri","size","title","hiddenNsfwMessage","repostedClaimId","claim_id","releaseTime","Math","floor","moment","subtract","startOf","unix","feeAmount","limitClaimsPerChannel","SIMPLE_SITE","meta","target","rel","href","DOMAIN","lbc","LbcSymbol","hasSource","hideRepostsOverride","duration","csOptionsHook","tagSearchCsOptionsHook","sectionTitle","perform","connect","state","repostedUriInUrl","decodeURIComponent","selectHomepageDiscoverNew","selectClaimForUri","selectClientSetting","SETTINGS","DiscoverPage","DEFAULT_LIVESTREAM_TILE_LIMIT","SECTION","Object","freeze","COLLAPSED","EXPANDED","doFetchAllActiveLivestreamsForQuery","languageSetting","selectLanguage","searchInLanguage","langCsv","resolveLangForClaimSearch","livestreamSectionQuery","any_languages","livestreamSectionQueryStr","JSON","stringify","activeLivestreamUris","selectFilteredActiveLivestreamUris","_usePersistedState2","_slicedToArray","usePersistedState","liveSectionStore","setLiveSectionStore","_React$useState2","expandedYPos","setExpandedYPos","isMobile","useIsMobile","isLargeScreen","useIsLargeScreen","initialLiveTileLimit","originalSize","getTileLimit","_React$useState4","liveSection","setLiveSection","liveTilesOverLimit","collapseSection","window","scrollTo","parse","uris","slice","useSkeletonScreen","showHeader","infiniteScroll","loading","showNoSourceClaims","ENABLE_NO_SOURCE_CLAIMS","iconRight","onClick","scrollY"],"sourceRoot":""}