{"version":3,"file":"outgoingPaymentsTab-3b63bfab73cacfb2ba39-1009.js","mappings":"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","sources":["webpack://odysee.com/../ui/component/copyableText/index.js","webpack://odysee.com/../ui/component/copyableText/view.jsx","webpack://odysee.com/../ui/page/creatorMemberships/supporterArea/paymentsTab/internal/paymentRow/view.jsx","webpack://odysee.com/../ui/page/creatorMemberships/supporterArea/paymentsTab/internal/paymentRow/index.js","webpack://odysee.com/../ui/page/creatorMemberships/supporterArea/paymentsTab/view.jsx","webpack://odysee.com/../ui/page/creatorMemberships/supporterArea/paymentsTab/index.js"],"sourcesContent":["import { connect } from 'react-redux';\nimport { doToast } from 'redux/actions/notifications';\nimport CopyableText from './view';\n\nexport default connect(null, {\n  doToast,\n})(CopyableText);\n","// @flow\nimport * as ICONS from 'constants/icons';\nimport { FormField } from 'component/common/form';\nimport Button from 'component/button';\nimport React, { useRef } from 'react';\n\ntype Props = {\n  copyable: string,\n  onlyCopy: boolean,\n  snackMessage: ?string,\n  doToast: ({ message: string }) => void,\n  label?: string,\n  primaryButton?: boolean,\n  name?: string,\n  hideValue?: boolean,\n  linkTo?: string, // url to append copyable to 'https://link.to/<copyable>`\n  onCopy?: (string) => string,\n  enableInputMask?: boolean,\n};\n\nexport default function CopyableText(props: Props) {\n  const {\n    copyable,\n    onlyCopy,\n    doToast,\n    snackMessage,\n    label,\n    primaryButton = false,\n    name,\n    onCopy,\n    enableInputMask,\n    linkTo,\n    hideValue,\n  } = props;\n  const [maskInput, setMaskInput] = React.useState(enableInputMask);\n\n  const input = useRef();\n\n  function handleCopyText() {\n    if (enableInputMask || onlyCopy) {\n      navigator.clipboard\n        .writeText(copyable)\n        .then(() => {\n          doToast({ message: snackMessage || __('Text copied') });\n        })\n        .catch(() => {\n          doToast({ message: __('Failed to copy.'), isError: true });\n        });\n    } else {\n      const topRef = input.current;\n      if (topRef && topRef.input && topRef.input.current) {\n        topRef.input.current.select();\n        if (onCopy) {\n          // Allow clients to change the selection before making the copy.\n          onCopy(topRef.input.current);\n        }\n      }\n\n      document.execCommand('copy');\n      doToast({ message: snackMessage || __('Text copied') });\n    }\n  }\n\n  function onFocus() {\n    // We have to go a layer deep since the input is inside the form component\n    const topRef = input.current;\n    if (topRef && topRef.input && topRef.input.current) {\n      topRef.input.current.select();\n    }\n  }\n\n  return (\n    <FormField\n      type={maskInput ? 'password' : 'text'}\n      className=\"form-field--copyable\"\n      hideValue={hideValue}\n      readOnly\n      name={name}\n      label={label}\n      value={copyable || ''}\n      ref={input}\n      onFocus={onFocus}\n      inputButton={\n        <>\n          <Button\n            button={primaryButton ? 'primary' : 'secondary'}\n            icon={ICONS.COPY}\n            onClick={handleCopyText}\n            aria-label={__('Copy %copyable%', { copyable: copyable })}\n          />\n          {linkTo && (\n            <Button\n              button={primaryButton ? 'primary' : 'secondary'}\n              icon={ICONS.EXTERNAL}\n              navigate={`${linkTo}${copyable}`}\n              description={'Link'}\n            />\n          )}\n        </>\n      }\n      helper={\n        enableInputMask && (\n          <Button button=\"link\" onClick={() => setMaskInput(!maskInput)} label={maskInput ? __('Show') : __('Hide')} />\n        )\n      }\n    />\n  );\n}\n","// @flow\nimport React from 'react';\nimport UriIndicator from 'component/uriIndicator';\nimport ChannelThumbnail from 'component/channelThumbnail';\nimport { buildURI } from 'util/lbryURI';\nimport moment from 'moment';\nimport CopyableText from 'component/copyableText';\nimport Tooltip from 'component/common/tooltip';\nimport { toCapitalCase } from 'util/string';\nimport { formatLbryUrlForWeb } from 'util/url';\nimport Button from 'component/button';\nimport * as ICONS from 'constants/icons';\n\ninterface IProps {\n  transaction: MembershipPayment;\n  recipientChannel?: ChannelClaim;\n  senderChannel?: ChannelClaim;\n  membership: CreatorMembership;\n}\n\n// takes a claimId, selects the claim for it\n// renders the name, thumb, etc, waits for it\nfunction View(props: IProps) {\n  const { membership, transaction, recipientChannel, senderChannel } = props;\n  const { name: recipientName, claim_id: recipientClaimId } = recipientChannel || {};\n  const { name: senderName, claim_id: senderClaimId } = senderChannel || {};\n  const recipientUri = recipientChannel\n    ? buildURI({\n        channelName: recipientName,\n        channelClaimId: recipientClaimId,\n      })\n    : null;\n\n  const senderUri = senderChannel\n    ? buildURI({\n        channelName: senderName,\n        channelClaimId: senderClaimId,\n      })\n    : null;\n\n  const creatorChannelPath = formatLbryUrlForWeb(recipientUri);\n\n  return (\n    <tr key={transaction.transaction_id}>\n      <td>\n        <Tooltip title={moment(new Date(transaction.initiated_at)).format('LLL')}>\n          <div>{moment(new Date(transaction.initiated_at)).format('LL')}</div>\n        </Tooltip>\n      </td>\n      <td className=\"channelThumbnail\">\n        {recipientUri ? (\n          <UriIndicator focusable={false} uri={recipientUri} link>\n            <ChannelThumbnail xsmall link uri={recipientUri} />\n            <label>{recipientChannel?.name}</label>\n          </UriIndicator>\n        ) : (\n          <div>Anon</div>\n        )}\n      </td>\n      <td className=\"channelThumbnail\">\n        {senderUri ? (\n          <UriIndicator focusable={false} uri={senderUri} link>\n            <ChannelThumbnail xsmall link uri={senderUri} />\n            <label>{senderChannel?.name}</label>\n          </UriIndicator>\n        ) : (\n          <div>Anon</div>\n        )}\n      </td>\n      <td>\n        <span dir=\"auto\" className=\"button__label\">\n          <Button\n            button=\"primary\"\n            icon={ICONS.MEMBERSHIP}\n            navigate={creatorChannelPath + '?view=membership'}\n            label={membership && membership.name}\n          />\n        </span>\n      </td>\n      <td className=\"payment-txid\">\n        {!transaction.transaction_id.startsWith('in_') && (\n          <CopyableText hideValue linkTo={`https://viewblock.io/arweave/tx/`} copyable={transaction.transaction_id} />\n        )}\n      </td>\n      <td>\n        {membership && ''}${(transaction.usd_amount / 100).toFixed(2)} USD\n      </td>\n      <td>{transaction.status ? toCapitalCase(transaction.status) : '...'}</td>\n    </tr>\n  );\n}\n\nexport default View;\n","import { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport PaymentRow from './view';\nimport { selectClaimForClaimId } from 'redux/selectors/claims';\nimport { selectMembershipForId } from 'redux/selectors/memberships';\n\nconst select = (state, props) => {\n  const { transaction } = props;\n  const recipientChannel = selectClaimForClaimId(state, transaction?.creator_channel_claim_id);\n  const senderChannel = selectClaimForClaimId(state, transaction?.subscriber_channel_claim_id);\n  const membership = selectMembershipForId(state, transaction.membership_id);\n\n  return {\n    recipientChannel,\n    senderChannel,\n    membership,\n  };\n};\n\nconst perform = {};\n\nexport default withRouter(connect(select, perform)(PaymentRow));\n","// @flow\nimport React from 'react';\nimport PaymentRow from './internal/paymentRow';\n\ninterface IProps {\n  doMembershipFetchOutgoingPayments: () => void;\n  transactions: Array<any>;\n  channelsToList?: Array<Claim>;\n}\n\nfunction PaymentsTab(props: IProps) {\n  const { doMembershipFetchOutgoingPayments, transactions, channelsToList } = props;\n\n  React.useEffect(() => {\n    doMembershipFetchOutgoingPayments();\n  }, [doMembershipFetchOutgoingPayments]);\n\n  const channelIdsToList = channelsToList && channelsToList.map((c) => c.claim_id);\n\n  const transactionsToList = (\n    channelIdsToList && channelIdsToList.length\n      ? transactions.filter((t) => channelIdsToList.includes(t.subscriber_channel_claim_id))\n      : transactions\n  ).sort((a, b) => new Date(b.initiated_at).getTime() - new Date(a.initiated_at).getTime());\n\n  return (\n    <>\n      <div className=\"membership-payments-table__wrapper\">\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th className=\"date-header\">{__('Date')}</th> {/* completed_at */}\n              <th className=\"channelName-header\">{<>{__('Receiving Channel')}</>}</th> {/* */}\n              <th className=\"channelName-header\">{<>{__('Sending Channel')}</>}</th> {/* */}\n              <th>{__('Membership')} </th> {/* */}\n              <th className=\"payment-txid\">{__('Transaction')} </th>\n              <th className=\"amount-header\">{__('Amount')} </th> {/* */}\n              <th className=\"amount-header\">{__('Status')} </th> {/* */}\n            </tr>\n          </thead>\n          <tbody>\n            {transactionsToList &&\n              transactionsToList.map((transaction) => {\n                return <PaymentRow key={transaction.transaction_id} transaction={transaction} />;\n              })}\n          </tbody>\n        </table>\n        {transactions.length === 0 && <p className=\"wallet__fiat-transactions\">{__('No Membership Payments')}</p>}\n      </div>\n    </>\n  );\n}\n\nexport default PaymentsTab;\n","import { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport PaymentsTab from './view';\nimport { doMembershipFetchOutgoingPayments } from 'redux/actions/memberships';\nimport {\n  selectMembershipTxOutgoing,\n  selectMembershipTxOutgoingFetching,\n  selectMembershipTxOutgoingError,\n} from 'redux/selectors/memberships';\n\nconst select = (state) => ({\n  transactions: selectMembershipTxOutgoing(state),\n  txsFetching: selectMembershipTxOutgoingFetching(state),\n  txsError: selectMembershipTxOutgoingError(state),\n});\n\nconst perform = {\n  doMembershipFetchOutgoingPayments,\n};\n\nexport default withRouter(connect(select, perform)(PaymentsTab));\n"],"names":["connect","doToast","props","copyable","onlyCopy","snackMessage","label","_props$primaryButton","primaryButton","name","onCopy","enableInputMask","linkTo","hideValue","_React$useState2","_slicedToArray","React","maskInput","setMaskInput","input","useRef","FormField","type","className","readOnly","value","ref","onFocus","topRef","current","select","inputButton","Button","button","icon","ICONS","onClick","navigator","clipboard","writeText","then","message","__","isError","document","execCommand","navigate","concat","description","helper","membership","transaction","recipientChannel","senderChannel","_ref","recipientName","recipientClaimId","claim_id","_ref2","senderName","senderClaimId","recipientUri","buildURI","channelName","channelClaimId","senderUri","creatorChannelPath","formatLbryUrlForWeb","key","transaction_id","Tooltip","title","moment","Date","initiated_at","format","UriIndicator","focusable","uri","link","ChannelThumbnail","xsmall","dir","startsWith","CopyableText","usd_amount","toFixed","status","toCapitalCase","withRouter","state","selectClaimForClaimId","creator_channel_claim_id","subscriber_channel_claim_id","selectMembershipForId","membership_id","PaymentRow","doMembershipFetchOutgoingPayments","transactions","channelsToList","channelIdsToList","map","c","transactionsToList","length","filter","t","includes","sort","a","b","getTime","perform","selectMembershipTxOutgoing","txsFetching","selectMembershipTxOutgoingFetching","txsError","selectMembershipTxOutgoingError","PaymentsTab"],"sourceRoot":""}