webpackHotUpdate("ui-202210030702",{

/***/ "../config.js":
/*!********************!*\
  !*** ../config.js ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(process) {// On Web, this will find .env.defaults and optional .env in web/\n// On Desktop App, this will find .env.defaults and optional .env in root dir\n__webpack_require__(/*! dotenv-defaults */ \"../node_modules/dotenv-defaults/src/index.js\").config({\n  silent: false\n});\n\nvar config = {\n  MINIMUM_VERSION: \"20220825001\",\n  IGNORE_MINIMUM_VERSION: \"true\",\n  WEBPACK_WEB_PORT: \"9090\",\n  WEBPACK_ELECTRON_PORT: \"9091\",\n  WEB_SERVER_PORT: \"1337\",\n  LBRY_WEB_API: \"https://api.na-backend.odysee.com\",\n  // api.na-backend.odysee.com',\n  LBRY_WEB_PUBLISH_API: \"https://publish.na-backend.odysee.com/v1\",\n  LBRY_WEB_PUBLISH_API_V2: \"https://publish.na-backend.odysee.com/api/v2/publish/\",\n  LBRY_API_URL: \"https://api.odysee.com\",\n  // api.odysee.com',\n  LBRY_WEB_BUFFER_API: \"https://collector-service.api.lbry.tv/api/v1/events/video\",\n  SEARCH_SERVER_API: \"https://lighthouse.odysee.tv/search\",\n  SEARCH_SERVER_API_ALT: \"https://recsys.odysee.tv/search\",\n  COMMENT_SERVER_API: \"https://comments.odysee.tv/api/v2\",\n  SOCKETY_SERVER_API: \"wss://sockety.odysee.tv/ws\",\n  LOCALE_API: \"https://api.odysee.com/legal/requirements\",\n  WELCOME_VERSION: \"1.0\",\n  DOMAIN: \"odysee.com\",\n  SHARE_DOMAIN_URL: process.env.SHARE_DOMAIN_URL,\n  URL: \"https://odysee.com\",\n  RECSYS_ENDPOINT: \"https://recsys.odysee.tv/v1/lvv\",\n  RECSYS_FYP_ENDPOINT: \"https://recsys.odysee.tv/v1/u\",\n  IMAGE_PROXY_URL: process.env.IMAGE_PROXY_URL,\n  THUMBNAIL_CDN_URL: \"https://thumbnails.odycdn.com/optimize/\",\n  THUMBNAIL_CARDS_CDN_URL: \"https://thumbnails.odycdn.com/card/s:1280:720/quality:85/plain/\",\n  THUMBNAIL_HEIGHT: \"220\",\n  THUMBNAIL_HEIGHT_POSTER: \"720\",\n  THUMBNAIL_WIDTH: \"390\",\n  THUMBNAIL_WIDTH_POSTER: \"1280\",\n  THUMBNAIL_QUALITY: \"85\",\n  THUMBNAIL_CDN_SIZE_LIMIT_BYTES: \"5242880\",\n  PLAYER_SERVER: \"https://player.odycdn.com\",\n  SITE_TITLE: \"Odysee\",\n  SITE_NAME: \"Odysee\",\n  SITE_DESCRIPTION: \"Explore a whole universe of videos on Odysee from regular people just like you!\",\n  SITE_HELP_EMAIL: \"help@odysee.com\",\n  // SOCIAL MEDIA\n  TWITTER_ACCOUNT: \"OdyseeTeam\",\n  // LOGO\n  LOGO_TITLE: \"odysee\",\n  LOGO: \"https://thumbnails.odycdn.com/optimize/s:100:100/quality:85/plain/https://spee.ch/odysee-logo-png:3.png\",\n  LOGO_WHITE_TEXT: \"https://thumbnails.odycdn.com/optimize/s:1000:300/quality:85/plain/https://spee.ch/odysee-white-png:f.png\",\n  LOGO_DARK_TEXT: \"https://thumbnails.odycdn.com/optimize/s:1000:300/quality:85/plain/https://spee.ch/odysee-png:2.png\",\n  AVATAR_DEFAULT: \"https://thumbnails.odycdn.com/optimize/s:160:160/quality:85/plain/https://spee.ch/spaceman-png:2.png\",\n  MISSING_THUMB_DEFAULT: \"https://thumbnails.odycdn.com/optimize/s:390:220/quality:85/plain/https://spee.ch/missing-thumb-png\",\n  // OG\n  OG_TITLE_SUFFIX: \"| odysee.com\",\n  OG_HOMEPAGE_TITLE: \"Odysee\",\n  OG_IMAGE_URL: \"https://thumbnails.odycdn.com/optimize/s:1200:630/quality:85/plain/https://spee.ch/odysee-og:e.png\",\n  // MASCOT\n  YRBL_HAPPY_IMG_URL: \"https://thumbnails.odycdn.com/optimize/s:300:300/quality:85/plain/https://spee.ch/spaceman-happy:a.png\",\n  YRBL_SAD_IMG_URL: \"https://thumbnails.odycdn.com/optimize/s:300:300/quality:85/plain/https://spee.ch/spaceman-sad:d.png\",\n  LOGIN_IMG_URL: \"https://thumbnails.odycdn.com/optimize/s:400:507/quality:85/plain/https://player.odycdn.com/speech/odysee-sign-up:d.png\",\n  SITE_CANONICAL_URL: \"odysee.com\",\n  DEFAULT_LANGUAGE: \"en\",\n  AUTO_FOLLOW_CHANNELS: \"lbry://@Odysee#80d2590ad04e36fb1d077a9b9e3a8bba76defdf8 lbry://@OdyseeHelp#b58dfaeab6c70754d792cdd9b56ff59b90aea334\",\n  UNSYNCED_SETTINGS: process.env.UNSYNCED_SETTINGS,\n  // ENABLE FEATURES\n  ENABLE_COMMENT_REACTIONS: \"true\" === 'true',\n  ENABLE_FILE_REACTIONS: \"true\" === 'true',\n  ENABLE_CREATOR_REACTIONS: \"true\" === 'true',\n  ENABLE_NO_SOURCE_CLAIMS: \"true\" === 'true',\n  ENABLE_PREROLL_ADS: \"false\" === 'false',\n  CHANNEL_STAKED_LEVEL_VIDEO_COMMENTS: \"4\",\n  CHANNEL_CREATION_LIMIT: \"5\",\n  WEB_PUBLISH_SIZE_LIMIT_GB: \"10\",\n  LOADING_BAR_COLOR: \"#e50054\",\n  SIMPLE_SITE: \"true\" === 'true',\n  SHOW_ADS: \"false\" === 'false',\n  KNOWN_APP_DOMAINS:  true ? \"open.lbry.com,lbry.tv,lbry.lat,odysee.com\".split(',') : undefined,\n  STRIPE_PUBLIC_KEY: \"pk_test_NoL1JWL7i1ipfhVId5KfDZgo\",\n  ENABLE_UI_NOTIFICATIONS: \"true\" === 'true',\n  ENABLE_MATURE: \"false\" === 'true',\n  CUSTOM_HOMEPAGE: \"true\" === 'true',\n  SHOW_TAGS_INTRO: \"false\" === 'true',\n  LIGHTHOUSE_DEFAULT_TYPES: \"audio,video\",\n  BRANDED_SITE: \"odysee\",\n  // FIREBASE SDK\n  FIREBASE_API_KEY: process.env.FIREBASE_API_KEY,\n  FIREBASE_AUTH_DOMAIN: process.env.FIREBASE_AUTH_DOMAIN,\n  FIREBASE_PROJECT_ID: process.env.FIREBASE_PROJECT_ID,\n  FIREBASE_STORAGE_BUCKET: process.env.FIREBASE_STORAGE_BUCKET,\n  FIREBASE_MESSAGING_SENDER_ID: process.env.FIREBASE_MESSAGING_SENDER_ID,\n  FIREBASE_APP_ID: process.env.FIREBASE_APP_ID,\n  FIREBASE_MEASUREMENT_ID: process.env.FIREBASE_MEASUREMENT_ID,\n  FIREBASE_VAPID_KEY: process.env.FIREBASE_VAPID_KEY,\n  AD_KEYWORD_BLOCKLIST: \"nigger,jew,faggot\",\n  AD_KEYWORD_BLOCKLIST_CHECK_DESCRIPTION: \"true\",\n  // FROM COMMAND LINE\n  COMMIT_ID: process.env.COMMIT_ID,\n  NODE_ENV: \"development\"\n};\nconfig.SDK_API_PATH = \"\".concat(config.LBRY_WEB_API, \"/api/v1\");\nconfig.PROXY_URL = \"\".concat(config.SDK_API_PATH, \"/proxy\");\nconfig.URL_DEV = \"http://localhost:\".concat(config.WEBPACK_WEB_PORT);\nconfig.URL_LOCAL = \"http://localhost:\".concat(config.WEB_SERVER_PORT);\nconfig.FAVICON = \"/public/favicon-spaceman.png\";\nmodule.exports = config;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./web/node_modules/process/browser.js */ \"./node_modules/process/browser.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY29uZmlnLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL2NvbmZpZy5qcz9iMDVjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIE9uIFdlYiwgdGhpcyB3aWxsIGZpbmQgLmVudi5kZWZhdWx0cyBhbmQgb3B0aW9uYWwgLmVudiBpbiB3ZWIvXG4vLyBPbiBEZXNrdG9wIEFwcCwgdGhpcyB3aWxsIGZpbmQgLmVudi5kZWZhdWx0cyBhbmQgb3B0aW9uYWwgLmVudiBpbiByb290IGRpclxucmVxdWlyZSgnZG90ZW52LWRlZmF1bHRzJykuY29uZmlnKHsgc2lsZW50OiBmYWxzZSB9KTtcblxuY29uc3QgY29uZmlnID0ge1xuICBNSU5JTVVNX1ZFUlNJT046IHByb2Nlc3MuZW52Lk1JTklNVU1fVkVSU0lPTixcbiAgSUdOT1JFX01JTklNVU1fVkVSU0lPTjogcHJvY2Vzcy5lbnYuSUdOT1JFX01JTklNVU1fVkVSU0lPTixcbiAgV0VCUEFDS19XRUJfUE9SVDogcHJvY2Vzcy5lbnYuV0VCUEFDS19XRUJfUE9SVCxcbiAgV0VCUEFDS19FTEVDVFJPTl9QT1JUOiBwcm9jZXNzLmVudi5XRUJQQUNLX0VMRUNUUk9OX1BPUlQsXG4gIFdFQl9TRVJWRVJfUE9SVDogcHJvY2Vzcy5lbnYuV0VCX1NFUlZFUl9QT1JULFxuICBMQlJZX1dFQl9BUEk6IHByb2Nlc3MuZW52LkxCUllfV0VCX0FQSSwgLy8gYXBpLm5hLWJhY2tlbmQub2R5c2VlLmNvbScsXG4gIExCUllfV0VCX1BVQkxJU0hfQVBJOiBwcm9jZXNzLmVudi5MQlJZX1dFQl9QVUJMSVNIX0FQSSxcbiAgTEJSWV9XRUJfUFVCTElTSF9BUElfVjI6IHByb2Nlc3MuZW52LkxCUllfV0VCX1BVQkxJU0hfQVBJX1YyLFxuICBMQlJZX0FQSV9VUkw6IHByb2Nlc3MuZW52LkxCUllfQVBJX1VSTCwgLy8gYXBpLm9keXNlZS5jb20nLFxuICBMQlJZX1dFQl9CVUZGRVJfQVBJOiBwcm9jZXNzLmVudi5MQlJZX1dFQl9CVUZGRVJfQVBJLFxuICBTRUFSQ0hfU0VSVkVSX0FQSTogcHJvY2Vzcy5lbnYuU0VBUkNIX1NFUlZFUl9BUEksXG4gIFNFQVJDSF9TRVJWRVJfQVBJX0FMVDogcHJvY2Vzcy5lbnYuU0VBUkNIX1NFUlZFUl9BUElfQUxULFxuICBDT01NRU5UX1NFUlZFUl9BUEk6IHByb2Nlc3MuZW52LkNPTU1FTlRfU0VSVkVSX0FQSSxcbiAgU09DS0VUWV9TRVJWRVJfQVBJOiBwcm9jZXNzLmVudi5TT0NLRVRZX1NFUlZFUl9BUEksXG4gIExPQ0FMRV9BUEk6IHByb2Nlc3MuZW52LkxPQ0FMRV9BUEksXG4gIFdFTENPTUVfVkVSU0lPTjogcHJvY2Vzcy5lbnYuV0VMQ09NRV9WRVJTSU9OLFxuICBET01BSU46IHByb2Nlc3MuZW52LkRPTUFJTixcbiAgU0hBUkVfRE9NQUlOX1VSTDogcHJvY2Vzcy5lbnYuU0hBUkVfRE9NQUlOX1VSTCxcbiAgVVJMOiBwcm9jZXNzLmVudi5VUkwsXG4gIFJFQ1NZU19FTkRQT0lOVDogcHJvY2Vzcy5lbnYuUkVDU1lTX0VORFBPSU5ULFxuICBSRUNTWVNfRllQX0VORFBPSU5UOiBwcm9jZXNzLmVudi5SRUNTWVNfRllQX0VORFBPSU5ULFxuICBJTUFHRV9QUk9YWV9VUkw6IHByb2Nlc3MuZW52LklNQUdFX1BST1hZX1VSTCxcbiAgVEhVTUJOQUlMX0NETl9VUkw6IHByb2Nlc3MuZW52LlRIVU1CTkFJTF9DRE5fVVJMLFxuICBUSFVNQk5BSUxfQ0FSRFNfQ0ROX1VSTDogcHJvY2Vzcy5lbnYuVEhVTUJOQUlMX0NBUkRTX0NETl9VUkwsXG4gIFRIVU1CTkFJTF9IRUlHSFQ6IHByb2Nlc3MuZW52LlRIVU1CTkFJTF9IRUlHSFQsXG4gIFRIVU1CTkFJTF9IRUlHSFRfUE9TVEVSOiBwcm9jZXNzLmVudi5USFVNQk5BSUxfSEVJR0hUX1BPU1RFUixcbiAgVEhVTUJOQUlMX1dJRFRIOiBwcm9jZXNzLmVudi5USFVNQk5BSUxfV0lEVEgsXG4gIFRIVU1CTkFJTF9XSURUSF9QT1NURVI6IHByb2Nlc3MuZW52LlRIVU1CTkFJTF9XSURUSF9QT1NURVIsXG4gIFRIVU1CTkFJTF9RVUFMSVRZOiBwcm9jZXNzLmVudi5USFVNQk5BSUxfUVVBTElUWSxcbiAgVEhVTUJOQUlMX0NETl9TSVpFX0xJTUlUX0JZVEVTOiBwcm9jZXNzLmVudi5USFVNQk5BSUxfQ0ROX1NJWkVfTElNSVRfQllURVMsXG4gIFBMQVlFUl9TRVJWRVI6IHByb2Nlc3MuZW52LlBMQVlFUl9TRVJWRVIsXG4gIFNJVEVfVElUTEU6IHByb2Nlc3MuZW52LlNJVEVfVElUTEUsXG4gIFNJVEVfTkFNRTogcHJvY2Vzcy5lbnYuU0lURV9OQU1FLFxuICBTSVRFX0RFU0NSSVBUSU9OOiBwcm9jZXNzLmVudi5TSVRFX0RFU0NSSVBUSU9OLFxuICBTSVRFX0hFTFBfRU1BSUw6IHByb2Nlc3MuZW52LlNJVEVfSEVMUF9FTUFJTCxcbiAgLy8gU09DSUFMIE1FRElBXG4gIFRXSVRURVJfQUNDT1VOVDogcHJvY2Vzcy5lbnYuVFdJVFRFUl9BQ0NPVU5ULFxuICAvLyBMT0dPXG4gIExPR09fVElUTEU6IHByb2Nlc3MuZW52LkxPR09fVElUTEUsXG4gIExPR086IHByb2Nlc3MuZW52LkxPR08sXG4gIExPR09fV0hJVEVfVEVYVDogcHJvY2Vzcy5lbnYuTE9HT19XSElURV9URVhULFxuICBMT0dPX0RBUktfVEVYVDogcHJvY2Vzcy5lbnYuTE9HT19EQVJLX1RFWFQsXG4gIEFWQVRBUl9ERUZBVUxUOiBwcm9jZXNzLmVudi5BVkFUQVJfREVGQVVMVCxcbiAgTUlTU0lOR19USFVNQl9ERUZBVUxUOiBwcm9jZXNzLmVudi5NSVNTSU5HX1RIVU1CX0RFRkFVTFQsXG4gIC8vIE9HXG4gIE9HX1RJVExFX1NVRkZJWDogcHJvY2Vzcy5lbnYuT0dfVElUTEVfU1VGRklYLFxuICBPR19IT01FUEFHRV9USVRMRTogcHJvY2Vzcy5lbnYuT0dfSE9NRVBBR0VfVElUTEUsXG4gIE9HX0lNQUdFX1VSTDogcHJvY2Vzcy5lbnYuT0dfSU1BR0VfVVJMLFxuICAvLyBNQVNDT1RcbiAgWVJCTF9IQVBQWV9JTUdfVVJMOiBwcm9jZXNzLmVudi5ZUkJMX0hBUFBZX0lNR19VUkwsXG4gIFlSQkxfU0FEX0lNR19VUkw6IHByb2Nlc3MuZW52LllSQkxfU0FEX0lNR19VUkwsXG4gIExPR0lOX0lNR19VUkw6IHByb2Nlc3MuZW52LkxPR0lOX0lNR19VUkwsXG4gIFNJVEVfQ0FOT05JQ0FMX1VSTDogcHJvY2Vzcy5lbnYuU0lURV9DQU5PTklDQUxfVVJMLFxuICBERUZBVUxUX0xBTkdVQUdFOiBwcm9jZXNzLmVudi5ERUZBVUxUX0xBTkdVQUdFLFxuICBBVVRPX0ZPTExPV19DSEFOTkVMUzogcHJvY2Vzcy5lbnYuQVVUT19GT0xMT1dfQ0hBTk5FTFMsXG4gIFVOU1lOQ0VEX1NFVFRJTkdTOiBwcm9jZXNzLmVudi5VTlNZTkNFRF9TRVRUSU5HUyxcblxuICAvLyBFTkFCTEUgRkVBVFVSRVNcbiAgRU5BQkxFX0NPTU1FTlRfUkVBQ1RJT05TOiBwcm9jZXNzLmVudi5FTkFCTEVfQ09NTUVOVF9SRUFDVElPTlMgPT09ICd0cnVlJyxcbiAgRU5BQkxFX0ZJTEVfUkVBQ1RJT05TOiBwcm9jZXNzLmVudi5FTkFCTEVfRklMRV9SRUFDVElPTlMgPT09ICd0cnVlJyxcbiAgRU5BQkxFX0NSRUFUT1JfUkVBQ1RJT05TOiBwcm9jZXNzLmVudi5FTkFCTEVfQ1JFQVRPUl9SRUFDVElPTlMgPT09ICd0cnVlJyxcbiAgRU5BQkxFX05PX1NPVVJDRV9DTEFJTVM6IHByb2Nlc3MuZW52LkVOQUJMRV9OT19TT1VSQ0VfQ0xBSU1TID09PSAndHJ1ZScsXG4gIEVOQUJMRV9QUkVST0xMX0FEUzogcHJvY2Vzcy5lbnYuRU5BQkxFX1BSRVJPTExfQURTID09PSAnZmFsc2UnLFxuICBDSEFOTkVMX1NUQUtFRF9MRVZFTF9WSURFT19DT01NRU5UUzogcHJvY2Vzcy5lbnYuQ0hBTk5FTF9TVEFLRURfTEVWRUxfVklERU9fQ09NTUVOVFMsXG4gIENIQU5ORUxfQ1JFQVRJT05fTElNSVQ6IHByb2Nlc3MuZW52LkNIQU5ORUxfQ1JFQVRJT05fTElNSVQsXG4gIFdFQl9QVUJMSVNIX1NJWkVfTElNSVRfR0I6IHByb2Nlc3MuZW52LldFQl9QVUJMSVNIX1NJWkVfTElNSVRfR0IsXG4gIExPQURJTkdfQkFSX0NPTE9SOiBwcm9jZXNzLmVudi5MT0FESU5HX0JBUl9DT0xPUixcbiAgU0lNUExFX1NJVEU6IHByb2Nlc3MuZW52LlNJTVBMRV9TSVRFID09PSAndHJ1ZScsXG4gIFNIT1dfQURTOiBwcm9jZXNzLmVudi5TSE9XX0FEUyA9PT0gJ2ZhbHNlJyxcbiAgS05PV05fQVBQX0RPTUFJTlM6IHByb2Nlc3MuZW52LktOT1dOX0FQUF9ET01BSU5TID8gcHJvY2Vzcy5lbnYuS05PV05fQVBQX0RPTUFJTlMuc3BsaXQoJywnKSA6IFtdLFxuICBTVFJJUEVfUFVCTElDX0tFWTogcHJvY2Vzcy5lbnYuU1RSSVBFX1BVQkxJQ19LRVksXG4gIEVOQUJMRV9VSV9OT1RJRklDQVRJT05TOiBwcm9jZXNzLmVudi5FTkFCTEVfVUlfTk9USUZJQ0FUSU9OUyA9PT0gJ3RydWUnLFxuICBFTkFCTEVfTUFUVVJFOiBwcm9jZXNzLmVudi5FTkFCTEVfTUFUVVJFID09PSAndHJ1ZScsXG4gIENVU1RPTV9IT01FUEFHRTogcHJvY2Vzcy5lbnYuQ1VTVE9NX0hPTUVQQUdFID09PSAndHJ1ZScsXG4gIFNIT1dfVEFHU19JTlRSTzogcHJvY2Vzcy5lbnYuU0hPV19UQUdTX0lOVFJPID09PSAndHJ1ZScsXG4gIExJR0hUSE9VU0VfREVGQVVMVF9UWVBFUzogcHJvY2Vzcy5lbnYuTElHSFRIT1VTRV9ERUZBVUxUX1RZUEVTLFxuICBCUkFOREVEX1NJVEU6IHByb2Nlc3MuZW52LkJSQU5ERURfU0lURSxcblxuICAvLyBGSVJFQkFTRSBTREtcbiAgRklSRUJBU0VfQVBJX0tFWTogcHJvY2Vzcy5lbnYuRklSRUJBU0VfQVBJX0tFWSxcbiAgRklSRUJBU0VfQVVUSF9ET01BSU46IHByb2Nlc3MuZW52LkZJUkVCQVNFX0FVVEhfRE9NQUlOLFxuICBGSVJFQkFTRV9QUk9KRUNUX0lEOiBwcm9jZXNzLmVudi5GSVJFQkFTRV9QUk9KRUNUX0lELFxuICBGSVJFQkFTRV9TVE9SQUdFX0JVQ0tFVDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfU1RPUkFHRV9CVUNLRVQsXG4gIEZJUkVCQVNFX01FU1NBR0lOR19TRU5ERVJfSUQ6IHByb2Nlc3MuZW52LkZJUkVCQVNFX01FU1NBR0lOR19TRU5ERVJfSUQsXG4gIEZJUkVCQVNFX0FQUF9JRDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfQVBQX0lELFxuICBGSVJFQkFTRV9NRUFTVVJFTUVOVF9JRDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfTUVBU1VSRU1FTlRfSUQsXG4gIEZJUkVCQVNFX1ZBUElEX0tFWTogcHJvY2Vzcy5lbnYuRklSRUJBU0VfVkFQSURfS0VZLFxuXG4gIEFEX0tFWVdPUkRfQkxPQ0tMSVNUOiBwcm9jZXNzLmVudi5BRF9LRVlXT1JEX0JMT0NLTElTVCxcbiAgQURfS0VZV09SRF9CTE9DS0xJU1RfQ0hFQ0tfREVTQ1JJUFRJT046IHByb2Nlc3MuZW52LkFEX0tFWVdPUkRfQkxPQ0tMSVNUX0NIRUNLX0RFU0NSSVBUSU9OLFxuXG4gIC8vIEZST00gQ09NTUFORCBMSU5FXG4gIENPTU1JVF9JRDogcHJvY2Vzcy5lbnYuQ09NTUlUX0lELFxuICBOT0RFX0VOVjogcHJvY2Vzcy5lbnYuTk9ERV9FTlYsXG59O1xuXG5jb25maWcuU0RLX0FQSV9QQVRIID0gYCR7Y29uZmlnLkxCUllfV0VCX0FQSX0vYXBpL3YxYDtcbmNvbmZpZy5QUk9YWV9VUkwgPSBgJHtjb25maWcuU0RLX0FQSV9QQVRIfS9wcm94eWA7XG5cbmNvbmZpZy5VUkxfREVWID0gYGh0dHA6Ly9sb2NhbGhvc3Q6JHtjb25maWcuV0VCUEFDS19XRUJfUE9SVH1gO1xuY29uZmlnLlVSTF9MT0NBTCA9IGBodHRwOi8vbG9jYWxob3N0OiR7Y29uZmlnLldFQl9TRVJWRVJfUE9SVH1gO1xuY29uZmlnLkZBVklDT04gPSBgL3B1YmxpYy9mYXZpY29uLXNwYWNlbWFuLnBuZ2A7XG5cbm1vZHVsZS5leHBvcnRzID0gY29uZmlnO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUE5RkE7QUFpR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../config.js\n");

/***/ }),

/***/ "../extras/lbryinc/lbryio.js":
/*!***********************************!*\
  !*** ../extras/lbryinc/lbryio.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony import */ var constants_action_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! constants/action_types */ \"../ui/constants/action_types.js\");\n/* harmony import */ var querystring__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! querystring */ \"./node_modules/querystring-es3/index.js\");\n/* harmony import */ var querystring__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(querystring__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! analytics */ \"../ui/analytics.js\");\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\n\n\n\nvar Lbryio = {\n  enabled: true,\n  authenticationPromise: null,\n  exchangePromise: null,\n  exchangeLastFetched: null,\n  CONNECTION_STRING: 'https://api.lbry.com/'\n};\nvar EXCHANGE_RATE_TIMEOUT = 20 * 60 * 1000;\nvar INTERNAL_APIS_DOWN = 'internal_apis_down'; // We can't use env's because they aren't passed into node_modules\n\nLbryio.setLocalApi = function (endpoint) {\n  Lbryio.CONNECTION_STRING = endpoint.replace(/\\/*$/, '/'); // exactly one slash at the end;\n};\n\nLbryio.call = function (resource, action) {\n  var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var method = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'post';\n\n  if (!Lbryio.enabled) {\n    return Promise.reject(new Error(__('LBRY internal API is disabled')));\n  }\n\n  if (!(method === 'get' || method === 'post')) {\n    return Promise.reject(new Error(__('Invalid method')));\n  }\n\n  function checkAndParse(response) {\n    if (response.status >= 200 && response.status < 300) {\n      return response.json();\n    }\n\n    if (response.status === 500) {\n      return Promise.reject(INTERNAL_APIS_DOWN);\n    }\n\n    if (response) {\n      return response.json().then(function (json) {\n        var error;\n\n        if (json.error) {\n          error = new Error(json.error);\n        } else {\n          error = new Error('Unknown API error signature');\n        }\n\n        error.response = response; // This is primarily a hack used in actions/user.js\n\n        return Promise.reject(error);\n      });\n    }\n  }\n\n  function makeRequest(url, options) {\n    return fetch(url, options).then(checkAndParse);\n  }\n\n  return Lbryio.getAuthToken().then(function (token) {\n    var fullParams = _objectSpread({\n      auth_token: token\n    }, params);\n\n    Object.keys(fullParams).forEach(function (key) {\n      var value = fullParams[key];\n\n      if (_typeof(value) === 'object') {\n        fullParams[key] = JSON.stringify(value);\n      }\n    });\n    var qs = querystring__WEBPACK_IMPORTED_MODULE_1___default.a.stringify(fullParams);\n    var url = \"\".concat(Lbryio.CONNECTION_STRING).concat(resource, \"/\").concat(action, \"?\").concat(qs);\n    var options = {\n      method: 'GET'\n    };\n\n    if (method === 'post') {\n      options = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: qs\n      };\n      url = \"\".concat(Lbryio.CONNECTION_STRING).concat(resource, \"/\").concat(action);\n    }\n\n    return makeRequest(url, options).then(function (response) {\n      sendCallAnalytics(resource, action, params);\n      return response.data;\n    })[\"catch\"](function (error) {\n      sendFailedCallAnalytics(resource, action, params, error);\n      throw error;\n    });\n  });\n};\n\nLbryio.authToken = null;\n\nLbryio.getAuthToken = function () {\n  return new Promise(function (resolve) {\n    if (Lbryio.authToken) {\n      resolve(Lbryio.authToken);\n    } else if (Lbryio.overrides.getAuthToken) {\n      Lbryio.overrides.getAuthToken().then(function (token) {\n        resolve(token);\n      });\n    } else if (typeof window !== 'undefined') {\n      var _window = window,\n          store = _window.store;\n\n      if (store) {\n        var state = store.getState();\n        var token = state.auth ? state.auth.authToken : null;\n        Lbryio.authToken = token;\n        resolve(token);\n      }\n\n      resolve(null);\n    } else {\n      resolve(null);\n    }\n  });\n};\n\nLbryio.getCurrentUser = function () {\n  return Lbryio.call('user', 'me');\n};\n\nLbryio.authenticate = function (domain, language) {\n  if (!Lbryio.enabled) {\n    var params = {\n      id: 1,\n      primary_email: 'disabled@lbry.io',\n      has_verified_email: true,\n      is_identity_verified: true,\n      is_reward_approved: false,\n      language: language || 'en'\n    };\n    return new Promise(function (resolve) {\n      resolve(params);\n    });\n  }\n\n  if (Lbryio.authenticationPromise === null) {\n    Lbryio.authenticationPromise = new Promise(function (resolve, reject) {\n      Lbryio.getAuthToken().then(function (token) {\n        if (!token || token.length > 60) {\n          return false;\n        } // check that token works\n\n\n        return Lbryio.getCurrentUser().then(function (user) {\n          return user;\n        })[\"catch\"](function (error) {\n          if (error === INTERNAL_APIS_DOWN) {\n            throw new Error('Internal APIS down');\n          }\n\n          return false;\n        });\n      }).then(function (user) {\n        if (user) {\n          return user;\n        }\n\n        var appId = window.odysee && window.odysee.build.googlePlay ? 'odyseeandroidAWhtoqDuAfQ6KHMXxFxt8tkhmt7sfprEMHWKjy5hf6PwZcHDV542V' : 'odyseeandroidAPKtoqDuAfQ6KHMXxFxt8tkhmt7sfprEMHWKjy5hf6PwZcHDV542V';\n        return new Promise(function (res, rej) {\n          Lbryio.call('user', 'new', {\n            auth_token: '',\n            language: language || 'en',\n            app_id: appId\n          }, 'post').then(function (response) {\n            if (!response.auth_token) {\n              throw new Error('auth_token was not set in the response');\n            }\n\n            var _window2 = window,\n                store = _window2.store;\n\n            if (Lbryio.overrides.setAuthToken) {\n              Lbryio.overrides.setAuthToken(response.auth_token);\n            }\n\n            if (store) {\n              store.dispatch({\n                type: constants_action_types__WEBPACK_IMPORTED_MODULE_0__[\"GENERATE_AUTH_TOKEN_SUCCESS\"],\n                data: {\n                  authToken: response.auth_token\n                }\n              });\n            }\n\n            Lbryio.authToken = response.auth_token;\n            return res(response);\n          })[\"catch\"](function (error) {\n            return rej(error);\n          });\n        }).then(function (newUser) {\n          if (!newUser) {\n            return Lbryio.getCurrentUser();\n          }\n\n          return newUser;\n        });\n      }).then(resolve, reject);\n    });\n  }\n\n  return Lbryio.authenticationPromise;\n};\n\nLbryio.getStripeToken = function () {\n  return Lbryio.CONNECTION_STRING.startsWith('http://localhost:') ? 'pk_test_NoL1JWL7i1ipfhVId5KfDZgo' : 'pk_live_e8M4dRNnCCbmpZzduEUZBgJO';\n};\n\nLbryio.getExchangeRates = function () {\n  if (!Lbryio.exchangeLastFetched || Date.now() - Lbryio.exchangeLastFetched > EXCHANGE_RATE_TIMEOUT) {\n    Lbryio.exchangePromise = new Promise(function (resolve, reject) {\n      Lbryio.call('lbc', 'exchange_rate', {}, 'get', true).then(function (_ref) {\n        var LBC_USD = _ref.lbc_usd,\n            LBC_BTC = _ref.lbc_btc,\n            BTC_USD = _ref.btc_usd;\n        var rates = {\n          LBC_USD: LBC_USD,\n          LBC_BTC: LBC_BTC,\n          BTC_USD: BTC_USD\n        };\n        resolve(rates);\n      })[\"catch\"](reject);\n    });\n    Lbryio.exchangeLastFetched = Date.now();\n  }\n\n  return Lbryio.exchangePromise;\n}; // Allow overriding lbryio methods\n// The desktop app will need to use it for getAuthToken because we use electron's ipcRenderer\n\n\nLbryio.overrides = {};\n\nLbryio.setOverride = function (methodName, newMethod) {\n  Lbryio.overrides[methodName] = newMethod;\n};\n\nfunction sendCallAnalytics(resource, action, params) {\n  switch (resource) {\n    case 'customer':\n      if (action === 'tip') {\n        analytics__WEBPACK_IMPORTED_MODULE_2__[\"default\"].event.report('spend_virtual_currency', {\n          // https://developers.google.com/analytics/devguides/collection/ga4/reference/events#spend_virtual_currency\n          value: params.amount,\n          virtual_currency_name: params.currency.toLowerCase(),\n          item_name: 'tip'\n        });\n      }\n\n      break;\n\n    default:\n      // Do nothing\n      break;\n  }\n}\n\nfunction sendFailedCallAnalytics(resource, action, params, error) {\n  if (resource === 'customer' && action === 'status' || resource === 'user' && action === 'referral') {\n    // Ignore commands that we use the error as a value, or don't care if it fails.\n    return;\n  }\n\n  var options = {\n    fingerprint: 'internal-api-failures',\n    tags: {\n      analytics: true,\n      method: \"\".concat(resource, \"/\").concat(action)\n    },\n    extra: {\n      error: error,\n      params: params\n    }\n  };\n  analytics__WEBPACK_IMPORTED_MODULE_2__[\"default\"].log('Internal API failures', options, 'analytics');\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Lbryio);\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vZXh0cmFzL2xicnlpbmMvbGJyeWlvLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL2V4dHJhcy9sYnJ5aW5jL2xicnlpby5qcz82MzA4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEFDVElPTlMgZnJvbSAnY29uc3RhbnRzL2FjdGlvbl90eXBlcyc7XG5pbXBvcnQgcXVlcnlzdHJpbmcgZnJvbSAncXVlcnlzdHJpbmcnO1xuaW1wb3J0IGFuYWx5dGljcyBmcm9tICdhbmFseXRpY3MnO1xuXG5jb25zdCBMYnJ5aW8gPSB7XG4gIGVuYWJsZWQ6IHRydWUsXG4gIGF1dGhlbnRpY2F0aW9uUHJvbWlzZTogbnVsbCxcbiAgZXhjaGFuZ2VQcm9taXNlOiBudWxsLFxuICBleGNoYW5nZUxhc3RGZXRjaGVkOiBudWxsLFxuICBDT05ORUNUSU9OX1NUUklORzogJ2h0dHBzOi8vYXBpLmxicnkuY29tLycsXG59O1xuXG5jb25zdCBFWENIQU5HRV9SQVRFX1RJTUVPVVQgPSAyMCAqIDYwICogMTAwMDtcbmNvbnN0IElOVEVSTkFMX0FQSVNfRE9XTiA9ICdpbnRlcm5hbF9hcGlzX2Rvd24nO1xuXG4vLyBXZSBjYW4ndCB1c2UgZW52J3MgYmVjYXVzZSB0aGV5IGFyZW4ndCBwYXNzZWQgaW50byBub2RlX21vZHVsZXNcbkxicnlpby5zZXRMb2NhbEFwaSA9IChlbmRwb2ludCkgPT4ge1xuICBMYnJ5aW8uQ09OTkVDVElPTl9TVFJJTkcgPSBlbmRwb2ludC5yZXBsYWNlKC9cXC8qJC8sICcvJyk7IC8vIGV4YWN0bHkgb25lIHNsYXNoIGF0IHRoZSBlbmQ7XG59O1xuXG5MYnJ5aW8uY2FsbCA9IChyZXNvdXJjZSwgYWN0aW9uLCBwYXJhbXMgPSB7fSwgbWV0aG9kID0gJ3Bvc3QnKSA9PiB7XG4gIGlmICghTGJyeWlvLmVuYWJsZWQpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKF9fKCdMQlJZIGludGVybmFsIEFQSSBpcyBkaXNhYmxlZCcpKSk7XG4gIH1cblxuICBpZiAoIShtZXRob2QgPT09ICdnZXQnIHx8IG1ldGhvZCA9PT0gJ3Bvc3QnKSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoX18oJ0ludmFsaWQgbWV0aG9kJykpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrQW5kUGFyc2UocmVzcG9uc2UpIHtcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDIwMCAmJiByZXNwb25zZS5zdGF0dXMgPCAzMDApIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNTAwKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoSU5URVJOQUxfQVBJU19ET1dOKTtcbiAgICB9XG5cbiAgICBpZiAocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkudGhlbigoanNvbikgPT4ge1xuICAgICAgICBsZXQgZXJyb3I7XG4gICAgICAgIGlmIChqc29uLmVycm9yKSB7XG4gICAgICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoanNvbi5lcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoJ1Vua25vd24gQVBJIGVycm9yIHNpZ25hdHVyZScpO1xuICAgICAgICB9XG4gICAgICAgIGVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7IC8vIFRoaXMgaXMgcHJpbWFyaWx5IGEgaGFjayB1c2VkIGluIGFjdGlvbnMvdXNlci5qc1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbWFrZVJlcXVlc3QodXJsLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGZldGNoKHVybCwgb3B0aW9ucykudGhlbihjaGVja0FuZFBhcnNlKTtcbiAgfVxuXG4gIHJldHVybiBMYnJ5aW8uZ2V0QXV0aFRva2VuKCkudGhlbigodG9rZW4pID0+IHtcbiAgICBjb25zdCBmdWxsUGFyYW1zID0geyBhdXRoX3Rva2VuOiB0b2tlbiwgLi4ucGFyYW1zIH07XG4gICAgT2JqZWN0LmtleXMoZnVsbFBhcmFtcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGZ1bGxQYXJhbXNba2V5XTtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGZ1bGxQYXJhbXNba2V5XSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IHFzID0gcXVlcnlzdHJpbmcuc3RyaW5naWZ5KGZ1bGxQYXJhbXMpO1xuICAgIGxldCB1cmwgPSBgJHtMYnJ5aW8uQ09OTkVDVElPTl9TVFJJTkd9JHtyZXNvdXJjZX0vJHthY3Rpb259PyR7cXN9YDtcblxuICAgIGxldCBvcHRpb25zID0ge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICB9O1xuXG4gICAgaWYgKG1ldGhvZCA9PT0gJ3Bvc3QnKSB7XG4gICAgICBvcHRpb25zID0ge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogcXMsXG4gICAgICB9O1xuICAgICAgdXJsID0gYCR7TGJyeWlvLkNPTk5FQ1RJT05fU1RSSU5HfSR7cmVzb3VyY2V9LyR7YWN0aW9ufWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1ha2VSZXF1ZXN0KHVybCwgb3B0aW9ucylcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICBzZW5kQ2FsbEFuYWx5dGljcyhyZXNvdXJjZSwgYWN0aW9uLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIHNlbmRGYWlsZWRDYWxsQW5hbHl0aWNzKHJlc291cmNlLCBhY3Rpb24sIHBhcmFtcywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH0pO1xuICB9KTtcbn07XG5cbkxicnlpby5hdXRoVG9rZW4gPSBudWxsO1xuXG5MYnJ5aW8uZ2V0QXV0aFRva2VuID0gKCkgPT5cbiAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBpZiAoTGJyeWlvLmF1dGhUb2tlbikge1xuICAgICAgcmVzb2x2ZShMYnJ5aW8uYXV0aFRva2VuKTtcbiAgICB9IGVsc2UgaWYgKExicnlpby5vdmVycmlkZXMuZ2V0QXV0aFRva2VuKSB7XG4gICAgICBMYnJ5aW8ub3ZlcnJpZGVzLmdldEF1dGhUb2tlbigpLnRoZW4oKHRva2VuKSA9PiB7XG4gICAgICAgIHJlc29sdmUodG9rZW4pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgeyBzdG9yZSB9ID0gd2luZG93O1xuICAgICAgaWYgKHN0b3JlKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgdG9rZW4gPSBzdGF0ZS5hdXRoID8gc3RhdGUuYXV0aC5hdXRoVG9rZW4gOiBudWxsO1xuICAgICAgICBMYnJ5aW8uYXV0aFRva2VuID0gdG9rZW47XG4gICAgICAgIHJlc29sdmUodG9rZW4pO1xuICAgICAgfVxuXG4gICAgICByZXNvbHZlKG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgfSk7XG5cbkxicnlpby5nZXRDdXJyZW50VXNlciA9ICgpID0+IExicnlpby5jYWxsKCd1c2VyJywgJ21lJyk7XG5cbkxicnlpby5hdXRoZW50aWNhdGUgPSAoZG9tYWluLCBsYW5ndWFnZSkgPT4ge1xuICBpZiAoIUxicnlpby5lbmFibGVkKSB7XG4gICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgaWQ6IDEsXG4gICAgICBwcmltYXJ5X2VtYWlsOiAnZGlzYWJsZWRAbGJyeS5pbycsXG4gICAgICBoYXNfdmVyaWZpZWRfZW1haWw6IHRydWUsXG4gICAgICBpc19pZGVudGl0eV92ZXJpZmllZDogdHJ1ZSxcbiAgICAgIGlzX3Jld2FyZF9hcHByb3ZlZDogZmFsc2UsXG4gICAgICBsYW5ndWFnZTogbGFuZ3VhZ2UgfHwgJ2VuJyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICByZXNvbHZlKHBhcmFtcyk7XG4gICAgfSk7XG4gIH1cblxuICBpZiAoTGJyeWlvLmF1dGhlbnRpY2F0aW9uUHJvbWlzZSA9PT0gbnVsbCkge1xuICAgIExicnlpby5hdXRoZW50aWNhdGlvblByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBMYnJ5aW8uZ2V0QXV0aFRva2VuKClcbiAgICAgICAgLnRoZW4oKHRva2VuKSA9PiB7XG4gICAgICAgICAgaWYgKCF0b2tlbiB8fCB0b2tlbi5sZW5ndGggPiA2MCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGNoZWNrIHRoYXQgdG9rZW4gd29ya3NcbiAgICAgICAgICByZXR1cm4gTGJyeWlvLmdldEN1cnJlbnRVc2VyKClcbiAgICAgICAgICAgIC50aGVuKCh1c2VyKSA9PiB1c2VyKVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICBpZiAoZXJyb3IgPT09IElOVEVSTkFMX0FQSVNfRE9XTikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW50ZXJuYWwgQVBJUyBkb3duJyk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgYXBwSWQgPVxuICAgICAgICAgICAgd2luZG93Lm9keXNlZSAmJiB3aW5kb3cub2R5c2VlLmJ1aWxkLmdvb2dsZVBsYXlcbiAgICAgICAgICAgICAgPyAnb2R5c2VlYW5kcm9pZEFXaHRvcUR1QWZRNktITVh4Rnh0OHRraG10N3NmcHJFTUhXS2p5NWhmNlB3WmNIRFY1NDJWJ1xuICAgICAgICAgICAgICA6ICdvZHlzZWVhbmRyb2lkQVBLdG9xRHVBZlE2S0hNWHhGeHQ4dGtobXQ3c2ZwckVNSFdLank1aGY2UHdaY0hEVjU0MlYnO1xuXG4gICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgICAgICAgTGJyeWlvLmNhbGwoXG4gICAgICAgICAgICAgICd1c2VyJyxcbiAgICAgICAgICAgICAgJ25ldycsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhdXRoX3Rva2VuOiAnJyxcbiAgICAgICAgICAgICAgICBsYW5ndWFnZTogbGFuZ3VhZ2UgfHwgJ2VuJyxcbiAgICAgICAgICAgICAgICBhcHBfaWQ6IGFwcElkLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAncG9zdCdcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5hdXRoX3Rva2VuKSB7XG4gICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2F1dGhfdG9rZW4gd2FzIG5vdCBzZXQgaW4gdGhlIHJlc3BvbnNlJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgeyBzdG9yZSB9ID0gd2luZG93O1xuICAgICAgICAgICAgICAgIGlmIChMYnJ5aW8ub3ZlcnJpZGVzLnNldEF1dGhUb2tlbikge1xuICAgICAgICAgICAgICAgICAgTGJyeWlvLm92ZXJyaWRlcy5zZXRBdXRoVG9rZW4ocmVzcG9uc2UuYXV0aF90b2tlbik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHN0b3JlKSB7XG4gICAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IEFDVElPTlMuR0VORVJBVEVfQVVUSF9UT0tFTl9TVUNDRVNTLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGF1dGhUb2tlbjogcmVzcG9uc2UuYXV0aF90b2tlbiB9LFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIExicnlpby5hdXRoVG9rZW4gPSByZXNwb25zZS5hdXRoX3Rva2VuO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMocmVzcG9uc2UpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiByZWooZXJyb3IpKTtcbiAgICAgICAgICB9KS50aGVuKChuZXdVc2VyKSA9PiB7XG4gICAgICAgICAgICBpZiAoIW5ld1VzZXIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIExicnlpby5nZXRDdXJyZW50VXNlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ld1VzZXI7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gTGJyeWlvLmF1dGhlbnRpY2F0aW9uUHJvbWlzZTtcbn07XG5cbkxicnlpby5nZXRTdHJpcGVUb2tlbiA9ICgpID0+XG4gIExicnlpby5DT05ORUNUSU9OX1NUUklORy5zdGFydHNXaXRoKCdodHRwOi8vbG9jYWxob3N0OicpXG4gICAgPyAncGtfdGVzdF9Ob0wxSldMN2kxaXBmaFZJZDVLZkRaZ28nXG4gICAgOiAncGtfbGl2ZV9lOE00ZFJObkNDYm1wWnpkdUVVWkJnSk8nO1xuXG5MYnJ5aW8uZ2V0RXhjaGFuZ2VSYXRlcyA9ICgpID0+IHtcbiAgaWYgKCFMYnJ5aW8uZXhjaGFuZ2VMYXN0RmV0Y2hlZCB8fCBEYXRlLm5vdygpIC0gTGJyeWlvLmV4Y2hhbmdlTGFzdEZldGNoZWQgPiBFWENIQU5HRV9SQVRFX1RJTUVPVVQpIHtcbiAgICBMYnJ5aW8uZXhjaGFuZ2VQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgTGJyeWlvLmNhbGwoJ2xiYycsICdleGNoYW5nZV9yYXRlJywge30sICdnZXQnLCB0cnVlKVxuICAgICAgICAudGhlbigoeyBsYmNfdXNkOiBMQkNfVVNELCBsYmNfYnRjOiBMQkNfQlRDLCBidGNfdXNkOiBCVENfVVNEIH0pID0+IHtcbiAgICAgICAgICBjb25zdCByYXRlcyA9IHsgTEJDX1VTRCwgTEJDX0JUQywgQlRDX1VTRCB9O1xuICAgICAgICAgIHJlc29sdmUocmF0ZXMpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2gocmVqZWN0KTtcbiAgICB9KTtcbiAgICBMYnJ5aW8uZXhjaGFuZ2VMYXN0RmV0Y2hlZCA9IERhdGUubm93KCk7XG4gIH1cbiAgcmV0dXJuIExicnlpby5leGNoYW5nZVByb21pc2U7XG59O1xuXG4vLyBBbGxvdyBvdmVycmlkaW5nIGxicnlpbyBtZXRob2RzXG4vLyBUaGUgZGVza3RvcCBhcHAgd2lsbCBuZWVkIHRvIHVzZSBpdCBmb3IgZ2V0QXV0aFRva2VuIGJlY2F1c2Ugd2UgdXNlIGVsZWN0cm9uJ3MgaXBjUmVuZGVyZXJcbkxicnlpby5vdmVycmlkZXMgPSB7fTtcbkxicnlpby5zZXRPdmVycmlkZSA9IChtZXRob2ROYW1lLCBuZXdNZXRob2QpID0+IHtcbiAgTGJyeWlvLm92ZXJyaWRlc1ttZXRob2ROYW1lXSA9IG5ld01ldGhvZDtcbn07XG5cbmZ1bmN0aW9uIHNlbmRDYWxsQW5hbHl0aWNzKHJlc291cmNlLCBhY3Rpb24sIHBhcmFtcykge1xuICBzd2l0Y2ggKHJlc291cmNlKSB7XG4gICAgY2FzZSAnY3VzdG9tZXInOlxuICAgICAgaWYgKGFjdGlvbiA9PT0gJ3RpcCcpIHtcbiAgICAgICAgYW5hbHl0aWNzLmV2ZW50LnJlcG9ydCgnc3BlbmRfdmlydHVhbF9jdXJyZW5jeScsIHtcbiAgICAgICAgICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hbmFseXRpY3MvZGV2Z3VpZGVzL2NvbGxlY3Rpb24vZ2E0L3JlZmVyZW5jZS9ldmVudHMjc3BlbmRfdmlydHVhbF9jdXJyZW5jeVxuICAgICAgICAgIHZhbHVlOiBwYXJhbXMuYW1vdW50LFxuICAgICAgICAgIHZpcnR1YWxfY3VycmVuY3lfbmFtZTogcGFyYW1zLmN1cnJlbmN5LnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgaXRlbV9uYW1lOiAndGlwJyxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICAvLyBEbyBub3RoaW5nXG4gICAgICBicmVhaztcbiAgfVxufVxuXG5mdW5jdGlvbiBzZW5kRmFpbGVkQ2FsbEFuYWx5dGljcyhyZXNvdXJjZSwgYWN0aW9uLCBwYXJhbXMsIGVycm9yKSB7XG4gIGlmICgocmVzb3VyY2UgPT09ICdjdXN0b21lcicgJiYgYWN0aW9uID09PSAnc3RhdHVzJykgfHwgKHJlc291cmNlID09PSAndXNlcicgJiYgYWN0aW9uID09PSAncmVmZXJyYWwnKSkge1xuICAgIC8vIElnbm9yZSBjb21tYW5kcyB0aGF0IHdlIHVzZSB0aGUgZXJyb3IgYXMgYSB2YWx1ZSwgb3IgZG9uJ3QgY2FyZSBpZiBpdCBmYWlscy5cbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBvcHRpb25zID0ge1xuICAgIGZpbmdlcnByaW50OiAnaW50ZXJuYWwtYXBpLWZhaWx1cmVzJyxcbiAgICB0YWdzOiB7IGFuYWx5dGljczogdHJ1ZSwgbWV0aG9kOiBgJHtyZXNvdXJjZX0vJHthY3Rpb259YCB9LFxuICAgIGV4dHJhOiB7IGVycm9yLCBwYXJhbXMgfSxcbiAgfTtcblxuICBhbmFseXRpY3MubG9nKCdJbnRlcm5hbCBBUEkgZmFpbHVyZXMnLCBvcHRpb25zLCAnYW5hbHl0aWNzJyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IExicnlpbztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQVJBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBUEE7QUEzQkE7QUFwQ0E7QUFDQTtBQTBFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQURBO0FBSUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBV0E7QUFDQTtBQXBCQTtBQUFBO0FBQ0E7QUFzQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBUEE7QUFrQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFIQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBM0JBO0FBNkJBO0FBN0JBO0FBREE7QUFnQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQW5DQTtBQTNCQTtBQURBO0FBb0VBO0FBQ0E7QUFDQTtBQXZGQTtBQUNBO0FBeUZBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFIQTtBQURBO0FBUUE7QUFDQTtBQUNBO0FBQUE7QUFaQTtBQWdCQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZEE7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../extras/lbryinc/lbryio.js\n");

/***/ }),

/***/ "../node_modules/css-loader/dist/cjs.js!../node_modules/postcss-loader/src/index.js?!../node_modules/sass-loader/dist/cjs.js!../ui/scss/component/notifications-blocked.scss":
/*!***********************************************************************************************************************************************************************************!*\
  !*** ../node_modules/css-loader/dist/cjs.js!../node_modules/postcss-loader/src??ref--5-2!../node_modules/sass-loader/dist/cjs.js!../ui/scss/component/notifications-blocked.scss ***!
  \***********************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("exports = module.exports = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ \"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.i, \".notificationsBlocked {\\n  display: flex;\\n  align-items: center;\\n}[dir] .notificationsBlocked {\\n  background-color: rgba(var(--color-primary-dynamic), 0.06);\\n  padding: var(--spacing-m);\\n  border-radius: var(--border-radius);\\n  border: 1px solid var(--color-primary);\\n}\\n\\n.notificationsBlocked__icon {\\n  flex-shrink: 0;\\n}\\n\\n[dir=ltr] .notificationsBlocked__icon {\\n  margin-right: var(--spacing-m);\\n}\\n\\n[dir=rtl] .notificationsBlocked__icon {\\n  margin-left: var(--spacing-m);\\n}\\n\\n.notificationsBlocked__subText {\\n  display: inline-block;\\n  color: var(--color-text-subtitle);\\n  font-size: var(--font-small);\\n}\\n\\n[dir=ltr] .notificationsBlocked__subTextList li {\\n  margin-left: var(--spacing-m);\\n}\\n\\n[dir=rtl] .notificationsBlocked__subTextList li {\\n  margin-right: var(--spacing-m);\\n}\", \"\"]);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8hLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uL3VpL3Njc3MvY29tcG9uZW50L25vdGlmaWNhdGlvbnMtYmxvY2tlZC5zY3NzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL3VpL3Njc3MvY29tcG9uZW50L25vdGlmaWNhdGlvbnMtYmxvY2tlZC5zY3NzPzVhZWEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIikoZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIubm90aWZpY2F0aW9uc0Jsb2NrZWQge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxufVtkaXJdIC5ub3RpZmljYXRpb25zQmxvY2tlZCB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKHZhcigtLWNvbG9yLXByaW1hcnktZHluYW1pYyksIDAuMDYpO1xcbiAgcGFkZGluZzogdmFyKC0tc3BhY2luZy1tKTtcXG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMpO1xcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tY29sb3ItcHJpbWFyeSk7XFxufVxcblxcbi5ub3RpZmljYXRpb25zQmxvY2tlZF9faWNvbiB7XFxuICBmbGV4LXNocmluazogMDtcXG59XFxuXFxuW2Rpcj1sdHJdIC5ub3RpZmljYXRpb25zQmxvY2tlZF9faWNvbiB7XFxuICBtYXJnaW4tcmlnaHQ6IHZhcigtLXNwYWNpbmctbSk7XFxufVxcblxcbltkaXI9cnRsXSAubm90aWZpY2F0aW9uc0Jsb2NrZWRfX2ljb24ge1xcbiAgbWFyZ2luLWxlZnQ6IHZhcigtLXNwYWNpbmctbSk7XFxufVxcblxcbi5ub3RpZmljYXRpb25zQmxvY2tlZF9fc3ViVGV4dCB7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBjb2xvcjogdmFyKC0tY29sb3ItdGV4dC1zdWJ0aXRsZSk7XFxuICBmb250LXNpemU6IHZhcigtLWZvbnQtc21hbGwpO1xcbn1cXG5cXG5bZGlyPWx0cl0gLm5vdGlmaWNhdGlvbnNCbG9ja2VkX19zdWJUZXh0TGlzdCBsaSB7XFxuICBtYXJnaW4tbGVmdDogdmFyKC0tc3BhY2luZy1tKTtcXG59XFxuXFxuW2Rpcj1ydGxdIC5ub3RpZmljYXRpb25zQmxvY2tlZF9fc3ViVGV4dExpc3QgbGkge1xcbiAgbWFyZ2luLXJpZ2h0OiB2YXIoLS1zcGFjaW5nLW0pO1xcbn1cIiwgXCJcIl0pO1xuXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../node_modules/css-loader/dist/cjs.js!../node_modules/postcss-loader/src/index.js?!../node_modules/sass-loader/dist/cjs.js!../ui/scss/component/notifications-blocked.scss\n");

/***/ }),

/***/ "../package.json":
/*!***********************!*\
  !*** ../package.json ***!
  \***********************/
/*! exports provided: name, version, description, keywords, license, homepage, bugs, repository, author, main, scripts, dependencies, devDependencies, engines, husky, lbrySettings, default */
/***/ (function(module) {

eval("module.exports = JSON.parse(\"{\\\"name\\\":\\\"odysee.com\\\",\\\"version\\\":\\\"0.0.0\\\",\\\"description\\\":\\\"Explore a whole universe of videos on Odysee from regular people just like you!\\\",\\\"keywords\\\":[\\\"odysee\\\"],\\\"license\\\":\\\"MIT\\\",\\\"homepage\\\":\\\"https://odysee.com\\\",\\\"bugs\\\":{\\\"url\\\":\\\"https://github.com/OdyseeTeam/odysee-frontend/issues\\\"},\\\"repository\\\":{\\\"type\\\":\\\"git\\\",\\\"url\\\":\\\"https://github.com/OdyseeTeam/odysee-frontend\\\"},\\\"author\\\":{\\\"name\\\":\\\"Odysee Inc.\\\",\\\"email\\\":\\\"hello@odysee.com\\\"},\\\"main\\\":\\\"./dist/electron/main.js\\\",\\\"scripts\\\":{\\\"compile:electron\\\":\\\"node --max_old_space_size=4096 ./node_modules/webpack/bin/webpack.js --config webpack.electron.config.js\\\",\\\"compile:web\\\":\\\"yarn copyenv && cd web && node --max_old_space_size=4096 ./node_modules/webpack/bin/webpack.js --config webpack.config.js\\\",\\\"compile:cordova\\\":\\\"yarn compile:web && rm ../cordova/www/*.js*; rm -r ../cordova/www/public; cp -r ./web/dist/* ../cordova/www\\\",\\\"compile:cordova-floss\\\":\\\"cross-env FLOSS=true yarn copyenv && cd web && node --max_old_space_size=4096 ./node_modules/webpack/bin/webpack.js --config webpack.floss.config.js && cd .. && rm ../cordova-floss/www/*.js*; rm -r ../cordova-floss/www/public; cp -r ./web/dist/* ../cordova-floss/www; rm ../cordova-floss/www/sw.js\\\",\\\"compile\\\":\\\"cross-env NODE_ENV=production yarn compile:electron && cross-env NODE_ENV=production yarn compile:web\\\",\\\"copyenv\\\":\\\"copyfiles ./.env* web/\\\",\\\"dev\\\":\\\"yarn dev:electron\\\",\\\"dev:electron\\\":\\\"cross-env NODE_ENV=development node ./electron/devServer.js\\\",\\\"dev:web\\\":\\\"yarn copyenv && cd web && yarn dev\\\",\\\"dev:web-server\\\":\\\"cross-env NODE_ENV=development yarn compile:web && concurrently \\\\\\\"cross-env NODE_ENV=development yarn compile:web --watch\\\\\\\" \\\\\\\"cd web && yarn dev:server\\\\\\\"\\\",\\\"dev:internal-apis\\\":\\\"LBRY_API_URL='http://localhost:8080' yarn dev:electron\\\",\\\"dev:iatv\\\":\\\"LBRY_API_URL='http://localhost:15400' SDK_API_URL='http://localhost:15100' yarn dev:web\\\",\\\"run:web-server\\\":\\\"cross-env NODE_ENV=production yarn compile:web && cd web && yarn dev:server\\\",\\\"pack\\\":\\\"electron-builder --dir\\\",\\\"dist\\\":\\\"electron-builder\\\",\\\"build\\\":\\\"cross-env NODE_ENV=production yarn compile:electron && electron-builder build\\\",\\\"build:dir\\\":\\\"yarn build -- --dir -c.compression=store -c.mac.identity=null\\\",\\\"crossenv\\\":\\\"./node_modules/cross-env/dist/bin/cross-env\\\",\\\"flow\\\":\\\"flow\\\",\\\"lint\\\":\\\"eslint 'ui/**/*.{js,jsx}' && eslint 'extras/**/*.{js,jsx}' && eslint 'web/**/*.{js,jsx}' && eslint 'electron/**/*.js' && flow\\\",\\\"lint-fix\\\":\\\"eslint --fix --quiet 'ui/**/*.{js,jsx}' && eslint --fix --quiet 'extras/**/*.{js,jsx}' && eslint --fix --quiet 'web/**/*.{js,jsx}' && eslint --fix --quiet 'electron/**/*.js'\\\",\\\"format\\\":\\\"prettier 'src/**/*.{js,jsx,scss,json}' --write\\\",\\\"flow-defs\\\":\\\"flow-typed install\\\",\\\"preinstall\\\":\\\"\\\",\\\"postinstall\\\":\\\"cd web && yarn && cd .. && if-env NODE_ENV=production && yarn postinstall:warning || if-env APP_ENV=web && echo 'Done installing deps' || yarn postinstall:electron\\\",\\\"postinstall:electron\\\":\\\"electron-builder install-app-deps && node ./build/downloadDaemon.js && node ./build/downloadLBRYFirst.js\\\",\\\"postinstall:warning\\\":\\\"echo '\\\\n\\\\nWARNING\\\\n\\\\nNot all node modules were installed because NODE_ENV is set to \\\\\\\"production\\\\\\\".\\\\nThis should only be set after installing dependencies with \\\\\\\"yarn\\\\\\\". The app will not work.\\\\n\\\\n'\\\"},\\\"dependencies\\\":{\\\"@emotion/react\\\":\\\"^11.6.0\\\",\\\"@emotion/styled\\\":\\\"^11.6.0\\\",\\\"@mui/material\\\":\\\"^5.6.2\\\",\\\"@sentry/react\\\":\\\"^7.8.1\\\",\\\"@sentry/tracing\\\":\\\"^7.8.1\\\",\\\"@silvermine/videojs-airplay\\\":\\\"^1.1.0\\\",\\\"@silvermine/videojs-chromecast\\\":\\\"^1.3.3\\\",\\\"@stripe/react-stripe-js\\\":\\\"^1.10.0\\\",\\\"@stripe/stripe-js\\\":\\\"^1.35.0\\\",\\\"@ungap/from-entries\\\":\\\"^0.2.1\\\",\\\"auto-launch\\\":\\\"^5.0.5\\\",\\\"core-js-pure\\\":\\\"^3.19.3\\\",\\\"electron-dl\\\":\\\"^1.11.0\\\",\\\"electron-log\\\":\\\"^2.2.12\\\",\\\"electron-notarize\\\":\\\"^1.0.0\\\",\\\"electron-updater\\\":\\\"^4.2.4\\\",\\\"express\\\":\\\"^4.17.1\\\",\\\"humanize-duration\\\":\\\"^3.27.0\\\",\\\"if-env\\\":\\\"^1.0.4\\\",\\\"match-sorter\\\":\\\"^6.3.0\\\",\\\"parse-duration\\\":\\\"^1.0.0\\\",\\\"player.js\\\":\\\"^0.1.0\\\",\\\"proxy-polyfill\\\":\\\"0.1.6\\\",\\\"re-reselect\\\":\\\"^4.0.0\\\",\\\"react-beautiful-dnd\\\":\\\"^13.1.0\\\",\\\"react-color\\\":\\\"^2.19.3\\\",\\\"react-datetime-picker\\\":\\\"^3.4.3\\\",\\\"react-plastic\\\":\\\"^1.1.1\\\",\\\"react-top-loading-bar\\\":\\\"^2.0.1\\\",\\\"redux-state-sync\\\":\\\"^3.1.4\\\",\\\"remove-markdown\\\":\\\"^0.3.0\\\",\\\"rss\\\":\\\"^1.2.2\\\",\\\"source-map-explorer\\\":\\\"^2.5.2\\\",\\\"tempy\\\":\\\"^0.6.0\\\",\\\"tus-js-client\\\":\\\"^2.3.0\\\",\\\"twemoji\\\":\\\"^14.0.2\\\",\\\"videojs-contrib-ads\\\":\\\"^6.9.0\\\",\\\"videojs-ima\\\":\\\"^1.11.0\\\",\\\"videojs-ima-player\\\":\\\"^0.5.6\\\",\\\"videojs-logo\\\":\\\"^2.1.4\\\",\\\"videojs-vtt-thumbnails\\\":\\\"https://github.com/OdyseeTeam/videojs-vtt-thumbnails\\\"},\\\"devDependencies\\\":{\\\"@babel/core\\\":\\\"^7.0.0\\\",\\\"@babel/plugin-proposal-class-properties\\\":\\\"^7.0.0\\\",\\\"@babel/plugin-proposal-decorators\\\":\\\"^7.3.0\\\",\\\"@babel/plugin-proposal-object-rest-spread\\\":\\\"^7.6.2\\\",\\\"@babel/plugin-proposal-optional-chaining\\\":\\\"^7.14.5\\\",\\\"@babel/plugin-syntax-dynamic-import\\\":\\\"^7.2.0\\\",\\\"@babel/plugin-transform-flow-strip-types\\\":\\\"^7.2.3\\\",\\\"@babel/plugin-transform-runtime\\\":\\\"^7.4.3\\\",\\\"@babel/polyfill\\\":\\\"^7.2.5\\\",\\\"@babel/preset-env\\\":\\\"^7.12.11\\\",\\\"@babel/preset-flow\\\":\\\"^7.12.1\\\",\\\"@babel/preset-react\\\":\\\"^7.0.0\\\",\\\"@babel/register\\\":\\\"^7.0.0\\\",\\\"@exponent/electron-cookies\\\":\\\"^2.0.0\\\",\\\"@hot-loader/react-dom\\\":\\\"^16.13\\\",\\\"@reach/auto-id\\\":\\\"^0.13.0\\\",\\\"@reach/combobox\\\":\\\"^0.12.1\\\",\\\"@reach/menu-button\\\":\\\"0.8.6\\\",\\\"@reach/rect\\\":\\\"^0.16.0\\\",\\\"@reach/tabs\\\":\\\"^0.1.5\\\",\\\"@reach/tooltip\\\":\\\"^0.12.1\\\",\\\"@reach/utils\\\":\\\"^0.12.1\\\",\\\"@sentry/webpack-plugin\\\":\\\"^1.10.0\\\",\\\"@types/three\\\":\\\"^0.103.2\\\",\\\"adm-zip\\\":\\\"^0.4.13\\\",\\\"async-exit-hook\\\":\\\"^2.0.1\\\",\\\"babel-eslint\\\":\\\"^10.0.1\\\",\\\"babel-loader\\\":\\\"^8.0.5\\\",\\\"babel-plugin-add-module-exports\\\":\\\"^1.0.4\\\",\\\"babel-plugin-import-glob\\\":\\\"^2.0.0\\\",\\\"babel-plugin-transform-imports\\\":\\\"^1.5.1\\\",\\\"babel-plugin-transform-object-rest-spread\\\":\\\"^6.26.0\\\",\\\"bluebird\\\":\\\"^3.5.1\\\",\\\"chalk\\\":\\\"^4.1.0\\\",\\\"classnames\\\":\\\"^2.2.5\\\",\\\"codemirror\\\":\\\"^5.39.2\\\",\\\"concurrently\\\":\\\"^4.1.2\\\",\\\"connected-react-router\\\":\\\"^6.8.0\\\",\\\"copy-webpack-plugin\\\":\\\"^5.1.2\\\",\\\"copyfiles\\\":\\\"^2.4.1\\\",\\\"country-data\\\":\\\"^0.0.31\\\",\\\"cross-env\\\":\\\"^7.0.3\\\",\\\"crypto-js\\\":\\\"^4.0.0\\\",\\\"css-doodle\\\":\\\"^0.7.1\\\",\\\"css-loader\\\":\\\"^2.1.0\\\",\\\"cssnano\\\":\\\"^4.1.10\\\",\\\"dat.gui\\\":\\\"^0.7.2\\\",\\\"decompress\\\":\\\"^4.2.1\\\",\\\"del\\\":\\\"^3.0.0\\\",\\\"devtron\\\":\\\"^1.4.0\\\",\\\"dom-scroll-into-view\\\":\\\"^1.2.1\\\",\\\"dotenv-defaults\\\":\\\"^2.0.1\\\",\\\"dotenv-webpack\\\":\\\"^1.8.0\\\",\\\"electron\\\":\\\"9.4.0\\\",\\\"electron-builder\\\":\\\"^22.9.1\\\",\\\"electron-devtools-installer\\\":\\\"^3.1.1\\\",\\\"electron-is-dev\\\":\\\"^0.3.0\\\",\\\"electron-webpack\\\":\\\"^2.8.2\\\",\\\"electron-window-state\\\":\\\"^4.1.1\\\",\\\"emoji-dictionary\\\":\\\"^1.0.11\\\",\\\"eslint\\\":\\\"^7.5\\\",\\\"eslint-config-prettier\\\":\\\"^2.9.0\\\",\\\"eslint-config-standard\\\":\\\"^12.0.0\\\",\\\"eslint-config-standard-jsx\\\":\\\"^6.0.2\\\",\\\"eslint-import-resolver-webpack\\\":\\\"^0.11.0\\\",\\\"eslint-plugin-flowtype\\\":\\\"^2.46.1\\\",\\\"eslint-plugin-import\\\":\\\"^2.10.0\\\",\\\"eslint-plugin-jsx-a11y\\\":\\\"^6.0.3\\\",\\\"eslint-plugin-node\\\":\\\"^8.0.1\\\",\\\"eslint-plugin-prettier\\\":\\\"^2.6.0\\\",\\\"eslint-plugin-promise\\\":\\\"^4.0.1\\\",\\\"eslint-plugin-react\\\":\\\"^7.7.0\\\",\\\"eslint-plugin-react-hooks\\\":\\\"^1.6.0\\\",\\\"eslint-plugin-standard\\\":\\\"^4.0.1\\\",\\\"file-loader\\\":\\\"^4.2.0\\\",\\\"flow-bin\\\":\\\"^0.97.0\\\",\\\"flow-typed\\\":\\\"^2.3.0\\\",\\\"formik\\\":\\\"^0.10.4\\\",\\\"hast-util-sanitize\\\":\\\"^3.0.2\\\",\\\"history\\\":\\\"^4.9.0\\\",\\\"hook-shell-script-webpack-plugin\\\":\\\"^0.1.4\\\",\\\"husky\\\":\\\"^3.1.0\\\",\\\"imagesloaded\\\":\\\"^4.1.4\\\",\\\"json-loader\\\":\\\"^0.5.4\\\",\\\"lbry-format\\\":\\\"https://github.com/lbryio/lbry-format.git\\\",\\\"lint-staged\\\":\\\"^7.0.2\\\",\\\"localforage\\\":\\\"^1.7.1\\\",\\\"lodash-es\\\":\\\"^4.17.14\\\",\\\"mammoth\\\":\\\"^1.4.16\\\",\\\"moment\\\":\\\"^2.22.0\\\",\\\"node-abi\\\":\\\"^2.5.1\\\",\\\"node-fetch\\\":\\\"^2.6.1\\\",\\\"node-libs-browser\\\":\\\"^2.1.0\\\",\\\"node-loader\\\":\\\"^0.6.0\\\",\\\"node-wget\\\":\\\"^0.4.3\\\",\\\"nodemon\\\":\\\"^2.0.15\\\",\\\"postcss-import\\\":\\\"^12.0.1\\\",\\\"postcss-loader\\\":\\\"^3.0.0\\\",\\\"postcss-rtl\\\":\\\"^1.7.3\\\",\\\"preprocess-loader\\\":\\\"^0.3.0\\\",\\\"prettier\\\":\\\"^2.2.1\\\",\\\"prop-types\\\":\\\"^15.6.2\\\",\\\"qrcode.react\\\":\\\"^0.8.0\\\",\\\"raw-loader\\\":\\\"^2.0.0\\\",\\\"rc-progress\\\":\\\"^2.0.6\\\",\\\"react\\\":\\\"^16.8.2\\\",\\\"react-awesome-lightbox\\\":\\\"^1.7.3\\\",\\\"react-confetti\\\":\\\"^4.0.1\\\",\\\"react-dom\\\":\\\"^16.8.2\\\",\\\"react-draggable\\\":\\\"^4.4.4\\\",\\\"react-google-recaptcha\\\":\\\"^2.0.1\\\",\\\"react-hot-loader\\\":\\\"^4.11.1\\\",\\\"react-modal\\\":\\\"^3.1.7\\\",\\\"react-paginate\\\":\\\"^5.2.1\\\",\\\"react-redux\\\":\\\"^6.0.1\\\",\\\"react-router\\\":\\\"^5.1.0\\\",\\\"react-router-dom\\\":\\\"^5.1.0\\\",\\\"react-simplemde-editor\\\":\\\"^4.1.3\\\",\\\"react-spring\\\":\\\"^8.0.20\\\",\\\"reakit\\\":\\\"^1.0.0-beta.13\\\",\\\"redux\\\":\\\"^3.6.0\\\",\\\"redux-persist\\\":\\\"^5.10.0\\\",\\\"redux-persist-transform-compress\\\":\\\"^4.2.0\\\",\\\"redux-persist-transform-filter\\\":\\\"0.0.16\\\",\\\"redux-thunk\\\":\\\"^2.2.0\\\",\\\"remark\\\":\\\"^9.0.0\\\",\\\"remark-attr\\\":\\\"^0.8.3\\\",\\\"remark-breaks\\\":\\\"^1.0.5\\\",\\\"remark-emoji\\\":\\\"^2.0.1\\\",\\\"remark-frontmatter\\\":\\\"^2.0.0\\\",\\\"remark-react\\\":\\\"^8.0.0\\\",\\\"reselect\\\":\\\"^4.0.0\\\",\\\"sass\\\":\\\"^1.29.0\\\",\\\"sass-loader\\\":\\\"^7.1.0\\\",\\\"semver\\\":\\\"^5.3.0\\\",\\\"stream-to-blob-url\\\":\\\"^2.1.1\\\",\\\"strip-markdown\\\":\\\"^3.0.3\\\",\\\"style-loader\\\":\\\"^0.23.1\\\",\\\"terser-webpack-plugin\\\":\\\"^1.2.3\\\",\\\"three\\\":\\\"^0.125.0\\\",\\\"three-full\\\":\\\"^17.1.0\\\",\\\"tiny-relative-date\\\":\\\"^1.3.0\\\",\\\"tree-kill\\\":\\\"^1.1.0\\\",\\\"unist-util-visit\\\":\\\"^2.0.3\\\",\\\"uuid\\\":\\\"^8.3.2\\\",\\\"vast-client\\\":\\\"^3.1.1\\\",\\\"video.js\\\":\\\"^7.19.2\\\",\\\"videojs-contrib-quality-levels\\\":\\\"^2.0.9\\\",\\\"videojs-event-tracking\\\":\\\"^1.0.1\\\",\\\"villain-react\\\":\\\"^1.0.9\\\",\\\"wavesurfer.js\\\":\\\"^2.2.1\\\",\\\"webpack\\\":\\\"^4.28.4\\\",\\\"webpack-bundle-analyzer\\\":\\\"^3.1.0\\\",\\\"webpack-cli\\\":\\\"^3.3.10\\\",\\\"webpack-config-utils\\\":\\\"^2.3.1\\\",\\\"webpack-dev-middleware\\\":\\\"^3.6.0\\\",\\\"webpack-dev-server\\\":\\\"^3.9.0\\\",\\\"webpack-hot-middleware\\\":\\\"^2.24.3\\\",\\\"webpack-merge\\\":\\\"^4.2.1\\\",\\\"webpack-node-externals\\\":\\\"^1.7.2\\\",\\\"y18n\\\":\\\"^4.0.1\\\",\\\"yarnhook\\\":\\\"^0.2.0\\\"},\\\"engines\\\":{\\\"node\\\":\\\">=7\\\",\\\"yarn\\\":\\\"^1.3\\\"},\\\"husky\\\":{\\\"hooks\\\":{\\\"pre-commit\\\":\\\"lint-staged\\\"}},\\\"lbrySettings\\\":{\\\"lbrynetDaemonVersion\\\":\\\"0.99.0\\\",\\\"lbrynetDaemonUrlTemplate\\\":\\\"https://github.com/lbryio/lbry/releases/download/vDAEMONVER/lbrynet-OSNAME.zip\\\",\\\"lbrynetDaemonDir\\\":\\\"static/daemon\\\",\\\"lbrynetDaemonFileName\\\":\\\"lbrynet\\\",\\\"LBRYFirstVersion\\\":\\\"0.0.20\\\",\\\"LBRYFirstUrlTemplate\\\":\\\"https://github.com/lbryio/lbry-first/releases/download/vLBRYFIRSTVER/lbry-first_OSNAME_amd64.zip\\\",\\\"LBRYFirstDir\\\":\\\"static/lbry-first\\\",\\\"LBRYFirstFileName\\\":\\\"lbry-first\\\"}}\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vcGFja2FnZS5qc29uLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../package.json\n");

/***/ }),

/***/ "../ui/component/app/view.jsx":
/*!************************************!*\
  !*** ../ui/component/app/view.jsx ***!
  \************************************/
/*! exports provided: MAIN_WRAPPER_CLASS, IS_MAC, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MAIN_WRAPPER_CLASS\", function() { return MAIN_WRAPPER_CLASS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"IS_MAC\", function() { return IS_MAC; });\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! constants/pages */ \"../ui/constants/pages.js\");\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(constants_pages__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var util_lazyImport__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! util/lazyImport */ \"../ui/util/lazyImport.js\");\n/* harmony import */ var util_tus__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! util/tus */ \"../ui/util/tus.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! analytics */ \"../ui/analytics.js\");\n/* harmony import */ var redux_actions_search__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! redux/actions/search */ \"../ui/redux/actions/search.js\");\n/* harmony import */ var util_lbryURI__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! util/lbryURI */ \"../ui/util/lbryURI.js\");\n/* harmony import */ var util_url__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! util/url */ \"../ui/util/url.js\");\n/* harmony import */ var component_router_index__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! component/router/index */ \"../ui/component/router/index.js\");\n/* harmony import */ var modal_modalRouter__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! modal/modalRouter */ \"../ui/modal/modalRouter/index.js\");\n/* harmony import */ var react_modal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-modal */ \"../node_modules/react-modal/lib/index.js\");\n/* harmony import */ var react_modal__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_modal__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var util_enhanced_layout__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! util/enhanced-layout */ \"../ui/util/enhanced-layout.js\");\n/* harmony import */ var component_yrbl__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! component/yrbl */ \"../ui/component/yrbl/index.jsx\");\n/* harmony import */ var component_fileRenderFloating__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! component/fileRenderFloating */ \"../ui/component/fileRenderFloating/index.js\");\n/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react-router */ \"../node_modules/react-router/esm/react-router.js\");\n/* harmony import */ var effects_use_previous__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! effects/use-previous */ \"../ui/effects/use-previous.js\");\n/* harmony import */ var component_nag__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! component/nag */ \"../ui/component/nag/index.js\");\n/* harmony import */ var rewards__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rewards */ \"../ui/rewards.js\");\n/* harmony import */ var effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! effects/use-persisted-state */ \"../ui/effects/use-persisted-state.js\");\n/* harmony import */ var effects_use_connection_status__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! effects/use-connection-status */ \"../ui/effects/use-connection-status.js\");\n/* harmony import */ var component_spinner__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! component/spinner */ \"../ui/component/spinner/index.js\");\n/* harmony import */ var constants_languages__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! constants/languages */ \"../ui/constants/languages.js\");\n/* harmony import */ var util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! util/beforeUnload */ \"../ui/util/beforeUnload.js\");\n/* harmony import */ var web_component_adBlockTester__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! web/component/adBlockTester */ \"./component/adBlockTester/index.js\");\n/* harmony import */ var web_component_adsSticky__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! web/component/adsSticky */ \"./component/adsSticky/index.js\");\n/* harmony import */ var web_component_youtubeReferralWelcome__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! web/component/youtubeReferralWelcome */ \"./component/youtubeReferralWelcome/index.js\");\n/* harmony import */ var web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! web/effects/use-degraded-performance */ \"./effects/use-degraded-performance.js\");\n/* harmony import */ var constants_language_migrations__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! constants/language-migrations */ \"../ui/constants/language-migrations.js\");\n/* harmony import */ var effects_use_screensize__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! effects/use-screensize */ \"../ui/effects/use-screensize.js\");\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // import useAdOutbrain from 'effects/use-ad-outbrain';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar FileDrop = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | fileDrop */ \"fileDrop\").then(__webpack_require__.bind(null, /*! component/fileDrop */ \"../ui/component/fileDrop/index.js\"));\n});\nvar NagContinueFirstRun = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | nagCFR */ \"nagCFR\").then(__webpack_require__.bind(null, /*! component/nagContinueFirstRun */ \"../ui/component/nagContinueFirstRun/index.js\"));\n});\nvar NagDegradedPerformance = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | NagDegradedPerformance */ \"NagDegradedPerformance\").then(__webpack_require__.bind(null, /*! web/component/nag-degraded-performance */ \"./component/nag-degraded-performance.jsx\"));\n});\nvar NagNoUser = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | nag-no-user */ \"nag-no-user\").then(__webpack_require__.bind(null, /*! web/component/nag-no-user */ \"./component/nag-no-user.jsx\"));\n});\nvar NagSunset = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | nag-sunset */ \"nag-sunset\").then(__webpack_require__.bind(null, /*! web/component/nag-sunset */ \"./component/nag-sunset.jsx\"));\n});\nvar SyncFatalError = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | syncFatalError */ \"syncFatalError\").then(__webpack_require__.bind(null, /*! component/syncFatalError */ \"../ui/component/syncFatalError/index.js\"));\n}); // ****************************************************************************\n\nvar MAIN_WRAPPER_CLASS = 'main-wrapper';\nvar IS_MAC = navigator.userAgent.indexOf('Mac OS X') !== -1; // const imaLibraryPath = 'https://imasdk.googleapis.com/js/sdkloader/ima3.js';\n\nvar oneTrustScriptSrc = 'https://cdn.cookielaw.org/scripttemplates/otSDKStub.js';\nvar LATEST_PATH = \"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"LATEST\"], \"/\");\nvar LIVE_PATH = \"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"LIVE_NOW\"], \"/\");\nvar EMBED_PATH = \"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"EMBED\"], \"/\");\n\nfunction App(props) {\n  var theme = props.theme,\n      user = props.user,\n      locale = props.locale,\n      location = props.location,\n      fetchChannelListMine = props.fetchChannelListMine,\n      fetchCollectionListMine = props.fetchCollectionListMine,\n      signIn = props.signIn,\n      isReloadRequired = props.isReloadRequired,\n      uploadCount = props.uploadCount,\n      history = props.history,\n      syncError = props.syncError,\n      syncIsLocked = props.syncIsLocked,\n      prefsReady = props.prefsReady,\n      language = props.language,\n      languages = props.languages,\n      setLanguage = props.setLanguage,\n      fetchLanguage = props.fetchLanguage,\n      rewards = props.rewards,\n      doUserSetReferrer = props.doUserSetReferrer,\n      isAuthenticated = props.isAuthenticated,\n      syncLoop = props.syncLoop,\n      currentModal = props.currentModal,\n      syncFatalError = props.syncFatalError,\n      myChannelClaimIds = props.myChannelClaimIds,\n      activeChannelClaim = props.activeChannelClaim,\n      setIncognito = props.setIncognito,\n      fetchModBlockedList = props.fetchModBlockedList,\n      fetchModAmIList = props.fetchModAmIList,\n      defaultChannelClaim = props.defaultChannelClaim,\n      nagsShown = props.nagsShown,\n      announcement = props.announcement,\n      doOpenAnnouncements = props.doOpenAnnouncements,\n      doSetLastViewedAnnouncement = props.doSetLastViewedAnnouncement,\n      doSetDefaultChannel = props.doSetDefaultChannel,\n      doSetGdprConsentList = props.doSetGdprConsentList;\n  var isMobile = Object(effects_use_screensize__WEBPACK_IMPORTED_MODULE_28__[\"useIsMobile\"])();\n  var isEnhancedLayout = Object(util_enhanced_layout__WEBPACK_IMPORTED_MODULE_11__[\"default\"])();\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasSignedIn = _useState2[0],\n      setHasSignedIn = _useState2[1];\n\n  var hasVerifiedEmail = user && Boolean(user.has_verified_email);\n  var isRewardApproved = user && user.is_reward_approved;\n  var previousHasVerifiedEmail = Object(effects_use_previous__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(hasVerifiedEmail);\n  var previousRewardApproved = Object(effects_use_previous__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(isRewardApproved);\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_26__[\"STATUS_OK\"]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      lbryTvApiStatus = _useState4[0],\n      setLbryTvApiStatus = _useState4[1]; // const [sidebarOpen] = usePersistedState('sidebar', false);\n\n\n  var pathname = location.pathname,\n      hash = location.hash,\n      search = location.search,\n      hostname = location.hostname;\n\n  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      retryingSync = _useState6[0],\n      setRetryingSync = _useState6[1];\n\n  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      langRenderKey = _useState8[0],\n      setLangRenderKey = _useState8[1];\n\n  var _usePersistedState = Object(effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_18__[\"default\"])('lbrytv-sunset', false),\n      _usePersistedState2 = _slicedToArray(_usePersistedState, 2),\n      seenSunsestMessage = _usePersistedState2[0],\n      setSeenSunsetMessage = _usePersistedState2[1]; // referral claiming\n\n\n  var referredRewardAvailable = rewards && rewards.some(function (reward) {\n    return reward.reward_type === rewards__WEBPACK_IMPORTED_MODULE_17__[\"default\"].TYPE_REFEREE;\n  });\n  var urlParams = new URLSearchParams(search);\n  var rawReferrerParam = urlParams.get('r');\n  var fromLbrytvParam = urlParams.get('sunset');\n  var sanitizedReferrerParam = rawReferrerParam && rawReferrerParam.replace(':', '#');\n  var embedPath = pathname.startsWith(EMBED_PATH);\n  var shouldHideNag = embedPath || pathname.startsWith(\"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"AUTH_VERIFY\"]));\n  var userId = user && user.id;\n  var hasMyChannels = myChannelClaimIds && myChannelClaimIds.length > 0;\n  var hasNoChannels = myChannelClaimIds && myChannelClaimIds.length === 0;\n  var shouldMigrateLanguage = constants_language_migrations__WEBPACK_IMPORTED_MODULE_27__[\"default\"][language];\n  var renderFiledrop = !isMobile && isAuthenticated;\n  var connectionStatus = Object(effects_use_connection_status__WEBPACK_IMPORTED_MODULE_19__[\"default\"])();\n  var urlPath = pathname + hash;\n  var latestContentPath = urlPath.startsWith(LATEST_PATH);\n  var liveContentPath = urlPath.startsWith(LIVE_PATH);\n  var featureParam = urlParams.get('feature');\n  var embedLatestPath = embedPath && (featureParam === constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"LATEST\"] || featureParam === constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"LIVE_NOW\"]);\n  var isNewestPath = latestContentPath || liveContentPath || embedLatestPath;\n  var path;\n\n  if (isNewestPath) {\n    path = urlPath.replace(embedLatestPath ? EMBED_PATH : latestContentPath ? LATEST_PATH : LIVE_PATH, '');\n  } else {\n    // Remove the leading \"/\" added by the browser\n    path = urlPath.slice(1);\n  }\n\n  path = path.replace(/:/g, '#');\n\n  if (isNewestPath && !path.startsWith('@')) {\n    path = \"@\".concat(path);\n  }\n\n  if (search && search.startsWith('?q=cache:')) {\n    Object(util_url__WEBPACK_IMPORTED_MODULE_7__[\"generateGoogleCacheUrl\"])(search, path);\n  }\n\n  var uri;\n\n  try {\n    // here queryString and startTime are \"removed\" from the buildURI process\n    // to build only the uri itself\n    var _parseURI = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_6__[\"parseURI\"])(path),\n        queryString = _parseURI.queryString,\n        startTime = _parseURI.startTime,\n        parsedUri = _objectWithoutProperties(_parseURI, [\"queryString\", \"startTime\"]);\n\n    uri = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_6__[\"buildURI\"])(_objectSpread({}, parsedUri));\n  } catch (e) {\n    var match = path.match(/[#/:]/);\n\n    if (!path.startsWith('$/') && match && match.index) {\n      uri = \"lbry://\".concat(path.slice(0, match.index));\n    }\n  }\n\n  function getStatusNag() {\n    // Handle \"offline\" first. Everything else is meaningless if it's offline.\n    if (!connectionStatus.online) {\n      return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_nag__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n        type: \"helpful\",\n        message: __('You are offline. Check your internet connection.')\n      });\n    } // Only 1 nag is possible, so show the most important:\n\n\n    if (user === null) {\n      return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(NagNoUser, null);\n    }\n\n    if (lbryTvApiStatus === web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_26__[\"STATUS_DEGRADED\"] || lbryTvApiStatus === web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_26__[\"STATUS_FAILING\"]) {\n      if (!shouldHideNag) {\n        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(NagDegradedPerformance, {\n          onClose: function onClose() {\n            return setLbryTvApiStatus(web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_26__[\"STATUS_OK\"]);\n          }\n        });\n      }\n    }\n\n    if (syncFatalError) {\n      if (!retryingSync) {\n        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_nag__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n          type: \"error\",\n          message: __('Failed to synchronize settings. Wait a while before retrying.'),\n          actionText: __('Retry'),\n          onClick: function onClick() {\n            syncLoop(true);\n            setRetryingSync(true);\n            setTimeout(function () {\n              return setRetryingSync(false);\n            }, 4000);\n          }\n        });\n      }\n    } else if (isReloadRequired) {\n      return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_nag__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n        message: __('A new version of Odysee is available.'),\n        actionText: __('Refresh'),\n        onClick: function onClick() {\n          return window.location.reload();\n        }\n      });\n    }\n  }\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (userId) {\n      analytics__WEBPACK_IMPORTED_MODULE_4__[\"default\"].setUser(userId);\n      Object(redux_actions_search__WEBPACK_IMPORTED_MODULE_5__[\"setSearchUserId\"])(userId);\n    }\n  }, [userId]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (syncIsLocked) {\n      var msg = 'There are unsaved settings. Exit the Settings Page to finalize them.';\n\n      var handleBeforeUnload = function handleBeforeUnload(event) {\n        event.preventDefault();\n        event.returnValue = msg;\n      };\n\n      util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"BeforeUnload\"].register(handleBeforeUnload, msg);\n      return function () {\n        return util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"BeforeUnload\"].unregister(handleBeforeUnload);\n      };\n    }\n  }, [syncIsLocked]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!uploadCount) return;\n    var msg = 'Unfinished uploads.';\n\n    var handleUnload = function handleUnload(event) {\n      return Object(util_tus__WEBPACK_IMPORTED_MODULE_3__[\"tusUnlockAndNotify\"])();\n    };\n\n    var handleBeforeUnload = function handleBeforeUnload(event) {\n      event.preventDefault();\n      event.returnValue = __(msg); // without setting this to something it doesn't work in some browsers.\n    };\n\n    util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"Unload\"].register(handleUnload);\n    util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"BeforeUnload\"].register(handleBeforeUnload, msg);\n    return function () {\n      util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"Unload\"].unregister(handleUnload);\n      util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"BeforeUnload\"].unregister(handleBeforeUnload);\n    };\n  }, [uploadCount]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!uploadCount) return;\n\n    var onStorageUpdate = function onStorageUpdate(e) {\n      return Object(util_tus__WEBPACK_IMPORTED_MODULE_3__[\"tusHandleTabUpdates\"])(e.key);\n    };\n\n    window.addEventListener('storage', onStorageUpdate);\n    return function () {\n      return window.removeEventListener('storage', onStorageUpdate);\n    };\n  }, [uploadCount]); // allows user to pause miniplayer using the spacebar without the page scrolling down\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    var handleKeyPress = function handleKeyPress(e) {\n      if (e.key === ' ' && e.target === document.body) {\n        e.preventDefault();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyPress);\n    return function () {\n      return window.removeEventListener('keydown', handleKeyPress);\n    };\n  }, []);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (referredRewardAvailable && sanitizedReferrerParam) {\n      doUserSetReferrer(sanitizedReferrerParam);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [sanitizedReferrerParam, referredRewardAvailable]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {}, [fetchChannelListMine, fetchCollectionListMine]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // $FlowFixMe\n    document.documentElement.setAttribute('theme', theme);\n  }, [theme]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // $FlowFixMe\n    document.body.style.overflowY = currentModal ? 'hidden' : '';\n  }, [currentModal]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (hasNoChannels) {\n      setIncognito(true);\n    }\n\n    if (hasMyChannels) {\n      fetchModBlockedList();\n      fetchModAmIList();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [hasMyChannels, hasNoChannels, setIncognito]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (hasMyChannels && activeChannelClaim && !defaultChannelClaim && prefsReady) {\n      doSetDefaultChannel(activeChannelClaim.claim_id);\n    }\n  }, [activeChannelClaim, defaultChannelClaim, doSetDefaultChannel, hasMyChannels, prefsReady]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // $FlowFixMe\n    document.documentElement.setAttribute('lang', language);\n  }, [language]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!languages.includes(language)) {\n      fetchLanguage(language);\n\n      if (document && document.documentElement && constants_languages__WEBPACK_IMPORTED_MODULE_21__[\"default\"][language].length >= 3) {\n        document.documentElement.dir = constants_languages__WEBPACK_IMPORTED_MODULE_21__[\"default\"][language][2];\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [language, languages]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (shouldMigrateLanguage) {\n      setLanguage(shouldMigrateLanguage);\n    }\n  }, [shouldMigrateLanguage, setLanguage]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // Check that previousHasVerifiedEmail was not undefined instead of just not truthy\n    // This ensures we don't fire the emailVerified event on the initial user fetch\n    if (previousHasVerifiedEmail === false && hasVerifiedEmail) {\n      analytics__WEBPACK_IMPORTED_MODULE_4__[\"default\"].event.emailVerified();\n    }\n  }, [previousHasVerifiedEmail, hasVerifiedEmail, signIn]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (previousRewardApproved === false && isRewardApproved) {\n      analytics__WEBPACK_IMPORTED_MODULE_4__[\"default\"].event.rewardEligible();\n    }\n  }, [previousRewardApproved, isRewardApproved]); // Load IMA3 SDK for aniview\n  // useEffect(() => {\n  //   if (!isAuthenticated && SHOW_ADS) {\n  //     const script = document.createElement('script');\n  //     script.src = imaLibraryPath;\n  //     script.async = true;\n  //     // $FlowFixMe\n  //     document.body.appendChild(script);\n  //     return () => {\n  //       // $FlowFixMe\n  //       document.body.removeChild(script);\n  //     };\n  //   }\n  // }, []);\n  // add OneTrust script\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // don't add script for embedded content\n    function inIframe() {\n      try {\n        return window.self !== window.top;\n      } catch (e) {\n        return true;\n      }\n    }\n\n    if (inIframe() || !locale || !locale.gdpr_required || window.cordova) {\n      return;\n    } // $FlowFixMe\n\n\n    var useProductionOneTrust =  false && false;\n    var script = document.createElement('script');\n    script.src = oneTrustScriptSrc;\n    script.setAttribute('charset', 'UTF-8');\n\n    if (useProductionOneTrust) {\n      script.setAttribute('data-domain-script', '8a792d84-50a5-4b69-b080-6954ad4d4606');\n    } else {\n      script.setAttribute('data-domain-script', '8a792d84-50a5-4b69-b080-6954ad4d4606-test');\n    }\n\n    var secondScript = document.createElement('script'); // OneTrust asks to add this\n\n    secondScript.innerHTML = 'function OptanonWrapper() { window.gdprCallback() }';\n\n    window.gdprCallback = function () {\n      doSetGdprConsentList(window.OnetrustActiveGroups);\n\n      if (window.OnetrustActiveGroups.indexOf('C0002') !== -1) {\n        var ad = document.getElementsByClassName('OUTBRAIN')[0];\n        if (ad && !window.nagsShown) ad.classList.add('VISIBLE');\n      }\n    }; // $FlowFixMe\n\n\n    document.head.appendChild(script); // $FlowFixMe\n\n    document.head.appendChild(secondScript);\n    return function () {\n      try {\n        // $FlowFixMe\n        document.head.removeChild(script); // $FlowFixMe\n\n        document.head.removeChild(secondScript);\n      } catch (err) {// eslint-disable-next-line no-console\n        // console.log(err); <-- disabling this ... it's clogging up Sentry logs.\n      }\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps -- one time after locale is fetched\n  }, [locale]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    window.nagsShown = nagsShown;\n\n    if (nagsShown) {\n      var ad = document.getElementsByClassName('VISIBLE')[0];\n      if (ad) ad.classList.remove('VISIBLE');\n    } else {\n      var _ad = document.getElementsByClassName('OUTBRAIN')[0];\n      if (_ad) _ad.classList.add('VISIBLE');\n    }\n  }, [nagsShown]); // ready for sync syncs, however after signin when hasVerifiedEmail, that syncs too.\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // signInSyncPref is cleared after sharedState loop.\n    var syncLoopWithoutInterval = function syncLoopWithoutInterval() {\n      return syncLoop(true);\n    };\n\n    if (hasSignedIn && hasVerifiedEmail) {\n      // In case we are syncing.\n      syncLoop();\n      window.addEventListener('focus', syncLoopWithoutInterval);\n    }\n\n    return function () {\n      window.removeEventListener('focus', syncLoopWithoutInterval);\n    };\n  }, [hasSignedIn, hasVerifiedEmail, syncLoop]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (syncError && isAuthenticated && !pathname.includes(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"AUTH_WALLET_PASSWORD\"]) && !currentModal) {\n      history.push(\"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"AUTH_WALLET_PASSWORD\"], \"?redirect=\").concat(pathname));\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [syncError, pathname, isAuthenticated]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (prefsReady && isAuthenticated && (pathname === '/' || pathname === \"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"HELP\"])) && announcement !== '') {\n      doOpenAnnouncements();\n    }\n  }, [announcement, isAuthenticated, pathname, prefsReady]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    window.clearLastViewedAnnouncement = function () {\n      console.log('Clearing history. Please wait ...'); // eslint-disable-line no-console\n\n      doSetLastViewedAnnouncement('clear');\n    };\n  }, []); // Keep this at the end to ensure initial setup effects are run first\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!hasSignedIn && hasVerifiedEmail) {\n      signIn();\n      setHasSignedIn(true);\n    }\n  }, [hasVerifiedEmail, signIn, hasSignedIn]);\n  Object(web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_26__[\"useDegradedPerformance\"])(setLbryTvApiStatus, user); // useAdOutbrain(Boolean(hasPremiumPlus), isAuthenticated, history?.location?.pathname);\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!syncIsLocked) {\n      // When language is changed or translations are fetched, we render.\n      setLangRenderKey(Date.now());\n    } // eslint-disable-next-line react-hooks/exhaustive-deps -- don't respond to syncIsLocked, but skip action when locked.\n\n  }, [language, languages]);\n  var appRef = react__WEBPACK_IMPORTED_MODULE_1___default.a.useCallback(function (wrapperElement) {\n    if (wrapperElement) {\n      react_modal__WEBPACK_IMPORTED_MODULE_10___default.a.setAppElement(wrapperElement);\n    }\n  }, []); // Require an internal-api user on lbry.tv\n  // This also prevents the site from loading in the un-authed state while we wait for internal-apis to return for the first time\n  // It's not needed on desktop since there is no un-authed state\n\n  if (user === undefined) {\n    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n      className: \"main--empty\"\n    }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_spinner__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n      delayed: true\n    }));\n  }\n\n  if (connectionStatus.online && lbryTvApiStatus === web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_26__[\"STATUS_DOWN\"]) {\n    // TODO: Rename `SyncFatalError` since it has nothing to do with syncing.\n    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Suspense, {\n      fallback: null\n    }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(SyncFatalError, {\n      lbryTvApiStatus: lbryTvApiStatus\n    }));\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n    className: MAIN_WRAPPER_CLASS,\n    ref: appRef,\n    key: langRenderKey\n  }, lbryTvApiStatus === web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_26__[\"STATUS_DOWN\"] ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_yrbl__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n    className: \"main--empty\",\n    title: __('odysee.com is currently down'),\n    subtitle: __('My wheel broke, but the good news is that someone from LBRY is working on it.')\n  }) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(web_component_adBlockTester__WEBPACK_IMPORTED_MODULE_23__[\"default\"], null), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(web_component_adsSticky__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n    uri: uri\n  }), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_router_index__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n    uri: uri\n  }), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(modal_modalRouter__WEBPACK_IMPORTED_MODULE_9__[\"default\"], null), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Suspense, {\n    fallback: null\n  }, renderFiledrop && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(FileDrop, null)), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_fileRenderFloating__WEBPACK_IMPORTED_MODULE_13__[\"default\"], null), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Suspense, {\n    fallback: null\n  }, isEnhancedLayout && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_yrbl__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n    className: \"yrbl--enhanced\"\n  }), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(web_component_youtubeReferralWelcome__WEBPACK_IMPORTED_MODULE_25__[\"default\"], null), !shouldHideNag && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(NagContinueFirstRun, null), fromLbrytvParam && !seenSunsestMessage && !shouldHideNag && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(NagSunset, {\n    email: hasVerifiedEmail,\n    onClose: function onClose() {\n      return setSeenSunsetMessage(true);\n    }\n  }), getStatusNag())));\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_router__WEBPACK_IMPORTED_MODULE_14__[\"withRouter\"])(App));\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvY29tcG9uZW50L2FwcC92aWV3LmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi91aS9jb21wb25lbnQvYXBwL3ZpZXcuanN4P2JkNzgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcbmltcG9ydCAqIGFzIFBBR0VTIGZyb20gJ2NvbnN0YW50cy9wYWdlcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGxhenlJbXBvcnQgfSBmcm9tICd1dGlsL2xhenlJbXBvcnQnO1xuaW1wb3J0IHsgdHVzVW5sb2NrQW5kTm90aWZ5LCB0dXNIYW5kbGVUYWJVcGRhdGVzIH0gZnJvbSAndXRpbC90dXMnO1xuaW1wb3J0IGFuYWx5dGljcyBmcm9tICdhbmFseXRpY3MnO1xuaW1wb3J0IHsgc2V0U2VhcmNoVXNlcklkIH0gZnJvbSAncmVkdXgvYWN0aW9ucy9zZWFyY2gnO1xuaW1wb3J0IHsgcGFyc2VVUkksIGJ1aWxkVVJJIH0gZnJvbSAndXRpbC9sYnJ5VVJJJztcbmltcG9ydCB7IGdlbmVyYXRlR29vZ2xlQ2FjaGVVcmwgfSBmcm9tICd1dGlsL3VybCc7XG5pbXBvcnQgUm91dGVyIGZyb20gJ2NvbXBvbmVudC9yb3V0ZXIvaW5kZXgnO1xuaW1wb3J0IE1vZGFsUm91dGVyIGZyb20gJ21vZGFsL21vZGFsUm91dGVyJztcbmltcG9ydCBSZWFjdE1vZGFsIGZyb20gJ3JlYWN0LW1vZGFsJztcbmltcG9ydCB1c2VLb25hbWlMaXN0ZW5lciBmcm9tICd1dGlsL2VuaGFuY2VkLWxheW91dCc7XG5pbXBvcnQgWXJibCBmcm9tICdjb21wb25lbnQveXJibCc7XG5pbXBvcnQgRmlsZVJlbmRlckZsb2F0aW5nIGZyb20gJ2NvbXBvbmVudC9maWxlUmVuZGVyRmxvYXRpbmcnO1xuaW1wb3J0IHsgd2l0aFJvdXRlciB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG4vLyBpbXBvcnQgdXNlQWRPdXRicmFpbiBmcm9tICdlZmZlY3RzL3VzZS1hZC1vdXRicmFpbic7XG5pbXBvcnQgdXNlUHJldmlvdXMgZnJvbSAnZWZmZWN0cy91c2UtcHJldmlvdXMnO1xuaW1wb3J0IE5hZyBmcm9tICdjb21wb25lbnQvbmFnJztcbmltcG9ydCBSRVdBUkRTIGZyb20gJ3Jld2FyZHMnO1xuaW1wb3J0IHVzZVBlcnNpc3RlZFN0YXRlIGZyb20gJ2VmZmVjdHMvdXNlLXBlcnNpc3RlZC1zdGF0ZSc7XG5pbXBvcnQgdXNlQ29ubmVjdGlvblN0YXR1cyBmcm9tICdlZmZlY3RzL3VzZS1jb25uZWN0aW9uLXN0YXR1cyc7XG5pbXBvcnQgU3Bpbm5lciBmcm9tICdjb21wb25lbnQvc3Bpbm5lcic7XG5pbXBvcnQgTEFOR1VBR0VTIGZyb20gJ2NvbnN0YW50cy9sYW5ndWFnZXMnO1xuaW1wb3J0IHsgQmVmb3JlVW5sb2FkLCBVbmxvYWQgfSBmcm9tICd1dGlsL2JlZm9yZVVubG9hZCc7XG5pbXBvcnQgQWRCbG9ja1Rlc3RlciBmcm9tICd3ZWIvY29tcG9uZW50L2FkQmxvY2tUZXN0ZXInO1xuaW1wb3J0IEFkc1N0aWNreSBmcm9tICd3ZWIvY29tcG9uZW50L2Fkc1N0aWNreSc7XG5pbXBvcnQgWW91dHViZVdlbGNvbWUgZnJvbSAnd2ViL2NvbXBvbmVudC95b3V0dWJlUmVmZXJyYWxXZWxjb21lJztcbmltcG9ydCB7XG4gIHVzZURlZ3JhZGVkUGVyZm9ybWFuY2UsXG4gIFNUQVRVU19PSyxcbiAgU1RBVFVTX0RFR1JBREVELFxuICBTVEFUVVNfRkFJTElORyxcbiAgU1RBVFVTX0RPV04sXG59IGZyb20gJ3dlYi9lZmZlY3RzL3VzZS1kZWdyYWRlZC1wZXJmb3JtYW5jZSc7XG5pbXBvcnQgTEFOR1VBR0VfTUlHUkFUSU9OUyBmcm9tICdjb25zdGFudHMvbGFuZ3VhZ2UtbWlncmF0aW9ucyc7XG5pbXBvcnQgeyB1c2VJc01vYmlsZSB9IGZyb20gJ2VmZmVjdHMvdXNlLXNjcmVlbnNpemUnO1xuXG5jb25zdCBGaWxlRHJvcCA9IGxhenlJbXBvcnQoKCkgPT4gaW1wb3J0KCdjb21wb25lbnQvZmlsZURyb3AnIC8qIHdlYnBhY2tDaHVua05hbWU6IFwiZmlsZURyb3BcIiAqLykpO1xuY29uc3QgTmFnQ29udGludWVGaXJzdFJ1biA9IGxhenlJbXBvcnQoKCkgPT4gaW1wb3J0KCdjb21wb25lbnQvbmFnQ29udGludWVGaXJzdFJ1bicgLyogd2VicGFja0NodW5rTmFtZTogXCJuYWdDRlJcIiAqLykpO1xuY29uc3QgTmFnRGVncmFkZWRQZXJmb3JtYW5jZSA9IGxhenlJbXBvcnQoKCkgPT5cbiAgaW1wb3J0KCd3ZWIvY29tcG9uZW50L25hZy1kZWdyYWRlZC1wZXJmb3JtYW5jZScgLyogd2VicGFja0NodW5rTmFtZTogXCJOYWdEZWdyYWRlZFBlcmZvcm1hbmNlXCIgKi8pXG4pO1xuY29uc3QgTmFnTm9Vc2VyID0gbGF6eUltcG9ydCgoKSA9PiBpbXBvcnQoJ3dlYi9jb21wb25lbnQvbmFnLW5vLXVzZXInIC8qIHdlYnBhY2tDaHVua05hbWU6IFwibmFnLW5vLXVzZXJcIiAqLykpO1xuY29uc3QgTmFnU3Vuc2V0ID0gbGF6eUltcG9ydCgoKSA9PiBpbXBvcnQoJ3dlYi9jb21wb25lbnQvbmFnLXN1bnNldCcgLyogd2VicGFja0NodW5rTmFtZTogXCJuYWctc3Vuc2V0XCIgKi8pKTtcbmNvbnN0IFN5bmNGYXRhbEVycm9yID0gbGF6eUltcG9ydCgoKSA9PiBpbXBvcnQoJ2NvbXBvbmVudC9zeW5jRmF0YWxFcnJvcicgLyogd2VicGFja0NodW5rTmFtZTogXCJzeW5jRmF0YWxFcnJvclwiICovKSk7XG5cbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuZXhwb3J0IGNvbnN0IE1BSU5fV1JBUFBFUl9DTEFTUyA9ICdtYWluLXdyYXBwZXInO1xuZXhwb3J0IGNvbnN0IElTX01BQyA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignTWFjIE9TIFgnKSAhPT0gLTE7XG5cbi8vIGNvbnN0IGltYUxpYnJhcnlQYXRoID0gJ2h0dHBzOi8vaW1hc2RrLmdvb2dsZWFwaXMuY29tL2pzL3Nka2xvYWRlci9pbWEzLmpzJztcbmNvbnN0IG9uZVRydXN0U2NyaXB0U3JjID0gJ2h0dHBzOi8vY2RuLmNvb2tpZWxhdy5vcmcvc2NyaXB0dGVtcGxhdGVzL290U0RLU3R1Yi5qcyc7XG5cbmNvbnN0IExBVEVTVF9QQVRIID0gYC8kLyR7UEFHRVMuTEFURVNUfS9gO1xuY29uc3QgTElWRV9QQVRIID0gYC8kLyR7UEFHRVMuTElWRV9OT1d9L2A7XG5jb25zdCBFTUJFRF9QQVRIID0gYC8kLyR7UEFHRVMuRU1CRUR9L2A7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIGxhbmd1YWdlOiBzdHJpbmcsXG4gIGxhbmd1YWdlczogQXJyYXk8c3RyaW5nPixcbiAgdGhlbWU6IHN0cmluZyxcbiAgdXNlcjogP3sgaWQ6IHN0cmluZywgaGFzX3ZlcmlmaWVkX2VtYWlsOiBib29sZWFuLCBpc19yZXdhcmRfYXBwcm92ZWQ6IGJvb2xlYW4gfSxcbiAgbG9jYWxlOiA/TG9jYWxlSW5mbyxcbiAgbG9jYXRpb246IHsgcGF0aG5hbWU6IHN0cmluZywgaGFzaDogc3RyaW5nLCBzZWFyY2g6IHN0cmluZywgaG9zdG5hbWU6IHN0cmluZywgcmVsb2FkOiAoKSA9PiB2b2lkIH0sXG4gIGhpc3Rvcnk6IHsgcHVzaDogKHN0cmluZykgPT4gdm9pZCwgbG9jYXRpb246IHsgcGF0aG5hbWU6IHN0cmluZyB9LCByZXBsYWNlOiAoc3RyaW5nKSA9PiB2b2lkIH0sXG4gIGZldGNoQ2hhbm5lbExpc3RNaW5lOiAoKSA9PiB2b2lkLFxuICBmZXRjaENvbGxlY3Rpb25MaXN0TWluZTogKCkgPT4gdm9pZCxcbiAgc2lnbkluOiAoKSA9PiB2b2lkLFxuICBzZXRMYW5ndWFnZTogKHN0cmluZykgPT4gdm9pZCxcbiAgZmV0Y2hMYW5ndWFnZTogKHN0cmluZykgPT4gdm9pZCxcbiAgaXNSZWxvYWRSZXF1aXJlZDogYm9vbGVhbixcbiAgdXBsb2FkQ291bnQ6IG51bWJlcixcbiAgYmFsYW5jZTogP251bWJlcixcbiAgc3luY0lzTG9ja2VkOiBib29sZWFuLFxuICBzeW5jRXJyb3I6ID9zdHJpbmcsXG4gIHByZWZzUmVhZHk6IGJvb2xlYW4sXG4gIHJld2FyZHM6IEFycmF5PFJld2FyZD4sXG4gIGRvVXNlclNldFJlZmVycmVyOiAocmVmZXJyZXJVcmk6IHN0cmluZykgPT4gdm9pZCxcbiAgaXNBdXRoZW50aWNhdGVkOiBib29sZWFuLFxuICBzeW5jTG9vcDogKD9ib29sZWFuKSA9PiB2b2lkLFxuICBjdXJyZW50TW9kYWw6IGFueSxcbiAgc3luY0ZhdGFsRXJyb3I6IGJvb2xlYW4sXG4gIGFjdGl2ZUNoYW5uZWxDbGFpbTogP0NoYW5uZWxDbGFpbSxcbiAgbXlDaGFubmVsQ2xhaW1JZHM6ID9BcnJheTxzdHJpbmc+LFxuICAvLyBoYXNQcmVtaXVtUGx1czogP2Jvb2xlYW4sXG4gIHNldEluY29nbml0bzogKGJvb2xlYW4pID0+IHZvaWQsXG4gIGZldGNoTW9kQmxvY2tlZExpc3Q6ICgpID0+IHZvaWQsXG4gIGZldGNoTW9kQW1JTGlzdDogKCkgPT4gdm9pZCxcbiAgaG9tZXBhZ2VGZXRjaGVkOiBib29sZWFuLFxuICBkZWZhdWx0Q2hhbm5lbENsYWltOiA/YW55LFxuICBuYWdzU2hvd246IGJvb2xlYW4sXG4gIGFubm91bmNlbWVudDogc3RyaW5nLFxuICBkb09wZW5Bbm5vdW5jZW1lbnRzOiAoKSA9PiB2b2lkLFxuICBkb1NldExhc3RWaWV3ZWRBbm5vdW5jZW1lbnQ6IChoYXNoOiBzdHJpbmcpID0+IHZvaWQsXG4gIGRvU2V0RGVmYXVsdENoYW5uZWw6IChjbGFpbUlkOiBzdHJpbmcpID0+IHZvaWQsXG4gIGRvU2V0R2RwckNvbnNlbnRMaXN0OiAoY3N2OiBzdHJpbmcpID0+IHZvaWQsXG59O1xuXG5mdW5jdGlvbiBBcHAocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICB0aGVtZSxcbiAgICB1c2VyLFxuICAgIGxvY2FsZSxcbiAgICBsb2NhdGlvbixcbiAgICBmZXRjaENoYW5uZWxMaXN0TWluZSxcbiAgICBmZXRjaENvbGxlY3Rpb25MaXN0TWluZSxcbiAgICBzaWduSW4sXG4gICAgaXNSZWxvYWRSZXF1aXJlZCxcbiAgICB1cGxvYWRDb3VudCxcbiAgICBoaXN0b3J5LFxuICAgIHN5bmNFcnJvcixcbiAgICBzeW5jSXNMb2NrZWQsXG4gICAgcHJlZnNSZWFkeSxcbiAgICBsYW5ndWFnZSxcbiAgICBsYW5ndWFnZXMsXG4gICAgc2V0TGFuZ3VhZ2UsXG4gICAgZmV0Y2hMYW5ndWFnZSxcbiAgICByZXdhcmRzLFxuICAgIGRvVXNlclNldFJlZmVycmVyLFxuICAgIGlzQXV0aGVudGljYXRlZCxcbiAgICBzeW5jTG9vcCxcbiAgICBjdXJyZW50TW9kYWwsXG4gICAgc3luY0ZhdGFsRXJyb3IsXG4gICAgbXlDaGFubmVsQ2xhaW1JZHMsXG4gICAgYWN0aXZlQ2hhbm5lbENsYWltLFxuICAgIHNldEluY29nbml0byxcbiAgICBmZXRjaE1vZEJsb2NrZWRMaXN0LFxuICAgIC8vIGhhc1ByZW1pdW1QbHVzLFxuICAgIGZldGNoTW9kQW1JTGlzdCxcbiAgICBkZWZhdWx0Q2hhbm5lbENsYWltLFxuICAgIG5hZ3NTaG93bixcbiAgICBhbm5vdW5jZW1lbnQsXG4gICAgZG9PcGVuQW5ub3VuY2VtZW50cyxcbiAgICBkb1NldExhc3RWaWV3ZWRBbm5vdW5jZW1lbnQsXG4gICAgZG9TZXREZWZhdWx0Q2hhbm5lbCxcbiAgICBkb1NldEdkcHJDb25zZW50TGlzdCxcbiAgfSA9IHByb3BzO1xuXG4gIGNvbnN0IGlzTW9iaWxlID0gdXNlSXNNb2JpbGUoKTtcbiAgY29uc3QgaXNFbmhhbmNlZExheW91dCA9IHVzZUtvbmFtaUxpc3RlbmVyKCk7XG4gIGNvbnN0IFtoYXNTaWduZWRJbiwgc2V0SGFzU2lnbmVkSW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBoYXNWZXJpZmllZEVtYWlsID0gdXNlciAmJiBCb29sZWFuKHVzZXIuaGFzX3ZlcmlmaWVkX2VtYWlsKTtcbiAgY29uc3QgaXNSZXdhcmRBcHByb3ZlZCA9IHVzZXIgJiYgdXNlci5pc19yZXdhcmRfYXBwcm92ZWQ7XG4gIGNvbnN0IHByZXZpb3VzSGFzVmVyaWZpZWRFbWFpbCA9IHVzZVByZXZpb3VzKGhhc1ZlcmlmaWVkRW1haWwpO1xuICBjb25zdCBwcmV2aW91c1Jld2FyZEFwcHJvdmVkID0gdXNlUHJldmlvdXMoaXNSZXdhcmRBcHByb3ZlZCk7XG5cbiAgY29uc3QgW2xicnlUdkFwaVN0YXR1cywgc2V0TGJyeVR2QXBpU3RhdHVzXSA9IHVzZVN0YXRlKFNUQVRVU19PSyk7XG4gIC8vIGNvbnN0IFtzaWRlYmFyT3Blbl0gPSB1c2VQZXJzaXN0ZWRTdGF0ZSgnc2lkZWJhcicsIGZhbHNlKTtcblxuICBjb25zdCB7IHBhdGhuYW1lLCBoYXNoLCBzZWFyY2gsIGhvc3RuYW1lIH0gPSBsb2NhdGlvbjtcbiAgY29uc3QgW3JldHJ5aW5nU3luYywgc2V0UmV0cnlpbmdTeW5jXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xhbmdSZW5kZXJLZXksIHNldExhbmdSZW5kZXJLZXldID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFtzZWVuU3Vuc2VzdE1lc3NhZ2UsIHNldFNlZW5TdW5zZXRNZXNzYWdlXSA9IHVzZVBlcnNpc3RlZFN0YXRlKCdsYnJ5dHYtc3Vuc2V0JywgZmFsc2UpO1xuICAvLyByZWZlcnJhbCBjbGFpbWluZ1xuICBjb25zdCByZWZlcnJlZFJld2FyZEF2YWlsYWJsZSA9IHJld2FyZHMgJiYgcmV3YXJkcy5zb21lKChyZXdhcmQpID0+IHJld2FyZC5yZXdhcmRfdHlwZSA9PT0gUkVXQVJEUy5UWVBFX1JFRkVSRUUpO1xuICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHNlYXJjaCk7XG4gIGNvbnN0IHJhd1JlZmVycmVyUGFyYW0gPSB1cmxQYXJhbXMuZ2V0KCdyJyk7XG4gIGNvbnN0IGZyb21MYnJ5dHZQYXJhbSA9IHVybFBhcmFtcy5nZXQoJ3N1bnNldCcpO1xuICBjb25zdCBzYW5pdGl6ZWRSZWZlcnJlclBhcmFtID0gcmF3UmVmZXJyZXJQYXJhbSAmJiByYXdSZWZlcnJlclBhcmFtLnJlcGxhY2UoJzonLCAnIycpO1xuICBjb25zdCBlbWJlZFBhdGggPSBwYXRobmFtZS5zdGFydHNXaXRoKEVNQkVEX1BBVEgpO1xuICBjb25zdCBzaG91bGRIaWRlTmFnID0gZW1iZWRQYXRoIHx8IHBhdGhuYW1lLnN0YXJ0c1dpdGgoYC8kLyR7UEFHRVMuQVVUSF9WRVJJRll9YCk7XG4gIGNvbnN0IHVzZXJJZCA9IHVzZXIgJiYgdXNlci5pZDtcbiAgY29uc3QgaGFzTXlDaGFubmVscyA9IG15Q2hhbm5lbENsYWltSWRzICYmIG15Q2hhbm5lbENsYWltSWRzLmxlbmd0aCA+IDA7XG4gIGNvbnN0IGhhc05vQ2hhbm5lbHMgPSBteUNoYW5uZWxDbGFpbUlkcyAmJiBteUNoYW5uZWxDbGFpbUlkcy5sZW5ndGggPT09IDA7XG4gIGNvbnN0IHNob3VsZE1pZ3JhdGVMYW5ndWFnZSA9IExBTkdVQUdFX01JR1JBVElPTlNbbGFuZ3VhZ2VdO1xuICBjb25zdCByZW5kZXJGaWxlZHJvcCA9ICFpc01vYmlsZSAmJiBpc0F1dGhlbnRpY2F0ZWQ7XG4gIGNvbnN0IGNvbm5lY3Rpb25TdGF0dXMgPSB1c2VDb25uZWN0aW9uU3RhdHVzKCk7XG5cbiAgY29uc3QgdXJsUGF0aCA9IHBhdGhuYW1lICsgaGFzaDtcbiAgY29uc3QgbGF0ZXN0Q29udGVudFBhdGggPSB1cmxQYXRoLnN0YXJ0c1dpdGgoTEFURVNUX1BBVEgpO1xuICBjb25zdCBsaXZlQ29udGVudFBhdGggPSB1cmxQYXRoLnN0YXJ0c1dpdGgoTElWRV9QQVRIKTtcbiAgY29uc3QgZmVhdHVyZVBhcmFtID0gdXJsUGFyYW1zLmdldCgnZmVhdHVyZScpO1xuICBjb25zdCBlbWJlZExhdGVzdFBhdGggPSBlbWJlZFBhdGggJiYgKGZlYXR1cmVQYXJhbSA9PT0gUEFHRVMuTEFURVNUIHx8IGZlYXR1cmVQYXJhbSA9PT0gUEFHRVMuTElWRV9OT1cpO1xuICBjb25zdCBpc05ld2VzdFBhdGggPSBsYXRlc3RDb250ZW50UGF0aCB8fCBsaXZlQ29udGVudFBhdGggfHwgZW1iZWRMYXRlc3RQYXRoO1xuXG4gIGxldCBwYXRoO1xuICBpZiAoaXNOZXdlc3RQYXRoKSB7XG4gICAgcGF0aCA9IHVybFBhdGgucmVwbGFjZShlbWJlZExhdGVzdFBhdGggPyBFTUJFRF9QQVRIIDogbGF0ZXN0Q29udGVudFBhdGggPyBMQVRFU1RfUEFUSCA6IExJVkVfUEFUSCwgJycpO1xuICB9IGVsc2Uge1xuICAgIC8vIFJlbW92ZSB0aGUgbGVhZGluZyBcIi9cIiBhZGRlZCBieSB0aGUgYnJvd3NlclxuICAgIHBhdGggPSB1cmxQYXRoLnNsaWNlKDEpO1xuICB9XG4gIHBhdGggPSBwYXRoLnJlcGxhY2UoLzovZywgJyMnKTtcblxuICBpZiAoaXNOZXdlc3RQYXRoICYmICFwYXRoLnN0YXJ0c1dpdGgoJ0AnKSkge1xuICAgIHBhdGggPSBgQCR7cGF0aH1gO1xuICB9XG5cbiAgaWYgKHNlYXJjaCAmJiBzZWFyY2guc3RhcnRzV2l0aCgnP3E9Y2FjaGU6JykpIHtcbiAgICBnZW5lcmF0ZUdvb2dsZUNhY2hlVXJsKHNlYXJjaCwgcGF0aCk7XG4gIH1cblxuICBsZXQgdXJpO1xuICB0cnkge1xuICAgIC8vIGhlcmUgcXVlcnlTdHJpbmcgYW5kIHN0YXJ0VGltZSBhcmUgXCJyZW1vdmVkXCIgZnJvbSB0aGUgYnVpbGRVUkkgcHJvY2Vzc1xuICAgIC8vIHRvIGJ1aWxkIG9ubHkgdGhlIHVyaSBpdHNlbGZcbiAgICBjb25zdCB7IHF1ZXJ5U3RyaW5nLCBzdGFydFRpbWUsIC4uLnBhcnNlZFVyaSB9ID0gcGFyc2VVUkkocGF0aCk7XG4gICAgdXJpID0gYnVpbGRVUkkoeyAuLi5wYXJzZWRVcmkgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zdCBtYXRjaCA9IHBhdGgubWF0Y2goL1sjLzpdLyk7XG5cbiAgICBpZiAoIXBhdGguc3RhcnRzV2l0aCgnJC8nKSAmJiBtYXRjaCAmJiBtYXRjaC5pbmRleCkge1xuICAgICAgdXJpID0gYGxicnk6Ly8ke3BhdGguc2xpY2UoMCwgbWF0Y2guaW5kZXgpfWA7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0U3RhdHVzTmFnKCkge1xuICAgIC8vIEhhbmRsZSBcIm9mZmxpbmVcIiBmaXJzdC4gRXZlcnl0aGluZyBlbHNlIGlzIG1lYW5pbmdsZXNzIGlmIGl0J3Mgb2ZmbGluZS5cbiAgICBpZiAoIWNvbm5lY3Rpb25TdGF0dXMub25saW5lKSB7XG4gICAgICByZXR1cm4gPE5hZyB0eXBlPVwiaGVscGZ1bFwiIG1lc3NhZ2U9e19fKCdZb3UgYXJlIG9mZmxpbmUuIENoZWNrIHlvdXIgaW50ZXJuZXQgY29ubmVjdGlvbi4nKX0gLz47XG4gICAgfVxuXG4gICAgLy8gT25seSAxIG5hZyBpcyBwb3NzaWJsZSwgc28gc2hvdyB0aGUgbW9zdCBpbXBvcnRhbnQ6XG5cbiAgICBpZiAodXNlciA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIDxOYWdOb1VzZXIgLz47XG4gICAgfVxuXG4gICAgaWYgKGxicnlUdkFwaVN0YXR1cyA9PT0gU1RBVFVTX0RFR1JBREVEIHx8IGxicnlUdkFwaVN0YXR1cyA9PT0gU1RBVFVTX0ZBSUxJTkcpIHtcbiAgICAgIGlmICghc2hvdWxkSGlkZU5hZykge1xuICAgICAgICByZXR1cm4gPE5hZ0RlZ3JhZGVkUGVyZm9ybWFuY2Ugb25DbG9zZT17KCkgPT4gc2V0TGJyeVR2QXBpU3RhdHVzKFNUQVRVU19PSyl9IC8+O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzeW5jRmF0YWxFcnJvcikge1xuICAgICAgaWYgKCFyZXRyeWluZ1N5bmMpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8TmFnXG4gICAgICAgICAgICB0eXBlPVwiZXJyb3JcIlxuICAgICAgICAgICAgbWVzc2FnZT17X18oJ0ZhaWxlZCB0byBzeW5jaHJvbml6ZSBzZXR0aW5ncy4gV2FpdCBhIHdoaWxlIGJlZm9yZSByZXRyeWluZy4nKX1cbiAgICAgICAgICAgIGFjdGlvblRleHQ9e19fKCdSZXRyeScpfVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICBzeW5jTG9vcCh0cnVlKTtcbiAgICAgICAgICAgICAgc2V0UmV0cnlpbmdTeW5jKHRydWUpO1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHNldFJldHJ5aW5nU3luYyhmYWxzZSksIDQwMDApO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNSZWxvYWRSZXF1aXJlZCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPE5hZ1xuICAgICAgICAgIG1lc3NhZ2U9e19fKCdBIG5ldyB2ZXJzaW9uIG9mIE9keXNlZSBpcyBhdmFpbGFibGUuJyl9XG4gICAgICAgICAgYWN0aW9uVGV4dD17X18oJ1JlZnJlc2gnKX1cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCl9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHVzZXJJZCkge1xuICAgICAgYW5hbHl0aWNzLnNldFVzZXIodXNlcklkKTtcbiAgICAgIHNldFNlYXJjaFVzZXJJZCh1c2VySWQpO1xuICAgIH1cbiAgfSwgW3VzZXJJZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN5bmNJc0xvY2tlZCkge1xuICAgICAgY29uc3QgbXNnID0gJ1RoZXJlIGFyZSB1bnNhdmVkIHNldHRpbmdzLiBFeGl0IHRoZSBTZXR0aW5ncyBQYWdlIHRvIGZpbmFsaXplIHRoZW0uJztcbiAgICAgIGNvbnN0IGhhbmRsZUJlZm9yZVVubG9hZCA9IChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IG1zZztcbiAgICAgIH07XG5cbiAgICAgIEJlZm9yZVVubG9hZC5yZWdpc3RlcihoYW5kbGVCZWZvcmVVbmxvYWQsIG1zZyk7XG4gICAgICByZXR1cm4gKCkgPT4gQmVmb3JlVW5sb2FkLnVucmVnaXN0ZXIoaGFuZGxlQmVmb3JlVW5sb2FkKTtcbiAgICB9XG4gIH0sIFtzeW5jSXNMb2NrZWRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdXBsb2FkQ291bnQpIHJldHVybjtcblxuICAgIGNvbnN0IG1zZyA9ICdVbmZpbmlzaGVkIHVwbG9hZHMuJztcbiAgICBjb25zdCBoYW5kbGVVbmxvYWQgPSAoZXZlbnQpID0+IHR1c1VubG9ja0FuZE5vdGlmeSgpO1xuICAgIGNvbnN0IGhhbmRsZUJlZm9yZVVubG9hZCA9IChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gX18obXNnKTsgLy8gd2l0aG91dCBzZXR0aW5nIHRoaXMgdG8gc29tZXRoaW5nIGl0IGRvZXNuJ3Qgd29yayBpbiBzb21lIGJyb3dzZXJzLlxuICAgIH07XG5cbiAgICBVbmxvYWQucmVnaXN0ZXIoaGFuZGxlVW5sb2FkKTtcbiAgICBCZWZvcmVVbmxvYWQucmVnaXN0ZXIoaGFuZGxlQmVmb3JlVW5sb2FkLCBtc2cpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIFVubG9hZC51bnJlZ2lzdGVyKGhhbmRsZVVubG9hZCk7XG4gICAgICBCZWZvcmVVbmxvYWQudW5yZWdpc3RlcihoYW5kbGVCZWZvcmVVbmxvYWQpO1xuICAgIH07XG4gIH0sIFt1cGxvYWRDb3VudF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF1cGxvYWRDb3VudCkgcmV0dXJuO1xuXG4gICAgY29uc3Qgb25TdG9yYWdlVXBkYXRlID0gKGUpID0+IHR1c0hhbmRsZVRhYlVwZGF0ZXMoZS5rZXkpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgb25TdG9yYWdlVXBkYXRlKTtcblxuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIG9uU3RvcmFnZVVwZGF0ZSk7XG4gIH0sIFt1cGxvYWRDb3VudF0pO1xuXG4gIC8vIGFsbG93cyB1c2VyIHRvIHBhdXNlIG1pbmlwbGF5ZXIgdXNpbmcgdGhlIHNwYWNlYmFyIHdpdGhvdXQgdGhlIHBhZ2Ugc2Nyb2xsaW5nIGRvd25cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVLZXlQcmVzcyA9IChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICcgJyAmJiBlLnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleVByZXNzKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlQcmVzcyk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChyZWZlcnJlZFJld2FyZEF2YWlsYWJsZSAmJiBzYW5pdGl6ZWRSZWZlcnJlclBhcmFtKSB7XG4gICAgICBkb1VzZXJTZXRSZWZlcnJlcihzYW5pdGl6ZWRSZWZlcnJlclBhcmFtKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbc2FuaXRpemVkUmVmZXJyZXJQYXJhbSwgcmVmZXJyZWRSZXdhcmRBdmFpbGFibGVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICB9LCBbZmV0Y2hDaGFubmVsTGlzdE1pbmUsIGZldGNoQ29sbGVjdGlvbkxpc3RNaW5lXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyAkRmxvd0ZpeE1lXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgndGhlbWUnLCB0aGVtZSk7XG4gIH0sIFt0aGVtZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gJEZsb3dGaXhNZVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3dZID0gY3VycmVudE1vZGFsID8gJ2hpZGRlbicgOiAnJztcbiAgfSwgW2N1cnJlbnRNb2RhbF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGhhc05vQ2hhbm5lbHMpIHtcbiAgICAgIHNldEluY29nbml0byh0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAoaGFzTXlDaGFubmVscykge1xuICAgICAgZmV0Y2hNb2RCbG9ja2VkTGlzdCgpO1xuICAgICAgZmV0Y2hNb2RBbUlMaXN0KCk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW2hhc015Q2hhbm5lbHMsIGhhc05vQ2hhbm5lbHMsIHNldEluY29nbml0b10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGhhc015Q2hhbm5lbHMgJiYgYWN0aXZlQ2hhbm5lbENsYWltICYmICFkZWZhdWx0Q2hhbm5lbENsYWltICYmIHByZWZzUmVhZHkpIHtcbiAgICAgIGRvU2V0RGVmYXVsdENoYW5uZWwoYWN0aXZlQ2hhbm5lbENsYWltLmNsYWltX2lkKTtcbiAgICB9XG4gIH0sIFthY3RpdmVDaGFubmVsQ2xhaW0sIGRlZmF1bHRDaGFubmVsQ2xhaW0sIGRvU2V0RGVmYXVsdENoYW5uZWwsIGhhc015Q2hhbm5lbHMsIHByZWZzUmVhZHldKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vICRGbG93Rml4TWVcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdsYW5nJywgbGFuZ3VhZ2UpO1xuICB9LCBbbGFuZ3VhZ2VdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghbGFuZ3VhZ2VzLmluY2x1ZGVzKGxhbmd1YWdlKSkge1xuICAgICAgZmV0Y2hMYW5ndWFnZShsYW5ndWFnZSk7XG5cbiAgICAgIGlmIChkb2N1bWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgTEFOR1VBR0VTW2xhbmd1YWdlXS5sZW5ndGggPj0gMykge1xuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZGlyID0gTEFOR1VBR0VTW2xhbmd1YWdlXVsyXTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbbGFuZ3VhZ2UsIGxhbmd1YWdlc10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNob3VsZE1pZ3JhdGVMYW5ndWFnZSkge1xuICAgICAgc2V0TGFuZ3VhZ2Uoc2hvdWxkTWlncmF0ZUxhbmd1YWdlKTtcbiAgICB9XG4gIH0sIFtzaG91bGRNaWdyYXRlTGFuZ3VhZ2UsIHNldExhbmd1YWdlXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBDaGVjayB0aGF0IHByZXZpb3VzSGFzVmVyaWZpZWRFbWFpbCB3YXMgbm90IHVuZGVmaW5lZCBpbnN0ZWFkIG9mIGp1c3Qgbm90IHRydXRoeVxuICAgIC8vIFRoaXMgZW5zdXJlcyB3ZSBkb24ndCBmaXJlIHRoZSBlbWFpbFZlcmlmaWVkIGV2ZW50IG9uIHRoZSBpbml0aWFsIHVzZXIgZmV0Y2hcbiAgICBpZiAocHJldmlvdXNIYXNWZXJpZmllZEVtYWlsID09PSBmYWxzZSAmJiBoYXNWZXJpZmllZEVtYWlsKSB7XG4gICAgICBhbmFseXRpY3MuZXZlbnQuZW1haWxWZXJpZmllZCgpO1xuICAgIH1cbiAgfSwgW3ByZXZpb3VzSGFzVmVyaWZpZWRFbWFpbCwgaGFzVmVyaWZpZWRFbWFpbCwgc2lnbkluXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocHJldmlvdXNSZXdhcmRBcHByb3ZlZCA9PT0gZmFsc2UgJiYgaXNSZXdhcmRBcHByb3ZlZCkge1xuICAgICAgYW5hbHl0aWNzLmV2ZW50LnJld2FyZEVsaWdpYmxlKCk7XG4gICAgfVxuICB9LCBbcHJldmlvdXNSZXdhcmRBcHByb3ZlZCwgaXNSZXdhcmRBcHByb3ZlZF0pO1xuXG4gIC8vIExvYWQgSU1BMyBTREsgZm9yIGFuaXZpZXdcbiAgLy8gdXNlRWZmZWN0KCgpID0+IHtcbiAgLy8gICBpZiAoIWlzQXV0aGVudGljYXRlZCAmJiBTSE9XX0FEUykge1xuICAvLyAgICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gIC8vICAgICBzY3JpcHQuc3JjID0gaW1hTGlicmFyeVBhdGg7XG4gIC8vICAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuICAvLyAgICAgLy8gJEZsb3dGaXhNZVxuICAvLyAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAvLyAgICAgcmV0dXJuICgpID0+IHtcbiAgLy8gICAgICAgLy8gJEZsb3dGaXhNZVxuICAvLyAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gIC8vICAgICB9O1xuICAvLyAgIH1cbiAgLy8gfSwgW10pO1xuXG5cbiAgLy8gYWRkIE9uZVRydXN0IHNjcmlwdFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIGRvbid0IGFkZCBzY3JpcHQgZm9yIGVtYmVkZGVkIGNvbnRlbnRcbiAgICBmdW5jdGlvbiBpbklmcmFtZSgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB3aW5kb3cuc2VsZiAhPT0gd2luZG93LnRvcDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGluSWZyYW1lKCkgfHwgIWxvY2FsZSB8fCAhbG9jYWxlLmdkcHJfcmVxdWlyZWQgfHwgd2luZG93LmNvcmRvdmEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAkRmxvd0ZpeE1lXG4gICAgY29uc3QgdXNlUHJvZHVjdGlvbk9uZVRydXN0ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyAmJiBob3N0bmFtZSA9PT0gJ29keXNlZS5jb20nO1xuXG4gICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgc2NyaXB0LnNyYyA9IG9uZVRydXN0U2NyaXB0U3JjO1xuICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ2NoYXJzZXQnLCAnVVRGLTgnKTtcbiAgICBpZiAodXNlUHJvZHVjdGlvbk9uZVRydXN0KSB7XG4gICAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdkYXRhLWRvbWFpbi1zY3JpcHQnLCAnOGE3OTJkODQtNTBhNS00YjY5LWIwODAtNjk1NGFkNGQ0NjA2Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZG9tYWluLXNjcmlwdCcsICc4YTc5MmQ4NC01MGE1LTRiNjktYjA4MC02OTU0YWQ0ZDQ2MDYtdGVzdCcpO1xuICAgIH1cblxuICAgIGNvbnN0IHNlY29uZFNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgIC8vIE9uZVRydXN0IGFza3MgdG8gYWRkIHRoaXNcbiAgICBzZWNvbmRTY3JpcHQuaW5uZXJIVE1MID0gJ2Z1bmN0aW9uIE9wdGFub25XcmFwcGVyKCkgeyB3aW5kb3cuZ2RwckNhbGxiYWNrKCkgfSc7XG5cbiAgICB3aW5kb3cuZ2RwckNhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgZG9TZXRHZHByQ29uc2VudExpc3Qod2luZG93Lk9uZXRydXN0QWN0aXZlR3JvdXBzKTtcbiAgICAgIGlmICh3aW5kb3cuT25ldHJ1c3RBY3RpdmVHcm91cHMuaW5kZXhPZignQzAwMDInKSAhPT0gLTEpIHtcbiAgICAgICAgY29uc3QgYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdPVVRCUkFJTicpWzBdO1xuICAgICAgICBpZiAoYWQgJiYgIXdpbmRvdy5uYWdzU2hvd24pIGFkLmNsYXNzTGlzdC5hZGQoJ1ZJU0lCTEUnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gJEZsb3dGaXhNZVxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAvLyAkRmxvd0ZpeE1lXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzZWNvbmRTY3JpcHQpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgIGRvY3VtZW50LmhlYWQucmVtb3ZlQ2hpbGQoc2Vjb25kU2NyaXB0KTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhlcnIpOyA8LS0gZGlzYWJsaW5nIHRoaXMgLi4uIGl0J3MgY2xvZ2dpbmcgdXAgU2VudHJ5IGxvZ3MuXG4gICAgICB9XG4gICAgfTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzIC0tIG9uZSB0aW1lIGFmdGVyIGxvY2FsZSBpcyBmZXRjaGVkXG4gIH0sIFtsb2NhbGVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHdpbmRvdy5uYWdzU2hvd24gPSBuYWdzU2hvd247XG4gICAgaWYgKG5hZ3NTaG93bikge1xuICAgICAgY29uc3QgYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdWSVNJQkxFJylbMF07XG4gICAgICBpZiAoYWQpIGFkLmNsYXNzTGlzdC5yZW1vdmUoJ1ZJU0lCTEUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdPVVRCUkFJTicpWzBdO1xuICAgICAgaWYgKGFkKSBhZC5jbGFzc0xpc3QuYWRkKCdWSVNJQkxFJyk7XG4gICAgfVxuICB9LCBbbmFnc1Nob3duXSk7XG5cbiAgLy8gcmVhZHkgZm9yIHN5bmMgc3luY3MsIGhvd2V2ZXIgYWZ0ZXIgc2lnbmluIHdoZW4gaGFzVmVyaWZpZWRFbWFpbCwgdGhhdCBzeW5jcyB0b28uXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gc2lnbkluU3luY1ByZWYgaXMgY2xlYXJlZCBhZnRlciBzaGFyZWRTdGF0ZSBsb29wLlxuICAgIGNvbnN0IHN5bmNMb29wV2l0aG91dEludGVydmFsID0gKCkgPT4gc3luY0xvb3AodHJ1ZSk7XG4gICAgaWYgKGhhc1NpZ25lZEluICYmIGhhc1ZlcmlmaWVkRW1haWwpIHtcbiAgICAgIC8vIEluIGNhc2Ugd2UgYXJlIHN5bmNpbmcuXG4gICAgICBzeW5jTG9vcCgpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgc3luY0xvb3BXaXRob3V0SW50ZXJ2YWwpO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgc3luY0xvb3BXaXRob3V0SW50ZXJ2YWwpO1xuICAgIH07XG4gIH0sIFtoYXNTaWduZWRJbiwgaGFzVmVyaWZpZWRFbWFpbCwgc3luY0xvb3BdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzeW5jRXJyb3IgJiYgaXNBdXRoZW50aWNhdGVkICYmICFwYXRobmFtZS5pbmNsdWRlcyhQQUdFUy5BVVRIX1dBTExFVF9QQVNTV09SRCkgJiYgIWN1cnJlbnRNb2RhbCkge1xuICAgICAgaGlzdG9yeS5wdXNoKGAvJC8ke1BBR0VTLkFVVEhfV0FMTEVUX1BBU1NXT1JEfT9yZWRpcmVjdD0ke3BhdGhuYW1lfWApO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFtzeW5jRXJyb3IsIHBhdGhuYW1lLCBpc0F1dGhlbnRpY2F0ZWRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChwcmVmc1JlYWR5ICYmIGlzQXV0aGVudGljYXRlZCAmJiAocGF0aG5hbWUgPT09ICcvJyB8fCBwYXRobmFtZSA9PT0gYC8kLyR7UEFHRVMuSEVMUH1gKSAmJiBhbm5vdW5jZW1lbnQgIT09ICcnKSB7XG4gICAgICBkb09wZW5Bbm5vdW5jZW1lbnRzKCk7XG4gICAgfVxuICB9LCBbYW5ub3VuY2VtZW50LCBpc0F1dGhlbnRpY2F0ZWQsIHBhdGhuYW1lLCBwcmVmc1JlYWR5XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB3aW5kb3cuY2xlYXJMYXN0Vmlld2VkQW5ub3VuY2VtZW50ID0gKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0NsZWFyaW5nIGhpc3RvcnkuIFBsZWFzZSB3YWl0IC4uLicpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGRvU2V0TGFzdFZpZXdlZEFubm91bmNlbWVudCgnY2xlYXInKTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gS2VlcCB0aGlzIGF0IHRoZSBlbmQgdG8gZW5zdXJlIGluaXRpYWwgc2V0dXAgZWZmZWN0cyBhcmUgcnVuIGZpcnN0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFoYXNTaWduZWRJbiAmJiBoYXNWZXJpZmllZEVtYWlsKSB7XG4gICAgICBzaWduSW4oKTtcbiAgICAgIHNldEhhc1NpZ25lZEluKHRydWUpO1xuICAgIH1cbiAgfSwgW2hhc1ZlcmlmaWVkRW1haWwsIHNpZ25JbiwgaGFzU2lnbmVkSW5dKTtcblxuICB1c2VEZWdyYWRlZFBlcmZvcm1hbmNlKHNldExicnlUdkFwaVN0YXR1cywgdXNlcik7XG5cbiAgLy8gdXNlQWRPdXRicmFpbihCb29sZWFuKGhhc1ByZW1pdW1QbHVzKSwgaXNBdXRoZW50aWNhdGVkLCBoaXN0b3J5Py5sb2NhdGlvbj8ucGF0aG5hbWUpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFzeW5jSXNMb2NrZWQpIHtcbiAgICAgIC8vIFdoZW4gbGFuZ3VhZ2UgaXMgY2hhbmdlZCBvciB0cmFuc2xhdGlvbnMgYXJlIGZldGNoZWQsIHdlIHJlbmRlci5cbiAgICAgIHNldExhbmdSZW5kZXJLZXkoRGF0ZS5ub3coKSk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHMgLS0gZG9uJ3QgcmVzcG9uZCB0byBzeW5jSXNMb2NrZWQsIGJ1dCBza2lwIGFjdGlvbiB3aGVuIGxvY2tlZC5cbiAgfSwgW2xhbmd1YWdlLCBsYW5ndWFnZXNdKTtcblxuICBjb25zdCBhcHBSZWYgPSBSZWFjdC51c2VDYWxsYmFjaygod3JhcHBlckVsZW1lbnQpID0+IHtcbiAgICBpZiAod3JhcHBlckVsZW1lbnQpIHtcbiAgICAgIFJlYWN0TW9kYWwuc2V0QXBwRWxlbWVudCh3cmFwcGVyRWxlbWVudCk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8gUmVxdWlyZSBhbiBpbnRlcm5hbC1hcGkgdXNlciBvbiBsYnJ5LnR2XG4gIC8vIFRoaXMgYWxzbyBwcmV2ZW50cyB0aGUgc2l0ZSBmcm9tIGxvYWRpbmcgaW4gdGhlIHVuLWF1dGhlZCBzdGF0ZSB3aGlsZSB3ZSB3YWl0IGZvciBpbnRlcm5hbC1hcGlzIHRvIHJldHVybiBmb3IgdGhlIGZpcnN0IHRpbWVcbiAgLy8gSXQncyBub3QgbmVlZGVkIG9uIGRlc2t0b3Agc2luY2UgdGhlcmUgaXMgbm8gdW4tYXV0aGVkIHN0YXRlXG4gIGlmICh1c2VyID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYWluLS1lbXB0eVwiPlxuICAgICAgICA8U3Bpbm5lciBkZWxheWVkIC8+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgaWYgKGNvbm5lY3Rpb25TdGF0dXMub25saW5lICYmIGxicnlUdkFwaVN0YXR1cyA9PT0gU1RBVFVTX0RPV04pIHtcbiAgICAvLyBUT0RPOiBSZW5hbWUgYFN5bmNGYXRhbEVycm9yYCBzaW5jZSBpdCBoYXMgbm90aGluZyB0byBkbyB3aXRoIHN5bmNpbmcuXG4gICAgcmV0dXJuIChcbiAgICAgIDxSZWFjdC5TdXNwZW5zZSBmYWxsYmFjaz17bnVsbH0+XG4gICAgICAgIDxTeW5jRmF0YWxFcnJvciBsYnJ5VHZBcGlTdGF0dXM9e2xicnlUdkFwaVN0YXR1c30gLz5cbiAgICAgIDwvUmVhY3QuU3VzcGVuc2U+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e01BSU5fV1JBUFBFUl9DTEFTU30gcmVmPXthcHBSZWZ9IGtleT17bGFuZ1JlbmRlcktleX0+XG4gICAgICB7bGJyeVR2QXBpU3RhdHVzID09PSBTVEFUVVNfRE9XTiA/IChcbiAgICAgICAgPFlyYmxcbiAgICAgICAgICBjbGFzc05hbWU9XCJtYWluLS1lbXB0eVwiXG4gICAgICAgICAgdGl0bGU9e19fKCdvZHlzZWUuY29tIGlzIGN1cnJlbnRseSBkb3duJyl9XG4gICAgICAgICAgc3VidGl0bGU9e19fKCdNeSB3aGVlbCBicm9rZSwgYnV0IHRoZSBnb29kIG5ld3MgaXMgdGhhdCBzb21lb25lIGZyb20gTEJSWSBpcyB3b3JraW5nIG9uIGl0LicpfVxuICAgICAgICAvPlxuICAgICAgKSA6IChcbiAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgIDxBZEJsb2NrVGVzdGVyIC8+XG4gICAgICAgICAgPEFkc1N0aWNreSB1cmk9e3VyaX0gLz5cbiAgICAgICAgICA8Um91dGVyIHVyaT17dXJpfSAvPlxuICAgICAgICAgIDxNb2RhbFJvdXRlciAvPlxuXG4gICAgICAgICAgPFJlYWN0LlN1c3BlbnNlIGZhbGxiYWNrPXtudWxsfT57cmVuZGVyRmlsZWRyb3AgJiYgPEZpbGVEcm9wIC8+fTwvUmVhY3QuU3VzcGVuc2U+XG5cbiAgICAgICAgICA8RmlsZVJlbmRlckZsb2F0aW5nIC8+XG5cbiAgICAgICAgICA8UmVhY3QuU3VzcGVuc2UgZmFsbGJhY2s9e251bGx9PlxuICAgICAgICAgICAge2lzRW5oYW5jZWRMYXlvdXQgJiYgPFlyYmwgY2xhc3NOYW1lPVwieXJibC0tZW5oYW5jZWRcIiAvPn1cblxuICAgICAgICAgICAgPFlvdXR1YmVXZWxjb21lIC8+XG4gICAgICAgICAgICB7IXNob3VsZEhpZGVOYWcgJiYgPE5hZ0NvbnRpbnVlRmlyc3RSdW4gLz59XG4gICAgICAgICAgICB7ZnJvbUxicnl0dlBhcmFtICYmICFzZWVuU3Vuc2VzdE1lc3NhZ2UgJiYgIXNob3VsZEhpZGVOYWcgJiYgKFxuICAgICAgICAgICAgICA8TmFnU3Vuc2V0IGVtYWlsPXtoYXNWZXJpZmllZEVtYWlsfSBvbkNsb3NlPXsoKSA9PiBzZXRTZWVuU3Vuc2V0TWVzc2FnZSh0cnVlKX0gLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7Z2V0U3RhdHVzTmFnKCl9XG4gICAgICAgICAgPC9SZWFjdC5TdXNwZW5zZT5cbiAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhSb3V0ZXIoQXBwKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUEsZ09BQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQTBDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUF3Q0E7QUFDQTtBQUNBO0FBMUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUEwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQS9DQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFzREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSEE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBUkE7QUFXQTtBQWRBO0FBZ0JBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQVZBO0FBYUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFiQTtBQW1CQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBTkE7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFQQTtBQVVBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFEQTtBQU9BO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQUNBO0FBREE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFEQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQUNBO0FBQ0E7QUFhQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQW5DQTtBQUNBO0FBQ0E7QUFxQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUNBO0FBcERBO0FBQUE7QUF5REE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBUkE7QUFhQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUZBO0FBREE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFEQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUhBO0FBUUE7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUUE7QUFDQTtBQUNBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../ui/component/app/view.jsx\n");

/***/ }),

/***/ "../ui/component/claimListDiscover/view.jsx":
/*!**************************************************!*\
  !*** ../ui/component/claimListDiscover/view.jsx ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ \"../config.js\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(config__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var constants_claim_search__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! constants/claim_search */ \"../ui/constants/claim_search.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router */ \"../node_modules/react-router/esm/react-router.js\");\n/* harmony import */ var constants_tags__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! constants/tags */ \"../ui/constants/tags.js\");\n/* harmony import */ var util_default_languages__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! util/default-languages */ \"../ui/util/default-languages.js\");\n/* harmony import */ var util_claim__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! util/claim */ \"../ui/util/claim.js\");\n/* harmony import */ var util_lbryURI__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! util/lbryURI */ \"../ui/util/lbryURI.js\");\n/* harmony import */ var component_button__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! component/button */ \"../ui/component/button/index.js\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! moment */ \"../node_modules/moment/moment.js\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var component_claimList__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! component/claimList */ \"../ui/component/claimList/index.js\");\n/* harmony import */ var component_claimPreview__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! component/claimPreview */ \"../ui/component/claimPreview/index.js\");\n/* harmony import */ var component_claimPreviewTile__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! component/claimPreviewTile */ \"../ui/component/claimPreviewTile/index.js\");\n/* harmony import */ var component_i18nMessage__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! component/i18nMessage */ \"../ui/component/i18nMessage/index.js\");\n/* harmony import */ var component_langFilterIndicator__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! component/langFilterIndicator */ \"../ui/component/langFilterIndicator/index.js\");\n/* harmony import */ var component_claimListHeader__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! component/claimListHeader */ \"../ui/component/claimListHeader/index.js\");\n/* harmony import */ var effects_use_fetch_view_count__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! effects/use-fetch-view-count */ \"../ui/effects/use-fetch-view-count.js\");\n/* harmony import */ var effects_use_resolve_pins__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! effects/use-resolve-pins */ \"../ui/effects/use-resolve-pins.js\");\n/* harmony import */ var effects_use_screensize__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! effects/use-screensize */ \"../ui/effects/use-screensize.js\");\n/* harmony import */ var effects_use_get_user_memberships__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! effects/use-get-user-memberships */ \"../ui/effects/use-get-user-memberships.js\");\n/* harmony import */ var effects_use_persistent_user_param__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! effects/use-persistent-user-param */ \"../ui/effects/use-persistent-user-param.js\");\n/* harmony import */ var effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! effects/use-persisted-state */ \"../ui/effects/use-persisted-state.js\");\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction ClaimListDiscover(props) {\n  var doClaimSearch = props.doClaimSearch,\n      claimSearchByQuery = props.claimSearchByQuery,\n      _props$showHeader = props.showHeader,\n      showHeader = _props$showHeader === void 0 ? true : _props$showHeader,\n      type = props.type,\n      claimSearchByQueryLastPageReached = props.claimSearchByQueryLastPageReached,\n      tags = props.tags,\n      notTags = props.notTags,\n      defaultTags = props.defaultTags,\n      loading = props.loading,\n      meta = props.meta,\n      subSection = props.subSection,\n      channelIds = props.channelIds,\n      excludedChannelIds = props.excludedChannelIds,\n      showNsfw = props.showNsfw,\n      hideReposts = props.hideReposts,\n      fetchViewCount = props.fetchViewCount,\n      history = props.history,\n      location = props.location,\n      mutedUris = props.mutedUris,\n      blockedUris = props.blockedUris,\n      hiddenNsfwMessage = props.hiddenNsfwMessage,\n      defaultOrderBy = props.defaultOrderBy,\n      sortBy = props.sortBy,\n      orderBy = props.orderBy,\n      headerLabel = props.headerLabel,\n      header = props.header,\n      name = props.name,\n      claimType = props.claimType,\n      defaultClaimType = props.defaultClaimType,\n      streamType = props.streamType,\n      defaultStreamType = props.defaultStreamType,\n      freshness = props.freshness,\n      _props$defaultFreshne = props.defaultFreshness,\n      defaultFreshness = _props$defaultFreshne === void 0 ? constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FRESH_WEEK\"] : _props$defaultFreshne,\n      renderProperties = props.renderProperties,\n      includeSupportAction = props.includeSupportAction,\n      repostedClaimId = props.repostedClaimId,\n      hideAdvancedFilter = props.hideAdvancedFilter,\n      _props$infiniteScroll = props.infiniteScroll,\n      infiniteScroll = _props$infiniteScroll === void 0 ? true : _props$infiniteScroll,\n      followedTags = props.followedTags,\n      injectedItem = props.injectedItem,\n      feeAmount = props.feeAmount,\n      uris = props.uris,\n      prefixUris = props.prefixUris,\n      pins = props.pins,\n      tileLayout = props.tileLayout,\n      _props$hideFilters = props.hideFilters,\n      hideFilters = _props$hideFilters === void 0 ? false : _props$hideFilters,\n      claimIds = props.claimIds,\n      maxPages = props.maxPages,\n      hideRepostsOverride = props.hideRepostsOverride,\n      languageSetting = props.languageSetting,\n      searchLanguages = props.searchLanguages,\n      searchInLanguage = props.searchInLanguage,\n      ignoreSearchInLanguage = props.ignoreSearchInLanguage,\n      limitClaimsPerChannel = props.limitClaimsPerChannel,\n      releaseTime = props.releaseTime,\n      scrollAnchor = props.scrollAnchor,\n      _props$showHiddenByUs = props.showHiddenByUser,\n      showHiddenByUser = _props$showHiddenByUs === void 0 ? false : _props$showHiddenByUs,\n      hasSource = props.hasSource,\n      hasNoSource = props.hasNoSource,\n      _props$isChannel = props.isChannel,\n      isChannel = _props$isChannel === void 0 ? false : _props$isChannel,\n      showNoSourceClaims = props.showNoSourceClaims,\n      empty = props.empty,\n      claimsByUri = props.claimsByUri,\n      claimsById = props.claimsById,\n      doFetchViewCount = props.doFetchViewCount,\n      _props$hideLayoutButt = props.hideLayoutButton,\n      hideLayoutButton = _props$hideLayoutButt === void 0 ? false : _props$hideLayoutButt,\n      loadedCallback = props.loadedCallback,\n      maxClaimRender = props.maxClaimRender,\n      _props$useSkeletonScr = props.useSkeletonScreen,\n      useSkeletonScreen = _props$useSkeletonScr === void 0 ? true : _props$useSkeletonScr,\n      _props$excludeUris = props.excludeUris,\n      excludeUris = _props$excludeUris === void 0 ? [] : _props$excludeUris,\n      doFetchUserMemberships = props.doFetchUserMemberships,\n      _props$swipeLayout = props.swipeLayout,\n      swipeLayout = _props$swipeLayout === void 0 ? false : _props$swipeLayout,\n      doResolveUris = props.doResolveUris,\n      doResolveClaimIds = props.doResolveClaimIds;\n  var resolvedPinUris = Object(effects_use_resolve_pins__WEBPACK_IMPORTED_MODULE_17__[\"default\"])({\n    pins: pins,\n    claimsById: claimsById,\n    doResolveClaimIds: doResolveClaimIds,\n    doResolveUris: doResolveUris\n  });\n  var didNavigateForward = history.action === 'PUSH';\n  var search = location.search;\n  var prevUris = react__WEBPACK_IMPORTED_MODULE_2___default.a.useRef();\n\n  var _React$useState = react__WEBPACK_IMPORTED_MODULE_2___default.a.useState(1),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      page = _React$useState2[0],\n      setPage = _React$useState2[1];\n\n  var _React$useState3 = react__WEBPACK_IMPORTED_MODULE_2___default.a.useState(),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      forceRefresh = _React$useState4[0],\n      setForceRefresh = _React$useState4[1];\n\n  var isLargeScreen = Object(effects_use_screensize__WEBPACK_IMPORTED_MODULE_18__[\"useIsLargeScreen\"])();\n  var followed = followedTags && followedTags.map(function (t) {\n    return t.name;\n  }) || [];\n  var urlParams = new URLSearchParams(search);\n  var tagsParam = // can be 'x,y,z' or 'x' or ['x','y'] or CS.CONSTANT\n  tags && getParamFromTags(tags) || urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"TAGS_KEY\"]) !== null && urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"TAGS_KEY\"]) || defaultTags && getParamFromTags(defaultTags);\n  var freshnessParam = freshness || urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FRESH_KEY\"]) || defaultFreshness;\n  var sortByParam = sortBy || urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"SORT_BY_KEY\"]) || constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"SORT_BY\"].NEWEST.key;\n  var mutedAndBlockedChannelIds = Array.from(new Set(mutedUris.concat(blockedUris).map(function (uri) {\n    return Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_7__[\"splitBySeparator\"])(uri)[1];\n  })));\n\n  var _React$useState5 = react__WEBPACK_IMPORTED_MODULE_2___default.a.useState([]),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      hiddenBuffer = _React$useState6[0],\n      setHiddenBuffer = _React$useState6[1];\n\n  var hideRepostsEffective = resolveHideReposts(hideReposts, hideRepostsOverride);\n  var langParam = urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"LANGUAGE_KEY\"]) || null;\n  var searchInSelectedLang = searchInLanguage && !ignoreSearchInLanguage;\n  var languageParams = Object(util_default_languages__WEBPACK_IMPORTED_MODULE_5__[\"resolveLangForClaimSearch\"])(languageSetting, searchInSelectedLang, searchLanguages, langParam);\n  var claimTypeParam = claimType || defaultClaimType || null;\n  var streamTypeParam = streamType || defaultStreamType || null;\n  var contentTypeParam = urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CONTENT_KEY\"]);\n\n  if (contentTypeParam) {\n    switch (contentTypeParam) {\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CLAIM_COLLECTION\"]:\n        claimTypeParam = contentTypeParam;\n        streamTypeParam = undefined;\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CLAIM_REPOST\"]:\n        claimTypeParam = contentTypeParam;\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CLAIM_CHANNEL\"]:\n        claimTypeParam = constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CLAIM_CHANNEL\"];\n        streamTypeParam = undefined;\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FILE_VIDEO\"]:\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FILE_AUDIO\"]:\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FILE_IMAGE\"]:\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FILE_MODEL\"]:\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FILE_BINARY\"]:\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FILE_DOCUMENT\"]:\n        streamTypeParam = contentTypeParam;\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CONTENT_ALL\"]:\n        claimTypeParam = undefined;\n        streamTypeParam = undefined;\n        break;\n\n      default:\n        console.log('Invalid or unhandled CONTENT_KEY:', contentTypeParam); // eslint-disable-line no-console\n\n        break;\n    }\n  }\n\n  var durationParam = Object(effects_use_persistent_user_param__WEBPACK_IMPORTED_MODULE_20__[\"default\"])([urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"DURATION_KEY\"]) || constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"DURATION_ALL\"]], 'durUser', null);\n\n  var _usePersistedState = Object(effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_21__[\"default\"])(\"durUserMinutes-\".concat(location.pathname), 5),\n      _usePersistedState2 = _slicedToArray(_usePersistedState, 1),\n      durationMinutes = _usePersistedState2[0];\n\n  var channelIdsInUrl = urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CHANNEL_IDS_KEY\"]);\n  var channelIdsParam = channelIdsInUrl ? channelIdsInUrl.split(',') : channelIds;\n  var excludedIdsParam = excludedChannelIds;\n  var feeAmountParam = urlParams.get('fee_amount') || feeAmount;\n  var originalPageSize = 12;\n  var dynamicPageSize = isLargeScreen ? Math.ceil(originalPageSize / 2 * 6) : Math.ceil(originalPageSize / 2 * 4);\n  var orderParam = Object(effects_use_persistent_user_param__WEBPACK_IMPORTED_MODULE_20__[\"default\"])([orderBy, urlParams.get(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_KEY\"]), defaultOrderBy], 'orderUser', constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_TRENDING\"]);\n  var options = {\n    page_size: dynamicPageSize,\n    page: page,\n    name: name,\n    claim_type: claimType || ['stream', 'repost', 'channel'],\n    // no_totals makes it so the sdk doesn't have to calculate total number pages for pagination\n    // it's faster, but we will need to remove it if we start using total_pages\n    no_totals: true,\n    not_channel_ids: isChannel ? undefined : mutedAndBlockedChannelIds,\n    not_tags: !showNsfw ? constants_tags__WEBPACK_IMPORTED_MODULE_4__[\"MATURE_TAGS\"] : [],\n    order_by: resolveOrderByOption(orderParam, sortByParam),\n    remove_duplicates: isChannel ? undefined : true\n  };\n\n  if (config__WEBPACK_IMPORTED_MODULE_0__[\"ENABLE_NO_SOURCE_CLAIMS\"] && hasNoSource) {\n    options.has_no_source = true;\n  } else if (hasSource || !config__WEBPACK_IMPORTED_MODULE_0__[\"ENABLE_NO_SOURCE_CLAIMS\"] && (!claimType || claimType === 'stream')) {\n    options.has_source = true;\n  }\n\n  if (limitClaimsPerChannel) {\n    options.limit_claims_per_channel = limitClaimsPerChannel;\n  }\n\n  if (feeAmountParam && claimType !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CLAIM_CHANNEL\"]) {\n    options.fee_amount = feeAmountParam;\n  }\n\n  if (claimIds) {\n    options.claim_ids = claimIds;\n  }\n\n  if (channelIdsParam) {\n    options.channel_ids = channelIdsParam;\n  }\n\n  if (excludedIdsParam) {\n    options.not_channel_ids = (options.not_channel_ids || []).concat(excludedIdsParam);\n  }\n\n  if (tagsParam) {\n    if (tagsParam !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"TAGS_ALL\"] && tagsParam !== '') {\n      if (tagsParam === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"TAGS_FOLLOWED\"]) {\n        options.any_tags = followed;\n      } else if (Array.isArray(tagsParam)) {\n        options.any_tags = tagsParam;\n      } else {\n        options.any_tags = tagsParam.split(',');\n      }\n    }\n  }\n\n  if (notTags) {\n    options.not_tags = options.not_tags.concat(notTags);\n  }\n\n  if (repostedClaimId) {\n    // SDK chokes on reposted_claim_id of null or false, needs to not be present if no value\n    options.reposted_claim_id = repostedClaimId;\n  } // IF release time, set it, else set fallback release times using the hack below.\n\n\n  if (releaseTime && claimTypeParam !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CLAIM_CHANNEL\"]) {\n    options.release_time = releaseTime;\n  } else if (claimTypeParam !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CLAIM_CHANNEL\"]) {\n    if (orderParam === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_TOP\"] && freshnessParam !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FRESH_ALL\"]) {\n      options.release_time = \">\".concat(Math.floor(moment__WEBPACK_IMPORTED_MODULE_9___default()().subtract(1, freshnessParam).startOf('hour').unix()));\n    } else if (orderParam === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_NEW\"] || orderParam === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_TRENDING\"]) {\n      // Warning - hack below\n      // If users are following more than 10 channels or tags, limit results to stuff less than a year old\n      // For more than 20, drop it down to 6 months\n      // This helps with timeout issues for users that are following a ton of stuff\n      // https://github.com/lbryio/lbry-sdk/issues/2420\n      if (options.channel_ids && options.channel_ids.length > 20 || options.any_tags && options.any_tags.length > 20) {\n        options.release_time = \">\".concat(Math.floor(moment__WEBPACK_IMPORTED_MODULE_9___default()().subtract(3, constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FRESH_MONTH\"]).startOf('week').unix()));\n      } else if (options.channel_ids && options.channel_ids.length > 10 || options.any_tags && options.any_tags.length > 10) {\n        options.release_time = \">\".concat(Math.floor(moment__WEBPACK_IMPORTED_MODULE_9___default()().subtract(1, constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"FRESH_YEAR\"]).startOf('week').unix()));\n      } else {\n        // Hack for at least the New page until https://github.com/lbryio/lbry-sdk/issues/2591 is fixed\n        options.release_time = \"<\".concat(Math.floor(moment__WEBPACK_IMPORTED_MODULE_9___default()().startOf('minute').unix()));\n      }\n    }\n  }\n\n  if (durationParam) {\n    switch (durationParam) {\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"DURATION_ALL\"]:\n        // Do nothing (no options needed)\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"DURATION_SHORT\"]:\n        options.duration = '<=240';\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"DURATION_LONG\"]:\n        options.duration = '>=1200';\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"DURATION_GT_EQ\"]:\n        options.duration = \">=\".concat((durationMinutes || 0) * 60);\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"DURATION_LT_EQ\"]:\n        options.duration = \"<=\".concat((durationMinutes || 0) * 60);\n        break;\n\n      default:\n        console.error('Unhandled duration: ' + durationParam);\n        break;\n    }\n  }\n\n  if (streamTypeParam && streamTypeParam !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CONTENT_ALL\"] && claimType !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CLAIM_CHANNEL\"]) {\n    options.stream_types = typeof streamTypeParam === 'string' ? [streamTypeParam] : streamTypeParam;\n  }\n\n  if (claimTypeParam) {\n    if (claimTypeParam !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"CONTENT_ALL\"]) {\n      if (Array.isArray(claimTypeParam)) {\n        options.claim_type = claimTypeParam;\n      } else {\n        options.claim_type = [claimTypeParam];\n      }\n    }\n  }\n\n  if (languageParams) {\n    if (languageParams !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"LANGUAGES_ALL\"]) {\n      options.any_languages = languageParams.split(',');\n    }\n  }\n\n  if (tagsParam) {\n    if (tagsParam !== constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"TAGS_ALL\"] && tagsParam !== '') {\n      if (tagsParam === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"TAGS_FOLLOWED\"]) {\n        options.any_tags = followed;\n      } else if (Array.isArray(tagsParam)) {\n        options.any_tags = tagsParam;\n      } else {\n        options.any_tags = tagsParam.split(',');\n      }\n    }\n  }\n\n  if (hideRepostsEffective && !options.reposted_claim_id) {\n    if (Array.isArray(options.claim_type)) {\n      if (options.claim_type.length > 1) {\n        options.claim_type = options.claim_type.filter(function (claimType) {\n          return claimType !== 'repost';\n        });\n      }\n    } else {\n      options.claim_type = ['stream', 'channel'];\n    }\n  }\n\n  var hasMatureTags = tagsParam && tagsParam.split(',').some(function (t) {\n    return constants_tags__WEBPACK_IMPORTED_MODULE_4__[\"MATURE_TAGS\"].includes(t);\n  });\n  var searchKey = Object(util_claim__WEBPACK_IMPORTED_MODULE_6__[\"createNormalizedClaimSearchKey\"])(options);\n  var claimSearchResult = claimSearchByQuery[searchKey];\n  var claimSearchResultLastPageReached = claimSearchByQueryLastPageReached[searchKey];\n  var isUnfetchedClaimSearch = claimSearchResult === undefined; // uncomment to fix an item on a page\n  //   const fixUri = 'lbry://@corbettreport#0/lbryodysee#5';\n  //   if (\n  //     orderParam === CS.ORDER_BY_NEW &&\n  //     claimSearchResult &&\n  //     claimSearchResult.length > 2 &&\n  //     window.location.pathname === '/$/rabbithole'\n  //   ) {\n  //     if (claimSearchResult.indexOf(fixUri) !== -1) {\n  //       claimSearchResult.splice(claimSearchResult.indexOf(fixUri), 1);\n  //     } else {\n  //       claimSearchResult.pop();\n  //     }\n  //     claimSearchResult.splice(2, 0, fixUri);\n  //   }\n\n  var _React$useState7 = react__WEBPACK_IMPORTED_MODULE_2___default.a.useState(null),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      prevOptions = _React$useState8[0],\n      setPrevOptions = _React$useState8[1];\n\n  if (!isJustScrollingToNewPage(prevOptions, options)) {\n    // --- New search, or search options changed.\n    setPrevOptions(options);\n\n    if (didNavigateForward) {\n      // --- Reset the page.\n      options.page = 1;\n      setPage(options.page);\n    } else if (claimSearchResult) {\n      // --- Update 'page' based on retrieved 'claimSearchResult'.\n      options.page = Math.ceil(claimSearchResult.length / dynamicPageSize);\n\n      if (options.page !== page) {\n        setPage(options.page);\n      }\n    }\n  }\n\n  var shouldPerformSearch = !uris && (claimSearchResult === undefined || didNavigateForward || !loading && !claimSearchResultLastPageReached && claimSearchResult && claimSearchResult.length && claimSearchResult.length < dynamicPageSize * options.page && claimSearchResult.length % dynamicPageSize === 0); // Don't use the query from createNormalizedClaimSearchKey for the effect since that doesn't include page & release_time\n\n  var optionsStringForEffect = JSON.stringify(options);\n  var timedOutMessage = react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"p\", null, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_i18nMessage__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n    tokens: {\n      again: react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_button__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n        button: \"link\",\n        label: __('try again in a few seconds.'),\n        onClick: function onClick() {\n          return setForceRefresh(Date.now());\n        }\n      })\n    }\n  }, \"Sorry, your request timed out. Modify your options or %again%\")), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"p\", null, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_i18nMessage__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n    tokens: {\n      contact_support: react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_button__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n        button: \"link\",\n        label: __('contact support'),\n        href: \"https://odysee.com/@OdyseeHelp:b?view=about\"\n      })\n    }\n  }, \"If you continue to have issues, please %contact_support%.\"))); // **************************************************************************\n  // **************************************************************************\n\n  var finalUris;\n\n  if (uris) {\n    // --- direct uris\n    finalUris = uris;\n    injectPinUrls(finalUris, orderParam, pins, resolvedPinUris);\n    finalUris = filterExcludedUris(finalUris, excludeUris);\n  } else {\n    // --- searched uris\n    if (isUnfetchedClaimSearch && prevUris.current) {\n      finalUris = prevUris.current;\n    } else {\n      finalUris = claimSearchResult;\n      injectPinUrls(finalUris, orderParam, pins, resolvedPinUris);\n      finalUris = filterExcludedUris(finalUris, excludeUris);\n      prevUris.current = finalUris;\n    }\n  } // **************************************************************************\n  // Helpers\n  // **************************************************************************\n  // Returns true if the change in 'options' indicate that we are simply scrolling\n  // down to a new page; false otherwise.\n\n\n  function isJustScrollingToNewPage(prevOptions, options) {\n    if (!prevOptions) {\n      // It's a new search, or we just popped back from a different view.\n      return false;\n    } // Compare every field except for 'page' and 'release_time'.\n    // There might be better ways to achieve this.\n\n\n    var tmpPrevOptions = _objectSpread({}, prevOptions);\n\n    tmpPrevOptions.page = -1;\n    tmpPrevOptions.release_time = '';\n\n    var tmpOptions = _objectSpread({}, options);\n\n    tmpOptions.page = -1;\n    tmpOptions.release_time = '';\n    return JSON.stringify(tmpOptions) === JSON.stringify(tmpPrevOptions);\n  }\n\n  function getParamFromTags(t) {\n    if (t === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"TAGS_ALL\"] || t === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"TAGS_FOLLOWED\"]) {\n      return t;\n    } else if (Array.isArray(t)) {\n      return t.join(',');\n    }\n  }\n\n  function handleScrollBottom() {\n    if (maxPages !== undefined && page === maxPages) {\n      return;\n    }\n\n    if (!loading && infiniteScroll) {\n      if (claimSearchResult && !claimSearchResultLastPageReached) {\n        setPage(page + 1);\n      }\n    }\n  }\n\n  function resolveHideReposts(hideRepostSetting, hideRepostOverride) {\n    if (hideRepostOverride === undefined || hideRepostOverride === null) {\n      return hideRepostSetting;\n    } else {\n      return hideRepostOverride;\n    }\n  }\n\n  function resolveOrderByOption(orderBy, sortBy) {\n    var order_by;\n\n    switch (orderBy) {\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_TRENDING\"]:\n        order_by = constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_TRENDING_VALUE\"];\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_NEW\"]:\n        order_by = constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_NEW_VALUE\"];\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_NEW_ASC\"]:\n        order_by = constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_NEW_ASC_VALUE\"];\n        break;\n\n      case constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_NAME_ASC\"]:\n        order_by = constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_NAME_ASC_VALUE\"];\n        break;\n\n      default:\n        order_by = constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_TOP_VALUE\"];\n    }\n\n    if (orderBy === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"ORDER_BY_NEW\"] && sortBy === constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"SORT_BY\"].OLDEST.key) {\n      return order_by.map(function (x) {\n        return \"\".concat(constants_claim_search__WEBPACK_IMPORTED_MODULE_1__[\"SORT_BY\"].OLDEST.opt).concat(x);\n      });\n    }\n\n    return order_by;\n  }\n\n  function injectPinUrls(uris, order, pins, resolvedPinUris) {\n    if (!pins || !uris || uris.length <= 2 || pins.onlyPinForOrder && pins.onlyPinForOrder !== order) {\n      return;\n    }\n\n    if (resolvedPinUris) {\n      resolvedPinUris.forEach(function (pin) {\n        if (uris.includes(pin)) {\n          uris.splice(uris.indexOf(pin), 1);\n        } else {\n          uris.pop();\n        }\n      });\n      uris.splice.apply(uris, [2, 0].concat(_toConsumableArray(resolvedPinUris)));\n    }\n  }\n\n  function filterExcludedUris(uris, excludeUris) {\n    if (uris && excludeUris && excludeUris.length) {\n      return uris.filter(function (uri) {\n        return !excludeUris.includes(uri);\n      });\n    }\n\n    return uris;\n  }\n\n  function onHidden(uri) {\n    if (hiddenBuffer.indexOf(uri) === -1) {\n      var newBuffer = hiddenBuffer;\n      newBuffer.push(uri);\n      setHiddenBuffer(newBuffer);\n    }\n  } // **************************************************************************\n  // **************************************************************************\n\n\n  Object(effects_use_fetch_view_count__WEBPACK_IMPORTED_MODULE_16__[\"default\"])(fetchViewCount, finalUris, claimsByUri, doFetchViewCount);\n  Object(effects_use_get_user_memberships__WEBPACK_IMPORTED_MODULE_19__[\"default\"])(true, finalUris, claimsByUri, doFetchUserMemberships);\n  react__WEBPACK_IMPORTED_MODULE_2___default.a.useEffect(function () {\n    if (shouldPerformSearch) {\n      var searchOptions = JSON.parse(optionsStringForEffect);\n      doClaimSearch(searchOptions);\n    }\n  }, [doClaimSearch, shouldPerformSearch, optionsStringForEffect, forceRefresh]);\n  var headerToUse = header || react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_claimListHeader__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n    channelIds: channelIds,\n    defaultTags: defaultTags,\n    tags: tags,\n    freshness: freshness,\n    defaultFreshness: defaultFreshness,\n    claimType: claimType,\n    streamType: streamType,\n    defaultStreamType: defaultStreamType,\n    feeAmount: feeAmount // ENABLE_PAID_CONTENT_DISCOVER or something\n    ,\n    orderBy: orderBy,\n    defaultOrderBy: defaultOrderBy,\n    hideAdvancedFilter: hideAdvancedFilter,\n    hasMatureTags: hasMatureTags,\n    hiddenNsfwMessage: hiddenNsfwMessage,\n    setPage: setPage,\n    tileLayout: tileLayout,\n    hideLayoutButton: hideLayoutButton,\n    hideFilters: hideFilters,\n    scrollAnchor: scrollAnchor\n  });\n  return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, null, headerLabel && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"label\", {\n    className: \"claim-list__header-label\"\n  }, headerLabel), tileLayout ? react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", null, !repostedClaimId && showHeader && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"section__header--actions\"\n  }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"section__actions\"\n  }, headerToUse, searchInSelectedLang && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_langFilterIndicator__WEBPACK_IMPORTED_MODULE_14__[\"default\"], null)), meta && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"section__actions--no-margin\"\n  }, meta)), subSection && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", null, subSection), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_claimList__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n    tileLayout: true,\n    loading: loading,\n    uris: finalUris,\n    prefixUris: prefixUris,\n    onScrollBottom: handleScrollBottom,\n    page: page,\n    pageSize: dynamicPageSize,\n    timedOutMessage: timedOutMessage,\n    renderProperties: renderProperties,\n    includeSupportAction: includeSupportAction,\n    injectedItem: injectedItem,\n    showHiddenByUser: showHiddenByUser,\n    searchOptions: options,\n    showNoSourceClaims: showNoSourceClaims,\n    empty: empty,\n    maxClaimRender: maxClaimRender,\n    loadedCallback: loadedCallback,\n    swipeLayout: swipeLayout,\n    onHidden: onHidden\n  }), loading && useSkeletonScreen && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"claim-grid\"\n  }, new Array(dynamicPageSize).fill(1).map(function (x, i) {\n    return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_claimPreviewTile__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n      key: i,\n      placeholder: \"loading\",\n      pulse: true\n    });\n  }))) : react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", null, showHeader && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"section__header--actions\"\n  }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"section__actions\"\n  }, headerToUse, searchInSelectedLang && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_langFilterIndicator__WEBPACK_IMPORTED_MODULE_14__[\"default\"], null)), meta && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"section__actions--no-margin\"\n  }, meta)), subSection && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", null, subSection), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_claimList__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n    type: type,\n    loading: loading,\n    uris: finalUris,\n    prefixUris: prefixUris,\n    onScrollBottom: handleScrollBottom,\n    page: page,\n    pageSize: dynamicPageSize,\n    timedOutMessage: timedOutMessage,\n    renderProperties: renderProperties,\n    includeSupportAction: includeSupportAction,\n    injectedItem: injectedItem,\n    showHiddenByUser: showHiddenByUser,\n    searchOptions: options,\n    showNoSourceClaims: hasNoSource || showNoSourceClaims,\n    empty: empty,\n    maxClaimRender: maxClaimRender,\n    loadedCallback: loadedCallback,\n    swipeLayout: swipeLayout,\n    onHidden: onHidden\n  }), loading && useSkeletonScreen && new Array(dynamicPageSize).fill(1).map(function (x, i) {\n    return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_claimPreview__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n      showNoSourceClaims: hasNoSource || showNoSourceClaims,\n      key: i,\n      placeholder: \"loading\",\n      type: type\n    });\n  })));\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_router__WEBPACK_IMPORTED_MODULE_3__[\"withRouter\"])(ClaimListDiscover));\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvY29tcG9uZW50L2NsYWltTGlzdERpc2NvdmVyL3ZpZXcuanN4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL3VpL2NvbXBvbmVudC9jbGFpbUxpc3REaXNjb3Zlci92aWV3LmpzeD8wN2Y4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5pbXBvcnQgeyBFTkFCTEVfTk9fU09VUkNFX0NMQUlNUyB9IGZyb20gJ2NvbmZpZyc7XG5pbXBvcnQgdHlwZSB7IE5vZGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgKiBhcyBDUyBmcm9tICdjb25zdGFudHMvY2xhaW1fc2VhcmNoJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB3aXRoUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcbmltcG9ydCB7IE1BVFVSRV9UQUdTIH0gZnJvbSAnY29uc3RhbnRzL3RhZ3MnO1xuaW1wb3J0IHsgcmVzb2x2ZUxhbmdGb3JDbGFpbVNlYXJjaCB9IGZyb20gJ3V0aWwvZGVmYXVsdC1sYW5ndWFnZXMnO1xuaW1wb3J0IHsgY3JlYXRlTm9ybWFsaXplZENsYWltU2VhcmNoS2V5IH0gZnJvbSAndXRpbC9jbGFpbSc7XG5pbXBvcnQgeyBzcGxpdEJ5U2VwYXJhdG9yIH0gZnJvbSAndXRpbC9sYnJ5VVJJJztcbmltcG9ydCBCdXR0b24gZnJvbSAnY29tcG9uZW50L2J1dHRvbic7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgQ2xhaW1MaXN0IGZyb20gJ2NvbXBvbmVudC9jbGFpbUxpc3QnO1xuaW1wb3J0IENsYWltUHJldmlldyBmcm9tICdjb21wb25lbnQvY2xhaW1QcmV2aWV3JztcbmltcG9ydCBDbGFpbVByZXZpZXdUaWxlIGZyb20gJ2NvbXBvbmVudC9jbGFpbVByZXZpZXdUaWxlJztcbmltcG9ydCBJMThuTWVzc2FnZSBmcm9tICdjb21wb25lbnQvaTE4bk1lc3NhZ2UnO1xuaW1wb3J0IExhbmdGaWx0ZXJJbmRpY2F0b3IgZnJvbSAnY29tcG9uZW50L2xhbmdGaWx0ZXJJbmRpY2F0b3InO1xuaW1wb3J0IENsYWltTGlzdEhlYWRlciBmcm9tICdjb21wb25lbnQvY2xhaW1MaXN0SGVhZGVyJztcbmltcG9ydCB1c2VGZXRjaFZpZXdDb3VudCBmcm9tICdlZmZlY3RzL3VzZS1mZXRjaC12aWV3LWNvdW50JztcbmltcG9ydCB1c2VSZXNvbHZlUGlucyBmcm9tICdlZmZlY3RzL3VzZS1yZXNvbHZlLXBpbnMnO1xuaW1wb3J0IHsgdXNlSXNMYXJnZVNjcmVlbiB9IGZyb20gJ2VmZmVjdHMvdXNlLXNjcmVlbnNpemUnO1xuaW1wb3J0IHVzZUdldFVzZXJNZW1iZXJzaGlwcyBmcm9tICdlZmZlY3RzL3VzZS1nZXQtdXNlci1tZW1iZXJzaGlwcyc7XG5pbXBvcnQgdXNlUGVyc2lzdGVudFVzZXJQYXJhbSBmcm9tICdlZmZlY3RzL3VzZS1wZXJzaXN0ZW50LXVzZXItcGFyYW0nO1xuaW1wb3J0IHVzZVBlcnNpc3RlZFN0YXRlIGZyb20gJ2VmZmVjdHMvdXNlLXBlcnNpc3RlZC1zdGF0ZSc7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHVyaXM6IEFycmF5PHN0cmluZz4sXG4gIHByZWZpeFVyaXM/OiBBcnJheTxzdHJpbmc+LFxuICBwaW5zPzogeyB1cmxzPzogQXJyYXk8c3RyaW5nPiwgY2xhaW1JZHM/OiBBcnJheTxzdHJpbmc+LCBvbmx5UGluRm9yT3JkZXI/OiBzdHJpbmcgfSxcbiAgbmFtZT86IHN0cmluZyxcbiAgdHlwZTogc3RyaW5nLFxuICBwYWdlU2l6ZT86IG51bWJlcixcblxuICBmZXRjaFZpZXdDb3VudD86IGJvb2xlYW4sXG4gIGhpZGVSZXBvc3RzT3ZlcnJpZGU/OiBib29sZWFuLCAvLyB1bmRlZmluZWQgPSB1c2UgU0VUVElOR1MuSElERV9SRVBPU1RTOyB0cnVlL2ZhbHNlOiB1c2UgdGhpcy5cbiAgaGFzTm9Tb3VyY2U/OiBib29sZWFuLFxuICBoYXNTb3VyY2U/OiBib29sZWFuLFxuICBoaWRlQWR2YW5jZWRGaWx0ZXI/OiBib29sZWFuLFxuICBoaWRlRmlsdGVycz86IGJvb2xlYW4sXG4gIGluY2x1ZGVTdXBwb3J0QWN0aW9uPzogYm9vbGVhbixcbiAgaW5maW5pdGVTY3JvbGw/OiBCb29sZWFuLFxuICBpc0NoYW5uZWw/OiBib29sZWFuLFxuICBwZXJzb25hbFZpZXc6IGJvb2xlYW4sXG4gIHNob3dIZWFkZXI6IGJvb2xlYW4sXG4gIHNob3dIaWRkZW5CeVVzZXI/OiBib29sZWFuLFxuICBzaG93Tm9Tb3VyY2VDbGFpbXM/OiBib29sZWFuLFxuICB0aWxlTGF5b3V0OiBib29sZWFuLFxuICBzZWFyY2hMYW5ndWFnZXM/OiBBcnJheTxzdHJpbmc+LFxuICBpZ25vcmVTZWFyY2hJbkxhbmd1YWdlPzogYm9vbGVhbiwgLy8gTmVnYXRlIHRoZSByZWR1eCBzZXR0aW5nIHdoZXJlIGl0IGRvZXNuJ3QgbWFrZSBzZW5zZS5cblxuICBvcmRlckJ5PzogQXJyYXk8c3RyaW5nPiwgLy8gVHJlbmRpbmcsIE5ldywgVG9wXG4gIGRlZmF1bHRPcmRlckJ5Pzogc3RyaW5nLFxuICBzb3J0Qnk/OiBBcnJheTxzdHJpbmc+LCAvLyBOZXdlc3QgRmlyc3QsIE9sZGVzdCBGaXJzdFxuICBmcmVzaG5lc3M/OiBzdHJpbmcsXG4gIGRlZmF1bHRGcmVzaG5lc3M/OiBzdHJpbmcsXG5cbiAgdGFnczogc3RyaW5nLCAvLyB0aGVzZSBhcmUganVzdCBnb2luZyB0byBiZSBzdHJpbmcuIHBhc3MgYSBDU1YgaWYgeW91IHdhbnQgbXVsdGlcbiAgbm90VGFncz86IEFycmF5PHN0cmluZz4sXG4gIGRlZmF1bHRUYWdzOiBzdHJpbmcsXG5cbiAgY2xhaW1UeXBlPzogc3RyaW5nIHwgQXJyYXk8c3RyaW5nPixcbiAgZGVmYXVsdENsYWltVHlwZT86IEFycmF5PHN0cmluZz4sXG5cbiAgc3RyZWFtVHlwZT86IHN0cmluZyB8IEFycmF5PHN0cmluZz4sXG4gIGRlZmF1bHRTdHJlYW1UeXBlPzogc3RyaW5nIHwgQXJyYXk8c3RyaW5nPixcblxuICBlbXB0eT86IHN0cmluZyxcbiAgZmVlQW1vdW50Pzogc3RyaW5nLFxuICByZWxlYXNlVGltZT86IHN0cmluZyxcbiAgcmVwb3N0ZWRDbGFpbUlkPzogc3RyaW5nLFxuICBzY3JvbGxBbmNob3I/OiBzdHJpbmcsXG4gIG1heFBhZ2VzPzogbnVtYmVyLFxuICBsaW1pdENsYWltc1BlckNoYW5uZWw/OiBudW1iZXIsXG5cbiAgY2hhbm5lbElkcz86IEFycmF5PHN0cmluZz4sXG4gIGV4Y2x1ZGVkQ2hhbm5lbElkcz86IEFycmF5PHN0cmluZz4sXG4gIGNsYWltSWRzPzogQXJyYXk8c3RyaW5nPixcbiAgc3Vic2NyaWJlZENoYW5uZWxzOiBBcnJheTxTdWJzY3JpcHRpb24+LFxuXG4gIGhlYWRlcj86IE5vZGUsXG4gIGhlYWRlckxhYmVsPzogc3RyaW5nIHwgTm9kZSxcbiAgaGlkZGVuTnNmd01lc3NhZ2U/OiBOb2RlLFxuICBpbmplY3RlZEl0ZW0/OiBMaXN0SW5qZWN0ZWRJdGVtLFxuICBtZXRhPzogTm9kZSxcbiAgc3ViU2VjdGlvbj86IE5vZGUsIC8vIEFkZGl0aW9uYWwgc2VjdGlvbiBiZWxvdyBbSGVhZGVyfE1ldGFdXG4gIHJlbmRlclByb3BlcnRpZXM/OiAoQ2xhaW0pID0+IE5vZGUsXG5cbiAgaGlzdG9yeTogeyBhY3Rpb246IHN0cmluZywgcHVzaDogKHN0cmluZykgPT4gdm9pZCwgcmVwbGFjZTogKHN0cmluZykgPT4gdm9pZCB9LFxuICBsb2NhdGlvbjogeyBzZWFyY2g6IHN0cmluZywgcGF0aG5hbWU6IHN0cmluZyB9LFxuXG4gIC8vIC0tLSBzZWxlY3QgLS0tXG4gIGZvbGxvd2VkVGFncz86IEFycmF5PFRhZz4sXG4gIGNsYWltU2VhcmNoQnlRdWVyeTogeyBbc3RyaW5nXTogQXJyYXk8c3RyaW5nPiB9LFxuICBjbGFpbVNlYXJjaEJ5UXVlcnlMYXN0UGFnZVJlYWNoZWQ6IHsgW3N0cmluZ106IGJvb2xlYW4gfSxcbiAgY2xhaW1zQnlVcmk6IHsgW3N0cmluZ106IGFueSB9LFxuICBjbGFpbXNCeUlkOiB7IFtzdHJpbmddOiBhbnkgfSxcbiAgbG9hZGluZzogYm9vbGVhbixcbiAgc2hvd05zZnc6IGJvb2xlYW4sXG4gIGhpZGVSZXBvc3RzOiBib29sZWFuLFxuICBsYW5ndWFnZVNldHRpbmc6IHN0cmluZyxcbiAgbXV0ZWRVcmlzOiBBcnJheTxzdHJpbmc+LFxuICBibG9ja2VkVXJpczogQXJyYXk8c3RyaW5nPixcbiAgc2VhcmNoSW5MYW5ndWFnZTogYm9vbGVhbixcblxuICAvLyAtLS0gcGVyZm9ybSAtLS1cbiAgZG9DbGFpbVNlYXJjaDogKHt9KSA9PiB2b2lkLFxuICBkb0ZldGNoVmlld0NvdW50OiAoY2xhaW1JZENzdjogc3RyaW5nKSA9PiB2b2lkLFxuICBkb0ZldGNoVXNlck1lbWJlcnNoaXBzOiAoY2xhaW1JZENzdjogc3RyaW5nKSA9PiB2b2lkLFxuICBkb1Jlc29sdmVDbGFpbUlkczogKEFycmF5PHN0cmluZz4pID0+IFByb21pc2U8YW55PixcbiAgZG9SZXNvbHZlVXJpczogKEFycmF5PHN0cmluZz4sIGJvb2xlYW4pID0+IFByb21pc2U8YW55PixcblxuICBoaWRlTGF5b3V0QnV0dG9uPzogYm9vbGVhbixcbiAgbG9hZGVkQ2FsbGJhY2s/OiAobnVtYmVyKSA9PiB2b2lkLFxuICBtYXhDbGFpbVJlbmRlcj86IG51bWJlcixcbiAgdXNlU2tlbGV0b25TY3JlZW4/OiBib29sZWFuLFxuICBleGNsdWRlVXJpcz86IEFycmF5PHN0cmluZz4sXG5cbiAgc3dpcGVMYXlvdXQ6IGJvb2xlYW4sXG59O1xuXG5mdW5jdGlvbiBDbGFpbUxpc3REaXNjb3Zlcihwcm9wczogUHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGRvQ2xhaW1TZWFyY2gsXG4gICAgY2xhaW1TZWFyY2hCeVF1ZXJ5LFxuICAgIHNob3dIZWFkZXIgPSB0cnVlLFxuICAgIHR5cGUsXG4gICAgY2xhaW1TZWFyY2hCeVF1ZXJ5TGFzdFBhZ2VSZWFjaGVkLFxuICAgIHRhZ3MsXG4gICAgbm90VGFncyxcbiAgICBkZWZhdWx0VGFncyxcbiAgICBsb2FkaW5nLFxuICAgIG1ldGEsXG4gICAgc3ViU2VjdGlvbixcbiAgICBjaGFubmVsSWRzLFxuICAgIGV4Y2x1ZGVkQ2hhbm5lbElkcyxcbiAgICBzaG93TnNmdyxcbiAgICBoaWRlUmVwb3N0cyxcbiAgICBmZXRjaFZpZXdDb3VudCxcbiAgICBoaXN0b3J5LFxuICAgIGxvY2F0aW9uLFxuICAgIG11dGVkVXJpcyxcbiAgICBibG9ja2VkVXJpcyxcbiAgICBoaWRkZW5Oc2Z3TWVzc2FnZSxcbiAgICBkZWZhdWx0T3JkZXJCeSxcbiAgICBzb3J0QnksXG4gICAgb3JkZXJCeSxcbiAgICBoZWFkZXJMYWJlbCxcbiAgICBoZWFkZXIsXG4gICAgbmFtZSxcbiAgICBjbGFpbVR5cGUsXG4gICAgZGVmYXVsdENsYWltVHlwZSxcbiAgICBzdHJlYW1UeXBlLFxuICAgIGRlZmF1bHRTdHJlYW1UeXBlLFxuICAgIGZyZXNobmVzcyxcbiAgICBkZWZhdWx0RnJlc2huZXNzID0gQ1MuRlJFU0hfV0VFSyxcbiAgICByZW5kZXJQcm9wZXJ0aWVzLFxuICAgIGluY2x1ZGVTdXBwb3J0QWN0aW9uLFxuICAgIHJlcG9zdGVkQ2xhaW1JZCxcbiAgICBoaWRlQWR2YW5jZWRGaWx0ZXIsXG4gICAgaW5maW5pdGVTY3JvbGwgPSB0cnVlLFxuICAgIGZvbGxvd2VkVGFncyxcbiAgICBpbmplY3RlZEl0ZW0sXG4gICAgZmVlQW1vdW50LFxuICAgIHVyaXMsXG4gICAgcHJlZml4VXJpcyxcbiAgICBwaW5zLFxuICAgIHRpbGVMYXlvdXQsXG4gICAgaGlkZUZpbHRlcnMgPSBmYWxzZSxcbiAgICBjbGFpbUlkcyxcbiAgICBtYXhQYWdlcyxcbiAgICBoaWRlUmVwb3N0c092ZXJyaWRlLFxuICAgIGxhbmd1YWdlU2V0dGluZyxcbiAgICBzZWFyY2hMYW5ndWFnZXMsXG4gICAgc2VhcmNoSW5MYW5ndWFnZSxcbiAgICBpZ25vcmVTZWFyY2hJbkxhbmd1YWdlLFxuICAgIGxpbWl0Q2xhaW1zUGVyQ2hhbm5lbCxcbiAgICByZWxlYXNlVGltZSxcbiAgICBzY3JvbGxBbmNob3IsXG4gICAgc2hvd0hpZGRlbkJ5VXNlciA9IGZhbHNlLFxuICAgIGhhc1NvdXJjZSxcbiAgICBoYXNOb1NvdXJjZSxcbiAgICBpc0NoYW5uZWwgPSBmYWxzZSxcbiAgICBzaG93Tm9Tb3VyY2VDbGFpbXMsXG4gICAgZW1wdHksXG4gICAgY2xhaW1zQnlVcmksXG4gICAgY2xhaW1zQnlJZCxcbiAgICBkb0ZldGNoVmlld0NvdW50LFxuICAgIGhpZGVMYXlvdXRCdXR0b24gPSBmYWxzZSxcbiAgICBsb2FkZWRDYWxsYmFjayxcbiAgICBtYXhDbGFpbVJlbmRlcixcbiAgICB1c2VTa2VsZXRvblNjcmVlbiA9IHRydWUsXG4gICAgZXhjbHVkZVVyaXMgPSBbXSxcbiAgICBkb0ZldGNoVXNlck1lbWJlcnNoaXBzLFxuICAgIHN3aXBlTGF5b3V0ID0gZmFsc2UsXG4gICAgZG9SZXNvbHZlVXJpcyxcbiAgICBkb1Jlc29sdmVDbGFpbUlkcyxcbiAgfSA9IHByb3BzO1xuXG4gIGNvbnN0IHJlc29sdmVkUGluVXJpcyA9IHVzZVJlc29sdmVQaW5zKHsgcGlucywgY2xhaW1zQnlJZCwgZG9SZXNvbHZlQ2xhaW1JZHMsIGRvUmVzb2x2ZVVyaXMgfSk7XG4gIGNvbnN0IGRpZE5hdmlnYXRlRm9yd2FyZCA9IGhpc3RvcnkuYWN0aW9uID09PSAnUFVTSCc7XG4gIGNvbnN0IHsgc2VhcmNoIH0gPSBsb2NhdGlvbjtcbiAgY29uc3QgcHJldlVyaXMgPSBSZWFjdC51c2VSZWYoKTtcbiAgY29uc3QgW3BhZ2UsIHNldFBhZ2VdID0gUmVhY3QudXNlU3RhdGUoMSk7XG4gIGNvbnN0IFtmb3JjZVJlZnJlc2gsIHNldEZvcmNlUmVmcmVzaF0gPSBSZWFjdC51c2VTdGF0ZSgpO1xuICBjb25zdCBpc0xhcmdlU2NyZWVuID0gdXNlSXNMYXJnZVNjcmVlbigpO1xuICBjb25zdCBmb2xsb3dlZCA9IChmb2xsb3dlZFRhZ3MgJiYgZm9sbG93ZWRUYWdzLm1hcCgodCkgPT4gdC5uYW1lKSkgfHwgW107XG4gIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoc2VhcmNoKTtcbiAgY29uc3QgdGFnc1BhcmFtID0gLy8gY2FuIGJlICd4LHkseicgb3IgJ3gnIG9yIFsneCcsJ3knXSBvciBDUy5DT05TVEFOVFxuICAgICh0YWdzICYmIGdldFBhcmFtRnJvbVRhZ3ModGFncykpIHx8XG4gICAgKHVybFBhcmFtcy5nZXQoQ1MuVEFHU19LRVkpICE9PSBudWxsICYmIHVybFBhcmFtcy5nZXQoQ1MuVEFHU19LRVkpKSB8fFxuICAgIChkZWZhdWx0VGFncyAmJiBnZXRQYXJhbUZyb21UYWdzKGRlZmF1bHRUYWdzKSk7XG4gIGNvbnN0IGZyZXNobmVzc1BhcmFtID0gZnJlc2huZXNzIHx8IHVybFBhcmFtcy5nZXQoQ1MuRlJFU0hfS0VZKSB8fCBkZWZhdWx0RnJlc2huZXNzO1xuICBjb25zdCBzb3J0QnlQYXJhbSA9IHNvcnRCeSB8fCB1cmxQYXJhbXMuZ2V0KENTLlNPUlRfQllfS0VZKSB8fCBDUy5TT1JUX0JZLk5FV0VTVC5rZXk7XG4gIGNvbnN0IG11dGVkQW5kQmxvY2tlZENoYW5uZWxJZHMgPSBBcnJheS5mcm9tKFxuICAgIG5ldyBTZXQobXV0ZWRVcmlzLmNvbmNhdChibG9ja2VkVXJpcykubWFwKCh1cmkpID0+IHNwbGl0QnlTZXBhcmF0b3IodXJpKVsxXSkpXG4gICk7XG4gIGNvbnN0IFtoaWRkZW5CdWZmZXIsIHNldEhpZGRlbkJ1ZmZlcl0gPSBSZWFjdC51c2VTdGF0ZShbXSk7XG4gIGNvbnN0IGhpZGVSZXBvc3RzRWZmZWN0aXZlID0gcmVzb2x2ZUhpZGVSZXBvc3RzKGhpZGVSZXBvc3RzLCBoaWRlUmVwb3N0c092ZXJyaWRlKTtcblxuICBjb25zdCBsYW5nUGFyYW0gPSB1cmxQYXJhbXMuZ2V0KENTLkxBTkdVQUdFX0tFWSkgfHwgbnVsbDtcbiAgY29uc3Qgc2VhcmNoSW5TZWxlY3RlZExhbmcgPSBzZWFyY2hJbkxhbmd1YWdlICYmICFpZ25vcmVTZWFyY2hJbkxhbmd1YWdlO1xuICBjb25zdCBsYW5ndWFnZVBhcmFtcyA9IHJlc29sdmVMYW5nRm9yQ2xhaW1TZWFyY2gobGFuZ3VhZ2VTZXR0aW5nLCBzZWFyY2hJblNlbGVjdGVkTGFuZywgc2VhcmNoTGFuZ3VhZ2VzLCBsYW5nUGFyYW0pO1xuXG4gIGxldCBjbGFpbVR5cGVQYXJhbSA9IGNsYWltVHlwZSB8fCBkZWZhdWx0Q2xhaW1UeXBlIHx8IG51bGw7XG4gIGxldCBzdHJlYW1UeXBlUGFyYW0gPSBzdHJlYW1UeXBlIHx8IGRlZmF1bHRTdHJlYW1UeXBlIHx8IG51bGw7XG5cbiAgY29uc3QgY29udGVudFR5cGVQYXJhbSA9IHVybFBhcmFtcy5nZXQoQ1MuQ09OVEVOVF9LRVkpO1xuICBpZiAoY29udGVudFR5cGVQYXJhbSkge1xuICAgIHN3aXRjaCAoY29udGVudFR5cGVQYXJhbSkge1xuICAgICAgY2FzZSBDUy5DTEFJTV9DT0xMRUNUSU9OOlxuICAgICAgICBjbGFpbVR5cGVQYXJhbSA9IGNvbnRlbnRUeXBlUGFyYW07XG4gICAgICAgIHN0cmVhbVR5cGVQYXJhbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENTLkNMQUlNX1JFUE9TVDpcbiAgICAgICAgY2xhaW1UeXBlUGFyYW0gPSBjb250ZW50VHlwZVBhcmFtO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBDUy5DTEFJTV9DSEFOTkVMOlxuICAgICAgICBjbGFpbVR5cGVQYXJhbSA9IENTLkNMQUlNX0NIQU5ORUw7XG4gICAgICAgIHN0cmVhbVR5cGVQYXJhbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQ1MuRklMRV9WSURFTzpcbiAgICAgIGNhc2UgQ1MuRklMRV9BVURJTzpcbiAgICAgIGNhc2UgQ1MuRklMRV9JTUFHRTpcbiAgICAgIGNhc2UgQ1MuRklMRV9NT0RFTDpcbiAgICAgIGNhc2UgQ1MuRklMRV9CSU5BUlk6XG4gICAgICBjYXNlIENTLkZJTEVfRE9DVU1FTlQ6XG4gICAgICAgIHN0cmVhbVR5cGVQYXJhbSA9IGNvbnRlbnRUeXBlUGFyYW07XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIENTLkNPTlRFTlRfQUxMOlxuICAgICAgICBjbGFpbVR5cGVQYXJhbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgc3RyZWFtVHlwZVBhcmFtID0gdW5kZWZpbmVkO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29uc29sZS5sb2coJ0ludmFsaWQgb3IgdW5oYW5kbGVkIENPTlRFTlRfS0VZOicsIGNvbnRlbnRUeXBlUGFyYW0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgZHVyYXRpb25QYXJhbSA9IHVzZVBlcnNpc3RlbnRVc2VyUGFyYW0oW3VybFBhcmFtcy5nZXQoQ1MuRFVSQVRJT05fS0VZKSB8fCBDUy5EVVJBVElPTl9BTExdLCAnZHVyVXNlcicsIG51bGwpO1xuICBjb25zdCBbZHVyYXRpb25NaW51dGVzXSA9IHVzZVBlcnNpc3RlZFN0YXRlKGBkdXJVc2VyTWludXRlcy0ke2xvY2F0aW9uLnBhdGhuYW1lfWAsIDUpO1xuICBjb25zdCBjaGFubmVsSWRzSW5VcmwgPSB1cmxQYXJhbXMuZ2V0KENTLkNIQU5ORUxfSURTX0tFWSk7XG4gIGNvbnN0IGNoYW5uZWxJZHNQYXJhbSA9IGNoYW5uZWxJZHNJblVybCA/IGNoYW5uZWxJZHNJblVybC5zcGxpdCgnLCcpIDogY2hhbm5lbElkcztcbiAgY29uc3QgZXhjbHVkZWRJZHNQYXJhbSA9IGV4Y2x1ZGVkQ2hhbm5lbElkcztcbiAgY29uc3QgZmVlQW1vdW50UGFyYW0gPSB1cmxQYXJhbXMuZ2V0KCdmZWVfYW1vdW50JykgfHwgZmVlQW1vdW50O1xuICBjb25zdCBvcmlnaW5hbFBhZ2VTaXplID0gMTI7XG4gIGNvbnN0IGR5bmFtaWNQYWdlU2l6ZSA9IGlzTGFyZ2VTY3JlZW4gPyBNYXRoLmNlaWwoKG9yaWdpbmFsUGFnZVNpemUgLyAyKSAqIDYpIDogTWF0aC5jZWlsKChvcmlnaW5hbFBhZ2VTaXplIC8gMikgKiA0KTtcbiAgY29uc3Qgb3JkZXJQYXJhbSA9IHVzZVBlcnNpc3RlbnRVc2VyUGFyYW0oXG4gICAgW29yZGVyQnksIHVybFBhcmFtcy5nZXQoQ1MuT1JERVJfQllfS0VZKSwgZGVmYXVsdE9yZGVyQnldLFxuICAgICdvcmRlclVzZXInLFxuICAgIENTLk9SREVSX0JZX1RSRU5ESU5HXG4gICk7XG5cbiAgbGV0IG9wdGlvbnM6IHtcbiAgICBwYWdlX3NpemU6IG51bWJlcixcbiAgICBwYWdlOiBudW1iZXIsXG4gICAgbm9fdG90YWxzOiBib29sZWFuLFxuICAgIGFueV90YWdzPzogQXJyYXk8c3RyaW5nPixcbiAgICBhbnlfbGFuZ3VhZ2VzPzogQXJyYXk8c3RyaW5nPixcbiAgICBub3RfdGFnczogQXJyYXk8c3RyaW5nPixcbiAgICBjaGFubmVsX2lkcz86IEFycmF5PHN0cmluZz4sXG4gICAgY2xhaW1faWRzPzogQXJyYXk8c3RyaW5nPixcbiAgICBub3RfY2hhbm5lbF9pZHM/OiBBcnJheTxzdHJpbmc+LFxuICAgIG9yZGVyX2J5OiBBcnJheTxzdHJpbmc+LFxuICAgIHJlbGVhc2VfdGltZT86IHN0cmluZyxcbiAgICBjbGFpbV90eXBlPzogc3RyaW5nIHwgQXJyYXk8c3RyaW5nPixcbiAgICBuYW1lPzogc3RyaW5nLFxuICAgIGR1cmF0aW9uPzogc3RyaW5nLFxuICAgIHJlcG9zdGVkX2NsYWltX2lkPzogc3RyaW5nLFxuICAgIHN0cmVhbV90eXBlcz86IGFueSxcbiAgICBmZWVfYW1vdW50Pzogc3RyaW5nLFxuICAgIGhhc19zb3VyY2U/OiBib29sZWFuLFxuICAgIGhhc19ub19zb3VyY2U/OiBib29sZWFuLFxuICAgIGxpbWl0X2NsYWltc19wZXJfY2hhbm5lbD86IG51bWJlcixcbiAgICByZW1vdmVfZHVwbGljYXRlcz86IGJvb2xlYW4sXG4gIH0gPSB7XG4gICAgcGFnZV9zaXplOiBkeW5hbWljUGFnZVNpemUsXG4gICAgcGFnZSxcbiAgICBuYW1lLFxuICAgIGNsYWltX3R5cGU6IGNsYWltVHlwZSB8fCBbJ3N0cmVhbScsICdyZXBvc3QnLCAnY2hhbm5lbCddLFxuICAgIC8vIG5vX3RvdGFscyBtYWtlcyBpdCBzbyB0aGUgc2RrIGRvZXNuJ3QgaGF2ZSB0byBjYWxjdWxhdGUgdG90YWwgbnVtYmVyIHBhZ2VzIGZvciBwYWdpbmF0aW9uXG4gICAgLy8gaXQncyBmYXN0ZXIsIGJ1dCB3ZSB3aWxsIG5lZWQgdG8gcmVtb3ZlIGl0IGlmIHdlIHN0YXJ0IHVzaW5nIHRvdGFsX3BhZ2VzXG4gICAgbm9fdG90YWxzOiB0cnVlLFxuICAgIG5vdF9jaGFubmVsX2lkczogaXNDaGFubmVsID8gdW5kZWZpbmVkIDogbXV0ZWRBbmRCbG9ja2VkQ2hhbm5lbElkcyxcbiAgICBub3RfdGFnczogIXNob3dOc2Z3ID8gTUFUVVJFX1RBR1MgOiBbXSxcbiAgICBvcmRlcl9ieTogcmVzb2x2ZU9yZGVyQnlPcHRpb24ob3JkZXJQYXJhbSwgc29ydEJ5UGFyYW0pLFxuICAgIHJlbW92ZV9kdXBsaWNhdGVzOiBpc0NoYW5uZWwgPyB1bmRlZmluZWQgOiB0cnVlLFxuICB9O1xuXG4gIGlmIChFTkFCTEVfTk9fU09VUkNFX0NMQUlNUyAmJiBoYXNOb1NvdXJjZSkge1xuICAgIG9wdGlvbnMuaGFzX25vX3NvdXJjZSA9IHRydWU7XG4gIH0gZWxzZSBpZiAoaGFzU291cmNlIHx8ICghRU5BQkxFX05PX1NPVVJDRV9DTEFJTVMgJiYgKCFjbGFpbVR5cGUgfHwgY2xhaW1UeXBlID09PSAnc3RyZWFtJykpKSB7XG4gICAgb3B0aW9ucy5oYXNfc291cmNlID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChsaW1pdENsYWltc1BlckNoYW5uZWwpIHtcbiAgICBvcHRpb25zLmxpbWl0X2NsYWltc19wZXJfY2hhbm5lbCA9IGxpbWl0Q2xhaW1zUGVyQ2hhbm5lbDtcbiAgfVxuXG4gIGlmIChmZWVBbW91bnRQYXJhbSAmJiBjbGFpbVR5cGUgIT09IENTLkNMQUlNX0NIQU5ORUwpIHtcbiAgICBvcHRpb25zLmZlZV9hbW91bnQgPSBmZWVBbW91bnRQYXJhbTtcbiAgfVxuXG4gIGlmIChjbGFpbUlkcykge1xuICAgIG9wdGlvbnMuY2xhaW1faWRzID0gY2xhaW1JZHM7XG4gIH1cblxuICBpZiAoY2hhbm5lbElkc1BhcmFtKSB7XG4gICAgb3B0aW9ucy5jaGFubmVsX2lkcyA9IGNoYW5uZWxJZHNQYXJhbTtcbiAgfVxuXG4gIGlmIChleGNsdWRlZElkc1BhcmFtKSB7XG4gICAgb3B0aW9ucy5ub3RfY2hhbm5lbF9pZHMgPSAob3B0aW9ucy5ub3RfY2hhbm5lbF9pZHMgfHwgW10pLmNvbmNhdChleGNsdWRlZElkc1BhcmFtKTtcbiAgfVxuXG4gIGlmICh0YWdzUGFyYW0pIHtcbiAgICBpZiAodGFnc1BhcmFtICE9PSBDUy5UQUdTX0FMTCAmJiB0YWdzUGFyYW0gIT09ICcnKSB7XG4gICAgICBpZiAodGFnc1BhcmFtID09PSBDUy5UQUdTX0ZPTExPV0VEKSB7XG4gICAgICAgIG9wdGlvbnMuYW55X3RhZ3MgPSBmb2xsb3dlZDtcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0YWdzUGFyYW0pKSB7XG4gICAgICAgIG9wdGlvbnMuYW55X3RhZ3MgPSB0YWdzUGFyYW07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zLmFueV90YWdzID0gdGFnc1BhcmFtLnNwbGl0KCcsJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKG5vdFRhZ3MpIHtcbiAgICBvcHRpb25zLm5vdF90YWdzID0gb3B0aW9ucy5ub3RfdGFncy5jb25jYXQobm90VGFncyk7XG4gIH1cblxuICBpZiAocmVwb3N0ZWRDbGFpbUlkKSB7XG4gICAgLy8gU0RLIGNob2tlcyBvbiByZXBvc3RlZF9jbGFpbV9pZCBvZiBudWxsIG9yIGZhbHNlLCBuZWVkcyB0byBub3QgYmUgcHJlc2VudCBpZiBubyB2YWx1ZVxuICAgIG9wdGlvbnMucmVwb3N0ZWRfY2xhaW1faWQgPSByZXBvc3RlZENsYWltSWQ7XG4gIH1cbiAgLy8gSUYgcmVsZWFzZSB0aW1lLCBzZXQgaXQsIGVsc2Ugc2V0IGZhbGxiYWNrIHJlbGVhc2UgdGltZXMgdXNpbmcgdGhlIGhhY2sgYmVsb3cuXG4gIGlmIChyZWxlYXNlVGltZSAmJiBjbGFpbVR5cGVQYXJhbSAhPT0gQ1MuQ0xBSU1fQ0hBTk5FTCkge1xuICAgIG9wdGlvbnMucmVsZWFzZV90aW1lID0gcmVsZWFzZVRpbWU7XG4gIH0gZWxzZSBpZiAoY2xhaW1UeXBlUGFyYW0gIT09IENTLkNMQUlNX0NIQU5ORUwpIHtcbiAgICBpZiAob3JkZXJQYXJhbSA9PT0gQ1MuT1JERVJfQllfVE9QICYmIGZyZXNobmVzc1BhcmFtICE9PSBDUy5GUkVTSF9BTEwpIHtcbiAgICAgIG9wdGlvbnMucmVsZWFzZV90aW1lID0gYD4ke01hdGguZmxvb3IobW9tZW50KCkuc3VidHJhY3QoMSwgZnJlc2huZXNzUGFyYW0pLnN0YXJ0T2YoJ2hvdXInKS51bml4KCkpfWA7XG4gICAgfSBlbHNlIGlmIChvcmRlclBhcmFtID09PSBDUy5PUkRFUl9CWV9ORVcgfHwgb3JkZXJQYXJhbSA9PT0gQ1MuT1JERVJfQllfVFJFTkRJTkcpIHtcbiAgICAgIC8vIFdhcm5pbmcgLSBoYWNrIGJlbG93XG4gICAgICAvLyBJZiB1c2VycyBhcmUgZm9sbG93aW5nIG1vcmUgdGhhbiAxMCBjaGFubmVscyBvciB0YWdzLCBsaW1pdCByZXN1bHRzIHRvIHN0dWZmIGxlc3MgdGhhbiBhIHllYXIgb2xkXG4gICAgICAvLyBGb3IgbW9yZSB0aGFuIDIwLCBkcm9wIGl0IGRvd24gdG8gNiBtb250aHNcbiAgICAgIC8vIFRoaXMgaGVscHMgd2l0aCB0aW1lb3V0IGlzc3VlcyBmb3IgdXNlcnMgdGhhdCBhcmUgZm9sbG93aW5nIGEgdG9uIG9mIHN0dWZmXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbGJyeWlvL2xicnktc2RrL2lzc3Vlcy8yNDIwXG4gICAgICBpZiAoXG4gICAgICAgIChvcHRpb25zLmNoYW5uZWxfaWRzICYmIG9wdGlvbnMuY2hhbm5lbF9pZHMubGVuZ3RoID4gMjApIHx8XG4gICAgICAgIChvcHRpb25zLmFueV90YWdzICYmIG9wdGlvbnMuYW55X3RhZ3MubGVuZ3RoID4gMjApXG4gICAgICApIHtcbiAgICAgICAgb3B0aW9ucy5yZWxlYXNlX3RpbWUgPSBgPiR7TWF0aC5mbG9vcihtb21lbnQoKS5zdWJ0cmFjdCgzLCBDUy5GUkVTSF9NT05USCkuc3RhcnRPZignd2VlaycpLnVuaXgoKSl9YDtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIChvcHRpb25zLmNoYW5uZWxfaWRzICYmIG9wdGlvbnMuY2hhbm5lbF9pZHMubGVuZ3RoID4gMTApIHx8XG4gICAgICAgIChvcHRpb25zLmFueV90YWdzICYmIG9wdGlvbnMuYW55X3RhZ3MubGVuZ3RoID4gMTApXG4gICAgICApIHtcbiAgICAgICAgb3B0aW9ucy5yZWxlYXNlX3RpbWUgPSBgPiR7TWF0aC5mbG9vcihtb21lbnQoKS5zdWJ0cmFjdCgxLCBDUy5GUkVTSF9ZRUFSKS5zdGFydE9mKCd3ZWVrJykudW5peCgpKX1gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSGFjayBmb3IgYXQgbGVhc3QgdGhlIE5ldyBwYWdlIHVudGlsIGh0dHBzOi8vZ2l0aHViLmNvbS9sYnJ5aW8vbGJyeS1zZGsvaXNzdWVzLzI1OTEgaXMgZml4ZWRcbiAgICAgICAgb3B0aW9ucy5yZWxlYXNlX3RpbWUgPSBgPCR7TWF0aC5mbG9vcihtb21lbnQoKS5zdGFydE9mKCdtaW51dGUnKS51bml4KCkpfWA7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGR1cmF0aW9uUGFyYW0pIHtcbiAgICBzd2l0Y2ggKGR1cmF0aW9uUGFyYW0pIHtcbiAgICAgIGNhc2UgQ1MuRFVSQVRJT05fQUxMOlxuICAgICAgICAvLyBEbyBub3RoaW5nIChubyBvcHRpb25zIG5lZWRlZClcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENTLkRVUkFUSU9OX1NIT1JUOlxuICAgICAgICBvcHRpb25zLmR1cmF0aW9uID0gJzw9MjQwJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENTLkRVUkFUSU9OX0xPTkc6XG4gICAgICAgIG9wdGlvbnMuZHVyYXRpb24gPSAnPj0xMjAwJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENTLkRVUkFUSU9OX0dUX0VROlxuICAgICAgICBvcHRpb25zLmR1cmF0aW9uID0gYD49JHsoZHVyYXRpb25NaW51dGVzIHx8IDApICogNjB9YDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENTLkRVUkFUSU9OX0xUX0VROlxuICAgICAgICBvcHRpb25zLmR1cmF0aW9uID0gYDw9JHsoZHVyYXRpb25NaW51dGVzIHx8IDApICogNjB9YDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjb25zb2xlLmVycm9yKCdVbmhhbmRsZWQgZHVyYXRpb246ICcgKyBkdXJhdGlvblBhcmFtKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0cmVhbVR5cGVQYXJhbSAmJiBzdHJlYW1UeXBlUGFyYW0gIT09IENTLkNPTlRFTlRfQUxMICYmIGNsYWltVHlwZSAhPT0gQ1MuQ0xBSU1fQ0hBTk5FTCkge1xuICAgIG9wdGlvbnMuc3RyZWFtX3R5cGVzID0gdHlwZW9mIHN0cmVhbVR5cGVQYXJhbSA9PT0gJ3N0cmluZycgPyBbc3RyZWFtVHlwZVBhcmFtXSA6IHN0cmVhbVR5cGVQYXJhbTtcbiAgfVxuXG4gIGlmIChjbGFpbVR5cGVQYXJhbSkge1xuICAgIGlmIChjbGFpbVR5cGVQYXJhbSAhPT0gQ1MuQ09OVEVOVF9BTEwpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGNsYWltVHlwZVBhcmFtKSkge1xuICAgICAgICBvcHRpb25zLmNsYWltX3R5cGUgPSBjbGFpbVR5cGVQYXJhbTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdGlvbnMuY2xhaW1fdHlwZSA9IFtjbGFpbVR5cGVQYXJhbV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGxhbmd1YWdlUGFyYW1zKSB7XG4gICAgaWYgKGxhbmd1YWdlUGFyYW1zICE9PSBDUy5MQU5HVUFHRVNfQUxMKSB7XG4gICAgICBvcHRpb25zLmFueV9sYW5ndWFnZXMgPSBsYW5ndWFnZVBhcmFtcy5zcGxpdCgnLCcpO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0YWdzUGFyYW0pIHtcbiAgICBpZiAodGFnc1BhcmFtICE9PSBDUy5UQUdTX0FMTCAmJiB0YWdzUGFyYW0gIT09ICcnKSB7XG4gICAgICBpZiAodGFnc1BhcmFtID09PSBDUy5UQUdTX0ZPTExPV0VEKSB7XG4gICAgICAgIG9wdGlvbnMuYW55X3RhZ3MgPSBmb2xsb3dlZDtcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0YWdzUGFyYW0pKSB7XG4gICAgICAgIG9wdGlvbnMuYW55X3RhZ3MgPSB0YWdzUGFyYW07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zLmFueV90YWdzID0gdGFnc1BhcmFtLnNwbGl0KCcsJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGhpZGVSZXBvc3RzRWZmZWN0aXZlICYmICFvcHRpb25zLnJlcG9zdGVkX2NsYWltX2lkKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy5jbGFpbV90eXBlKSkge1xuICAgICAgaWYgKG9wdGlvbnMuY2xhaW1fdHlwZS5sZW5ndGggPiAxKSB7XG4gICAgICAgIG9wdGlvbnMuY2xhaW1fdHlwZSA9IG9wdGlvbnMuY2xhaW1fdHlwZS5maWx0ZXIoKGNsYWltVHlwZSkgPT4gY2xhaW1UeXBlICE9PSAncmVwb3N0Jyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdGlvbnMuY2xhaW1fdHlwZSA9IFsnc3RyZWFtJywgJ2NoYW5uZWwnXTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBoYXNNYXR1cmVUYWdzID0gdGFnc1BhcmFtICYmIHRhZ3NQYXJhbS5zcGxpdCgnLCcpLnNvbWUoKHQpID0+IE1BVFVSRV9UQUdTLmluY2x1ZGVzKHQpKTtcblxuICBjb25zdCBzZWFyY2hLZXkgPSBjcmVhdGVOb3JtYWxpemVkQ2xhaW1TZWFyY2hLZXkob3B0aW9ucyk7XG4gIGNvbnN0IGNsYWltU2VhcmNoUmVzdWx0ID0gY2xhaW1TZWFyY2hCeVF1ZXJ5W3NlYXJjaEtleV07XG4gIGNvbnN0IGNsYWltU2VhcmNoUmVzdWx0TGFzdFBhZ2VSZWFjaGVkID0gY2xhaW1TZWFyY2hCeVF1ZXJ5TGFzdFBhZ2VSZWFjaGVkW3NlYXJjaEtleV07XG4gIGNvbnN0IGlzVW5mZXRjaGVkQ2xhaW1TZWFyY2ggPSBjbGFpbVNlYXJjaFJlc3VsdCA9PT0gdW5kZWZpbmVkO1xuXG4gIC8vIHVuY29tbWVudCB0byBmaXggYW4gaXRlbSBvbiBhIHBhZ2VcbiAgLy8gICBjb25zdCBmaXhVcmkgPSAnbGJyeTovL0Bjb3JiZXR0cmVwb3J0IzAvbGJyeW9keXNlZSM1JztcbiAgLy8gICBpZiAoXG4gIC8vICAgICBvcmRlclBhcmFtID09PSBDUy5PUkRFUl9CWV9ORVcgJiZcbiAgLy8gICAgIGNsYWltU2VhcmNoUmVzdWx0ICYmXG4gIC8vICAgICBjbGFpbVNlYXJjaFJlc3VsdC5sZW5ndGggPiAyICYmXG4gIC8vICAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT09ICcvJC9yYWJiaXRob2xlJ1xuICAvLyAgICkge1xuICAvLyAgICAgaWYgKGNsYWltU2VhcmNoUmVzdWx0LmluZGV4T2YoZml4VXJpKSAhPT0gLTEpIHtcbiAgLy8gICAgICAgY2xhaW1TZWFyY2hSZXN1bHQuc3BsaWNlKGNsYWltU2VhcmNoUmVzdWx0LmluZGV4T2YoZml4VXJpKSwgMSk7XG4gIC8vICAgICB9IGVsc2Uge1xuICAvLyAgICAgICBjbGFpbVNlYXJjaFJlc3VsdC5wb3AoKTtcbiAgLy8gICAgIH1cbiAgLy8gICAgIGNsYWltU2VhcmNoUmVzdWx0LnNwbGljZSgyLCAwLCBmaXhVcmkpO1xuICAvLyAgIH1cblxuICBjb25zdCBbcHJldk9wdGlvbnMsIHNldFByZXZPcHRpb25zXSA9IFJlYWN0LnVzZVN0YXRlKG51bGwpO1xuXG4gIGlmICghaXNKdXN0U2Nyb2xsaW5nVG9OZXdQYWdlKHByZXZPcHRpb25zLCBvcHRpb25zKSkge1xuICAgIC8vIC0tLSBOZXcgc2VhcmNoLCBvciBzZWFyY2ggb3B0aW9ucyBjaGFuZ2VkLlxuICAgIHNldFByZXZPcHRpb25zKG9wdGlvbnMpO1xuXG4gICAgaWYgKGRpZE5hdmlnYXRlRm9yd2FyZCkge1xuICAgICAgLy8gLS0tIFJlc2V0IHRoZSBwYWdlLlxuICAgICAgb3B0aW9ucy5wYWdlID0gMTtcbiAgICAgIHNldFBhZ2Uob3B0aW9ucy5wYWdlKTtcbiAgICB9IGVsc2UgaWYgKGNsYWltU2VhcmNoUmVzdWx0KSB7XG4gICAgICAvLyAtLS0gVXBkYXRlICdwYWdlJyBiYXNlZCBvbiByZXRyaWV2ZWQgJ2NsYWltU2VhcmNoUmVzdWx0Jy5cbiAgICAgIG9wdGlvbnMucGFnZSA9IE1hdGguY2VpbChjbGFpbVNlYXJjaFJlc3VsdC5sZW5ndGggLyBkeW5hbWljUGFnZVNpemUpO1xuICAgICAgaWYgKG9wdGlvbnMucGFnZSAhPT0gcGFnZSkge1xuICAgICAgICBzZXRQYWdlKG9wdGlvbnMucGFnZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc2hvdWxkUGVyZm9ybVNlYXJjaCA9XG4gICAgIXVyaXMgJiZcbiAgICAoY2xhaW1TZWFyY2hSZXN1bHQgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgZGlkTmF2aWdhdGVGb3J3YXJkIHx8XG4gICAgICAoIWxvYWRpbmcgJiZcbiAgICAgICAgIWNsYWltU2VhcmNoUmVzdWx0TGFzdFBhZ2VSZWFjaGVkICYmXG4gICAgICAgIGNsYWltU2VhcmNoUmVzdWx0ICYmXG4gICAgICAgIGNsYWltU2VhcmNoUmVzdWx0Lmxlbmd0aCAmJlxuICAgICAgICBjbGFpbVNlYXJjaFJlc3VsdC5sZW5ndGggPCBkeW5hbWljUGFnZVNpemUgKiBvcHRpb25zLnBhZ2UgJiZcbiAgICAgICAgY2xhaW1TZWFyY2hSZXN1bHQubGVuZ3RoICUgZHluYW1pY1BhZ2VTaXplID09PSAwKSk7XG5cbiAgLy8gRG9uJ3QgdXNlIHRoZSBxdWVyeSBmcm9tIGNyZWF0ZU5vcm1hbGl6ZWRDbGFpbVNlYXJjaEtleSBmb3IgdGhlIGVmZmVjdCBzaW5jZSB0aGF0IGRvZXNuJ3QgaW5jbHVkZSBwYWdlICYgcmVsZWFzZV90aW1lXG4gIGNvbnN0IG9wdGlvbnNTdHJpbmdGb3JFZmZlY3QgPSBKU09OLnN0cmluZ2lmeShvcHRpb25zKTtcblxuICBjb25zdCB0aW1lZE91dE1lc3NhZ2UgPSAoXG4gICAgPGRpdj5cbiAgICAgIDxwPlxuICAgICAgICA8STE4bk1lc3NhZ2VcbiAgICAgICAgICB0b2tlbnM9e3tcbiAgICAgICAgICAgIGFnYWluOiAoXG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICBidXR0b249XCJsaW5rXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17X18oJ3RyeSBhZ2FpbiBpbiBhIGZldyBzZWNvbmRzLicpfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEZvcmNlUmVmcmVzaChEYXRlLm5vdygpKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICksXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIFNvcnJ5LCB5b3VyIHJlcXVlc3QgdGltZWQgb3V0LiBNb2RpZnkgeW91ciBvcHRpb25zIG9yICVhZ2FpbiVcbiAgICAgICAgPC9JMThuTWVzc2FnZT5cbiAgICAgIDwvcD5cbiAgICAgIDxwPlxuICAgICAgICA8STE4bk1lc3NhZ2VcbiAgICAgICAgICB0b2tlbnM9e3tcbiAgICAgICAgICAgIGNvbnRhY3Rfc3VwcG9ydDogKFxuICAgICAgICAgICAgICA8QnV0dG9uIGJ1dHRvbj1cImxpbmtcIiBsYWJlbD17X18oJ2NvbnRhY3Qgc3VwcG9ydCcpfSBocmVmPVwiaHR0cHM6Ly9vZHlzZWUuY29tL0BPZHlzZWVIZWxwOmI/dmlldz1hYm91dFwiIC8+XG4gICAgICAgICAgICApLFxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICBJZiB5b3UgY29udGludWUgdG8gaGF2ZSBpc3N1ZXMsIHBsZWFzZSAlY29udGFjdF9zdXBwb3J0JS5cbiAgICAgICAgPC9JMThuTWVzc2FnZT5cbiAgICAgIDwvcD5cbiAgICA8L2Rpdj5cbiAgKTtcblxuICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG4gIGxldCBmaW5hbFVyaXM7XG5cbiAgaWYgKHVyaXMpIHtcbiAgICAvLyAtLS0gZGlyZWN0IHVyaXNcbiAgICBmaW5hbFVyaXMgPSB1cmlzO1xuICAgIGluamVjdFBpblVybHMoZmluYWxVcmlzLCBvcmRlclBhcmFtLCBwaW5zLCByZXNvbHZlZFBpblVyaXMpO1xuICAgIGZpbmFsVXJpcyA9IGZpbHRlckV4Y2x1ZGVkVXJpcyhmaW5hbFVyaXMsIGV4Y2x1ZGVVcmlzKTtcbiAgfSBlbHNlIHtcbiAgICAvLyAtLS0gc2VhcmNoZWQgdXJpc1xuICAgIGlmIChpc1VuZmV0Y2hlZENsYWltU2VhcmNoICYmIHByZXZVcmlzLmN1cnJlbnQpIHtcbiAgICAgIGZpbmFsVXJpcyA9IHByZXZVcmlzLmN1cnJlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpbmFsVXJpcyA9IGNsYWltU2VhcmNoUmVzdWx0O1xuICAgICAgaW5qZWN0UGluVXJscyhmaW5hbFVyaXMsIG9yZGVyUGFyYW0sIHBpbnMsIHJlc29sdmVkUGluVXJpcyk7XG4gICAgICBmaW5hbFVyaXMgPSBmaWx0ZXJFeGNsdWRlZFVyaXMoZmluYWxVcmlzLCBleGNsdWRlVXJpcyk7XG4gICAgICBwcmV2VXJpcy5jdXJyZW50ID0gZmluYWxVcmlzO1xuICAgIH1cbiAgfVxuXG4gIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gIC8vIEhlbHBlcnNcbiAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuICAvLyBSZXR1cm5zIHRydWUgaWYgdGhlIGNoYW5nZSBpbiAnb3B0aW9ucycgaW5kaWNhdGUgdGhhdCB3ZSBhcmUgc2ltcGx5IHNjcm9sbGluZ1xuICAvLyBkb3duIHRvIGEgbmV3IHBhZ2U7IGZhbHNlIG90aGVyd2lzZS5cbiAgZnVuY3Rpb24gaXNKdXN0U2Nyb2xsaW5nVG9OZXdQYWdlKHByZXZPcHRpb25zLCBvcHRpb25zKSB7XG4gICAgaWYgKCFwcmV2T3B0aW9ucykge1xuICAgICAgLy8gSXQncyBhIG5ldyBzZWFyY2gsIG9yIHdlIGp1c3QgcG9wcGVkIGJhY2sgZnJvbSBhIGRpZmZlcmVudCB2aWV3LlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIENvbXBhcmUgZXZlcnkgZmllbGQgZXhjZXB0IGZvciAncGFnZScgYW5kICdyZWxlYXNlX3RpbWUnLlxuICAgIC8vIFRoZXJlIG1pZ2h0IGJlIGJldHRlciB3YXlzIHRvIGFjaGlldmUgdGhpcy5cbiAgICBsZXQgdG1wUHJldk9wdGlvbnMgPSB7IC4uLnByZXZPcHRpb25zIH07XG4gICAgdG1wUHJldk9wdGlvbnMucGFnZSA9IC0xO1xuICAgIHRtcFByZXZPcHRpb25zLnJlbGVhc2VfdGltZSA9ICcnO1xuXG4gICAgbGV0IHRtcE9wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcbiAgICB0bXBPcHRpb25zLnBhZ2UgPSAtMTtcbiAgICB0bXBPcHRpb25zLnJlbGVhc2VfdGltZSA9ICcnO1xuXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRtcE9wdGlvbnMpID09PSBKU09OLnN0cmluZ2lmeSh0bXBQcmV2T3B0aW9ucyk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRQYXJhbUZyb21UYWdzKHQpIHtcbiAgICBpZiAodCA9PT0gQ1MuVEFHU19BTEwgfHwgdCA9PT0gQ1MuVEFHU19GT0xMT1dFRCkge1xuICAgICAgcmV0dXJuIHQ7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHQpKSB7XG4gICAgICByZXR1cm4gdC5qb2luKCcsJyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlU2Nyb2xsQm90dG9tKCkge1xuICAgIGlmIChtYXhQYWdlcyAhPT0gdW5kZWZpbmVkICYmIHBhZ2UgPT09IG1heFBhZ2VzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFsb2FkaW5nICYmIGluZmluaXRlU2Nyb2xsKSB7XG4gICAgICBpZiAoY2xhaW1TZWFyY2hSZXN1bHQgJiYgIWNsYWltU2VhcmNoUmVzdWx0TGFzdFBhZ2VSZWFjaGVkKSB7XG4gICAgICAgIHNldFBhZ2UocGFnZSArIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc29sdmVIaWRlUmVwb3N0cyhoaWRlUmVwb3N0U2V0dGluZywgaGlkZVJlcG9zdE92ZXJyaWRlKSB7XG4gICAgaWYgKGhpZGVSZXBvc3RPdmVycmlkZSA9PT0gdW5kZWZpbmVkIHx8IGhpZGVSZXBvc3RPdmVycmlkZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGhpZGVSZXBvc3RTZXR0aW5nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaGlkZVJlcG9zdE92ZXJyaWRlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc29sdmVPcmRlckJ5T3B0aW9uKG9yZGVyQnk6IHN0cmluZyB8IEFycmF5PHN0cmluZz4sIHNvcnRCeTogc3RyaW5nIHwgQXJyYXk8c3RyaW5nPikge1xuICAgIGxldCBvcmRlcl9ieTtcblxuICAgIHN3aXRjaCAob3JkZXJCeSkge1xuICAgICAgY2FzZSBDUy5PUkRFUl9CWV9UUkVORElORzpcbiAgICAgICAgb3JkZXJfYnkgPSBDUy5PUkRFUl9CWV9UUkVORElOR19WQUxVRTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENTLk9SREVSX0JZX05FVzpcbiAgICAgICAgb3JkZXJfYnkgPSBDUy5PUkRFUl9CWV9ORVdfVkFMVUU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDUy5PUkRFUl9CWV9ORVdfQVNDOlxuICAgICAgICBvcmRlcl9ieSA9IENTLk9SREVSX0JZX05FV19BU0NfVkFMVUU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDUy5PUkRFUl9CWV9OQU1FX0FTQzpcbiAgICAgICAgb3JkZXJfYnkgPSBDUy5PUkRFUl9CWV9OQU1FX0FTQ19WQUxVRTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBvcmRlcl9ieSA9IENTLk9SREVSX0JZX1RPUF9WQUxVRTtcbiAgICB9XG5cbiAgICBpZiAob3JkZXJCeSA9PT0gQ1MuT1JERVJfQllfTkVXICYmIHNvcnRCeSA9PT0gQ1MuU09SVF9CWS5PTERFU1Qua2V5KSB7XG4gICAgICByZXR1cm4gb3JkZXJfYnkubWFwKCh4KSA9PiBgJHtDUy5TT1JUX0JZLk9MREVTVC5vcHR9JHt4fWApO1xuICAgIH1cblxuICAgIHJldHVybiBvcmRlcl9ieTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluamVjdFBpblVybHModXJpcywgb3JkZXIsIHBpbnMsIHJlc29sdmVkUGluVXJpcykge1xuICAgIGlmICghcGlucyB8fCAhdXJpcyB8fCB1cmlzLmxlbmd0aCA8PSAyIHx8IChwaW5zLm9ubHlQaW5Gb3JPcmRlciAmJiBwaW5zLm9ubHlQaW5Gb3JPcmRlciAhPT0gb3JkZXIpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHJlc29sdmVkUGluVXJpcykge1xuICAgICAgcmVzb2x2ZWRQaW5VcmlzLmZvckVhY2goKHBpbikgPT4ge1xuICAgICAgICBpZiAodXJpcy5pbmNsdWRlcyhwaW4pKSB7XG4gICAgICAgICAgdXJpcy5zcGxpY2UodXJpcy5pbmRleE9mKHBpbiksIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVyaXMucG9wKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB1cmlzLnNwbGljZSgyLCAwLCAuLi5yZXNvbHZlZFBpblVyaXMpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbHRlckV4Y2x1ZGVkVXJpcyh1cmlzLCBleGNsdWRlVXJpcykge1xuICAgIGlmICh1cmlzICYmIGV4Y2x1ZGVVcmlzICYmIGV4Y2x1ZGVVcmlzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHVyaXMuZmlsdGVyKCh1cmkpID0+ICFleGNsdWRlVXJpcy5pbmNsdWRlcyh1cmkpKTtcbiAgICB9XG4gICAgcmV0dXJuIHVyaXM7XG4gIH1cblxuICBmdW5jdGlvbiBvbkhpZGRlbih1cmkpIHtcbiAgICBpZiAoaGlkZGVuQnVmZmVyLmluZGV4T2YodXJpKSA9PT0gLTEpIHtcbiAgICAgIGxldCBuZXdCdWZmZXIgPSBoaWRkZW5CdWZmZXI7XG4gICAgICBuZXdCdWZmZXIucHVzaCh1cmkpO1xuICAgICAgc2V0SGlkZGVuQnVmZmVyKG5ld0J1ZmZlcik7XG4gICAgfVxuICB9XG5cbiAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuICB1c2VGZXRjaFZpZXdDb3VudChmZXRjaFZpZXdDb3VudCwgZmluYWxVcmlzLCBjbGFpbXNCeVVyaSwgZG9GZXRjaFZpZXdDb3VudCk7XG5cbiAgdXNlR2V0VXNlck1lbWJlcnNoaXBzKHRydWUsIGZpbmFsVXJpcywgY2xhaW1zQnlVcmksIGRvRmV0Y2hVc2VyTWVtYmVyc2hpcHMpO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNob3VsZFBlcmZvcm1TZWFyY2gpIHtcbiAgICAgIGNvbnN0IHNlYXJjaE9wdGlvbnMgPSBKU09OLnBhcnNlKG9wdGlvbnNTdHJpbmdGb3JFZmZlY3QpO1xuICAgICAgZG9DbGFpbVNlYXJjaChzZWFyY2hPcHRpb25zKTtcbiAgICB9XG4gIH0sIFtkb0NsYWltU2VhcmNoLCBzaG91bGRQZXJmb3JtU2VhcmNoLCBvcHRpb25zU3RyaW5nRm9yRWZmZWN0LCBmb3JjZVJlZnJlc2hdKTtcblxuICBjb25zdCBoZWFkZXJUb1VzZSA9IGhlYWRlciB8fCAoXG4gICAgPENsYWltTGlzdEhlYWRlclxuICAgICAgY2hhbm5lbElkcz17Y2hhbm5lbElkc31cbiAgICAgIGRlZmF1bHRUYWdzPXtkZWZhdWx0VGFnc31cbiAgICAgIHRhZ3M9e3RhZ3N9XG4gICAgICBmcmVzaG5lc3M9e2ZyZXNobmVzc31cbiAgICAgIGRlZmF1bHRGcmVzaG5lc3M9e2RlZmF1bHRGcmVzaG5lc3N9XG4gICAgICBjbGFpbVR5cGU9e2NsYWltVHlwZX1cbiAgICAgIHN0cmVhbVR5cGU9e3N0cmVhbVR5cGV9XG4gICAgICBkZWZhdWx0U3RyZWFtVHlwZT17ZGVmYXVsdFN0cmVhbVR5cGV9XG4gICAgICBmZWVBbW91bnQ9e2ZlZUFtb3VudH0gLy8gRU5BQkxFX1BBSURfQ09OVEVOVF9ESVNDT1ZFUiBvciBzb21ldGhpbmdcbiAgICAgIG9yZGVyQnk9e29yZGVyQnl9XG4gICAgICBkZWZhdWx0T3JkZXJCeT17ZGVmYXVsdE9yZGVyQnl9XG4gICAgICBoaWRlQWR2YW5jZWRGaWx0ZXI9e2hpZGVBZHZhbmNlZEZpbHRlcn1cbiAgICAgIGhhc01hdHVyZVRhZ3M9e2hhc01hdHVyZVRhZ3N9XG4gICAgICBoaWRkZW5Oc2Z3TWVzc2FnZT17aGlkZGVuTnNmd01lc3NhZ2V9XG4gICAgICBzZXRQYWdlPXtzZXRQYWdlfVxuICAgICAgdGlsZUxheW91dD17dGlsZUxheW91dH1cbiAgICAgIGhpZGVMYXlvdXRCdXR0b249e2hpZGVMYXlvdXRCdXR0b259XG4gICAgICBoaWRlRmlsdGVycz17aGlkZUZpbHRlcnN9XG4gICAgICBzY3JvbGxBbmNob3I9e3Njcm9sbEFuY2hvcn1cbiAgICAvPlxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAge2hlYWRlckxhYmVsICYmIDxsYWJlbCBjbGFzc05hbWU9XCJjbGFpbS1saXN0X19oZWFkZXItbGFiZWxcIj57aGVhZGVyTGFiZWx9PC9sYWJlbD59XG4gICAgICB7dGlsZUxheW91dCA/IChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICB7IXJlcG9zdGVkQ2xhaW1JZCAmJiBzaG93SGVhZGVyICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2VjdGlvbl9faGVhZGVyLS1hY3Rpb25zXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2VjdGlvbl9fYWN0aW9uc1wiPlxuICAgICAgICAgICAgICAgIHtoZWFkZXJUb1VzZX1cbiAgICAgICAgICAgICAgICB7c2VhcmNoSW5TZWxlY3RlZExhbmcgJiYgPExhbmdGaWx0ZXJJbmRpY2F0b3IgLz59XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB7bWV0YSAmJiA8ZGl2IGNsYXNzTmFtZT1cInNlY3Rpb25fX2FjdGlvbnMtLW5vLW1hcmdpblwiPnttZXRhfTwvZGl2Pn1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgICAge3N1YlNlY3Rpb24gJiYgPGRpdj57c3ViU2VjdGlvbn08L2Rpdj59XG4gICAgICAgICAgPENsYWltTGlzdFxuICAgICAgICAgICAgdGlsZUxheW91dFxuICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ31cbiAgICAgICAgICAgIHVyaXM9e2ZpbmFsVXJpc31cbiAgICAgICAgICAgIHByZWZpeFVyaXM9e3ByZWZpeFVyaXN9XG4gICAgICAgICAgICBvblNjcm9sbEJvdHRvbT17aGFuZGxlU2Nyb2xsQm90dG9tfVxuICAgICAgICAgICAgcGFnZT17cGFnZX1cbiAgICAgICAgICAgIHBhZ2VTaXplPXtkeW5hbWljUGFnZVNpemV9XG4gICAgICAgICAgICB0aW1lZE91dE1lc3NhZ2U9e3RpbWVkT3V0TWVzc2FnZX1cbiAgICAgICAgICAgIHJlbmRlclByb3BlcnRpZXM9e3JlbmRlclByb3BlcnRpZXN9XG4gICAgICAgICAgICBpbmNsdWRlU3VwcG9ydEFjdGlvbj17aW5jbHVkZVN1cHBvcnRBY3Rpb259XG4gICAgICAgICAgICBpbmplY3RlZEl0ZW09e2luamVjdGVkSXRlbX1cbiAgICAgICAgICAgIHNob3dIaWRkZW5CeVVzZXI9e3Nob3dIaWRkZW5CeVVzZXJ9XG4gICAgICAgICAgICBzZWFyY2hPcHRpb25zPXtvcHRpb25zfVxuICAgICAgICAgICAgc2hvd05vU291cmNlQ2xhaW1zPXtzaG93Tm9Tb3VyY2VDbGFpbXN9XG4gICAgICAgICAgICBlbXB0eT17ZW1wdHl9XG4gICAgICAgICAgICBtYXhDbGFpbVJlbmRlcj17bWF4Q2xhaW1SZW5kZXJ9XG4gICAgICAgICAgICBsb2FkZWRDYWxsYmFjaz17bG9hZGVkQ2FsbGJhY2t9XG4gICAgICAgICAgICBzd2lwZUxheW91dD17c3dpcGVMYXlvdXR9XG4gICAgICAgICAgICBvbkhpZGRlbj17b25IaWRkZW59XG4gICAgICAgICAgLz5cbiAgICAgICAgICB7bG9hZGluZyAmJiB1c2VTa2VsZXRvblNjcmVlbiAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNsYWltLWdyaWRcIj5cbiAgICAgICAgICAgICAge25ldyBBcnJheShkeW5hbWljUGFnZVNpemUpLmZpbGwoMSkubWFwKCh4LCBpKSA9PiAoXG4gICAgICAgICAgICAgICAgPENsYWltUHJldmlld1RpbGUga2V5PXtpfSBwbGFjZWhvbGRlcj1cImxvYWRpbmdcIiBwdWxzZSAvPlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKSA6IChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICB7c2hvd0hlYWRlciAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlY3Rpb25fX2hlYWRlci0tYWN0aW9uc1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlY3Rpb25fX2FjdGlvbnNcIj5cbiAgICAgICAgICAgICAgICB7aGVhZGVyVG9Vc2V9XG4gICAgICAgICAgICAgICAge3NlYXJjaEluU2VsZWN0ZWRMYW5nICYmIDxMYW5nRmlsdGVySW5kaWNhdG9yIC8+fVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge21ldGEgJiYgPGRpdiBjbGFzc05hbWU9XCJzZWN0aW9uX19hY3Rpb25zLS1uby1tYXJnaW5cIj57bWV0YX08L2Rpdj59XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtzdWJTZWN0aW9uICYmIDxkaXY+e3N1YlNlY3Rpb259PC9kaXY+fVxuICAgICAgICAgIDxDbGFpbUxpc3RcbiAgICAgICAgICAgIHR5cGU9e3R5cGV9XG4gICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxuICAgICAgICAgICAgdXJpcz17ZmluYWxVcmlzfVxuICAgICAgICAgICAgcHJlZml4VXJpcz17cHJlZml4VXJpc31cbiAgICAgICAgICAgIG9uU2Nyb2xsQm90dG9tPXtoYW5kbGVTY3JvbGxCb3R0b219XG4gICAgICAgICAgICBwYWdlPXtwYWdlfVxuICAgICAgICAgICAgcGFnZVNpemU9e2R5bmFtaWNQYWdlU2l6ZX1cbiAgICAgICAgICAgIHRpbWVkT3V0TWVzc2FnZT17dGltZWRPdXRNZXNzYWdlfVxuICAgICAgICAgICAgcmVuZGVyUHJvcGVydGllcz17cmVuZGVyUHJvcGVydGllc31cbiAgICAgICAgICAgIGluY2x1ZGVTdXBwb3J0QWN0aW9uPXtpbmNsdWRlU3VwcG9ydEFjdGlvbn1cbiAgICAgICAgICAgIGluamVjdGVkSXRlbT17aW5qZWN0ZWRJdGVtfVxuICAgICAgICAgICAgc2hvd0hpZGRlbkJ5VXNlcj17c2hvd0hpZGRlbkJ5VXNlcn1cbiAgICAgICAgICAgIHNlYXJjaE9wdGlvbnM9e29wdGlvbnN9XG4gICAgICAgICAgICBzaG93Tm9Tb3VyY2VDbGFpbXM9e2hhc05vU291cmNlIHx8IHNob3dOb1NvdXJjZUNsYWltc31cbiAgICAgICAgICAgIGVtcHR5PXtlbXB0eX1cbiAgICAgICAgICAgIG1heENsYWltUmVuZGVyPXttYXhDbGFpbVJlbmRlcn1cbiAgICAgICAgICAgIGxvYWRlZENhbGxiYWNrPXtsb2FkZWRDYWxsYmFja31cbiAgICAgICAgICAgIHN3aXBlTGF5b3V0PXtzd2lwZUxheW91dH1cbiAgICAgICAgICAgIG9uSGlkZGVuPXtvbkhpZGRlbn1cbiAgICAgICAgICAvPlxuICAgICAgICAgIHtsb2FkaW5nICYmXG4gICAgICAgICAgICB1c2VTa2VsZXRvblNjcmVlbiAmJlxuICAgICAgICAgICAgbmV3IEFycmF5KGR5bmFtaWNQYWdlU2l6ZSlcbiAgICAgICAgICAgICAgLmZpbGwoMSlcbiAgICAgICAgICAgICAgLm1hcCgoeCwgaSkgPT4gKFxuICAgICAgICAgICAgICAgIDxDbGFpbVByZXZpZXdcbiAgICAgICAgICAgICAgICAgIHNob3dOb1NvdXJjZUNsYWltcz17aGFzTm9Tb3VyY2UgfHwgc2hvd05vU291cmNlQ2xhaW1zfVxuICAgICAgICAgICAgICAgICAga2V5PXtpfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJsb2FkaW5nXCJcbiAgICAgICAgICAgICAgICAgIHR5cGU9e3R5cGV9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L1JlYWN0LkZyYWdtZW50PlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoUm91dGVyKENsYWltTGlzdERpc2NvdmVyKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZ0dBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBOEVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBL0VBO0FBaUZBO0FBQ0E7QUFsRkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFtRkE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUE5RkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWdHQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUE5QkE7QUFnQ0E7QUFDQTtBQUNBO0FBQ0E7QUEvSUE7QUFBQTtBQUFBO0FBQ0E7QUErSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFDQTtBQWFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTVPQTtBQUNBO0FBQ0E7QUE2T0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFKQTtBQVNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQWxCQTtBQW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbFdBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFvV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVdBO0FBRUE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBRkE7QUFEQTtBQWdCQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFGQTtBQURBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0YkE7QUEwYkE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU9BO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFkQTtBQUNBO0FBZ0JBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZpQkE7QUEyaUJBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuQkE7QUF1QkE7QUFFQTtBQUFBO0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFJQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuQkE7QUFzQkE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFwQ0E7QUE0Q0E7QUFBQTtBQUNBO0FBQUE7QUFJQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuQkE7QUF5QkE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBbEZBO0FBNkZBO0FBQ0E7QUFDQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../ui/component/claimListDiscover/view.jsx\n");

/***/ }),

/***/ "../ui/component/subscribeButton/view.jsx":
/*!************************************************!*\
  !*** ../ui/component/subscribeButton/view.jsx ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SubscribeButton; });\n/* harmony import */ var constants_icons__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! constants/icons */ \"../ui/constants/icons.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var util_lbryURI__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! util/lbryURI */ \"../ui/util/lbryURI.js\");\n/* harmony import */ var component_button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! component/button */ \"../ui/component/button/index.js\");\n/* harmony import */ var effects_use_hover__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! effects/use-hover */ \"../ui/effects/use-hover.js\");\n/* harmony import */ var effects_use_screensize__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effects/use-screensize */ \"../ui/effects/use-screensize.js\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! config */ \"../config.js\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(config__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var $web_component_browserNotificationSettings_use_browser_notifications__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! $web/component/browserNotificationSettings/use-browser-notifications */ \"./component/browserNotificationSettings/use-browser-notifications.js\");\n\n\n\n\n\n\n\n\nfunction SubscribeButton(props) {\n  var permanentUrl = props.permanentUrl,\n      doChannelSubscribe = props.doChannelSubscribe,\n      doChannelUnsubscribe = props.doChannelUnsubscribe,\n      isSubscribed = props.isSubscribed,\n      doToast = props.doToast,\n      _props$shrinkOnMobile = props.shrinkOnMobile,\n      shrinkOnMobile = _props$shrinkOnMobile === void 0 ? false : _props$shrinkOnMobile,\n      notificationsDisabled = props.notificationsDisabled,\n      user = props.user,\n      uri = props.uri,\n      preferEmbed = props.preferEmbed;\n  var buttonRef = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useRef\"])();\n  var isMobile = Object(effects_use_screensize__WEBPACK_IMPORTED_MODULE_5__[\"useIsMobile\"])();\n  var isHovering = Object(effects_use_hover__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(buttonRef);\n  isHovering = isMobile ? true : isHovering;\n  var uiNotificationsEnabled = user && user.experimental_ui || config__WEBPACK_IMPORTED_MODULE_6__[\"ENABLE_UI_NOTIFICATIONS\"];\n\n  var _parseURI = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_2__[\"parseURI\"])(uri),\n      rawChannelName = _parseURI.channelName;\n\n  var channelName;\n\n  if (permanentUrl) {\n    try {\n      var _parseURI2 = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_2__[\"parseURI\"])(permanentUrl),\n          name = _parseURI2.channelName;\n\n      if (name) {\n        channelName = name;\n      }\n    } catch (e) {}\n  }\n\n  var claimName = channelName && '@' + channelName;\n\n  var _useBrowserNotificati = Object($web_component_browserNotificationSettings_use_browser_notifications__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(),\n      pushSupported = _useBrowserNotificati.pushSupported,\n      pushEnabled = _useBrowserNotificati.pushEnabled,\n      pushRequest = _useBrowserNotificati.pushRequest,\n      pushErrorModal = _useBrowserNotificati.pushErrorModal;\n\n  var subscriptionHandler = isSubscribed ? doChannelUnsubscribe : doChannelSubscribe;\n  var subscriptionLabel = isSubscribed ? __('Following --[button label indicating a channel has been followed]--') : __('Follow');\n\n  var unfollowOverride = isSubscribed && isHovering && __('Unfollow');\n\n  var label = isMobile && shrinkOnMobile ? '' : unfollowOverride || subscriptionLabel;\n  var titlePrefix = isSubscribed ? __('Unfollow this channel') : __('Follow this channel');\n\n  if (!preferEmbed && isSubscribed && !permanentUrl && rawChannelName) {\n    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n      className: \"button-group button-group-subscribed\"\n    }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n      ref: buttonRef,\n      iconColor: \"red\",\n      largestLabel: isMobile && shrinkOnMobile ? '' : subscriptionLabel,\n      icon: constants_icons__WEBPACK_IMPORTED_MODULE_0__[\"UNSUBSCRIBE\"],\n      button: 'alt',\n      requiresAuth: true,\n      label: label,\n      title: titlePrefix,\n      onClick: function onClick(e) {\n        e.stopPropagation();\n        subscriptionHandler({\n          channelName: '@' + rawChannelName,\n          uri: uri,\n          notificationsDisabled: true\n        }, true);\n      }\n    }));\n  }\n\n  return !preferEmbed && permanentUrl && claimName ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n    className: \"button-group\"\n  }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n    ref: buttonRef,\n    iconColor: \"red\",\n    className: isSubscribed ? 'button-following' : '',\n    largestLabel: isMobile && shrinkOnMobile ? '' : subscriptionLabel,\n    icon: unfollowOverride ? constants_icons__WEBPACK_IMPORTED_MODULE_0__[\"UNSUBSCRIBE\"] : isSubscribed ? constants_icons__WEBPACK_IMPORTED_MODULE_0__[\"SUBSCRIBED\"] : constants_icons__WEBPACK_IMPORTED_MODULE_0__[\"SUBSCRIBE\"],\n    button: 'alt',\n    requiresAuth: true,\n    label: label,\n    title: titlePrefix,\n    onClick: function onClick(e) {\n      e.stopPropagation();\n      subscriptionHandler({\n        channelName: claimName,\n        uri: permanentUrl,\n        notificationsDisabled: true\n      }, true);\n    }\n  }), isSubscribed && uiNotificationsEnabled && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n    button: \"alt\",\n    icon: notificationsDisabled ? constants_icons__WEBPACK_IMPORTED_MODULE_0__[\"BELL\"] : constants_icons__WEBPACK_IMPORTED_MODULE_0__[\"BELL_ON\"],\n    className: isSubscribed ? 'button-following' : '',\n    \"aria-label\": notificationsDisabled ? __('Turn on notifications') : __('Turn off notifications'),\n    onClick: function onClick() {\n      var newNotificationsDisabled = !notificationsDisabled;\n      doChannelSubscribe({\n        channelName: claimName,\n        uri: permanentUrl,\n        notificationsDisabled: newNotificationsDisabled\n      }, false);\n      doToast({\n        message: __(newNotificationsDisabled ? 'Notifications turned off for %channel%' : 'Notifications turned on for %channel%!', {\n          channel: claimName\n        })\n      });\n\n      if (!newNotificationsDisabled && pushSupported && !pushEnabled) {\n        pushRequest();\n      }\n    }\n  }), pushErrorModal())) : null;\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvY29tcG9uZW50L3N1YnNjcmliZUJ1dHRvbi92aWV3LmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi91aS9jb21wb25lbnQvc3Vic2NyaWJlQnV0dG9uL3ZpZXcuanN4PzJiNGIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcbmltcG9ydCAqIGFzIElDT05TIGZyb20gJ2NvbnN0YW50cy9pY29ucyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgcGFyc2VVUkkgfSBmcm9tICd1dGlsL2xicnlVUkknO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdjb21wb25lbnQvYnV0dG9uJztcbmltcG9ydCB1c2VIb3ZlciBmcm9tICdlZmZlY3RzL3VzZS1ob3Zlcic7XG5pbXBvcnQgeyB1c2VJc01vYmlsZSB9IGZyb20gJ2VmZmVjdHMvdXNlLXNjcmVlbnNpemUnO1xuaW1wb3J0IHsgRU5BQkxFX1VJX05PVElGSUNBVElPTlMgfSBmcm9tICdjb25maWcnO1xuaW1wb3J0IHVzZUJyb3dzZXJOb3RpZmljYXRpb25zIGZyb20gJyR3ZWIvY29tcG9uZW50L2Jyb3dzZXJOb3RpZmljYXRpb25TZXR0aW5ncy91c2UtYnJvd3Nlci1ub3RpZmljYXRpb25zJztcblxudHlwZSBTdWJzY3JpcHRpb25BcmdzID0ge1xuICBjaGFubmVsTmFtZTogc3RyaW5nLFxuICB1cmk6IHN0cmluZyxcbiAgbm90aWZpY2F0aW9uc0Rpc2FibGVkPzogYm9vbGVhbixcbn07XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHBlcm1hbmVudFVybDogP3N0cmluZyxcbiAgaXNTdWJzY3JpYmVkOiBib29sZWFuLFxuICBkb0NoYW5uZWxTdWJzY3JpYmU6IChTdWJzY3JpcHRpb25BcmdzLCBib29sZWFuKSA9PiB2b2lkLFxuICBkb0NoYW5uZWxVbnN1YnNjcmliZTogKFN1YnNjcmlwdGlvbkFyZ3MsIGJvb2xlYW4pID0+IHZvaWQsXG4gIGRvVG9hc3Q6ICh7IG1lc3NhZ2U6IHN0cmluZyB9KSA9PiB2b2lkLFxuICBzaHJpbmtPbk1vYmlsZTogYm9vbGVhbixcbiAgbm90aWZpY2F0aW9uc0Rpc2FibGVkOiBib29sZWFuLFxuICB1c2VyOiA/VXNlcixcbiAgdXJpOiBzdHJpbmcsXG4gIHByZWZlckVtYmVkOiBib29sZWFuLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gU3Vic2NyaWJlQnV0dG9uKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7XG4gICAgcGVybWFuZW50VXJsLFxuICAgIGRvQ2hhbm5lbFN1YnNjcmliZSxcbiAgICBkb0NoYW5uZWxVbnN1YnNjcmliZSxcbiAgICBpc1N1YnNjcmliZWQsXG4gICAgZG9Ub2FzdCxcbiAgICBzaHJpbmtPbk1vYmlsZSA9IGZhbHNlLFxuICAgIG5vdGlmaWNhdGlvbnNEaXNhYmxlZCxcbiAgICB1c2VyLFxuICAgIHVyaSxcbiAgICBwcmVmZXJFbWJlZCxcbiAgfSA9IHByb3BzO1xuXG4gIGNvbnN0IGJ1dHRvblJlZiA9IHVzZVJlZigpO1xuICBjb25zdCBpc01vYmlsZSA9IHVzZUlzTW9iaWxlKCk7XG4gIGxldCBpc0hvdmVyaW5nID0gdXNlSG92ZXIoYnV0dG9uUmVmKTtcbiAgaXNIb3ZlcmluZyA9IGlzTW9iaWxlID8gdHJ1ZSA6IGlzSG92ZXJpbmc7XG4gIGNvbnN0IHVpTm90aWZpY2F0aW9uc0VuYWJsZWQgPSAodXNlciAmJiB1c2VyLmV4cGVyaW1lbnRhbF91aSkgfHwgRU5BQkxFX1VJX05PVElGSUNBVElPTlM7XG5cbiAgY29uc3QgeyBjaGFubmVsTmFtZTogcmF3Q2hhbm5lbE5hbWUgfSA9IHBhcnNlVVJJKHVyaSk7XG5cbiAgbGV0IGNoYW5uZWxOYW1lO1xuXG4gIGlmIChwZXJtYW5lbnRVcmwpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBjaGFubmVsTmFtZTogbmFtZSB9ID0gcGFyc2VVUkkocGVybWFuZW50VXJsKTtcbiAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgIGNoYW5uZWxOYW1lID0gbmFtZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7fVxuICB9XG4gIGNvbnN0IGNsYWltTmFtZSA9IGNoYW5uZWxOYW1lICYmICdAJyArIGNoYW5uZWxOYW1lO1xuXG4gIGNvbnN0IHsgcHVzaFN1cHBvcnRlZCwgcHVzaEVuYWJsZWQsIHB1c2hSZXF1ZXN0LCBwdXNoRXJyb3JNb2RhbCB9ID0gdXNlQnJvd3Nlck5vdGlmaWNhdGlvbnMoKTtcblxuICBjb25zdCBzdWJzY3JpcHRpb25IYW5kbGVyID0gaXNTdWJzY3JpYmVkID8gZG9DaGFubmVsVW5zdWJzY3JpYmUgOiBkb0NoYW5uZWxTdWJzY3JpYmU7XG5cbiAgY29uc3Qgc3Vic2NyaXB0aW9uTGFiZWwgPSBpc1N1YnNjcmliZWRcbiAgICA/IF9fKCdGb2xsb3dpbmcgLS1bYnV0dG9uIGxhYmVsIGluZGljYXRpbmcgYSBjaGFubmVsIGhhcyBiZWVuIGZvbGxvd2VkXS0tJylcbiAgICA6IF9fKCdGb2xsb3cnKTtcbiAgY29uc3QgdW5mb2xsb3dPdmVycmlkZSA9IGlzU3Vic2NyaWJlZCAmJiBpc0hvdmVyaW5nICYmIF9fKCdVbmZvbGxvdycpO1xuXG4gIGNvbnN0IGxhYmVsID0gaXNNb2JpbGUgJiYgc2hyaW5rT25Nb2JpbGUgPyAnJyA6IHVuZm9sbG93T3ZlcnJpZGUgfHwgc3Vic2NyaXB0aW9uTGFiZWw7XG4gIGNvbnN0IHRpdGxlUHJlZml4ID0gaXNTdWJzY3JpYmVkID8gX18oJ1VuZm9sbG93IHRoaXMgY2hhbm5lbCcpIDogX18oJ0ZvbGxvdyB0aGlzIGNoYW5uZWwnKTtcblxuICBpZiAoIXByZWZlckVtYmVkICYmIGlzU3Vic2NyaWJlZCAmJiAhcGVybWFuZW50VXJsICYmIHJhd0NoYW5uZWxOYW1lKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uLWdyb3VwIGJ1dHRvbi1ncm91cC1zdWJzY3JpYmVkXCI+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICByZWY9e2J1dHRvblJlZn1cbiAgICAgICAgICBpY29uQ29sb3I9XCJyZWRcIlxuICAgICAgICAgIGxhcmdlc3RMYWJlbD17aXNNb2JpbGUgJiYgc2hyaW5rT25Nb2JpbGUgPyAnJyA6IHN1YnNjcmlwdGlvbkxhYmVsfVxuICAgICAgICAgIGljb249e0lDT05TLlVOU1VCU0NSSUJFfVxuICAgICAgICAgIGJ1dHRvbj17J2FsdCd9XG4gICAgICAgICAgcmVxdWlyZXNBdXRoPXtJU19XRUJ9XG4gICAgICAgICAgbGFiZWw9e2xhYmVsfVxuICAgICAgICAgIHRpdGxlPXt0aXRsZVByZWZpeH1cbiAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uSGFuZGxlcihcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNoYW5uZWxOYW1lOiAnQCcgKyByYXdDaGFubmVsTmFtZSxcbiAgICAgICAgICAgICAgICB1cmk6IHVyaSxcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25zRGlzYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gIXByZWZlckVtYmVkICYmIHBlcm1hbmVudFVybCAmJiBjbGFpbU5hbWUgPyAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b24tZ3JvdXBcIj5cbiAgICAgIDxCdXR0b25cbiAgICAgICAgcmVmPXtidXR0b25SZWZ9XG4gICAgICAgIGljb25Db2xvcj1cInJlZFwiXG4gICAgICAgIGNsYXNzTmFtZT17aXNTdWJzY3JpYmVkID8gJ2J1dHRvbi1mb2xsb3dpbmcnIDogJyd9XG4gICAgICAgIGxhcmdlc3RMYWJlbD17aXNNb2JpbGUgJiYgc2hyaW5rT25Nb2JpbGUgPyAnJyA6IHN1YnNjcmlwdGlvbkxhYmVsfVxuICAgICAgICBpY29uPXt1bmZvbGxvd092ZXJyaWRlID8gSUNPTlMuVU5TVUJTQ1JJQkUgOiBpc1N1YnNjcmliZWQgPyBJQ09OUy5TVUJTQ1JJQkVEIDogSUNPTlMuU1VCU0NSSUJFfVxuICAgICAgICBidXR0b249eydhbHQnfVxuICAgICAgICByZXF1aXJlc0F1dGg9e0lTX1dFQn1cbiAgICAgICAgbGFiZWw9e2xhYmVsfVxuICAgICAgICB0aXRsZT17dGl0bGVQcmVmaXh9XG4gICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgIHN1YnNjcmlwdGlvbkhhbmRsZXIoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNoYW5uZWxOYW1lOiBjbGFpbU5hbWUsXG4gICAgICAgICAgICAgIHVyaTogcGVybWFuZW50VXJsLFxuICAgICAgICAgICAgICBub3RpZmljYXRpb25zRGlzYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICk7XG4gICAgICAgIH19XG4gICAgICAvPlxuICAgICAge2lzU3Vic2NyaWJlZCAmJiB1aU5vdGlmaWNhdGlvbnNFbmFibGVkICYmIChcbiAgICAgICAgPD5cbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBidXR0b249XCJhbHRcIlxuICAgICAgICAgICAgaWNvbj17bm90aWZpY2F0aW9uc0Rpc2FibGVkID8gSUNPTlMuQkVMTCA6IElDT05TLkJFTExfT059XG4gICAgICAgICAgICBjbGFzc05hbWU9e2lzU3Vic2NyaWJlZCA/ICdidXR0b24tZm9sbG93aW5nJyA6ICcnfVxuICAgICAgICAgICAgYXJpYS1sYWJlbD17bm90aWZpY2F0aW9uc0Rpc2FibGVkID8gX18oJ1R1cm4gb24gbm90aWZpY2F0aW9ucycpIDogX18oJ1R1cm4gb2ZmIG5vdGlmaWNhdGlvbnMnKX1cbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgbmV3Tm90aWZpY2F0aW9uc0Rpc2FibGVkID0gIW5vdGlmaWNhdGlvbnNEaXNhYmxlZDtcblxuICAgICAgICAgICAgICBkb0NoYW5uZWxTdWJzY3JpYmUoXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgY2hhbm5lbE5hbWU6IGNsYWltTmFtZSxcbiAgICAgICAgICAgICAgICAgIHVyaTogcGVybWFuZW50VXJsLFxuICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uc0Rpc2FibGVkOiBuZXdOb3RpZmljYXRpb25zRGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgIGRvVG9hc3Qoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IF9fKFxuICAgICAgICAgICAgICAgICAgbmV3Tm90aWZpY2F0aW9uc0Rpc2FibGVkXG4gICAgICAgICAgICAgICAgICAgID8gJ05vdGlmaWNhdGlvbnMgdHVybmVkIG9mZiBmb3IgJWNoYW5uZWwlJ1xuICAgICAgICAgICAgICAgICAgICA6ICdOb3RpZmljYXRpb25zIHR1cm5lZCBvbiBmb3IgJWNoYW5uZWwlIScsXG4gICAgICAgICAgICAgICAgICB7IGNoYW5uZWw6IGNsYWltTmFtZSB9XG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgaWYgKCFuZXdOb3RpZmljYXRpb25zRGlzYWJsZWQgJiYgcHVzaFN1cHBvcnRlZCAmJiAhcHVzaEVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBwdXNoUmVxdWVzdCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG4gICAgICAgICAge3B1c2hFcnJvck1vZGFsKCl9XG4gICAgICAgIDwvPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKSA6IG51bGw7XG59XG4iXSwibWFwcGluZ3MiOiJBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFxQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkJBO0FBQUE7QUFDQTtBQXFCQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFqQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBbUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU9BO0FBcEJBO0FBd0JBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU9BO0FBckJBO0FBMEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFRQTtBQUNBO0FBSUE7QUFBQTtBQUxBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQTdCQTtBQW9DQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../ui/component/subscribeButton/view.jsx\n");

/***/ }),

/***/ "../ui/component/viewers/videoViewer/internal/videojs.jsx":
/*!****************************************************************!*\
  !*** ../ui/component/viewers/videoViewer/internal/videojs.jsx ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony import */ var videojs_contrib_ads__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! videojs-contrib-ads */ \"../node_modules/videojs-contrib-ads/dist/videojs-contrib-ads.es.js\");\n/* harmony import */ var videojs_ima__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! videojs-ima */ \"../node_modules/videojs-ima/dist/videojs.ima.es.js\");\n/* harmony import */ var videojs_vtt_thumbnails__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! videojs-vtt-thumbnails */ \"../node_modules/videojs-vtt-thumbnails/dist/videojs-vtt-thumbnails.es.js\");\n/* harmony import */ var video_js_dist_alt_video_js_cdn_min_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! video.js/dist/alt/video-js-cdn.min.css */ \"../node_modules/video.js/dist/alt/video-js-cdn.min.css\");\n/* harmony import */ var video_js_dist_alt_video_js_cdn_min_css__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(video_js_dist_alt_video_js_cdn_min_css__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _plugins_videojs_mobile_ui_plugin__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./plugins/videojs-mobile-ui/plugin */ \"../ui/component/viewers/videoViewer/internal/plugins/videojs-mobile-ui/plugin.js\");\n/* harmony import */ var _silvermine_videojs_chromecast_dist_silvermine_videojs_chromecast_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @silvermine/videojs-chromecast/dist/silvermine-videojs-chromecast.css */ \"../node_modules/@silvermine/videojs-chromecast/dist/silvermine-videojs-chromecast.css\");\n/* harmony import */ var _silvermine_videojs_chromecast_dist_silvermine_videojs_chromecast_css__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_silvermine_videojs_chromecast_dist_silvermine_videojs_chromecast_css__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _silvermine_videojs_airplay_dist_silvermine_videojs_airplay_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @silvermine/videojs-airplay/dist/silvermine-videojs-airplay.css */ \"../node_modules/@silvermine/videojs-airplay/dist/silvermine-videojs-airplay.css\");\n/* harmony import */ var _silvermine_videojs_airplay_dist_silvermine_videojs_airplay_css__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_silvermine_videojs_airplay_dist_silvermine_videojs_airplay_css__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var constants_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! constants/icons */ \"../ui/constants/icons.js\");\n/* harmony import */ var constants_player__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! constants/player */ \"../ui/constants/player.js\");\n/* harmony import */ var _overlays__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./overlays */ \"../ui/component/viewers/videoViewer/internal/overlays.js\");\n/* harmony import */ var component_button__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! component/button */ \"../ui/component/button/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! classnames */ \"../node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _videojs_events__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./videojs-events */ \"../ui/component/viewers/videoViewer/internal/videojs-events.jsx\");\n/* harmony import */ var videojs_event_tracking__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! videojs-event-tracking */ \"../node_modules/videojs-event-tracking/dist/videojs-event-tracking.es.js\");\n/* harmony import */ var _videojs_functions__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./videojs-functions */ \"../ui/component/viewers/videoViewer/internal/videojs-functions.jsx\");\n/* harmony import */ var _plugins_videojs_hls_quality_selector_plugin__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./plugins/videojs-hls-quality-selector/plugin */ \"../ui/component/viewers/videoViewer/internal/plugins/videojs-hls-quality-selector/plugin.js\");\n/* harmony import */ var _videojs_shortcuts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./videojs-shortcuts */ \"../ui/component/viewers/videoViewer/internal/videojs-shortcuts.jsx\");\n/* harmony import */ var _lbry_playback_rate__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./lbry-playback-rate */ \"../ui/component/viewers/videoViewer/internal/lbry-playback-rate.js\");\n/* harmony import */ var player_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! player.js */ \"../node_modules/player.js/dist/player-0.1.0.js\");\n/* harmony import */ var player_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(player_js__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var videojs_contrib_quality_levels__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! videojs-contrib-quality-levels */ \"../node_modules/videojs-contrib-quality-levels/dist/videojs-contrib-quality-levels.es.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! react */ \"../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_20__);\n/* harmony import */ var _plugins_videojs_i18n_plugin__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./plugins/videojs-i18n/plugin */ \"../ui/component/viewers/videoViewer/internal/plugins/videojs-i18n/plugin.js\");\n/* harmony import */ var _plugins_videojs_recsys_plugin__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./plugins/videojs-recsys/plugin */ \"../ui/component/viewers/videoViewer/internal/plugins/videojs-recsys/plugin.js\");\n/* harmony import */ var video_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! video.js */ \"../node_modules/video.js/dist/video.es.js\");\n/* harmony import */ var effects_use_screensize__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! effects/use-screensize */ \"../ui/effects/use-screensize.js\");\n/* harmony import */ var util_platform__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! util/platform */ \"../ui/util/platform.js\");\n/* harmony import */ var effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! effects/use-persisted-state */ \"../ui/effects/use-persisted-state.js\");\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\n // must be loaded in this order\n\n // loads directly after contrib-ads\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // import LbryVolumeBarClass from './lbry-volume-bar';\n// import Chromecast from './chromecast';\n\n\n\n\n\n // import runAds from './ads';\n\n\n\n\n\n\nvar canAutoplayVideo = __webpack_require__(/*! ./plugins/canAutoplay */ \"../ui/component/viewers/videoViewer/internal/plugins/canAutoplay.js\"); // require('@neko/videojs-chromecast')(videojs);\n\n\nvar VIDEOJS_VOLUME_PANEL_CLASS = 'VolumePanel';\nvar IS_IOS = util_platform__WEBPACK_IMPORTED_MODULE_25__[\"platform\"].isIOS();\nvar PLUGIN_MAP = {\n  eventTracking: videojs_event_tracking__WEBPACK_IMPORTED_MODULE_13__[\"default\"],\n  hlsQualitySelector: _plugins_videojs_hls_quality_selector_plugin__WEBPACK_IMPORTED_MODULE_15__[\"default\"],\n  qualityLevels: videojs_contrib_quality_levels__WEBPACK_IMPORTED_MODULE_19__[\"default\"],\n  recsys: _plugins_videojs_recsys_plugin__WEBPACK_IMPORTED_MODULE_22__[\"default\"],\n  i18n: _plugins_videojs_i18n_plugin__WEBPACK_IMPORTED_MODULE_21__[\"default\"]\n};\nObject.entries(PLUGIN_MAP).forEach(function (_ref) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      pluginName = _ref2[0],\n      plugin = _ref2[1];\n\n  if (!Object.keys(video_js__WEBPACK_IMPORTED_MODULE_23__[\"default\"].getPlugins()).includes(pluginName)) {\n    video_js__WEBPACK_IMPORTED_MODULE_23__[\"default\"].registerPlugin(pluginName, plugin);\n  }\n}); // ****************************************************************************\n// VideoJs\n// ****************************************************************************\n\n/*\nproperties for this component should be kept to ONLY those that if changed should REQUIRE an entirely new videojs element\n */\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (react__WEBPACK_IMPORTED_MODULE_20___default.a.memo(function VideoJs(props) {\n  var autoplay = props.autoplay,\n      claimId = props.claimId,\n      channelName = props.channelName,\n      channelTitle = props.channelTitle,\n      embedded = props.embedded,\n      embeddedInternal = props.embeddedInternal,\n      isAudio = props.isAudio,\n      shareTelemetry = props.shareTelemetry,\n      source = props.source,\n      sourceType = props.sourceType,\n      startMuted = props.startMuted,\n      userId = props.userId,\n      defaultQuality = props.defaultQuality,\n      onPlayerReady = props.onPlayerReady,\n      playNext = props.playNext,\n      playPrevious = props.playPrevious,\n      toggleVideoTheaterMode = props.toggleVideoTheaterMode,\n      claimValues = props.claimValues,\n      doAnalyticsView = props.doAnalyticsView,\n      doAnalyticsBuffer = props.doAnalyticsBuffer,\n      claimRewards = props.claimRewards,\n      uri = props.uri,\n      userClaimId = props.userClaimId,\n      isLivestreamClaim = props.isLivestreamClaim,\n      activeLivestreamForChannel = props.activeLivestreamForChannel,\n      doToast = props.doToast,\n      isPurchasableContent = props.isPurchasableContent,\n      isRentableContent = props.isRentableContent; // used to notify about default quality setting\n  // if already has a quality set, no need to notify\n\n  var _usePersistedState = Object(effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_26__[\"default\"])('initial-quality-change', Boolean(defaultQuality)),\n      _usePersistedState2 = _slicedToArray(_usePersistedState, 2),\n      initialQualityChange = _usePersistedState2[0],\n      setInitialQualityChange = _usePersistedState2[1];\n\n  var isMobile = Object(effects_use_screensize__WEBPACK_IMPORTED_MODULE_24__[\"useIsMobile\"])();\n  var playerRef = Object(react__WEBPACK_IMPORTED_MODULE_20__[\"useRef\"])();\n  var containerRef = Object(react__WEBPACK_IMPORTED_MODULE_20__[\"useRef\"])();\n  var tapToUnmuteRef = Object(react__WEBPACK_IMPORTED_MODULE_20__[\"useRef\"])();\n  var tapToRetryRef = Object(react__WEBPACK_IMPORTED_MODULE_20__[\"useRef\"])();\n  var playerServerRef = Object(react__WEBPACK_IMPORTED_MODULE_20__[\"useRef\"])();\n  var volumePanelRef = Object(react__WEBPACK_IMPORTED_MODULE_20__[\"useRef\"])();\n  var keyDownHandlerRef = Object(react__WEBPACK_IMPORTED_MODULE_20__[\"useRef\"])();\n  var videoScrollHandlerRef = Object(react__WEBPACK_IMPORTED_MODULE_20__[\"useRef\"])();\n  var volumePanelScrollHandlerRef = Object(react__WEBPACK_IMPORTED_MODULE_20__[\"useRef\"])();\n\n  var _ref3 = activeLivestreamForChannel || {},\n      livestreamVideoUrl = _ref3.url;\n\n  var overrideNativeVhs = !util_platform__WEBPACK_IMPORTED_MODULE_25__[\"platform\"].isIPhone();\n  var showQualitySelector = !isLivestreamClaim && overrideNativeVhs || livestreamVideoUrl; // initiate keyboard shortcuts\n\n  var _keyboardShorcuts = Object(_videojs_shortcuts__WEBPACK_IMPORTED_MODULE_16__[\"default\"])({\n    isMobile: isMobile,\n    isLivestreamClaim: isLivestreamClaim,\n    toggleVideoTheaterMode: toggleVideoTheaterMode,\n    playNext: playNext,\n    playPrevious: playPrevious\n  }),\n      createKeyDownShortcutsHandler = _keyboardShorcuts.createKeyDownShortcutsHandler,\n      createVideoScrollShortcutsHandler = _keyboardShorcuts.createVideoScrollShortcutsHandler,\n      createVolumePanelScrollShortcutsHandler = _keyboardShorcuts.createVolumePanelScrollShortcutsHandler;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_20__[\"useState\"])('initial'),\n      _useState2 = _slicedToArray(_useState, 2),\n      reload = _useState2[0],\n      setReload = _useState2[1];\n\n  var _functions = Object(_videojs_functions__WEBPACK_IMPORTED_MODULE_14__[\"default\"])({\n    isAudio: isAudio\n  }),\n      createVideoPlayerDOM = _functions.createVideoPlayerDOM;\n\n  var _events = Object(_videojs_events__WEBPACK_IMPORTED_MODULE_12__[\"default\"])({\n    tapToUnmuteRef: tapToUnmuteRef,\n    tapToRetryRef: tapToRetryRef,\n    setReload: setReload,\n    playerRef: playerRef,\n    claimValues: claimValues,\n    userId: userId,\n    claimId: claimId,\n    embedded: embedded,\n    doAnalyticsView: doAnalyticsView,\n    doAnalyticsBuffer: doAnalyticsBuffer,\n    claimRewards: claimRewards,\n    uri: uri,\n    playerServerRef: playerServerRef,\n    isLivestreamClaim: isLivestreamClaim,\n    channelTitle: channelTitle\n  }),\n      unmuteAndHideHint = _events.unmuteAndHideHint,\n      retryVideoAfterFailure = _events.retryVideoAfterFailure,\n      initializeEvents = _events.initializeEvents;\n\n  var videoJsOptions = {\n    preload: 'auto',\n    playbackRates: constants_player__WEBPACK_IMPORTED_MODULE_8__[\"VIDEO_PLAYBACK_RATES\"],\n    responsive: true,\n    controls: true,\n    html5: {\n      vhs: {\n        overrideNative: overrideNativeVhs,\n        // !videojs.browser.IS_ANY_SAFARI,\n        enableLowInitialPlaylist: false,\n        fastQualityChange: true,\n        useDtsForTimestampOffset: true\n      }\n    },\n    liveTracker: {\n      trackingThreshold: 0,\n      liveTolerance: 10\n    },\n    inactivityTimeout: 2000,\n    muted: startMuted,\n    plugins: {\n      eventTracking: true,\n      overlay: _overlays__WEBPACK_IMPORTED_MODULE_9__[\"OVERLAY_DATA\"]\n    },\n    controlBar: {\n      currentTimeDisplay: true,\n      timeDivider: true,\n      durationDisplay: true,\n      remainingTimeDisplay: true,\n      subsCapsButton: !IS_IOS\n    },\n    techOrder: ['html5'],\n    bigPlayButton: embedded,\n    // only show big play button if embedded\n    suppressNotSupportedError: true,\n    liveui: true\n  }; // TODO: would be nice to pull this out into functions file\n  // Initialize video.js\n\n  function initializeVideoPlayer(domElement) {\n    if (!domElement) return;\n    var vjs = Object(video_js__WEBPACK_IMPORTED_MODULE_23__[\"default\"])(domElement, videoJsOptions, function _callee() {\n      var player, adapter, _claimValues$video, videoDiv;\n\n      return regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              player = playerRef.current;\n              adapter = new player_js__WEBPACK_IMPORTED_MODULE_18___default.a.VideoJSAdapter(player); // this seems like a weird thing to have to check for here\n\n              if (player) {\n                _context.next = 4;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 4:\n              // runAds(internalFeatureEnabled, allowPreRoll, player, embedded);\n              _lbry_playback_rate__WEBPACK_IMPORTED_MODULE_17__[\"default\"].replaceExisting(player); // Add reloadSourceOnError plugin\n\n              player.reloadSourceOnError({\n                errorInterval: 10\n              }); // Initialize mobile UI.\n\n              player.mobileUi({\n                fullscreen: {\n                  enterOnRotate: false\n                },\n                touchControls: {\n                  seekSeconds: 10\n                }\n              });\n              player.i18n();\n\n              if (!embedded) {\n                window.player.bigPlayButton && window.player.bigPlayButton.hide();\n              } else {// const bigPlayButton = document.querySelector('.vjs-big-play-button');\n                // if (bigPlayButton) bigPlayButton.style.setProperty('display', 'block', 'important');\n              } // Add quality selector to player\n\n\n              if (showQualitySelector) {\n                player.hlsQualitySelector({\n                  displayCurrentQuality: true,\n                  originalHeight: claimValues === null || claimValues === void 0 ? void 0 : (_claimValues$video = claimValues.video) === null || _claimValues$video === void 0 ? void 0 : _claimValues$video.height,\n                  defaultQuality: defaultQuality,\n                  initialQualityChange: initialQualityChange,\n                  setInitialQualityChange: setInitialQualityChange,\n                  doToast: doToast\n                });\n              } // Add recsys plugin\n\n\n              if (shareTelemetry) {\n                player.recsys({\n                  videoId: claimId,\n                  userId: userId,\n                  embedded: embedded || embeddedInternal\n                });\n              } // set playsinline for mobile\n\n\n              player.children_[0].setAttribute('playsinline', '');\n\n              if (canAutoplayVideo === true) {\n                // show waiting spinner as video is loading\n                player.addClass('vjs-waiting'); // $FlowFixMe\n\n                document.querySelector('.vjs-big-play-button').style.setProperty('display', 'none', 'important');\n              } else {// $FlowFixMe\n                // document.querySelector('.vjs-big-play-button').style.setProperty('display', 'block', 'important');\n              } // immediately show control bar while video is loading\n\n\n              player.userActive(true);\n              adapter.ready(); // sometimes video doesnt start properly, this addresses the edge case\n\n              if (autoplay) {\n                videoDiv = window.player.children_[0];\n\n                if (videoDiv) {\n                  videoDiv.click();\n                }\n\n                window.player.userActive(true);\n              }\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }); // fixes #3498 (https://github.com/lbryio/lbry-desktop/issues/3498)\n    // summary: on firefox the focus would stick to the fullscreen button which caused buggy behavior with spacebar\n\n    vjs.on('fullscreenchange', function () {\n      return document.activeElement && document.activeElement.blur();\n    });\n    return vjs;\n  } // useEffect(() => {\n  //   if (showQualitySelector) {\n  //     // Add quality selector to player\n  //     const player = playerRef.current;\n  //     if (player) player.hlsQualitySelector({ displayCurrentQuality: true });\n  //   }\n  // }, [showQualitySelector]);\n\n  /*\n  useEffect(() => {\n    Chromecast.updateTitles(title, channelTitle);\n  }, [title, channelTitle]);\n  */\n  // This lifecycle hook is only called once (on mount), or when `isAudio` or `source` changes.\n\n\n  Object(react__WEBPACK_IMPORTED_MODULE_20__[\"useEffect\"])(function () {\n    (function _callee2() {\n      var _playerRef$current, _playerRef$current$co, _playerRef$current$co2, _vjsPlayer$controlBar7;\n\n      var vjsPlayer, vjsParent, canUseOldPlayer, isLivestream, vjsElement, _vjsPlayer$controlBar, _vjsPlayer$controlBar2, _vjsPlayer$controlBar3, _vjsPlayer$controlBar4, _vjsPlayer$controlBar5, _vjsPlayer$controlBar6, _vjsPlayer$bigPlayBut, videoNode, keyDownHandler, videoScrollHandler, volumePanelHandler, containerDiv, response, trimmedUrl, payload, _payload, _document$querySelect, player, promise;\n\n      return regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              vjsParent = document.querySelector('.video-js-parent');\n              canUseOldPlayer = window.oldSavedDiv && vjsParent;\n              isLivestream = isLivestreamClaim && userClaimId; // initialize videojs if it hasn't been done yet\n\n              if (canUseOldPlayer) {\n                _context2.next = 11;\n                break;\n              }\n\n              vjsElement = createVideoPlayerDOM(containerRef.current);\n              vjsPlayer = initializeVideoPlayer(vjsElement);\n\n              if (vjsPlayer) {\n                _context2.next = 8;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 8:\n              // Add reference to player to global scope\n              window.player = vjsPlayer;\n              _context2.next = 12;\n              break;\n\n            case 11:\n              vjsPlayer = window.player;\n\n            case 12:\n              // hide unused elements on livestream\n              if (isLivestream) {\n                vjsPlayer.addClass('vjs-live');\n                vjsPlayer.addClass('vjs-liveui'); // $FlowIssue\n\n                (_vjsPlayer$controlBar = vjsPlayer.controlBar.currentTimeDisplay) === null || _vjsPlayer$controlBar === void 0 ? void 0 : _vjsPlayer$controlBar.el().style.setProperty('display', 'none', 'important'); // $FlowIssue\n\n                (_vjsPlayer$controlBar2 = vjsPlayer.controlBar.timeDivider) === null || _vjsPlayer$controlBar2 === void 0 ? void 0 : _vjsPlayer$controlBar2.el().style.setProperty('display', 'none', 'important'); // $FlowIssue\n\n                (_vjsPlayer$controlBar3 = vjsPlayer.controlBar.durationDisplay) === null || _vjsPlayer$controlBar3 === void 0 ? void 0 : _vjsPlayer$controlBar3.el().style.setProperty('display', 'none', 'important');\n              } else {\n                vjsPlayer.removeClass('vjs-live');\n                vjsPlayer.removeClass('vjs-liveui'); // $FlowIssue\n\n                (_vjsPlayer$controlBar4 = vjsPlayer.controlBar.currentTimeDisplay) === null || _vjsPlayer$controlBar4 === void 0 ? void 0 : _vjsPlayer$controlBar4.el().style.setProperty('display', 'block', 'important'); // $FlowIssue\n\n                (_vjsPlayer$controlBar5 = vjsPlayer.controlBar.timeDivider) === null || _vjsPlayer$controlBar5 === void 0 ? void 0 : _vjsPlayer$controlBar5.el().style.setProperty('display', 'block', 'important'); // $FlowIssue\n\n                (_vjsPlayer$controlBar6 = vjsPlayer.controlBar.durationDisplay) === null || _vjsPlayer$controlBar6 === void 0 ? void 0 : _vjsPlayer$controlBar6.el().style.setProperty('display', 'block', 'important');\n              } // Add recsys plugin\n\n\n              if (shareTelemetry) {\n                vjsPlayer.recsys.options_ = {\n                  videoId: claimId,\n                  userId: userId,\n                  embedded: embedded || embeddedInternal\n                };\n                vjsPlayer.recsys.lastTimeUpdate = null;\n                vjsPlayer.recsys.currentTimeUpdate = null;\n                vjsPlayer.recsys.inPause = false;\n                vjsPlayer.recsys.watchedDuration = {\n                  total: 0,\n                  lastTimestamp: -1\n                };\n              }\n\n              if (!embedded) {\n                vjsPlayer.bigPlayButton && window.player.bigPlayButton.hide();\n              } else {\n                // $FlowIssue\n                (_vjsPlayer$bigPlayBut = vjsPlayer.bigPlayButton) === null || _vjsPlayer$bigPlayBut === void 0 ? void 0 : _vjsPlayer$bigPlayBut.show();\n              } // I think this is a callback function\n\n\n              videoNode = containerRef.current && containerRef.current.querySelector('video, audio'); // add theatre and autoplay next button and initiate player events\n\n              onPlayerReady(vjsPlayer, videoNode); // Set reference in component state\n\n              playerRef.current = vjsPlayer;\n              initializeEvents(); // volume control div, used for changing volume when scrolled over\n              // $FlowIssue\n\n              volumePanelRef.current = (_playerRef$current = playerRef.current) === null || _playerRef$current === void 0 ? void 0 : (_playerRef$current$co = _playerRef$current.controlBar) === null || _playerRef$current$co === void 0 ? void 0 : (_playerRef$current$co2 = _playerRef$current$co.getChild(VIDEOJS_VOLUME_PANEL_CLASS)) === null || _playerRef$current$co2 === void 0 ? void 0 : _playerRef$current$co2.el();\n              keyDownHandler = createKeyDownShortcutsHandler(playerRef, containerRef);\n              videoScrollHandler = createVideoScrollShortcutsHandler(playerRef, containerRef);\n              volumePanelHandler = createVolumePanelScrollShortcutsHandler(volumePanelRef, playerRef, containerRef);\n              window.addEventListener('keydown', keyDownHandler);\n              containerDiv = containerRef.current;\n              containerDiv && containerDiv.addEventListener('wheel', videoScrollHandler);\n              if (volumePanelRef.current) volumePanelRef.current.addEventListener('wheel', volumePanelHandler);\n              keyDownHandlerRef.current = keyDownHandler;\n              videoScrollHandlerRef.current = videoScrollHandler;\n              volumePanelScrollHandlerRef.current = volumePanelHandler; // $FlowIssue\n\n              (_vjsPlayer$controlBar7 = vjsPlayer.controlBar) === null || _vjsPlayer$controlBar7 === void 0 ? void 0 : _vjsPlayer$controlBar7.show(); // vjsPlayer.poster(poster);\n\n              vjsPlayer.el().childNodes[0].setAttribute('playsinline', ''); // let contentUrl;\n              // TODO: pull this function into videojs-functions\n              // determine which source to use and load it\n\n              if (!isLivestream) {\n                _context2.next = 38;\n                break;\n              }\n\n              vjsPlayer.isLivestream = true;\n              vjsPlayer.addClass('livestreamPlayer');\n              vjsPlayer.src({\n                type: 'application/x-mpegURL',\n                src: livestreamVideoUrl\n              });\n              _context2.next = 50;\n              break;\n\n            case 38:\n              vjsPlayer.isLivestream = false;\n              vjsPlayer.removeClass('livestreamPlayer');\n              _context2.next = 42;\n              return regeneratorRuntime.awrap(fetch(source, {\n                method: 'HEAD',\n                cache: 'no-store'\n              }));\n\n            case 42:\n              response = _context2.sent;\n              playerServerRef.current = response.headers.get('x-powered-by');\n              vjsPlayer.claimSrcOriginal = {\n                type: sourceType,\n                src: source\n              }; // remove query params for secured endpoints (which have query params on end of m3u8 path)\n\n              trimmedUrl = new URL(response.url);\n              trimmedUrl.hash = '';\n              trimmedUrl.search = '';\n              trimmedUrl = trimmedUrl.toString(); // change to m3u8 if applicable\n\n              if (response && response.redirected && response.url && trimmedUrl.endsWith('m3u8')) {\n                vjsPlayer.claimSrcVhs = {\n                  type: 'application/x-mpegURL',\n                  src: response.url\n                };\n                vjsPlayer.src(vjsPlayer.claimSrcVhs);\n\n                if (window.cordova) {\n                  payload = {\n                    uri: response.url,\n                    claim: claimValues,\n                    fileType: 'application/x-mpegURL',\n                    channel: channelTitle\n                  };\n                  window.odysee.chromecast.setMediaPayload(payload);\n                }\n              } else {\n                vjsPlayer.src(vjsPlayer.claimSrcOriginal);\n\n                if (window.cordova) {\n                  _payload = {\n                    uri: vjsPlayer.claimSrcOriginal.src,\n                    claim: claimValues,\n                    fileType: sourceType,\n                    channel: channelTitle\n                  };\n                  window.odysee.chromecast.setMediaPayload(_payload);\n                }\n              }\n\n            case 50:\n              // bugfix thumbnails showing up if new video doesn't have them\n              if (typeof vjsPlayer.vttThumbnails.detach === 'function') {\n                vjsPlayer.vttThumbnails.detach();\n              }\n              /*\n              // initialize hover thumbnails\n              if (contentUrl) {\n                const trimmedPath = contentUrl.substring(0, contentUrl.lastIndexOf('/'));\n                const thumbnailPath = trimmedPath + '/stream_sprite.vtt';\n                 // progress bar hover thumbnails\n                if (!IS_MOBILE) {\n                  // if src is a function, it's already been initialized\n                  if (typeof vjsPlayer.vttThumbnails.src === 'function') {\n                    vjsPlayer.vttThumbnails.src(thumbnailPath);\n                  } else {\n                    // otherwise, initialize plugin\n                    vjsPlayer.vttThumbnails({\n                      src: thumbnailPath,\n                      showTimestamp: true,\n                    });\n                  }\n                }\n              }\n              */\n\n\n              vjsPlayer.load();\n\n              if (canUseOldPlayer) {\n                // $FlowIssue\n                (_document$querySelect = document.querySelector('.video-js-parent')) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.append(window.oldSavedDiv);\n              } // disable right-click (context-menu) for purchased content\n\n\n              if (isPurchasableContent || isRentableContent) {\n                player = document.querySelector('video.vjs-tech');\n                if (player) player.setAttribute('oncontextmenu', 'return false;');\n              } // allow tap to unmute if no perms on iOS\n\n\n              if (autoplay && !embedded) {\n                promise = vjsPlayer.play();\n                window.player.userActive(true);\n\n                if (promise !== undefined) {\n                  promise.then(function (_) {\n                    var _vjsPlayer; // $FlowIssue\n\n\n                    (_vjsPlayer = vjsPlayer) === null || _vjsPlayer === void 0 ? void 0 : _vjsPlayer.controlBar.el().classList.add('vjs-transitioning-video');\n                  })[\"catch\"](function (error) {\n                    var noPermissionError = _typeof(error) === 'object' && error.name && error.name === 'NotAllowedError';\n\n                    if (noPermissionError) {\n                      if (IS_IOS) {\n                        var _vjsPlayer2, _vjsPlayer3; // autoplay not allowed, mute video, play and show 'tap to unmute' button\n                        // $FlowIssue\n\n\n                        (_vjsPlayer2 = vjsPlayer) === null || _vjsPlayer2 === void 0 ? void 0 : _vjsPlayer2.muted(true); // $FlowIssue\n\n                        var mutedPlayPromise = (_vjsPlayer3 = vjsPlayer) === null || _vjsPlayer3 === void 0 ? void 0 : _vjsPlayer3.play();\n\n                        if (mutedPlayPromise !== undefined) {\n                          mutedPlayPromise.then(function () {\n                            var tapToUnmuteButton = document.querySelector('.video-js--tap-to-unmute'); // $FlowIssue\n\n                            tapToUnmuteButton === null || tapToUnmuteButton === void 0 ? void 0 : tapToUnmuteButton.style.setProperty('visibility', 'visible'); // $FlowIssue\n\n                            tapToUnmuteButton === null || tapToUnmuteButton === void 0 ? void 0 : tapToUnmuteButton.style.setProperty('display', 'inline', 'important');\n                          })[\"catch\"](function (error) {\n                            var _vjsPlayer4, _vjsPlayer5, _document$querySelect2, _document$querySelect3; // $FlowFixMe\n\n\n                            (_vjsPlayer4 = vjsPlayer) === null || _vjsPlayer4 === void 0 ? void 0 : _vjsPlayer4.addClass('vjs-paused'); // $FlowFixMe\n\n                            (_vjsPlayer5 = vjsPlayer) === null || _vjsPlayer5 === void 0 ? void 0 : _vjsPlayer5.addClass('vjs-has-started'); // $FlowFixMe\n\n                            (_document$querySelect2 = document.querySelector('.vjs-touch-overlay')) === null || _document$querySelect2 === void 0 ? void 0 : _document$querySelect2.classList.add('show-play-toggle'); // $FlowFixMe\n\n                            (_document$querySelect3 = document.querySelector('.vjs-play-control')) === null || _document$querySelect3 === void 0 ? void 0 : _document$querySelect3.classList.add('vjs-paused');\n                          });\n                        }\n                      } else {\n                        var _vjsPlayer6, _vjsPlayer6$bigPlayBu; // $FlowIssue\n\n\n                        (_vjsPlayer6 = vjsPlayer) === null || _vjsPlayer6 === void 0 ? void 0 : (_vjsPlayer6$bigPlayBu = _vjsPlayer6.bigPlayButton) === null || _vjsPlayer6$bigPlayBu === void 0 ? void 0 : _vjsPlayer6$bigPlayBu.show();\n                      }\n                    }\n                  });\n                }\n              }\n\n            case 55:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      });\n    })(); // Cleanup\n\n\n    return function () {\n      window.removeEventListener('keydown', keyDownHandlerRef.current);\n      var containerDiv = containerRef.current; // $FlowFixMe\n\n      containerDiv && containerDiv.removeEventListener('wheel', videoScrollHandlerRef.current);\n\n      if (volumePanelRef.current) {\n        volumePanelRef.current.removeEventListener('wheel', volumePanelScrollHandlerRef.current);\n      }\n\n      var chapterMarkers = document.getElementsByClassName('vjs-chapter-marker');\n\n      while (chapterMarkers.length > 0) {\n        var _chapterMarkers$0$par; // $FlowIssue\n\n\n        (_chapterMarkers$0$par = chapterMarkers[0].parentNode) === null || _chapterMarkers$0$par === void 0 ? void 0 : _chapterMarkers$0$par.removeChild(chapterMarkers[0]);\n      }\n\n      var player = playerRef.current;\n\n      if (player) {\n        var _window$player, _window$player$tech_;\n\n        try {\n          window.cast.framework.CastContext.getInstance().getCurrentSession().endSession(false);\n        } catch (_unused) {}\n\n        window.player.switchedFromDefaultQuality = false;\n        window.player.userActive(false);\n        window.player.pause();\n\n        if (IS_IOS) {\n          var _window$player$contro, _window$player$contro2; // $FlowIssue\n\n\n          (_window$player$contro = window.player.controlBar) === null || _window$player$contro === void 0 ? void 0 : (_window$player$contro2 = _window$player$contro.playToggle) === null || _window$player$contro2 === void 0 ? void 0 : _window$player$contro2.hide();\n        } // this solves an issue with portrait videos\n        // $FlowIssue\n\n\n        var videoDiv = (_window$player = window.player) === null || _window$player === void 0 ? void 0 : (_window$player$tech_ = _window$player.tech_) === null || _window$player$tech_ === void 0 ? void 0 : _window$player$tech_.el(); // video element\n\n        if (videoDiv) videoDiv.style.top = '0px';\n        window.player.controlBar.el().classList.add('vjs-transitioning-video');\n        window.oldSavedDiv = window.player.el();\n        window.player.trigger('playerClosed'); // stop streams running in background\n\n        window.player.loadTech_('html5', null);\n        window.player.currentTime(0); // makes the current time update immediately\n\n        window.player.trigger('timeupdate');\n        window.player.claimSrcVhs = null;\n      }\n    };\n  }, [isAudio, source, reload, userClaimId, isLivestreamClaim]);\n  return react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_11___default()('video-js-parent', {\n      'video-js-parent--ios': IS_IOS\n    }),\n    ref: containerRef\n  }, react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(component_button__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n    label: __('Tap to unmute'),\n    button: \"link\",\n    icon: constants_icons__WEBPACK_IMPORTED_MODULE_7__[\"VOLUME_MUTED\"],\n    className: \"video-js--tap-to-unmute\",\n    onClick: unmuteAndHideHint,\n    ref: tapToUnmuteRef\n  }), react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(component_button__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n    label: __('Retry'),\n    button: \"link\",\n    icon: constants_icons__WEBPACK_IMPORTED_MODULE_7__[\"REFRESH\"],\n    className: \"video-js--tap-to-unmute\",\n    onClick: retryVideoAfterFailure,\n    ref: tapToRetryRef\n  }));\n}));\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvY29tcG9uZW50L3ZpZXdlcnMvdmlkZW9WaWV3ZXIvaW50ZXJuYWwvdmlkZW9qcy5qc3guanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vdWkvY29tcG9uZW50L3ZpZXdlcnMvdmlkZW9WaWV3ZXIvaW50ZXJuYWwvdmlkZW9qcy5qc3g/OGQ4ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuaW1wb3J0ICd2aWRlb2pzLWNvbnRyaWItYWRzJzsgLy8gbXVzdCBiZSBsb2FkZWQgaW4gdGhpcyBvcmRlclxuaW1wb3J0ICd2aWRlb2pzLWltYSc7IC8vIGxvYWRzIGRpcmVjdGx5IGFmdGVyIGNvbnRyaWItYWRzXG5pbXBvcnQgJ3ZpZGVvanMtdnR0LXRodW1ibmFpbHMnO1xuaW1wb3J0ICd2aWRlby5qcy9kaXN0L2FsdC92aWRlby1qcy1jZG4ubWluLmNzcyc7XG5pbXBvcnQgJy4vcGx1Z2lucy92aWRlb2pzLW1vYmlsZS11aS9wbHVnaW4nO1xuaW1wb3J0ICdAc2lsdmVybWluZS92aWRlb2pzLWNocm9tZWNhc3QvZGlzdC9zaWx2ZXJtaW5lLXZpZGVvanMtY2hyb21lY2FzdC5jc3MnO1xuaW1wb3J0ICdAc2lsdmVybWluZS92aWRlb2pzLWFpcnBsYXkvZGlzdC9zaWx2ZXJtaW5lLXZpZGVvanMtYWlycGxheS5jc3MnO1xuaW1wb3J0ICogYXMgSUNPTlMgZnJvbSAnY29uc3RhbnRzL2ljb25zJztcbmltcG9ydCB7IFZJREVPX1BMQVlCQUNLX1JBVEVTIH0gZnJvbSAnY29uc3RhbnRzL3BsYXllcic7XG5pbXBvcnQgKiBhcyBPVkVSTEFZIGZyb20gJy4vb3ZlcmxheXMnO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdjb21wb25lbnQvYnV0dG9uJztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IGV2ZW50cyBmcm9tICcuL3ZpZGVvanMtZXZlbnRzJztcbmltcG9ydCBldmVudFRyYWNraW5nIGZyb20gJ3ZpZGVvanMtZXZlbnQtdHJhY2tpbmcnO1xuaW1wb3J0IGZ1bmN0aW9ucyBmcm9tICcuL3ZpZGVvanMtZnVuY3Rpb25zJztcbmltcG9ydCBobHNRdWFsaXR5U2VsZWN0b3IgZnJvbSAnLi9wbHVnaW5zL3ZpZGVvanMtaGxzLXF1YWxpdHktc2VsZWN0b3IvcGx1Z2luJztcbmltcG9ydCBrZXlib2FyZFNob3JjdXRzIGZyb20gJy4vdmlkZW9qcy1zaG9ydGN1dHMnO1xuaW1wb3J0IExicnlQbGF5YmFja1JhdGVNZW51QnV0dG9uIGZyb20gJy4vbGJyeS1wbGF5YmFjay1yYXRlJztcbi8vIGltcG9ydCBMYnJ5Vm9sdW1lQmFyQ2xhc3MgZnJvbSAnLi9sYnJ5LXZvbHVtZS1iYXInO1xuLy8gaW1wb3J0IENocm9tZWNhc3QgZnJvbSAnLi9jaHJvbWVjYXN0JztcbmltcG9ydCBwbGF5ZXJqcyBmcm9tICdwbGF5ZXIuanMnO1xuaW1wb3J0IHF1YWxpdHlMZXZlbHMgZnJvbSAndmlkZW9qcy1jb250cmliLXF1YWxpdHktbGV2ZWxzJztcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgaTE4biBmcm9tICcuL3BsdWdpbnMvdmlkZW9qcy1pMThuL3BsdWdpbic7XG5pbXBvcnQgcmVjc3lzIGZyb20gJy4vcGx1Z2lucy92aWRlb2pzLXJlY3N5cy9wbHVnaW4nO1xuLy8gaW1wb3J0IHJ1bkFkcyBmcm9tICcuL2Fkcyc7XG5pbXBvcnQgdmlkZW9qcyBmcm9tICd2aWRlby5qcyc7XG5pbXBvcnQgeyB1c2VJc01vYmlsZSB9IGZyb20gJ2VmZmVjdHMvdXNlLXNjcmVlbnNpemUnO1xuaW1wb3J0IHsgcGxhdGZvcm0gfSBmcm9tICd1dGlsL3BsYXRmb3JtJztcbmltcG9ydCB1c2VQZXJzaXN0ZWRTdGF0ZSBmcm9tICdlZmZlY3RzL3VzZS1wZXJzaXN0ZWQtc3RhdGUnO1xuXG5jb25zdCBjYW5BdXRvcGxheVZpZGVvID0gcmVxdWlyZSgnLi9wbHVnaW5zL2NhbkF1dG9wbGF5Jyk7XG5cbi8vIHJlcXVpcmUoJ0BuZWtvL3ZpZGVvanMtY2hyb21lY2FzdCcpKHZpZGVvanMpO1xuXG5leHBvcnQgdHlwZSBQbGF5ZXIgPSB7XG4gIC8vIC0tIGN1c3RvbSAtLVxuICBjbGFpbVNyY09yaWdpbmFsOiA/eyBzcmM6IHN0cmluZywgdHlwZTogc3RyaW5nIH0sXG4gIGNsYWltU3JjVmhzOiA/eyBzcmM6IHN0cmluZywgdHlwZTogc3RyaW5nIH0sXG4gIGlzTGl2ZXN0cmVhbT86IGJvb2xlYW4sXG4gIC8vIC0tIHBsdWdpbnMgLS0tXG4gIG1vYmlsZVVpOiAoYW55KSA9PiB2b2lkLFxuICBjaHJvbWVjYXN0OiAoYW55KSA9PiB2b2lkLFxuICBvdmVybGF5OiAoYW55KSA9PiB2b2lkLFxuICBobHNRdWFsaXR5U2VsZWN0b3I6ID9hbnksXG4gIGkxOG46IChhbnkpID0+IHZvaWQsXG4gIC8vIC0tIGJhc2UgdmlkZW9qcyAtLVxuICBjb250cm9sQmFyOiB7XG4gICAgYWRkQ2hpbGQ6IChzdHJpbmcgfCBhbnksID9hbnksID9udW1iZXIpID0+IHZvaWQsXG4gICAgZ2V0Q2hpbGQ6IChzdHJpbmcpID0+IHZvaWQsXG4gICAgcmVtb3ZlQ2hpbGQ6IChzdHJpbmcpID0+IHZvaWQsXG4gIH0sXG4gIGxvYWRpbmdTcGlubmVyOiBhbnksXG4gIGF1dG9wbGF5OiAoYW55KSA9PiBib29sZWFuLFxuICB0ZWNoOiAoP2Jvb2xlYW4pID0+IHsgdmhzOiA/YW55IH0sXG4gIGN1cnJlbnRUaW1lOiAoP251bWJlcikgPT4gbnVtYmVyLFxuICBkaXNwb3NlOiAoKSA9PiB2b2lkLFxuICBkdXJhdGlvbjogKCkgPT4gbnVtYmVyLFxuICBlbmRlZDogKCkgPT4gYm9vbGVhbixcbiAgZXJyb3I6ICgpID0+IGFueSxcbiAgZXhpdEZ1bGxzY3JlZW46ICgpID0+IGJvb2xlYW4sXG4gIGdldENoaWxkOiAoc3RyaW5nKSA9PiBhbnksXG4gIGlzRnVsbHNjcmVlbjogKCkgPT4gYm9vbGVhbixcbiAgbXV0ZWQ6ICg/Ym9vbGVhbikgPT4gYm9vbGVhbixcbiAgb246IChzdHJpbmcsIChhbnkpID0+IHZvaWQpID0+IHZvaWQsXG4gIG9mZjogKHN0cmluZywgKGFueSkgPT4gdm9pZCkgPT4gdm9pZCxcbiAgb25lOiAoc3RyaW5nLCAoYW55KSA9PiB2b2lkKSA9PiB2b2lkLFxuICBwbGF5OiAoKSA9PiBQcm9taXNlPGFueT4sXG4gIHBsYXliYWNrUmF0ZTogKD9udW1iZXIpID0+IG51bWJlcixcbiAgcmVhZHlTdGF0ZTogKCkgPT4gbnVtYmVyLFxuICByZXF1ZXN0RnVsbHNjcmVlbjogKCkgPT4gYm9vbGVhbixcbiAgc3JjOiAoeyBzcmM6IHN0cmluZywgdHlwZTogc3RyaW5nIH0pID0+ID9zdHJpbmcsXG4gIGN1cnJlbnRTcmM6ICgpID0+IHN0cmluZyxcbiAgdXNlckFjdGl2ZTogKD9ib29sZWFuKSA9PiBib29sZWFuLFxuICB2b2x1bWU6ICg/bnVtYmVyKSA9PiBudW1iZXIsXG59O1xuXG50eXBlIFByb3BzID0ge1xuICBhZFVybDogP3N0cmluZyxcbiAgYWxsb3dQcmVSb2xsOiA/Ym9vbGVhbixcbiAgYXV0b3BsYXk6IGJvb2xlYW4sXG4gIGNsYWltSWQ6ID9zdHJpbmcsXG4gIHRpdGxlOiA/c3RyaW5nLFxuICBjaGFubmVsTmFtZTogc3RyaW5nLFxuICBjaGFubmVsVGl0bGU6IHN0cmluZyxcbiAgZW1iZWRkZWQ6IGJvb2xlYW4sIC8vIGAvJC9lbWJlZGBcbiAgZW1iZWRkZWRJbnRlcm5hbDogYm9vbGVhbiwgLy8gTWFya2Rvd24gKFBvc3RzIGFuZCBDb21tZW50cylcbiAgaW50ZXJuYWxGZWF0dXJlRW5hYmxlZDogP2Jvb2xlYW4sXG4gIGlzQXVkaW86IGJvb2xlYW4sXG4gIC8vIHBvc3RlcjogP3N0cmluZyxcbiAgc2hhcmVUZWxlbWV0cnk6IGJvb2xlYW4sXG4gIHNvdXJjZTogc3RyaW5nLFxuICBzb3VyY2VUeXBlOiBzdHJpbmcsXG4gIHN0YXJ0TXV0ZWQ6IGJvb2xlYW4sXG4gIHVzZXJJZDogP251bWJlcixcbiAgZGVmYXVsdFF1YWxpdHk6ID9zdHJpbmcsXG4gIG9uUGxheWVyUmVhZHk6IChQbGF5ZXIsIGFueSkgPT4gdm9pZCxcbiAgcGxheU5leHQ6ICgpID0+IHZvaWQsXG4gIHBsYXlQcmV2aW91czogKCkgPT4gdm9pZCxcbiAgdG9nZ2xlVmlkZW9UaGVhdGVyTW9kZTogKCkgPT4gdm9pZCxcbiAgY2xhaW1SZXdhcmRzOiAoKSA9PiB2b2lkLFxuICBkb0FuYWx5dGljc1ZpZXc6IChzdHJpbmcsIG51bWJlcikgPT4gdm9pZCxcbiAgZG9BbmFseXRpY3NCdWZmZXI6IChzdHJpbmcsIGFueSkgPT4gdm9pZCxcbiAgdXJpOiBzdHJpbmcsXG4gIGNsYWltVmFsdWVzOiBhbnksXG4gIGlzTGl2ZXN0cmVhbUNsYWltOiBib29sZWFuLFxuICB1c2VyQ2xhaW1JZDogP3N0cmluZyxcbiAgYWN0aXZlTGl2ZXN0cmVhbUZvckNoYW5uZWw6IGFueSxcbiAgZG9Ub2FzdDogKHsgbWVzc2FnZTogc3RyaW5nLCBsaW5rVGV4dDogc3RyaW5nLCBsaW5rVGFyZ2V0OiBzdHJpbmcgfSkgPT4gdm9pZCxcbiAgaXNQdXJjaGFzYWJsZUNvbnRlbnQ6IGJvb2xlYW4sXG4gIGlzUmVudGFibGVDb250ZW50OiBib29sZWFuLFxufTtcblxuY29uc3QgVklERU9KU19WT0xVTUVfUEFORUxfQ0xBU1MgPSAnVm9sdW1lUGFuZWwnO1xuXG5jb25zdCBJU19JT1MgPSBwbGF0Zm9ybS5pc0lPUygpO1xuXG5jb25zdCBQTFVHSU5fTUFQID0ge1xuICBldmVudFRyYWNraW5nOiBldmVudFRyYWNraW5nLFxuICBobHNRdWFsaXR5U2VsZWN0b3I6IGhsc1F1YWxpdHlTZWxlY3RvcixcbiAgcXVhbGl0eUxldmVsczogcXVhbGl0eUxldmVscyxcbiAgcmVjc3lzOiByZWNzeXMsXG4gIGkxOG46IGkxOG4sXG59O1xuXG5PYmplY3QuZW50cmllcyhQTFVHSU5fTUFQKS5mb3JFYWNoKChbcGx1Z2luTmFtZSwgcGx1Z2luXSkgPT4ge1xuICBpZiAoIU9iamVjdC5rZXlzKHZpZGVvanMuZ2V0UGx1Z2lucygpKS5pbmNsdWRlcyhwbHVnaW5OYW1lKSkge1xuICAgIHZpZGVvanMucmVnaXN0ZXJQbHVnaW4ocGx1Z2luTmFtZSwgcGx1Z2luKTtcbiAgfVxufSk7XG5cbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbi8vIFZpZGVvSnNcbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuLypcbnByb3BlcnRpZXMgZm9yIHRoaXMgY29tcG9uZW50IHNob3VsZCBiZSBrZXB0IHRvIE9OTFkgdGhvc2UgdGhhdCBpZiBjaGFuZ2VkIHNob3VsZCBSRVFVSVJFIGFuIGVudGlyZWx5IG5ldyB2aWRlb2pzIGVsZW1lbnRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgUmVhY3QubWVtbzxQcm9wcz4oZnVuY3Rpb24gVmlkZW9Kcyhwcm9wczogUHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIC8vIGFkVXJsLCAvLyBUT0RPOiB0aGlzIGFkIGZ1bmN0aW9uYWxpdHkgaXNuJ3QgdXNlZCwgY2FuIGJlIHB1bGxlZCBvdXRcbiAgICAvLyBhbGxvd1ByZVJvbGwsXG4gICAgYXV0b3BsYXksXG4gICAgY2xhaW1JZCxcbiAgICAvLyB0aXRsZSxcbiAgICBjaGFubmVsTmFtZSxcbiAgICBjaGFubmVsVGl0bGUsXG4gICAgZW1iZWRkZWQsXG4gICAgZW1iZWRkZWRJbnRlcm5hbCxcbiAgICAvLyBpbnRlcm5hbEZlYXR1cmVFbmFibGVkLCAvLyBmb3IgcGVvcGxlIG9uIHRoZSB0ZWFtIHRvIHRlc3QgbmV3IGZlYXR1cmVzIGludGVybmFsbHlcbiAgICBpc0F1ZGlvLFxuICAgIC8vIHBvc3RlcixcbiAgICBzaGFyZVRlbGVtZXRyeSxcbiAgICBzb3VyY2UsXG4gICAgc291cmNlVHlwZSxcbiAgICBzdGFydE11dGVkLFxuICAgIHVzZXJJZCxcbiAgICBkZWZhdWx0UXVhbGl0eSxcbiAgICBvblBsYXllclJlYWR5LFxuICAgIHBsYXlOZXh0LFxuICAgIHBsYXlQcmV2aW91cyxcbiAgICB0b2dnbGVWaWRlb1RoZWF0ZXJNb2RlLFxuICAgIGNsYWltVmFsdWVzLFxuICAgIGRvQW5hbHl0aWNzVmlldyxcbiAgICBkb0FuYWx5dGljc0J1ZmZlcixcbiAgICBjbGFpbVJld2FyZHMsXG4gICAgdXJpLFxuICAgIHVzZXJDbGFpbUlkLFxuICAgIGlzTGl2ZXN0cmVhbUNsYWltLFxuICAgIGFjdGl2ZUxpdmVzdHJlYW1Gb3JDaGFubmVsLFxuICAgIGRvVG9hc3QsXG4gICAgaXNQdXJjaGFzYWJsZUNvbnRlbnQsXG4gICAgaXNSZW50YWJsZUNvbnRlbnQsXG4gIH0gPSBwcm9wcztcblxuICAvLyB1c2VkIHRvIG5vdGlmeSBhYm91dCBkZWZhdWx0IHF1YWxpdHkgc2V0dGluZ1xuICAvLyBpZiBhbHJlYWR5IGhhcyBhIHF1YWxpdHkgc2V0LCBubyBuZWVkIHRvIG5vdGlmeVxuICBjb25zdCBbaW5pdGlhbFF1YWxpdHlDaGFuZ2UsIHNldEluaXRpYWxRdWFsaXR5Q2hhbmdlXSA9IHVzZVBlcnNpc3RlZFN0YXRlKFxuICAgICdpbml0aWFsLXF1YWxpdHktY2hhbmdlJyxcbiAgICBCb29sZWFuKGRlZmF1bHRRdWFsaXR5KVxuICApO1xuXG4gIGNvbnN0IGlzTW9iaWxlID0gdXNlSXNNb2JpbGUoKTtcblxuICBjb25zdCBwbGF5ZXJSZWYgPSB1c2VSZWYoKTtcbiAgY29uc3QgY29udGFpbmVyUmVmID0gdXNlUmVmKCk7XG4gIGNvbnN0IHRhcFRvVW5tdXRlUmVmID0gdXNlUmVmKCk7XG4gIGNvbnN0IHRhcFRvUmV0cnlSZWYgPSB1c2VSZWYoKTtcbiAgY29uc3QgcGxheWVyU2VydmVyUmVmID0gdXNlUmVmKCk7XG4gIGNvbnN0IHZvbHVtZVBhbmVsUmVmID0gdXNlUmVmKCk7XG5cbiAgY29uc3Qga2V5RG93bkhhbmRsZXJSZWYgPSB1c2VSZWYoKTtcbiAgY29uc3QgdmlkZW9TY3JvbGxIYW5kbGVyUmVmID0gdXNlUmVmKCk7XG4gIGNvbnN0IHZvbHVtZVBhbmVsU2Nyb2xsSGFuZGxlclJlZiA9IHVzZVJlZigpO1xuXG4gIGNvbnN0IHsgdXJsOiBsaXZlc3RyZWFtVmlkZW9VcmwgfSA9IGFjdGl2ZUxpdmVzdHJlYW1Gb3JDaGFubmVsIHx8IHt9O1xuICBjb25zdCBvdmVycmlkZU5hdGl2ZVZocyA9ICFwbGF0Zm9ybS5pc0lQaG9uZSgpO1xuICBjb25zdCBzaG93UXVhbGl0eVNlbGVjdG9yID0gKCFpc0xpdmVzdHJlYW1DbGFpbSAmJiBvdmVycmlkZU5hdGl2ZVZocykgfHwgbGl2ZXN0cmVhbVZpZGVvVXJsO1xuXG4gIC8vIGluaXRpYXRlIGtleWJvYXJkIHNob3J0Y3V0c1xuICBjb25zdCB7XG4gICAgY3JlYXRlS2V5RG93blNob3J0Y3V0c0hhbmRsZXIsXG4gICAgY3JlYXRlVmlkZW9TY3JvbGxTaG9ydGN1dHNIYW5kbGVyLFxuICAgIGNyZWF0ZVZvbHVtZVBhbmVsU2Nyb2xsU2hvcnRjdXRzSGFuZGxlcixcbiAgfSA9IGtleWJvYXJkU2hvcmN1dHMoe1xuICAgIGlzTW9iaWxlLFxuICAgIGlzTGl2ZXN0cmVhbUNsYWltLFxuICAgIHRvZ2dsZVZpZGVvVGhlYXRlck1vZGUsXG4gICAgcGxheU5leHQsXG4gICAgcGxheVByZXZpb3VzLFxuICB9KTtcblxuICBjb25zdCBbcmVsb2FkLCBzZXRSZWxvYWRdID0gdXNlU3RhdGUoJ2luaXRpYWwnKTtcblxuICBjb25zdCB7IGNyZWF0ZVZpZGVvUGxheWVyRE9NIH0gPSBmdW5jdGlvbnMoeyBpc0F1ZGlvIH0pO1xuXG4gIGNvbnN0IHsgdW5tdXRlQW5kSGlkZUhpbnQsIHJldHJ5VmlkZW9BZnRlckZhaWx1cmUsIGluaXRpYWxpemVFdmVudHMgfSA9IGV2ZW50cyh7XG4gICAgdGFwVG9Vbm11dGVSZWYsXG4gICAgdGFwVG9SZXRyeVJlZixcbiAgICBzZXRSZWxvYWQsXG4gICAgcGxheWVyUmVmLFxuICAgIGNsYWltVmFsdWVzLFxuICAgIHVzZXJJZCxcbiAgICBjbGFpbUlkLFxuICAgIGVtYmVkZGVkLFxuICAgIGRvQW5hbHl0aWNzVmlldyxcbiAgICBkb0FuYWx5dGljc0J1ZmZlcixcbiAgICBjbGFpbVJld2FyZHMsXG4gICAgdXJpLFxuICAgIHBsYXllclNlcnZlclJlZixcbiAgICBpc0xpdmVzdHJlYW1DbGFpbSxcbiAgICBjaGFubmVsVGl0bGUsXG4gIH0pO1xuXG4gIGNvbnN0IHZpZGVvSnNPcHRpb25zID0ge1xuICAgIHByZWxvYWQ6ICdhdXRvJyxcbiAgICBwbGF5YmFja1JhdGVzOiBWSURFT19QTEFZQkFDS19SQVRFUyxcbiAgICByZXNwb25zaXZlOiB0cnVlLFxuICAgIGNvbnRyb2xzOiB0cnVlLFxuICAgIGh0bWw1OiB7XG4gICAgICB2aHM6IHtcbiAgICAgICAgb3ZlcnJpZGVOYXRpdmU6IG92ZXJyaWRlTmF0aXZlVmhzLCAvLyAhdmlkZW9qcy5icm93c2VyLklTX0FOWV9TQUZBUkksXG4gICAgICAgIGVuYWJsZUxvd0luaXRpYWxQbGF5bGlzdDogZmFsc2UsXG4gICAgICAgIGZhc3RRdWFsaXR5Q2hhbmdlOiB0cnVlLFxuICAgICAgICB1c2VEdHNGb3JUaW1lc3RhbXBPZmZzZXQ6IHRydWUsXG4gICAgICB9LFxuICAgIH0sXG4gICAgbGl2ZVRyYWNrZXI6IHtcbiAgICAgIHRyYWNraW5nVGhyZXNob2xkOiAwLFxuICAgICAgbGl2ZVRvbGVyYW5jZTogMTAsXG4gICAgfSxcbiAgICBpbmFjdGl2aXR5VGltZW91dDogMjAwMCxcbiAgICBtdXRlZDogc3RhcnRNdXRlZCxcbiAgICBwbHVnaW5zOiB7IGV2ZW50VHJhY2tpbmc6IHRydWUsIG92ZXJsYXk6IE9WRVJMQVkuT1ZFUkxBWV9EQVRBIH0sXG4gICAgY29udHJvbEJhcjoge1xuICAgICAgY3VycmVudFRpbWVEaXNwbGF5OiB0cnVlLFxuICAgICAgdGltZURpdmlkZXI6IHRydWUsXG4gICAgICBkdXJhdGlvbkRpc3BsYXk6IHRydWUsXG4gICAgICByZW1haW5pbmdUaW1lRGlzcGxheTogdHJ1ZSxcbiAgICAgIHN1YnNDYXBzQnV0dG9uOiAhSVNfSU9TLFxuICAgIH0sXG4gICAgdGVjaE9yZGVyOiBbJ2h0bWw1J10sXG4gICAgYmlnUGxheUJ1dHRvbjogZW1iZWRkZWQsIC8vIG9ubHkgc2hvdyBiaWcgcGxheSBidXR0b24gaWYgZW1iZWRkZWRcbiAgICBzdXBwcmVzc05vdFN1cHBvcnRlZEVycm9yOiB0cnVlLFxuICAgIGxpdmV1aTogdHJ1ZSxcbiAgfTtcblxuICAvLyBUT0RPOiB3b3VsZCBiZSBuaWNlIHRvIHB1bGwgdGhpcyBvdXQgaW50byBmdW5jdGlvbnMgZmlsZVxuICAvLyBJbml0aWFsaXplIHZpZGVvLmpzXG4gIGZ1bmN0aW9uIGluaXRpYWxpemVWaWRlb1BsYXllcihkb21FbGVtZW50KSB7XG4gICAgaWYgKCFkb21FbGVtZW50KSByZXR1cm47XG5cbiAgICBjb25zdCB2anMgPSB2aWRlb2pzKGRvbUVsZW1lbnQsIHZpZGVvSnNPcHRpb25zLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwbGF5ZXIgPSBwbGF5ZXJSZWYuY3VycmVudDtcbiAgICAgIGNvbnN0IGFkYXB0ZXIgPSBuZXcgcGxheWVyanMuVmlkZW9KU0FkYXB0ZXIocGxheWVyKTtcblxuICAgICAgLy8gdGhpcyBzZWVtcyBsaWtlIGEgd2VpcmQgdGhpbmcgdG8gaGF2ZSB0byBjaGVjayBmb3IgaGVyZVxuICAgICAgaWYgKCFwbGF5ZXIpIHJldHVybjtcblxuICAgICAgLy8gcnVuQWRzKGludGVybmFsRmVhdHVyZUVuYWJsZWQsIGFsbG93UHJlUm9sbCwgcGxheWVyLCBlbWJlZGRlZCk7XG5cbiAgICAgIExicnlQbGF5YmFja1JhdGVNZW51QnV0dG9uLnJlcGxhY2VFeGlzdGluZyhwbGF5ZXIpO1xuXG4gICAgICAvLyBBZGQgcmVsb2FkU291cmNlT25FcnJvciBwbHVnaW5cbiAgICAgIHBsYXllci5yZWxvYWRTb3VyY2VPbkVycm9yKHsgZXJyb3JJbnRlcnZhbDogMTAgfSk7XG5cbiAgICAgIC8vIEluaXRpYWxpemUgbW9iaWxlIFVJLlxuICAgICAgcGxheWVyLm1vYmlsZVVpKHtcbiAgICAgICAgZnVsbHNjcmVlbjoge1xuICAgICAgICAgIGVudGVyT25Sb3RhdGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICB0b3VjaENvbnRyb2xzOiB7XG4gICAgICAgICAgc2Vla1NlY29uZHM6IDEwLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIHBsYXllci5pMThuKCk7XG5cbiAgICAgIGlmICghZW1iZWRkZWQpIHtcbiAgICAgICAgd2luZG93LnBsYXllci5iaWdQbGF5QnV0dG9uICYmIHdpbmRvdy5wbGF5ZXIuYmlnUGxheUJ1dHRvbi5oaWRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjb25zdCBiaWdQbGF5QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZqcy1iaWctcGxheS1idXR0b24nKTtcbiAgICAgICAgLy8gaWYgKGJpZ1BsYXlCdXR0b24pIGJpZ1BsYXlCdXR0b24uc3R5bGUuc2V0UHJvcGVydHkoJ2Rpc3BsYXknLCAnYmxvY2snLCAnaW1wb3J0YW50Jyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBxdWFsaXR5IHNlbGVjdG9yIHRvIHBsYXllclxuICAgICAgaWYgKHNob3dRdWFsaXR5U2VsZWN0b3IpIHtcbiAgICAgICAgcGxheWVyLmhsc1F1YWxpdHlTZWxlY3Rvcih7XG4gICAgICAgICAgZGlzcGxheUN1cnJlbnRRdWFsaXR5OiB0cnVlLFxuICAgICAgICAgIG9yaWdpbmFsSGVpZ2h0OiBjbGFpbVZhbHVlcz8udmlkZW8/LmhlaWdodCxcbiAgICAgICAgICBkZWZhdWx0UXVhbGl0eSxcbiAgICAgICAgICBpbml0aWFsUXVhbGl0eUNoYW5nZSxcbiAgICAgICAgICBzZXRJbml0aWFsUXVhbGl0eUNoYW5nZSxcbiAgICAgICAgICBkb1RvYXN0LFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHJlY3N5cyBwbHVnaW5cbiAgICAgIGlmIChzaGFyZVRlbGVtZXRyeSkge1xuICAgICAgICBwbGF5ZXIucmVjc3lzKHtcbiAgICAgICAgICB2aWRlb0lkOiBjbGFpbUlkLFxuICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICAgIGVtYmVkZGVkOiBlbWJlZGRlZCB8fCBlbWJlZGRlZEludGVybmFsLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gc2V0IHBsYXlzaW5saW5lIGZvciBtb2JpbGVcbiAgICAgIHBsYXllci5jaGlsZHJlbl9bMF0uc2V0QXR0cmlidXRlKCdwbGF5c2lubGluZScsICcnKTtcblxuICAgICAgaWYgKGNhbkF1dG9wbGF5VmlkZW8gPT09IHRydWUpIHtcbiAgICAgICAgLy8gc2hvdyB3YWl0aW5nIHNwaW5uZXIgYXMgdmlkZW8gaXMgbG9hZGluZ1xuICAgICAgICBwbGF5ZXIuYWRkQ2xhc3MoJ3Zqcy13YWl0aW5nJyk7XG4gICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZqcy1iaWctcGxheS1idXR0b24nKS5zdHlsZS5zZXRQcm9wZXJ0eSgnZGlzcGxheScsICdub25lJywgJ2ltcG9ydGFudCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmpzLWJpZy1wbGF5LWJ1dHRvbicpLnN0eWxlLnNldFByb3BlcnR5KCdkaXNwbGF5JywgJ2Jsb2NrJywgJ2ltcG9ydGFudCcpO1xuICAgICAgfVxuICAgICAgLy8gaW1tZWRpYXRlbHkgc2hvdyBjb250cm9sIGJhciB3aGlsZSB2aWRlbyBpcyBsb2FkaW5nXG4gICAgICBwbGF5ZXIudXNlckFjdGl2ZSh0cnVlKTtcblxuICAgICAgYWRhcHRlci5yZWFkeSgpO1xuXG4gICAgICAvLyBzb21ldGltZXMgdmlkZW8gZG9lc250IHN0YXJ0IHByb3Blcmx5LCB0aGlzIGFkZHJlc3NlcyB0aGUgZWRnZSBjYXNlXG4gICAgICBpZiAoYXV0b3BsYXkpIHtcbiAgICAgICAgY29uc3QgdmlkZW9EaXYgPSB3aW5kb3cucGxheWVyLmNoaWxkcmVuX1swXTtcbiAgICAgICAgaWYgKHZpZGVvRGl2KSB7XG4gICAgICAgICAgdmlkZW9EaXYuY2xpY2soKTtcbiAgICAgICAgfVxuICAgICAgICB3aW5kb3cucGxheWVyLnVzZXJBY3RpdmUodHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBmaXhlcyAjMzQ5OCAoaHR0cHM6Ly9naXRodWIuY29tL2xicnlpby9sYnJ5LWRlc2t0b3AvaXNzdWVzLzM0OTgpXG4gICAgLy8gc3VtbWFyeTogb24gZmlyZWZveCB0aGUgZm9jdXMgd291bGQgc3RpY2sgdG8gdGhlIGZ1bGxzY3JlZW4gYnV0dG9uIHdoaWNoIGNhdXNlZCBidWdneSBiZWhhdmlvciB3aXRoIHNwYWNlYmFyXG4gICAgdmpzLm9uKCdmdWxsc2NyZWVuY2hhbmdlJywgKCkgPT4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKSk7XG5cbiAgICByZXR1cm4gdmpzO1xuICB9XG5cbiAgLy8gdXNlRWZmZWN0KCgpID0+IHtcbiAgLy8gICBpZiAoc2hvd1F1YWxpdHlTZWxlY3Rvcikge1xuICAvLyAgICAgLy8gQWRkIHF1YWxpdHkgc2VsZWN0b3IgdG8gcGxheWVyXG4gIC8vICAgICBjb25zdCBwbGF5ZXIgPSBwbGF5ZXJSZWYuY3VycmVudDtcbiAgLy8gICAgIGlmIChwbGF5ZXIpIHBsYXllci5obHNRdWFsaXR5U2VsZWN0b3IoeyBkaXNwbGF5Q3VycmVudFF1YWxpdHk6IHRydWUgfSk7XG4gIC8vICAgfVxuICAvLyB9LCBbc2hvd1F1YWxpdHlTZWxlY3Rvcl0pO1xuXG4gIC8qXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgQ2hyb21lY2FzdC51cGRhdGVUaXRsZXModGl0bGUsIGNoYW5uZWxUaXRsZSk7XG4gIH0sIFt0aXRsZSwgY2hhbm5lbFRpdGxlXSk7XG4gICovXG5cbiAgLy8gVGhpcyBsaWZlY3ljbGUgaG9vayBpcyBvbmx5IGNhbGxlZCBvbmNlIChvbiBtb3VudCksIG9yIHdoZW4gYGlzQXVkaW9gIG9yIGBzb3VyY2VgIGNoYW5nZXMuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCB2anNQbGF5ZXI7XG4gICAgICBjb25zdCB2anNQYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW8tanMtcGFyZW50Jyk7XG5cbiAgICAgIGxldCBjYW5Vc2VPbGRQbGF5ZXIgPSB3aW5kb3cub2xkU2F2ZWREaXYgJiYgdmpzUGFyZW50O1xuICAgICAgY29uc3QgaXNMaXZlc3RyZWFtID0gaXNMaXZlc3RyZWFtQ2xhaW0gJiYgdXNlckNsYWltSWQ7XG5cbiAgICAgIC8vIGluaXRpYWxpemUgdmlkZW9qcyBpZiBpdCBoYXNuJ3QgYmVlbiBkb25lIHlldFxuICAgICAgaWYgKCFjYW5Vc2VPbGRQbGF5ZXIpIHtcbiAgICAgICAgY29uc3QgdmpzRWxlbWVudCA9IGNyZWF0ZVZpZGVvUGxheWVyRE9NKGNvbnRhaW5lclJlZi5jdXJyZW50KTtcbiAgICAgICAgdmpzUGxheWVyID0gaW5pdGlhbGl6ZVZpZGVvUGxheWVyKHZqc0VsZW1lbnQpO1xuICAgICAgICBpZiAoIXZqc1BsYXllcikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCByZWZlcmVuY2UgdG8gcGxheWVyIHRvIGdsb2JhbCBzY29wZVxuICAgICAgICB3aW5kb3cucGxheWVyID0gdmpzUGxheWVyO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmpzUGxheWVyID0gd2luZG93LnBsYXllcjtcbiAgICAgIH1cblxuICAgICAgLy8gaGlkZSB1bnVzZWQgZWxlbWVudHMgb24gbGl2ZXN0cmVhbVxuICAgICAgaWYgKGlzTGl2ZXN0cmVhbSkge1xuICAgICAgICB2anNQbGF5ZXIuYWRkQ2xhc3MoJ3Zqcy1saXZlJyk7XG4gICAgICAgIHZqc1BsYXllci5hZGRDbGFzcygndmpzLWxpdmV1aScpO1xuICAgICAgICAvLyAkRmxvd0lzc3VlXG4gICAgICAgIHZqc1BsYXllci5jb250cm9sQmFyLmN1cnJlbnRUaW1lRGlzcGxheT8uZWwoKS5zdHlsZS5zZXRQcm9wZXJ0eSgnZGlzcGxheScsICdub25lJywgJ2ltcG9ydGFudCcpO1xuICAgICAgICAvLyAkRmxvd0lzc3VlXG4gICAgICAgIHZqc1BsYXllci5jb250cm9sQmFyLnRpbWVEaXZpZGVyPy5lbCgpLnN0eWxlLnNldFByb3BlcnR5KCdkaXNwbGF5JywgJ25vbmUnLCAnaW1wb3J0YW50Jyk7XG4gICAgICAgIC8vICRGbG93SXNzdWVcbiAgICAgICAgdmpzUGxheWVyLmNvbnRyb2xCYXIuZHVyYXRpb25EaXNwbGF5Py5lbCgpLnN0eWxlLnNldFByb3BlcnR5KCdkaXNwbGF5JywgJ25vbmUnLCAnaW1wb3J0YW50Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2anNQbGF5ZXIucmVtb3ZlQ2xhc3MoJ3Zqcy1saXZlJyk7XG4gICAgICAgIHZqc1BsYXllci5yZW1vdmVDbGFzcygndmpzLWxpdmV1aScpO1xuICAgICAgICAvLyAkRmxvd0lzc3VlXG4gICAgICAgIHZqc1BsYXllci5jb250cm9sQmFyLmN1cnJlbnRUaW1lRGlzcGxheT8uZWwoKS5zdHlsZS5zZXRQcm9wZXJ0eSgnZGlzcGxheScsICdibG9jaycsICdpbXBvcnRhbnQnKTtcbiAgICAgICAgLy8gJEZsb3dJc3N1ZVxuICAgICAgICB2anNQbGF5ZXIuY29udHJvbEJhci50aW1lRGl2aWRlcj8uZWwoKS5zdHlsZS5zZXRQcm9wZXJ0eSgnZGlzcGxheScsICdibG9jaycsICdpbXBvcnRhbnQnKTtcbiAgICAgICAgLy8gJEZsb3dJc3N1ZVxuICAgICAgICB2anNQbGF5ZXIuY29udHJvbEJhci5kdXJhdGlvbkRpc3BsYXk/LmVsKCkuc3R5bGUuc2V0UHJvcGVydHkoJ2Rpc3BsYXknLCAnYmxvY2snLCAnaW1wb3J0YW50Jyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCByZWNzeXMgcGx1Z2luXG4gICAgICBpZiAoc2hhcmVUZWxlbWV0cnkpIHtcbiAgICAgICAgdmpzUGxheWVyLnJlY3N5cy5vcHRpb25zXyA9IHtcbiAgICAgICAgICB2aWRlb0lkOiBjbGFpbUlkLFxuICAgICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICAgIGVtYmVkZGVkOiBlbWJlZGRlZCB8fCBlbWJlZGRlZEludGVybmFsLFxuICAgICAgICB9O1xuXG4gICAgICAgIHZqc1BsYXllci5yZWNzeXMubGFzdFRpbWVVcGRhdGUgPSBudWxsO1xuICAgICAgICB2anNQbGF5ZXIucmVjc3lzLmN1cnJlbnRUaW1lVXBkYXRlID0gbnVsbDtcbiAgICAgICAgdmpzUGxheWVyLnJlY3N5cy5pblBhdXNlID0gZmFsc2U7XG4gICAgICAgIHZqc1BsYXllci5yZWNzeXMud2F0Y2hlZER1cmF0aW9uID0geyB0b3RhbDogMCwgbGFzdFRpbWVzdGFtcDogLTEgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFlbWJlZGRlZCkge1xuICAgICAgICB2anNQbGF5ZXIuYmlnUGxheUJ1dHRvbiAmJiB3aW5kb3cucGxheWVyLmJpZ1BsYXlCdXR0b24uaGlkZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gJEZsb3dJc3N1ZVxuICAgICAgICB2anNQbGF5ZXIuYmlnUGxheUJ1dHRvbj8uc2hvdygpO1xuICAgICAgfVxuXG4gICAgICAvLyBJIHRoaW5rIHRoaXMgaXMgYSBjYWxsYmFjayBmdW5jdGlvblxuICAgICAgY29uc3QgdmlkZW9Ob2RlID0gY29udGFpbmVyUmVmLmN1cnJlbnQgJiYgY29udGFpbmVyUmVmLmN1cnJlbnQucXVlcnlTZWxlY3RvcigndmlkZW8sIGF1ZGlvJyk7XG5cbiAgICAgIC8vIGFkZCB0aGVhdHJlIGFuZCBhdXRvcGxheSBuZXh0IGJ1dHRvbiBhbmQgaW5pdGlhdGUgcGxheWVyIGV2ZW50c1xuICAgICAgb25QbGF5ZXJSZWFkeSh2anNQbGF5ZXIsIHZpZGVvTm9kZSk7XG5cbiAgICAgIC8vIFNldCByZWZlcmVuY2UgaW4gY29tcG9uZW50IHN0YXRlXG4gICAgICBwbGF5ZXJSZWYuY3VycmVudCA9IHZqc1BsYXllcjtcblxuICAgICAgaW5pdGlhbGl6ZUV2ZW50cygpO1xuXG4gICAgICAvLyB2b2x1bWUgY29udHJvbCBkaXYsIHVzZWQgZm9yIGNoYW5naW5nIHZvbHVtZSB3aGVuIHNjcm9sbGVkIG92ZXJcbiAgICAgIC8vICRGbG93SXNzdWVcbiAgICAgIHZvbHVtZVBhbmVsUmVmLmN1cnJlbnQgPSBwbGF5ZXJSZWYuY3VycmVudD8uY29udHJvbEJhcj8uZ2V0Q2hpbGQoVklERU9KU19WT0xVTUVfUEFORUxfQ0xBU1MpPy5lbCgpO1xuXG4gICAgICBjb25zdCBrZXlEb3duSGFuZGxlciA9IGNyZWF0ZUtleURvd25TaG9ydGN1dHNIYW5kbGVyKHBsYXllclJlZiwgY29udGFpbmVyUmVmKTtcbiAgICAgIGNvbnN0IHZpZGVvU2Nyb2xsSGFuZGxlciA9IGNyZWF0ZVZpZGVvU2Nyb2xsU2hvcnRjdXRzSGFuZGxlcihwbGF5ZXJSZWYsIGNvbnRhaW5lclJlZik7XG4gICAgICBjb25zdCB2b2x1bWVQYW5lbEhhbmRsZXIgPSBjcmVhdGVWb2x1bWVQYW5lbFNjcm9sbFNob3J0Y3V0c0hhbmRsZXIodm9sdW1lUGFuZWxSZWYsIHBsYXllclJlZiwgY29udGFpbmVyUmVmKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywga2V5RG93bkhhbmRsZXIpO1xuICAgICAgY29uc3QgY29udGFpbmVyRGl2ID0gY29udGFpbmVyUmVmLmN1cnJlbnQ7XG4gICAgICBjb250YWluZXJEaXYgJiYgY29udGFpbmVyRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdmlkZW9TY3JvbGxIYW5kbGVyKTtcbiAgICAgIGlmICh2b2x1bWVQYW5lbFJlZi5jdXJyZW50KSB2b2x1bWVQYW5lbFJlZi5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdm9sdW1lUGFuZWxIYW5kbGVyKTtcblxuICAgICAga2V5RG93bkhhbmRsZXJSZWYuY3VycmVudCA9IGtleURvd25IYW5kbGVyO1xuICAgICAgdmlkZW9TY3JvbGxIYW5kbGVyUmVmLmN1cnJlbnQgPSB2aWRlb1Njcm9sbEhhbmRsZXI7XG4gICAgICB2b2x1bWVQYW5lbFNjcm9sbEhhbmRsZXJSZWYuY3VycmVudCA9IHZvbHVtZVBhbmVsSGFuZGxlcjtcblxuICAgICAgLy8gJEZsb3dJc3N1ZVxuICAgICAgdmpzUGxheWVyLmNvbnRyb2xCYXI/LnNob3coKTtcblxuICAgICAgLy8gdmpzUGxheWVyLnBvc3Rlcihwb3N0ZXIpO1xuXG4gICAgICB2anNQbGF5ZXIuZWwoKS5jaGlsZE5vZGVzWzBdLnNldEF0dHJpYnV0ZSgncGxheXNpbmxpbmUnLCAnJyk7XG5cbiAgICAgIC8vIGxldCBjb250ZW50VXJsO1xuICAgICAgLy8gVE9ETzogcHVsbCB0aGlzIGZ1bmN0aW9uIGludG8gdmlkZW9qcy1mdW5jdGlvbnNcbiAgICAgIC8vIGRldGVybWluZSB3aGljaCBzb3VyY2UgdG8gdXNlIGFuZCBsb2FkIGl0XG4gICAgICBpZiAoaXNMaXZlc3RyZWFtKSB7XG4gICAgICAgIHZqc1BsYXllci5pc0xpdmVzdHJlYW0gPSB0cnVlO1xuICAgICAgICB2anNQbGF5ZXIuYWRkQ2xhc3MoJ2xpdmVzdHJlYW1QbGF5ZXInKTtcbiAgICAgICAgdmpzUGxheWVyLnNyYyh7IHR5cGU6ICdhcHBsaWNhdGlvbi94LW1wZWdVUkwnLCBzcmM6IGxpdmVzdHJlYW1WaWRlb1VybCB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZqc1BsYXllci5pc0xpdmVzdHJlYW0gPSBmYWxzZTtcbiAgICAgICAgdmpzUGxheWVyLnJlbW92ZUNsYXNzKCdsaXZlc3RyZWFtUGxheWVyJyk7XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzb3VyY2UsIHsgbWV0aG9kOiAnSEVBRCcsIGNhY2hlOiAnbm8tc3RvcmUnIH0pO1xuICAgICAgICBwbGF5ZXJTZXJ2ZXJSZWYuY3VycmVudCA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCd4LXBvd2VyZWQtYnknKTtcbiAgICAgICAgdmpzUGxheWVyLmNsYWltU3JjT3JpZ2luYWwgPSB7IHR5cGU6IHNvdXJjZVR5cGUsIHNyYzogc291cmNlIH07XG5cbiAgICAgICAgLy8gcmVtb3ZlIHF1ZXJ5IHBhcmFtcyBmb3Igc2VjdXJlZCBlbmRwb2ludHMgKHdoaWNoIGhhdmUgcXVlcnkgcGFyYW1zIG9uIGVuZCBvZiBtM3U4IHBhdGgpXG4gICAgICAgIGxldCB0cmltbWVkVXJsID0gbmV3IFVSTChyZXNwb25zZS51cmwpO1xuICAgICAgICB0cmltbWVkVXJsLmhhc2ggPSAnJztcbiAgICAgICAgdHJpbW1lZFVybC5zZWFyY2ggPSAnJztcbiAgICAgICAgdHJpbW1lZFVybCA9IHRyaW1tZWRVcmwudG9TdHJpbmcoKTtcblxuICAgICAgICAvLyBjaGFuZ2UgdG8gbTN1OCBpZiBhcHBsaWNhYmxlXG4gICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5yZWRpcmVjdGVkICYmIHJlc3BvbnNlLnVybCAmJiB0cmltbWVkVXJsLmVuZHNXaXRoKCdtM3U4JykpIHtcbiAgICAgICAgICB2anNQbGF5ZXIuY2xhaW1TcmNWaHMgPSB7IHR5cGU6ICdhcHBsaWNhdGlvbi94LW1wZWdVUkwnLCBzcmM6IHJlc3BvbnNlLnVybCB9O1xuICAgICAgICAgIHZqc1BsYXllci5zcmModmpzUGxheWVyLmNsYWltU3JjVmhzKTtcbiAgICAgICAgICBpZiAod2luZG93LmNvcmRvdmEpIHtcbiAgICAgICAgICAgIGxldCBwYXlsb2FkID0ge1xuICAgICAgICAgICAgICB1cmk6IHJlc3BvbnNlLnVybCxcbiAgICAgICAgICAgICAgY2xhaW06IGNsYWltVmFsdWVzLFxuICAgICAgICAgICAgICBmaWxlVHlwZTogJ2FwcGxpY2F0aW9uL3gtbXBlZ1VSTCcsXG4gICAgICAgICAgICAgIGNoYW5uZWw6IGNoYW5uZWxUaXRsZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB3aW5kb3cub2R5c2VlLmNocm9tZWNhc3Quc2V0TWVkaWFQYXlsb2FkKHBheWxvYWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2anNQbGF5ZXIuc3JjKHZqc1BsYXllci5jbGFpbVNyY09yaWdpbmFsKTtcbiAgICAgICAgICBpZiAod2luZG93LmNvcmRvdmEpIHtcbiAgICAgICAgICAgIGxldCBwYXlsb2FkID0ge1xuICAgICAgICAgICAgICB1cmk6IHZqc1BsYXllci5jbGFpbVNyY09yaWdpbmFsLnNyYyxcbiAgICAgICAgICAgICAgY2xhaW06IGNsYWltVmFsdWVzLFxuICAgICAgICAgICAgICBmaWxlVHlwZTogc291cmNlVHlwZSxcbiAgICAgICAgICAgICAgY2hhbm5lbDogY2hhbm5lbFRpdGxlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHdpbmRvdy5vZHlzZWUuY2hyb21lY2FzdC5zZXRNZWRpYVBheWxvYWQocGF5bG9hZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGJ1Z2ZpeCB0aHVtYm5haWxzIHNob3dpbmcgdXAgaWYgbmV3IHZpZGVvIGRvZXNuJ3QgaGF2ZSB0aGVtXG4gICAgICBpZiAodHlwZW9mIHZqc1BsYXllci52dHRUaHVtYm5haWxzLmRldGFjaCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2anNQbGF5ZXIudnR0VGh1bWJuYWlscy5kZXRhY2goKTtcbiAgICAgIH1cblxuICAgICAgLypcbiAgICAgIC8vIGluaXRpYWxpemUgaG92ZXIgdGh1bWJuYWlsc1xuICAgICAgaWYgKGNvbnRlbnRVcmwpIHtcbiAgICAgICAgY29uc3QgdHJpbW1lZFBhdGggPSBjb250ZW50VXJsLnN1YnN0cmluZygwLCBjb250ZW50VXJsLmxhc3RJbmRleE9mKCcvJykpO1xuICAgICAgICBjb25zdCB0aHVtYm5haWxQYXRoID0gdHJpbW1lZFBhdGggKyAnL3N0cmVhbV9zcHJpdGUudnR0JztcblxuICAgICAgICAvLyBwcm9ncmVzcyBiYXIgaG92ZXIgdGh1bWJuYWlsc1xuICAgICAgICBpZiAoIUlTX01PQklMRSkge1xuICAgICAgICAgIC8vIGlmIHNyYyBpcyBhIGZ1bmN0aW9uLCBpdCdzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZFxuICAgICAgICAgIGlmICh0eXBlb2YgdmpzUGxheWVyLnZ0dFRodW1ibmFpbHMuc3JjID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB2anNQbGF5ZXIudnR0VGh1bWJuYWlscy5zcmModGh1bWJuYWlsUGF0aCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSwgaW5pdGlhbGl6ZSBwbHVnaW5cbiAgICAgICAgICAgIHZqc1BsYXllci52dHRUaHVtYm5haWxzKHtcbiAgICAgICAgICAgICAgc3JjOiB0aHVtYm5haWxQYXRoLFxuICAgICAgICAgICAgICBzaG93VGltZXN0YW1wOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAqL1xuXG4gICAgICB2anNQbGF5ZXIubG9hZCgpO1xuXG4gICAgICBpZiAoY2FuVXNlT2xkUGxheWVyKSB7XG4gICAgICAgIC8vICRGbG93SXNzdWVcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZGVvLWpzLXBhcmVudCcpPy5hcHBlbmQod2luZG93Lm9sZFNhdmVkRGl2KTtcbiAgICAgIH1cblxuICAgICAgLy8gZGlzYWJsZSByaWdodC1jbGljayAoY29udGV4dC1tZW51KSBmb3IgcHVyY2hhc2VkIGNvbnRlbnRcbiAgICAgIGlmIChpc1B1cmNoYXNhYmxlQ29udGVudCB8fCBpc1JlbnRhYmxlQ29udGVudCkge1xuICAgICAgICBjb25zdCBwbGF5ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd2aWRlby52anMtdGVjaCcpO1xuICAgICAgICBpZiAocGxheWVyKSBwbGF5ZXIuc2V0QXR0cmlidXRlKCdvbmNvbnRleHRtZW51JywgJ3JldHVybiBmYWxzZTsnKTtcbiAgICAgIH1cblxuICAgICAgLy8gYWxsb3cgdGFwIHRvIHVubXV0ZSBpZiBubyBwZXJtcyBvbiBpT1NcbiAgICAgIGlmIChhdXRvcGxheSAmJiAhZW1iZWRkZWQpIHtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHZqc1BsYXllci5wbGF5KCk7XG5cbiAgICAgICAgd2luZG93LnBsYXllci51c2VyQWN0aXZlKHRydWUpO1xuXG4gICAgICAgIGlmIChwcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBwcm9taXNlXG4gICAgICAgICAgICAudGhlbigoXykgPT4ge1xuICAgICAgICAgICAgICAvLyAkRmxvd0lzc3VlXG4gICAgICAgICAgICAgIHZqc1BsYXllcj8uY29udHJvbEJhci5lbCgpLmNsYXNzTGlzdC5hZGQoJ3Zqcy10cmFuc2l0aW9uaW5nLXZpZGVvJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBub1Blcm1pc3Npb25FcnJvciA9IHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgZXJyb3IubmFtZSAmJiBlcnJvci5uYW1lID09PSAnTm90QWxsb3dlZEVycm9yJztcblxuICAgICAgICAgICAgICBpZiAobm9QZXJtaXNzaW9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoSVNfSU9TKSB7XG4gICAgICAgICAgICAgICAgICAvLyBhdXRvcGxheSBub3QgYWxsb3dlZCwgbXV0ZSB2aWRlbywgcGxheSBhbmQgc2hvdyAndGFwIHRvIHVubXV0ZScgYnV0dG9uXG4gICAgICAgICAgICAgICAgICAvLyAkRmxvd0lzc3VlXG4gICAgICAgICAgICAgICAgICB2anNQbGF5ZXI/Lm11dGVkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgLy8gJEZsb3dJc3N1ZVxuICAgICAgICAgICAgICAgICAgY29uc3QgbXV0ZWRQbGF5UHJvbWlzZSA9IHZqc1BsYXllcj8ucGxheSgpO1xuICAgICAgICAgICAgICAgICAgaWYgKG11dGVkUGxheVByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBtdXRlZFBsYXlQcm9taXNlXG4gICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFwVG9Vbm11dGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW8tanMtLXRhcC10by11bm11dGUnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJEZsb3dJc3N1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgdGFwVG9Vbm11dGVCdXR0b24/LnN0eWxlLnNldFByb3BlcnR5KCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICRGbG93SXNzdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcFRvVW5tdXRlQnV0dG9uPy5zdHlsZS5zZXRQcm9wZXJ0eSgnZGlzcGxheScsICdpbmxpbmUnLCAnaW1wb3J0YW50Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgICAgICAgICAgICAgICAgICB2anNQbGF5ZXI/LmFkZENsYXNzKCd2anMtcGF1c2VkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgICAgICAgICAgICAgICAgICB2anNQbGF5ZXI/LmFkZENsYXNzKCd2anMtaGFzLXN0YXJ0ZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZqcy10b3VjaC1vdmVybGF5Jyk/LmNsYXNzTGlzdC5hZGQoJ3Nob3ctcGxheS10b2dnbGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52anMtcGxheS1jb250cm9sJyk/LmNsYXNzTGlzdC5hZGQoJ3Zqcy1wYXVzZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gJEZsb3dJc3N1ZVxuICAgICAgICAgICAgICAgICAgdmpzUGxheWVyPy5iaWdQbGF5QnV0dG9uPy5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pKCk7XG5cbiAgICAvLyBDbGVhbnVwXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywga2V5RG93bkhhbmRsZXJSZWYuY3VycmVudCk7XG5cbiAgICAgIGNvbnN0IGNvbnRhaW5lckRpdiA9IGNvbnRhaW5lclJlZi5jdXJyZW50O1xuICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgY29udGFpbmVyRGl2ICYmIGNvbnRhaW5lckRpdi5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIHZpZGVvU2Nyb2xsSGFuZGxlclJlZi5jdXJyZW50KTtcblxuICAgICAgaWYgKHZvbHVtZVBhbmVsUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdm9sdW1lUGFuZWxSZWYuY3VycmVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIHZvbHVtZVBhbmVsU2Nyb2xsSGFuZGxlclJlZi5jdXJyZW50KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY2hhcHRlck1hcmtlcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd2anMtY2hhcHRlci1tYXJrZXInKTtcbiAgICAgIHdoaWxlIChjaGFwdGVyTWFya2Vycy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vICRGbG93SXNzdWVcbiAgICAgICAgY2hhcHRlck1hcmtlcnNbMF0ucGFyZW50Tm9kZT8ucmVtb3ZlQ2hpbGQoY2hhcHRlck1hcmtlcnNbMF0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwbGF5ZXIgPSBwbGF5ZXJSZWYuY3VycmVudDtcblxuICAgICAgaWYgKHBsYXllcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHdpbmRvdy5jYXN0LmZyYW1ld29yay5DYXN0Q29udGV4dC5nZXRJbnN0YW5jZSgpLmdldEN1cnJlbnRTZXNzaW9uKCkuZW5kU2Vzc2lvbihmYWxzZSk7XG4gICAgICAgIH0gY2F0Y2gge31cblxuICAgICAgICB3aW5kb3cucGxheWVyLnN3aXRjaGVkRnJvbURlZmF1bHRRdWFsaXR5ID0gZmFsc2U7XG5cbiAgICAgICAgd2luZG93LnBsYXllci51c2VyQWN0aXZlKGZhbHNlKTtcbiAgICAgICAgd2luZG93LnBsYXllci5wYXVzZSgpO1xuXG4gICAgICAgIGlmIChJU19JT1MpIHtcbiAgICAgICAgICAvLyAkRmxvd0lzc3VlXG4gICAgICAgICAgd2luZG93LnBsYXllci5jb250cm9sQmFyPy5wbGF5VG9nZ2xlPy5oaWRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGlzIHNvbHZlcyBhbiBpc3N1ZSB3aXRoIHBvcnRyYWl0IHZpZGVvc1xuICAgICAgICAvLyAkRmxvd0lzc3VlXG4gICAgICAgIGNvbnN0IHZpZGVvRGl2ID0gd2luZG93LnBsYXllcj8udGVjaF8/LmVsKCk7IC8vIHZpZGVvIGVsZW1lbnRcbiAgICAgICAgaWYgKHZpZGVvRGl2KSB2aWRlb0Rpdi5zdHlsZS50b3AgPSAnMHB4JztcblxuICAgICAgICB3aW5kb3cucGxheWVyLmNvbnRyb2xCYXIuZWwoKS5jbGFzc0xpc3QuYWRkKCd2anMtdHJhbnNpdGlvbmluZy12aWRlbycpO1xuXG4gICAgICAgIHdpbmRvdy5vbGRTYXZlZERpdiA9IHdpbmRvdy5wbGF5ZXIuZWwoKTtcblxuICAgICAgICB3aW5kb3cucGxheWVyLnRyaWdnZXIoJ3BsYXllckNsb3NlZCcpO1xuXG4gICAgICAgIC8vIHN0b3Agc3RyZWFtcyBydW5uaW5nIGluIGJhY2tncm91bmRcbiAgICAgICAgd2luZG93LnBsYXllci5sb2FkVGVjaF8oJ2h0bWw1JywgbnVsbCk7XG5cbiAgICAgICAgd2luZG93LnBsYXllci5jdXJyZW50VGltZSgwKTtcblxuICAgICAgICAvLyBtYWtlcyB0aGUgY3VycmVudCB0aW1lIHVwZGF0ZSBpbW1lZGlhdGVseVxuICAgICAgICB3aW5kb3cucGxheWVyLnRyaWdnZXIoJ3RpbWV1cGRhdGUnKTtcblxuICAgICAgICB3aW5kb3cucGxheWVyLmNsYWltU3JjVmhzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbaXNBdWRpbywgc291cmNlLCByZWxvYWQsIHVzZXJDbGFpbUlkLCBpc0xpdmVzdHJlYW1DbGFpbV0pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzbmFtZXMoJ3ZpZGVvLWpzLXBhcmVudCcsIHsgJ3ZpZGVvLWpzLXBhcmVudC0taW9zJzogSVNfSU9TIH0pfSByZWY9e2NvbnRhaW5lclJlZn0+XG4gICAgICA8QnV0dG9uXG4gICAgICAgIGxhYmVsPXtfXygnVGFwIHRvIHVubXV0ZScpfVxuICAgICAgICBidXR0b249XCJsaW5rXCJcbiAgICAgICAgaWNvbj17SUNPTlMuVk9MVU1FX01VVEVEfVxuICAgICAgICBjbGFzc05hbWU9XCJ2aWRlby1qcy0tdGFwLXRvLXVubXV0ZVwiXG4gICAgICAgIG9uQ2xpY2s9e3VubXV0ZUFuZEhpZGVIaW50fVxuICAgICAgICByZWY9e3RhcFRvVW5tdXRlUmVmfVxuICAgICAgLz5cbiAgICAgIDxCdXR0b25cbiAgICAgICAgbGFiZWw9e19fKCdSZXRyeScpfVxuICAgICAgICBidXR0b249XCJsaW5rXCJcbiAgICAgICAgaWNvbj17SUNPTlMuUkVGUkVTSH1cbiAgICAgICAgY2xhc3NOYW1lPVwidmlkZW8tanMtLXRhcC10by11bm11dGVcIlxuICAgICAgICBvbkNsaWNrPXtyZXRyeVZpZGVvQWZ0ZXJGYWlsdXJlfVxuICAgICAgICByZWY9e3RhcFRvUmV0cnlSZWZ9XG4gICAgICAvPlxuICAgIDwvZGl2PlxuICApO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWdGQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFzQ0E7QUFDQTtBQXZDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBMkNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUF4REE7QUFBQTtBQUNBO0FBeURBO0FBQ0E7QUFDQTtBQTVEQTtBQW1FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFsRUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUE0RUE7QUFBQTtBQTVFQTtBQUNBO0FBREE7QUErRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZkE7QUE5RUE7QUFBQTtBQUFBO0FBQ0E7QUErRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFEQTtBQVFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBOUJBO0FBa0NBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBT0E7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUpBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUlBO0FBOUJBO0FBQ0E7QUFDQTtBQWdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFuQ0E7QUFDQTtBQUNBO0FBNENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQS9DQTtBQUNBO0FBQ0E7QUFxREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBaEVBO0FBQ0E7QUFDQTtBQWlFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQS9FQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFIQTtBQXFGQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUEzTkE7QUErTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQU5BO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFYQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBZUE7QUFDQTtBQWhCQTtBQUFBO0FBQ0E7QUFEQTtBQWtCQTtBQUNBO0FBbkJBO0FBcUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdkNBO0FBQ0E7QUFDQTtBQXlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBNURBO0FBQ0E7QUFDQTtBQThEQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBcEdBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFvR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBdkdBO0FBQUE7QUFDQTtBQURBO0FBeUdBO0FBQ0E7QUExR0E7QUFBQTtBQTRHQTtBQUFBO0FBQUE7QUFDQTtBQTdHQTtBQTRHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQVhBO0FBYUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUEvSUE7QUFpSkE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoTEE7QUFDQTtBQUNBO0FBa0xBO0FBQ0E7QUFDQTtBQXRMQTtBQUNBO0FBQ0E7QUF3TEE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQWxCQTtBQW9CQTtBQTNCQTtBQTRCQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUF6Q0E7QUEyQ0E7QUFDQTtBQUNBO0FBN09BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBQ0E7QUFDQTtBQStPQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQVpBO0FBZ0JBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBdERBO0FBalBBO0FBMlNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFsaUJBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../ui/component/viewers/videoViewer/internal/videojs.jsx\n");

/***/ }),

/***/ "../ui/redux/actions/app.js":
/*!**********************************!*\
  !*** ../ui/redux/actions/app.js ***!
  \**********************************/
/*! exports provided: doOpenModal, doHideModal, doUpdateDownloadProgress, doSkipUpgrade, doStartUpgrade, doDownloadUpgrade, doDownloadUpgradeRequested, doClearUpgradeTimer, doAutoUpdate, doAutoUpdateDeclined, doCancelUpgrade, doCheckUpgradeAvailable, doCheckUpgradeSubscribe, doMinVersionCheck, doMinVersionSubscribe, doCheckDaemonVersion, doNotifyEncryptWallet, doNotifyDecryptWallet, doNotifyUnlockWallet, doNotifyForgetPassword, doAlertError, doAlertWaitingForSync, doDaemonReady, doClearCache, doQuit, doQuitAnyDaemon, doChangeVolume, doChangeMute, doClickCommentButton, doToggleSearchExpanded, doAnalyticsView, doAnalyticsBuffer, doAnaltyicsPurchaseEvent, doSignIn, doSignOut, doSetWelcomeVersion, doSetHasNavigated, doToggle3PAnalytics, doGetAndPopulatePreferences, doHandleSyncComplete, doToggleInterestedInYoutubeSync, doToggleSplashAnimation, doSetActiveChannel, doSetIncognito, doSetAdBlockerFound, doSetGdprConsentList, doToggleAppDrawer, doSetMainPlayerDimension */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(process, __) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doOpenModal\", function() { return doOpenModal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doHideModal\", function() { return doHideModal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUpdateDownloadProgress\", function() { return doUpdateDownloadProgress; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doSkipUpgrade\", function() { return doSkipUpgrade; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doStartUpgrade\", function() { return doStartUpgrade; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doDownloadUpgrade\", function() { return doDownloadUpgrade; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doDownloadUpgradeRequested\", function() { return doDownloadUpgradeRequested; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doClearUpgradeTimer\", function() { return doClearUpgradeTimer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doAutoUpdate\", function() { return doAutoUpdate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doAutoUpdateDeclined\", function() { return doAutoUpdateDeclined; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doCancelUpgrade\", function() { return doCancelUpgrade; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doCheckUpgradeAvailable\", function() { return doCheckUpgradeAvailable; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doCheckUpgradeSubscribe\", function() { return doCheckUpgradeSubscribe; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doMinVersionCheck\", function() { return doMinVersionCheck; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doMinVersionSubscribe\", function() { return doMinVersionSubscribe; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doCheckDaemonVersion\", function() { return doCheckDaemonVersion; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doNotifyEncryptWallet\", function() { return doNotifyEncryptWallet; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doNotifyDecryptWallet\", function() { return doNotifyDecryptWallet; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doNotifyUnlockWallet\", function() { return doNotifyUnlockWallet; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doNotifyForgetPassword\", function() { return doNotifyForgetPassword; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doAlertError\", function() { return doAlertError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doAlertWaitingForSync\", function() { return doAlertWaitingForSync; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doDaemonReady\", function() { return doDaemonReady; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doClearCache\", function() { return doClearCache; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doQuit\", function() { return doQuit; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doQuitAnyDaemon\", function() { return doQuitAnyDaemon; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doChangeVolume\", function() { return doChangeVolume; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doChangeMute\", function() { return doChangeMute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doClickCommentButton\", function() { return doClickCommentButton; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doToggleSearchExpanded\", function() { return doToggleSearchExpanded; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doAnalyticsView\", function() { return doAnalyticsView; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doAnalyticsBuffer\", function() { return doAnalyticsBuffer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doAnaltyicsPurchaseEvent\", function() { return doAnaltyicsPurchaseEvent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doSignIn\", function() { return doSignIn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doSignOut\", function() { return doSignOut; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doSetWelcomeVersion\", function() { return doSetWelcomeVersion; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doSetHasNavigated\", function() { return doSetHasNavigated; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doToggle3PAnalytics\", function() { return doToggle3PAnalytics; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doGetAndPopulatePreferences\", function() { return doGetAndPopulatePreferences; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doHandleSyncComplete\", function() { return doHandleSyncComplete; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doToggleInterestedInYoutubeSync\", function() { return doToggleInterestedInYoutubeSync; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doToggleSplashAnimation\", function() { return doToggleSplashAnimation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doSetActiveChannel\", function() { return doSetActiveChannel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doSetIncognito\", function() { return doSetIncognito; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doSetAdBlockerFound\", function() { return doSetAdBlockerFound; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doSetGdprConsentList\", function() { return doSetGdprConsentList; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doToggleAppDrawer\", function() { return doToggleAppDrawer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doSetMainPlayerDimension\", function() { return doSetMainPlayerDimension; });\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ \"./node_modules/path-browserify/index.js\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! config */ \"../config.js\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(config__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var constants_action_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! constants/action_types */ \"../ui/constants/action_types.js\");\n/* harmony import */ var constants_modal_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! constants/modal_types */ \"../ui/constants/modal_types.js\");\n/* harmony import */ var constants_settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! constants/settings */ \"../ui/constants/settings.js\");\n/* harmony import */ var constants_daemon_settings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! constants/daemon_settings */ \"../ui/constants/daemon_settings.js\");\n/* harmony import */ var constants_shared_preferences__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! constants/shared_preferences */ \"../ui/constants/shared_preferences.js\");\n/* harmony import */ var lbry__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! lbry */ \"../ui/lbry.js\");\n/* harmony import */ var redux_actions_claims__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! redux/actions/claims */ \"../ui/redux/actions/claims.js\");\n/* harmony import */ var redux_selectors_claims__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! redux/selectors/claims */ \"../ui/redux/selectors/claims.js\");\n/* harmony import */ var redux_actions_file_info__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! redux/actions/file_info */ \"../ui/redux/actions/file_info.js\");\n/* harmony import */ var redux_actions_wallet__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! redux/actions/wallet */ \"../ui/redux/actions/wallet.js\");\n/* harmony import */ var redux_actions_publish__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! redux/actions/publish */ \"../ui/redux/actions/publish.js\");\n/* harmony import */ var lbryinc__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! lbryinc */ \"../extras/lbryinc/index.js\");\n/* harmony import */ var redux_actions_notifications__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! redux/actions/notifications */ \"../ui/redux/actions/notifications.js\");\n/* harmony import */ var $web_src_push_notifications__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! $web/src/push-notifications */ \"./src/push-notifications/index.js\");\n/* harmony import */ var native__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! native */ \"../ui/native.js\");\n/* harmony import */ var redux_actions_settings__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! redux/actions/settings */ \"../ui/redux/actions/settings.js\");\n/* harmony import */ var redux_selectors_app__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! redux/selectors/app */ \"../ui/redux/selectors/app.js\");\n/* harmony import */ var redux_selectors_settings__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! redux/selectors/settings */ \"../ui/redux/selectors/settings.js\");\n/* harmony import */ var redux_selectors_user__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! redux/selectors/user */ \"../ui/redux/selectors/user.js\");\n/* harmony import */ var redux_actions_sync__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! redux/actions/sync */ \"../ui/redux/actions/sync.js\");\n/* harmony import */ var redux_actions_user__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! redux/actions/user */ \"../ui/redux/actions/user.js\");\n/* harmony import */ var package_json__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! package.json */ \"../package.json\");\nvar package_json__WEBPACK_IMPORTED_MODULE_23___namespace = /*#__PURE__*/__webpack_require__.t(/*! package.json */ \"../package.json\", 1);\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! analytics */ \"../ui/analytics.js\");\n/* harmony import */ var util_saved_passwords__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! util/saved-passwords */ \"../ui/util/saved-passwords.js\");\n/* harmony import */ var util_saved_passwords__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(util_saved_passwords__WEBPACK_IMPORTED_MODULE_25__);\n/* harmony import */ var util_storage__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! util/storage */ \"../ui/util/storage.js\");\n/* harmony import */ var redux_actions_websocket__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! redux/actions/websocket */ \"../ui/redux/actions/websocket.js\");\n/* harmony import */ var util_sync_settings__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! util/sync-settings */ \"../ui/util/sync-settings.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar CHECK_UPGRADE_INTERVAL = 10 * 60 * 1000;\nfunction doOpenModal(id) {\n  var modalProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"SHOW_MODAL\"],\n    data: {\n      id: id,\n      modalProps: modalProps\n    }\n  };\n}\nfunction doHideModal() {\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"HIDE_MODAL\"]\n  };\n}\nfunction doUpdateDownloadProgress(percent) {\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"UPGRADE_DOWNLOAD_PROGRESSED\"],\n    data: {\n      percent: percent\n    }\n  };\n}\nfunction doSkipUpgrade() {\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"SKIP_UPGRADE\"]\n  };\n}\nfunction doStartUpgrade() {\n  return function (dispatch, getState) {\n    var state = getState();\n    var upgradeDownloadPath = Object(redux_selectors_app__WEBPACK_IMPORTED_MODULE_18__[\"selectUpgradeDownloadPath\"])(state);\n    ipcRenderer.send('upgrade', upgradeDownloadPath);\n  };\n}\nfunction doDownloadUpgrade() {\n  return function (dispatch, getState) {};\n}\nfunction doDownloadUpgradeRequested() {\n  // This means the user requested an upgrade by clicking the \"upgrade\" button in the navbar.\n  // If on Mac and Windows, we do some new behavior for the auto-update system.\n  // This will probably be reorganized once we get auto-update going on Linux and remove\n  // the old logic.\n  return function (dispatch) {\n    if (['win32', 'darwin'].includes(process.platform) || !!process.env.APPIMAGE) {\n      // electron-updater behavior\n      dispatch(doOpenModal(constants_modal_types__WEBPACK_IMPORTED_MODULE_3__[\"AUTO_UPDATE_DOWNLOADED\"]));\n    } else {\n      // Old behavior for Linux\n      dispatch(doDownloadUpgrade());\n    }\n  };\n}\nfunction doClearUpgradeTimer() {\n  return function (dispatch, getState) {\n    var state = getState();\n\n    if (Object(redux_selectors_app__WEBPACK_IMPORTED_MODULE_18__[\"selectUpgradeTimer\"])(state)) {\n      clearInterval(Object(redux_selectors_app__WEBPACK_IMPORTED_MODULE_18__[\"selectUpgradeTimer\"])(state));\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"CLEAR_UPGRADE_TIMER\"]\n      });\n    }\n  };\n}\nfunction doAutoUpdate() {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"AUTO_UPDATE_DOWNLOADED\"]\n    });\n    dispatch(doOpenModal(constants_modal_types__WEBPACK_IMPORTED_MODULE_3__[\"AUTO_UPDATE_DOWNLOADED\"]));\n    dispatch(doClearUpgradeTimer());\n  };\n}\nfunction doAutoUpdateDeclined() {\n  return function (dispatch) {\n    dispatch(doClearUpgradeTimer());\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"AUTO_UPDATE_DECLINED\"]\n    });\n  };\n}\nfunction doCancelUpgrade() {\n  return function (dispatch, getState) {\n    var state = getState();\n    var upgradeDownloadItem = Object(redux_selectors_app__WEBPACK_IMPORTED_MODULE_18__[\"selectUpgradeDownloadItem\"])(state);\n\n    if (upgradeDownloadItem) {\n      /*\n       * Right now the remote reference to the download item gets garbage collected as soon as the\n       * the download is over (maybe even earlier), so trying to cancel a finished download may\n       * throw an error.\n       */\n      try {\n        upgradeDownloadItem.cancel();\n      } catch (err) {\n        console.error(err); // eslint-disable-line no-console\n      }\n    }\n\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"UPGRADE_CANCELLED\"]\n    });\n  };\n}\nfunction doCheckUpgradeAvailable() {\n  return function (dispatch, getState) {\n    var state = getState();\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"CHECK_UPGRADE_START\"]\n    });\n\n    if (['win32', 'darwin'].includes(process.platform) || !!process.env.APPIMAGE) {\n      // On Windows, Mac, and AppImage, updates happen silently through\n      // electron-updater.\n      var autoUpdateDeclined = Object(redux_selectors_app__WEBPACK_IMPORTED_MODULE_18__[\"selectAutoUpdateDeclined\"])(state);\n\n      if (!autoUpdateDeclined && !isDev) {\n        autoUpdater.checkForUpdates();\n      }\n\n      return;\n    }\n\n    var success = function success(_ref) {\n      var remoteVersion = _ref.remoteVersion,\n          upgradeAvailable = _ref.upgradeAvailable;\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"CHECK_UPGRADE_SUCCESS\"],\n        data: {\n          upgradeAvailable: upgradeAvailable,\n          remoteVersion: remoteVersion\n        }\n      });\n\n      if (upgradeAvailable && !Object(redux_selectors_app__WEBPACK_IMPORTED_MODULE_18__[\"selectModal\"])(state) && (!Object(redux_selectors_app__WEBPACK_IMPORTED_MODULE_18__[\"selectIsUpgradeSkipped\"])(state) || remoteVersion !== Object(redux_selectors_app__WEBPACK_IMPORTED_MODULE_18__[\"selectRemoteVersion\"])(state))) {\n        dispatch(doOpenModal(constants_modal_types__WEBPACK_IMPORTED_MODULE_3__[\"UPGRADE\"]));\n      }\n    };\n\n    var fail = function fail() {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"CHECK_UPGRADE_FAIL\"]\n      });\n    };\n\n    native__WEBPACK_IMPORTED_MODULE_16__[\"default\"].getAppVersionInfo().then(success, fail);\n  };\n}\n/*\n  Initiate a timer that will check for an app upgrade every 10 minutes.\n */\n\nfunction doCheckUpgradeSubscribe() {\n  return function (dispatch) {\n    var checkUpgradeTimer = setInterval(function () {\n      return dispatch(doCheckUpgradeAvailable());\n    }, CHECK_UPGRADE_INTERVAL);\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"CHECK_UPGRADE_SUBSCRIBE\"],\n      data: {\n        checkUpgradeTimer: checkUpgradeTimer\n      }\n    });\n  };\n}\nfunction doMinVersionCheck() {\n  return function (dispatch) {\n    fetch(\"\".concat(config__WEBPACK_IMPORTED_MODULE_1__[\"URL\"], \"/$/minVersion/v1/get\")).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      if ((json === null || json === void 0 ? void 0 : json.status) === 'success' && json !== null && json !== void 0 && json.data && config__WEBPACK_IMPORTED_MODULE_1__[\"MINIMUM_VERSION\"]) {\n        var liveMinimumVersion = Number(json.data);\n\n        if (liveMinimumVersion > config__WEBPACK_IMPORTED_MODULE_1__[\"MINIMUM_VERSION\"]) {\n          dispatch({\n            type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"RELOAD_REQUIRED\"]\n          });\n        }\n      }\n    })[\"catch\"](function (err) {\n      console.error(err);\n    });\n  };\n}\nfunction doMinVersionSubscribe() {\n  return function (dispatch) {\n    if (config__WEBPACK_IMPORTED_MODULE_1__[\"IGNORE_MINIMUM_VERSION\"] === 'true') {\n      return;\n    }\n\n    dispatch(doMinVersionCheck());\n    var CHECK_UPGRADE_INTERVAL_MS = 60 * 60 * 1000;\n    setInterval(function () {\n      return dispatch(doMinVersionCheck());\n    }, CHECK_UPGRADE_INTERVAL_MS);\n  };\n}\nfunction doCheckDaemonVersion() {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"DAEMON_VERSION_MATCH\"]\n    });\n  };\n}\nfunction doNotifyEncryptWallet() {\n  return function (dispatch) {\n    dispatch(doOpenModal(constants_modal_types__WEBPACK_IMPORTED_MODULE_3__[\"WALLET_ENCRYPT\"]));\n  };\n}\nfunction doNotifyDecryptWallet() {\n  return function (dispatch) {\n    dispatch(doOpenModal(constants_modal_types__WEBPACK_IMPORTED_MODULE_3__[\"WALLET_DECRYPT\"]));\n  };\n}\nfunction doNotifyUnlockWallet() {\n  return function (dispatch) {\n    dispatch(doOpenModal(constants_modal_types__WEBPACK_IMPORTED_MODULE_3__[\"WALLET_UNLOCK\"]));\n  };\n}\nfunction doNotifyForgetPassword(props) {\n  return function (dispatch) {\n    dispatch(doOpenModal(constants_modal_types__WEBPACK_IMPORTED_MODULE_3__[\"WALLET_PASSWORD_UNSAVE\"], props));\n  };\n}\nfunction doAlertError(errorList) {\n  return function (dispatch) {\n    dispatch(Object(redux_actions_notifications__WEBPACK_IMPORTED_MODULE_14__[\"doError\"])(errorList));\n  };\n}\nfunction doAlertWaitingForSync() {\n  return function (dispatch, getState) {\n    var state = getState();\n    var authenticated = Object(redux_selectors_user__WEBPACK_IMPORTED_MODULE_20__[\"selectUserVerifiedEmail\"])(state);\n    dispatch(Object(redux_actions_notifications__WEBPACK_IMPORTED_MODULE_14__[\"doToast\"])({\n      message: !authenticated && true ? __('Sign in or create an account to change this setting.') : __('Please wait a bit, we are still getting your account ready.'),\n      isError: false\n    }));\n  };\n}\nfunction doDaemonReady() {\n  return function (dispatch, getState) {\n    var state = getState(); // TODO: call doFetchDaemonSettings, then get usage data, and call doAuthenticate once they are loaded into the store\n\n    var shareUsageData =  true || false;\n    dispatch(Object(redux_actions_user__WEBPACK_IMPORTED_MODULE_22__[\"doAuthenticate\"])(package_json__WEBPACK_IMPORTED_MODULE_23__[\"version\"], shareUsageData, function (status) {\n      var trendingAlgorithm = status && status.wallet && status.wallet.connected_features && status.wallet.connected_features.trending_algorithm;\n\n      if (trendingAlgorithm) {\n        analytics__WEBPACK_IMPORTED_MODULE_24__[\"default\"].event.trendingAlgorithm(trendingAlgorithm);\n      }\n    }, undefined));\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"DAEMON_READY\"]\n    });\n  };\n}\nfunction doClearCache() {\n  return function (dispatch) {\n    // Need to update this to work with new version of redux-persist\n    // Leaving for now\n    // const reducersToClear = whiteListedReducers.filter(reducerKey => reducerKey !== 'tags');\n    // window.cacheStore.purge(reducersToClear);\n    window.sessionStorage.clear();\n    dispatch(Object(redux_actions_wallet__WEBPACK_IMPORTED_MODULE_11__[\"doClearSupport\"])());\n    window.location.reload();\n    return dispatch(Object(redux_actions_publish__WEBPACK_IMPORTED_MODULE_12__[\"doClearPublish\"])());\n  };\n}\nfunction doQuit() {\n  return function () {};\n}\nfunction doQuitAnyDaemon() {\n  return function (dispatch) {};\n}\nfunction doChangeVolume(volume) {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"VOLUME_CHANGED\"],\n      data: {\n        volume: volume\n      }\n    });\n  };\n}\nfunction doChangeMute(muted) {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"VOLUME_MUTED\"],\n      data: {\n        muted: muted\n      }\n    });\n  };\n}\nfunction doClickCommentButton() {\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"ADD_COMMENT\"]\n  };\n}\nfunction doToggleSearchExpanded() {\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"TOGGLE_SEARCH_EXPANDED\"]\n  };\n}\nfunction doAnalyticsView(uri, timeToStart) {\n  return function (dispatch, getState) {\n    var state = getState();\n    var claim = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_9__[\"selectClaimForUri\"])(state, uri);\n    var txid = claim.txid,\n        nout = claim.nout,\n        claimId = claim.claim_id;\n    var claimIsMine = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_9__[\"selectClaimIsMineForUri\"])(state, uri);\n    var outpoint = \"\".concat(txid, \":\").concat(nout);\n\n    if (claimIsMine) {\n      return Promise.resolve();\n    }\n\n    return analytics__WEBPACK_IMPORTED_MODULE_24__[\"default\"].apiLog.view(uri, outpoint, claimId, timeToStart);\n  };\n}\nfunction doAnalyticsBuffer(uri, bufferData) {\n  return function (dispatch, getState) {\n    var isLivestream = bufferData.isLivestream;\n    var state = getState();\n    var claim = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_9__[\"selectClaimForUri\"])(state, uri);\n    var user = Object(redux_selectors_user__WEBPACK_IMPORTED_MODULE_20__[\"selectUser\"])(state);\n    var _claim$value = claim.value,\n        video = _claim$value.video,\n        audio = _claim$value.audio,\n        source = _claim$value.source;\n    var timeAtBuffer = isLivestream ? 0 : parseInt(bufferData.currentTime * 1000);\n    var bufferDuration = parseInt(bufferData.secondsToLoad * 1000);\n    var fileDurationInSeconds = isLivestream ? 0 : video && video.duration || audio && audio.duration;\n    var fileSize = isLivestream ? 0 : source.size; // size in bytes\n\n    var fileSizeInBits = isLivestream ? '0' : fileSize * 8;\n    var bitRate = isLivestream ? bufferData.bitrateAsBitsPerSecond : parseInt(fileSizeInBits / fileDurationInSeconds);\n    var userId = user && user.id.toString(); // if there's a logged in user, send buffer event data to watchman\n\n    if (userId) {\n      analytics__WEBPACK_IMPORTED_MODULE_24__[\"default\"].video.videoBufferEvent(claim, {\n        isLivestream: isLivestream,\n        timeAtBuffer: timeAtBuffer,\n        bufferDuration: bufferDuration,\n        bitRate: bitRate,\n        userId: userId,\n        duration: fileDurationInSeconds,\n        playerPoweredBy: bufferData.playerPoweredBy,\n        readyState: bufferData.readyState\n      });\n    }\n  };\n}\nfunction doAnaltyicsPurchaseEvent(fileInfo) {\n  return function (dispatch) {\n    var purchasePrice = fileInfo.purchase_receipt && fileInfo.purchase_receipt.amount;\n\n    if (purchasePrice) {\n      var purchaseInt = Number(Number(purchasePrice).toFixed(0));\n      analytics__WEBPACK_IMPORTED_MODULE_24__[\"default\"].event.purchase(purchaseInt);\n    }\n  };\n}\n/*\nreconnect()\nfunction reconnect() {\n  return (getState) => {\n    const state = getState();\n    const user = selectUser(state);\n\n    if (window.cordova && user) {\n      pushNotifications.reconnect(user.id);\n      pushNotifications.validate(user.id);\n    }\n  }\n}\n*/\n\nfunction doSignIn() {\n  return function (dispatch, getState) {\n    var state = getState();\n    var user = Object(redux_selectors_user__WEBPACK_IMPORTED_MODULE_20__[\"selectUser\"])(state);\n\n    if ($web_src_push_notifications__WEBPACK_IMPORTED_MODULE_15__[\"default\"].supported && user) {\n      $web_src_push_notifications__WEBPACK_IMPORTED_MODULE_15__[\"default\"].reconnect(user.id);\n      $web_src_push_notifications__WEBPACK_IMPORTED_MODULE_15__[\"default\"].validate(user.id);\n    }\n\n    if (window.cordova && user) {\n      $web_src_push_notifications__WEBPACK_IMPORTED_MODULE_15__[\"default\"].reconnect(user.id);\n      $web_src_push_notifications__WEBPACK_IMPORTED_MODULE_15__[\"default\"].validate(user.id);\n    }\n\n    dispatch(Object(redux_actions_websocket__WEBPACK_IMPORTED_MODULE_27__[\"doNotificationSocketConnect\"])(true));\n    dispatch(Object(redux_actions_notifications__WEBPACK_IMPORTED_MODULE_14__[\"doNotificationList\"])(null, false));\n    dispatch(Object(redux_actions_claims__WEBPACK_IMPORTED_MODULE_8__[\"doCheckPendingClaims\"])());\n    dispatch(Object(redux_actions_wallet__WEBPACK_IMPORTED_MODULE_11__[\"doBalanceSubscribe\"])());\n    dispatch(Object(redux_actions_claims__WEBPACK_IMPORTED_MODULE_8__[\"doFetchChannelListMine\"])());\n    dispatch(Object(redux_actions_claims__WEBPACK_IMPORTED_MODULE_8__[\"doFetchCollectionListMine\"])());\n  };\n}\n\nfunction clearBeforeUnloadListeners() {\n  var beforeUnloads = Object.values(window.beforeUnloadMap || {});\n  beforeUnloads.forEach(function (x) {\n    window.removeEventListener('beforeunload', x.cb);\n  });\n}\n\nfunction doSignOutAction() {\n  return function _callee(dispatch, getState) {\n    var state, user;\n    return regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            state = getState();\n            user = Object(redux_selectors_user__WEBPACK_IMPORTED_MODULE_20__[\"selectUser\"])(state);\n            _context.prev = 2;\n\n            if (!($web_src_push_notifications__WEBPACK_IMPORTED_MODULE_15__[\"default\"].supported && user)) {\n              _context.next = 6;\n              break;\n            }\n\n            _context.next = 6;\n            return regeneratorRuntime.awrap($web_src_push_notifications__WEBPACK_IMPORTED_MODULE_15__[\"default\"].disconnect(user.id));\n\n          case 6:\n            _context.prev = 6;\n            lbryinc__WEBPACK_IMPORTED_MODULE_13__[\"Lbryio\"].call('user', 'signout').then(util_saved_passwords__WEBPACK_IMPORTED_MODULE_25__[\"doSignOutCleanup\"]).then(function () {\n              return window.persistor.purge();\n            })[\"catch\"](function (err) {\n              analytics__WEBPACK_IMPORTED_MODULE_24__[\"default\"].error(\"`doSignOut`: \".concat(err.message || err));\n            })[\"finally\"](function () {\n              return location.reload();\n            });\n            return _context.finish(6);\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[2,, 6, 9]]);\n  };\n}\n\nfunction doSignOut() {\n  return function _callee2(dispatch, getState) {\n    var pendingActions;\n    return regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            pendingActions = Object.values(window.beforeUnloadMap || {});\n\n            if (pendingActions.length > 0) {\n              dispatch(doOpenModal(constants_modal_types__WEBPACK_IMPORTED_MODULE_3__[\"SIGN_OUT\"], {\n                pendingActions: pendingActions.map(function (x) {\n                  return x.msg;\n                }),\n                onConfirm: function onConfirm() {\n                  clearBeforeUnloadListeners();\n                  dispatch(doSignOutAction());\n                }\n              }));\n            } else {\n              dispatch(doSignOutAction());\n            }\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n}\nfunction doSetWelcomeVersion(version) {\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"SET_WELCOME_VERSION\"],\n    data: version\n  };\n}\nfunction doSetHasNavigated() {\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"SET_HAS_NAVIGATED\"],\n    data: true\n  };\n}\nfunction doToggle3PAnalytics(allowParam, doNotDispatch) {\n  return function (dispatch, getState) {\n    var state = getState();\n    var allowState = Object(redux_selectors_app__WEBPACK_IMPORTED_MODULE_18__[\"selectAllowAnalytics\"])(state);\n    var allow = allowParam !== undefined && allowParam !== null ? allowParam : allowState;\n    analytics__WEBPACK_IMPORTED_MODULE_24__[\"default\"].toggleThirdParty(allow);\n\n    if (!doNotDispatch) {\n      return dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"SET_ALLOW_ANALYTICS\"],\n        data: allow\n      });\n    }\n  };\n}\nfunction doGetAndPopulatePreferences(syncId\n/* ?: number */\n) {\n  var SDK_SYNC_KEYS = constants_shared_preferences__WEBPACK_IMPORTED_MODULE_6__[\"SDK_SYNC_KEYS\"];\n  return function (dispatch, getState) {\n    var state = getState();\n    var syncEnabled = Object(redux_selectors_settings__WEBPACK_IMPORTED_MODULE_19__[\"selectClientSetting\"])(state, constants_settings__WEBPACK_IMPORTED_MODULE_4__[\"ENABLE_SYNC\"]);\n    var hasVerifiedEmail = Object(redux_selectors_user__WEBPACK_IMPORTED_MODULE_20__[\"selectUserVerifiedEmail\"])(state);\n    var preferenceKey; // TODO: the logic should match `runPreferences`, but since this function is\n    // only hit as a successful sync callback, it doesn't matter for now.\n\n    preferenceKey = 'shared';\n\n    function successCb(savedPreferences) {\n      var successState = getState();\n      var daemonSettings = Object(redux_selectors_settings__WEBPACK_IMPORTED_MODULE_19__[\"selectDaemonSettings\"])(successState);\n\n      if (savedPreferences !== null) {\n        if (!Object(redux_actions_sync__WEBPACK_IMPORTED_MODULE_21__[\"syncInvalidated\"])(getState, syncId)) {\n          dispatch(Object(redux_actions_sync__WEBPACK_IMPORTED_MODULE_21__[\"doPopulateSharedUserState\"])(savedPreferences));\n        }\n      } else {\n        dispatch(Object(redux_actions_sync__WEBPACK_IMPORTED_MODULE_21__[\"doSetPrefsReady\"])());\n      }\n\n      return true;\n    }\n\n    function failCb(er) {\n      dispatch(Object(redux_actions_notifications__WEBPACK_IMPORTED_MODULE_14__[\"doToast\"])({\n        isError: true,\n        message: __('Unable to load your saved preferences.')\n      }));\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"SYNC_FATAL_ERROR\"],\n        error: er\n      });\n      return false;\n    }\n\n    return dispatch(Object(redux_actions_sync__WEBPACK_IMPORTED_MODULE_21__[\"doPreferenceGet\"])(preferenceKey, successCb, failCb));\n  };\n}\nfunction doHandleSyncComplete(error, hasNewData, syncId) {\n  return function (dispatch, getState) {\n    if (!error) {\n      if (hasNewData) {\n        if (Object(redux_actions_sync__WEBPACK_IMPORTED_MODULE_21__[\"syncInvalidated\"])(getState, syncId)) {\n          return;\n        }\n\n        dispatch(doGetAndPopulatePreferences(syncId));\n      }\n    } else {\n      // eslint-disable-next-line no-console\n      console.error('Error in doHandleSyncComplete', error);\n    }\n  };\n}\nfunction doToggleInterestedInYoutubeSync() {\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"TOGGLE_YOUTUBE_SYNC_INTEREST\"]\n  };\n}\nfunction doToggleSplashAnimation() {\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"TOGGLE_SPLASH_ANIMATION\"]\n  };\n}\nfunction doSetActiveChannel(claimId, override) {\n  return function (dispatch, getState) {\n    if (claimId || override) {\n      return dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"SET_ACTIVE_CHANNEL\"],\n        data: {\n          claimId: claimId\n        }\n      });\n    }\n  };\n}\nfunction doSetIncognito(incognitoEnabled) {\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"SET_INCOGNITO\"],\n    data: {\n      enabled: incognitoEnabled\n    }\n  };\n}\nfunction doSetAdBlockerFound(found) {\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"SET_AD_BLOCKER_FOUND\"],\n    data: found\n  };\n}\nfunction doSetGdprConsentList() {\n  var rawList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ''; // https://community.cookiepro.com/s/article/UUID-66bcaaf1-c7ca-5f32-6760-c75a1337c226?language=en_US\n\n  var list = rawList.split(',').filter(Boolean);\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"SET_GDPR_CONSENT_LIST\"],\n    data: list\n  };\n}\nfunction doToggleAppDrawer(type) {\n  return function (dispatch, getState) {\n    var state = getState();\n    var openDrawer = Object(redux_selectors_app__WEBPACK_IMPORTED_MODULE_18__[\"selectAppDrawerOpen\"])(state);\n    var isOpen = openDrawer && openDrawer === type;\n\n    if (isOpen) {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"DRAWER_CLOSED\"]\n      });\n    } else {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"DRAWER_OPENED\"],\n        data: type\n      });\n    }\n  };\n}\nvar doSetMainPlayerDimension = function doSetMainPlayerDimension(dimensions) {\n  return function (dispatch) {\n    return dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_2__[\"SET_MAIN_PLAYER_DIMENSIONS\"],\n      data: dimensions\n    });\n  };\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../web/node_modules/process/browser.js */ \"./node_modules/process/browser.js\"), __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvcmVkdXgvYWN0aW9ucy9hcHAuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vdWkvcmVkdXgvYWN0aW9ucy9hcHAuanM/ZWRlMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IE1JTklNVU1fVkVSU0lPTiwgSUdOT1JFX01JTklNVU1fVkVSU0lPTiwgVVJMIH0gZnJvbSAnY29uZmlnJztcbmltcG9ydCAqIGFzIEFDVElPTlMgZnJvbSAnY29uc3RhbnRzL2FjdGlvbl90eXBlcyc7XG5pbXBvcnQgKiBhcyBNT0RBTFMgZnJvbSAnY29uc3RhbnRzL21vZGFsX3R5cGVzJztcbmltcG9ydCAqIGFzIFNFVFRJTkdTIGZyb20gJ2NvbnN0YW50cy9zZXR0aW5ncyc7XG5pbXBvcnQgKiBhcyBEQUVNT05fU0VUVElOR1MgZnJvbSAnY29uc3RhbnRzL2RhZW1vbl9zZXR0aW5ncyc7XG5pbXBvcnQgKiBhcyBTSEFSRURfUFJFRkVSRU5DRVMgZnJvbSAnY29uc3RhbnRzL3NoYXJlZF9wcmVmZXJlbmNlcyc7XG5pbXBvcnQgTGJyeSBmcm9tICdsYnJ5JztcbmltcG9ydCB7IGRvRmV0Y2hDaGFubmVsTGlzdE1pbmUsIGRvRmV0Y2hDb2xsZWN0aW9uTGlzdE1pbmUsIGRvQ2hlY2tQZW5kaW5nQ2xhaW1zIH0gZnJvbSAncmVkdXgvYWN0aW9ucy9jbGFpbXMnO1xuaW1wb3J0IHsgc2VsZWN0Q2xhaW1Gb3JVcmksIHNlbGVjdENsYWltSXNNaW5lRm9yVXJpIH0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2NsYWltcyc7XG5pbXBvcnQgeyBkb0ZldGNoRmlsZUluZm9zIH0gZnJvbSAncmVkdXgvYWN0aW9ucy9maWxlX2luZm8nO1xuaW1wb3J0IHsgZG9DbGVhclN1cHBvcnQsIGRvQmFsYW5jZVN1YnNjcmliZSB9IGZyb20gJ3JlZHV4L2FjdGlvbnMvd2FsbGV0JztcbmltcG9ydCB7IGRvQ2xlYXJQdWJsaXNoIH0gZnJvbSAncmVkdXgvYWN0aW9ucy9wdWJsaXNoJztcbmltcG9ydCB7IExicnlpbyB9IGZyb20gJ2xicnlpbmMnO1xuaW1wb3J0IHsgZG9Ub2FzdCwgZG9FcnJvciwgZG9Ob3RpZmljYXRpb25MaXN0IH0gZnJvbSAncmVkdXgvYWN0aW9ucy9ub3RpZmljYXRpb25zJztcbmltcG9ydCBwdXNoTm90aWZpY2F0aW9ucyBmcm9tICckd2ViL3NyYy9wdXNoLW5vdGlmaWNhdGlvbnMnO1xuXG5pbXBvcnQgTmF0aXZlIGZyb20gJ25hdGl2ZSc7XG5pbXBvcnQge1xuICBkb0ZldGNoRGFlbW9uU2V0dGluZ3MsXG4gIGRvU2V0QXV0b0xhdW5jaCxcbiAgZG9TZXREYWVtb25TZXR0aW5nLFxuICBkb0ZpbmRGRm1wZWcsXG4gIGRvR2V0RGFlbW9uU3RhdHVzLFxufSBmcm9tICdyZWR1eC9hY3Rpb25zL3NldHRpbmdzJztcbmltcG9ydCB7XG4gIHNlbGVjdElzVXBncmFkZVNraXBwZWQsXG4gIHNlbGVjdFVwZGF0ZVVybCxcbiAgc2VsZWN0VXBncmFkZURvd25sb2FkSXRlbSxcbiAgc2VsZWN0VXBncmFkZURvd25sb2FkUGF0aCxcbiAgc2VsZWN0VXBncmFkZUZpbGVuYW1lLFxuICBzZWxlY3RBdXRvVXBkYXRlRGVjbGluZWQsXG4gIHNlbGVjdFJlbW90ZVZlcnNpb24sXG4gIHNlbGVjdFVwZ3JhZGVUaW1lcixcbiAgc2VsZWN0TW9kYWwsXG4gIHNlbGVjdEFsbG93QW5hbHl0aWNzLFxuICBzZWxlY3RBcHBEcmF3ZXJPcGVuLFxufSBmcm9tICdyZWR1eC9zZWxlY3RvcnMvYXBwJztcbmltcG9ydCB7IHNlbGVjdERhZW1vblNldHRpbmdzLCBzZWxlY3RDbGllbnRTZXR0aW5nIH0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL3NldHRpbmdzJztcbmltcG9ydCB7IHNlbGVjdFVzZXIsIHNlbGVjdFVzZXJWZXJpZmllZEVtYWlsIH0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL3VzZXInO1xuaW1wb3J0IHsgZG9TZXRQcmVmc1JlYWR5LCBkb1ByZWZlcmVuY2VHZXQsIGRvUG9wdWxhdGVTaGFyZWRVc2VyU3RhdGUsIHN5bmNJbnZhbGlkYXRlZCB9IGZyb20gJ3JlZHV4L2FjdGlvbnMvc3luYyc7XG5pbXBvcnQgeyBkb0F1dGhlbnRpY2F0ZSB9IGZyb20gJ3JlZHV4L2FjdGlvbnMvdXNlcic7XG5pbXBvcnQgeyBsYnJ5U2V0dGluZ3MgYXMgY29uZmlnLCB2ZXJzaW9uIGFzIGFwcFZlcnNpb24gfSBmcm9tICdwYWNrYWdlLmpzb24nO1xuaW1wb3J0IGFuYWx5dGljcyBmcm9tICdhbmFseXRpY3MnO1xuaW1wb3J0IHsgZG9TaWduT3V0Q2xlYW51cCB9IGZyb20gJ3V0aWwvc2F2ZWQtcGFzc3dvcmRzJztcbmltcG9ydCB7IExvY2FsU3RvcmFnZSwgTFMgfSBmcm9tICd1dGlsL3N0b3JhZ2UnO1xuaW1wb3J0IHsgZG9Ob3RpZmljYXRpb25Tb2NrZXRDb25uZWN0IH0gZnJvbSAncmVkdXgvYWN0aW9ucy93ZWJzb2NrZXQnO1xuaW1wb3J0IHsgc3RyaW5naWZ5U2VydmVyUGFyYW0sIHNob3VsZFNldFNldHRpbmcgfSBmcm9tICd1dGlsL3N5bmMtc2V0dGluZ3MnO1xuXG5cbmNvbnN0IENIRUNLX1VQR1JBREVfSU5URVJWQUwgPSAxMCAqIDYwICogMTAwMDtcblxuZXhwb3J0IGZ1bmN0aW9uIGRvT3Blbk1vZGFsKGlkLCBtb2RhbFByb3BzID0ge30pIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBBQ1RJT05TLlNIT1dfTU9EQUwsXG4gICAgZGF0YToge1xuICAgICAgaWQsXG4gICAgICBtb2RhbFByb3BzLFxuICAgIH0sXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb0hpZGVNb2RhbCgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBBQ1RJT05TLkhJREVfTU9EQUwsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb1VwZGF0ZURvd25sb2FkUHJvZ3Jlc3MocGVyY2VudCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IEFDVElPTlMuVVBHUkFERV9ET1dOTE9BRF9QUk9HUkVTU0VELFxuICAgIGRhdGE6IHtcbiAgICAgIHBlcmNlbnQsXG4gICAgfSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvU2tpcFVwZ3JhZGUoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogQUNUSU9OUy5TS0lQX1VQR1JBREUsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb1N0YXJ0VXBncmFkZSgpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgY29uc3QgdXBncmFkZURvd25sb2FkUGF0aCA9IHNlbGVjdFVwZ3JhZGVEb3dubG9hZFBhdGgoc3RhdGUpO1xuXG4gICAgaXBjUmVuZGVyZXIuc2VuZCgndXBncmFkZScsIHVwZ3JhZGVEb3dubG9hZFBhdGgpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9Eb3dubG9hZFVwZ3JhZGUoKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb0Rvd25sb2FkVXBncmFkZVJlcXVlc3RlZCgpIHtcbiAgLy8gVGhpcyBtZWFucyB0aGUgdXNlciByZXF1ZXN0ZWQgYW4gdXBncmFkZSBieSBjbGlja2luZyB0aGUgXCJ1cGdyYWRlXCIgYnV0dG9uIGluIHRoZSBuYXZiYXIuXG4gIC8vIElmIG9uIE1hYyBhbmQgV2luZG93cywgd2UgZG8gc29tZSBuZXcgYmVoYXZpb3IgZm9yIHRoZSBhdXRvLXVwZGF0ZSBzeXN0ZW0uXG4gIC8vIFRoaXMgd2lsbCBwcm9iYWJseSBiZSByZW9yZ2FuaXplZCBvbmNlIHdlIGdldCBhdXRvLXVwZGF0ZSBnb2luZyBvbiBMaW51eCBhbmQgcmVtb3ZlXG4gIC8vIHRoZSBvbGQgbG9naWMuXG5cbiAgcmV0dXJuIChkaXNwYXRjaCkgPT4ge1xuICAgIGlmIChbJ3dpbjMyJywgJ2RhcndpbiddLmluY2x1ZGVzKHByb2Nlc3MucGxhdGZvcm0pIHx8ICEhcHJvY2Vzcy5lbnYuQVBQSU1BR0UpIHtcbiAgICAgIC8vIGVsZWN0cm9uLXVwZGF0ZXIgYmVoYXZpb3JcbiAgICAgIGRpc3BhdGNoKGRvT3Blbk1vZGFsKE1PREFMUy5BVVRPX1VQREFURV9ET1dOTE9BREVEKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE9sZCBiZWhhdmlvciBmb3IgTGludXhcbiAgICAgIGRpc3BhdGNoKGRvRG93bmxvYWRVcGdyYWRlKCkpO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvQ2xlYXJVcGdyYWRlVGltZXIoKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuXG4gICAgaWYgKHNlbGVjdFVwZ3JhZGVUaW1lcihzdGF0ZSkpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZWN0VXBncmFkZVRpbWVyKHN0YXRlKSk7XG4gICAgICBkaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IEFDVElPTlMuQ0xFQVJfVVBHUkFERV9USU1FUixcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvQXV0b1VwZGF0ZSgpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCkgPT4ge1xuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IEFDVElPTlMuQVVUT19VUERBVEVfRE9XTkxPQURFRCxcbiAgICB9KTtcblxuICAgIGRpc3BhdGNoKGRvT3Blbk1vZGFsKE1PREFMUy5BVVRPX1VQREFURV9ET1dOTE9BREVEKSk7XG5cbiAgICBkaXNwYXRjaChkb0NsZWFyVXBncmFkZVRpbWVyKCkpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9BdXRvVXBkYXRlRGVjbGluZWQoKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBkaXNwYXRjaChkb0NsZWFyVXBncmFkZVRpbWVyKCkpO1xuXG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogQUNUSU9OUy5BVVRPX1VQREFURV9ERUNMSU5FRCxcbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvQ2FuY2VsVXBncmFkZSgpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgY29uc3QgdXBncmFkZURvd25sb2FkSXRlbSA9IHNlbGVjdFVwZ3JhZGVEb3dubG9hZEl0ZW0oc3RhdGUpO1xuXG4gICAgaWYgKHVwZ3JhZGVEb3dubG9hZEl0ZW0pIHtcbiAgICAgIC8qXG4gICAgICAgKiBSaWdodCBub3cgdGhlIHJlbW90ZSByZWZlcmVuY2UgdG8gdGhlIGRvd25sb2FkIGl0ZW0gZ2V0cyBnYXJiYWdlIGNvbGxlY3RlZCBhcyBzb29uIGFzIHRoZVxuICAgICAgICogdGhlIGRvd25sb2FkIGlzIG92ZXIgKG1heWJlIGV2ZW4gZWFybGllciksIHNvIHRyeWluZyB0byBjYW5jZWwgYSBmaW5pc2hlZCBkb3dubG9hZCBtYXlcbiAgICAgICAqIHRocm93IGFuIGVycm9yLlxuICAgICAgICovXG4gICAgICB0cnkge1xuICAgICAgICB1cGdyYWRlRG93bmxvYWRJdGVtLmNhbmNlbCgpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgICB9XG4gICAgfVxuXG4gICAgZGlzcGF0Y2goeyB0eXBlOiBBQ1RJT05TLlVQR1JBREVfQ0FOQ0VMTEVEIH0pO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9DaGVja1VwZ3JhZGVBdmFpbGFibGUoKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IEFDVElPTlMuQ0hFQ0tfVVBHUkFERV9TVEFSVCxcbiAgICB9KTtcblxuICAgIGlmIChbJ3dpbjMyJywgJ2RhcndpbiddLmluY2x1ZGVzKHByb2Nlc3MucGxhdGZvcm0pIHx8ICEhcHJvY2Vzcy5lbnYuQVBQSU1BR0UpIHtcbiAgICAgIC8vIE9uIFdpbmRvd3MsIE1hYywgYW5kIEFwcEltYWdlLCB1cGRhdGVzIGhhcHBlbiBzaWxlbnRseSB0aHJvdWdoXG4gICAgICAvLyBlbGVjdHJvbi11cGRhdGVyLlxuICAgICAgY29uc3QgYXV0b1VwZGF0ZURlY2xpbmVkID0gc2VsZWN0QXV0b1VwZGF0ZURlY2xpbmVkKHN0YXRlKTtcblxuICAgICAgaWYgKCFhdXRvVXBkYXRlRGVjbGluZWQgJiYgIWlzRGV2KSB7XG4gICAgICAgIGF1dG9VcGRhdGVyLmNoZWNrRm9yVXBkYXRlcygpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHN1Y2Nlc3MgPSAoeyByZW1vdGVWZXJzaW9uLCB1cGdyYWRlQXZhaWxhYmxlIH0pID0+IHtcbiAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogQUNUSU9OUy5DSEVDS19VUEdSQURFX1NVQ0NFU1MsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB1cGdyYWRlQXZhaWxhYmxlLFxuICAgICAgICAgIHJlbW90ZVZlcnNpb24sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKFxuICAgICAgICB1cGdyYWRlQXZhaWxhYmxlICYmXG4gICAgICAgICFzZWxlY3RNb2RhbChzdGF0ZSkgJiZcbiAgICAgICAgKCFzZWxlY3RJc1VwZ3JhZGVTa2lwcGVkKHN0YXRlKSB8fCByZW1vdGVWZXJzaW9uICE9PSBzZWxlY3RSZW1vdGVWZXJzaW9uKHN0YXRlKSlcbiAgICAgICkge1xuICAgICAgICBkaXNwYXRjaChkb09wZW5Nb2RhbChNT0RBTFMuVVBHUkFERSkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBmYWlsID0gKCkgPT4ge1xuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBBQ1RJT05TLkNIRUNLX1VQR1JBREVfRkFJTCxcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBOYXRpdmUuZ2V0QXBwVmVyc2lvbkluZm8oKS50aGVuKHN1Y2Nlc3MsIGZhaWwpO1xuICB9O1xufVxuXG4vKlxuICBJbml0aWF0ZSBhIHRpbWVyIHRoYXQgd2lsbCBjaGVjayBmb3IgYW4gYXBwIHVwZ3JhZGUgZXZlcnkgMTAgbWludXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvQ2hlY2tVcGdyYWRlU3Vic2NyaWJlKCkge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgY29uc3QgY2hlY2tVcGdyYWRlVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiBkaXNwYXRjaChkb0NoZWNrVXBncmFkZUF2YWlsYWJsZSgpKSwgQ0hFQ0tfVVBHUkFERV9JTlRFUlZBTCk7XG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogQUNUSU9OUy5DSEVDS19VUEdSQURFX1NVQlNDUklCRSxcbiAgICAgIGRhdGE6IHsgY2hlY2tVcGdyYWRlVGltZXIgfSxcbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvTWluVmVyc2lvbkNoZWNrKCkge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgZmV0Y2goYCR7VVJMfS8kL21pblZlcnNpb24vdjEvZ2V0YClcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgLnRoZW4oKGpzb24pID0+IHtcbiAgICAgICAgaWYgKGpzb24/LnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnICYmIGpzb24/LmRhdGEgJiYgTUlOSU1VTV9WRVJTSU9OKSB7XG4gICAgICAgICAgY29uc3QgbGl2ZU1pbmltdW1WZXJzaW9uID0gTnVtYmVyKGpzb24uZGF0YSk7XG4gICAgICAgICAgaWYgKGxpdmVNaW5pbXVtVmVyc2lvbiA+IE1JTklNVU1fVkVSU0lPTikge1xuICAgICAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiBBQ1RJT05TLlJFTE9BRF9SRVFVSVJFRCB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvTWluVmVyc2lvblN1YnNjcmliZSgpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCkgPT4ge1xuICAgIGlmIChJR05PUkVfTUlOSU1VTV9WRVJTSU9OID09PSAndHJ1ZScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBkaXNwYXRjaChkb01pblZlcnNpb25DaGVjaygpKTtcbiAgICBjb25zdCBDSEVDS19VUEdSQURFX0lOVEVSVkFMX01TID0gNjAgKiA2MCAqIDEwMDA7XG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4gZGlzcGF0Y2goZG9NaW5WZXJzaW9uQ2hlY2soKSksIENIRUNLX1VQR1JBREVfSU5URVJWQUxfTVMpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9DaGVja0RhZW1vblZlcnNpb24oKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLkRBRU1PTl9WRVJTSU9OX01BVENILFxuICAgIH0pO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9Ob3RpZnlFbmNyeXB0V2FsbGV0KCkge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgZGlzcGF0Y2goZG9PcGVuTW9kYWwoTU9EQUxTLldBTExFVF9FTkNSWVBUKSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb05vdGlmeURlY3J5cHRXYWxsZXQoKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBkaXNwYXRjaChkb09wZW5Nb2RhbChNT0RBTFMuV0FMTEVUX0RFQ1JZUFQpKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvTm90aWZ5VW5sb2NrV2FsbGV0KCkge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgZGlzcGF0Y2goZG9PcGVuTW9kYWwoTU9EQUxTLldBTExFVF9VTkxPQ0spKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvTm90aWZ5Rm9yZ2V0UGFzc3dvcmQocHJvcHMpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCkgPT4ge1xuICAgIGRpc3BhdGNoKGRvT3Blbk1vZGFsKE1PREFMUy5XQUxMRVRfUEFTU1dPUkRfVU5TQVZFLCBwcm9wcykpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9BbGVydEVycm9yKGVycm9yTGlzdCkge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgZGlzcGF0Y2goZG9FcnJvcihlcnJvckxpc3QpKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvQWxlcnRXYWl0aW5nRm9yU3luYygpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgY29uc3QgYXV0aGVudGljYXRlZCA9IHNlbGVjdFVzZXJWZXJpZmllZEVtYWlsKHN0YXRlKTtcblxuICAgIGRpc3BhdGNoKFxuICAgICAgZG9Ub2FzdCh7XG4gICAgICAgIG1lc3NhZ2U6XG4gICAgICAgICAgIWF1dGhlbnRpY2F0ZWQgJiYgSVNfV0VCXG4gICAgICAgICAgICA/IF9fKCdTaWduIGluIG9yIGNyZWF0ZSBhbiBhY2NvdW50IHRvIGNoYW5nZSB0aGlzIHNldHRpbmcuJylcbiAgICAgICAgICAgIDogX18oJ1BsZWFzZSB3YWl0IGEgYml0LCB3ZSBhcmUgc3RpbGwgZ2V0dGluZyB5b3VyIGFjY291bnQgcmVhZHkuJyksXG4gICAgICAgIGlzRXJyb3I6IGZhbHNlLFxuICAgICAgfSlcbiAgICApO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9EYWVtb25SZWFkeSgpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG5cbiAgICAvLyBUT0RPOiBjYWxsIGRvRmV0Y2hEYWVtb25TZXR0aW5ncywgdGhlbiBnZXQgdXNhZ2UgZGF0YSwgYW5kIGNhbGwgZG9BdXRoZW50aWNhdGUgb25jZSB0aGV5IGFyZSBsb2FkZWQgaW50byB0aGUgc3RvcmVcbiAgICBjb25zdCBzaGFyZVVzYWdlRGF0YSA9IElTX1dFQiB8fCBMb2NhbFN0b3JhZ2UuZ2V0SXRlbShMUy5TSEFSRV9JTlRFUk5BTCkgPT09ICd0cnVlJztcblxuICAgIGRpc3BhdGNoKFxuICAgICAgZG9BdXRoZW50aWNhdGUoXG4gICAgICAgIGFwcFZlcnNpb24sXG4gICAgICAgIHNoYXJlVXNhZ2VEYXRhLFxuICAgICAgICAoc3RhdHVzKSA9PiB7XG4gICAgICAgICAgY29uc3QgdHJlbmRpbmdBbGdvcml0aG0gPVxuICAgICAgICAgICAgc3RhdHVzICYmXG4gICAgICAgICAgICBzdGF0dXMud2FsbGV0ICYmXG4gICAgICAgICAgICBzdGF0dXMud2FsbGV0LmNvbm5lY3RlZF9mZWF0dXJlcyAmJlxuICAgICAgICAgICAgc3RhdHVzLndhbGxldC5jb25uZWN0ZWRfZmVhdHVyZXMudHJlbmRpbmdfYWxnb3JpdGhtO1xuXG4gICAgICAgICAgaWYgKHRyZW5kaW5nQWxnb3JpdGhtKSB7XG4gICAgICAgICAgICBhbmFseXRpY3MuZXZlbnQudHJlbmRpbmdBbGdvcml0aG0odHJlbmRpbmdBbGdvcml0aG0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdW5kZWZpbmVkXG4gICAgICApXG4gICAgKTtcbiAgICBkaXNwYXRjaCh7IHR5cGU6IEFDVElPTlMuREFFTU9OX1JFQURZIH0pO1xuXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb0NsZWFyQ2FjaGUoKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICAvLyBOZWVkIHRvIHVwZGF0ZSB0aGlzIHRvIHdvcmsgd2l0aCBuZXcgdmVyc2lvbiBvZiByZWR1eC1wZXJzaXN0XG4gICAgLy8gTGVhdmluZyBmb3Igbm93XG4gICAgLy8gY29uc3QgcmVkdWNlcnNUb0NsZWFyID0gd2hpdGVMaXN0ZWRSZWR1Y2Vycy5maWx0ZXIocmVkdWNlcktleSA9PiByZWR1Y2VyS2V5ICE9PSAndGFncycpO1xuICAgIC8vIHdpbmRvdy5jYWNoZVN0b3JlLnB1cmdlKHJlZHVjZXJzVG9DbGVhcik7XG4gICAgd2luZG93LnNlc3Npb25TdG9yYWdlLmNsZWFyKCk7XG4gICAgZGlzcGF0Y2goZG9DbGVhclN1cHBvcnQoKSk7XG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIHJldHVybiBkaXNwYXRjaChkb0NsZWFyUHVibGlzaCgpKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvUXVpdCgpIHtcbiAgcmV0dXJuICgpID0+IHtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvUXVpdEFueURhZW1vbigpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCkgPT4ge1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9DaGFuZ2VWb2x1bWUodm9sdW1lKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlZPTFVNRV9DSEFOR0VELFxuICAgICAgZGF0YToge1xuICAgICAgICB2b2x1bWUsXG4gICAgICB9LFxuICAgIH0pO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9DaGFuZ2VNdXRlKG11dGVkKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlZPTFVNRV9NVVRFRCxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbXV0ZWQsXG4gICAgICB9LFxuICAgIH0pO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9DbGlja0NvbW1lbnRCdXR0b24oKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogQUNUSU9OUy5BRERfQ09NTUVOVCxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvVG9nZ2xlU2VhcmNoRXhwYW5kZWQoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogQUNUSU9OUy5UT0dHTEVfU0VBUkNIX0VYUEFOREVELFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9BbmFseXRpY3NWaWV3KHVyaSwgdGltZVRvU3RhcnQpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgY29uc3QgY2xhaW0gPSBzZWxlY3RDbGFpbUZvclVyaShzdGF0ZSwgdXJpKTtcbiAgICBjb25zdCB7IHR4aWQsIG5vdXQsIGNsYWltX2lkOiBjbGFpbUlkIH0gPSBjbGFpbTtcbiAgICBjb25zdCBjbGFpbUlzTWluZSA9IHNlbGVjdENsYWltSXNNaW5lRm9yVXJpKHN0YXRlLCB1cmkpO1xuICAgIGNvbnN0IG91dHBvaW50ID0gYCR7dHhpZH06JHtub3V0fWA7XG5cbiAgICBpZiAoY2xhaW1Jc01pbmUpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYW5hbHl0aWNzLmFwaUxvZy52aWV3KHVyaSwgb3V0cG9pbnQsIGNsYWltSWQsIHRpbWVUb1N0YXJ0KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvQW5hbHl0aWNzQnVmZmVyKHVyaSwgYnVmZmVyRGF0YSkge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGlzTGl2ZXN0cmVhbSA9IGJ1ZmZlckRhdGEuaXNMaXZlc3RyZWFtO1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBjbGFpbSA9IHNlbGVjdENsYWltRm9yVXJpKHN0YXRlLCB1cmkpO1xuICAgIGNvbnN0IHVzZXIgPSBzZWxlY3RVc2VyKHN0YXRlKTtcbiAgICBjb25zdCB7XG4gICAgICB2YWx1ZTogeyB2aWRlbywgYXVkaW8sIHNvdXJjZSB9LFxuICAgIH0gPSBjbGFpbTtcbiAgICBjb25zdCB0aW1lQXRCdWZmZXIgPSBpc0xpdmVzdHJlYW0gPyAwIDogcGFyc2VJbnQoYnVmZmVyRGF0YS5jdXJyZW50VGltZSAqIDEwMDApO1xuICAgIGNvbnN0IGJ1ZmZlckR1cmF0aW9uID0gcGFyc2VJbnQoYnVmZmVyRGF0YS5zZWNvbmRzVG9Mb2FkICogMTAwMCk7XG4gICAgY29uc3QgZmlsZUR1cmF0aW9uSW5TZWNvbmRzID0gaXNMaXZlc3RyZWFtID8gMCA6ICh2aWRlbyAmJiB2aWRlby5kdXJhdGlvbikgfHwgKGF1ZGlvICYmIGF1ZGlvLmR1cmF0aW9uKTtcbiAgICBjb25zdCBmaWxlU2l6ZSA9IGlzTGl2ZXN0cmVhbSA/IDAgOiBzb3VyY2Uuc2l6ZTsgLy8gc2l6ZSBpbiBieXRlc1xuICAgIGNvbnN0IGZpbGVTaXplSW5CaXRzID0gaXNMaXZlc3RyZWFtID8gJzAnIDogZmlsZVNpemUgKiA4O1xuICAgIGNvbnN0IGJpdFJhdGUgPSBpc0xpdmVzdHJlYW0gPyBidWZmZXJEYXRhLmJpdHJhdGVBc0JpdHNQZXJTZWNvbmQgOiBwYXJzZUludChmaWxlU2l6ZUluQml0cyAvIGZpbGVEdXJhdGlvbkluU2Vjb25kcyk7XG4gICAgY29uc3QgdXNlcklkID0gdXNlciAmJiB1c2VyLmlkLnRvU3RyaW5nKCk7XG4gICAgLy8gaWYgdGhlcmUncyBhIGxvZ2dlZCBpbiB1c2VyLCBzZW5kIGJ1ZmZlciBldmVudCBkYXRhIHRvIHdhdGNobWFuXG4gICAgaWYgKHVzZXJJZCkge1xuICAgICAgYW5hbHl0aWNzLnZpZGVvLnZpZGVvQnVmZmVyRXZlbnQoY2xhaW0sIHtcbiAgICAgICAgaXNMaXZlc3RyZWFtLFxuICAgICAgICB0aW1lQXRCdWZmZXIsXG4gICAgICAgIGJ1ZmZlckR1cmF0aW9uLFxuICAgICAgICBiaXRSYXRlLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIGR1cmF0aW9uOiBmaWxlRHVyYXRpb25JblNlY29uZHMsXG4gICAgICAgIHBsYXllclBvd2VyZWRCeTogYnVmZmVyRGF0YS5wbGF5ZXJQb3dlcmVkQnksXG4gICAgICAgIHJlYWR5U3RhdGU6IGJ1ZmZlckRhdGEucmVhZHlTdGF0ZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvQW5hbHR5aWNzUHVyY2hhc2VFdmVudChmaWxlSW5mbykge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgbGV0IHB1cmNoYXNlUHJpY2UgPSBmaWxlSW5mby5wdXJjaGFzZV9yZWNlaXB0ICYmIGZpbGVJbmZvLnB1cmNoYXNlX3JlY2VpcHQuYW1vdW50O1xuICAgIGlmIChwdXJjaGFzZVByaWNlKSB7XG4gICAgICBjb25zdCBwdXJjaGFzZUludCA9IE51bWJlcihOdW1iZXIocHVyY2hhc2VQcmljZSkudG9GaXhlZCgwKSk7XG4gICAgICBhbmFseXRpY3MuZXZlbnQucHVyY2hhc2UocHVyY2hhc2VJbnQpO1xuICAgIH1cbiAgfTtcbn1cblxuLypcbnJlY29ubmVjdCgpXG5mdW5jdGlvbiByZWNvbm5lY3QoKSB7XG4gIHJldHVybiAoZ2V0U3RhdGUpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgY29uc3QgdXNlciA9IHNlbGVjdFVzZXIoc3RhdGUpO1xuXG4gICAgaWYgKHdpbmRvdy5jb3Jkb3ZhICYmIHVzZXIpIHtcbiAgICAgIHB1c2hOb3RpZmljYXRpb25zLnJlY29ubmVjdCh1c2VyLmlkKTtcbiAgICAgIHB1c2hOb3RpZmljYXRpb25zLnZhbGlkYXRlKHVzZXIuaWQpO1xuICAgIH1cbiAgfVxufVxuKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRvU2lnbkluKCkge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICBjb25zdCB1c2VyID0gc2VsZWN0VXNlcihzdGF0ZSk7XG5cbiAgICBpZiAocHVzaE5vdGlmaWNhdGlvbnMuc3VwcG9ydGVkICYmIHVzZXIpIHtcbiAgICAgIHB1c2hOb3RpZmljYXRpb25zLnJlY29ubmVjdCh1c2VyLmlkKTtcbiAgICAgIHB1c2hOb3RpZmljYXRpb25zLnZhbGlkYXRlKHVzZXIuaWQpO1xuICAgIH1cbiAgICBpZiAod2luZG93LmNvcmRvdmEgJiYgdXNlcikge1xuICAgICAgcHVzaE5vdGlmaWNhdGlvbnMucmVjb25uZWN0KHVzZXIuaWQpO1xuICAgICAgcHVzaE5vdGlmaWNhdGlvbnMudmFsaWRhdGUodXNlci5pZCk7XG4gICAgfVxuXG4gICAgZGlzcGF0Y2goZG9Ob3RpZmljYXRpb25Tb2NrZXRDb25uZWN0KHRydWUpKTtcbiAgICBkaXNwYXRjaChkb05vdGlmaWNhdGlvbkxpc3QobnVsbCwgZmFsc2UpKTtcbiAgICBkaXNwYXRjaChkb0NoZWNrUGVuZGluZ0NsYWltcygpKTtcbiAgICBkaXNwYXRjaChkb0JhbGFuY2VTdWJzY3JpYmUoKSk7XG4gICAgZGlzcGF0Y2goZG9GZXRjaENoYW5uZWxMaXN0TWluZSgpKTtcbiAgICBkaXNwYXRjaChkb0ZldGNoQ29sbGVjdGlvbkxpc3RNaW5lKCkpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjbGVhckJlZm9yZVVubG9hZExpc3RlbmVycygpIHtcbiAgY29uc3QgYmVmb3JlVW5sb2FkcyA9IE9iamVjdC52YWx1ZXMod2luZG93LmJlZm9yZVVubG9hZE1hcCB8fCB7fSk7XG4gIGJlZm9yZVVubG9hZHMuZm9yRWFjaCgoeCkgPT4ge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCB4LmNiKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGRvU2lnbk91dEFjdGlvbigpIHtcbiAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgY29uc3QgdXNlciA9IHNlbGVjdFVzZXIoc3RhdGUpO1xuICAgIHRyeSB7XG4gICAgICBpZiAocHVzaE5vdGlmaWNhdGlvbnMuc3VwcG9ydGVkICYmIHVzZXIpIHtcbiAgICAgICAgYXdhaXQgcHVzaE5vdGlmaWNhdGlvbnMuZGlzY29ubmVjdCh1c2VyLmlkKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgTGJyeWlvLmNhbGwoJ3VzZXInLCAnc2lnbm91dCcpXG4gICAgICAgIC50aGVuKGRvU2lnbk91dENsZWFudXApXG5cbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHJldHVybiB3aW5kb3cucGVyc2lzdG9yLnB1cmdlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgYW5hbHl0aWNzLmVycm9yKGBcXGBkb1NpZ25PdXRcXGA6ICR7ZXJyLm1lc3NhZ2UgfHwgZXJyfWApO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiBsb2NhdGlvbi5yZWxvYWQoKSk7XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9TaWduT3V0KCkge1xuICByZXR1cm4gYXN5bmMgKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHBlbmRpbmdBY3Rpb25zID0gT2JqZWN0LnZhbHVlcyh3aW5kb3cuYmVmb3JlVW5sb2FkTWFwIHx8IHt9KTtcbiAgICBpZiAocGVuZGluZ0FjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgZGlzcGF0Y2goXG4gICAgICAgIGRvT3Blbk1vZGFsKE1PREFMUy5TSUdOX09VVCwge1xuICAgICAgICAgIHBlbmRpbmdBY3Rpb25zOiBwZW5kaW5nQWN0aW9ucy5tYXAoKHgpID0+IHgubXNnKSxcbiAgICAgICAgICBvbkNvbmZpcm06ICgpID0+IHtcbiAgICAgICAgICAgIGNsZWFyQmVmb3JlVW5sb2FkTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICBkaXNwYXRjaChkb1NpZ25PdXRBY3Rpb24oKSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpc3BhdGNoKGRvU2lnbk91dEFjdGlvbigpKTtcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb1NldFdlbGNvbWVWZXJzaW9uKHZlcnNpb24pIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBBQ1RJT05TLlNFVF9XRUxDT01FX1ZFUlNJT04sXG4gICAgZGF0YTogdmVyc2lvbixcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvU2V0SGFzTmF2aWdhdGVkKCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IEFDVElPTlMuU0VUX0hBU19OQVZJR0FURUQsXG4gICAgZGF0YTogdHJ1ZSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvVG9nZ2xlM1BBbmFseXRpY3MoYWxsb3dQYXJhbSwgZG9Ob3REaXNwYXRjaCkge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBhbGxvd1N0YXRlID0gc2VsZWN0QWxsb3dBbmFseXRpY3Moc3RhdGUpO1xuICAgIGNvbnN0IGFsbG93ID0gYWxsb3dQYXJhbSAhPT0gdW5kZWZpbmVkICYmIGFsbG93UGFyYW0gIT09IG51bGwgPyBhbGxvd1BhcmFtIDogYWxsb3dTdGF0ZTtcbiAgICBhbmFseXRpY3MudG9nZ2xlVGhpcmRQYXJ0eShhbGxvdyk7XG4gICAgaWYgKCFkb05vdERpc3BhdGNoKSB7XG4gICAgICByZXR1cm4gZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBBQ1RJT05TLlNFVF9BTExPV19BTkFMWVRJQ1MsXG4gICAgICAgIGRhdGE6IGFsbG93LFxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9HZXRBbmRQb3B1bGF0ZVByZWZlcmVuY2VzKHN5bmNJZCAvKiA/OiBudW1iZXIgKi8pIHtcbiAgY29uc3QgeyBTREtfU1lOQ19LRVlTIH0gPSBTSEFSRURfUFJFRkVSRU5DRVM7XG5cbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgY29uc3Qgc3luY0VuYWJsZWQgPSBzZWxlY3RDbGllbnRTZXR0aW5nKHN0YXRlLCBTRVRUSU5HUy5FTkFCTEVfU1lOQyk7XG4gICAgY29uc3QgaGFzVmVyaWZpZWRFbWFpbCA9IHNlbGVjdFVzZXJWZXJpZmllZEVtYWlsKHN0YXRlKTtcbiAgICBsZXQgcHJlZmVyZW5jZUtleTtcbiAgICAvLyBUT0RPOiB0aGUgbG9naWMgc2hvdWxkIG1hdGNoIGBydW5QcmVmZXJlbmNlc2AsIGJ1dCBzaW5jZSB0aGlzIGZ1bmN0aW9uIGlzXG4gICAgLy8gb25seSBoaXQgYXMgYSBzdWNjZXNzZnVsIHN5bmMgY2FsbGJhY2ssIGl0IGRvZXNuJ3QgbWF0dGVyIGZvciBub3cuXG4gICAgcHJlZmVyZW5jZUtleSA9ICdzaGFyZWQnO1xuXG4gICAgZnVuY3Rpb24gc3VjY2Vzc0NiKHNhdmVkUHJlZmVyZW5jZXMpIHtcbiAgICAgIGNvbnN0IHN1Y2Nlc3NTdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgICBjb25zdCBkYWVtb25TZXR0aW5ncyA9IHNlbGVjdERhZW1vblNldHRpbmdzKHN1Y2Nlc3NTdGF0ZSk7XG4gICAgICBpZiAoc2F2ZWRQcmVmZXJlbmNlcyAhPT0gbnVsbCkge1xuICAgICAgICBpZiAoIXN5bmNJbnZhbGlkYXRlZChnZXRTdGF0ZSwgc3luY0lkKSkge1xuICAgICAgICAgIGRpc3BhdGNoKGRvUG9wdWxhdGVTaGFyZWRVc2VyU3RhdGUoc2F2ZWRQcmVmZXJlbmNlcykpO1xuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpc3BhdGNoKGRvU2V0UHJlZnNSZWFkeSgpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZhaWxDYihlcikge1xuICAgICAgZGlzcGF0Y2goXG4gICAgICAgIGRvVG9hc3Qoe1xuICAgICAgICAgIGlzRXJyb3I6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogX18oJ1VuYWJsZSB0byBsb2FkIHlvdXIgc2F2ZWQgcHJlZmVyZW5jZXMuJyksXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBkaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IEFDVElPTlMuU1lOQ19GQVRBTF9FUlJPUixcbiAgICAgICAgZXJyb3I6IGVyLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGlzcGF0Y2goZG9QcmVmZXJlbmNlR2V0KHByZWZlcmVuY2VLZXksIHN1Y2Nlc3NDYiwgZmFpbENiKSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb0hhbmRsZVN5bmNDb21wbGV0ZShlcnJvciwgaGFzTmV3RGF0YSwgc3luY0lkKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgaWYgKCFlcnJvcikge1xuICAgICAgaWYgKGhhc05ld0RhdGEpIHtcbiAgICAgICAgaWYgKHN5bmNJbnZhbGlkYXRlZChnZXRTdGF0ZSwgc3luY0lkKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpc3BhdGNoKGRvR2V0QW5kUG9wdWxhdGVQcmVmZXJlbmNlcyhzeW5jSWQpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGRvSGFuZGxlU3luY0NvbXBsZXRlJywgZXJyb3IpO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvVG9nZ2xlSW50ZXJlc3RlZEluWW91dHViZVN5bmMoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogQUNUSU9OUy5UT0dHTEVfWU9VVFVCRV9TWU5DX0lOVEVSRVNULFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9Ub2dnbGVTcGxhc2hBbmltYXRpb24oKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogQUNUSU9OUy5UT0dHTEVfU1BMQVNIX0FOSU1BVElPTixcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvU2V0QWN0aXZlQ2hhbm5lbChjbGFpbUlkLCBvdmVycmlkZSkge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGlmIChjbGFpbUlkIHx8IG92ZXJyaWRlKSB7XG4gICAgICByZXR1cm4gZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBBQ1RJT05TLlNFVF9BQ1RJVkVfQ0hBTk5FTCxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGNsYWltSWQsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb1NldEluY29nbml0byhpbmNvZ25pdG9FbmFibGVkKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogQUNUSU9OUy5TRVRfSU5DT0dOSVRPLFxuICAgIGRhdGE6IHtcbiAgICAgIGVuYWJsZWQ6IGluY29nbml0b0VuYWJsZWQsXG4gICAgfSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvU2V0QWRCbG9ja2VyRm91bmQoZm91bmQpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBBQ1RJT05TLlNFVF9BRF9CTE9DS0VSX0ZPVU5ELFxuICAgIGRhdGE6IGZvdW5kLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9TZXRHZHByQ29uc2VudExpc3QocmF3TGlzdCA9ICcnKSB7XG4gIC8vIGh0dHBzOi8vY29tbXVuaXR5LmNvb2tpZXByby5jb20vcy9hcnRpY2xlL1VVSUQtNjZiY2FhZjEtYzdjYS01ZjMyLTY3NjAtYzc1YTEzMzdjMjI2P2xhbmd1YWdlPWVuX1VTXG4gIGNvbnN0IGxpc3QgPSByYXdMaXN0LnNwbGl0KCcsJykuZmlsdGVyKEJvb2xlYW4pO1xuXG4gIHJldHVybiB7XG4gICAgdHlwZTogQUNUSU9OUy5TRVRfR0RQUl9DT05TRU5UX0xJU1QsXG4gICAgZGF0YTogbGlzdCxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvVG9nZ2xlQXBwRHJhd2VyKHR5cGUpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgY29uc3Qgb3BlbkRyYXdlciA9IHNlbGVjdEFwcERyYXdlck9wZW4oc3RhdGUpO1xuICAgIGNvbnN0IGlzT3BlbiA9IG9wZW5EcmF3ZXIgJiYgb3BlbkRyYXdlciA9PT0gdHlwZTtcblxuICAgIGlmIChpc09wZW4pIHtcbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogQUNUSU9OUy5EUkFXRVJfQ0xPU0VEIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXNwYXRjaCh7IHR5cGU6IEFDVElPTlMuRFJBV0VSX09QRU5FRCwgZGF0YTogdHlwZSB9KTtcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBkb1NldE1haW5QbGF5ZXJEaW1lbnNpb24gPSAoZGltZW5zaW9ucykgPT4gKGRpc3BhdGNoKSA9PlxuICBkaXNwYXRjaCh7IHR5cGU6IEFDVElPTlMuU0VUX01BSU5fUExBWUVSX0RJTUVOU0lPTlMsIGRhdGE6IGRpbWVuc2lvbnMgfSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBT0E7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBRkE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSkE7QUFNQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBUkE7QUFVQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFJQTtBQUVBO0FBUEE7QUFTQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFEQTtBQUhBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFqQkE7QUFtQkE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBQ0E7QUFPQTtBQUtBO0FBQ0E7QUFmQTtBQUNBO0FBaUJBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFDQTtBQUtBO0FBekNBO0FBMkNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBRkE7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFSQTtBQVdBO0FBWEE7QUFEQTtBQWVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQVBBO0FBU0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBSUE7QUFMQTtBQUxBO0FBY0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFLQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBWkE7QUFpQkE7QUFBQTtBQUFBO0FBeEJBO0FBMkJBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQURBO0FBUUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUZBO0FBREE7QUFRQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFhQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQUE7QUFBQTtBQUFBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVVBO0FBM0JBO0FBNkJBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsQkE7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBUUE7QUFJQTtBQUpBO0FBT0E7QUFQQTtBQVNBO0FBVEE7QUFSQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBRkE7QUFXQTtBQUNBO0FBQ0E7QUFmQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWdCQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBVkE7QUFZQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUF2Q0E7QUF5Q0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUNBO0FBWkE7QUFjQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUZBO0FBTUE7QUFSQTtBQVVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBRkE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBVEE7QUFXQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQURBO0FBQUE7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../ui/redux/actions/app.js\n");

/***/ }),

/***/ "../ui/redux/actions/user.js":
/*!***********************************!*\
  !*** ../ui/redux/actions/user.js ***!
  \***********************************/
/*! exports provided: sessionStorageAvailable, doFetchInviteStatus, doInstallNew, doCheckUserOdyseeMemberships, doAuthenticate, doUserFetch, doUserCheckEmailVerified, doUserPhoneReset, doUserPhoneNew, doUserPhoneVerifyFailure, doUserPhoneVerify, doUserEmailToVerify, doUserEmailNew, doUserCheckIfEmailExists, doUserSignIn, doUserSignUp, doUserPasswordReset, doUserPasswordSet, doUserResendVerificationEmail, doClearEmailEntry, doClearPasswordEntry, doUserEmailVerifyFailure, doUserEmailVerify, doUserIdentityVerify, doUserInviteNew, doUserSetReferrerReset, doUserSetReferrerWithUri, doUserSetReferrer, doUserSetCountry, doClaimYoutubeChannels, doCheckYoutubeTransfer, doFetchUserMemberships, doFetchUserLocale */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sessionStorageAvailable\", function() { return sessionStorageAvailable; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doFetchInviteStatus\", function() { return doFetchInviteStatus; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doInstallNew\", function() { return doInstallNew; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doCheckUserOdyseeMemberships\", function() { return doCheckUserOdyseeMemberships; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doAuthenticate\", function() { return doAuthenticate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserFetch\", function() { return doUserFetch; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserCheckEmailVerified\", function() { return doUserCheckEmailVerified; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserPhoneReset\", function() { return doUserPhoneReset; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserPhoneNew\", function() { return doUserPhoneNew; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserPhoneVerifyFailure\", function() { return doUserPhoneVerifyFailure; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserPhoneVerify\", function() { return doUserPhoneVerify; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserEmailToVerify\", function() { return doUserEmailToVerify; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserEmailNew\", function() { return doUserEmailNew; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserCheckIfEmailExists\", function() { return doUserCheckIfEmailExists; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserSignIn\", function() { return doUserSignIn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserSignUp\", function() { return doUserSignUp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserPasswordReset\", function() { return doUserPasswordReset; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserPasswordSet\", function() { return doUserPasswordSet; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserResendVerificationEmail\", function() { return doUserResendVerificationEmail; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doClearEmailEntry\", function() { return doClearEmailEntry; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doClearPasswordEntry\", function() { return doClearPasswordEntry; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserEmailVerifyFailure\", function() { return doUserEmailVerifyFailure; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserEmailVerify\", function() { return doUserEmailVerify; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserIdentityVerify\", function() { return doUserIdentityVerify; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserInviteNew\", function() { return doUserInviteNew; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserSetReferrerReset\", function() { return doUserSetReferrerReset; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserSetReferrerWithUri\", function() { return doUserSetReferrerWithUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserSetReferrer\", function() { return doUserSetReferrer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doUserSetCountry\", function() { return doUserSetCountry; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doClaimYoutubeChannels\", function() { return doClaimYoutubeChannels; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doCheckYoutubeTransfer\", function() { return doCheckYoutubeTransfer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doFetchUserMemberships\", function() { return doFetchUserMemberships; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"doFetchUserLocale\", function() { return doFetchUserLocale; });\n/* harmony import */ var lbry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lbry */ \"../ui/lbry.js\");\n/* harmony import */ var redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/selectors/claims */ \"../ui/redux/selectors/claims.js\");\n/* harmony import */ var redux_actions_claims__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux/actions/claims */ \"../ui/redux/actions/claims.js\");\n/* harmony import */ var util_lbryURI__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! util/lbryURI */ \"../ui/util/lbryURI.js\");\n/* harmony import */ var util_batch_actions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! util/batch-actions */ \"../ui/util/batch-actions.js\");\n/* harmony import */ var util_stripe__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! util/stripe */ \"../ui/util/stripe.js\");\n/* harmony import */ var constants_channels__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! constants/channels */ \"../ui/constants/channels.js\");\n/* harmony import */ var constants_action_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! constants/action_types */ \"../ui/constants/action_types.js\");\n/* harmony import */ var redux_actions_blocked__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! redux/actions/blocked */ \"../ui/redux/actions/blocked.js\");\n/* harmony import */ var redux_actions_rewards__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! redux/actions/rewards */ \"../ui/redux/actions/rewards.js\");\n/* harmony import */ var redux_selectors_user__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! redux/selectors/user */ \"../ui/redux/selectors/user.js\");\n/* harmony import */ var redux_selectors_rewards__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! redux/selectors/rewards */ \"../ui/redux/selectors/rewards.js\");\n/* harmony import */ var redux_actions_notifications__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! redux/actions/notifications */ \"../ui/redux/actions/notifications.js\");\n/* harmony import */ var rewards__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rewards */ \"../ui/rewards.js\");\n/* harmony import */ var lbryinc__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! lbryinc */ \"../extras/lbryinc/index.js\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! config */ \"../config.js\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(config__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var util_default_languages__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! util/default-languages */ \"../ui/util/default-languages.js\");\n/* harmony import */ var util_storage__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! util/storage */ \"../ui/util/storage.js\");\n/* harmony import */ var util_claim__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! util/claim */ \"../ui/util/claim.js\");\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n} // import analytics from 'analytics';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar sessionStorageAvailable = false;\nvar CHECK_INTERVAL = 200;\nvar AUTH_WAIT_TIMEOUT = 10000;\nvar stripeEnvironment = Object(util_stripe__WEBPACK_IMPORTED_MODULE_5__[\"getStripeEnvironment\"])();\nfunction doFetchInviteStatus() {\n  var shouldCallRewardList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_INVITE_STATUS_FETCH_STARTED\"]\n    });\n    Promise.all([lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user', 'invite_status'), lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user_referral_code', 'list')]).then(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          status = _ref2[0],\n          code = _ref2[1];\n\n      if (shouldCallRewardList) {\n        dispatch(Object(redux_actions_rewards__WEBPACK_IMPORTED_MODULE_9__[\"doRewardList\"])());\n      }\n\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_INVITE_STATUS_FETCH_SUCCESS\"],\n        data: {\n          invitesRemaining: status.invites_remaining ? status.invites_remaining : 0,\n          invitees: status.invitees,\n          referralLink: \"\".concat(lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].CONNECTION_STRING, \"user/refer?r=\").concat(code),\n          referralCode: code\n        }\n      });\n    })[\"catch\"](function (error) {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_INVITE_STATUS_FETCH_FAILURE\"],\n        data: {\n          error: error\n        }\n      });\n    });\n  };\n}\nfunction doInstallNew(appVersion, callbackForUsersWhoAreSharingData, domain) {\n  var payload = {\n    app_version: appVersion,\n    domain: domain\n  };\n  payload.app_id = window.odysee.build.googlePlay ? 'odyseeandroidAWhtoqDuAfQ6KHMXxFxt8tkhmt7sfprEMHWKjy5hf6PwZcHDV542V' : 'odyseeandroidAPKtoqDuAfQ6KHMXxFxt8tkhmt7sfprEMHWKjy5hf6PwZcHDV542V';\n  lbry__WEBPACK_IMPORTED_MODULE_0__[\"default\"].version().then(function (version) {\n    payload.daemon_version = version.lbrynet_version;\n    payload.operating_system = 'android';\n    payload.platform = 'android';\n    lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('install', 'new', payload);\n\n    if (callbackForUsersWhoAreSharingData) {\n      callbackForUsersWhoAreSharingData(status);\n    }\n  });\n}\n\nfunction checkAuthBusy() {\n  var time = Date.now();\n  return new Promise(function (resolve, reject) {\n    (function waitForAuth() {\n      try {\n        sessionStorage.setItem('test', 'available');\n        sessionStorage.removeItem('test');\n        sessionStorageAvailable = true;\n      } catch (e) {\n        if (e) {// no session storage\n        }\n      }\n\n      if ( false || !sessionStorageAvailable) {\n        return resolve();\n      }\n\n      var inProgress = util_storage__WEBPACK_IMPORTED_MODULE_17__[\"LocalStorage\"].getItem(util_storage__WEBPACK_IMPORTED_MODULE_17__[\"LS\"].AUTH_IN_PROGRESS);\n\n      if (!inProgress) {\n        util_storage__WEBPACK_IMPORTED_MODULE_17__[\"LocalStorage\"].setItem(util_storage__WEBPACK_IMPORTED_MODULE_17__[\"LS\"].AUTH_IN_PROGRESS, 'true');\n        return resolve();\n      } else {\n        if (Date.now() - time < AUTH_WAIT_TIMEOUT) {\n          setTimeout(waitForAuth, CHECK_INTERVAL);\n        } else {\n          return resolve();\n        }\n      }\n    })();\n  });\n}\n/***\n * Given a user, return their highest ranking Odysee membership (Premium or Premium Plus)\n * @param dispatch\n * @param user\n * @returns {Promise<void>}\n */\n\n\nfunction doCheckUserOdyseeMemberships(user) {\n  return function _callee(dispatch) {\n    var highestMembershipRanking, response, savedMemberships, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, membership, premiumPlusExists;\n\n    return regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!user.odysee_member) {\n              _context.next = 25;\n              break;\n            }\n\n            _context.next = 3;\n            return regeneratorRuntime.awrap(lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('membership', 'mine', {\n              environment: stripeEnvironment\n            }, 'post'));\n\n          case 3:\n            response = _context.sent;\n            savedMemberships = []; // TODO: this will work for now, but it should be adjusted\n            // TODO: to check if it's active, or if it's cancelled if it's still valid past current date\n            // loop through all memberships and save the @odysee ones\n            // maybe in the future we can only hit @odysee in the API call\n\n            _iteratorNormalCompletion = true;\n            _didIteratorError = false;\n            _iteratorError = undefined;\n            _context.prev = 8;\n\n            for (_iterator = response[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              membership = _step.value;\n\n              if (membership.MembershipDetails && membership.MembershipDetails.channel_name === '@odysee') {\n                savedMemberships.push(membership.MembershipDetails.name);\n              }\n            } // determine highest ranking membership based on returned data\n            // note: this is from an odd state in the API where a user can be both premium/Premium + at the same time\n            // I expect this can change once upgrade/downgrade is implemented\n\n\n            _context.next = 16;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](8);\n            _didIteratorError = true;\n            _iteratorError = _context.t0;\n\n          case 16:\n            _context.prev = 16;\n            _context.prev = 17;\n\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n\n          case 19:\n            _context.prev = 19;\n\n            if (!_didIteratorError) {\n              _context.next = 22;\n              break;\n            }\n\n            throw _iteratorError;\n\n          case 22:\n            return _context.finish(19);\n\n          case 23:\n            return _context.finish(16);\n\n          case 24:\n            if (savedMemberships.length > 0) {\n              // if premium plus is a membership, return that, otherwise it's only premium\n              premiumPlusExists = savedMemberships.includes('Premium+');\n\n              if (premiumPlusExists) {\n                highestMembershipRanking = 'Premium+';\n              } else {\n                highestMembershipRanking = 'Premium';\n              }\n            }\n\n          case 25:\n            dispatch({\n              type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"ADD_ODYSEE_MEMBERSHIP_DATA\"],\n              data: {\n                user: user,\n                odyseeMembershipName: highestMembershipRanking || ''\n              } // '' = none; `undefined` = not fetched\n\n            });\n\n          case 26:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[8, 12, 16, 24], [17,, 19, 23]]);\n  };\n} // TODO: Call doInstallNew separately so we don't have to pass appVersion and os_system params?\n\nfunction doAuthenticate(appVersion) {\n  var shareUsageData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var callbackForUsersWhoAreSharingData = arguments.length > 2 ? arguments[2] : undefined;\n  var callInstall = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"AUTHENTICATION_STARTED\"]\n    });\n    checkAuthBusy().then(function () {\n      return lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].authenticate(config__WEBPACK_IMPORTED_MODULE_15__[\"DOMAIN\"], Object(util_default_languages__WEBPACK_IMPORTED_MODULE_16__[\"getDefaultLanguage\"])());\n    }).then(function (user) {\n      util_storage__WEBPACK_IMPORTED_MODULE_17__[\"LocalStorage\"].removeItem(util_storage__WEBPACK_IMPORTED_MODULE_17__[\"LS\"].AUTH_IN_PROGRESS);\n      lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].getAuthToken().then(function (token) {\n        dispatch({\n          type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"AUTHENTICATION_SUCCESS\"],\n          data: {\n            user: user,\n            accessToken: token\n          }\n        });\n        dispatch(doCheckUserOdyseeMemberships(user));\n\n        if (shareUsageData) {\n          var _user$device_types;\n\n          dispatch(Object(redux_actions_rewards__WEBPACK_IMPORTED_MODULE_9__[\"doRewardList\"])());\n\n          if (callInstall && !(user !== null && user !== void 0 && (_user$device_types = user.device_types) !== null && _user$device_types !== void 0 && _user$device_types.includes('web'))) {\n            doInstallNew(appVersion, callbackForUsersWhoAreSharingData, config__WEBPACK_IMPORTED_MODULE_15__[\"DOMAIN\"]);\n          }\n        }\n\n        dispatch(Object(redux_actions_blocked__WEBPACK_IMPORTED_MODULE_8__[\"doFetchGeoBlockedList\"])());\n      });\n    })[\"catch\"](function (error) {\n      util_storage__WEBPACK_IMPORTED_MODULE_17__[\"LocalStorage\"].removeItem(util_storage__WEBPACK_IMPORTED_MODULE_17__[\"LS\"].AUTH_IN_PROGRESS);\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"AUTHENTICATION_FAILURE\"],\n        data: {\n          error: error\n        }\n      });\n    });\n  };\n}\nfunction doUserFetch() {\n  return function (dispatch) {\n    return new Promise(function (resolve, reject) {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_FETCH_STARTED\"]\n      });\n      lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].getCurrentUser().then(function (user) {\n        dispatch(doCheckUserOdyseeMemberships(user));\n        dispatch({\n          type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_FETCH_SUCCESS\"],\n          data: {\n            user: user\n          }\n        });\n        resolve(user);\n      })[\"catch\"](function (error) {\n        reject(error);\n        dispatch({\n          type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_FETCH_FAILURE\"],\n          data: {\n            error: error\n          }\n        });\n      });\n    });\n  };\n}\nfunction doUserCheckEmailVerified() {\n  // This will happen in the background so we don't need loading booleans\n  return function (dispatch) {\n    lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].getCurrentUser().then(function (user) {\n      dispatch(doCheckUserOdyseeMemberships(user));\n\n      if (user.has_verified_email) {\n        dispatch(Object(redux_actions_rewards__WEBPACK_IMPORTED_MODULE_9__[\"doRewardList\"])());\n        dispatch({\n          type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_FETCH_SUCCESS\"],\n          data: {\n            user: user\n          }\n        });\n      }\n    });\n  };\n}\nfunction doUserPhoneReset() {\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_PHONE_RESET\"]\n  };\n}\nfunction doUserPhoneNew(phone, countryCode) {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_PHONE_NEW_STARTED\"],\n      data: {\n        phone: phone,\n        country_code: countryCode\n      }\n    });\n\n    var success = function success() {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_PHONE_NEW_SUCCESS\"],\n        data: {\n          phone: phone\n        }\n      });\n    };\n\n    var failure = function failure(error) {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_PHONE_NEW_FAILURE\"],\n        data: {\n          error: error\n        }\n      });\n    };\n\n    lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user', 'phone_number_new', {\n      phone_number: phone,\n      country_code: countryCode\n    }, 'post').then(success, failure);\n  };\n}\nfunction doUserPhoneVerifyFailure(error) {\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_PHONE_VERIFY_FAILURE\"],\n    data: {\n      error: error\n    }\n  };\n}\nfunction doUserPhoneVerify(verificationCode) {\n  return function (dispatch, getState) {\n    var phoneNumber = Object(redux_selectors_user__WEBPACK_IMPORTED_MODULE_10__[\"selectPhoneToVerify\"])(getState());\n    var countryCode = Object(redux_selectors_user__WEBPACK_IMPORTED_MODULE_10__[\"selectUserCountryCode\"])(getState());\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_PHONE_VERIFY_STARTED\"],\n      code: verificationCode\n    });\n    lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user', 'phone_number_confirm', {\n      verification_code: verificationCode,\n      phone_number: phoneNumber,\n      country_code: countryCode\n    }, 'post').then(function (user) {\n      if (user.is_identity_verified) {\n        dispatch({\n          type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_PHONE_VERIFY_SUCCESS\"],\n          data: {\n            user: user\n          }\n        });\n        dispatch(Object(redux_actions_rewards__WEBPACK_IMPORTED_MODULE_9__[\"doClaimRewardType\"])(rewards__WEBPACK_IMPORTED_MODULE_13__[\"default\"].TYPE_NEW_USER));\n      }\n    })[\"catch\"](function (error) {\n      return dispatch(doUserPhoneVerifyFailure(error));\n    });\n  };\n}\nfunction doUserEmailToVerify(email) {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_VERIFY_SET\"],\n      data: {\n        email: email\n      }\n    });\n  };\n}\nfunction doUserEmailNew(email) {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_STARTED\"],\n      email: email\n    });\n\n    var success = function success() {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_SUCCESS\"],\n        data: {\n          email: email\n        }\n      });\n      dispatch(doUserFetch());\n    };\n\n    var failure = function failure(error) {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_FAILURE\"],\n        data: {\n          error: error\n        }\n      });\n    };\n\n    lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user_email', 'new', {\n      email: email,\n      send_verification_email: true\n    }, 'post')[\"catch\"](function (error) {\n      if (error.response && error.response.status === 409) {\n        dispatch({\n          type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_EXISTS\"]\n        });\n        return lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user_email', 'resend_token', {\n          email: email,\n          only_if_expired: true\n        }, 'post').then(success, failure);\n      }\n\n      throw error;\n    }).then(success, failure);\n  };\n}\nfunction doUserCheckIfEmailExists(email) {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_STARTED\"],\n      email: email\n    });\n\n    var triggerEmailFlow = function triggerEmailFlow(hasPassword) {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_SUCCESS\"],\n        data: {\n          email: email\n        }\n      });\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_EXISTS\"]\n      });\n\n      if (hasPassword) {\n        dispatch({\n          type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_PASSWORD_EXISTS\"]\n        });\n      } else {\n        // If they don't have a password, they will need to use the email verification api\n        lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user_email', 'resend_token', {\n          email: email,\n          only_if_expired: true\n        }, 'post');\n      }\n    };\n\n    var success = function success(response) {\n      triggerEmailFlow(response.has_password);\n    };\n\n    var failure = function failure(error) {\n      return dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_FAILURE\"],\n        data: {\n          error: error\n        }\n      });\n    };\n\n    lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user', 'exists', {\n      email: email\n    }, 'post')[\"catch\"](function (error) {\n      // no email\n      if (error.response && error.response.status === 404) {\n        dispatch({\n          type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_DOES_NOT_EXIST\"]\n        }); // sign in by email\n      } else if (error.response && error.response.status === 412) {\n        triggerEmailFlow(false);\n      }\n\n      throw error;\n    }) // sign the user in\n    .then(success, failure);\n  };\n}\nfunction doUserSignIn(email, password) {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_STARTED\"],\n      email: email\n    });\n\n    var success = function success() {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_SUCCESS\"],\n        data: {\n          email: email\n        }\n      });\n      dispatch(doUserFetch());\n    };\n\n    var failure = function failure(error) {\n      return dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_FAILURE\"],\n        data: {\n          error: error\n        }\n      });\n    };\n\n    lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user', 'signin', _objectSpread({\n      email: email\n    }, password ? {\n      password: password\n    } : {}), 'post')[\"catch\"](function (error) {\n      if (error.response && error.response.status === 409) {\n        dispatch({\n          type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_EXISTS\"]\n        });\n        return lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user_email', 'resend_token', {\n          email: email,\n          only_if_expired: true\n        }, 'post').then(success, failure);\n      }\n\n      throw error;\n    }).then(success, failure);\n  };\n}\nfunction doUserSignUp(email, password) {\n  return function (dispatch) {\n    return new Promise(function (resolve, reject) {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_STARTED\"],\n        email: email\n      });\n\n      var success = function success() {\n        dispatch({\n          type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_SUCCESS\"],\n          data: {\n            email: email\n          }\n        });\n        dispatch(doUserFetch());\n        resolve();\n      };\n\n      var failure = function failure(error) {\n        if (error.response && error.response.status === 409) {\n          dispatch({\n            type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_EXISTS\"]\n          });\n        }\n\n        dispatch({\n          type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_FAILURE\"],\n          data: {\n            error: error\n          }\n        });\n        reject(error);\n      };\n\n      lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user', 'signup', _objectSpread({\n        email: email\n      }, password ? {\n        password: password\n      } : {}), 'post').then(success, failure);\n    });\n  };\n}\nfunction doUserPasswordReset(email) {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_PASSWORD_RESET_STARTED\"],\n      email: email\n    });\n\n    var success = function success() {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_PASSWORD_RESET_SUCCESS\"]\n      });\n    };\n\n    var failure = function failure(error) {\n      return dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_PASSWORD_RESET_FAILURE\"],\n        data: {\n          error: error\n        }\n      });\n    };\n\n    lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user_password', 'reset', {\n      email: email\n    }, 'post').then(success, failure);\n  };\n}\nfunction doUserPasswordSet(newPassword, oldPassword, authToken) {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_PASSWORD_SET_STARTED\"]\n    });\n\n    var success = function success() {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_PASSWORD_SET_SUCCESS\"]\n      });\n      dispatch(doUserFetch());\n    };\n\n    var failure = function failure(error) {\n      return dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_PASSWORD_SET_FAILURE\"],\n        data: {\n          error: error\n        }\n      });\n    };\n\n    lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user_password', 'set', _objectSpread({\n      new_password: newPassword\n    }, oldPassword ? {\n      old_password: oldPassword\n    } : {}, {}, authToken ? {\n      auth_token: authToken\n    } : {}), 'post').then(success, failure);\n  };\n}\nfunction doUserResendVerificationEmail(email) {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_VERIFY_RETRY_STARTED\"]\n    });\n\n    var success = function success() {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_VERIFY_RETRY_SUCCESS\"]\n      });\n    };\n\n    var failure = function failure(error) {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_VERIFY_RETRY_FAILURE\"],\n        data: {\n          error: error\n        }\n      });\n    };\n\n    lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user_email', 'resend_token', {\n      email: email,\n      only_if_expired: true\n    }, 'post')[\"catch\"](function (error) {\n      if (error.response && error.response.status === 409) {\n        throw error;\n      }\n    }).then(success, failure);\n  };\n}\nfunction doClearEmailEntry() {\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_NEW_CLEAR_ENTRY\"]\n  };\n}\nfunction doClearPasswordEntry() {\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_PASSWORD_SET_CLEAR\"]\n  };\n}\nfunction doUserEmailVerifyFailure(error) {\n  return {\n    type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_VERIFY_FAILURE\"],\n    data: {\n      error: error\n    }\n  };\n}\nfunction doUserEmailVerify(verificationToken, recaptcha) {\n  return function (dispatch, getState) {\n    var email = Object(redux_selectors_user__WEBPACK_IMPORTED_MODULE_10__[\"selectEmailToVerify\"])(getState());\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_VERIFY_STARTED\"],\n      code: verificationToken,\n      recaptcha: recaptcha\n    });\n    lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user_email', 'confirm', {\n      verification_token: verificationToken,\n      email: email,\n      recaptcha: recaptcha\n    }, 'post').then(function (userEmail) {\n      if (userEmail.is_verified) {\n        dispatch({\n          type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_EMAIL_VERIFY_SUCCESS\"],\n          data: {\n            email: email\n          }\n        });\n        dispatch(doUserFetch());\n      } else {\n        throw new Error('Your email is still not verified.'); // shouldn't happen\n      }\n    })[\"catch\"](function (error) {\n      return dispatch(doUserEmailVerifyFailure(error));\n    });\n  };\n}\nfunction doUserIdentityVerify(stripeToken) {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_IDENTITY_VERIFY_STARTED\"],\n      token: stripeToken\n    });\n    lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user', 'verify_identity', {\n      stripe_token: stripeToken\n    }, 'post').then(function (user) {\n      if (user.is_identity_verified) {\n        dispatch({\n          type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_IDENTITY_VERIFY_SUCCESS\"],\n          data: {\n            user: user\n          }\n        });\n        dispatch(Object(redux_actions_rewards__WEBPACK_IMPORTED_MODULE_9__[\"doClaimRewardType\"])(rewards__WEBPACK_IMPORTED_MODULE_13__[\"default\"].TYPE_NEW_USER));\n      } else {\n        throw new Error('Your identity is still not verified. This should not happen.'); // shouldn't happen\n      }\n    })[\"catch\"](function (error) {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_IDENTITY_VERIFY_FAILURE\"],\n        data: {\n          error: error.toString()\n        }\n      });\n    });\n  };\n}\nfunction doUserInviteNew(email) {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_INVITE_NEW_STARTED\"]\n    });\n    return lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user', 'invite', {\n      email: email\n    }, 'post').then(function (success) {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_INVITE_NEW_SUCCESS\"],\n        data: {\n          email: email\n        }\n      });\n      dispatch(Object(redux_actions_notifications__WEBPACK_IMPORTED_MODULE_12__[\"doToast\"])({\n        message: __('Invite sent to %email_address%', {\n          email_address: email\n        })\n      }));\n      dispatch(doFetchInviteStatus());\n      return success;\n    })[\"catch\"](function (error) {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_INVITE_NEW_FAILURE\"],\n        data: {\n          error: error\n        }\n      });\n    });\n  };\n}\nfunction doUserSetReferrerReset() {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_SET_REFERRER_RESET\"]\n    });\n  };\n}\nfunction doUserSetReferrerWithUri(uri) {\n  return function _callee2(dispatch, getState) {\n    var state, claim, referrerCode, response;\n    return regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            state = getState();\n            claim = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectClaimForUri\"])(state, uri);\n\n            if (claim) {\n              _context2.next = 16;\n              break;\n            }\n\n            _context2.prev = 3;\n            _context2.next = 6;\n            return regeneratorRuntime.awrap(lbry__WEBPACK_IMPORTED_MODULE_0__[\"default\"].resolve({\n              urls: [uri]\n            }));\n\n          case 6:\n            response = _context2.sent;\n            if (response && response[uri] && !response[uri].error) claim = response && response[uri];\n\n            if (claim) {\n              if (claim.signing_channel) {\n                referrerCode = claim.signing_channel.permanent_url.replace('lbry://', '');\n              } else {\n                referrerCode = claim.permanent_url.replace('lbry://', '');\n              }\n\n              dispatch(doUserSetReferrer(referrerCode));\n            }\n\n            _context2.next = 14;\n            break;\n\n          case 11:\n            _context2.prev = 11;\n            _context2.t0 = _context2[\"catch\"](3);\n            dispatch({\n              type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_SET_REFERRER_FAIL\"],\n              data: {\n                error: _context2.t0\n              }\n            });\n\n          case 14:\n            _context2.next = 18;\n            break;\n\n          case 16:\n            referrerCode = claim.permanent_url.replace('lbry://', '');\n            dispatch(doUserSetReferrer(referrerCode));\n\n          case 18:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[3, 11]]);\n  };\n}\nvar doUserSetReferrer = function doUserSetReferrer(referrerUri) {\n  return function _callee3(dispatch, getState) {\n    var state, hasSetReferrerPending, hasReferrer, claim, referrerCode, isValid, uri;\n    return regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            state = getState();\n            hasSetReferrerPending = Object(redux_selectors_user__WEBPACK_IMPORTED_MODULE_10__[\"selectSetReferrerPending\"])(state);\n            hasReferrer = Boolean(Object(redux_selectors_user__WEBPACK_IMPORTED_MODULE_10__[\"selectReferrer\"])(state));\n\n            if (!(hasSetReferrerPending || hasReferrer)) {\n              _context3.next = 5;\n              break;\n            }\n\n            return _context3.abrupt(\"return\");\n\n          case 5:\n            dispatch({\n              type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_SET_REFERRER_START\"]\n            });\n            referrerCode = referrerUri;\n            isValid = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_3__[\"isURIValid\"])(referrerUri);\n\n            if (!isValid) {\n              _context3.next = 15;\n              break;\n            }\n\n            uri = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_3__[\"normalizeURI\"])(referrerUri);\n            claim = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectClaimForUri\"])(state, uri);\n\n            if (claim) {\n              _context3.next = 14;\n              break;\n            }\n\n            _context3.next = 14;\n            return regeneratorRuntime.awrap(dispatch(Object(redux_actions_claims__WEBPACK_IMPORTED_MODULE_2__[\"doResolveUri\"])(uri)).then(function () {\n              state = getState();\n              claim = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectClaimForUri\"])(state, uri);\n            })[\"catch\"](function (error) {\n              return dispatch({\n                type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_SET_REFERRER_FAIL\"],\n                data: {\n                  error: error\n                }\n              });\n            }));\n\n          case 14:\n            referrerCode = Object(util_claim__WEBPACK_IMPORTED_MODULE_18__[\"getChannelFromClaim\"])(claim).permanent_url.replace('lbry://', '');\n\n          case 15:\n            _context3.next = 17;\n            return regeneratorRuntime.awrap(lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user', 'referral', {\n              referrer: referrerCode\n            }, 'post').then(function (response) {\n              dispatch({\n                type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_SET_REFERRER_SUCCESS\"],\n                data: referrerCode\n              });\n              var isRewardApproved = Object(redux_selectors_rewards__WEBPACK_IMPORTED_MODULE_11__[\"selectIsRewardApproved\"])(state);\n\n              if (isRewardApproved) {\n                dispatch(Object(redux_actions_rewards__WEBPACK_IMPORTED_MODULE_9__[\"doClaimRewardType\"])(rewards__WEBPACK_IMPORTED_MODULE_13__[\"default\"].TYPE_REFEREE));\n              }\n\n              dispatch(doUserFetch());\n            })[\"catch\"](function (error) {\n              return dispatch({\n                type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_SET_REFERRER_FAIL\"],\n                data: {\n                  error: error\n                }\n              });\n            }));\n\n          case 17:\n            return _context3.abrupt(\"return\", _context3.sent);\n\n          case 18:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    });\n  };\n};\nfunction doUserSetCountry(country) {\n  return function (dispatch, getState) {\n    var state = getState();\n    var user = Object(redux_selectors_user__WEBPACK_IMPORTED_MODULE_10__[\"selectUser\"])(state);\n    lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('user_country', 'set', {\n      country: country\n    }).then(function () {\n      var newUser = _objectSpread({}, user, {\n        country: country\n      });\n\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_FETCH_SUCCESS\"],\n        data: {\n          user: newUser\n        }\n      });\n    });\n  };\n}\nfunction doClaimYoutubeChannels() {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_YOUTUBE_IMPORT_STARTED\"]\n    });\n    var transferResponse;\n    return lbry__WEBPACK_IMPORTED_MODULE_0__[\"default\"].address_list({\n      page: 1,\n      page_size: 99999\n    }).then(function (addressList) {\n      return addressList.items[0];\n    }).then(function (address) {\n      return lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('yt', 'transfer', {\n        address: address.address,\n        public_key: address.pubkey\n      }).then(function (response) {\n        if (response && response.length) {\n          transferResponse = response;\n          return Promise.all(response.map(function (channelMeta) {\n            if (channelMeta && channelMeta.channel && channelMeta.channel.channel_certificate) {\n              return lbry__WEBPACK_IMPORTED_MODULE_0__[\"default\"].channel_import({\n                channel_data: channelMeta.channel.channel_certificate\n              });\n            }\n\n            return null;\n          })).then(function () {\n            var actions = [{\n              type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_YOUTUBE_IMPORT_SUCCESS\"],\n              data: transferResponse\n            }];\n            actions.push(doUserFetch());\n            actions.push(Object(redux_actions_claims__WEBPACK_IMPORTED_MODULE_2__[\"doFetchChannelListMine\"])());\n            dispatch(util_batch_actions__WEBPACK_IMPORTED_MODULE_4__[\"batchActions\"].apply(void 0, actions));\n          });\n        }\n      });\n    })[\"catch\"](function (error) {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_YOUTUBE_IMPORT_FAILURE\"],\n        data: String(error)\n      });\n    });\n  };\n}\nfunction doCheckYoutubeTransfer() {\n  return function (dispatch) {\n    dispatch({\n      type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_YOUTUBE_IMPORT_STARTED\"]\n    });\n    return lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('yt', 'transfer').then(function (response) {\n      if (response && response.length) {\n        dispatch({\n          type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_YOUTUBE_IMPORT_SUCCESS\"],\n          data: response\n        });\n      } else {\n        throw new Error();\n      }\n    })[\"catch\"](function (error) {\n      dispatch({\n        type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_YOUTUBE_IMPORT_FAILURE\"],\n        data: String(error)\n      });\n    });\n  };\n}\n/***\n * Receives a csv of channel claim ids, hits the backend and returns nicely formatted object with relevant info\n * @param claimIdCsv\n * @returns {(function(*): Promise<void>)|*}\n */\n\nfunction doFetchUserMemberships(claimIdCsv) {\n  return function _callee4(dispatch) {\n    var response, updatedResponse, user, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, membership;\n\n    return regeneratorRuntime.async(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            if (!(!claimIdCsv || claimIdCsv.length && claimIdCsv.length < 1)) {\n              _context4.next = 2;\n              break;\n            }\n\n            return _context4.abrupt(\"return\");\n\n          case 2:\n            _context4.next = 4;\n            return regeneratorRuntime.awrap(lbryinc__WEBPACK_IMPORTED_MODULE_14__[\"Lbryio\"].call('membership', 'check', {\n              channel_id: constants_channels__WEBPACK_IMPORTED_MODULE_6__[\"ODYSEE_CHANNEL\"].ID,\n              claim_ids: claimIdCsv,\n              environment: stripeEnvironment\n            }));\n\n          case 4:\n            response = _context4.sent;\n            updatedResponse = {}; // loop through returned users\n\n            _context4.t0 = regeneratorRuntime.keys(response);\n\n          case 7:\n            if ((_context4.t1 = _context4.t0()).done) {\n              _context4.next = 35;\n              break;\n            }\n\n            user = _context4.t1.value;\n\n            if (!(response[user] && response[user].length)) {\n              _context4.next = 31;\n              break;\n            } // get membership for user\n            // note: a for loop is kind of odd, indicates there may be multiple memberships?\n            // probably not needed depending on what we do with the frontend, should revisit\n\n\n            _iteratorNormalCompletion2 = true;\n            _didIteratorError2 = false;\n            _iteratorError2 = undefined;\n            _context4.prev = 13;\n\n            for (_iterator2 = response[user][Symbol.iterator](); !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              membership = _step2.value;\n\n              if (membership.channel_name) {\n                updatedResponse[user] = membership.name;\n                window.checkedMemberships[user] = membership.name;\n              }\n            }\n\n            _context4.next = 21;\n            break;\n\n          case 17:\n            _context4.prev = 17;\n            _context4.t2 = _context4[\"catch\"](13);\n            _didIteratorError2 = true;\n            _iteratorError2 = _context4.t2;\n\n          case 21:\n            _context4.prev = 21;\n            _context4.prev = 22;\n\n            if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n              _iterator2[\"return\"]();\n            }\n\n          case 24:\n            _context4.prev = 24;\n\n            if (!_didIteratorError2) {\n              _context4.next = 27;\n              break;\n            }\n\n            throw _iteratorError2;\n\n          case 27:\n            return _context4.finish(24);\n\n          case 28:\n            return _context4.finish(21);\n\n          case 29:\n            _context4.next = 33;\n            break;\n\n          case 31:\n            // note the user has been fetched but is null\n            updatedResponse[user] = null;\n            window.checkedMemberships[user] = null;\n\n          case 33:\n            _context4.next = 7;\n            break;\n\n          case 35:\n            dispatch({\n              type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"ADD_CLAIMIDS_MEMBERSHIP_DATA\"],\n              data: {\n                response: updatedResponse\n              }\n            });\n\n          case 36:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, [[13, 17, 21, 29], [22,, 24, 28]]);\n  };\n}\nfunction doFetchUserLocale() {\n  var isRetry = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  return function (dispatch) {\n    fetch(config__WEBPACK_IMPORTED_MODULE_15__[\"LOCALE_API\"]).then(function (res) {\n      return res.json();\n    }).then(function (json) {\n      var locale = json.data; // [flow] local: LocaleInfo\n\n      if (locale) {\n        dispatch({\n          type: constants_action_types__WEBPACK_IMPORTED_MODULE_7__[\"USER_FETCH_LOCALE_DONE\"],\n          data: locale\n        });\n      }\n    })[\"catch\"](function () {\n      if (!isRetry) {\n        // If failed, retry one more time after N seconds. This removes the\n        // need to fetch at each component level. If it failed twice, probably\n        // don't need to fetch anymore.\n        setTimeout(function () {\n          dispatch(doFetchUserLocale(true));\n        }, 10000);\n      }\n    });\n  };\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvcmVkdXgvYWN0aW9ucy91c2VyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL3VpL3JlZHV4L2FjdGlvbnMvdXNlci5qcz9hOTlhIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCBhbmFseXRpY3MgZnJvbSAnYW5hbHl0aWNzJztcbmltcG9ydCBMYnJ5IGZyb20gJ2xicnknO1xuaW1wb3J0IHsgc2VsZWN0Q2xhaW1Gb3JVcmkgfSBmcm9tICdyZWR1eC9zZWxlY3RvcnMvY2xhaW1zJztcbmltcG9ydCB7IGRvRmV0Y2hDaGFubmVsTGlzdE1pbmUsIGRvUmVzb2x2ZVVyaSB9IGZyb20gJ3JlZHV4L2FjdGlvbnMvY2xhaW1zJztcbmltcG9ydCB7IGlzVVJJVmFsaWQsIG5vcm1hbGl6ZVVSSSB9IGZyb20gJ3V0aWwvbGJyeVVSSSc7XG5pbXBvcnQgeyBiYXRjaEFjdGlvbnMgfSBmcm9tICd1dGlsL2JhdGNoLWFjdGlvbnMnO1xuaW1wb3J0IHsgZ2V0U3RyaXBlRW52aXJvbm1lbnQgfSBmcm9tICd1dGlsL3N0cmlwZSc7XG5pbXBvcnQgeyBPRFlTRUVfQ0hBTk5FTCB9IGZyb20gJ2NvbnN0YW50cy9jaGFubmVscyc7XG5pbXBvcnQgKiBhcyBBQ1RJT05TIGZyb20gJ2NvbnN0YW50cy9hY3Rpb25fdHlwZXMnO1xuaW1wb3J0IHsgZG9GZXRjaEdlb0Jsb2NrZWRMaXN0IH0gZnJvbSAncmVkdXgvYWN0aW9ucy9ibG9ja2VkJztcbmltcG9ydCB7IGRvQ2xhaW1SZXdhcmRUeXBlLCBkb1Jld2FyZExpc3QgfSBmcm9tICdyZWR1eC9hY3Rpb25zL3Jld2FyZHMnO1xuaW1wb3J0IHtcbiAgc2VsZWN0RW1haWxUb1ZlcmlmeSxcbiAgc2VsZWN0UGhvbmVUb1ZlcmlmeSxcbiAgc2VsZWN0VXNlckNvdW50cnlDb2RlLFxuICBzZWxlY3RVc2VyLFxuICBzZWxlY3RTZXRSZWZlcnJlclBlbmRpbmcsXG4gIHNlbGVjdFJlZmVycmVyLFxufSBmcm9tICdyZWR1eC9zZWxlY3RvcnMvdXNlcic7XG5pbXBvcnQgeyBzZWxlY3RJc1Jld2FyZEFwcHJvdmVkIH0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL3Jld2FyZHMnO1xuaW1wb3J0IHsgZG9Ub2FzdCB9IGZyb20gJ3JlZHV4L2FjdGlvbnMvbm90aWZpY2F0aW9ucyc7XG5pbXBvcnQgcmV3YXJkcyBmcm9tICdyZXdhcmRzJztcbmltcG9ydCB7IExicnlpbyB9IGZyb20gJ2xicnlpbmMnO1xuaW1wb3J0IHsgRE9NQUlOLCBMT0NBTEVfQVBJIH0gZnJvbSAnY29uZmlnJztcbmltcG9ydCB7IGdldERlZmF1bHRMYW5ndWFnZSB9IGZyb20gJ3V0aWwvZGVmYXVsdC1sYW5ndWFnZXMnO1xuaW1wb3J0IHsgTG9jYWxTdG9yYWdlLCBMUyB9IGZyb20gJ3V0aWwvc3RvcmFnZSc7XG5pbXBvcnQgeyBnZXRDaGFubmVsRnJvbUNsYWltIH0gZnJvbSAndXRpbC9jbGFpbSc7XG5cbmV4cG9ydCBsZXQgc2Vzc2lvblN0b3JhZ2VBdmFpbGFibGUgPSBmYWxzZTtcbmNvbnN0IENIRUNLX0lOVEVSVkFMID0gMjAwO1xuY29uc3QgQVVUSF9XQUlUX1RJTUVPVVQgPSAxMDAwMDtcbmNvbnN0IHN0cmlwZUVudmlyb25tZW50ID0gZ2V0U3RyaXBlRW52aXJvbm1lbnQoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGRvRmV0Y2hJbnZpdGVTdGF0dXMoc2hvdWxkQ2FsbFJld2FyZExpc3QgPSB0cnVlKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfSU5WSVRFX1NUQVRVU19GRVRDSF9TVEFSVEVELFxuICAgIH0pO1xuXG4gICAgUHJvbWlzZS5hbGwoW0xicnlpby5jYWxsKCd1c2VyJywgJ2ludml0ZV9zdGF0dXMnKSwgTGJyeWlvLmNhbGwoJ3VzZXJfcmVmZXJyYWxfY29kZScsICdsaXN0JyldKVxuICAgICAgLnRoZW4oKFtzdGF0dXMsIGNvZGVdKSA9PiB7XG4gICAgICAgIGlmIChzaG91bGRDYWxsUmV3YXJkTGlzdCkge1xuICAgICAgICAgIGRpc3BhdGNoKGRvUmV3YXJkTGlzdCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfSU5WSVRFX1NUQVRVU19GRVRDSF9TVUNDRVNTLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGludml0ZXNSZW1haW5pbmc6IHN0YXR1cy5pbnZpdGVzX3JlbWFpbmluZyA/IHN0YXR1cy5pbnZpdGVzX3JlbWFpbmluZyA6IDAsXG4gICAgICAgICAgICBpbnZpdGVlczogc3RhdHVzLmludml0ZWVzLFxuICAgICAgICAgICAgcmVmZXJyYWxMaW5rOiBgJHtMYnJ5aW8uQ09OTkVDVElPTl9TVFJJTkd9dXNlci9yZWZlcj9yPSR7Y29kZX1gLFxuICAgICAgICAgICAgcmVmZXJyYWxDb2RlOiBjb2RlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IEFDVElPTlMuVVNFUl9JTlZJVEVfU1RBVFVTX0ZFVENIX0ZBSUxVUkUsXG4gICAgICAgICAgZGF0YTogeyBlcnJvciB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9JbnN0YWxsTmV3KGFwcFZlcnNpb24sIGNhbGxiYWNrRm9yVXNlcnNXaG9BcmVTaGFyaW5nRGF0YSwgZG9tYWluKSB7XG4gIGNvbnN0IHBheWxvYWQgPSB7IGFwcF92ZXJzaW9uOiBhcHBWZXJzaW9uLCBkb21haW4gfTtcblxuICBwYXlsb2FkLmFwcF9pZCA9IHdpbmRvdy5vZHlzZWUuYnVpbGQuZ29vZ2xlUGxheVxuICAgID8gJ29keXNlZWFuZHJvaWRBV2h0b3FEdUFmUTZLSE1YeEZ4dDh0a2htdDdzZnByRU1IV0tqeTVoZjZQd1pjSERWNTQyVidcbiAgICA6ICdvZHlzZWVhbmRyb2lkQVBLdG9xRHVBZlE2S0hNWHhGeHQ4dGtobXQ3c2ZwckVNSFdLank1aGY2UHdaY0hEVjU0MlYnO1xuICBMYnJ5LnZlcnNpb24oKS50aGVuKCh2ZXJzaW9uKSA9PiB7XG4gICAgcGF5bG9hZC5kYWVtb25fdmVyc2lvbiA9IHZlcnNpb24ubGJyeW5ldF92ZXJzaW9uO1xuICAgIHBheWxvYWQub3BlcmF0aW5nX3N5c3RlbSA9ICdhbmRyb2lkJztcbiAgICBwYXlsb2FkLnBsYXRmb3JtID0gJ2FuZHJvaWQnO1xuICAgIExicnlpby5jYWxsKCdpbnN0YWxsJywgJ25ldycsIHBheWxvYWQpO1xuXG4gICAgaWYgKGNhbGxiYWNrRm9yVXNlcnNXaG9BcmVTaGFyaW5nRGF0YSkge1xuICAgICAgY2FsbGJhY2tGb3JVc2Vyc1dob0FyZVNoYXJpbmdEYXRhKHN0YXR1cyk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gY2hlY2tBdXRoQnVzeSgpIHtcbiAgbGV0IHRpbWUgPSBEYXRlLm5vdygpO1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIChmdW5jdGlvbiB3YWl0Rm9yQXV0aCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3Rlc3QnLCAnYXZhaWxhYmxlJyk7XG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rlc3QnKTtcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2VBdmFpbGFibGUgPSB0cnVlO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgIC8vIG5vIHNlc3Npb24gc3RvcmFnZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIUlTX1dFQiB8fCAhc2Vzc2lvblN0b3JhZ2VBdmFpbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGluUHJvZ3Jlc3MgPSBMb2NhbFN0b3JhZ2UuZ2V0SXRlbShMUy5BVVRIX0lOX1BST0dSRVNTKTtcbiAgICAgIGlmICghaW5Qcm9ncmVzcykge1xuICAgICAgICBMb2NhbFN0b3JhZ2Uuc2V0SXRlbShMUy5BVVRIX0lOX1BST0dSRVNTLCAndHJ1ZScpO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKERhdGUubm93KCkgLSB0aW1lIDwgQVVUSF9XQUlUX1RJTUVPVVQpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KHdhaXRGb3JBdXRoLCBDSEVDS19JTlRFUlZBTCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pKCk7XG4gIH0pO1xufVxuXG4vKioqXG4gKiBHaXZlbiBhIHVzZXIsIHJldHVybiB0aGVpciBoaWdoZXN0IHJhbmtpbmcgT2R5c2VlIG1lbWJlcnNoaXAgKFByZW1pdW0gb3IgUHJlbWl1bSBQbHVzKVxuICogQHBhcmFtIGRpc3BhdGNoXG4gKiBAcGFyYW0gdXNlclxuICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb0NoZWNrVXNlck9keXNlZU1lbWJlcnNoaXBzKHVzZXIpIHtcbiAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCkgPT4ge1xuICAgIGxldCBoaWdoZXN0TWVtYmVyc2hpcFJhbmtpbmc7XG5cbiAgICBpZiAodXNlci5vZHlzZWVfbWVtYmVyKSB7XG4gICAgICAvLyBnZXQgbWVtYmVyc2hpcHMgZm9yIGEgZ2l2ZW4gdXNlclxuICAgICAgLy8gVE9ETzogaW4gdGhlIGZ1dHVyZSwgY2FuIHdlIHNwZWNpZnkgdGhpcyBqdXN0IHRvIEBvZHlzZWU/XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgTGJyeWlvLmNhbGwoXG4gICAgICAgICdtZW1iZXJzaGlwJyxcbiAgICAgICAgJ21pbmUnLFxuICAgICAgICB7XG4gICAgICAgICAgZW52aXJvbm1lbnQ6IHN0cmlwZUVudmlyb25tZW50LFxuICAgICAgICB9LFxuICAgICAgICAncG9zdCdcbiAgICAgICk7XG5cbiAgICAgIGxldCBzYXZlZE1lbWJlcnNoaXBzID0gW107XG5cbiAgICAgIC8vIFRPRE86IHRoaXMgd2lsbCB3b3JrIGZvciBub3csIGJ1dCBpdCBzaG91bGQgYmUgYWRqdXN0ZWRcbiAgICAgIC8vIFRPRE86IHRvIGNoZWNrIGlmIGl0J3MgYWN0aXZlLCBvciBpZiBpdCdzIGNhbmNlbGxlZCBpZiBpdCdzIHN0aWxsIHZhbGlkIHBhc3QgY3VycmVudCBkYXRlXG4gICAgICAvLyBsb29wIHRocm91Z2ggYWxsIG1lbWJlcnNoaXBzIGFuZCBzYXZlIHRoZSBAb2R5c2VlIG9uZXNcbiAgICAgIC8vIG1heWJlIGluIHRoZSBmdXR1cmUgd2UgY2FuIG9ubHkgaGl0IEBvZHlzZWUgaW4gdGhlIEFQSSBjYWxsXG4gICAgICBmb3IgKGNvbnN0IG1lbWJlcnNoaXAgb2YgcmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKG1lbWJlcnNoaXAuTWVtYmVyc2hpcERldGFpbHMgJiYgbWVtYmVyc2hpcC5NZW1iZXJzaGlwRGV0YWlscy5jaGFubmVsX25hbWUgPT09ICdAb2R5c2VlJykge1xuICAgICAgICAgIHNhdmVkTWVtYmVyc2hpcHMucHVzaChtZW1iZXJzaGlwLk1lbWJlcnNoaXBEZXRhaWxzLm5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGRldGVybWluZSBoaWdoZXN0IHJhbmtpbmcgbWVtYmVyc2hpcCBiYXNlZCBvbiByZXR1cm5lZCBkYXRhXG4gICAgICAvLyBub3RlOiB0aGlzIGlzIGZyb20gYW4gb2RkIHN0YXRlIGluIHRoZSBBUEkgd2hlcmUgYSB1c2VyIGNhbiBiZSBib3RoIHByZW1pdW0vUHJlbWl1bSArIGF0IHRoZSBzYW1lIHRpbWVcbiAgICAgIC8vIEkgZXhwZWN0IHRoaXMgY2FuIGNoYW5nZSBvbmNlIHVwZ3JhZGUvZG93bmdyYWRlIGlzIGltcGxlbWVudGVkXG4gICAgICBpZiAoc2F2ZWRNZW1iZXJzaGlwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIGlmIHByZW1pdW0gcGx1cyBpcyBhIG1lbWJlcnNoaXAsIHJldHVybiB0aGF0LCBvdGhlcndpc2UgaXQncyBvbmx5IHByZW1pdW1cbiAgICAgICAgY29uc3QgcHJlbWl1bVBsdXNFeGlzdHMgPSBzYXZlZE1lbWJlcnNoaXBzLmluY2x1ZGVzKCdQcmVtaXVtKycpO1xuICAgICAgICBpZiAocHJlbWl1bVBsdXNFeGlzdHMpIHtcbiAgICAgICAgICBoaWdoZXN0TWVtYmVyc2hpcFJhbmtpbmcgPSAnUHJlbWl1bSsnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGhpZ2hlc3RNZW1iZXJzaGlwUmFua2luZyA9ICdQcmVtaXVtJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IEFDVElPTlMuQUREX09EWVNFRV9NRU1CRVJTSElQX0RBVEEsXG4gICAgICBkYXRhOiB7IHVzZXIsIG9keXNlZU1lbWJlcnNoaXBOYW1lOiBoaWdoZXN0TWVtYmVyc2hpcFJhbmtpbmcgfHwgJycgfSwgLy8gJycgPSBub25lOyBgdW5kZWZpbmVkYCA9IG5vdCBmZXRjaGVkXG4gICAgfSk7XG4gIH07XG59XG5cbi8vIFRPRE86IENhbGwgZG9JbnN0YWxsTmV3IHNlcGFyYXRlbHkgc28gd2UgZG9uJ3QgaGF2ZSB0byBwYXNzIGFwcFZlcnNpb24gYW5kIG9zX3N5c3RlbSBwYXJhbXM/XG5leHBvcnQgZnVuY3Rpb24gZG9BdXRoZW50aWNhdGUoXG4gIGFwcFZlcnNpb24sXG4gIHNoYXJlVXNhZ2VEYXRhID0gdHJ1ZSxcbiAgY2FsbGJhY2tGb3JVc2Vyc1dob0FyZVNoYXJpbmdEYXRhLFxuICBjYWxsSW5zdGFsbCA9IHRydWVcbikge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogQUNUSU9OUy5BVVRIRU5USUNBVElPTl9TVEFSVEVELFxuICAgIH0pO1xuICAgIGNoZWNrQXV0aEJ1c3koKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICByZXR1cm4gTGJyeWlvLmF1dGhlbnRpY2F0ZShET01BSU4sIGdldERlZmF1bHRMYW5ndWFnZSgpKTtcbiAgICAgIH0pXG4gICAgICAudGhlbigodXNlcikgPT4ge1xuICAgICAgICBMb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShMUy5BVVRIX0lOX1BST0dSRVNTKTtcbiAgICAgICAgTGJyeWlvLmdldEF1dGhUb2tlbigpLnRoZW4oKHRva2VuKSA9PiB7XG4gICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogQUNUSU9OUy5BVVRIRU5USUNBVElPTl9TVUNDRVNTLFxuICAgICAgICAgICAgZGF0YTogeyB1c2VyLCBhY2Nlc3NUb2tlbjogdG9rZW4gfSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGRpc3BhdGNoKGRvQ2hlY2tVc2VyT2R5c2VlTWVtYmVyc2hpcHModXNlcikpO1xuXG4gICAgICAgICAgaWYgKHNoYXJlVXNhZ2VEYXRhKSB7XG4gICAgICAgICAgICBkaXNwYXRjaChkb1Jld2FyZExpc3QoKSk7XG5cbiAgICAgICAgICAgIGlmIChjYWxsSW5zdGFsbCAmJiAhdXNlcj8uZGV2aWNlX3R5cGVzPy5pbmNsdWRlcygnd2ViJykpIHtcbiAgICAgICAgICAgICAgZG9JbnN0YWxsTmV3KGFwcFZlcnNpb24sIGNhbGxiYWNrRm9yVXNlcnNXaG9BcmVTaGFyaW5nRGF0YSwgRE9NQUlOKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkaXNwYXRjaChkb0ZldGNoR2VvQmxvY2tlZExpc3QoKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgTG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oTFMuQVVUSF9JTl9QUk9HUkVTUyk7XG5cbiAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IEFDVElPTlMuQVVUSEVOVElDQVRJT05fRkFJTFVSRSxcbiAgICAgICAgICBkYXRhOiB7IGVycm9yIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb1VzZXJGZXRjaCgpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCkgPT5cbiAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBkaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IEFDVElPTlMuVVNFUl9GRVRDSF9TVEFSVEVELFxuICAgICAgfSk7XG5cbiAgICAgIExicnlpby5nZXRDdXJyZW50VXNlcigpXG4gICAgICAgIC50aGVuKCh1c2VyKSA9PiB7XG4gICAgICAgICAgZGlzcGF0Y2goZG9DaGVja1VzZXJPZHlzZWVNZW1iZXJzaGlwcyh1c2VyKSk7XG4gICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX0ZFVENIX1NVQ0NFU1MsXG4gICAgICAgICAgICBkYXRhOiB7IHVzZXIgfSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXNvbHZlKHVzZXIpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfRkVUQ0hfRkFJTFVSRSxcbiAgICAgICAgICAgIGRhdGE6IHsgZXJyb3IgfSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb1VzZXJDaGVja0VtYWlsVmVyaWZpZWQoKSB7XG4gIC8vIFRoaXMgd2lsbCBoYXBwZW4gaW4gdGhlIGJhY2tncm91bmQgc28gd2UgZG9uJ3QgbmVlZCBsb2FkaW5nIGJvb2xlYW5zXG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBMYnJ5aW8uZ2V0Q3VycmVudFVzZXIoKS50aGVuKCh1c2VyKSA9PiB7XG4gICAgICBkaXNwYXRjaChkb0NoZWNrVXNlck9keXNlZU1lbWJlcnNoaXBzKHVzZXIpKTtcblxuICAgICAgaWYgKHVzZXIuaGFzX3ZlcmlmaWVkX2VtYWlsKSB7XG4gICAgICAgIGRpc3BhdGNoKGRvUmV3YXJkTGlzdCgpKTtcbiAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IEFDVElPTlMuVVNFUl9GRVRDSF9TVUNDRVNTLFxuICAgICAgICAgIGRhdGE6IHsgdXNlciB9LFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvVXNlclBob25lUmVzZXQoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogQUNUSU9OUy5VU0VSX1BIT05FX1JFU0VULFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9Vc2VyUGhvbmVOZXcocGhvbmUsIGNvdW50cnlDb2RlKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfUEhPTkVfTkVXX1NUQVJURUQsXG4gICAgICBkYXRhOiB7IHBob25lLCBjb3VudHJ5X2NvZGU6IGNvdW50cnlDb2RlIH0sXG4gICAgfSk7XG5cbiAgICBjb25zdCBzdWNjZXNzID0gKCkgPT4ge1xuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfUEhPTkVfTkVXX1NVQ0NFU1MsXG4gICAgICAgIGRhdGE6IHsgcGhvbmUgfSxcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBmYWlsdXJlID0gKGVycm9yKSA9PiB7XG4gICAgICBkaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IEFDVElPTlMuVVNFUl9QSE9ORV9ORVdfRkFJTFVSRSxcbiAgICAgICAgZGF0YTogeyBlcnJvciB9LFxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIExicnlpby5jYWxsKCd1c2VyJywgJ3Bob25lX251bWJlcl9uZXcnLCB7IHBob25lX251bWJlcjogcGhvbmUsIGNvdW50cnlfY29kZTogY291bnRyeUNvZGUgfSwgJ3Bvc3QnKS50aGVuKFxuICAgICAgc3VjY2VzcyxcbiAgICAgIGZhaWx1cmVcbiAgICApO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9Vc2VyUGhvbmVWZXJpZnlGYWlsdXJlKGVycm9yKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogQUNUSU9OUy5VU0VSX1BIT05FX1ZFUklGWV9GQUlMVVJFLFxuICAgIGRhdGE6IHsgZXJyb3IgfSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvVXNlclBob25lVmVyaWZ5KHZlcmlmaWNhdGlvbkNvZGUpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBjb25zdCBwaG9uZU51bWJlciA9IHNlbGVjdFBob25lVG9WZXJpZnkoZ2V0U3RhdGUoKSk7XG4gICAgY29uc3QgY291bnRyeUNvZGUgPSBzZWxlY3RVc2VyQ291bnRyeUNvZGUoZ2V0U3RhdGUoKSk7XG5cbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfUEhPTkVfVkVSSUZZX1NUQVJURUQsXG4gICAgICBjb2RlOiB2ZXJpZmljYXRpb25Db2RlLFxuICAgIH0pO1xuXG4gICAgTGJyeWlvLmNhbGwoXG4gICAgICAndXNlcicsXG4gICAgICAncGhvbmVfbnVtYmVyX2NvbmZpcm0nLFxuICAgICAge1xuICAgICAgICB2ZXJpZmljYXRpb25fY29kZTogdmVyaWZpY2F0aW9uQ29kZSxcbiAgICAgICAgcGhvbmVfbnVtYmVyOiBwaG9uZU51bWJlcixcbiAgICAgICAgY291bnRyeV9jb2RlOiBjb3VudHJ5Q29kZSxcbiAgICAgIH0sXG4gICAgICAncG9zdCdcbiAgICApXG4gICAgICAudGhlbigodXNlcikgPT4ge1xuICAgICAgICBpZiAodXNlci5pc19pZGVudGl0eV92ZXJpZmllZCkge1xuICAgICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6IEFDVElPTlMuVVNFUl9QSE9ORV9WRVJJRllfU1VDQ0VTUyxcbiAgICAgICAgICAgIGRhdGE6IHsgdXNlciB9LFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRpc3BhdGNoKGRvQ2xhaW1SZXdhcmRUeXBlKHJld2FyZHMuVFlQRV9ORVdfVVNFUikpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4gZGlzcGF0Y2goZG9Vc2VyUGhvbmVWZXJpZnlGYWlsdXJlKGVycm9yKSkpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9Vc2VyRW1haWxUb1ZlcmlmeShlbWFpbCkge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX0VNQUlMX1ZFUklGWV9TRVQsXG4gICAgICBkYXRhOiB7IGVtYWlsIH0sXG4gICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb1VzZXJFbWFpbE5ldyhlbWFpbCkge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX0VNQUlMX05FV19TVEFSVEVELFxuICAgICAgZW1haWwsXG4gICAgfSk7XG5cbiAgICBjb25zdCBzdWNjZXNzID0gKCkgPT4ge1xuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfRU1BSUxfTkVXX1NVQ0NFU1MsXG4gICAgICAgIGRhdGE6IHsgZW1haWwgfSxcbiAgICAgIH0pO1xuICAgICAgZGlzcGF0Y2goZG9Vc2VyRmV0Y2goKSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGZhaWx1cmUgPSAoZXJyb3IpID0+IHtcbiAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX0VNQUlMX05FV19GQUlMVVJFLFxuICAgICAgICBkYXRhOiB7IGVycm9yIH0sXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgTGJyeWlvLmNhbGwoJ3VzZXJfZW1haWwnLCAnbmV3JywgeyBlbWFpbCwgc2VuZF92ZXJpZmljYXRpb25fZW1haWw6IHRydWUgfSwgJ3Bvc3QnKVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHtcbiAgICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfRU1BSUxfTkVXX0VYSVNUUyxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBMYnJ5aW8uY2FsbCgndXNlcl9lbWFpbCcsICdyZXNlbmRfdG9rZW4nLCB7IGVtYWlsLCBvbmx5X2lmX2V4cGlyZWQ6IHRydWUgfSwgJ3Bvc3QnKS50aGVuKFxuICAgICAgICAgICAgc3VjY2VzcyxcbiAgICAgICAgICAgIGZhaWx1cmVcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfSlcbiAgICAgIC50aGVuKHN1Y2Nlc3MsIGZhaWx1cmUpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9Vc2VyQ2hlY2tJZkVtYWlsRXhpc3RzKGVtYWlsKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfRU1BSUxfTkVXX1NUQVJURUQsXG4gICAgICBlbWFpbCxcbiAgICB9KTtcblxuICAgIGNvbnN0IHRyaWdnZXJFbWFpbEZsb3cgPSAoaGFzUGFzc3dvcmQpID0+IHtcbiAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX0VNQUlMX05FV19TVUNDRVNTLFxuICAgICAgICBkYXRhOiB7IGVtYWlsIH0sXG4gICAgICB9KTtcblxuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfRU1BSUxfTkVXX0VYSVNUUyxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoaGFzUGFzc3dvcmQpIHtcbiAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IEFDVElPTlMuVVNFUl9QQVNTV09SRF9FWElTVFMsXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgdGhleSBkb24ndCBoYXZlIGEgcGFzc3dvcmQsIHRoZXkgd2lsbCBuZWVkIHRvIHVzZSB0aGUgZW1haWwgdmVyaWZpY2F0aW9uIGFwaVxuICAgICAgICBMYnJ5aW8uY2FsbCgndXNlcl9lbWFpbCcsICdyZXNlbmRfdG9rZW4nLCB7IGVtYWlsLCBvbmx5X2lmX2V4cGlyZWQ6IHRydWUgfSwgJ3Bvc3QnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3Qgc3VjY2VzcyA9IChyZXNwb25zZSkgPT4ge1xuICAgICAgdHJpZ2dlckVtYWlsRmxvdyhyZXNwb25zZS5oYXNfcGFzc3dvcmQpO1xuICAgIH07XG5cbiAgICBjb25zdCBmYWlsdXJlID0gKGVycm9yKSA9PlxuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfRU1BSUxfTkVXX0ZBSUxVUkUsXG4gICAgICAgIGRhdGE6IHsgZXJyb3IgfSxcbiAgICAgIH0pO1xuXG4gICAgTGJyeWlvLmNhbGwoJ3VzZXInLCAnZXhpc3RzJywgeyBlbWFpbCB9LCAncG9zdCcpXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIC8vIG5vIGVtYWlsXG4gICAgICAgIGlmIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6IEFDVElPTlMuVVNFUl9FTUFJTF9ORVdfRE9FU19OT1RfRVhJU1QsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy8gc2lnbiBpbiBieSBlbWFpbFxuICAgICAgICB9IGVsc2UgaWYgKGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDEyKSB7XG4gICAgICAgICAgdHJpZ2dlckVtYWlsRmxvdyhmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH0pXG4gICAgICAvLyBzaWduIHRoZSB1c2VyIGluXG4gICAgICAudGhlbihzdWNjZXNzLCBmYWlsdXJlKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvVXNlclNpZ25JbihlbWFpbCwgcGFzc3dvcmQpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCkgPT4ge1xuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IEFDVElPTlMuVVNFUl9FTUFJTF9ORVdfU1RBUlRFRCxcbiAgICAgIGVtYWlsLFxuICAgIH0pO1xuXG4gICAgY29uc3Qgc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX0VNQUlMX05FV19TVUNDRVNTLFxuICAgICAgICBkYXRhOiB7IGVtYWlsIH0sXG4gICAgICB9KTtcbiAgICAgIGRpc3BhdGNoKGRvVXNlckZldGNoKCkpO1xuICAgIH07XG5cbiAgICBjb25zdCBmYWlsdXJlID0gKGVycm9yKSA9PlxuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfRU1BSUxfTkVXX0ZBSUxVUkUsXG4gICAgICAgIGRhdGE6IHsgZXJyb3IgfSxcbiAgICAgIH0pO1xuXG4gICAgTGJyeWlvLmNhbGwoJ3VzZXInLCAnc2lnbmluJywgeyBlbWFpbCwgLi4uKHBhc3N3b3JkID8geyBwYXNzd29yZCB9IDoge30pIH0sICdwb3N0JylcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSB7XG4gICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX0VNQUlMX05FV19FWElTVFMsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gTGJyeWlvLmNhbGwoJ3VzZXJfZW1haWwnLCAncmVzZW5kX3Rva2VuJywgeyBlbWFpbCwgb25seV9pZl9leHBpcmVkOiB0cnVlIH0sICdwb3N0JykudGhlbihcbiAgICAgICAgICAgIHN1Y2Nlc3MsXG4gICAgICAgICAgICBmYWlsdXJlXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH0pXG4gICAgICAudGhlbihzdWNjZXNzLCBmYWlsdXJlKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvVXNlclNpZ25VcChlbWFpbCwgcGFzc3dvcmQpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCkgPT5cbiAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBkaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IEFDVElPTlMuVVNFUl9FTUFJTF9ORVdfU1RBUlRFRCxcbiAgICAgICAgZW1haWwsXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IEFDVElPTlMuVVNFUl9FTUFJTF9ORVdfU1VDQ0VTUyxcbiAgICAgICAgICBkYXRhOiB7IGVtYWlsIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBkaXNwYXRjaChkb1VzZXJGZXRjaCgpKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfTtcblxuICAgICAgY29uc3QgZmFpbHVyZSA9IChlcnJvcikgPT4ge1xuICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHtcbiAgICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfRU1BSUxfTkVXX0VYSVNUUyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX0VNQUlMX05FV19GQUlMVVJFLFxuICAgICAgICAgIGRhdGE6IHsgZXJyb3IgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH07XG5cbiAgICAgIExicnlpby5jYWxsKCd1c2VyJywgJ3NpZ251cCcsIHsgZW1haWwsIC4uLihwYXNzd29yZCA/IHsgcGFzc3dvcmQgfSA6IHt9KSB9LCAncG9zdCcpLnRoZW4oc3VjY2VzcywgZmFpbHVyZSk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb1VzZXJQYXNzd29yZFJlc2V0KGVtYWlsKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfUEFTU1dPUkRfUkVTRVRfU1RBUlRFRCxcbiAgICAgIGVtYWlsLFxuICAgIH0pO1xuXG4gICAgY29uc3Qgc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX1BBU1NXT1JEX1JFU0VUX1NVQ0NFU1MsXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgZmFpbHVyZSA9IChlcnJvcikgPT5cbiAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX1BBU1NXT1JEX1JFU0VUX0ZBSUxVUkUsXG4gICAgICAgIGRhdGE6IHsgZXJyb3IgfSxcbiAgICAgIH0pO1xuXG4gICAgTGJyeWlvLmNhbGwoJ3VzZXJfcGFzc3dvcmQnLCAncmVzZXQnLCB7IGVtYWlsIH0sICdwb3N0JykudGhlbihzdWNjZXNzLCBmYWlsdXJlKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvVXNlclBhc3N3b3JkU2V0KG5ld1Bhc3N3b3JkLCBvbGRQYXNzd29yZCwgYXV0aFRva2VuKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfUEFTU1dPUkRfU0VUX1NUQVJURUQsXG4gICAgfSk7XG5cbiAgICBjb25zdCBzdWNjZXNzID0gKCkgPT4ge1xuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfUEFTU1dPUkRfU0VUX1NVQ0NFU1MsXG4gICAgICB9KTtcbiAgICAgIGRpc3BhdGNoKGRvVXNlckZldGNoKCkpO1xuICAgIH07XG5cbiAgICBjb25zdCBmYWlsdXJlID0gKGVycm9yKSA9PlxuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfUEFTU1dPUkRfU0VUX0ZBSUxVUkUsXG4gICAgICAgIGRhdGE6IHsgZXJyb3IgfSxcbiAgICAgIH0pO1xuXG4gICAgTGJyeWlvLmNhbGwoXG4gICAgICAndXNlcl9wYXNzd29yZCcsXG4gICAgICAnc2V0JyxcbiAgICAgIHtcbiAgICAgICAgbmV3X3Bhc3N3b3JkOiBuZXdQYXNzd29yZCxcbiAgICAgICAgLi4uKG9sZFBhc3N3b3JkID8geyBvbGRfcGFzc3dvcmQ6IG9sZFBhc3N3b3JkIH0gOiB7fSksXG4gICAgICAgIC4uLihhdXRoVG9rZW4gPyB7IGF1dGhfdG9rZW46IGF1dGhUb2tlbiB9IDoge30pLFxuICAgICAgfSxcbiAgICAgICdwb3N0J1xuICAgICkudGhlbihzdWNjZXNzLCBmYWlsdXJlKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvVXNlclJlc2VuZFZlcmlmaWNhdGlvbkVtYWlsKGVtYWlsKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfRU1BSUxfVkVSSUZZX1JFVFJZX1NUQVJURUQsXG4gICAgfSk7XG5cbiAgICBjb25zdCBzdWNjZXNzID0gKCkgPT4ge1xuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfRU1BSUxfVkVSSUZZX1JFVFJZX1NVQ0NFU1MsXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgZmFpbHVyZSA9IChlcnJvcikgPT4ge1xuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfRU1BSUxfVkVSSUZZX1JFVFJZX0ZBSUxVUkUsXG4gICAgICAgIGRhdGE6IHsgZXJyb3IgfSxcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBMYnJ5aW8uY2FsbCgndXNlcl9lbWFpbCcsICdyZXNlbmRfdG9rZW4nLCB7IGVtYWlsLCBvbmx5X2lmX2V4cGlyZWQ6IHRydWUgfSwgJ3Bvc3QnKVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHtcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC50aGVuKHN1Y2Nlc3MsIGZhaWx1cmUpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9DbGVhckVtYWlsRW50cnkoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogQUNUSU9OUy5VU0VSX0VNQUlMX05FV19DTEVBUl9FTlRSWSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvQ2xlYXJQYXNzd29yZEVudHJ5KCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IEFDVElPTlMuVVNFUl9QQVNTV09SRF9TRVRfQ0xFQVIsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb1VzZXJFbWFpbFZlcmlmeUZhaWx1cmUoZXJyb3IpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBBQ1RJT05TLlVTRVJfRU1BSUxfVkVSSUZZX0ZBSUxVUkUsXG4gICAgZGF0YTogeyBlcnJvciB9LFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9Vc2VyRW1haWxWZXJpZnkodmVyaWZpY2F0aW9uVG9rZW4sIHJlY2FwdGNoYSkge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGVtYWlsID0gc2VsZWN0RW1haWxUb1ZlcmlmeShnZXRTdGF0ZSgpKTtcblxuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IEFDVElPTlMuVVNFUl9FTUFJTF9WRVJJRllfU1RBUlRFRCxcbiAgICAgIGNvZGU6IHZlcmlmaWNhdGlvblRva2VuLFxuICAgICAgcmVjYXB0Y2hhLFxuICAgIH0pO1xuXG4gICAgTGJyeWlvLmNhbGwoXG4gICAgICAndXNlcl9lbWFpbCcsXG4gICAgICAnY29uZmlybScsXG4gICAgICB7XG4gICAgICAgIHZlcmlmaWNhdGlvbl90b2tlbjogdmVyaWZpY2F0aW9uVG9rZW4sXG4gICAgICAgIGVtYWlsLFxuICAgICAgICByZWNhcHRjaGEsXG4gICAgICB9LFxuICAgICAgJ3Bvc3QnXG4gICAgKVxuICAgICAgLnRoZW4oKHVzZXJFbWFpbCkgPT4ge1xuICAgICAgICBpZiAodXNlckVtYWlsLmlzX3ZlcmlmaWVkKSB7XG4gICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX0VNQUlMX1ZFUklGWV9TVUNDRVNTLFxuICAgICAgICAgICAgZGF0YTogeyBlbWFpbCB9LFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRpc3BhdGNoKGRvVXNlckZldGNoKCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91ciBlbWFpbCBpcyBzdGlsbCBub3QgdmVyaWZpZWQuJyk7IC8vIHNob3VsZG4ndCBoYXBwZW5cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGRpc3BhdGNoKGRvVXNlckVtYWlsVmVyaWZ5RmFpbHVyZShlcnJvcikpKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvVXNlcklkZW50aXR5VmVyaWZ5KHN0cmlwZVRva2VuKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfSURFTlRJVFlfVkVSSUZZX1NUQVJURUQsXG4gICAgICB0b2tlbjogc3RyaXBlVG9rZW4sXG4gICAgfSk7XG5cbiAgICBMYnJ5aW8uY2FsbCgndXNlcicsICd2ZXJpZnlfaWRlbnRpdHknLCB7IHN0cmlwZV90b2tlbjogc3RyaXBlVG9rZW4gfSwgJ3Bvc3QnKVxuICAgICAgLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgICAgaWYgKHVzZXIuaXNfaWRlbnRpdHlfdmVyaWZpZWQpIHtcbiAgICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfSURFTlRJVFlfVkVSSUZZX1NVQ0NFU1MsXG4gICAgICAgICAgICBkYXRhOiB7IHVzZXIgfSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBkaXNwYXRjaChkb0NsYWltUmV3YXJkVHlwZShyZXdhcmRzLlRZUEVfTkVXX1VTRVIpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdXIgaWRlbnRpdHkgaXMgc3RpbGwgbm90IHZlcmlmaWVkLiBUaGlzIHNob3VsZCBub3QgaGFwcGVuLicpOyAvLyBzaG91bGRuJ3QgaGFwcGVuXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfSURFTlRJVFlfVkVSSUZZX0ZBSUxVUkUsXG4gICAgICAgICAgZGF0YTogeyBlcnJvcjogZXJyb3IudG9TdHJpbmcoKSB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9Vc2VySW52aXRlTmV3KGVtYWlsKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfSU5WSVRFX05FV19TVEFSVEVELFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIExicnlpby5jYWxsKCd1c2VyJywgJ2ludml0ZScsIHsgZW1haWwgfSwgJ3Bvc3QnKVxuICAgICAgLnRoZW4oKHN1Y2Nlc3MpID0+IHtcbiAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IEFDVElPTlMuVVNFUl9JTlZJVEVfTkVXX1NVQ0NFU1MsXG4gICAgICAgICAgZGF0YTogeyBlbWFpbCB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBkaXNwYXRjaChcbiAgICAgICAgICBkb1RvYXN0KHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IF9fKCdJbnZpdGUgc2VudCB0byAlZW1haWxfYWRkcmVzcyUnLCB7IGVtYWlsX2FkZHJlc3M6IGVtYWlsIH0pLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgZGlzcGF0Y2goZG9GZXRjaEludml0ZVN0YXR1cygpKTtcbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX0lOVklURV9ORVdfRkFJTFVSRSxcbiAgICAgICAgICBkYXRhOiB7IGVycm9yIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb1VzZXJTZXRSZWZlcnJlclJlc2V0KCkge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX1NFVF9SRUZFUlJFUl9SRVNFVCxcbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvVXNlclNldFJlZmVycmVyV2l0aFVyaSh1cmkpIHtcbiAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgbGV0IGNsYWltID0gc2VsZWN0Q2xhaW1Gb3JVcmkoc3RhdGUsIHVyaSk7XG5cbiAgICBsZXQgcmVmZXJyZXJDb2RlO1xuICAgIGlmICghY2xhaW0pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgTGJyeS5yZXNvbHZlKHsgdXJsczogW3VyaV0gfSk7XG4gICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZVt1cmldICYmICFyZXNwb25zZVt1cmldLmVycm9yKSBjbGFpbSA9IHJlc3BvbnNlICYmIHJlc3BvbnNlW3VyaV07XG4gICAgICAgIGlmIChjbGFpbSkge1xuICAgICAgICAgIGlmIChjbGFpbS5zaWduaW5nX2NoYW5uZWwpIHtcbiAgICAgICAgICAgIHJlZmVycmVyQ29kZSA9IGNsYWltLnNpZ25pbmdfY2hhbm5lbC5wZXJtYW5lbnRfdXJsLnJlcGxhY2UoJ2xicnk6Ly8nLCAnJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlZmVycmVyQ29kZSA9IGNsYWltLnBlcm1hbmVudF91cmwucmVwbGFjZSgnbGJyeTovLycsICcnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGlzcGF0Y2goZG9Vc2VyU2V0UmVmZXJyZXIocmVmZXJyZXJDb2RlKSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfU0VUX1JFRkVSUkVSX0ZBSUwsXG4gICAgICAgICAgZGF0YTogeyBlcnJvciB9LFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVmZXJyZXJDb2RlID0gY2xhaW0ucGVybWFuZW50X3VybC5yZXBsYWNlKCdsYnJ5Oi8vJywgJycpO1xuICAgICAgZGlzcGF0Y2goZG9Vc2VyU2V0UmVmZXJyZXIocmVmZXJyZXJDb2RlKSk7XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgY29uc3QgZG9Vc2VyU2V0UmVmZXJyZXIgPSAocmVmZXJyZXJVcmkpID0+IGFzeW5jIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgbGV0IHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgY29uc3QgaGFzU2V0UmVmZXJyZXJQZW5kaW5nID0gc2VsZWN0U2V0UmVmZXJyZXJQZW5kaW5nKHN0YXRlKTtcbiAgY29uc3QgaGFzUmVmZXJyZXIgPSBCb29sZWFuKHNlbGVjdFJlZmVycmVyKHN0YXRlKSk7XG5cbiAgaWYgKGhhc1NldFJlZmVycmVyUGVuZGluZyB8fCBoYXNSZWZlcnJlcikgcmV0dXJuO1xuXG4gIGRpc3BhdGNoKHsgdHlwZTogQUNUSU9OUy5VU0VSX1NFVF9SRUZFUlJFUl9TVEFSVCB9KTtcblxuICBsZXQgY2xhaW07XG4gIGxldCByZWZlcnJlckNvZGUgPSByZWZlcnJlclVyaTtcblxuICBjb25zdCBpc1ZhbGlkID0gaXNVUklWYWxpZChyZWZlcnJlclVyaSk7XG5cbiAgaWYgKGlzVmFsaWQpIHtcbiAgICBjb25zdCB1cmkgPSBub3JtYWxpemVVUkkocmVmZXJyZXJVcmkpO1xuICAgIGNsYWltID0gc2VsZWN0Q2xhaW1Gb3JVcmkoc3RhdGUsIHVyaSk7XG5cbiAgICBpZiAoIWNsYWltKSB7XG4gICAgICBhd2FpdCBkaXNwYXRjaChkb1Jlc29sdmVVcmkodXJpKSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICAgICAgICBjbGFpbSA9IHNlbGVjdENsYWltRm9yVXJpKHN0YXRlLCB1cmkpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiBkaXNwYXRjaCh7IHR5cGU6IEFDVElPTlMuVVNFUl9TRVRfUkVGRVJSRVJfRkFJTCwgZGF0YTogeyBlcnJvciB9IH0pKTtcbiAgICB9XG5cbiAgICByZWZlcnJlckNvZGUgPSBnZXRDaGFubmVsRnJvbUNsYWltKGNsYWltKS5wZXJtYW5lbnRfdXJsLnJlcGxhY2UoJ2xicnk6Ly8nLCAnJyk7XG4gIH1cblxuICByZXR1cm4gYXdhaXQgTGJyeWlvLmNhbGwoJ3VzZXInLCAncmVmZXJyYWwnLCB7IHJlZmVycmVyOiByZWZlcnJlckNvZGUgfSwgJ3Bvc3QnKVxuICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgZGlzcGF0Y2goeyB0eXBlOiBBQ1RJT05TLlVTRVJfU0VUX1JFRkVSUkVSX1NVQ0NFU1MsIGRhdGE6IHJlZmVycmVyQ29kZSB9KTtcblxuICAgICAgY29uc3QgaXNSZXdhcmRBcHByb3ZlZCA9IHNlbGVjdElzUmV3YXJkQXBwcm92ZWQoc3RhdGUpO1xuXG4gICAgICBpZiAoaXNSZXdhcmRBcHByb3ZlZCkge1xuICAgICAgICBkaXNwYXRjaChkb0NsYWltUmV3YXJkVHlwZShyZXdhcmRzLlRZUEVfUkVGRVJFRSkpO1xuICAgICAgfVxuXG4gICAgICBkaXNwYXRjaChkb1VzZXJGZXRjaCgpKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGRpc3BhdGNoKHsgdHlwZTogQUNUSU9OUy5VU0VSX1NFVF9SRUZFUlJFUl9GQUlMLCBkYXRhOiB7IGVycm9yIH0gfSkpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGRvVXNlclNldENvdW50cnkoY291bnRyeSkge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICBjb25zdCB1c2VyID0gc2VsZWN0VXNlcihzdGF0ZSk7XG5cbiAgICBMYnJ5aW8uY2FsbCgndXNlcl9jb3VudHJ5JywgJ3NldCcsIHsgY291bnRyeSB9KS50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IG5ld1VzZXIgPSB7IC4uLnVzZXIsIGNvdW50cnkgfTtcbiAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX0ZFVENIX1NVQ0NFU1MsXG4gICAgICAgIGRhdGE6IHsgdXNlcjogbmV3VXNlciB9LFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb0NsYWltWW91dHViZUNoYW5uZWxzKCkge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX1lPVVRVQkVfSU1QT1JUX1NUQVJURUQsXG4gICAgfSk7XG5cbiAgICBsZXQgdHJhbnNmZXJSZXNwb25zZTtcbiAgICByZXR1cm4gTGJyeS5hZGRyZXNzX2xpc3QoeyBwYWdlOiAxLCBwYWdlX3NpemU6IDk5OTk5IH0pXG4gICAgICAudGhlbigoYWRkcmVzc0xpc3QpID0+IGFkZHJlc3NMaXN0Lml0ZW1zWzBdKVxuICAgICAgLnRoZW4oKGFkZHJlc3MpID0+XG4gICAgICAgIExicnlpby5jYWxsKCd5dCcsICd0cmFuc2ZlcicsIHtcbiAgICAgICAgICBhZGRyZXNzOiBhZGRyZXNzLmFkZHJlc3MsXG4gICAgICAgICAgcHVibGljX2tleTogYWRkcmVzcy5wdWJrZXksXG4gICAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmxlbmd0aCkge1xuICAgICAgICAgICAgdHJhbnNmZXJSZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgICAgICAgICAgICByZXNwb25zZS5tYXAoKGNoYW5uZWxNZXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNoYW5uZWxNZXRhICYmIGNoYW5uZWxNZXRhLmNoYW5uZWwgJiYgY2hhbm5lbE1ldGEuY2hhbm5lbC5jaGFubmVsX2NlcnRpZmljYXRlKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gTGJyeS5jaGFubmVsX2ltcG9ydCh7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5uZWxfZGF0YTogY2hhbm5lbE1ldGEuY2hhbm5lbC5jaGFubmVsX2NlcnRpZmljYXRlLFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgYWN0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBBQ1RJT05TLlVTRVJfWU9VVFVCRV9JTVBPUlRfU1VDQ0VTUyxcbiAgICAgICAgICAgICAgICAgIGRhdGE6IHRyYW5zZmVyUmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgYWN0aW9ucy5wdXNoKGRvVXNlckZldGNoKCkpO1xuICAgICAgICAgICAgICBhY3Rpb25zLnB1c2goZG9GZXRjaENoYW5uZWxMaXN0TWluZSgpKTtcbiAgICAgICAgICAgICAgZGlzcGF0Y2goYmF0Y2hBY3Rpb25zKC4uLmFjdGlvbnMpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IEFDVElPTlMuVVNFUl9ZT1VUVUJFX0lNUE9SVF9GQUlMVVJFLFxuICAgICAgICAgIGRhdGE6IFN0cmluZyhlcnJvciksXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb0NoZWNrWW91dHViZVRyYW5zZmVyKCkge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX1lPVVRVQkVfSU1QT1JUX1NUQVJURUQsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gTGJyeWlvLmNhbGwoJ3l0JywgJ3RyYW5zZmVyJylcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UubGVuZ3RoKSB7XG4gICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX1lPVVRVQkVfSU1QT1JUX1NVQ0NFU1MsXG4gICAgICAgICAgICBkYXRhOiByZXNwb25zZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IEFDVElPTlMuVVNFUl9ZT1VUVUJFX0lNUE9SVF9GQUlMVVJFLFxuICAgICAgICAgIGRhdGE6IFN0cmluZyhlcnJvciksXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH07XG59XG5cbi8qKipcbiAqIFJlY2VpdmVzIGEgY3N2IG9mIGNoYW5uZWwgY2xhaW0gaWRzLCBoaXRzIHRoZSBiYWNrZW5kIGFuZCByZXR1cm5zIG5pY2VseSBmb3JtYXR0ZWQgb2JqZWN0IHdpdGggcmVsZXZhbnQgaW5mb1xuICogQHBhcmFtIGNsYWltSWRDc3ZcbiAqIEByZXR1cm5zIHsoZnVuY3Rpb24oKik6IFByb21pc2U8dm9pZD4pfCp9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb0ZldGNoVXNlck1lbWJlcnNoaXBzKGNsYWltSWRDc3YpIHtcbiAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCkgPT4ge1xuICAgIGlmICghY2xhaW1JZENzdiB8fCAoY2xhaW1JZENzdi5sZW5ndGggJiYgY2xhaW1JZENzdi5sZW5ndGggPCAxKSkgcmV0dXJuO1xuXG4gICAgLy8gY2hlY2sgaWYgdXNlcnMgaGF2ZSBvZHlzZWUgbWVtYmVyc2hpcHMgKHByZW1pdW0vcHJlbWl1bSspXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBMYnJ5aW8uY2FsbCgnbWVtYmVyc2hpcCcsICdjaGVjaycsIHtcbiAgICAgIGNoYW5uZWxfaWQ6IE9EWVNFRV9DSEFOTkVMLklELFxuICAgICAgY2xhaW1faWRzOiBjbGFpbUlkQ3N2LFxuICAgICAgZW52aXJvbm1lbnQ6IHN0cmlwZUVudmlyb25tZW50LFxuICAgIH0pO1xuXG4gICAgbGV0IHVwZGF0ZWRSZXNwb25zZSA9IHt9O1xuXG4gICAgLy8gbG9vcCB0aHJvdWdoIHJldHVybmVkIHVzZXJzXG4gICAgZm9yIChjb25zdCB1c2VyIGluIHJlc3BvbnNlKSB7XG4gICAgICAvLyBpZiBhcnJheSB3YXMgcmV0dXJuZWQgZm9yIGEgdXNlciAoaW5kaWNhdGluZyBhIG1lbWJlcnNoaXAgZXhpc3RzKSwgb3RoZXJ3aXNlIGlzIG51bGxcbiAgICAgIGlmIChyZXNwb25zZVt1c2VyXSAmJiByZXNwb25zZVt1c2VyXS5sZW5ndGgpIHtcbiAgICAgICAgLy8gZ2V0IG1lbWJlcnNoaXAgZm9yIHVzZXJcbiAgICAgICAgLy8gbm90ZTogYSBmb3IgbG9vcCBpcyBraW5kIG9mIG9kZCwgaW5kaWNhdGVzIHRoZXJlIG1heSBiZSBtdWx0aXBsZSBtZW1iZXJzaGlwcz9cbiAgICAgICAgLy8gcHJvYmFibHkgbm90IG5lZWRlZCBkZXBlbmRpbmcgb24gd2hhdCB3ZSBkbyB3aXRoIHRoZSBmcm9udGVuZCwgc2hvdWxkIHJldmlzaXRcbiAgICAgICAgZm9yIChjb25zdCBtZW1iZXJzaGlwIG9mIHJlc3BvbnNlW3VzZXJdKSB7XG4gICAgICAgICAgaWYgKG1lbWJlcnNoaXAuY2hhbm5lbF9uYW1lKSB7XG4gICAgICAgICAgICB1cGRhdGVkUmVzcG9uc2VbdXNlcl0gPSBtZW1iZXJzaGlwLm5hbWU7XG4gICAgICAgICAgICB3aW5kb3cuY2hlY2tlZE1lbWJlcnNoaXBzW3VzZXJdID0gbWVtYmVyc2hpcC5uYW1lO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbm90ZSB0aGUgdXNlciBoYXMgYmVlbiBmZXRjaGVkIGJ1dCBpcyBudWxsXG4gICAgICAgIHVwZGF0ZWRSZXNwb25zZVt1c2VyXSA9IG51bGw7XG4gICAgICAgIHdpbmRvdy5jaGVja2VkTWVtYmVyc2hpcHNbdXNlcl0gPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIGRpc3BhdGNoKHsgdHlwZTogQUNUSU9OUy5BRERfQ0xBSU1JRFNfTUVNQkVSU0hJUF9EQVRBLCBkYXRhOiB7IHJlc3BvbnNlOiB1cGRhdGVkUmVzcG9uc2UgfSB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvRmV0Y2hVc2VyTG9jYWxlKGlzUmV0cnkgPSBmYWxzZSkge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgZmV0Y2goTE9DQUxFX0FQSSlcbiAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbigoanNvbikgPT4ge1xuICAgICAgICBjb25zdCBsb2NhbGUgPSBqc29uLmRhdGE7IC8vIFtmbG93XSBsb2NhbDogTG9jYWxlSW5mb1xuICAgICAgICBpZiAobG9jYWxlKSB7XG4gICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogQUNUSU9OUy5VU0VSX0ZFVENIX0xPQ0FMRV9ET05FLFxuICAgICAgICAgICAgZGF0YTogbG9jYWxlLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgaWYgKCFpc1JldHJ5KSB7XG4gICAgICAgICAgLy8gSWYgZmFpbGVkLCByZXRyeSBvbmUgbW9yZSB0aW1lIGFmdGVyIE4gc2Vjb25kcy4gVGhpcyByZW1vdmVzIHRoZVxuICAgICAgICAgIC8vIG5lZWQgdG8gZmV0Y2ggYXQgZWFjaCBjb21wb25lbnQgbGV2ZWwuIElmIGl0IGZhaWxlZCB0d2ljZSwgcHJvYmFibHlcbiAgICAgICAgICAvLyBkb24ndCBuZWVkIHRvIGZldGNoIGFueW1vcmUuXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBkaXNwYXRjaChkb0ZldGNoVXNlckxvY2FsZSh0cnVlKSk7XG4gICAgICAgICAgfSwgMTAwMDApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFGQTtBQU5BO0FBaUJBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQWpCQTtBQUxBO0FBNEJBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQXZCQTtBQURBO0FBMkJBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQVdBO0FBREE7QUFDQTtBQVhBO0FBT0E7QUFTQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBdEJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFxQkE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBekJBO0FBNkJBO0FBQ0E7QUFDQTtBQUNBO0FBaENBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBK0JBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUF4Q0E7QUEwQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFIQTtBQUNBO0FBM0NBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBaURBO0FBQ0E7QUFBQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFFQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoQkE7QUFOQTtBQTBCQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQTVCQTtBQUpBO0FBc0NBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQURBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQUlBO0FBUEE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQVhBO0FBTkE7QUFBQTtBQXVCQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQVRBO0FBREE7QUFhQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBREE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBREE7QUFDQTtBQU1BO0FBQUE7QUFBQTtBQUFBO0FBcEJBO0FBeUJBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUlBO0FBQ0E7QUFDQTtBQUhBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUNBO0FBakJBO0FBbUJBO0FBbkJBO0FBVEE7QUE4QkE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBREE7QUFNQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUxBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQURBO0FBQ0E7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQUE7QUFaQTtBQXJCQTtBQXFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFLQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFLQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFqQkE7QUFDQTtBQW1CQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBREE7QUFDQTtBQUtBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFEQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFBQTtBQXBDQTtBQXFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUxBO0FBQ0E7QUFPQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQURBO0FBQ0E7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQVpBO0FBcEJBO0FBb0NBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBSUE7QUFDQTtBQU5BO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQUtBO0FBWEE7QUFDQTtBQWFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUE5QkE7QUFBQTtBQWdDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUNBO0FBS0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFEQTtBQUNBO0FBS0E7QUFBQTtBQUFBO0FBbEJBO0FBb0JBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUpBO0FBQ0E7QUFNQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQURBO0FBQ0E7QUFLQTtBQUlBO0FBSkE7QUFLQTtBQUFBO0FBQ0E7QUFBQTtBQXhCQTtBQTZCQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBREE7QUFDQTtBQU1BO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBSkE7QUFsQkE7QUEwQkE7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFJQTtBQUNBO0FBQ0E7QUFIQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBSUE7QUFMQTtBQU9BO0FBQ0E7QUFuQkE7QUFxQkE7QUFyQkE7QUFUQTtBQWdDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBSUE7QUFMQTtBQU9BO0FBQ0E7QUFWQTtBQWFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQWJBO0FBTkE7QUF5QkE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBS0E7QUFFQTtBQUFBO0FBQUE7QUFEQTtBQUtBO0FBQ0E7QUFkQTtBQWlCQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFqQkE7QUFMQTtBQTRCQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBT0E7QUFBQTtBQUNBO0FBUkE7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQWpCQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFrQkE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBQ0E7QUFuQkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQXdCQTtBQUNBO0FBQ0E7QUExQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUE0QkE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUdBO0FBRUE7QUFDQTtBQWJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFjQTtBQUNBO0FBQ0E7QUFqQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFxQkE7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBeEJBO0FBQ0E7QUFEQTtBQTJCQTtBQUNBO0FBNUJBO0FBQUE7QUFBQTtBQThCQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBWUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBMUNBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBNkNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFGQTtBQUpBO0FBWUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUVBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBUEE7QUFVQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQWxCQTtBQW9CQTtBQTNCQTtBQUZBO0FBaUNBO0FBQ0E7QUFDQTtBQUZBO0FBakNBO0FBTkE7QUE2Q0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUNBO0FBVEE7QUFZQTtBQUNBO0FBQ0E7QUFGQTtBQVpBO0FBTEE7QUF1QkE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBTEE7QUFJQTtBQU1BO0FBQ0E7QUFYQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBWUE7QUFDQTtBQWRBO0FBQUE7QUFBQTtBQUFBO0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBcEJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFrQkE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBekJBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUEwQkE7QUFDQTtBQUNBO0FBQ0E7QUE3QkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQWdDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWpDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWtDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFUQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFuQkE7QUFEQTtBQXVCQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../ui/redux/actions/user.js\n");

/***/ }),

/***/ "../ui/scss/component/notifications-blocked.scss":
/*!*******************************************************!*\
  !*** ../ui/scss/component/notifications-blocked.scss ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("\nvar content = __webpack_require__(/*! !../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src??ref--5-2!../../../node_modules/sass-loader/dist/cjs.js!./notifications-blocked.scss */ \"../node_modules/css-loader/dist/cjs.js!../node_modules/postcss-loader/src/index.js?!../node_modules/sass-loader/dist/cjs.js!../ui/scss/component/notifications-blocked.scss\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../node_modules/style-loader/lib/addStyles.js */ \"../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(true) {\n\tmodule.hot.accept(/*! !../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src??ref--5-2!../../../node_modules/sass-loader/dist/cjs.js!./notifications-blocked.scss */ \"../node_modules/css-loader/dist/cjs.js!../node_modules/postcss-loader/src/index.js?!../node_modules/sass-loader/dist/cjs.js!../ui/scss/component/notifications-blocked.scss\", function() {\n\t\tvar newContent = __webpack_require__(/*! !../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src??ref--5-2!../../../node_modules/sass-loader/dist/cjs.js!./notifications-blocked.scss */ \"../node_modules/css-loader/dist/cjs.js!../node_modules/postcss-loader/src/index.js?!../node_modules/sass-loader/dist/cjs.js!../ui/scss/component/notifications-blocked.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.i, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvc2Nzcy9jb21wb25lbnQvbm90aWZpY2F0aW9ucy1ibG9ja2VkLnNjc3MuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vdWkvc2Nzcy9jb21wb25lbnQvbm90aWZpY2F0aW9ucy1ibG9ja2VkLnNjc3M/ODA1OSJdLCJzb3VyY2VzQ29udGVudCI6WyJcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cmVmLS01LTIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vbm90aWZpY2F0aW9ucy1ibG9ja2VkLnNjc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3JlZi0tNS0yIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL25vdGlmaWNhdGlvbnMtYmxvY2tlZC5zY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cmVmLS01LTIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vbm90aWZpY2F0aW9ucy1ibG9ja2VkLnNjc3NcIik7XG5cblx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblxuXHRcdHZhciBsb2NhbHMgPSAoZnVuY3Rpb24oYSwgYikge1xuXHRcdFx0dmFyIGtleSwgaWR4ID0gMDtcblxuXHRcdFx0Zm9yKGtleSBpbiBhKSB7XG5cdFx0XHRcdGlmKCFiIHx8IGFba2V5XSAhPT0gYltrZXldKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGlkeCsrO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3Ioa2V5IGluIGIpIGlkeC0tO1xuXG5cdFx0XHRyZXR1cm4gaWR4ID09PSAwO1xuXHRcdH0oY29udGVudC5sb2NhbHMsIG5ld0NvbnRlbnQubG9jYWxzKSk7XG5cblx0XHRpZighbG9jYWxzKSB0aHJvdyBuZXcgRXJyb3IoJ0Fib3J0aW5nIENTUyBITVIgZHVlIHRvIGNoYW5nZWQgY3NzLW1vZHVsZXMgbG9jYWxzLicpO1xuXG5cdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHR9KTtcblxuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../ui/scss/component/notifications-blocked.scss\n");

/***/ }),

/***/ "./component/browserNotificationHints/index.jsx":
/*!******************************************************!*\
  !*** ./component/browserNotificationHints/index.jsx ***!
  \******************************************************/
/*! exports provided: BrowserNotificationsBlocked, BrowserNotificationHints, BrowserNotificationErrorModal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BrowserNotificationsBlocked\", function() { return BrowserNotificationsBlocked; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BrowserNotificationHints\", function() { return BrowserNotificationHints; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BrowserNotificationErrorModal\", function() { return BrowserNotificationErrorModal; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var constants_icons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! constants/icons */ \"../ui/constants/icons.js\");\n/* harmony import */ var component_common_icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! component/common/icon */ \"../ui/component/common/icon.jsx\");\n/* harmony import */ var modal_modal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! modal/modal */ \"../ui/modal/modal.jsx\");\n/* harmony import */ var scss_component_notifications_blocked_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! scss/component/notifications-blocked.scss */ \"../ui/scss/component/notifications-blocked.scss\");\n/* harmony import */ var scss_component_notifications_blocked_scss__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(scss_component_notifications_blocked_scss__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\n\nvar InlineMessage = function InlineMessage(props) {\n  var title = props.title,\n      children = props.children;\n  return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", {\n    className: \"notificationsBlocked\"\n  }, react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](component_common_icon__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n    className: \"notificationsBlocked__icon\",\n    color: \"#E50054\",\n    icon: constants_icons__WEBPACK_IMPORTED_MODULE_1__[\"ALERT\"],\n    size: 32\n  }), react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"div\", null, react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", null, title), react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"span\", {\n    className: 'notificationsBlocked__subText'\n  }, children)));\n};\n\nvar BrowserNotificationsBlocked = function BrowserNotificationsBlocked() {\n  return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](InlineMessage, {\n    title: __('Heads up: browser notifications are currently blocked in this browser.')\n  }, __('To enable push notifications please configure your browser to allow notifications on odysee.com.'));\n};\nvar BrowserNotificationHints = function BrowserNotificationHints() {\n  return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](InlineMessage, {\n    title: __(\"Browser notifications aren't supported. Here's a few tips:\")\n  }, react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"ul\", {\n    className: 'notificationsBlocked__subText notificationsBlocked__subTextList'\n  }, react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"li\", null, __(\"Notifications aren't available when in incognito or private mode.\")), react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"li\", null, __(\"On Firefox, notifications won't function if cookies are set to clear on browser close. Please disable or add an exception for Odysee, then refresh.\")), react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"li\", null, __('For Brave, enable google push notifications in settings.')), react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"li\", null, __('Check browser settings to see if notifications are disabled or otherwise restricted.'))));\n};\nvar BrowserNotificationErrorModal = function BrowserNotificationErrorModal(props) {\n  var doHideModal = props.doHideModal;\n  return react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](modal_modal__WEBPACK_IMPORTED_MODULE_3__[\"Modal\"], {\n    type: \"card\",\n    isOpen: true,\n    onAborted: doHideModal\n  }, react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](BrowserNotificationHints, null));\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnQvYnJvd3Nlck5vdGlmaWNhdGlvbkhpbnRzL2luZGV4LmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2NvbXBvbmVudC9icm93c2VyTm90aWZpY2F0aW9uSGludHMvaW5kZXguanN4PzU3MDYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCAqIGFzIElDT05TIGZyb20gJ2NvbnN0YW50cy9pY29ucyc7XG5pbXBvcnQgSWNvbiBmcm9tICdjb21wb25lbnQvY29tbW9uL2ljb24nO1xuaW1wb3J0IHsgTW9kYWwgfSBmcm9tICdtb2RhbC9tb2RhbCc7XG5pbXBvcnQgJ3Njc3MvY29tcG9uZW50L25vdGlmaWNhdGlvbnMtYmxvY2tlZC5zY3NzJztcblxudHlwZSBJbmxpbmVNZXNzYWdlUHJvcHMgPSB7XG4gIHRpdGxlOiBzdHJpbmcsXG4gIGNoaWxkcmVuOiBSZWFjdC5Ob2RlLFxufTtcblxuY29uc3QgSW5saW5lTWVzc2FnZSA9IChwcm9wczogSW5saW5lTWVzc2FnZVByb3BzKSA9PiB7XG4gIGNvbnN0IHsgdGl0bGUsIGNoaWxkcmVuIH0gPSBwcm9wcztcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm5vdGlmaWNhdGlvbnNCbG9ja2VkXCI+XG4gICAgICA8SWNvbiBjbGFzc05hbWU9XCJub3RpZmljYXRpb25zQmxvY2tlZF9faWNvblwiIGNvbG9yPVwiI0U1MDA1NFwiIGljb249e0lDT05TLkFMRVJUfSBzaXplPXszMn0gLz5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxzcGFuPnt0aXRsZX08L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT17J25vdGlmaWNhdGlvbnNCbG9ja2VkX19zdWJUZXh0J30+e2NoaWxkcmVufTwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IEJyb3dzZXJOb3RpZmljYXRpb25zQmxvY2tlZCA9ICgpID0+IHtcbiAgcmV0dXJuIChcbiAgICA8SW5saW5lTWVzc2FnZSB0aXRsZT17X18oJ0hlYWRzIHVwOiBicm93c2VyIG5vdGlmaWNhdGlvbnMgYXJlIGN1cnJlbnRseSBibG9ja2VkIGluIHRoaXMgYnJvd3Nlci4nKX0+XG4gICAgICB7X18oJ1RvIGVuYWJsZSBwdXNoIG5vdGlmaWNhdGlvbnMgcGxlYXNlIGNvbmZpZ3VyZSB5b3VyIGJyb3dzZXIgdG8gYWxsb3cgbm90aWZpY2F0aW9ucyBvbiBvZHlzZWUuY29tLicpfVxuICAgIDwvSW5saW5lTWVzc2FnZT5cbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBCcm93c2VyTm90aWZpY2F0aW9uSGludHMgPSAoKSA9PiB7XG4gIHJldHVybiAoXG4gICAgPElubGluZU1lc3NhZ2UgdGl0bGU9e19fKFwiQnJvd3NlciBub3RpZmljYXRpb25zIGFyZW4ndCBzdXBwb3J0ZWQuIEhlcmUncyBhIGZldyB0aXBzOlwiKX0+XG4gICAgICA8dWwgY2xhc3NOYW1lPXsnbm90aWZpY2F0aW9uc0Jsb2NrZWRfX3N1YlRleHQgbm90aWZpY2F0aW9uc0Jsb2NrZWRfX3N1YlRleHRMaXN0J30+XG4gICAgICAgIDxsaT57X18oXCJOb3RpZmljYXRpb25zIGFyZW4ndCBhdmFpbGFibGUgd2hlbiBpbiBpbmNvZ25pdG8gb3IgcHJpdmF0ZSBtb2RlLlwiKX08L2xpPlxuICAgICAgICA8bGk+XG4gICAgICAgICAge19fKFxuICAgICAgICAgICAgXCJPbiBGaXJlZm94LCBub3RpZmljYXRpb25zIHdvbid0IGZ1bmN0aW9uIGlmIGNvb2tpZXMgYXJlIHNldCB0byBjbGVhciBvbiBicm93c2VyIGNsb3NlLiBQbGVhc2UgZGlzYWJsZSBvciBhZGQgYW4gZXhjZXB0aW9uIGZvciBPZHlzZWUsIHRoZW4gcmVmcmVzaC5cIlxuICAgICAgICAgICl9XG4gICAgICAgIDwvbGk+XG4gICAgICAgIDxsaT57X18oJ0ZvciBCcmF2ZSwgZW5hYmxlIGdvb2dsZSBwdXNoIG5vdGlmaWNhdGlvbnMgaW4gc2V0dGluZ3MuJyl9PC9saT5cbiAgICAgICAgPGxpPntfXygnQ2hlY2sgYnJvd3NlciBzZXR0aW5ncyB0byBzZWUgaWYgbm90aWZpY2F0aW9ucyBhcmUgZGlzYWJsZWQgb3Igb3RoZXJ3aXNlIHJlc3RyaWN0ZWQuJyl9PC9saT5cbiAgICAgIDwvdWw+XG4gICAgPC9JbmxpbmVNZXNzYWdlPlxuICApO1xufTtcblxudHlwZSBNb2RhbFByb3BzID0ge1xuICBkb0hpZGVNb2RhbDogKCkgPT4gdm9pZCxcbn07XG5leHBvcnQgY29uc3QgQnJvd3Nlck5vdGlmaWNhdGlvbkVycm9yTW9kYWwgPSAocHJvcHM6IE1vZGFsUHJvcHMpID0+IHtcbiAgY29uc3QgeyBkb0hpZGVNb2RhbCB9ID0gcHJvcHM7XG4gIHJldHVybiAoXG4gICAgPE1vZGFsIHR5cGU9XCJjYXJkXCIgaXNPcGVuIG9uQWJvcnRlZD17ZG9IaWRlTW9kYWx9PlxuICAgICAgPEJyb3dzZXJOb3RpZmljYXRpb25IaW50cyAvPlxuICAgIDwvTW9kYWw+XG4gICk7XG59O1xuIl0sIm1hcHBpbmdzIjoiQUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFQQTtBQUNBO0FBWUE7QUFDQTtBQUNBO0FBQUE7QUFGQTtBQVFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUhBO0FBb0JBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSEE7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./component/browserNotificationHints/index.jsx\n");

/***/ }),

/***/ "./component/browserNotificationSettings/use-browser-notifications.js":
/*!****************************************************************************!*\
  !*** ./component/browserNotificationSettings/use-browser-notifications.js ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var $web_src_push_notifications__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! $web/src/push-notifications */ \"./src/push-notifications/index.js\");\n/* harmony import */ var $web_component_browserNotificationHints__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! $web/component/browserNotificationHints */ \"./component/browserNotificationHints/index.jsx\");\n/* harmony import */ var $ui_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! $ui/store */ \"../ui/store.js\");\n/* harmony import */ var redux_selectors_user__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! redux/selectors/user */ \"../ui/redux/selectors/user.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! analytics */ \"../ui/analytics.js\");\n/* harmony import */ var analytics_events__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! analytics/events */ \"../ui/analytics/events.js\");\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\n\n\n // @todo: Once we are on Redux 7 we should have proper hooks we can use here for store access.\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (function () {\n  var _window$Notification;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])((_window$Notification = window.Notification) === null || _window$Notification === void 0 ? void 0 : _window$Notification.permission),\n      _useState2 = _slicedToArray(_useState, 2),\n      pushPermission = _useState2[0],\n      setPushPermission = _useState2[1];\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      subscribed = _useState4[0],\n      setSubscribed = _useState4[1];\n\n  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      pushEnabled = _useState6[0],\n      setPushEnabled = _useState6[1];\n\n  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      pushSupported = _useState8[0],\n      setPushSupported = _useState8[1];\n\n  var _useState9 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      encounteredError = _useState10[0],\n      setEncounteredError = _useState10[1];\n\n  var _useState11 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      pushInitialized = _useState12[0],\n      setPushInitialized = _useState12[1];\n\n  var _useState13 = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(Object(redux_selectors_user__WEBPACK_IMPORTED_MODULE_4__[\"selectUser\"])($ui_store__WEBPACK_IMPORTED_MODULE_3__[\"store\"].getState())),\n      _useState14 = _slicedToArray(_useState13, 1),\n      user = _useState14[0];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function () {\n    if (!user) return;\n    var mounted = true;\n    setPushSupported($web_src_push_notifications__WEBPACK_IMPORTED_MODULE_1__[\"default\"].supported);\n\n    if ($web_src_push_notifications__WEBPACK_IMPORTED_MODULE_1__[\"default\"].supported) {\n      $web_src_push_notifications__WEBPACK_IMPORTED_MODULE_1__[\"default\"].subscribed(user.id).then(function (isSubscribed) {\n        if (mounted) {\n          setSubscribed(isSubscribed);\n          setPushInitialized(true);\n        }\n      });\n    }\n\n    if (window.cordova) {\n      $web_src_push_notifications__WEBPACK_IMPORTED_MODULE_1__[\"default\"].subscribed(user.id).then(function (isSubscribed) {\n        setSubscribed(isSubscribed);\n        setPushInitialized(true);\n      });\n    }\n\n    if (window.cordova) {\n      $web_src_push_notifications__WEBPACK_IMPORTED_MODULE_1__[\"default\"].subscribed(user.id).then(function (isSubscribed) {\n        setSubscribed(isSubscribed);\n        setPushInitialized(true);\n      });\n    }\n\n    if (window.cordova) {\n      $web_src_push_notifications__WEBPACK_IMPORTED_MODULE_1__[\"default\"].subscribed(user.id).then(function (isSubscribed) {\n        setSubscribed(isSubscribed);\n        setPushInitialized(true);\n      });\n    }\n  }, [user]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(function () {\n    return setPushEnabled(pushPermission === 'granted' && subscribed);\n  }, [pushPermission, subscribed]);\n\n  var subscribe = function subscribe() {\n    var _subscribed, _window$Notification2;\n\n    return regeneratorRuntime.async(function subscribe$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (user) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            setEncounteredError(false);\n            _context.prev = 3;\n            _context.next = 6;\n            return regeneratorRuntime.awrap($web_src_push_notifications__WEBPACK_IMPORTED_MODULE_1__[\"default\"].subscribe(user.id));\n\n          case 6:\n            _subscribed = _context.sent;\n\n            if (_subscribed) {\n              setSubscribed(true);\n              setPushPermission((_window$Notification2 = window.Notification) === null || _window$Notification2 === void 0 ? void 0 : _window$Notification2.permission);\n            }\n\n            _context.next = 14;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](3);\n            setEncounteredError(true);\n            analytics__WEBPACK_IMPORTED_MODULE_5__[\"default\"].event.report('browser_notification', _defineProperty({}, analytics_events__WEBPACK_IMPORTED_MODULE_6__[\"GA_DIMENSIONS\"].ACTION, 'subscribe_failed'));\n\n          case 14:\n            analytics__WEBPACK_IMPORTED_MODULE_5__[\"default\"].event.report('browser_notification', _defineProperty({}, analytics_events__WEBPACK_IMPORTED_MODULE_6__[\"GA_DIMENSIONS\"].ACTION, 'subscribed'));\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[3, 10]]);\n  };\n\n  var unsubscribe = function unsubscribe() {\n    return regeneratorRuntime.async(function unsubscribe$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (user) {\n              _context2.next = 2;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 2:\n            _context2.next = 4;\n            return regeneratorRuntime.awrap($web_src_push_notifications__WEBPACK_IMPORTED_MODULE_1__[\"default\"].unsubscribe(user.id));\n\n          case 4:\n            if (!_context2.sent) {\n              _context2.next = 7;\n              break;\n            }\n\n            setSubscribed(false);\n            analytics__WEBPACK_IMPORTED_MODULE_5__[\"default\"].event.report('browser_notification', _defineProperty({}, analytics_events__WEBPACK_IMPORTED_MODULE_6__[\"GA_DIMENSIONS\"].ACTION, 'unsubscribed'));\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n\n  var pushToggle = function pushToggle() {\n    return regeneratorRuntime.async(function pushToggle$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            return _context3.abrupt(\"return\", !pushEnabled ? subscribe() : unsubscribe());\n\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    });\n  };\n\n  var pushRequest = function pushRequest() {\n    var _window$Notification3;\n\n    return regeneratorRuntime.async(function pushRequest$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            return _context4.abrupt(\"return\", ((_window$Notification3 = window.Notification) === null || _window$Notification3 === void 0 ? void 0 : _window$Notification3.permission) !== 'granted' ? subscribe() : null);\n\n          case 1:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    });\n  };\n\n  var pushErrorModal = function pushErrorModal() {\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, encounteredError && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement($web_component_browserNotificationHints__WEBPACK_IMPORTED_MODULE_2__[\"BrowserNotificationErrorModal\"], {\n      doHideModal: function doHideModal() {\n        return setEncounteredError(false);\n      }\n    }));\n  };\n\n  return {\n    pushInitialized: pushInitialized,\n    pushSupported: pushSupported,\n    pushEnabled: pushEnabled,\n    pushPermission: pushPermission,\n    pushToggle: pushToggle,\n    pushRequest: pushRequest,\n    pushErrorModal: pushErrorModal\n  };\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnQvYnJvd3Nlck5vdGlmaWNhdGlvblNldHRpbmdzL3VzZS1icm93c2VyLW5vdGlmaWNhdGlvbnMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb21wb25lbnQvYnJvd3Nlck5vdGlmaWNhdGlvblNldHRpbmdzL3VzZS1icm93c2VyLW5vdGlmaWNhdGlvbnMuanM/NWYwNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgcHVzaE5vdGlmaWNhdGlvbnMgZnJvbSAnJHdlYi9zcmMvcHVzaC1ub3RpZmljYXRpb25zJztcbmltcG9ydCB7IEJyb3dzZXJOb3RpZmljYXRpb25FcnJvck1vZGFsIH0gZnJvbSAnJHdlYi9jb21wb25lbnQvYnJvd3Nlck5vdGlmaWNhdGlvbkhpbnRzJztcblxuLy8gQHRvZG86IE9uY2Ugd2UgYXJlIG9uIFJlZHV4IDcgd2Ugc2hvdWxkIGhhdmUgcHJvcGVyIGhvb2tzIHdlIGNhbiB1c2UgaGVyZSBmb3Igc3RvcmUgYWNjZXNzLlxuaW1wb3J0IHsgc3RvcmUgfSBmcm9tICckdWkvc3RvcmUnO1xuaW1wb3J0IHsgc2VsZWN0VXNlciB9IGZyb20gJ3JlZHV4L3NlbGVjdG9ycy91c2VyJztcbmltcG9ydCBhbmFseXRpY3MgZnJvbSAnYW5hbHl0aWNzJztcbmltcG9ydCB7IEdBX0RJTUVOU0lPTlMgfSBmcm9tICdhbmFseXRpY3MvZXZlbnRzJztcblxuZXhwb3J0IGRlZmF1bHQgKCkgPT4ge1xuICBjb25zdCBbcHVzaFBlcm1pc3Npb24sIHNldFB1c2hQZXJtaXNzaW9uXSA9IHVzZVN0YXRlKHdpbmRvdy5Ob3RpZmljYXRpb24/LnBlcm1pc3Npb24pO1xuICBjb25zdCBbc3Vic2NyaWJlZCwgc2V0U3Vic2NyaWJlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwdXNoRW5hYmxlZCwgc2V0UHVzaEVuYWJsZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcHVzaFN1cHBvcnRlZCwgc2V0UHVzaFN1cHBvcnRlZF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2VuY291bnRlcmVkRXJyb3IsIHNldEVuY291bnRlcmVkRXJyb3JdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcHVzaEluaXRpYWxpemVkLCBzZXRQdXNoSW5pdGlhbGl6ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIGNvbnN0IFt1c2VyXSA9IHVzZVN0YXRlKHNlbGVjdFVzZXIoc3RvcmUuZ2V0U3RhdGUoKSkpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF1c2VyKSByZXR1cm47XG4gICAgbGV0IG1vdW50ZWQgPSB0cnVlO1xuICAgIHNldFB1c2hTdXBwb3J0ZWQocHVzaE5vdGlmaWNhdGlvbnMuc3VwcG9ydGVkKTtcbiAgICBpZiAocHVzaE5vdGlmaWNhdGlvbnMuc3VwcG9ydGVkKSB7XG4gICAgICBwdXNoTm90aWZpY2F0aW9ucy5zdWJzY3JpYmVkKHVzZXIuaWQpLnRoZW4oKGlzU3Vic2NyaWJlZDogYm9vbGVhbikgPT4ge1xuICAgICAgICBpZiAobW91bnRlZCkge1xuICAgICAgICAgIHNldFN1YnNjcmliZWQoaXNTdWJzY3JpYmVkKTtcbiAgICAgICAgICBzZXRQdXNoSW5pdGlhbGl6ZWQodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAod2luZG93LmNvcmRvdmEpIHtcbiAgICAgIHB1c2hOb3RpZmljYXRpb25zLnN1YnNjcmliZWQodXNlci5pZCkudGhlbigoaXNTdWJzY3JpYmVkOiBib29sZWFuKSA9PiB7XG4gICAgICAgIHNldFN1YnNjcmliZWQoaXNTdWJzY3JpYmVkKTtcbiAgICAgICAgc2V0UHVzaEluaXRpYWxpemVkKHRydWUpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh3aW5kb3cuY29yZG92YSkge1xuICAgICAgcHVzaE5vdGlmaWNhdGlvbnMuc3Vic2NyaWJlZCh1c2VyLmlkKS50aGVuKChpc1N1YnNjcmliZWQ6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgc2V0U3Vic2NyaWJlZChpc1N1YnNjcmliZWQpO1xuICAgICAgICBzZXRQdXNoSW5pdGlhbGl6ZWQodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHdpbmRvdy5jb3Jkb3ZhKSB7XG4gICAgICBwdXNoTm90aWZpY2F0aW9ucy5zdWJzY3JpYmVkKHVzZXIuaWQpLnRoZW4oKGlzU3Vic2NyaWJlZDogYm9vbGVhbikgPT4ge1xuICAgICAgICBzZXRTdWJzY3JpYmVkKGlzU3Vic2NyaWJlZCk7XG4gICAgICAgIHNldFB1c2hJbml0aWFsaXplZCh0cnVlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW3VzZXJdKTtcblxuICB1c2VNZW1vKCgpID0+IHNldFB1c2hFbmFibGVkKHB1c2hQZXJtaXNzaW9uID09PSAnZ3JhbnRlZCcgJiYgc3Vic2NyaWJlZCksIFtwdXNoUGVybWlzc2lvbiwgc3Vic2NyaWJlZF0pO1xuXG4gIGNvbnN0IHN1YnNjcmliZSA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXVzZXIpIHJldHVybjtcbiAgICBzZXRFbmNvdW50ZXJlZEVycm9yKGZhbHNlKTtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3Vic2NyaWJlZCA9IGF3YWl0IHB1c2hOb3RpZmljYXRpb25zLnN1YnNjcmliZSh1c2VyLmlkKTtcbiAgICAgIGlmIChzdWJzY3JpYmVkKSB7XG4gICAgICAgIHNldFN1YnNjcmliZWQodHJ1ZSk7XG4gICAgICAgIHNldFB1c2hQZXJtaXNzaW9uKHdpbmRvdy5Ob3RpZmljYXRpb24/LnBlcm1pc3Npb24pO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgc2V0RW5jb3VudGVyZWRFcnJvcih0cnVlKTtcbiAgICAgIGFuYWx5dGljcy5ldmVudC5yZXBvcnQoJ2Jyb3dzZXJfbm90aWZpY2F0aW9uJywgeyBbR0FfRElNRU5TSU9OUy5BQ1RJT05dOiAnc3Vic2NyaWJlX2ZhaWxlZCcgfSk7XG4gICAgfVxuICAgIGFuYWx5dGljcy5ldmVudC5yZXBvcnQoJ2Jyb3dzZXJfbm90aWZpY2F0aW9uJywgeyBbR0FfRElNRU5TSU9OUy5BQ1RJT05dOiAnc3Vic2NyaWJlZCcgfSk7XG4gIH07XG5cbiAgY29uc3QgdW5zdWJzY3JpYmUgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCF1c2VyKSByZXR1cm47XG4gICAgaWYgKGF3YWl0IHB1c2hOb3RpZmljYXRpb25zLnVuc3Vic2NyaWJlKHVzZXIuaWQpKSB7XG4gICAgICBzZXRTdWJzY3JpYmVkKGZhbHNlKTtcbiAgICAgIGFuYWx5dGljcy5ldmVudC5yZXBvcnQoJ2Jyb3dzZXJfbm90aWZpY2F0aW9uJywgeyBbR0FfRElNRU5TSU9OUy5BQ1RJT05dOiAndW5zdWJzY3JpYmVkJyB9KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcHVzaFRvZ2dsZSA9IGFzeW5jICgpID0+IHtcbiAgICByZXR1cm4gIXB1c2hFbmFibGVkID8gc3Vic2NyaWJlKCkgOiB1bnN1YnNjcmliZSgpO1xuICB9O1xuXG4gIGNvbnN0IHB1c2hSZXF1ZXN0ID0gYXN5bmMgKCkgPT4ge1xuICAgIHJldHVybiB3aW5kb3cuTm90aWZpY2F0aW9uPy5wZXJtaXNzaW9uICE9PSAnZ3JhbnRlZCcgPyBzdWJzY3JpYmUoKSA6IG51bGw7XG4gIH07XG5cbiAgY29uc3QgcHVzaEVycm9yTW9kYWwgPSAoKSA9PiB7XG4gICAgcmV0dXJuIDw+e2VuY291bnRlcmVkRXJyb3IgJiYgPEJyb3dzZXJOb3RpZmljYXRpb25FcnJvck1vZGFsIGRvSGlkZU1vZGFsPXsoKSA9PiBzZXRFbmNvdW50ZXJlZEVycm9yKGZhbHNlKX0gLz59PC8+O1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgcHVzaEluaXRpYWxpemVkLFxuICAgIHB1c2hTdXBwb3J0ZWQsXG4gICAgcHVzaEVuYWJsZWQsXG4gICAgcHVzaFBlcm1pc3Npb24sXG4gICAgcHVzaFRvZ2dsZSxcbiAgICBwdXNoUmVxdWVzdCxcbiAgICBwdXNoRXJyb3JNb2RhbCxcbiAgfTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQTdCQTtBQWdDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUVBO0FBRkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBVUE7QUFDQTtBQUNBO0FBWkE7QUFhQTtBQUNBO0FBZEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBTEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQU9BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBaEZBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./component/browserNotificationSettings/use-browser-notifications.js\n");

/***/ }),

/***/ "./node_modules/@firebase/app/dist/index.esm2017.js":
/*!**********************************************************!*\
  !*** ./node_modules/@firebase/app/dist/index.esm2017.js ***!
  \**********************************************************/
/*! exports provided: FirebaseError, SDK_VERSION, _DEFAULT_ENTRY_NAME, _addComponent, _addOrOverwriteComponent, _apps, _clearComponents, _components, _getProvider, _registerComponent, _removeServiceInstance, deleteApp, getApp, getApps, initializeApp, onLog, registerVersion, setLogLevel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SDK_VERSION\", function() { return SDK_VERSION; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_DEFAULT_ENTRY_NAME\", function() { return DEFAULT_ENTRY_NAME; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_addComponent\", function() { return _addComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_addOrOverwriteComponent\", function() { return _addOrOverwriteComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_apps\", function() { return _apps; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_clearComponents\", function() { return _clearComponents; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_components\", function() { return _components; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_getProvider\", function() { return _getProvider; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_registerComponent\", function() { return _registerComponent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_removeServiceInstance\", function() { return _removeServiceInstance; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deleteApp\", function() { return deleteApp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getApp\", function() { return getApp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getApps\", function() { return getApps; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"initializeApp\", function() { return initializeApp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"onLog\", function() { return onLog; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"registerVersion\", function() { return registerVersion; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setLogLevel\", function() { return setLogLevel; });\n/* harmony import */ var _firebase_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/component */ \"./node_modules/@firebase/component/dist/index.esm.js\");\n/* harmony import */ var _firebase_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @firebase/logger */ \"./node_modules/@firebase/logger/dist/index.esm2017.js\");\n/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @firebase/util */ \"./node_modules/@firebase/util/dist/index.esm2017.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"FirebaseError\", function() { return _firebase_util__WEBPACK_IMPORTED_MODULE_2__[\"FirebaseError\"]; });\n\nvar _PLATFORM_LOG_STRING, _ERRORS;\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\n\n\n\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar PlatformLoggerServiceImpl = /*#__PURE__*/function () {\n  function PlatformLoggerServiceImpl(container) {\n    _classCallCheck(this, PlatformLoggerServiceImpl);\n\n    this.container = container;\n  } // In initial implementation, this will be called by installations on\n  // auth token refresh, and installations will send this string.\n\n\n  _createClass(PlatformLoggerServiceImpl, [{\n    key: \"getPlatformInfoString\",\n    value: function getPlatformInfoString() {\n      var providers = this.container.getProviders(); // Loop through providers and get library/version pairs from any that are\n      // version components.\n\n      return providers.map(function (provider) {\n        if (isVersionServiceProvider(provider)) {\n          var service = provider.getImmediate();\n          return \"\".concat(service.library, \"/\").concat(service.version);\n        } else {\n          return null;\n        }\n      }).filter(function (logString) {\n        return logString;\n      }).join(' ');\n    }\n  }]);\n\n  return PlatformLoggerServiceImpl;\n}();\n/**\r\n *\r\n * @param provider check if this provider provides a VersionService\r\n *\r\n * NOTE: Using Provider<'app-version'> is a hack to indicate that the provider\r\n * provides VersionService. The provider is not necessarily a 'app-version'\r\n * provider.\r\n */\n\n\nfunction isVersionServiceProvider(provider) {\n  var component = provider.getComponent();\n  return (component === null || component === void 0 ? void 0 : component.type) === \"VERSION\"\n  /* VERSION */\n  ;\n}\n\nvar name$o = \"@firebase/app\";\nvar version$1 = \"0.7.4\";\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar logger = new _firebase_logger__WEBPACK_IMPORTED_MODULE_1__[\"Logger\"]('@firebase/app');\nvar name$n = \"@firebase/app-compat\";\nvar name$m = \"@firebase/analytics-compat\";\nvar name$l = \"@firebase/analytics\";\nvar name$k = \"@firebase/app-check-compat\";\nvar name$j = \"@firebase/app-check\";\nvar name$i = \"@firebase/auth\";\nvar name$h = \"@firebase/auth-compat\";\nvar name$g = \"@firebase/database\";\nvar name$f = \"@firebase/database-compat\";\nvar name$e = \"@firebase/functions\";\nvar name$d = \"@firebase/functions-compat\";\nvar name$c = \"@firebase/installations\";\nvar name$b = \"@firebase/installations-compat\";\nvar name$a = \"@firebase/messaging\";\nvar name$9 = \"@firebase/messaging-compat\";\nvar name$8 = \"@firebase/performance\";\nvar name$7 = \"@firebase/performance-compat\";\nvar name$6 = \"@firebase/remote-config\";\nvar name$5 = \"@firebase/remote-config-compat\";\nvar name$4 = \"@firebase/storage\";\nvar name$3 = \"@firebase/storage-compat\";\nvar name$2 = \"@firebase/firestore\";\nvar name$1 = \"@firebase/firestore-compat\";\nvar name = \"firebase\";\nvar version = \"9.1.3\";\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * The default app name\r\n *\r\n * @internal\r\n */\n\nvar DEFAULT_ENTRY_NAME = '[DEFAULT]';\nvar PLATFORM_LOG_STRING = (_PLATFORM_LOG_STRING = {}, _defineProperty(_PLATFORM_LOG_STRING, name$o, 'fire-core'), _defineProperty(_PLATFORM_LOG_STRING, name$n, 'fire-core-compat'), _defineProperty(_PLATFORM_LOG_STRING, name$l, 'fire-analytics'), _defineProperty(_PLATFORM_LOG_STRING, name$m, 'fire-analytics-compat'), _defineProperty(_PLATFORM_LOG_STRING, name$j, 'fire-app-check'), _defineProperty(_PLATFORM_LOG_STRING, name$k, 'fire-app-check-compat'), _defineProperty(_PLATFORM_LOG_STRING, name$i, 'fire-auth'), _defineProperty(_PLATFORM_LOG_STRING, name$h, 'fire-auth-compat'), _defineProperty(_PLATFORM_LOG_STRING, name$g, 'fire-rtdb'), _defineProperty(_PLATFORM_LOG_STRING, name$f, 'fire-rtdb-compat'), _defineProperty(_PLATFORM_LOG_STRING, name$e, 'fire-fn'), _defineProperty(_PLATFORM_LOG_STRING, name$d, 'fire-fn-compat'), _defineProperty(_PLATFORM_LOG_STRING, name$c, 'fire-iid'), _defineProperty(_PLATFORM_LOG_STRING, name$b, 'fire-iid-compat'), _defineProperty(_PLATFORM_LOG_STRING, name$a, 'fire-fcm'), _defineProperty(_PLATFORM_LOG_STRING, name$9, 'fire-fcm-compat'), _defineProperty(_PLATFORM_LOG_STRING, name$8, 'fire-perf'), _defineProperty(_PLATFORM_LOG_STRING, name$7, 'fire-perf-compat'), _defineProperty(_PLATFORM_LOG_STRING, name$6, 'fire-rc'), _defineProperty(_PLATFORM_LOG_STRING, name$5, 'fire-rc-compat'), _defineProperty(_PLATFORM_LOG_STRING, name$4, 'fire-gcs'), _defineProperty(_PLATFORM_LOG_STRING, name$3, 'fire-gcs-compat'), _defineProperty(_PLATFORM_LOG_STRING, name$2, 'fire-fst'), _defineProperty(_PLATFORM_LOG_STRING, name$1, 'fire-fst-compat'), _defineProperty(_PLATFORM_LOG_STRING, 'fire-js', 'fire-js'), _defineProperty(_PLATFORM_LOG_STRING, name, 'fire-js-all'), _PLATFORM_LOG_STRING);\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * @internal\r\n */\n\nvar _apps = new Map();\n/**\r\n * Registered components.\r\n *\r\n * @internal\r\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nvar _components = new Map();\n/**\r\n * @param component - the component being added to this app's container\r\n *\r\n * @internal\r\n */\n\n\nfunction _addComponent(app, component) {\n  try {\n    app.container.addComponent(component);\n  } catch (e) {\n    logger.debug(\"Component \".concat(component.name, \" failed to register with FirebaseApp \").concat(app.name), e);\n  }\n}\n/**\r\n *\r\n * @internal\r\n */\n\n\nfunction _addOrOverwriteComponent(app, component) {\n  app.container.addOrOverwriteComponent(component);\n}\n/**\r\n *\r\n * @param component - the component to register\r\n * @returns whether or not the component is registered successfully\r\n *\r\n * @internal\r\n */\n\n\nfunction _registerComponent(component) {\n  var componentName = component.name;\n\n  if (_components.has(componentName)) {\n    logger.debug(\"There were multiple attempts to register component \".concat(componentName, \".\"));\n    return false;\n  }\n\n  _components.set(componentName, component); // add the component to existing app instances\n\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = _apps.values()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var app = _step.value;\n\n      _addComponent(app, component);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return true;\n}\n/**\r\n *\r\n * @param app - FirebaseApp instance\r\n * @param name - service name\r\n *\r\n * @returns the provider for the service with the matching name\r\n *\r\n * @internal\r\n */\n\n\nfunction _getProvider(app, name) {\n  return app.container.getProvider(name);\n}\n/**\r\n *\r\n * @param app - FirebaseApp instance\r\n * @param name - service name\r\n * @param instanceIdentifier - service instance identifier in case the service supports multiple instances\r\n *\r\n * @internal\r\n */\n\n\nfunction _removeServiceInstance(app, name) {\n  var instanceIdentifier = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_ENTRY_NAME;\n\n  _getProvider(app, name).clearInstance(instanceIdentifier);\n}\n/**\r\n * Test only\r\n *\r\n * @internal\r\n */\n\n\nfunction _clearComponents() {\n  _components.clear();\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar ERRORS = (_ERRORS = {}, _defineProperty(_ERRORS, \"no-app\"\n/* NO_APP */\n, \"No Firebase App '{$appName}' has been created - \" + 'call Firebase App.initializeApp()'), _defineProperty(_ERRORS, \"bad-app-name\"\n/* BAD_APP_NAME */\n, \"Illegal App name: '{$appName}\"), _defineProperty(_ERRORS, \"duplicate-app\"\n/* DUPLICATE_APP */\n, \"Firebase App named '{$appName}' already exists with different options or config\"), _defineProperty(_ERRORS, \"app-deleted\"\n/* APP_DELETED */\n, \"Firebase App named '{$appName}' already deleted\"), _defineProperty(_ERRORS, \"invalid-app-argument\"\n/* INVALID_APP_ARGUMENT */\n, 'firebase.{$appName}() takes either no argument or a ' + 'Firebase App instance.'), _defineProperty(_ERRORS, \"invalid-log-argument\"\n/* INVALID_LOG_ARGUMENT */\n, 'First argument to `onLog` must be null or a function.'), _ERRORS);\nvar ERROR_FACTORY = new _firebase_util__WEBPACK_IMPORTED_MODULE_2__[\"ErrorFactory\"]('app', 'Firebase', ERRORS);\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar FirebaseAppImpl = /*#__PURE__*/function () {\n  function FirebaseAppImpl(options, config, container) {\n    var _this = this;\n\n    _classCallCheck(this, FirebaseAppImpl);\n\n    this._isDeleted = false;\n    this._options = Object.assign({}, options);\n    this._config = Object.assign({}, config);\n    this._name = config.name;\n    this._automaticDataCollectionEnabled = config.automaticDataCollectionEnabled;\n    this._container = container;\n    this.container.addComponent(new _firebase_component__WEBPACK_IMPORTED_MODULE_0__[\"Component\"]('app', function () {\n      return _this;\n    }, \"PUBLIC\"\n    /* PUBLIC */\n    ));\n  }\n\n  _createClass(FirebaseAppImpl, [{\n    key: \"checkDestroyed\",\n\n    /**\r\n     * This function will throw an Error if the App has already been deleted -\r\n     * use before performing API actions on the App.\r\n     */\n    value: function checkDestroyed() {\n      if (this.isDeleted) {\n        throw ERROR_FACTORY.create(\"app-deleted\"\n        /* APP_DELETED */\n        , {\n          appName: this._name\n        });\n      }\n    }\n  }, {\n    key: \"automaticDataCollectionEnabled\",\n    get: function get() {\n      this.checkDestroyed();\n      return this._automaticDataCollectionEnabled;\n    },\n    set: function set(val) {\n      this.checkDestroyed();\n      this._automaticDataCollectionEnabled = val;\n    }\n  }, {\n    key: \"name\",\n    get: function get() {\n      this.checkDestroyed();\n      return this._name;\n    }\n  }, {\n    key: \"options\",\n    get: function get() {\n      this.checkDestroyed();\n      return this._options;\n    }\n  }, {\n    key: \"config\",\n    get: function get() {\n      this.checkDestroyed();\n      return this._config;\n    }\n  }, {\n    key: \"container\",\n    get: function get() {\n      return this._container;\n    }\n  }, {\n    key: \"isDeleted\",\n    get: function get() {\n      return this._isDeleted;\n    },\n    set: function set(val) {\n      this._isDeleted = val;\n    }\n  }]);\n\n  return FirebaseAppImpl;\n}();\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * The current SDK version.\r\n *\r\n * @public\r\n */\n\n\nvar SDK_VERSION = version;\n\nfunction initializeApp(options) {\n  var rawConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (_typeof(rawConfig) !== 'object') {\n    var _name = rawConfig;\n    rawConfig = {\n      name: _name\n    };\n  }\n\n  var config = Object.assign({\n    name: DEFAULT_ENTRY_NAME,\n    automaticDataCollectionEnabled: false\n  }, rawConfig);\n  var name = config.name;\n\n  if (typeof name !== 'string' || !name) {\n    throw ERROR_FACTORY.create(\"bad-app-name\"\n    /* BAD_APP_NAME */\n    , {\n      appName: String(name)\n    });\n  }\n\n  var existingApp = _apps.get(name);\n\n  if (existingApp) {\n    // return the existing app if options and config deep equal the ones in the existing app.\n    if (Object(_firebase_util__WEBPACK_IMPORTED_MODULE_2__[\"deepEqual\"])(options, existingApp.options) && Object(_firebase_util__WEBPACK_IMPORTED_MODULE_2__[\"deepEqual\"])(config, existingApp.config)) {\n      return existingApp;\n    } else {\n      throw ERROR_FACTORY.create(\"duplicate-app\"\n      /* DUPLICATE_APP */\n      , {\n        appName: name\n      });\n    }\n  }\n\n  var container = new _firebase_component__WEBPACK_IMPORTED_MODULE_0__[\"ComponentContainer\"](name);\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = _components.values()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var component = _step2.value;\n      container.addComponent(component);\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  var newApp = new FirebaseAppImpl(options, config, container);\n\n  _apps.set(name, newApp);\n\n  return newApp;\n}\n/**\r\n * Retrieves a {@link @firebase/app#FirebaseApp} instance.\r\n *\r\n * When called with no arguments, the default app is returned. When an app name\r\n * is provided, the app corresponding to that name is returned.\r\n *\r\n * An exception is thrown if the app being retrieved has not yet been\r\n * initialized.\r\n *\r\n * @example\r\n * ```javascript\r\n * // Return the default app\r\n * const app = getApp();\r\n * ```\r\n *\r\n * @example\r\n * ```javascript\r\n * // Return a named app\r\n * const otherApp = getApp(\"otherApp\");\r\n * ```\r\n *\r\n * @param name - Optional name of the app to return. If no name is\r\n *   provided, the default is `\"[DEFAULT]\"`.\r\n *\r\n * @returns The app corresponding to the provided app name.\r\n *   If no app name is provided, the default app is returned.\r\n *\r\n * @public\r\n */\n\n\nfunction getApp() {\n  var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_ENTRY_NAME;\n\n  var app = _apps.get(name);\n\n  if (!app) {\n    throw ERROR_FACTORY.create(\"no-app\"\n    /* NO_APP */\n    , {\n      appName: name\n    });\n  }\n\n  return app;\n}\n/**\r\n * A (read-only) array of all initialized apps.\r\n * @public\r\n */\n\n\nfunction getApps() {\n  return Array.from(_apps.values());\n}\n/**\r\n * Renders this app unusable and frees the resources of all associated\r\n * services.\r\n *\r\n * @example\r\n * ```javascript\r\n * deleteApp(app)\r\n *   .then(function() {\r\n *     console.log(\"App deleted successfully\");\r\n *   })\r\n *   .catch(function(error) {\r\n *     console.log(\"Error deleting app:\", error);\r\n *   });\r\n * ```\r\n *\r\n * @public\r\n */\n\n\nfunction deleteApp(app) {\n  var name;\n  return regeneratorRuntime.async(function deleteApp$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          name = app.name;\n\n          if (!_apps.has(name)) {\n            _context.next = 6;\n            break;\n          }\n\n          _apps[\"delete\"](name);\n\n          _context.next = 5;\n          return regeneratorRuntime.awrap(Promise.all(app.container.getProviders().map(function (provider) {\n            return provider[\"delete\"]();\n          })));\n\n        case 5:\n          app.isDeleted = true;\n\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\n/**\r\n * Registers a library's name and version for platform logging purposes.\r\n * @param library - Name of 1p or 3p library (e.g. firestore, angularfire)\r\n * @param version - Current version of that library.\r\n * @param variant - Bundle variant, e.g., node, rn, etc.\r\n *\r\n * @public\r\n */\n\n\nfunction registerVersion(libraryKeyOrName, version, variant) {\n  var _a; // TODO: We can use this check to whitelist strings when/if we set up\n  // a good whitelist system.\n\n\n  var library = (_a = PLATFORM_LOG_STRING[libraryKeyOrName]) !== null && _a !== void 0 ? _a : libraryKeyOrName;\n\n  if (variant) {\n    library += \"-\".concat(variant);\n  }\n\n  var libraryMismatch = library.match(/\\s|\\//);\n  var versionMismatch = version.match(/\\s|\\//);\n\n  if (libraryMismatch || versionMismatch) {\n    var warning = [\"Unable to register library \\\"\".concat(library, \"\\\" with version \\\"\").concat(version, \"\\\":\")];\n\n    if (libraryMismatch) {\n      warning.push(\"library name \\\"\".concat(library, \"\\\" contains illegal characters (whitespace or \\\"/\\\")\"));\n    }\n\n    if (libraryMismatch && versionMismatch) {\n      warning.push('and');\n    }\n\n    if (versionMismatch) {\n      warning.push(\"version name \\\"\".concat(version, \"\\\" contains illegal characters (whitespace or \\\"/\\\")\"));\n    }\n\n    logger.warn(warning.join(' '));\n    return;\n  }\n\n  _registerComponent(new _firebase_component__WEBPACK_IMPORTED_MODULE_0__[\"Component\"](\"\".concat(library, \"-version\"), function () {\n    return {\n      library: library,\n      version: version\n    };\n  }, \"VERSION\"\n  /* VERSION */\n  ));\n}\n/**\r\n * Sets log handler for all Firebase SDKs.\r\n * @param logCallback - An optional custom log handler that executes user code whenever\r\n * the Firebase SDK makes a logging call.\r\n *\r\n * @public\r\n */\n\n\nfunction onLog(logCallback, options) {\n  if (logCallback !== null && typeof logCallback !== 'function') {\n    throw ERROR_FACTORY.create(\"invalid-log-argument\"\n    /* INVALID_LOG_ARGUMENT */\n    );\n  }\n\n  Object(_firebase_logger__WEBPACK_IMPORTED_MODULE_1__[\"setUserLogHandler\"])(logCallback, options);\n}\n/**\r\n * Sets log level for all Firebase SDKs.\r\n *\r\n * All of the log types above the current log level are captured (i.e. if\r\n * you set the log level to `info`, errors are logged, but `debug` and\r\n * `verbose` logs are not).\r\n *\r\n * @public\r\n */\n\n\nfunction setLogLevel(logLevel) {\n  Object(_firebase_logger__WEBPACK_IMPORTED_MODULE_1__[\"setLogLevel\"])(logLevel);\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction registerCoreComponents(variant) {\n  _registerComponent(new _firebase_component__WEBPACK_IMPORTED_MODULE_0__[\"Component\"]('platform-logger', function (container) {\n    return new PlatformLoggerServiceImpl(container);\n  }, \"PRIVATE\"\n  /* PRIVATE */\n  )); // Register `app` package.\n\n\n  registerVersion(name$o, version$1, variant); // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\n\n  registerVersion(name$o, version$1, 'esm2017'); // Register platform SDK identifier (no version).\n\n  registerVersion('fire-js', '');\n}\n/**\r\n * Firebase App\r\n *\r\n * @remarks This package coordinates the communication between the different Firebase components\r\n * @packageDocumentation\r\n */\n\n\nregisterCoreComponents('');\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2FwcC9kaXN0L2luZGV4LmVzbTIwMTcuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vc3JjL3BsYXRmb3JtTG9nZ2VyU2VydmljZS50cz8wNGE0Iiwid2VicGFjazovLy8uLi9zcmMvbG9nZ2VyLnRzPzExZDkiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9jb25zdGFudHMudHM/MzViMCIsIndlYnBhY2s6Ly8vLi4vc3JjL2ludGVybmFsLnRzPzVhNDIiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9lcnJvcnMudHM/M2Q1YiIsIndlYnBhY2s6Ly8vLi4vc3JjL2ZpcmViYXNlQXBwLnRzP2IzZDUiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9hcGkudHM/YWQxNSIsIndlYnBhY2s6Ly8vLi4vc3JjL3JlZ2lzdGVyQ29yZUNvbXBvbmVudHMudHM/OTE0NCIsIndlYnBhY2s6Ly8vLi4vc3JjL2luZGV4LnRzPzZmMzciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgQ29tcG9uZW50Q29udGFpbmVyLFxuICBDb21wb25lbnRUeXBlLFxuICBQcm92aWRlcixcbiAgTmFtZVxufSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IFBsYXRmb3JtTG9nZ2VyU2VydmljZSwgVmVyc2lvblNlcnZpY2UgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwgaW1wbGVtZW50cyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2Uge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGNvbnRhaW5lcjogQ29tcG9uZW50Q29udGFpbmVyKSB7fVxuICAvLyBJbiBpbml0aWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGJ5IGluc3RhbGxhdGlvbnMgb25cbiAgLy8gYXV0aCB0b2tlbiByZWZyZXNoLCBhbmQgaW5zdGFsbGF0aW9ucyB3aWxsIHNlbmQgdGhpcyBzdHJpbmcuXG4gIGdldFBsYXRmb3JtSW5mb1N0cmluZygpOiBzdHJpbmcge1xuICAgIGNvbnN0IHByb3ZpZGVycyA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpO1xuICAgIC8vIExvb3AgdGhyb3VnaCBwcm92aWRlcnMgYW5kIGdldCBsaWJyYXJ5L3ZlcnNpb24gcGFpcnMgZnJvbSBhbnkgdGhhdCBhcmVcbiAgICAvLyB2ZXJzaW9uIGNvbXBvbmVudHMuXG4gICAgcmV0dXJuIHByb3ZpZGVyc1xuICAgICAgLm1hcChwcm92aWRlciA9PiB7XG4gICAgICAgIGlmIChpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpKSB7XG4gICAgICAgICAgY29uc3Qgc2VydmljZSA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpIGFzIFZlcnNpb25TZXJ2aWNlO1xuICAgICAgICAgIHJldHVybiBgJHtzZXJ2aWNlLmxpYnJhcnl9LyR7c2VydmljZS52ZXJzaW9ufWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuZmlsdGVyKGxvZ1N0cmluZyA9PiBsb2dTdHJpbmcpXG4gICAgICAuam9pbignICcpO1xuICB9XG59XG4vKipcbiAqXG4gKiBAcGFyYW0gcHJvdmlkZXIgY2hlY2sgaWYgdGhpcyBwcm92aWRlciBwcm92aWRlcyBhIFZlcnNpb25TZXJ2aWNlXG4gKlxuICogTk9URTogVXNpbmcgUHJvdmlkZXI8J2FwcC12ZXJzaW9uJz4gaXMgYSBoYWNrIHRvIGluZGljYXRlIHRoYXQgdGhlIHByb3ZpZGVyXG4gKiBwcm92aWRlcyBWZXJzaW9uU2VydmljZS4gVGhlIHByb3ZpZGVyIGlzIG5vdCBuZWNlc3NhcmlseSBhICdhcHAtdmVyc2lvbidcbiAqIHByb3ZpZGVyLlxuICovXG5mdW5jdGlvbiBpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXI6IFByb3ZpZGVyPE5hbWU+KTogYm9vbGVhbiB7XG4gIGNvbnN0IGNvbXBvbmVudCA9IHByb3ZpZGVyLmdldENvbXBvbmVudCgpO1xuICByZXR1cm4gY29tcG9uZW50Py50eXBlID09PSBDb21wb25lbnRUeXBlLlZFUlNJT047XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcblxuZXhwb3J0IGNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoJ0BmaXJlYmFzZS9hcHAnKTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IG5hbWUgYXMgYXBwTmFtZSB9IGZyb20gJy4uL3BhY2thZ2UuanNvbic7XG5pbXBvcnQgeyBuYW1lIGFzIGFwcENvbXBhdE5hbWUgfSBmcm9tICcuLi8uLi9hcHAtY29tcGF0L3BhY2thZ2UuanNvbic7XG5pbXBvcnQgeyBuYW1lIGFzIGFuYWx5dGljc0NvbXBhdE5hbWUgfSBmcm9tICcuLi8uLi8uLi9wYWNrYWdlcy9hbmFseXRpY3MtY29tcGF0L3BhY2thZ2UuanNvbic7XG5pbXBvcnQgeyBuYW1lIGFzIGFuYWx5dGljc05hbWUgfSBmcm9tICcuLi8uLi8uLi9wYWNrYWdlcy9hbmFseXRpY3MvcGFja2FnZS5qc29uJztcbmltcG9ydCB7IG5hbWUgYXMgYXBwQ2hlY2tDb21wYXROYW1lIH0gZnJvbSAnLi4vLi4vLi4vcGFja2FnZXMvYXBwLWNoZWNrLWNvbXBhdC9wYWNrYWdlLmpzb24nO1xuaW1wb3J0IHsgbmFtZSBhcyBhcHBDaGVja05hbWUgfSBmcm9tICcuLi8uLi8uLi9wYWNrYWdlcy9hcHAtY2hlY2svcGFja2FnZS5qc29uJztcbmltcG9ydCB7IG5hbWUgYXMgYXV0aE5hbWUgfSBmcm9tICcuLi8uLi8uLi9wYWNrYWdlcy9hdXRoL3BhY2thZ2UuanNvbic7XG5pbXBvcnQgeyBuYW1lIGFzIGF1dGhDb21wYXROYW1lIH0gZnJvbSAnLi4vLi4vLi4vcGFja2FnZXMvYXV0aC1jb21wYXQvcGFja2FnZS5qc29uJztcbmltcG9ydCB7IG5hbWUgYXMgZGF0YWJhc2VOYW1lIH0gZnJvbSAnLi4vLi4vLi4vcGFja2FnZXMvZGF0YWJhc2UvcGFja2FnZS5qc29uJztcbmltcG9ydCB7IG5hbWUgYXMgZGF0YWJhc2VDb21wYXROYW1lIH0gZnJvbSAnLi4vLi4vLi4vcGFja2FnZXMvZGF0YWJhc2UtY29tcGF0L3BhY2thZ2UuanNvbic7XG5pbXBvcnQgeyBuYW1lIGFzIGZ1bmN0aW9uc05hbWUgfSBmcm9tICcuLi8uLi8uLi9wYWNrYWdlcy9mdW5jdGlvbnMvcGFja2FnZS5qc29uJztcbmltcG9ydCB7IG5hbWUgYXMgZnVuY3Rpb25zQ29tcGF0TmFtZSB9IGZyb20gJy4uLy4uLy4uL3BhY2thZ2VzL2Z1bmN0aW9ucy1jb21wYXQvcGFja2FnZS5qc29uJztcbmltcG9ydCB7IG5hbWUgYXMgaW5zdGFsbGF0aW9uc05hbWUgfSBmcm9tICcuLi8uLi8uLi9wYWNrYWdlcy9pbnN0YWxsYXRpb25zL3BhY2thZ2UuanNvbic7XG5pbXBvcnQgeyBuYW1lIGFzIGluc3RhbGxhdGlvbnNDb21wYXROYW1lIH0gZnJvbSAnLi4vLi4vLi4vcGFja2FnZXMvaW5zdGFsbGF0aW9ucy1jb21wYXQvcGFja2FnZS5qc29uJztcbmltcG9ydCB7IG5hbWUgYXMgbWVzc2FnaW5nTmFtZSB9IGZyb20gJy4uLy4uLy4uL3BhY2thZ2VzL21lc3NhZ2luZy9wYWNrYWdlLmpzb24nO1xuaW1wb3J0IHsgbmFtZSBhcyBtZXNzYWdpbmdDb21wYXROYW1lIH0gZnJvbSAnLi4vLi4vLi4vcGFja2FnZXMvbWVzc2FnaW5nLWNvbXBhdC9wYWNrYWdlLmpzb24nO1xuaW1wb3J0IHsgbmFtZSBhcyBwZXJmb3JtYW5jZU5hbWUgfSBmcm9tICcuLi8uLi8uLi9wYWNrYWdlcy9wZXJmb3JtYW5jZS9wYWNrYWdlLmpzb24nO1xuaW1wb3J0IHsgbmFtZSBhcyBwZXJmb3JtYW5jZUNvbXBhdE5hbWUgfSBmcm9tICcuLi8uLi8uLi9wYWNrYWdlcy9wZXJmb3JtYW5jZS1jb21wYXQvcGFja2FnZS5qc29uJztcbmltcG9ydCB7IG5hbWUgYXMgcmVtb3RlQ29uZmlnTmFtZSB9IGZyb20gJy4uLy4uLy4uL3BhY2thZ2VzL3JlbW90ZS1jb25maWcvcGFja2FnZS5qc29uJztcbmltcG9ydCB7IG5hbWUgYXMgcmVtb3RlQ29uZmlnQ29tcGF0TmFtZSB9IGZyb20gJy4uLy4uLy4uL3BhY2thZ2VzL3JlbW90ZS1jb25maWctY29tcGF0L3BhY2thZ2UuanNvbic7XG5pbXBvcnQgeyBuYW1lIGFzIHN0b3JhZ2VOYW1lIH0gZnJvbSAnLi4vLi4vLi4vcGFja2FnZXMvc3RvcmFnZS9wYWNrYWdlLmpzb24nO1xuaW1wb3J0IHsgbmFtZSBhcyBzdG9yYWdlQ29tcGF0TmFtZSB9IGZyb20gJy4uLy4uLy4uL3BhY2thZ2VzL3N0b3JhZ2UtY29tcGF0L3BhY2thZ2UuanNvbic7XG5pbXBvcnQgeyBuYW1lIGFzIGZpcmVzdG9yZU5hbWUgfSBmcm9tICcuLi8uLi8uLi9wYWNrYWdlcy9maXJlc3RvcmUvcGFja2FnZS5qc29uJztcbmltcG9ydCB7IG5hbWUgYXMgZmlyZXN0b3JlQ29tcGF0TmFtZSB9IGZyb20gJy4uLy4uLy4uL3BhY2thZ2VzL2ZpcmVzdG9yZS1jb21wYXQvcGFja2FnZS5qc29uJztcbmltcG9ydCB7IG5hbWUgYXMgcGFja2FnZU5hbWUgfSBmcm9tICcuLi8uLi8uLi9wYWNrYWdlcy9maXJlYmFzZS9wYWNrYWdlLmpzb24nO1xuXG4vKipcbiAqIFRoZSBkZWZhdWx0IGFwcCBuYW1lXG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcblxuZXhwb3J0IGNvbnN0IFBMQVRGT1JNX0xPR19TVFJJTkcgPSB7XG4gIFthcHBOYW1lXTogJ2ZpcmUtY29yZScsXG4gIFthcHBDb21wYXROYW1lXTogJ2ZpcmUtY29yZS1jb21wYXQnLFxuICBbYW5hbHl0aWNzTmFtZV06ICdmaXJlLWFuYWx5dGljcycsXG4gIFthbmFseXRpY3NDb21wYXROYW1lXTogJ2ZpcmUtYW5hbHl0aWNzLWNvbXBhdCcsXG4gIFthcHBDaGVja05hbWVdOiAnZmlyZS1hcHAtY2hlY2snLFxuICBbYXBwQ2hlY2tDb21wYXROYW1lXTogJ2ZpcmUtYXBwLWNoZWNrLWNvbXBhdCcsXG4gIFthdXRoTmFtZV06ICdmaXJlLWF1dGgnLFxuICBbYXV0aENvbXBhdE5hbWVdOiAnZmlyZS1hdXRoLWNvbXBhdCcsXG4gIFtkYXRhYmFzZU5hbWVdOiAnZmlyZS1ydGRiJyxcbiAgW2RhdGFiYXNlQ29tcGF0TmFtZV06ICdmaXJlLXJ0ZGItY29tcGF0JyxcbiAgW2Z1bmN0aW9uc05hbWVdOiAnZmlyZS1mbicsXG4gIFtmdW5jdGlvbnNDb21wYXROYW1lXTogJ2ZpcmUtZm4tY29tcGF0JyxcbiAgW2luc3RhbGxhdGlvbnNOYW1lXTogJ2ZpcmUtaWlkJyxcbiAgW2luc3RhbGxhdGlvbnNDb21wYXROYW1lXTogJ2ZpcmUtaWlkLWNvbXBhdCcsXG4gIFttZXNzYWdpbmdOYW1lXTogJ2ZpcmUtZmNtJyxcbiAgW21lc3NhZ2luZ0NvbXBhdE5hbWVdOiAnZmlyZS1mY20tY29tcGF0JyxcbiAgW3BlcmZvcm1hbmNlTmFtZV06ICdmaXJlLXBlcmYnLFxuICBbcGVyZm9ybWFuY2VDb21wYXROYW1lXTogJ2ZpcmUtcGVyZi1jb21wYXQnLFxuICBbcmVtb3RlQ29uZmlnTmFtZV06ICdmaXJlLXJjJyxcbiAgW3JlbW90ZUNvbmZpZ0NvbXBhdE5hbWVdOiAnZmlyZS1yYy1jb21wYXQnLFxuICBbc3RvcmFnZU5hbWVdOiAnZmlyZS1nY3MnLFxuICBbc3RvcmFnZUNvbXBhdE5hbWVdOiAnZmlyZS1nY3MtY29tcGF0JyxcbiAgW2ZpcmVzdG9yZU5hbWVdOiAnZmlyZS1mc3QnLFxuICBbZmlyZXN0b3JlQ29tcGF0TmFtZV06ICdmaXJlLWZzdC1jb21wYXQnLFxuICAnZmlyZS1qcyc6ICdmaXJlLWpzJywgLy8gUGxhdGZvcm0gaWRlbnRpZmllciBmb3IgSlMgU0RLLlxuICBbcGFja2FnZU5hbWVdOiAnZmlyZS1qcy1hbGwnXG59IGFzIGNvbnN0O1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRmlyZWJhc2VBcHAgfSBmcm9tICcuL3B1YmxpYy10eXBlcyc7XG5pbXBvcnQgeyBDb21wb25lbnQsIFByb3ZpZGVyLCBOYW1lIH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL2xvZ2dlcic7XG5pbXBvcnQgeyBERUZBVUxUX0VOVFJZX05BTUUgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBGaXJlYmFzZUFwcEltcGwgfSBmcm9tICcuL2ZpcmViYXNlQXBwJztcblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNvbnN0IF9hcHBzID0gbmV3IE1hcDxzdHJpbmcsIEZpcmViYXNlQXBwPigpO1xuXG4vKipcbiAqIFJlZ2lzdGVyZWQgY29tcG9uZW50cy5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmV4cG9ydCBjb25zdCBfY29tcG9uZW50cyA9IG5ldyBNYXA8c3RyaW5nLCBDb21wb25lbnQ8YW55Pj4oKTtcblxuLyoqXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCBiZWluZyBhZGRlZCB0byB0aGlzIGFwcCdzIGNvbnRhaW5lclxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gX2FkZENvbXBvbmVudDxUIGV4dGVuZHMgTmFtZT4oXG4gIGFwcDogRmlyZWJhc2VBcHAsXG4gIGNvbXBvbmVudDogQ29tcG9uZW50PFQ+XG4pOiB2b2lkIHtcbiAgdHJ5IHtcbiAgICAoYXBwIGFzIEZpcmViYXNlQXBwSW1wbCkuY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmYWlsZWQgdG8gcmVnaXN0ZXIgd2l0aCBGaXJlYmFzZUFwcCAke2FwcC5uYW1lfWAsXG4gICAgICBlXG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChcbiAgYXBwOiBGaXJlYmFzZUFwcCxcbiAgY29tcG9uZW50OiBDb21wb25lbnRcbik6IHZvaWQge1xuICAoYXBwIGFzIEZpcmViYXNlQXBwSW1wbCkuY29udGFpbmVyLmFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IHRvIHJlZ2lzdGVyXG4gKiBAcmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgY29tcG9uZW50IGlzIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5XG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfcmVnaXN0ZXJDb21wb25lbnQ8VCBleHRlbmRzIE5hbWU+KFxuICBjb21wb25lbnQ6IENvbXBvbmVudDxUPlxuKTogYm9vbGVhbiB7XG4gIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQubmFtZTtcbiAgaWYgKF9jb21wb25lbnRzLmhhcyhjb21wb25lbnROYW1lKSkge1xuICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgIGBUaGVyZSB3ZXJlIG11bHRpcGxlIGF0dGVtcHRzIHRvIHJlZ2lzdGVyIGNvbXBvbmVudCAke2NvbXBvbmVudE5hbWV9LmBcbiAgICApO1xuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgX2NvbXBvbmVudHMuc2V0KGNvbXBvbmVudE5hbWUsIGNvbXBvbmVudCk7XG5cbiAgLy8gYWRkIHRoZSBjb21wb25lbnQgdG8gZXhpc3RpbmcgYXBwIGluc3RhbmNlc1xuICBmb3IgKGNvbnN0IGFwcCBvZiBfYXBwcy52YWx1ZXMoKSkge1xuICAgIF9hZGRDb21wb25lbnQoYXBwIGFzIEZpcmViYXNlQXBwSW1wbCwgY29tcG9uZW50KTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXG4gKlxuICogQHJldHVybnMgdGhlIHByb3ZpZGVyIGZvciB0aGUgc2VydmljZSB3aXRoIHRoZSBtYXRjaGluZyBuYW1lXG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfZ2V0UHJvdmlkZXI8VCBleHRlbmRzIE5hbWU+KFxuICBhcHA6IEZpcmViYXNlQXBwLFxuICBuYW1lOiBUXG4pOiBQcm92aWRlcjxUPiB7XG4gIHJldHVybiAoYXBwIGFzIEZpcmViYXNlQXBwSW1wbCkuY29udGFpbmVyLmdldFByb3ZpZGVyKG5hbWUpO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXG4gKiBAcGFyYW0gaW5zdGFuY2VJZGVudGlmaWVyIC0gc2VydmljZSBpbnN0YW5jZSBpZGVudGlmaWVyIGluIGNhc2UgdGhlIHNlcnZpY2Ugc3VwcG9ydHMgbXVsdGlwbGUgaW5zdGFuY2VzXG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfcmVtb3ZlU2VydmljZUluc3RhbmNlPFQgZXh0ZW5kcyBOYW1lPihcbiAgYXBwOiBGaXJlYmFzZUFwcCxcbiAgbmFtZTogVCxcbiAgaW5zdGFuY2VJZGVudGlmaWVyOiBzdHJpbmcgPSBERUZBVUxUX0VOVFJZX05BTUVcbik6IHZvaWQge1xuICBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKS5jbGVhckluc3RhbmNlKGluc3RhbmNlSWRlbnRpZmllcik7XG59XG5cbi8qKlxuICogVGVzdCBvbmx5XG4gKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfY2xlYXJDb21wb25lbnRzKCk6IHZvaWQge1xuICBfY29tcG9uZW50cy5jbGVhcigpO1xufVxuXG4vKipcbiAqIEV4cG9ydGVkIGluIG9yZGVyIHRvIGJlIHVzZWQgaW4gYXBwLWNvbXBhdCBwYWNrYWdlXG4gKi9cbmV4cG9ydCB7IERFRkFVTFRfRU5UUllfTkFNRSBhcyBfREVGQVVMVF9FTlRSWV9OQU1FIH07XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIEVycm9yTWFwIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG5leHBvcnQgY29uc3QgZW51bSBBcHBFcnJvciB7XG4gIE5PX0FQUCA9ICduby1hcHAnLFxuICBCQURfQVBQX05BTUUgPSAnYmFkLWFwcC1uYW1lJyxcbiAgRFVQTElDQVRFX0FQUCA9ICdkdXBsaWNhdGUtYXBwJyxcbiAgQVBQX0RFTEVURUQgPSAnYXBwLWRlbGV0ZWQnLFxuICBJTlZBTElEX0FQUF9BUkdVTUVOVCA9ICdpbnZhbGlkLWFwcC1hcmd1bWVudCcsXG4gIElOVkFMSURfTE9HX0FSR1VNRU5UID0gJ2ludmFsaWQtbG9nLWFyZ3VtZW50J1xufVxuXG5jb25zdCBFUlJPUlM6IEVycm9yTWFwPEFwcEVycm9yPiA9IHtcbiAgW0FwcEVycm9yLk5PX0FQUF06XG4gICAgXCJObyBGaXJlYmFzZSBBcHAgJ3skYXBwTmFtZX0nIGhhcyBiZWVuIGNyZWF0ZWQgLSBcIiArXG4gICAgJ2NhbGwgRmlyZWJhc2UgQXBwLmluaXRpYWxpemVBcHAoKScsXG4gIFtBcHBFcnJvci5CQURfQVBQX05BTUVdOiBcIklsbGVnYWwgQXBwIG5hbWU6ICd7JGFwcE5hbWV9XCIsXG4gIFtBcHBFcnJvci5EVVBMSUNBVEVfQVBQXTpcbiAgICBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBleGlzdHMgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucyBvciBjb25maWdcIixcbiAgW0FwcEVycm9yLkFQUF9ERUxFVEVEXTogXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZGVsZXRlZFwiLFxuICBbQXBwRXJyb3IuSU5WQUxJRF9BUFBfQVJHVU1FTlRdOlxuICAgICdmaXJlYmFzZS57JGFwcE5hbWV9KCkgdGFrZXMgZWl0aGVyIG5vIGFyZ3VtZW50IG9yIGEgJyArXG4gICAgJ0ZpcmViYXNlIEFwcCBpbnN0YW5jZS4nLFxuICBbQXBwRXJyb3IuSU5WQUxJRF9MT0dfQVJHVU1FTlRdOlxuICAgICdGaXJzdCBhcmd1bWVudCB0byBgb25Mb2dgIG11c3QgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLidcbn07XG5cbmludGVyZmFjZSBFcnJvclBhcmFtcyB7XG4gIFtBcHBFcnJvci5OT19BUFBdOiB7IGFwcE5hbWU6IHN0cmluZyB9O1xuICBbQXBwRXJyb3IuQkFEX0FQUF9OQU1FXTogeyBhcHBOYW1lOiBzdHJpbmcgfTtcbiAgW0FwcEVycm9yLkRVUExJQ0FURV9BUFBdOiB7IGFwcE5hbWU6IHN0cmluZyB9O1xuICBbQXBwRXJyb3IuQVBQX0RFTEVURURdOiB7IGFwcE5hbWU6IHN0cmluZyB9O1xuICBbQXBwRXJyb3IuSU5WQUxJRF9BUFBfQVJHVU1FTlRdOiB7IGFwcE5hbWU6IHN0cmluZyB9O1xufVxuXG5leHBvcnQgY29uc3QgRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3Rvcnk8QXBwRXJyb3IsIEVycm9yUGFyYW1zPihcbiAgJ2FwcCcsXG4gICdGaXJlYmFzZScsXG4gIEVSUk9SU1xuKTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIEZpcmViYXNlQXBwLFxuICBGaXJlYmFzZU9wdGlvbnMsXG4gIEZpcmViYXNlQXBwU2V0dGluZ3Ncbn0gZnJvbSAnLi9wdWJsaWMtdHlwZXMnO1xuaW1wb3J0IHtcbiAgQ29tcG9uZW50Q29udGFpbmVyLFxuICBDb21wb25lbnQsXG4gIENvbXBvbmVudFR5cGVcbn0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBFUlJPUl9GQUNUT1JZLCBBcHBFcnJvciB9IGZyb20gJy4vZXJyb3JzJztcblxuZXhwb3J0IGNsYXNzIEZpcmViYXNlQXBwSW1wbCBpbXBsZW1lbnRzIEZpcmViYXNlQXBwIHtcbiAgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uczogRmlyZWJhc2VPcHRpb25zO1xuICBwcml2YXRlIHJlYWRvbmx5IF9uYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBPcmlnaW5hbCBjb25maWcgdmFsdWVzIHBhc3NlZCBpbiBhcyBhIGNvbnN0cnVjdG9yIHBhcmFtZXRlci5cbiAgICogSXQgaXMgb25seSB1c2VkIHRvIGNvbXBhcmUgd2l0aCBhbm90aGVyIGNvbmZpZyBvYmplY3QgdG8gc3VwcG9ydCBpZGVtcG90ZW50IGluaXRpYWxpemVBcHAoKS5cbiAgICpcbiAgICogVXBkYXRpbmcgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIG9uIHRoZSBBcHAgaW5zdGFuY2Ugd2lsbCBub3QgY2hhbmdlIGl0cyB2YWx1ZSBpbiBfY29uZmlnLlxuICAgKi9cbiAgcHJpdmF0ZSByZWFkb25seSBfY29uZmlnOiBSZXF1aXJlZDxGaXJlYmFzZUFwcFNldHRpbmdzPjtcbiAgcHJpdmF0ZSBfYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkOiBib29sZWFuO1xuICBwcml2YXRlIF9pc0RlbGV0ZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSByZWFkb25seSBfY29udGFpbmVyOiBDb21wb25lbnRDb250YWluZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgb3B0aW9uczogRmlyZWJhc2VPcHRpb25zLFxuICAgIGNvbmZpZzogUmVxdWlyZWQ8RmlyZWJhc2VBcHBTZXR0aW5ncz4sXG4gICAgY29udGFpbmVyOiBDb21wb25lbnRDb250YWluZXJcbiAgKSB7XG4gICAgdGhpcy5fb3B0aW9ucyA9IHsgLi4ub3B0aW9ucyB9O1xuICAgIHRoaXMuX2NvbmZpZyA9IHsgLi4uY29uZmlnIH07XG4gICAgdGhpcy5fbmFtZSA9IGNvbmZpZy5uYW1lO1xuICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9XG4gICAgICBjb25maWcuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICB0aGlzLmNvbnRhaW5lci5hZGRDb21wb25lbnQoXG4gICAgICBuZXcgQ29tcG9uZW50KCdhcHAnLCAoKSA9PiB0aGlzLCBDb21wb25lbnRUeXBlLlBVQkxJQylcbiAgICApO1xuICB9XG5cbiAgZ2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XG4gICAgcmV0dXJuIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcbiAgfVxuXG4gIHNldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQodmFsOiBib29sZWFuKSB7XG4gICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xuICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9IHZhbDtcbiAgfVxuXG4gIGdldCBuYW1lKCk6IHN0cmluZyB7XG4gICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xuICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICB9XG5cbiAgZ2V0IG9wdGlvbnMoKTogRmlyZWJhc2VPcHRpb25zIHtcbiAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XG4gICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XG4gIH1cblxuICBnZXQgY29uZmlnKCk6IFJlcXVpcmVkPEZpcmViYXNlQXBwU2V0dGluZ3M+IHtcbiAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcbiAgfVxuXG4gIGdldCBjb250YWluZXIoKTogQ29tcG9uZW50Q29udGFpbmVyIHtcbiAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xuICB9XG5cbiAgZ2V0IGlzRGVsZXRlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faXNEZWxldGVkO1xuICB9XG5cbiAgc2V0IGlzRGVsZXRlZCh2YWw6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9pc0RlbGV0ZWQgPSB2YWw7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiB3aWxsIHRocm93IGFuIEVycm9yIGlmIHRoZSBBcHAgaGFzIGFscmVhZHkgYmVlbiBkZWxldGVkIC1cbiAgICogdXNlIGJlZm9yZSBwZXJmb3JtaW5nIEFQSSBhY3Rpb25zIG9uIHRoZSBBcHAuXG4gICAqL1xuICBwcml2YXRlIGNoZWNrRGVzdHJveWVkKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzRGVsZXRlZCkge1xuICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoQXBwRXJyb3IuQVBQX0RFTEVURUQsIHsgYXBwTmFtZTogdGhpcy5fbmFtZSB9KTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIEZpcmViYXNlQXBwLFxuICBGaXJlYmFzZU9wdGlvbnMsXG4gIEZpcmViYXNlQXBwU2V0dGluZ3Ncbn0gZnJvbSAnLi9wdWJsaWMtdHlwZXMnO1xuaW1wb3J0IHsgREVGQVVMVF9FTlRSWV9OQU1FLCBQTEFURk9STV9MT0dfU1RSSU5HIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgRVJST1JfRkFDVE9SWSwgQXBwRXJyb3IgfSBmcm9tICcuL2Vycm9ycyc7XG5pbXBvcnQge1xuICBDb21wb25lbnRDb250YWluZXIsXG4gIENvbXBvbmVudCxcbiAgTmFtZSxcbiAgQ29tcG9uZW50VHlwZVxufSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tICcuLi8uLi9maXJlYmFzZS9wYWNrYWdlLmpzb24nO1xuaW1wb3J0IHsgRmlyZWJhc2VBcHBJbXBsIH0gZnJvbSAnLi9maXJlYmFzZUFwcCc7XG5pbXBvcnQgeyBfYXBwcywgX2NvbXBvbmVudHMsIF9yZWdpc3RlckNvbXBvbmVudCB9IGZyb20gJy4vaW50ZXJuYWwnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi9sb2dnZXInO1xuaW1wb3J0IHtcbiAgTG9nTGV2ZWxTdHJpbmcsXG4gIHNldExvZ0xldmVsIGFzIHNldExvZ0xldmVsSW1wbCxcbiAgTG9nQ2FsbGJhY2ssXG4gIExvZ09wdGlvbnMsXG4gIHNldFVzZXJMb2dIYW5kbGVyXG59IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgZGVlcEVxdWFsIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG5leHBvcnQgeyBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcbiAqIFRoZSBjdXJyZW50IFNESyB2ZXJzaW9uLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IFNES19WRVJTSU9OID0gdmVyc2lvbjtcblxuLyoqXG4gKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBpbnN0YW5jZS5cbiAqXG4gKiBTZWVcbiAqIHtAbGlua1xuICogICBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy93ZWIvc2V0dXAjYWRkX2ZpcmViYXNlX3RvX3lvdXJfYXBwXG4gKiAgIHwgQWRkIEZpcmViYXNlIHRvIHlvdXIgYXBwfSBhbmRcbiAqIHtAbGlua1xuICogICBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy93ZWIvc2V0dXAjbXVsdGlwbGUtcHJvamVjdHNcbiAqICAgfCBJbml0aWFsaXplIG11bHRpcGxlIHByb2plY3RzfSBmb3IgZGV0YWlsZWQgZG9jdW1lbnRhdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgamF2YXNjcmlwdFxuICpcbiAqIC8vIEluaXRpYWxpemUgZGVmYXVsdCBhcHBcbiAqIC8vIFJldHJpZXZlIHlvdXIgb3duIG9wdGlvbnMgdmFsdWVzIGJ5IGFkZGluZyBhIHdlYiBhcHAgb25cbiAqIC8vIGh0dHBzOi8vY29uc29sZS5maXJlYmFzZS5nb29nbGUuY29tXG4gKiBpbml0aWFsaXplQXBwKHtcbiAqICAgYXBpS2V5OiBcIkFJemEuLi4uXCIsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBdXRoIC8gR2VuZXJhbCBVc2VcbiAqICAgYXV0aERvbWFpbjogXCJZT1VSX0FQUC5maXJlYmFzZWFwcC5jb21cIiwgICAgICAgICAvLyBBdXRoIHdpdGggcG9wdXAvcmVkaXJlY3RcbiAqICAgZGF0YWJhc2VVUkw6IFwiaHR0cHM6Ly9ZT1VSX0FQUC5maXJlYmFzZWlvLmNvbVwiLCAvLyBSZWFsdGltZSBEYXRhYmFzZVxuICogICBzdG9yYWdlQnVja2V0OiBcIllPVVJfQVBQLmFwcHNwb3QuY29tXCIsICAgICAgICAgIC8vIFN0b3JhZ2VcbiAqICAgbWVzc2FnaW5nU2VuZGVySWQ6IFwiMTIzNDU2Nzg5XCIgICAgICAgICAgICAgICAgICAvLyBDbG91ZCBNZXNzYWdpbmdcbiAqIH0pO1xuICogYGBgXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGphdmFzY3JpcHRcbiAqXG4gKiAvLyBJbml0aWFsaXplIGFub3RoZXIgYXBwXG4gKiBjb25zdCBvdGhlckFwcCA9IGluaXRpYWxpemVBcHAoe1xuICogICBkYXRhYmFzZVVSTDogXCJodHRwczovLzxPVEhFUl9EQVRBQkFTRV9OQU1FPi5maXJlYmFzZWlvLmNvbVwiLFxuICogICBzdG9yYWdlQnVja2V0OiBcIjxPVEhFUl9TVE9SQUdFX0JVQ0tFVD4uYXBwc3BvdC5jb21cIlxuICogfSwgXCJvdGhlckFwcFwiKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyB0byBjb25maWd1cmUgdGhlIGFwcCdzIHNlcnZpY2VzLlxuICogQHBhcmFtIG5hbWUgLSBPcHRpb25hbCBuYW1lIG9mIHRoZSBhcHAgdG8gaW5pdGlhbGl6ZS4gSWYgbm8gbmFtZVxuICogICBpcyBwcm92aWRlZCwgdGhlIGRlZmF1bHQgaXMgYFwiW0RFRkFVTFRdXCJgLlxuICpcbiAqIEByZXR1cm5zIFRoZSBpbml0aWFsaXplZCBhcHAuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZUFwcChcbiAgb3B0aW9uczogRmlyZWJhc2VPcHRpb25zLFxuICBuYW1lPzogc3RyaW5nXG4pOiBGaXJlYmFzZUFwcDtcbi8qKlxuICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgYSBGaXJlYmFzZUFwcCBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgdG8gY29uZmlndXJlIHRoZSBhcHAncyBzZXJ2aWNlcy5cbiAqIEBwYXJhbSBjb25maWcgLSBGaXJlYmFzZUFwcCBDb25maWd1cmF0aW9uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZUFwcChcbiAgb3B0aW9uczogRmlyZWJhc2VPcHRpb25zLFxuICBjb25maWc/OiBGaXJlYmFzZUFwcFNldHRpbmdzXG4pOiBGaXJlYmFzZUFwcDtcbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplQXBwKFxuICBvcHRpb25zOiBGaXJlYmFzZU9wdGlvbnMsXG4gIHJhd0NvbmZpZyA9IHt9XG4pOiBGaXJlYmFzZUFwcCB7XG4gIGlmICh0eXBlb2YgcmF3Q29uZmlnICE9PSAnb2JqZWN0Jykge1xuICAgIGNvbnN0IG5hbWUgPSByYXdDb25maWc7XG4gICAgcmF3Q29uZmlnID0geyBuYW1lIH07XG4gIH1cblxuICBjb25zdCBjb25maWc6IFJlcXVpcmVkPEZpcmViYXNlQXBwU2V0dGluZ3M+ID0ge1xuICAgIG5hbWU6IERFRkFVTFRfRU5UUllfTkFNRSxcbiAgICBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ6IGZhbHNlLFxuICAgIC4uLnJhd0NvbmZpZ1xuICB9O1xuICBjb25zdCBuYW1lID0gY29uZmlnLm5hbWU7XG5cbiAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJyB8fCAhbmFtZSkge1xuICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKEFwcEVycm9yLkJBRF9BUFBfTkFNRSwge1xuICAgICAgYXBwTmFtZTogU3RyaW5nKG5hbWUpXG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBleGlzdGluZ0FwcCA9IF9hcHBzLmdldChuYW1lKSBhcyBGaXJlYmFzZUFwcEltcGw7XG4gIGlmIChleGlzdGluZ0FwcCkge1xuICAgIC8vIHJldHVybiB0aGUgZXhpc3RpbmcgYXBwIGlmIG9wdGlvbnMgYW5kIGNvbmZpZyBkZWVwIGVxdWFsIHRoZSBvbmVzIGluIHRoZSBleGlzdGluZyBhcHAuXG4gICAgaWYgKFxuICAgICAgZGVlcEVxdWFsKG9wdGlvbnMsIGV4aXN0aW5nQXBwLm9wdGlvbnMpICYmXG4gICAgICBkZWVwRXF1YWwoY29uZmlnLCBleGlzdGluZ0FwcC5jb25maWcpXG4gICAgKSB7XG4gICAgICByZXR1cm4gZXhpc3RpbmdBcHA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKEFwcEVycm9yLkRVUExJQ0FURV9BUFAsIHsgYXBwTmFtZTogbmFtZSB9KTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBjb250YWluZXIgPSBuZXcgQ29tcG9uZW50Q29udGFpbmVyKG5hbWUpO1xuICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBfY29tcG9uZW50cy52YWx1ZXMoKSkge1xuICAgIGNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcbiAgfVxuXG4gIGNvbnN0IG5ld0FwcCA9IG5ldyBGaXJlYmFzZUFwcEltcGwob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpO1xuXG4gIF9hcHBzLnNldChuYW1lLCBuZXdBcHApO1xuXG4gIHJldHVybiBuZXdBcHA7XG59XG5cbi8qKlxuICogUmV0cmlldmVzIGEge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxuICpcbiAqIFdoZW4gY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuIFdoZW4gYW4gYXBwIG5hbWVcbiAqIGlzIHByb3ZpZGVkLCB0aGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhhdCBuYW1lIGlzIHJldHVybmVkLlxuICpcbiAqIEFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gaWYgdGhlIGFwcCBiZWluZyByZXRyaWV2ZWQgaGFzIG5vdCB5ZXQgYmVlblxuICogaW5pdGlhbGl6ZWQuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGphdmFzY3JpcHRcbiAqIC8vIFJldHVybiB0aGUgZGVmYXVsdCBhcHBcbiAqIGNvbnN0IGFwcCA9IGdldEFwcCgpO1xuICogYGBgXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGphdmFzY3JpcHRcbiAqIC8vIFJldHVybiBhIG5hbWVkIGFwcFxuICogY29uc3Qgb3RoZXJBcHAgPSBnZXRBcHAoXCJvdGhlckFwcFwiKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBuYW1lIC0gT3B0aW9uYWwgbmFtZSBvZiB0aGUgYXBwIHRvIHJldHVybi4gSWYgbm8gbmFtZSBpc1xuICogICBwcm92aWRlZCwgdGhlIGRlZmF1bHQgaXMgYFwiW0RFRkFVTFRdXCJgLlxuICpcbiAqIEByZXR1cm5zIFRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvdmlkZWQgYXBwIG5hbWUuXG4gKiAgIElmIG5vIGFwcCBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXBwKG5hbWU6IHN0cmluZyA9IERFRkFVTFRfRU5UUllfTkFNRSk6IEZpcmViYXNlQXBwIHtcbiAgY29uc3QgYXBwID0gX2FwcHMuZ2V0KG5hbWUpO1xuICBpZiAoIWFwcCkge1xuICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKEFwcEVycm9yLk5PX0FQUCwgeyBhcHBOYW1lOiBuYW1lIH0pO1xuICB9XG5cbiAgcmV0dXJuIGFwcDtcbn1cblxuLyoqXG4gKiBBIChyZWFkLW9ubHkpIGFycmF5IG9mIGFsbCBpbml0aWFsaXplZCBhcHBzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXBwcygpOiBGaXJlYmFzZUFwcFtdIHtcbiAgcmV0dXJuIEFycmF5LmZyb20oX2FwcHMudmFsdWVzKCkpO1xufVxuXG4vKipcbiAqIFJlbmRlcnMgdGhpcyBhcHAgdW51c2FibGUgYW5kIGZyZWVzIHRoZSByZXNvdXJjZXMgb2YgYWxsIGFzc29jaWF0ZWRcbiAqIHNlcnZpY2VzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBkZWxldGVBcHAoYXBwKVxuICogICAudGhlbihmdW5jdGlvbigpIHtcbiAqICAgICBjb25zb2xlLmxvZyhcIkFwcCBkZWxldGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAqICAgfSlcbiAqICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gKiAgICAgY29uc29sZS5sb2coXCJFcnJvciBkZWxldGluZyBhcHA6XCIsIGVycm9yKTtcbiAqICAgfSk7XG4gKiBgYGBcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVBcHAoYXBwOiBGaXJlYmFzZUFwcCk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBuYW1lID0gYXBwLm5hbWU7XG4gIGlmIChfYXBwcy5oYXMobmFtZSkpIHtcbiAgICBfYXBwcy5kZWxldGUobmFtZSk7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAoYXBwIGFzIEZpcmViYXNlQXBwSW1wbCkuY29udGFpbmVyXG4gICAgICAgIC5nZXRQcm92aWRlcnMoKVxuICAgICAgICAubWFwKHByb3ZpZGVyID0+IHByb3ZpZGVyLmRlbGV0ZSgpKVxuICAgICk7XG4gICAgKGFwcCBhcyBGaXJlYmFzZUFwcEltcGwpLmlzRGVsZXRlZCA9IHRydWU7XG4gIH1cbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSBsaWJyYXJ5J3MgbmFtZSBhbmQgdmVyc2lvbiBmb3IgcGxhdGZvcm0gbG9nZ2luZyBwdXJwb3Nlcy5cbiAqIEBwYXJhbSBsaWJyYXJ5IC0gTmFtZSBvZiAxcCBvciAzcCBsaWJyYXJ5IChlLmcuIGZpcmVzdG9yZSwgYW5ndWxhcmZpcmUpXG4gKiBAcGFyYW0gdmVyc2lvbiAtIEN1cnJlbnQgdmVyc2lvbiBvZiB0aGF0IGxpYnJhcnkuXG4gKiBAcGFyYW0gdmFyaWFudCAtIEJ1bmRsZSB2YXJpYW50LCBlLmcuLCBub2RlLCBybiwgZXRjLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyVmVyc2lvbihcbiAgbGlicmFyeUtleU9yTmFtZTogc3RyaW5nLFxuICB2ZXJzaW9uOiBzdHJpbmcsXG4gIHZhcmlhbnQ/OiBzdHJpbmdcbik6IHZvaWQge1xuICAvLyBUT0RPOiBXZSBjYW4gdXNlIHRoaXMgY2hlY2sgdG8gd2hpdGVsaXN0IHN0cmluZ3Mgd2hlbi9pZiB3ZSBzZXQgdXBcbiAgLy8gYSBnb29kIHdoaXRlbGlzdCBzeXN0ZW0uXG4gIGxldCBsaWJyYXJ5ID0gUExBVEZPUk1fTE9HX1NUUklOR1tsaWJyYXJ5S2V5T3JOYW1lXSA/PyBsaWJyYXJ5S2V5T3JOYW1lO1xuICBpZiAodmFyaWFudCkge1xuICAgIGxpYnJhcnkgKz0gYC0ke3ZhcmlhbnR9YDtcbiAgfVxuICBjb25zdCBsaWJyYXJ5TWlzbWF0Y2ggPSBsaWJyYXJ5Lm1hdGNoKC9cXHN8XFwvLyk7XG4gIGNvbnN0IHZlcnNpb25NaXNtYXRjaCA9IHZlcnNpb24ubWF0Y2goL1xcc3xcXC8vKTtcbiAgaWYgKGxpYnJhcnlNaXNtYXRjaCB8fCB2ZXJzaW9uTWlzbWF0Y2gpIHtcbiAgICBjb25zdCB3YXJuaW5nID0gW1xuICAgICAgYFVuYWJsZSB0byByZWdpc3RlciBsaWJyYXJ5IFwiJHtsaWJyYXJ5fVwiIHdpdGggdmVyc2lvbiBcIiR7dmVyc2lvbn1cIjpgXG4gICAgXTtcbiAgICBpZiAobGlicmFyeU1pc21hdGNoKSB7XG4gICAgICB3YXJuaW5nLnB1c2goXG4gICAgICAgIGBsaWJyYXJ5IG5hbWUgXCIke2xpYnJhcnl9XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWBcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggJiYgdmVyc2lvbk1pc21hdGNoKSB7XG4gICAgICB3YXJuaW5nLnB1c2goJ2FuZCcpO1xuICAgIH1cbiAgICBpZiAodmVyc2lvbk1pc21hdGNoKSB7XG4gICAgICB3YXJuaW5nLnB1c2goXG4gICAgICAgIGB2ZXJzaW9uIG5hbWUgXCIke3ZlcnNpb259XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWBcbiAgICAgICk7XG4gICAgfVxuICAgIGxvZ2dlci53YXJuKHdhcm5pbmcuam9pbignICcpKTtcbiAgICByZXR1cm47XG4gIH1cbiAgX3JlZ2lzdGVyQ29tcG9uZW50KFxuICAgIG5ldyBDb21wb25lbnQoXG4gICAgICBgJHtsaWJyYXJ5fS12ZXJzaW9uYCBhcyBOYW1lLFxuICAgICAgKCkgPT4gKHsgbGlicmFyeSwgdmVyc2lvbiB9KSxcbiAgICAgIENvbXBvbmVudFR5cGUuVkVSU0lPTlxuICAgIClcbiAgKTtcbn1cblxuLyoqXG4gKiBTZXRzIGxvZyBoYW5kbGVyIGZvciBhbGwgRmlyZWJhc2UgU0RLcy5cbiAqIEBwYXJhbSBsb2dDYWxsYmFjayAtIEFuIG9wdGlvbmFsIGN1c3RvbSBsb2cgaGFuZGxlciB0aGF0IGV4ZWN1dGVzIHVzZXIgY29kZSB3aGVuZXZlclxuICogdGhlIEZpcmViYXNlIFNESyBtYWtlcyBhIGxvZ2dpbmcgY2FsbC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvbkxvZyhcbiAgbG9nQ2FsbGJhY2s6IExvZ0NhbGxiYWNrIHwgbnVsbCxcbiAgb3B0aW9ucz86IExvZ09wdGlvbnNcbik6IHZvaWQge1xuICBpZiAobG9nQ2FsbGJhY2sgIT09IG51bGwgJiYgdHlwZW9mIGxvZ0NhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoQXBwRXJyb3IuSU5WQUxJRF9MT0dfQVJHVU1FTlQpO1xuICB9XG4gIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBTZXRzIGxvZyBsZXZlbCBmb3IgYWxsIEZpcmViYXNlIFNES3MuXG4gKlxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIGFyZSBjYXB0dXJlZCAoaS5lLiBpZlxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBpbmZvYCwgZXJyb3JzIGFyZSBsb2dnZWQsIGJ1dCBgZGVidWdgIGFuZFxuICogYHZlcmJvc2VgIGxvZ3MgYXJlIG5vdCkuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0TG9nTGV2ZWwobG9nTGV2ZWw6IExvZ0xldmVsU3RyaW5nKTogdm9pZCB7XG4gIHNldExvZ0xldmVsSW1wbChsb2dMZXZlbCk7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudFR5cGUgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwgfSBmcm9tICcuL3BsYXRmb3JtTG9nZ2VyU2VydmljZSc7XG5pbXBvcnQgeyBuYW1lLCB2ZXJzaW9uIH0gZnJvbSAnLi4vcGFja2FnZS5qc29uJztcbmltcG9ydCB7IF9yZWdpc3RlckNvbXBvbmVudCB9IGZyb20gJy4vaW50ZXJuYWwnO1xuaW1wb3J0IHsgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnLi9hcGknO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb3JlQ29tcG9uZW50cyh2YXJpYW50Pzogc3RyaW5nKTogdm9pZCB7XG4gIF9yZWdpc3RlckNvbXBvbmVudChcbiAgICBuZXcgQ29tcG9uZW50KFxuICAgICAgJ3BsYXRmb3JtLWxvZ2dlcicsXG4gICAgICBjb250YWluZXIgPT4gbmV3IFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwoY29udGFpbmVyKSxcbiAgICAgIENvbXBvbmVudFR5cGUuUFJJVkFURVxuICAgIClcbiAgKTtcblxuICAvLyBSZWdpc3RlciBgYXBwYCBwYWNrYWdlLlxuICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgdmFyaWFudCk7XG4gIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXG4gIHJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnX19CVUlMRF9UQVJHRVRfXycpO1xuICAvLyBSZWdpc3RlciBwbGF0Zm9ybSBTREsgaWRlbnRpZmllciAobm8gdmVyc2lvbikuXG4gIHJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcbn1cbiIsIi8qKlxuICogRmlyZWJhc2UgQXBwXG4gKlxuICogQHJlbWFya3MgVGhpcyBwYWNrYWdlIGNvb3JkaW5hdGVzIHRoZSBjb21tdW5pY2F0aW9uIGJldHdlZW4gdGhlIGRpZmZlcmVudCBGaXJlYmFzZSBjb21wb25lbnRzXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqL1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyByZWdpc3RlckNvcmVDb21wb25lbnRzIH0gZnJvbSAnLi9yZWdpc3RlckNvcmVDb21wb25lbnRzJztcblxuZXhwb3J0ICogZnJvbSAnLi9hcGknO1xuZXhwb3J0ICogZnJvbSAnLi9pbnRlcm5hbCc7XG5leHBvcnQgKiBmcm9tICcuL3B1YmxpYy10eXBlcyc7XG5cbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoJ19fUlVOVElNRV9FTlZfXycpO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBeUJBO0FBQ0E7QUFBQTtBQUNBO0FBREE7Ozs7Ozs7QUFHQTtBQUNBOzs7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQVBBO0FBU0E7QUFUQTtBQVdBOzs7OztBQUVBOzs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7OztBQzFEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbkJBOzs7Ozs7Ozs7Ozs7Ozs7OztBQTJDQTs7Ozs7O0FBS0E7QUFFQTtBQ2xEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1QkE7Ozs7QUFHQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQURBO0FBRUE7Ozs7Ozs7QUFLQTtBQUlBO0FBQ0E7QUFEQTtBQUdBO0FBSUE7QUFDQTtBQUVBOzs7Ozs7QUFJQTtBQUlBO0FBQ0E7QUFFQTs7Ozs7Ozs7O0FBT0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWJBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFjQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBaEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWlCQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7O0FBU0E7QUFJQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7QUFRQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUN0SUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTRCQTtBQUNBO0FBREE7QUFJQTtBQUpBO0FBS0E7QUFMQTtBQU9BO0FBUEE7QUFRQTtBQVJBO0FBV0E7QUFYQTtBQXVCQTtBQ25EQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE2QkE7QUFjQTtBQUdBO0FBQ0E7QUFEQTtBQUNBO0FBUEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7Ozs7Ozs7O0FBMENBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7O0FBN0NBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTs7Ozs7QUM5RkE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNkNBOzs7Ozs7O0FBS0E7QUFDQTtBQTZEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBRUE7QUFJQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFrQ0E7QUFBQTtBQUNBO0FBQ0E7QUFwQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBcUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNkJBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWlCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFKQTtBQUFBO0FBT0E7QUFQQTtBQUNBO0FBREE7QUFTQTtBQUNBO0FBVkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFhQTs7Ozs7Ozs7OztBQVFBO0FBR0E7Ozs7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFGQTtBQUVBO0FBRkE7QUFNQTtBQUVBOzs7Ozs7Ozs7QUFPQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTs7Ozs7Ozs7Ozs7QUFTQTtBQUNBO0FBQ0E7QUN6VEE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXVCQTtBQUNBO0FBR0E7QUFGQTtBQUVBO0FBRkE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdENBOzs7Ozs7OztBQThCQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@firebase/app/dist/index.esm2017.js\n");

/***/ }),

/***/ "./node_modules/@firebase/component/dist/index.esm.js":
/*!************************************************************!*\
  !*** ./node_modules/@firebase/component/dist/index.esm.js ***!
  \************************************************************/
/*! exports provided: Component, ComponentContainer, Provider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Component\", function() { return Component; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ComponentContainer\", function() { return ComponentContainer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Provider\", function() { return Provider; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @firebase/util */ \"./node_modules/@firebase/util/dist/index.esm2017.js\");\n\n\n/**\r\n * Component for service name T, e.g. `auth`, `auth-internal`\r\n */\n\nvar Component =\n/** @class */\nfunction () {\n  /**\r\n   *\r\n   * @param name The public service name, e.g. app, auth, firestore, database\r\n   * @param instanceFactory Service factory responsible for creating the public interface\r\n   * @param type whether the service provided by the component is public or private\r\n   */\n  function Component(name, instanceFactory, type) {\n    this.name = name;\n    this.instanceFactory = instanceFactory;\n    this.type = type;\n    this.multipleInstances = false;\n    /**\r\n     * Properties to be added to the service namespace\r\n     */\n\n    this.serviceProps = {};\n    this.instantiationMode = \"LAZY\"\n    /* LAZY */\n    ;\n    this.onInstanceCreated = null;\n  }\n\n  Component.prototype.setInstantiationMode = function (mode) {\n    this.instantiationMode = mode;\n    return this;\n  };\n\n  Component.prototype.setMultipleInstances = function (multipleInstances) {\n    this.multipleInstances = multipleInstances;\n    return this;\n  };\n\n  Component.prototype.setServiceProps = function (props) {\n    this.serviceProps = props;\n    return this;\n  };\n\n  Component.prototype.setInstanceCreatedCallback = function (callback) {\n    this.onInstanceCreated = callback;\n    return this;\n  };\n\n  return Component;\n}();\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar DEFAULT_ENTRY_NAME = '[DEFAULT]';\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Provider for instance for service name T, e.g. 'auth', 'auth-internal'\r\n * NameServiceMapping[T] is an alias for the type of the instance\r\n */\n\nvar Provider =\n/** @class */\nfunction () {\n  function Provider(name, container) {\n    this.name = name;\n    this.container = container;\n    this.component = null;\n    this.instances = new Map();\n    this.instancesDeferred = new Map();\n    this.instancesOptions = new Map();\n    this.onInitCallbacks = new Map();\n  }\n  /**\r\n   * @param identifier A provider can provide mulitple instances of a service\r\n   * if this.component.multipleInstances is true.\r\n   */\n\n\n  Provider.prototype.get = function (identifier) {\n    // if multipleInstances is not supported, use the default name\n    var normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n\n    if (!this.instancesDeferred.has(normalizedIdentifier)) {\n      var deferred = new _firebase_util__WEBPACK_IMPORTED_MODULE_1__[\"Deferred\"]();\n      this.instancesDeferred.set(normalizedIdentifier, deferred);\n\n      if (this.isInitialized(normalizedIdentifier) || this.shouldAutoInitialize()) {\n        // initialize the service if it can be auto-initialized\n        try {\n          var instance = this.getOrInitializeService({\n            instanceIdentifier: normalizedIdentifier\n          });\n\n          if (instance) {\n            deferred.resolve(instance);\n          }\n        } catch (e) {// when the instance factory throws an exception during get(), it should not cause\n          // a fatal error. We just return the unresolved promise in this case.\n        }\n      }\n    }\n\n    return this.instancesDeferred.get(normalizedIdentifier).promise;\n  };\n\n  Provider.prototype.getImmediate = function (options) {\n    var _a; // if multipleInstances is not supported, use the default name\n\n\n    var normalizedIdentifier = this.normalizeInstanceIdentifier(options === null || options === void 0 ? void 0 : options.identifier);\n    var optional = (_a = options === null || options === void 0 ? void 0 : options.optional) !== null && _a !== void 0 ? _a : false;\n\n    if (this.isInitialized(normalizedIdentifier) || this.shouldAutoInitialize()) {\n      try {\n        return this.getOrInitializeService({\n          instanceIdentifier: normalizedIdentifier\n        });\n      } catch (e) {\n        if (optional) {\n          return null;\n        } else {\n          throw e;\n        }\n      }\n    } else {\n      // In case a component is not initialized and should/can not be auto-initialized at the moment, return null if the optional flag is set, or throw\n      if (optional) {\n        return null;\n      } else {\n        throw Error(\"Service \" + this.name + \" is not available\");\n      }\n    }\n  };\n\n  Provider.prototype.getComponent = function () {\n    return this.component;\n  };\n\n  Provider.prototype.setComponent = function (component) {\n    var e_1, _a;\n\n    if (component.name !== this.name) {\n      throw Error(\"Mismatching Component \" + component.name + \" for Provider \" + this.name + \".\");\n    }\n\n    if (this.component) {\n      throw Error(\"Component for \" + this.name + \" has already been provided\");\n    }\n\n    this.component = component; // return early without attempting to initialize the component if the component requires explicit initialization (calling `Provider.initialize()`)\n\n    if (!this.shouldAutoInitialize()) {\n      return;\n    } // if the service is eager, initialize the default instance\n\n\n    if (isComponentEager(component)) {\n      try {\n        this.getOrInitializeService({\n          instanceIdentifier: DEFAULT_ENTRY_NAME\n        });\n      } catch (e) {// when the instance factory for an eager Component throws an exception during the eager\n        // initialization, it should not cause a fatal error.\n        // TODO: Investigate if we need to make it configurable, because some component may want to cause\n        // a fatal error in this case?\n      }\n    }\n\n    try {\n      // Create service instances for the pending promises and resolve them\n      // NOTE: if this.multipleInstances is false, only the default instance will be created\n      // and all promises with resolve with it regardless of the identifier.\n      for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__values\"])(this.instancesDeferred.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var _d = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__read\"])(_c.value, 2),\n            instanceIdentifier = _d[0],\n            instanceDeferred = _d[1];\n\n        var normalizedIdentifier = this.normalizeInstanceIdentifier(instanceIdentifier);\n\n        try {\n          // `getOrInitializeService()` should always return a valid instance since a component is guaranteed. use ! to make typescript happy.\n          var instance = this.getOrInitializeService({\n            instanceIdentifier: normalizedIdentifier\n          });\n          instanceDeferred.resolve(instance);\n        } catch (e) {// when the instance factory throws an exception, it should not cause\n          // a fatal error. We just leave the promise unresolved.\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  Provider.prototype.clearInstance = function (identifier) {\n    if (identifier === void 0) {\n      identifier = DEFAULT_ENTRY_NAME;\n    }\n\n    this.instancesDeferred[\"delete\"](identifier);\n    this.instancesOptions[\"delete\"](identifier);\n    this.instances[\"delete\"](identifier);\n  }; // app.delete() will call this method on every provider to delete the services\n  // TODO: should we mark the provider as deleted?\n\n\n  Provider.prototype[\"delete\"] = function () {\n    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__awaiter\"])(this, void 0, void 0, function () {\n      var services;\n      return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__generator\"])(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            services = Array.from(this.instances.values());\n            return [4\n            /*yield*/\n            , Promise.all(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__spreadArray\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__spreadArray\"])([], Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__read\"])(services.filter(function (service) {\n              return 'INTERNAL' in service;\n            }) // legacy services\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            .map(function (service) {\n              return service.INTERNAL[\"delete\"]();\n            }))), Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__read\"])(services.filter(function (service) {\n              return '_delete' in service;\n            }) // modularized services\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            .map(function (service) {\n              return service._delete();\n            }))))];\n\n          case 1:\n            _a.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  Provider.prototype.isComponentSet = function () {\n    return this.component != null;\n  };\n\n  Provider.prototype.isInitialized = function (identifier) {\n    if (identifier === void 0) {\n      identifier = DEFAULT_ENTRY_NAME;\n    }\n\n    return this.instances.has(identifier);\n  };\n\n  Provider.prototype.getOptions = function (identifier) {\n    if (identifier === void 0) {\n      identifier = DEFAULT_ENTRY_NAME;\n    }\n\n    return this.instancesOptions.get(identifier) || {};\n  };\n\n  Provider.prototype.initialize = function (opts) {\n    var e_2, _a;\n\n    if (opts === void 0) {\n      opts = {};\n    }\n\n    var _b = opts.options,\n        options = _b === void 0 ? {} : _b;\n    var normalizedIdentifier = this.normalizeInstanceIdentifier(opts.instanceIdentifier);\n\n    if (this.isInitialized(normalizedIdentifier)) {\n      throw Error(this.name + \"(\" + normalizedIdentifier + \") has already been initialized\");\n    }\n\n    if (!this.isComponentSet()) {\n      throw Error(\"Component \" + this.name + \" has not been registered yet\");\n    }\n\n    var instance = this.getOrInitializeService({\n      instanceIdentifier: normalizedIdentifier,\n      options: options\n    });\n\n    try {\n      // resolve any pending promise waiting for the service instance\n      for (var _c = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__values\"])(this.instancesDeferred.entries()), _d = _c.next(); !_d.done; _d = _c.next()) {\n        var _e = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__read\"])(_d.value, 2),\n            instanceIdentifier = _e[0],\n            instanceDeferred = _e[1];\n\n        var normalizedDeferredIdentifier = this.normalizeInstanceIdentifier(instanceIdentifier);\n\n        if (normalizedIdentifier === normalizedDeferredIdentifier) {\n          instanceDeferred.resolve(instance);\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_d && !_d.done && (_a = _c[\"return\"])) _a.call(_c);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    return instance;\n  };\n  /**\r\n   *\r\n   * @param callback - a function that will be invoked  after the provider has been initialized by calling provider.initialize().\r\n   * The function is invoked SYNCHRONOUSLY, so it should not execute any longrunning tasks in order to not block the program.\r\n   *\r\n   * @param identifier An optional instance identifier\r\n   * @returns a function to unregister the callback\r\n   */\n\n\n  Provider.prototype.onInit = function (callback, identifier) {\n    var _a;\n\n    var normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n    var existingCallbacks = (_a = this.onInitCallbacks.get(normalizedIdentifier)) !== null && _a !== void 0 ? _a : new Set();\n    existingCallbacks.add(callback);\n    this.onInitCallbacks.set(normalizedIdentifier, existingCallbacks);\n    var existingInstance = this.instances.get(normalizedIdentifier);\n\n    if (existingInstance) {\n      callback(existingInstance, normalizedIdentifier);\n    }\n\n    return function () {\n      existingCallbacks[\"delete\"](callback);\n    };\n  };\n  /**\r\n   * Invoke onInit callbacks synchronously\r\n   * @param instance the service instance`\r\n   */\n\n\n  Provider.prototype.invokeOnInitCallbacks = function (instance, identifier) {\n    var e_3, _a;\n\n    var callbacks = this.onInitCallbacks.get(identifier);\n\n    if (!callbacks) {\n      return;\n    }\n\n    try {\n      for (var callbacks_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__values\"])(callbacks), callbacks_1_1 = callbacks_1.next(); !callbacks_1_1.done; callbacks_1_1 = callbacks_1.next()) {\n        var callback = callbacks_1_1.value;\n\n        try {\n          callback(instance, identifier);\n        } catch (_b) {// ignore errors in the onInit callback\n        }\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (callbacks_1_1 && !callbacks_1_1.done && (_a = callbacks_1[\"return\"])) _a.call(callbacks_1);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n  };\n\n  Provider.prototype.getOrInitializeService = function (_a) {\n    var instanceIdentifier = _a.instanceIdentifier,\n        _b = _a.options,\n        options = _b === void 0 ? {} : _b;\n    var instance = this.instances.get(instanceIdentifier);\n\n    if (!instance && this.component) {\n      instance = this.component.instanceFactory(this.container, {\n        instanceIdentifier: normalizeIdentifierForFactory(instanceIdentifier),\n        options: options\n      });\n      this.instances.set(instanceIdentifier, instance);\n      this.instancesOptions.set(instanceIdentifier, options);\n      /**\r\n       * Invoke onInit listeners.\r\n       * Note this.component.onInstanceCreated is different, which is used by the component creator,\r\n       * while onInit listeners are registered by consumers of the provider.\r\n       */\n\n      this.invokeOnInitCallbacks(instance, instanceIdentifier);\n      /**\r\n       * Order is important\r\n       * onInstanceCreated() should be called after this.instances.set(instanceIdentifier, instance); which\r\n       * makes `isInitialized()` return true.\r\n       */\n\n      if (this.component.onInstanceCreated) {\n        try {\n          this.component.onInstanceCreated(this.container, instanceIdentifier, instance);\n        } catch (_c) {// ignore errors in the onInstanceCreatedCallback\n        }\n      }\n    }\n\n    return instance || null;\n  };\n\n  Provider.prototype.normalizeInstanceIdentifier = function (identifier) {\n    if (identifier === void 0) {\n      identifier = DEFAULT_ENTRY_NAME;\n    }\n\n    if (this.component) {\n      return this.component.multipleInstances ? identifier : DEFAULT_ENTRY_NAME;\n    } else {\n      return identifier; // assume multiple instances are supported before the component is provided.\n    }\n  };\n\n  Provider.prototype.shouldAutoInitialize = function () {\n    return !!this.component && this.component.instantiationMode !== \"EXPLICIT\"\n    /* EXPLICIT */\n    ;\n  };\n\n  return Provider;\n}(); // undefined should be passed to the service factory for the default instance\n\n\nfunction normalizeIdentifierForFactory(identifier) {\n  return identifier === DEFAULT_ENTRY_NAME ? undefined : identifier;\n}\n\nfunction isComponentEager(component) {\n  return component.instantiationMode === \"EAGER\"\n  /* EAGER */\n  ;\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * ComponentContainer that provides Providers for service name T, e.g. `auth`, `auth-internal`\r\n */\n\n\nvar ComponentContainer =\n/** @class */\nfunction () {\n  function ComponentContainer(name) {\n    this.name = name;\n    this.providers = new Map();\n  }\n  /**\r\n   *\r\n   * @param component Component being added\r\n   * @param overwrite When a component with the same name has already been registered,\r\n   * if overwrite is true: overwrite the existing component with the new component and create a new\r\n   * provider with the new component. It can be useful in tests where you want to use different mocks\r\n   * for different tests.\r\n   * if overwrite is false: throw an exception\r\n   */\n\n\n  ComponentContainer.prototype.addComponent = function (component) {\n    var provider = this.getProvider(component.name);\n\n    if (provider.isComponentSet()) {\n      throw new Error(\"Component \" + component.name + \" has already been registered with \" + this.name);\n    }\n\n    provider.setComponent(component);\n  };\n\n  ComponentContainer.prototype.addOrOverwriteComponent = function (component) {\n    var provider = this.getProvider(component.name);\n\n    if (provider.isComponentSet()) {\n      // delete the existing provider from the container, so we can register the new component\n      this.providers[\"delete\"](component.name);\n    }\n\n    this.addComponent(component);\n  };\n  /**\r\n   * getProvider provides a type safe interface where it can only be called with a field name\r\n   * present in NameServiceMapping interface.\r\n   *\r\n   * Firebase SDKs providing services should extend NameServiceMapping interface to register\r\n   * themselves.\r\n   */\n\n\n  ComponentContainer.prototype.getProvider = function (name) {\n    if (this.providers.has(name)) {\n      return this.providers.get(name);\n    } // create a Provider for a service that hasn't registered with Firebase\n\n\n    var provider = new Provider(name, this);\n    this.providers.set(name, provider);\n    return provider;\n  };\n\n  ComponentContainer.prototype.getProviders = function () {\n    return Array.from(this.providers.values());\n  };\n\n  return ComponentContainer;\n}();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2NvbXBvbmVudC9kaXN0L2luZGV4LmVzbS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9zcmMvY29tcG9uZW50LnRzP2E3NmMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9jb25zdGFudHMudHM/MzViMCIsIndlYnBhY2s6Ly8vLi4vc3JjL3Byb3ZpZGVyLnRzPzM4ODQiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9jb21wb25lbnRfY29udGFpbmVyLnRzP2EyYTAiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7XG4gIEluc3RhbnRpYXRpb25Nb2RlLFxuICBJbnN0YW5jZUZhY3RvcnksXG4gIENvbXBvbmVudFR5cGUsXG4gIERpY3Rpb25hcnksXG4gIE5hbWUsXG4gIG9uSW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2tcbn0gZnJvbSAnLi90eXBlcyc7XG5cbi8qKlxuICogQ29tcG9uZW50IGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxuICovXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50PFQgZXh0ZW5kcyBOYW1lID0gTmFtZT4ge1xuICBtdWx0aXBsZUluc3RhbmNlcyA9IGZhbHNlO1xuICAvKipcbiAgICogUHJvcGVydGllcyB0byBiZSBhZGRlZCB0byB0aGUgc2VydmljZSBuYW1lc3BhY2VcbiAgICovXG4gIHNlcnZpY2VQcm9wczogRGljdGlvbmFyeSA9IHt9O1xuXG4gIGluc3RhbnRpYXRpb25Nb2RlID0gSW5zdGFudGlhdGlvbk1vZGUuTEFaWTtcblxuICBvbkluc3RhbmNlQ3JlYXRlZDogb25JbnN0YW5jZUNyZWF0ZWRDYWxsYmFjazxUPiB8IG51bGwgPSBudWxsO1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSBUaGUgcHVibGljIHNlcnZpY2UgbmFtZSwgZS5nLiBhcHAsIGF1dGgsIGZpcmVzdG9yZSwgZGF0YWJhc2VcbiAgICogQHBhcmFtIGluc3RhbmNlRmFjdG9yeSBTZXJ2aWNlIGZhY3RvcnkgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZSBwdWJsaWMgaW50ZXJmYWNlXG4gICAqIEBwYXJhbSB0eXBlIHdoZXRoZXIgdGhlIHNlcnZpY2UgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBpcyBwdWJsaWMgb3IgcHJpdmF0ZVxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcmVhZG9ubHkgbmFtZTogVCxcbiAgICByZWFkb25seSBpbnN0YW5jZUZhY3Rvcnk6IEluc3RhbmNlRmFjdG9yeTxUPixcbiAgICByZWFkb25seSB0eXBlOiBDb21wb25lbnRUeXBlXG4gICkge31cblxuICBzZXRJbnN0YW50aWF0aW9uTW9kZShtb2RlOiBJbnN0YW50aWF0aW9uTW9kZSk6IHRoaXMge1xuICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBtb2RlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgc2V0TXVsdGlwbGVJbnN0YW5jZXMobXVsdGlwbGVJbnN0YW5jZXM6IGJvb2xlYW4pOiB0aGlzIHtcbiAgICB0aGlzLm11bHRpcGxlSW5zdGFuY2VzID0gbXVsdGlwbGVJbnN0YW5jZXM7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBzZXRTZXJ2aWNlUHJvcHMocHJvcHM6IERpY3Rpb25hcnkpOiB0aGlzIHtcbiAgICB0aGlzLnNlcnZpY2VQcm9wcyA9IHByb3BzO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgc2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2soY2FsbGJhY2s6IG9uSW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2s8VD4pOiB0aGlzIHtcbiAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gY2FsbGJhY2s7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IERlZmVycmVkIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgQ29tcG9uZW50Q29udGFpbmVyIH0gZnJvbSAnLi9jb21wb25lbnRfY29udGFpbmVyJztcbmltcG9ydCB7IERFRkFVTFRfRU5UUllfTkFNRSB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7XG4gIEluaXRpYWxpemVPcHRpb25zLFxuICBJbnN0YW50aWF0aW9uTW9kZSxcbiAgTmFtZSxcbiAgTmFtZVNlcnZpY2VNYXBwaW5nLFxuICBPbkluaXRDYWxsQmFja1xufSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50JztcblxuLyoqXG4gKiBQcm92aWRlciBmb3IgaW5zdGFuY2UgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuICdhdXRoJywgJ2F1dGgtaW50ZXJuYWwnXG4gKiBOYW1lU2VydmljZU1hcHBpbmdbVF0gaXMgYW4gYWxpYXMgZm9yIHRoZSB0eXBlIG9mIHRoZSBpbnN0YW5jZVxuICovXG5leHBvcnQgY2xhc3MgUHJvdmlkZXI8VCBleHRlbmRzIE5hbWU+IHtcbiAgcHJpdmF0ZSBjb21wb25lbnQ6IENvbXBvbmVudDxUPiB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHJlYWRvbmx5IGluc3RhbmNlczogTWFwPHN0cmluZywgTmFtZVNlcnZpY2VNYXBwaW5nW1RdPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSByZWFkb25seSBpbnN0YW5jZXNEZWZlcnJlZDogTWFwPFxuICAgIHN0cmluZyxcbiAgICBEZWZlcnJlZDxOYW1lU2VydmljZU1hcHBpbmdbVF0+XG4gID4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgcmVhZG9ubHkgaW5zdGFuY2VzT3B0aW9uczogTWFwPHN0cmluZywgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+ID1cbiAgICBuZXcgTWFwKCk7XG4gIHByaXZhdGUgb25Jbml0Q2FsbGJhY2tzOiBNYXA8c3RyaW5nLCBTZXQ8T25Jbml0Q2FsbEJhY2s8VD4+PiA9IG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IG5hbWU6IFQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBjb250YWluZXI6IENvbXBvbmVudENvbnRhaW5lclxuICApIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBpZGVudGlmaWVyIEEgcHJvdmlkZXIgY2FuIHByb3ZpZGUgbXVsaXRwbGUgaW5zdGFuY2VzIG9mIGEgc2VydmljZVxuICAgKiBpZiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyBpcyB0cnVlLlxuICAgKi9cbiAgZ2V0KGlkZW50aWZpZXI/OiBzdHJpbmcpOiBQcm9taXNlPE5hbWVTZXJ2aWNlTWFwcGluZ1tUXT4ge1xuICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXG4gICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyKTtcblxuICAgIGlmICghdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5oYXMobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XG4gICAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZDxOYW1lU2VydmljZU1hcHBpbmdbVF0+KCk7XG4gICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLnNldChub3JtYWxpemVkSWRlbnRpZmllciwgZGVmZXJyZWQpO1xuXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcbiAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpXG4gICAgICApIHtcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgc2VydmljZSBpZiBpdCBjYW4gYmUgYXV0by1pbml0aWFsaXplZFxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcbiAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgZ2V0KCksIGl0IHNob3VsZCBub3QgY2F1c2VcbiAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IHJldHVybiB0aGUgdW5yZXNvbHZlZCBwcm9taXNlIGluIHRoaXMgY2FzZS5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmdldChub3JtYWxpemVkSWRlbnRpZmllcikhLnByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIG9wdGlvbnMuaWRlbnRpZmllciBBIHByb3ZpZGVyIGNhbiBwcm92aWRlIG11bGl0cGxlIGluc3RhbmNlcyBvZiBhIHNlcnZpY2VcbiAgICogaWYgdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgaXMgdHJ1ZS5cbiAgICogQHBhcmFtIG9wdGlvbnMub3B0aW9uYWwgSWYgb3B0aW9uYWwgaXMgZmFsc2Ugb3Igbm90IHByb3ZpZGVkLCB0aGUgbWV0aG9kIHRocm93cyBhbiBlcnJvciB3aGVuXG4gICAqIHRoZSBzZXJ2aWNlIGlzIG5vdCBpbW1lZGlhdGVseSBhdmFpbGFibGUuXG4gICAqIElmIG9wdGlvbmFsIGlzIHRydWUsIHRoZSBtZXRob2QgcmV0dXJucyBudWxsIGlmIHRoZSBzZXJ2aWNlIGlzIG5vdCBpbW1lZGlhdGVseSBhdmFpbGFibGUuXG4gICAqL1xuICBnZXRJbW1lZGlhdGUob3B0aW9uczoge1xuICAgIGlkZW50aWZpZXI/OiBzdHJpbmc7XG4gICAgb3B0aW9uYWw6IHRydWU7XG4gIH0pOiBOYW1lU2VydmljZU1hcHBpbmdbVF0gfCBudWxsO1xuICBnZXRJbW1lZGlhdGUob3B0aW9ucz86IHtcbiAgICBpZGVudGlmaWVyPzogc3RyaW5nO1xuICAgIG9wdGlvbmFsPzogZmFsc2U7XG4gIH0pOiBOYW1lU2VydmljZU1hcHBpbmdbVF07XG4gIGdldEltbWVkaWF0ZShvcHRpb25zPzoge1xuICAgIGlkZW50aWZpZXI/OiBzdHJpbmc7XG4gICAgb3B0aW9uYWw/OiBib29sZWFuO1xuICB9KTogTmFtZVNlcnZpY2VNYXBwaW5nW1RdIHwgbnVsbCB7XG4gICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcbiAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKFxuICAgICAgb3B0aW9ucz8uaWRlbnRpZmllclxuICAgICk7XG4gICAgY29uc3Qgb3B0aW9uYWwgPSBvcHRpb25zPy5vcHRpb25hbCA/PyBmYWxzZTtcblxuICAgIGlmIChcbiAgICAgIHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcbiAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKVxuICAgICkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XG4gICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKG9wdGlvbmFsKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJbiBjYXNlIGEgY29tcG9uZW50IGlzIG5vdCBpbml0aWFsaXplZCBhbmQgc2hvdWxkL2NhbiBub3QgYmUgYXV0by1pbml0aWFsaXplZCBhdCB0aGUgbW9tZW50LCByZXR1cm4gbnVsbCBpZiB0aGUgb3B0aW9uYWwgZmxhZyBpcyBzZXQsIG9yIHRocm93XG4gICAgICBpZiAob3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBFcnJvcihgU2VydmljZSAke3RoaXMubmFtZX0gaXMgbm90IGF2YWlsYWJsZWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldENvbXBvbmVudCgpOiBDb21wb25lbnQ8VD4gfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnQ7XG4gIH1cblxuICBzZXRDb21wb25lbnQoY29tcG9uZW50OiBDb21wb25lbnQ8VD4pOiB2b2lkIHtcbiAgICBpZiAoY29tcG9uZW50Lm5hbWUgIT09IHRoaXMubmFtZSkge1xuICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgIGBNaXNtYXRjaGluZyBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZm9yIFByb3ZpZGVyICR7dGhpcy5uYW1lfS5gXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xuICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCBmb3IgJHt0aGlzLm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcHJvdmlkZWRgKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcblxuICAgIC8vIHJldHVybiBlYXJseSB3aXRob3V0IGF0dGVtcHRpbmcgdG8gaW5pdGlhbGl6ZSB0aGUgY29tcG9uZW50IGlmIHRoZSBjb21wb25lbnQgcmVxdWlyZXMgZXhwbGljaXQgaW5pdGlhbGl6YXRpb24gKGNhbGxpbmcgYFByb3ZpZGVyLmluaXRpYWxpemUoKWApXG4gICAgaWYgKCF0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBpZiB0aGUgc2VydmljZSBpcyBlYWdlciwgaW5pdGlhbGl6ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZVxuICAgIGlmIChpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllcjogREVGQVVMVF9FTlRSWV9OQU1FIH0pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IGZvciBhbiBlYWdlciBDb21wb25lbnQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgdGhlIGVhZ2VyXG4gICAgICAgIC8vIGluaXRpYWxpemF0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlIGEgZmF0YWwgZXJyb3IuXG4gICAgICAgIC8vIFRPRE86IEludmVzdGlnYXRlIGlmIHdlIG5lZWQgdG8gbWFrZSBpdCBjb25maWd1cmFibGUsIGJlY2F1c2Ugc29tZSBjb21wb25lbnQgbWF5IHdhbnQgdG8gY2F1c2VcbiAgICAgICAgLy8gYSBmYXRhbCBlcnJvciBpbiB0aGlzIGNhc2U/XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHNlcnZpY2UgaW5zdGFuY2VzIGZvciB0aGUgcGVuZGluZyBwcm9taXNlcyBhbmQgcmVzb2x2ZSB0aGVtXG4gICAgLy8gTk9URTogaWYgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyBpcyBmYWxzZSwgb25seSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWRcbiAgICAvLyBhbmQgYWxsIHByb21pc2VzIHdpdGggcmVzb2x2ZSB3aXRoIGl0IHJlZ2FyZGxlc3Mgb2YgdGhlIGlkZW50aWZpZXIuXG4gICAgZm9yIChjb25zdCBbXG4gICAgICBpbnN0YW5jZUlkZW50aWZpZXIsXG4gICAgICBpbnN0YW5jZURlZmVycmVkXG4gICAgXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPVxuICAgICAgICB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBgZ2V0T3JJbml0aWFsaXplU2VydmljZSgpYCBzaG91bGQgYWx3YXlzIHJldHVybiBhIHZhbGlkIGluc3RhbmNlIHNpbmNlIGEgY29tcG9uZW50IGlzIGd1YXJhbnRlZWQuIHVzZSAhIHRvIG1ha2UgdHlwZXNjcmlwdCBoYXBweS5cbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xuICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcbiAgICAgICAgfSkhO1xuICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24sIGl0IHNob3VsZCBub3QgY2F1c2VcbiAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCBsZWF2ZSB0aGUgcHJvbWlzZSB1bnJlc29sdmVkLlxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNsZWFySW5zdGFuY2UoaWRlbnRpZmllcjogc3RyaW5nID0gREVGQVVMVF9FTlRSWV9OQU1FKTogdm9pZCB7XG4gICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5kZWxldGUoaWRlbnRpZmllcik7XG4gICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLmRlbGV0ZShpZGVudGlmaWVyKTtcbiAgICB0aGlzLmluc3RhbmNlcy5kZWxldGUoaWRlbnRpZmllcik7XG4gIH1cblxuICAvLyBhcHAuZGVsZXRlKCkgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIG9uIGV2ZXJ5IHByb3ZpZGVyIHRvIGRlbGV0ZSB0aGUgc2VydmljZXNcbiAgLy8gVE9ETzogc2hvdWxkIHdlIG1hcmsgdGhlIHByb3ZpZGVyIGFzIGRlbGV0ZWQ/XG4gIGFzeW5jIGRlbGV0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzZXJ2aWNlcyA9IEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMudmFsdWVzKCkpO1xuXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgLi4uc2VydmljZXNcbiAgICAgICAgLmZpbHRlcihzZXJ2aWNlID0+ICdJTlRFUk5BTCcgaW4gc2VydmljZSkgLy8gbGVnYWN5IHNlcnZpY2VzXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIC5tYXAoc2VydmljZSA9PiAoc2VydmljZSBhcyBhbnkpLklOVEVSTkFMIS5kZWxldGUoKSksXG4gICAgICAuLi5zZXJ2aWNlc1xuICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ19kZWxldGUnIGluIHNlcnZpY2UpIC8vIG1vZHVsYXJpemVkIHNlcnZpY2VzXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIC5tYXAoc2VydmljZSA9PiAoc2VydmljZSBhcyBhbnkpLl9kZWxldGUoKSlcbiAgICBdKTtcbiAgfVxuXG4gIGlzQ29tcG9uZW50U2V0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudCAhPSBudWxsO1xuICB9XG5cbiAgaXNJbml0aWFsaXplZChpZGVudGlmaWVyOiBzdHJpbmcgPSBERUZBVUxUX0VOVFJZX05BTUUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXMuaGFzKGlkZW50aWZpZXIpO1xuICB9XG5cbiAgZ2V0T3B0aW9ucyhpZGVudGlmaWVyOiBzdHJpbmcgPSBERUZBVUxUX0VOVFJZX05BTUUpOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5nZXQoaWRlbnRpZmllcikgfHwge307XG4gIH1cblxuICBpbml0aWFsaXplKG9wdHM6IEluaXRpYWxpemVPcHRpb25zID0ge30pOiBOYW1lU2VydmljZU1hcHBpbmdbVF0ge1xuICAgIGNvbnN0IHsgb3B0aW9ucyA9IHt9IH0gPSBvcHRzO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoXG4gICAgICBvcHRzLmluc3RhbmNlSWRlbnRpZmllclxuICAgICk7XG4gICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikpIHtcbiAgICAgIHRocm93IEVycm9yKFxuICAgICAgICBgJHt0aGlzLm5hbWV9KCR7bm9ybWFsaXplZElkZW50aWZpZXJ9KSBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNDb21wb25lbnRTZXQoKSkge1xuICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCAke3RoaXMubmFtZX0gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQgeWV0YCk7XG4gICAgfVxuXG4gICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xuICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllcixcbiAgICAgIG9wdGlvbnNcbiAgICB9KSE7XG5cbiAgICAvLyByZXNvbHZlIGFueSBwZW5kaW5nIHByb21pc2Ugd2FpdGluZyBmb3IgdGhlIHNlcnZpY2UgaW5zdGFuY2VcbiAgICBmb3IgKGNvbnN0IFtcbiAgICAgIGluc3RhbmNlSWRlbnRpZmllcixcbiAgICAgIGluc3RhbmNlRGVmZXJyZWRcbiAgICBdIG9mIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSB7XG4gICAgICBjb25zdCBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyID1cbiAgICAgICAgdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcbiAgICAgIGlmIChub3JtYWxpemVkSWRlbnRpZmllciA9PT0gbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllcikge1xuICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBpbnZva2VkICBhZnRlciB0aGUgcHJvdmlkZXIgaGFzIGJlZW4gaW5pdGlhbGl6ZWQgYnkgY2FsbGluZyBwcm92aWRlci5pbml0aWFsaXplKCkuXG4gICAqIFRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIFNZTkNIUk9OT1VTTFksIHNvIGl0IHNob3VsZCBub3QgZXhlY3V0ZSBhbnkgbG9uZ3J1bm5pbmcgdGFza3MgaW4gb3JkZXIgdG8gbm90IGJsb2NrIHRoZSBwcm9ncmFtLlxuICAgKlxuICAgKiBAcGFyYW0gaWRlbnRpZmllciBBbiBvcHRpb25hbCBpbnN0YW5jZSBpZGVudGlmaWVyXG4gICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gdG8gdW5yZWdpc3RlciB0aGUgY2FsbGJhY2tcbiAgICovXG4gIG9uSW5pdChjYWxsYmFjazogT25Jbml0Q2FsbEJhY2s8VD4sIGlkZW50aWZpZXI/OiBzdHJpbmcpOiAoKSA9PiB2b2lkIHtcbiAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIGNvbnN0IGV4aXN0aW5nQ2FsbGJhY2tzID1cbiAgICAgIHRoaXMub25Jbml0Q2FsbGJhY2tzLmdldChub3JtYWxpemVkSWRlbnRpZmllcikgPz9cbiAgICAgIG5ldyBTZXQ8T25Jbml0Q2FsbEJhY2s8VD4+KCk7XG4gICAgZXhpc3RpbmdDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcbiAgICB0aGlzLm9uSW5pdENhbGxiYWNrcy5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGV4aXN0aW5nQ2FsbGJhY2tzKTtcblxuICAgIGNvbnN0IGV4aXN0aW5nSW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpO1xuICAgIGlmIChleGlzdGluZ0luc3RhbmNlKSB7XG4gICAgICBjYWxsYmFjayhleGlzdGluZ0luc3RhbmNlLCBub3JtYWxpemVkSWRlbnRpZmllcik7XG4gICAgfVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnZva2Ugb25Jbml0IGNhbGxiYWNrcyBzeW5jaHJvbm91c2x5XG4gICAqIEBwYXJhbSBpbnN0YW5jZSB0aGUgc2VydmljZSBpbnN0YW5jZWBcbiAgICovXG4gIHByaXZhdGUgaW52b2tlT25Jbml0Q2FsbGJhY2tzKFxuICAgIGluc3RhbmNlOiBOYW1lU2VydmljZU1hcHBpbmdbVF0sXG4gICAgaWRlbnRpZmllcjogc3RyaW5nXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMub25Jbml0Q2FsbGJhY2tzLmdldChpZGVudGlmaWVyKTtcbiAgICBpZiAoIWNhbGxiYWNrcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY2FsbGJhY2soaW5zdGFuY2UsIGlkZW50aWZpZXIpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5pdCBjYWxsYmFja1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XG4gICAgaW5zdGFuY2VJZGVudGlmaWVyLFxuICAgIG9wdGlvbnMgPSB7fVxuICB9OiB7XG4gICAgaW5zdGFuY2VJZGVudGlmaWVyOiBzdHJpbmc7XG4gICAgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICB9KTogTmFtZVNlcnZpY2VNYXBwaW5nW1RdIHwgbnVsbCB7XG4gICAgbGV0IGluc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KGluc3RhbmNlSWRlbnRpZmllcik7XG4gICAgaWYgKCFpbnN0YW5jZSAmJiB0aGlzLmNvbXBvbmVudCkge1xuICAgICAgaW5zdGFuY2UgPSB0aGlzLmNvbXBvbmVudC5pbnN0YW5jZUZhY3RvcnkodGhpcy5jb250YWluZXIsIHtcbiAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpbnN0YW5jZUlkZW50aWZpZXIpLFxuICAgICAgICBvcHRpb25zXG4gICAgICB9KTtcbiAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcbiAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zKTtcblxuICAgICAgLyoqXG4gICAgICAgKiBJbnZva2Ugb25Jbml0IGxpc3RlbmVycy5cbiAgICAgICAqIE5vdGUgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQgaXMgZGlmZmVyZW50LCB3aGljaCBpcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQgY3JlYXRvcixcbiAgICAgICAqIHdoaWxlIG9uSW5pdCBsaXN0ZW5lcnMgYXJlIHJlZ2lzdGVyZWQgYnkgY29uc3VtZXJzIG9mIHRoZSBwcm92aWRlci5cbiAgICAgICAqL1xuICAgICAgdGhpcy5pbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGluc3RhbmNlSWRlbnRpZmllcik7XG5cbiAgICAgIC8qKlxuICAgICAgICogT3JkZXIgaXMgaW1wb3J0YW50XG4gICAgICAgKiBvbkluc3RhbmNlQ3JlYXRlZCgpIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgdGhpcy5pbnN0YW5jZXMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpOyB3aGljaFxuICAgICAgICogbWFrZXMgYGlzSW5pdGlhbGl6ZWQoKWAgcmV0dXJuIHRydWUuXG4gICAgICAgKi9cbiAgICAgIGlmICh0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKFxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIsXG4gICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXIsXG4gICAgICAgICAgICBpbnN0YW5jZVxuICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2tcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpbnN0YW5jZSB8fCBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoXG4gICAgaWRlbnRpZmllcjogc3RyaW5nID0gREVGQVVMVF9FTlRSWV9OQU1FXG4gICk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgPyBpZGVudGlmaWVyIDogREVGQVVMVF9FTlRSWV9OQU1FO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaWRlbnRpZmllcjsgLy8gYXNzdW1lIG11bHRpcGxlIGluc3RhbmNlcyBhcmUgc3VwcG9ydGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIHByb3ZpZGVkLlxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkQXV0b0luaXRpYWxpemUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgICEhdGhpcy5jb21wb25lbnQgJiZcbiAgICAgIHRoaXMuY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlICE9PSBJbnN0YW50aWF0aW9uTW9kZS5FWFBMSUNJVFxuICAgICk7XG4gIH1cbn1cblxuLy8gdW5kZWZpbmVkIHNob3VsZCBiZSBwYXNzZWQgdG8gdGhlIHNlcnZpY2UgZmFjdG9yeSBmb3IgdGhlIGRlZmF1bHQgaW5zdGFuY2VcbmZ1bmN0aW9uIG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGlkZW50aWZpZXI6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiBpZGVudGlmaWVyID09PSBERUZBVUxUX0VOVFJZX05BTUUgPyB1bmRlZmluZWQgOiBpZGVudGlmaWVyO1xufVxuXG5mdW5jdGlvbiBpc0NvbXBvbmVudEVhZ2VyPFQgZXh0ZW5kcyBOYW1lPihjb21wb25lbnQ6IENvbXBvbmVudDxUPik6IGJvb2xlYW4ge1xuICByZXR1cm4gY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlID09PSBJbnN0YW50aWF0aW9uTW9kZS5FQUdFUjtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFByb3ZpZGVyIH0gZnJvbSAnLi9wcm92aWRlcic7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBOYW1lIH0gZnJvbSAnLi90eXBlcyc7XG5cbi8qKlxuICogQ29tcG9uZW50Q29udGFpbmVyIHRoYXQgcHJvdmlkZXMgUHJvdmlkZXJzIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxuICovXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50Q29udGFpbmVyIHtcbiAgcHJpdmF0ZSByZWFkb25seSBwcm92aWRlcnMgPSBuZXcgTWFwPHN0cmluZywgUHJvdmlkZXI8TmFtZT4+KCk7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBuYW1lOiBzdHJpbmcpIHt9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IGJlaW5nIGFkZGVkXG4gICAqIEBwYXJhbSBvdmVyd3JpdGUgV2hlbiBhIGNvbXBvbmVudCB3aXRoIHRoZSBzYW1lIG5hbWUgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkLFxuICAgKiBpZiBvdmVyd3JpdGUgaXMgdHJ1ZTogb3ZlcndyaXRlIHRoZSBleGlzdGluZyBjb21wb25lbnQgd2l0aCB0aGUgbmV3IGNvbXBvbmVudCBhbmQgY3JlYXRlIGEgbmV3XG4gICAqIHByb3ZpZGVyIHdpdGggdGhlIG5ldyBjb21wb25lbnQuIEl0IGNhbiBiZSB1c2VmdWwgaW4gdGVzdHMgd2hlcmUgeW91IHdhbnQgdG8gdXNlIGRpZmZlcmVudCBtb2Nrc1xuICAgKiBmb3IgZGlmZmVyZW50IHRlc3RzLlxuICAgKiBpZiBvdmVyd3JpdGUgaXMgZmFsc2U6IHRocm93IGFuIGV4Y2VwdGlvblxuICAgKi9cbiAgYWRkQ29tcG9uZW50PFQgZXh0ZW5kcyBOYW1lPihjb21wb25lbnQ6IENvbXBvbmVudDxUPik6IHZvaWQge1xuICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XG4gICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgd2l0aCAke3RoaXMubmFtZX1gXG4gICAgICApO1xuICAgIH1cblxuICAgIHByb3ZpZGVyLnNldENvbXBvbmVudChjb21wb25lbnQpO1xuICB9XG5cbiAgYWRkT3JPdmVyd3JpdGVDb21wb25lbnQ8VCBleHRlbmRzIE5hbWU+KGNvbXBvbmVudDogQ29tcG9uZW50PFQ+KTogdm9pZCB7XG4gICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcbiAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xuICAgICAgLy8gZGVsZXRlIHRoZSBleGlzdGluZyBwcm92aWRlciBmcm9tIHRoZSBjb250YWluZXIsIHNvIHdlIGNhbiByZWdpc3RlciB0aGUgbmV3IGNvbXBvbmVudFxuICAgICAgdGhpcy5wcm92aWRlcnMuZGVsZXRlKGNvbXBvbmVudC5uYW1lKTtcbiAgICB9XG5cbiAgICB0aGlzLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIGdldFByb3ZpZGVyIHByb3ZpZGVzIGEgdHlwZSBzYWZlIGludGVyZmFjZSB3aGVyZSBpdCBjYW4gb25seSBiZSBjYWxsZWQgd2l0aCBhIGZpZWxkIG5hbWVcbiAgICogcHJlc2VudCBpbiBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlLlxuICAgKlxuICAgKiBGaXJlYmFzZSBTREtzIHByb3ZpZGluZyBzZXJ2aWNlcyBzaG91bGQgZXh0ZW5kIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UgdG8gcmVnaXN0ZXJcbiAgICogdGhlbXNlbHZlcy5cbiAgICovXG4gIGdldFByb3ZpZGVyPFQgZXh0ZW5kcyBOYW1lPihuYW1lOiBUKTogUHJvdmlkZXI8VD4ge1xuICAgIGlmICh0aGlzLnByb3ZpZGVycy5oYXMobmFtZSkpIHtcbiAgICAgIHJldHVybiAodGhpcy5wcm92aWRlcnMuZ2V0KG5hbWUpIGFzIHVua25vd24pIGFzIFByb3ZpZGVyPFQ+O1xuICAgIH1cblxuICAgIC8vIGNyZWF0ZSBhIFByb3ZpZGVyIGZvciBhIHNlcnZpY2UgdGhhdCBoYXNuJ3QgcmVnaXN0ZXJlZCB3aXRoIEZpcmViYXNlXG4gICAgY29uc3QgcHJvdmlkZXIgPSBuZXcgUHJvdmlkZXI8VD4obmFtZSwgdGhpcyk7XG4gICAgdGhpcy5wcm92aWRlcnMuc2V0KG5hbWUsIChwcm92aWRlciBhcyB1bmtub3duKSBhcyBQcm92aWRlcjxOYW1lPik7XG5cbiAgICByZXR1cm4gcHJvdmlkZXIgYXMgUHJvdmlkZXI8VD47XG4gIH1cblxuICBnZXRQcm92aWRlcnMoKTogQXJyYXk8UHJvdmlkZXI8TmFtZT4+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnByb3ZpZGVycy52YWx1ZXMoKSk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUF5QkE7Ozs7Ozs7Ozs7Ozs7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFuQkE7Ozs7O0FBSUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBR0E7O0FDdEVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7QUNqQkE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNkJBOzs7Ozs7OztBQWVBO0FBQ0E7QUFDQTtBQVpBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFLQTs7Ozs7OztBQU1BOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUtBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFOQTs7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBM0JBO0FBQ0E7QUE2Q0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFLQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFkQTs7QUFpQkE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBaENBO0FBQ0E7QUFrQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTs7O0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBZkE7QUFDQTtBQUNBO0FBaUJBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFEQTs7OztBQU9BO0FBQ0E7QUFDQTs7Ozs7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFEQTtBQUdBO0FBTEE7O0FBU0E7QUFDQTs7Ozs7Ozs7Ozs7O0FBbERBO0FBQ0E7QUFvREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUhBOzs7O0FBUUE7Ozs7OztBQUNBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFEQTs7QUFBQTtBQUdBO0FBSkE7QUFNQTtBQURBOztBQUFBO0FBR0E7QUFSQTtBQUNBOztBQURBO0FBQ0E7Ozs7Ozs7QUFKQTtBQUNBO0FBY0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFDQTtBQUdBOzs7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7OztBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUFFQTtBQWhDQTs7Ozs7Ozs7Ozs7QUEyQ0E7OztBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBYkE7Ozs7Ozs7QUFzQkE7OztBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFJQTtBQUNBOzs7Ozs7Ozs7Ozs7QUFkQTtBQUNBO0FBZ0JBO0FBQ0E7QUFDQTtBQUFBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOzs7Ozs7O0FBT0E7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFEQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6Q0E7QUFDQTtBQTJDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQVBBO0FBQ0E7QUFTQTtBQUNBO0FBRUE7QUFGQTtBQURBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQ3pYQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFxQkE7Ozs7Ozs7O0FBTUE7QUFBQTtBQUZBO0FBRUE7Ozs7Ozs7Ozs7OztBQVdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFQQTs7Ozs7Ozs7OztBQWlCQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFUQTtBQUNBO0FBV0E7QUFDQTtBQURBO0FBQ0E7QUFFQTs7OyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@firebase/component/dist/index.esm.js\n");

/***/ }),

/***/ "./node_modules/@firebase/installations/dist/index.esm2017.js":
/*!********************************************************************!*\
  !*** ./node_modules/@firebase/installations/dist/index.esm2017.js ***!
  \********************************************************************/
/*! exports provided: deleteInstallations, getId, getInstallations, getToken, onIdChange */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deleteInstallations\", function() { return deleteInstallations; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getId\", function() { return _getId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getInstallations\", function() { return getInstallations; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getToken\", function() { return _getToken; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"onIdChange\", function() { return onIdChange; });\n/* harmony import */ var _firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/app */ \"./node_modules/@firebase/app/dist/index.esm2017.js\");\n/* harmony import */ var _firebase_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @firebase/component */ \"./node_modules/@firebase/component/dist/index.esm.js\");\n/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @firebase/util */ \"./node_modules/@firebase/util/dist/index.esm2017.js\");\n/* harmony import */ var idb__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! idb */ \"./node_modules/idb/build/idb.js\");\n/* harmony import */ var idb__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(idb__WEBPACK_IMPORTED_MODULE_3__);\nvar _ERROR_DESCRIPTION_MA;\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\n\n\n\n\nvar name = \"@firebase/installations\";\nvar version = \"0.5.2\";\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar PENDING_TIMEOUT_MS = 10000;\nvar PACKAGE_VERSION = \"w:\".concat(version);\nvar INTERNAL_AUTH_VERSION = 'FIS_v2';\nvar INSTALLATIONS_API_URL = 'https://firebaseinstallations.googleapis.com/v1';\nvar TOKEN_EXPIRATION_BUFFER = 60 * 60 * 1000; // One hour\n\nvar SERVICE = 'installations';\nvar SERVICE_NAME = 'Installations';\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar ERROR_DESCRIPTION_MAP = (_ERROR_DESCRIPTION_MA = {}, _defineProperty(_ERROR_DESCRIPTION_MA, \"missing-app-config-values\"\n/* MISSING_APP_CONFIG_VALUES */\n, 'Missing App configuration value: \"{$valueName}\"'), _defineProperty(_ERROR_DESCRIPTION_MA, \"not-registered\"\n/* NOT_REGISTERED */\n, 'Firebase Installation is not registered.'), _defineProperty(_ERROR_DESCRIPTION_MA, \"installation-not-found\"\n/* INSTALLATION_NOT_FOUND */\n, 'Firebase Installation not found.'), _defineProperty(_ERROR_DESCRIPTION_MA, \"request-failed\"\n/* REQUEST_FAILED */\n, '{$requestName} request failed with error \"{$serverCode} {$serverStatus}: {$serverMessage}\"'), _defineProperty(_ERROR_DESCRIPTION_MA, \"app-offline\"\n/* APP_OFFLINE */\n, 'Could not process request. Application offline.'), _defineProperty(_ERROR_DESCRIPTION_MA, \"delete-pending-registration\"\n/* DELETE_PENDING_REGISTRATION */\n, \"Can't delete installation while there is a pending registration request.\"), _ERROR_DESCRIPTION_MA);\nvar ERROR_FACTORY = new _firebase_util__WEBPACK_IMPORTED_MODULE_2__[\"ErrorFactory\"](SERVICE, SERVICE_NAME, ERROR_DESCRIPTION_MAP);\n/** Returns true if error is a FirebaseError that is based on an error from the server. */\n\nfunction isServerError(error) {\n  return error instanceof _firebase_util__WEBPACK_IMPORTED_MODULE_2__[\"FirebaseError\"] && error.code.includes(\"request-failed\"\n  /* REQUEST_FAILED */\n  );\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction getInstallationsEndpoint(_ref) {\n  var projectId = _ref.projectId;\n  return \"\".concat(INSTALLATIONS_API_URL, \"/projects/\").concat(projectId, \"/installations\");\n}\n\nfunction extractAuthTokenInfoFromResponse(response) {\n  return {\n    token: response.token,\n    requestStatus: 2\n    /* COMPLETED */\n    ,\n    expiresIn: getExpiresInFromResponseExpiresIn(response.expiresIn),\n    creationTime: Date.now()\n  };\n}\n\nfunction getErrorFromResponse(requestName, response) {\n  var responseJson, errorData;\n  return regeneratorRuntime.async(function getErrorFromResponse$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return regeneratorRuntime.awrap(response.json());\n\n        case 2:\n          responseJson = _context.sent;\n          errorData = responseJson.error;\n          return _context.abrupt(\"return\", ERROR_FACTORY.create(\"request-failed\"\n          /* REQUEST_FAILED */\n          ,\n          /* REQUEST_FAILED */\n          {\n            requestName: requestName,\n            serverCode: errorData.code,\n            serverMessage: errorData.message,\n            serverStatus: errorData.status\n          }));\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\n\nfunction getHeaders(_ref2) {\n  var apiKey = _ref2.apiKey;\n  return new Headers({\n    'Content-Type': 'application/json',\n    Accept: 'application/json',\n    'x-goog-api-key': apiKey\n  });\n}\n\nfunction getHeadersWithAuth(appConfig, _ref3) {\n  var refreshToken = _ref3.refreshToken;\n  var headers = getHeaders(appConfig);\n  headers.append('Authorization', getAuthorizationHeader(refreshToken));\n  return headers;\n}\n/**\r\n * Calls the passed in fetch wrapper and returns the response.\r\n * If the returned response has a status of 5xx, re-runs the function once and\r\n * returns the response.\r\n */\n\n\nfunction retryIfServerError(fn) {\n  var result;\n  return regeneratorRuntime.async(function retryIfServerError$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return regeneratorRuntime.awrap(fn());\n\n        case 2:\n          result = _context2.sent;\n\n          if (!(result.status >= 500 && result.status < 600)) {\n            _context2.next = 5;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", fn());\n\n        case 5:\n          return _context2.abrupt(\"return\", result);\n\n        case 6:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n\nfunction getExpiresInFromResponseExpiresIn(responseExpiresIn) {\n  // This works because the server will never respond with fractions of a second.\n  return Number(responseExpiresIn.replace('s', '000'));\n}\n\nfunction getAuthorizationHeader(refreshToken) {\n  return \"\".concat(INTERNAL_AUTH_VERSION, \" \").concat(refreshToken);\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction createInstallationRequest(appConfig, _ref4) {\n  var fid, endpoint, headers, body, request, response, responseValue, registeredInstallationEntry;\n  return regeneratorRuntime.async(function createInstallationRequest$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          fid = _ref4.fid;\n          endpoint = getInstallationsEndpoint(appConfig);\n          headers = getHeaders(appConfig);\n          body = {\n            fid: fid,\n            authVersion: INTERNAL_AUTH_VERSION,\n            appId: appConfig.appId,\n            sdkVersion: PACKAGE_VERSION\n          };\n          request = {\n            method: 'POST',\n            headers: headers,\n            body: JSON.stringify(body)\n          };\n          _context3.next = 7;\n          return regeneratorRuntime.awrap(retryIfServerError(function () {\n            return fetch(endpoint, request);\n          }));\n\n        case 7:\n          response = _context3.sent;\n\n          if (!response.ok) {\n            _context3.next = 16;\n            break;\n          }\n\n          _context3.next = 11;\n          return regeneratorRuntime.awrap(response.json());\n\n        case 11:\n          responseValue = _context3.sent;\n          registeredInstallationEntry = {\n            fid: responseValue.fid || fid,\n            registrationStatus: 2\n            /* COMPLETED */\n            ,\n            refreshToken: responseValue.refreshToken,\n            authToken: extractAuthTokenInfoFromResponse(responseValue.authToken)\n          };\n          return _context3.abrupt(\"return\", registeredInstallationEntry);\n\n        case 16:\n          _context3.next = 18;\n          return regeneratorRuntime.awrap(getErrorFromResponse('Create Installation', response));\n\n        case 18:\n          throw _context3.sent;\n\n        case 19:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/** Returns a promise that resolves after given time passes. */\n\n\nfunction sleep(ms) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, ms);\n  });\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction bufferToBase64UrlSafe(array) {\n  var b64 = btoa(String.fromCharCode.apply(String, _toConsumableArray(array)));\n  return b64.replace(/\\+/g, '-').replace(/\\//g, '_');\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar VALID_FID_PATTERN = /^[cdef][\\w-]{21}$/;\nvar INVALID_FID = '';\n/**\r\n * Generates a new FID using random values from Web Crypto API.\r\n * Returns an empty string if FID generation fails for any reason.\r\n */\n\nfunction generateFid() {\n  try {\n    // A valid FID has exactly 22 base64 characters, which is 132 bits, or 16.5\n    // bytes. our implementation generates a 17 byte array instead.\n    var fidByteArray = new Uint8Array(17);\n    var crypto = self.crypto || self.msCrypto;\n    crypto.getRandomValues(fidByteArray); // Replace the first 4 random bits with the constant FID header of 0b0111.\n\n    fidByteArray[0] = 112 + fidByteArray[0] % 16;\n    var fid = encode(fidByteArray);\n    return VALID_FID_PATTERN.test(fid) ? fid : INVALID_FID;\n  } catch (_a) {\n    // FID generation errored\n    return INVALID_FID;\n  }\n}\n/** Converts a FID Uint8Array to a base64 string representation. */\n\n\nfunction encode(fidByteArray) {\n  var b64String = bufferToBase64UrlSafe(fidByteArray); // Remove the 23rd character that was added because of the extra 4 bits at the\n  // end of our 17 byte array, and the '=' padding.\n\n  return b64String.substr(0, 22);\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/** Returns a string key that can be used to identify the app. */\n\n\nfunction getKey(appConfig) {\n  return \"\".concat(appConfig.appName, \"!\").concat(appConfig.appId);\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar fidChangeCallbacks = new Map();\n/**\r\n * Calls the onIdChange callbacks with the new FID value, and broadcasts the\r\n * change to other tabs.\r\n */\n\nfunction fidChanged(appConfig, fid) {\n  var key = getKey(appConfig);\n  callFidChangeCallbacks(key, fid);\n  broadcastFidChange(key, fid);\n}\n\nfunction addCallback(appConfig, callback) {\n  // Open the broadcast channel if it's not already open,\n  // to be able to listen to change events from other tabs.\n  getBroadcastChannel();\n  var key = getKey(appConfig);\n  var callbackSet = fidChangeCallbacks.get(key);\n\n  if (!callbackSet) {\n    callbackSet = new Set();\n    fidChangeCallbacks.set(key, callbackSet);\n  }\n\n  callbackSet.add(callback);\n}\n\nfunction removeCallback(appConfig, callback) {\n  var key = getKey(appConfig);\n  var callbackSet = fidChangeCallbacks.get(key);\n\n  if (!callbackSet) {\n    return;\n  }\n\n  callbackSet[\"delete\"](callback);\n\n  if (callbackSet.size === 0) {\n    fidChangeCallbacks[\"delete\"](key);\n  } // Close broadcast channel if there are no more callbacks.\n\n\n  closeBroadcastChannel();\n}\n\nfunction callFidChangeCallbacks(key, fid) {\n  var callbacks = fidChangeCallbacks.get(key);\n\n  if (!callbacks) {\n    return;\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = callbacks[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var callback = _step.value;\n      callback(fid);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\nfunction broadcastFidChange(key, fid) {\n  var channel = getBroadcastChannel();\n\n  if (channel) {\n    channel.postMessage({\n      key: key,\n      fid: fid\n    });\n  }\n\n  closeBroadcastChannel();\n}\n\nvar broadcastChannel = null;\n/** Opens and returns a BroadcastChannel if it is supported by the browser. */\n\nfunction getBroadcastChannel() {\n  if (!broadcastChannel && 'BroadcastChannel' in self) {\n    broadcastChannel = new BroadcastChannel('[Firebase] FID Change');\n\n    broadcastChannel.onmessage = function (e) {\n      callFidChangeCallbacks(e.data.key, e.data.fid);\n    };\n  }\n\n  return broadcastChannel;\n}\n\nfunction closeBroadcastChannel() {\n  if (fidChangeCallbacks.size === 0 && broadcastChannel) {\n    broadcastChannel.close();\n    broadcastChannel = null;\n  }\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar DATABASE_NAME = 'firebase-installations-database';\nvar DATABASE_VERSION = 1;\nvar OBJECT_STORE_NAME = 'firebase-installations-store';\nvar dbPromise = null;\n\nfunction getDbPromise() {\n  if (!dbPromise) {\n    dbPromise = Object(idb__WEBPACK_IMPORTED_MODULE_3__[\"openDb\"])(DATABASE_NAME, DATABASE_VERSION, function (upgradeDB) {\n      // We don't use 'break' in this switch statement, the fall-through\n      // behavior is what we want, because if there are multiple versions between\n      // the old version and the current version, we want ALL the migrations\n      // that correspond to those versions to run, not only the last one.\n      // eslint-disable-next-line default-case\n      switch (upgradeDB.oldVersion) {\n        case 0:\n          upgradeDB.createObjectStore(OBJECT_STORE_NAME);\n      }\n    });\n  }\n\n  return dbPromise;\n}\n/** Assigns or overwrites the record for the given key with the given value. */\n\n\nfunction set(appConfig, value) {\n  var key, db, tx, objectStore, oldValue;\n  return regeneratorRuntime.async(function set$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          key = getKey(appConfig);\n          _context4.next = 3;\n          return regeneratorRuntime.awrap(getDbPromise());\n\n        case 3:\n          db = _context4.sent;\n          tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n          objectStore = tx.objectStore(OBJECT_STORE_NAME);\n          _context4.next = 8;\n          return regeneratorRuntime.awrap(objectStore.get(key));\n\n        case 8:\n          oldValue = _context4.sent;\n          _context4.next = 11;\n          return regeneratorRuntime.awrap(objectStore.put(value, key));\n\n        case 11:\n          _context4.next = 13;\n          return regeneratorRuntime.awrap(tx.complete);\n\n        case 13:\n          if (!oldValue || oldValue.fid !== value.fid) {\n            fidChanged(appConfig, value.fid);\n          }\n\n          return _context4.abrupt(\"return\", value);\n\n        case 15:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  });\n}\n/** Removes record(s) from the objectStore that match the given key. */\n\n\nfunction remove(appConfig) {\n  var key, db, tx;\n  return regeneratorRuntime.async(function remove$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          key = getKey(appConfig);\n          _context5.next = 3;\n          return regeneratorRuntime.awrap(getDbPromise());\n\n        case 3:\n          db = _context5.sent;\n          tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n          _context5.next = 7;\n          return regeneratorRuntime.awrap(tx.objectStore(OBJECT_STORE_NAME)[\"delete\"](key));\n\n        case 7:\n          _context5.next = 9;\n          return regeneratorRuntime.awrap(tx.complete);\n\n        case 9:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  });\n}\n/**\r\n * Atomically updates a record with the result of updateFn, which gets\r\n * called with the current value. If newValue is undefined, the record is\r\n * deleted instead.\r\n * @return Updated value\r\n */\n\n\nfunction update(appConfig, updateFn) {\n  var key, db, tx, store, oldValue, newValue;\n  return regeneratorRuntime.async(function update$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          key = getKey(appConfig);\n          _context6.next = 3;\n          return regeneratorRuntime.awrap(getDbPromise());\n\n        case 3:\n          db = _context6.sent;\n          tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n          store = tx.objectStore(OBJECT_STORE_NAME);\n          _context6.next = 8;\n          return regeneratorRuntime.awrap(store.get(key));\n\n        case 8:\n          oldValue = _context6.sent;\n          newValue = updateFn(oldValue);\n\n          if (!(newValue === undefined)) {\n            _context6.next = 15;\n            break;\n          }\n\n          _context6.next = 13;\n          return regeneratorRuntime.awrap(store[\"delete\"](key));\n\n        case 13:\n          _context6.next = 17;\n          break;\n\n        case 15:\n          _context6.next = 17;\n          return regeneratorRuntime.awrap(store.put(newValue, key));\n\n        case 17:\n          _context6.next = 19;\n          return regeneratorRuntime.awrap(tx.complete);\n\n        case 19:\n          if (newValue && (!oldValue || oldValue.fid !== newValue.fid)) {\n            fidChanged(appConfig, newValue.fid);\n          }\n\n          return _context6.abrupt(\"return\", newValue);\n\n        case 21:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  });\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Updates and returns the InstallationEntry from the database.\r\n * Also triggers a registration request if it is necessary and possible.\r\n */\n\n\nfunction getInstallationEntry(appConfig) {\n  var registrationPromise, installationEntry;\n  return regeneratorRuntime.async(function getInstallationEntry$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return regeneratorRuntime.awrap(update(appConfig, function (oldEntry) {\n            var installationEntry = updateOrCreateInstallationEntry(oldEntry);\n            var entryWithPromise = triggerRegistrationIfNecessary(appConfig, installationEntry);\n            registrationPromise = entryWithPromise.registrationPromise;\n            return entryWithPromise.installationEntry;\n          }));\n\n        case 2:\n          installationEntry = _context7.sent;\n\n          if (!(installationEntry.fid === INVALID_FID)) {\n            _context7.next = 8;\n            break;\n          }\n\n          _context7.next = 6;\n          return regeneratorRuntime.awrap(registrationPromise);\n\n        case 6:\n          _context7.t0 = _context7.sent;\n          return _context7.abrupt(\"return\", {\n            installationEntry: _context7.t0\n          });\n\n        case 8:\n          return _context7.abrupt(\"return\", {\n            installationEntry: installationEntry,\n            registrationPromise: registrationPromise\n          });\n\n        case 9:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  });\n}\n/**\r\n * Creates a new Installation Entry if one does not exist.\r\n * Also clears timed out pending requests.\r\n */\n\n\nfunction updateOrCreateInstallationEntry(oldEntry) {\n  var entry = oldEntry || {\n    fid: generateFid(),\n    registrationStatus: 0\n    /* NOT_STARTED */\n\n  };\n  return clearTimedOutRequest(entry);\n}\n/**\r\n * If the Firebase Installation is not registered yet, this will trigger the\r\n * registration and return an InProgressInstallationEntry.\r\n *\r\n * If registrationPromise does not exist, the installationEntry is guaranteed\r\n * to be registered.\r\n */\n\n\nfunction triggerRegistrationIfNecessary(appConfig, installationEntry) {\n  if (installationEntry.registrationStatus === 0\n  /* NOT_STARTED */\n  ) {\n      if (!navigator.onLine) {\n        // Registration required but app is offline.\n        var registrationPromiseWithError = Promise.reject(ERROR_FACTORY.create(\"app-offline\"\n        /* APP_OFFLINE */\n        ));\n        return {\n          installationEntry: installationEntry,\n          registrationPromise: registrationPromiseWithError\n        };\n      } // Try registering. Change status to IN_PROGRESS.\n\n\n      var inProgressEntry = {\n        fid: installationEntry.fid,\n        registrationStatus: 1\n        /* IN_PROGRESS */\n        ,\n        registrationTime: Date.now()\n      };\n      var registrationPromise = registerInstallation(appConfig, inProgressEntry);\n      return {\n        installationEntry: inProgressEntry,\n        registrationPromise: registrationPromise\n      };\n    } else if (installationEntry.registrationStatus === 1\n  /* IN_PROGRESS */\n  ) {\n      return {\n        installationEntry: installationEntry,\n        registrationPromise: waitUntilFidRegistration(appConfig)\n      };\n    } else {\n    return {\n      installationEntry: installationEntry\n    };\n  }\n}\n/** This will be executed only once for each new Firebase Installation. */\n\n\nfunction registerInstallation(appConfig, installationEntry) {\n  var registeredInstallationEntry;\n  return regeneratorRuntime.async(function registerInstallation$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.prev = 0;\n          _context8.next = 3;\n          return regeneratorRuntime.awrap(createInstallationRequest(appConfig, installationEntry));\n\n        case 3:\n          registeredInstallationEntry = _context8.sent;\n          return _context8.abrupt(\"return\", set(appConfig, registeredInstallationEntry));\n\n        case 7:\n          _context8.prev = 7;\n          _context8.t0 = _context8[\"catch\"](0);\n\n          if (!(isServerError(_context8.t0) && _context8.t0.customData.serverCode === 409)) {\n            _context8.next = 14;\n            break;\n          }\n\n          _context8.next = 12;\n          return regeneratorRuntime.awrap(remove(appConfig));\n\n        case 12:\n          _context8.next = 16;\n          break;\n\n        case 14:\n          _context8.next = 16;\n          return regeneratorRuntime.awrap(set(appConfig, {\n            fid: installationEntry.fid,\n            registrationStatus: 0\n            /* NOT_STARTED */\n\n          }));\n\n        case 16:\n          throw _context8.t0;\n\n        case 17:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, null, null, [[0, 7]]);\n}\n/** Call if FID registration is pending in another request. */\n\n\nfunction waitUntilFidRegistration(appConfig) {\n  var entry, _await$getInstallatio, installationEntry, registrationPromise;\n\n  return regeneratorRuntime.async(function waitUntilFidRegistration$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          _context9.next = 2;\n          return regeneratorRuntime.awrap(updateInstallationRequest(appConfig));\n\n        case 2:\n          entry = _context9.sent;\n\n        case 3:\n          if (!(entry.registrationStatus === 1\n          /* IN_PROGRESS */\n          )) {\n            _context9.next = 11;\n            break;\n          }\n\n          _context9.next = 6;\n          return regeneratorRuntime.awrap(sleep(100));\n\n        case 6:\n          _context9.next = 8;\n          return regeneratorRuntime.awrap(updateInstallationRequest(appConfig));\n\n        case 8:\n          entry = _context9.sent;\n          _context9.next = 3;\n          break;\n\n        case 11:\n          if (!(entry.registrationStatus === 0\n          /* NOT_STARTED */\n          )) {\n            _context9.next = 22;\n            break;\n          }\n\n          _context9.next = 14;\n          return regeneratorRuntime.awrap(getInstallationEntry(appConfig));\n\n        case 14:\n          _await$getInstallatio = _context9.sent;\n          installationEntry = _await$getInstallatio.installationEntry;\n          registrationPromise = _await$getInstallatio.registrationPromise;\n\n          if (!registrationPromise) {\n            _context9.next = 21;\n            break;\n          }\n\n          return _context9.abrupt(\"return\", registrationPromise);\n\n        case 21:\n          return _context9.abrupt(\"return\", installationEntry);\n\n        case 22:\n          return _context9.abrupt(\"return\", entry);\n\n        case 23:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  });\n}\n/**\r\n * Called only if there is a CreateInstallation request in progress.\r\n *\r\n * Updates the InstallationEntry in the DB based on the status of the\r\n * CreateInstallation request.\r\n *\r\n * Returns the updated InstallationEntry.\r\n */\n\n\nfunction updateInstallationRequest(appConfig) {\n  return update(appConfig, function (oldEntry) {\n    if (!oldEntry) {\n      throw ERROR_FACTORY.create(\"installation-not-found\"\n      /* INSTALLATION_NOT_FOUND */\n      );\n    }\n\n    return clearTimedOutRequest(oldEntry);\n  });\n}\n\nfunction clearTimedOutRequest(entry) {\n  if (hasInstallationRequestTimedOut(entry)) {\n    return {\n      fid: entry.fid,\n      registrationStatus: 0\n      /* NOT_STARTED */\n\n    };\n  }\n\n  return entry;\n}\n\nfunction hasInstallationRequestTimedOut(installationEntry) {\n  return installationEntry.registrationStatus === 1\n  /* IN_PROGRESS */\n  && installationEntry.registrationTime + PENDING_TIMEOUT_MS < Date.now();\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction generateAuthTokenRequest(_ref5, installationEntry) {\n  var appConfig, platformLoggerProvider, endpoint, headers, platformLogger, body, request, response, responseValue, completedAuthToken;\n  return regeneratorRuntime.async(function generateAuthTokenRequest$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          appConfig = _ref5.appConfig, platformLoggerProvider = _ref5.platformLoggerProvider;\n          endpoint = getGenerateAuthTokenEndpoint(appConfig, installationEntry);\n          headers = getHeadersWithAuth(appConfig, installationEntry); // If platform logger exists, add the platform info string to the header.\n\n          platformLogger = platformLoggerProvider.getImmediate({\n            optional: true\n          });\n\n          if (platformLogger) {\n            headers.append('x-firebase-client', platformLogger.getPlatformInfoString());\n          }\n\n          body = {\n            installation: {\n              sdkVersion: PACKAGE_VERSION\n            }\n          };\n          request = {\n            method: 'POST',\n            headers: headers,\n            body: JSON.stringify(body)\n          };\n          _context10.next = 9;\n          return regeneratorRuntime.awrap(retryIfServerError(function () {\n            return fetch(endpoint, request);\n          }));\n\n        case 9:\n          response = _context10.sent;\n\n          if (!response.ok) {\n            _context10.next = 18;\n            break;\n          }\n\n          _context10.next = 13;\n          return regeneratorRuntime.awrap(response.json());\n\n        case 13:\n          responseValue = _context10.sent;\n          completedAuthToken = extractAuthTokenInfoFromResponse(responseValue);\n          return _context10.abrupt(\"return\", completedAuthToken);\n\n        case 18:\n          _context10.next = 20;\n          return regeneratorRuntime.awrap(getErrorFromResponse('Generate Auth Token', response));\n\n        case 20:\n          throw _context10.sent;\n\n        case 21:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  });\n}\n\nfunction getGenerateAuthTokenEndpoint(appConfig, _ref6) {\n  var fid = _ref6.fid;\n  return \"\".concat(getInstallationsEndpoint(appConfig), \"/\").concat(fid, \"/authTokens:generate\");\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Returns a valid authentication token for the installation. Generates a new\r\n * token if one doesn't exist, is expired or about to expire.\r\n *\r\n * Should only be called if the Firebase Installation is registered.\r\n */\n\n\nfunction refreshAuthToken(installations) {\n  var forceRefresh,\n      tokenPromise,\n      entry,\n      authToken,\n      _args11 = arguments;\n  return regeneratorRuntime.async(function refreshAuthToken$(_context11) {\n    while (1) {\n      switch (_context11.prev = _context11.next) {\n        case 0:\n          forceRefresh = _args11.length > 1 && _args11[1] !== undefined ? _args11[1] : false;\n          _context11.next = 3;\n          return regeneratorRuntime.awrap(update(installations.appConfig, function (oldEntry) {\n            if (!isEntryRegistered(oldEntry)) {\n              throw ERROR_FACTORY.create(\"not-registered\"\n              /* NOT_REGISTERED */\n              );\n            }\n\n            var oldAuthToken = oldEntry.authToken;\n\n            if (!forceRefresh && isAuthTokenValid(oldAuthToken)) {\n              // There is a valid token in the DB.\n              return oldEntry;\n            } else if (oldAuthToken.requestStatus === 1\n            /* IN_PROGRESS */\n            )\n              /* IN_PROGRESS */\n              {\n                // There already is a token request in progress.\n                tokenPromise = waitUntilAuthTokenRequest(installations, forceRefresh);\n                return oldEntry;\n              } else {\n              // No token or token expired.\n              if (!navigator.onLine) {\n                throw ERROR_FACTORY.create(\"app-offline\"\n                /* APP_OFFLINE */\n                );\n              }\n\n              var inProgressEntry = makeAuthTokenRequestInProgressEntry(oldEntry);\n              tokenPromise = fetchAuthTokenFromServer(installations, inProgressEntry);\n              return inProgressEntry;\n            }\n          }));\n\n        case 3:\n          entry = _context11.sent;\n\n          if (!tokenPromise) {\n            _context11.next = 10;\n            break;\n          }\n\n          _context11.next = 7;\n          return regeneratorRuntime.awrap(tokenPromise);\n\n        case 7:\n          _context11.t0 = _context11.sent;\n          _context11.next = 11;\n          break;\n\n        case 10:\n          _context11.t0 = entry.authToken;\n\n        case 11:\n          authToken = _context11.t0;\n          return _context11.abrupt(\"return\", authToken);\n\n        case 13:\n        case \"end\":\n          return _context11.stop();\n      }\n    }\n  });\n}\n/**\r\n * Call only if FID is registered and Auth Token request is in progress.\r\n *\r\n * Waits until the current pending request finishes. If the request times out,\r\n * tries once in this thread as well.\r\n */\n\n\nfunction waitUntilAuthTokenRequest(installations, forceRefresh) {\n  var entry, authToken;\n  return regeneratorRuntime.async(function waitUntilAuthTokenRequest$(_context12) {\n    while (1) {\n      switch (_context12.prev = _context12.next) {\n        case 0:\n          _context12.next = 2;\n          return regeneratorRuntime.awrap(updateAuthTokenRequest(installations.appConfig));\n\n        case 2:\n          entry = _context12.sent;\n\n        case 3:\n          if (!(entry.authToken.requestStatus === 1\n          /* IN_PROGRESS */\n          )) {\n            _context12.next = 11;\n            break;\n          }\n\n          _context12.next = 6;\n          return regeneratorRuntime.awrap(sleep(100));\n\n        case 6:\n          _context12.next = 8;\n          return regeneratorRuntime.awrap(updateAuthTokenRequest(installations.appConfig));\n\n        case 8:\n          entry = _context12.sent;\n          _context12.next = 3;\n          break;\n\n        case 11:\n          authToken = entry.authToken;\n\n          if (!(authToken.requestStatus === 0\n          /* NOT_STARTED */\n          )) {\n            _context12.next = 16;\n            break;\n          }\n\n          return _context12.abrupt(\"return\", refreshAuthToken(installations, forceRefresh));\n\n        case 16:\n          return _context12.abrupt(\"return\", authToken);\n\n        case 17:\n        case \"end\":\n          return _context12.stop();\n      }\n    }\n  });\n}\n/**\r\n * Called only if there is a GenerateAuthToken request in progress.\r\n *\r\n * Updates the InstallationEntry in the DB based on the status of the\r\n * GenerateAuthToken request.\r\n *\r\n * Returns the updated InstallationEntry.\r\n */\n\n\nfunction updateAuthTokenRequest(appConfig) {\n  return update(appConfig, function (oldEntry) {\n    if (!isEntryRegistered(oldEntry)) {\n      throw ERROR_FACTORY.create(\"not-registered\"\n      /* NOT_REGISTERED */\n      );\n    }\n\n    var oldAuthToken = oldEntry.authToken;\n\n    if (hasAuthTokenRequestTimedOut(oldAuthToken)) {\n      return Object.assign(Object.assign({}, oldEntry), {\n        authToken: {\n          requestStatus: 0\n          /* NOT_STARTED */\n\n        }\n      });\n    }\n\n    return oldEntry;\n  });\n}\n\nfunction fetchAuthTokenFromServer(installations, installationEntry) {\n  var authToken, updatedInstallationEntry, _updatedInstallationEntry;\n\n  return regeneratorRuntime.async(function fetchAuthTokenFromServer$(_context13) {\n    while (1) {\n      switch (_context13.prev = _context13.next) {\n        case 0:\n          _context13.prev = 0;\n          _context13.next = 3;\n          return regeneratorRuntime.awrap(generateAuthTokenRequest(installations, installationEntry));\n\n        case 3:\n          authToken = _context13.sent;\n          updatedInstallationEntry = Object.assign(Object.assign({}, installationEntry), {\n            authToken: authToken\n          });\n          _context13.next = 7;\n          return regeneratorRuntime.awrap(set(installations.appConfig, updatedInstallationEntry));\n\n        case 7:\n          return _context13.abrupt(\"return\", authToken);\n\n        case 10:\n          _context13.prev = 10;\n          _context13.t0 = _context13[\"catch\"](0);\n\n          if (!(isServerError(_context13.t0) && (_context13.t0.customData.serverCode === 401 || _context13.t0.customData.serverCode === 404))) {\n            _context13.next = 17;\n            break;\n          }\n\n          _context13.next = 15;\n          return regeneratorRuntime.awrap(remove(installations.appConfig));\n\n        case 15:\n          _context13.next = 20;\n          break;\n\n        case 17:\n          _updatedInstallationEntry = Object.assign(Object.assign({}, installationEntry), {\n            authToken: {\n              requestStatus: 0\n              /* NOT_STARTED */\n\n            }\n          });\n          _context13.next = 20;\n          return regeneratorRuntime.awrap(set(installations.appConfig, _updatedInstallationEntry));\n\n        case 20:\n          throw _context13.t0;\n\n        case 21:\n        case \"end\":\n          return _context13.stop();\n      }\n    }\n  }, null, null, [[0, 10]]);\n}\n\nfunction isEntryRegistered(installationEntry) {\n  return installationEntry !== undefined && installationEntry.registrationStatus === 2\n  /* COMPLETED */\n  ;\n}\n\nfunction isAuthTokenValid(authToken) {\n  return authToken.requestStatus === 2\n  /* COMPLETED */\n  && !isAuthTokenExpired(authToken);\n}\n\nfunction isAuthTokenExpired(authToken) {\n  var now = Date.now();\n  return now < authToken.creationTime || authToken.creationTime + authToken.expiresIn < now + TOKEN_EXPIRATION_BUFFER;\n}\n/** Returns an updated InstallationEntry with an InProgressAuthToken. */\n\n\nfunction makeAuthTokenRequestInProgressEntry(oldEntry) {\n  var inProgressAuthToken = {\n    requestStatus: 1\n    /* IN_PROGRESS */\n    ,\n    requestTime: Date.now()\n  };\n  return Object.assign(Object.assign({}, oldEntry), {\n    authToken: inProgressAuthToken\n  });\n}\n\nfunction hasAuthTokenRequestTimedOut(authToken) {\n  return authToken.requestStatus === 1\n  /* IN_PROGRESS */\n  && authToken.requestTime + PENDING_TIMEOUT_MS < Date.now();\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Creates a Firebase Installation if there isn't one for the app and\r\n * returns the Installation ID.\r\n * @param installations - The `Installations` instance.\r\n *\r\n * @public\r\n */\n\n\nfunction _getId(installations) {\n  var installationsImpl, _await$getInstallatio2, installationEntry, registrationPromise;\n\n  return regeneratorRuntime.async(function getId$(_context14) {\n    while (1) {\n      switch (_context14.prev = _context14.next) {\n        case 0:\n          installationsImpl = installations;\n          _context14.next = 3;\n          return regeneratorRuntime.awrap(getInstallationEntry(installationsImpl.appConfig));\n\n        case 3:\n          _await$getInstallatio2 = _context14.sent;\n          installationEntry = _await$getInstallatio2.installationEntry;\n          registrationPromise = _await$getInstallatio2.registrationPromise;\n\n          if (registrationPromise) {\n            registrationPromise[\"catch\"](console.error);\n          } else {\n            // If the installation is already registered, update the authentication\n            // token if needed.\n            refreshAuthToken(installationsImpl)[\"catch\"](console.error);\n          }\n\n          return _context14.abrupt(\"return\", installationEntry.fid);\n\n        case 8:\n        case \"end\":\n          return _context14.stop();\n      }\n    }\n  });\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Returns a Firebase Installations auth token, identifying the current\r\n * Firebase Installation.\r\n * @param installations - The `Installations` instance.\r\n * @param forceRefresh - Force refresh regardless of token expiration.\r\n *\r\n * @public\r\n */\n\n\nfunction _getToken(installations) {\n  var forceRefresh,\n      installationsImpl,\n      authToken,\n      _args15 = arguments;\n  return regeneratorRuntime.async(function getToken$(_context15) {\n    while (1) {\n      switch (_context15.prev = _context15.next) {\n        case 0:\n          forceRefresh = _args15.length > 1 && _args15[1] !== undefined ? _args15[1] : false;\n          installationsImpl = installations;\n          _context15.next = 4;\n          return regeneratorRuntime.awrap(completeInstallationRegistration(installationsImpl.appConfig));\n\n        case 4:\n          _context15.next = 6;\n          return regeneratorRuntime.awrap(refreshAuthToken(installationsImpl, forceRefresh));\n\n        case 6:\n          authToken = _context15.sent;\n          return _context15.abrupt(\"return\", authToken.token);\n\n        case 8:\n        case \"end\":\n          return _context15.stop();\n      }\n    }\n  });\n}\n\nfunction completeInstallationRegistration(appConfig) {\n  var _await$getInstallatio3, registrationPromise;\n\n  return regeneratorRuntime.async(function completeInstallationRegistration$(_context16) {\n    while (1) {\n      switch (_context16.prev = _context16.next) {\n        case 0:\n          _context16.next = 2;\n          return regeneratorRuntime.awrap(getInstallationEntry(appConfig));\n\n        case 2:\n          _await$getInstallatio3 = _context16.sent;\n          registrationPromise = _await$getInstallatio3.registrationPromise;\n\n          if (!registrationPromise) {\n            _context16.next = 7;\n            break;\n          }\n\n          _context16.next = 7;\n          return regeneratorRuntime.awrap(registrationPromise);\n\n        case 7:\n        case \"end\":\n          return _context16.stop();\n      }\n    }\n  });\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction deleteInstallationRequest(appConfig, installationEntry) {\n  var endpoint, headers, request, response;\n  return regeneratorRuntime.async(function deleteInstallationRequest$(_context17) {\n    while (1) {\n      switch (_context17.prev = _context17.next) {\n        case 0:\n          endpoint = getDeleteEndpoint(appConfig, installationEntry);\n          headers = getHeadersWithAuth(appConfig, installationEntry);\n          request = {\n            method: 'DELETE',\n            headers: headers\n          };\n          _context17.next = 5;\n          return regeneratorRuntime.awrap(retryIfServerError(function () {\n            return fetch(endpoint, request);\n          }));\n\n        case 5:\n          response = _context17.sent;\n\n          if (response.ok) {\n            _context17.next = 10;\n            break;\n          }\n\n          _context17.next = 9;\n          return regeneratorRuntime.awrap(getErrorFromResponse('Delete Installation', response));\n\n        case 9:\n          throw _context17.sent;\n\n        case 10:\n        case \"end\":\n          return _context17.stop();\n      }\n    }\n  });\n}\n\nfunction getDeleteEndpoint(appConfig, _ref7) {\n  var fid = _ref7.fid;\n  return \"\".concat(getInstallationsEndpoint(appConfig), \"/\").concat(fid);\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Deletes the Firebase Installation and all associated data.\r\n * @param installations - The `Installations` instance.\r\n *\r\n * @public\r\n */\n\n\nfunction deleteInstallations(installations) {\n  var appConfig, entry;\n  return regeneratorRuntime.async(function deleteInstallations$(_context18) {\n    while (1) {\n      switch (_context18.prev = _context18.next) {\n        case 0:\n          appConfig = installations.appConfig;\n          _context18.next = 3;\n          return regeneratorRuntime.awrap(update(appConfig, function (oldEntry) {\n            if (oldEntry && oldEntry.registrationStatus === 0\n            /* NOT_STARTED */\n            )\n              /* NOT_STARTED */\n              {\n                // Delete the unregistered entry without sending a deleteInstallation request.\n                return undefined;\n              }\n\n            return oldEntry;\n          }));\n\n        case 3:\n          entry = _context18.sent;\n\n          if (!entry) {\n            _context18.next = 18;\n            break;\n          }\n\n          if (!(entry.registrationStatus === 1\n          /* IN_PROGRESS */\n          )) {\n            _context18.next = 9;\n            break;\n          }\n\n          throw ERROR_FACTORY.create(\"delete-pending-registration\"\n          /* DELETE_PENDING_REGISTRATION */\n          );\n\n        case 9:\n          if (!(entry.registrationStatus === 2\n          /* COMPLETED */\n          )) {\n            _context18.next = 18;\n            break;\n          }\n\n          if (navigator.onLine) {\n            _context18.next = 14;\n            break;\n          }\n\n          throw ERROR_FACTORY.create(\"app-offline\"\n          /* APP_OFFLINE */\n          );\n\n        case 14:\n          _context18.next = 16;\n          return regeneratorRuntime.awrap(deleteInstallationRequest(appConfig, entry));\n\n        case 16:\n          _context18.next = 18;\n          return regeneratorRuntime.awrap(remove(appConfig));\n\n        case 18:\n        case \"end\":\n          return _context18.stop();\n      }\n    }\n  });\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Sets a new callback that will get called when Installation ID changes.\r\n * Returns an unsubscribe function that will remove the callback when called.\r\n * @param installations - The `Installations` instance.\r\n * @param callback - The callback function that is invoked when FID changes.\r\n * @returns A function that can be called to unsubscribe.\r\n *\r\n * @public\r\n */\n\n\nfunction onIdChange(installations, callback) {\n  var appConfig = installations.appConfig;\n  addCallback(appConfig, callback);\n  return function () {\n    removeCallback(appConfig, callback);\n  };\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Returns an instance of {@link Installations} associated with the given\r\n * {@link @firebase/app#FirebaseApp} instance.\r\n * @param app - The {@link @firebase/app#FirebaseApp} instance.\r\n *\r\n * @public\r\n */\n\n\nfunction getInstallations() {\n  var app = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Object(_firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"getApp\"])();\n\n  var installationsImpl = Object(_firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"_getProvider\"])(app, 'installations').getImmediate();\n\n  return installationsImpl;\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction extractAppConfig(app) {\n  if (!app || !app.options) {\n    throw getMissingValueError('App Configuration');\n  }\n\n  if (!app.name) {\n    throw getMissingValueError('App Name');\n  } // Required app config keys\n\n\n  var configKeys = ['projectId', 'apiKey', 'appId'];\n\n  for (var _i = 0, _configKeys = configKeys; _i < _configKeys.length; _i++) {\n    var keyName = _configKeys[_i];\n\n    if (!app.options[keyName]) {\n      throw getMissingValueError(keyName);\n    }\n  }\n\n  return {\n    appName: app.name,\n    projectId: app.options.projectId,\n    apiKey: app.options.apiKey,\n    appId: app.options.appId\n  };\n}\n\nfunction getMissingValueError(valueName) {\n  return ERROR_FACTORY.create(\"missing-app-config-values\"\n  /* MISSING_APP_CONFIG_VALUES */\n  , {\n    valueName: valueName\n  });\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar INSTALLATIONS_NAME = 'installations';\nvar INSTALLATIONS_NAME_INTERNAL = 'installations-internal';\n\nvar publicFactory = function publicFactory(container) {\n  var app = container.getProvider('app').getImmediate(); // Throws if app isn't configured properly.\n\n  var appConfig = extractAppConfig(app);\n\n  var platformLoggerProvider = Object(_firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"_getProvider\"])(app, 'platform-logger');\n\n  var installationsImpl = {\n    app: app,\n    appConfig: appConfig,\n    platformLoggerProvider: platformLoggerProvider,\n    _delete: function _delete() {\n      return Promise.resolve();\n    }\n  };\n  return installationsImpl;\n};\n\nvar internalFactory = function internalFactory(container) {\n  var app = container.getProvider('app').getImmediate(); // Internal FIS instance relies on public FIS instance.\n\n  var installations = Object(_firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"_getProvider\"])(app, INSTALLATIONS_NAME).getImmediate();\n\n  var installationsInternal = {\n    getId: function getId() {\n      return _getId(installations);\n    },\n    getToken: function getToken(forceRefresh) {\n      return _getToken(installations, forceRefresh);\n    }\n  };\n  return installationsInternal;\n};\n\nfunction registerInstallations() {\n  Object(_firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"_registerComponent\"])(new _firebase_component__WEBPACK_IMPORTED_MODULE_1__[\"Component\"](INSTALLATIONS_NAME, publicFactory, \"PUBLIC\"\n  /* PUBLIC */\n  ));\n\n  Object(_firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"_registerComponent\"])(new _firebase_component__WEBPACK_IMPORTED_MODULE_1__[\"Component\"](INSTALLATIONS_NAME_INTERNAL, internalFactory, \"PRIVATE\"\n  /* PRIVATE */\n  ));\n}\n/**\r\n * Firebase Installations\r\n *\r\n * @packageDocumentation\r\n */\n\n\nregisterInstallations();\nObject(_firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"registerVersion\"])(name, version); // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\n\nObject(_firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"registerVersion\"])(name, version, 'esm2017');\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2luc3RhbGxhdGlvbnMvZGlzdC9pbmRleC5lc20yMDE3LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL3NyYy91dGlsL2NvbnN0YW50cy50cz9lZjI1Iiwid2VicGFjazovLy8uLi9zcmMvdXRpbC9lcnJvcnMudHM/MjU1OSIsIndlYnBhY2s6Ly8vLi4vc3JjL2Z1bmN0aW9ucy9jb21tb24udHM/MGMzZCIsIndlYnBhY2s6Ly8vLi4vc3JjL2Z1bmN0aW9ucy9jcmVhdGUtaW5zdGFsbGF0aW9uLXJlcXVlc3QudHM/YmQyOCIsIndlYnBhY2s6Ly8vLi4vc3JjL3V0aWwvc2xlZXAudHM/ZTkwMiIsIndlYnBhY2s6Ly8vLi4vc3JjL2hlbHBlcnMvYnVmZmVyLXRvLWJhc2U2NC11cmwtc2FmZS50cz8wZjQ2Iiwid2VicGFjazovLy8uLi9zcmMvaGVscGVycy9nZW5lcmF0ZS1maWQudHM/OGZkNiIsIndlYnBhY2s6Ly8vLi4vc3JjL3V0aWwvZ2V0LWtleS50cz84MWY3Iiwid2VicGFjazovLy8uLi9zcmMvaGVscGVycy9maWQtY2hhbmdlZC50cz81ZjQyIiwid2VicGFjazovLy8uLi9zcmMvaGVscGVycy9pZGItbWFuYWdlci50cz9lNjdkIiwid2VicGFjazovLy8uLi9zcmMvaGVscGVycy9nZXQtaW5zdGFsbGF0aW9uLWVudHJ5LnRzPzQzNzYiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9mdW5jdGlvbnMvZ2VuZXJhdGUtYXV0aC10b2tlbi1yZXF1ZXN0LnRzP2UzYWUiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9oZWxwZXJzL3JlZnJlc2gtYXV0aC10b2tlbi50cz83YTMzIiwid2VicGFjazovLy8uLi9zcmMvYXBpL2dldC1pZC50cz8zYmE5Iiwid2VicGFjazovLy8uLi9zcmMvYXBpL2dldC10b2tlbi50cz85YTcyIiwid2VicGFjazovLy8uLi9zcmMvZnVuY3Rpb25zL2RlbGV0ZS1pbnN0YWxsYXRpb24tcmVxdWVzdC50cz8zMjg3Iiwid2VicGFjazovLy8uLi9zcmMvYXBpL2RlbGV0ZS1pbnN0YWxsYXRpb25zLnRzPzhhNWQiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9hcGkvb24taWQtY2hhbmdlLnRzPzY2MDUiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9hcGkvZ2V0LWluc3RhbGxhdGlvbnMudHM/MzViZiIsIndlYnBhY2s6Ly8vLi4vc3JjL2hlbHBlcnMvZXh0cmFjdC1hcHAtY29uZmlnLnRzPzljYzMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9mdW5jdGlvbnMvY29uZmlnLnRzP2RkOWIiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9pbmRleC50cz82ZjM3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tICcuLi8uLi9wYWNrYWdlLmpzb24nO1xuXG5leHBvcnQgY29uc3QgUEVORElOR19USU1FT1VUX01TID0gMTAwMDA7XG5cbmV4cG9ydCBjb25zdCBQQUNLQUdFX1ZFUlNJT04gPSBgdzoke3ZlcnNpb259YDtcbmV4cG9ydCBjb25zdCBJTlRFUk5BTF9BVVRIX1ZFUlNJT04gPSAnRklTX3YyJztcblxuZXhwb3J0IGNvbnN0IElOU1RBTExBVElPTlNfQVBJX1VSTCA9XG4gICdodHRwczovL2ZpcmViYXNlaW5zdGFsbGF0aW9ucy5nb29nbGVhcGlzLmNvbS92MSc7XG5cbmV4cG9ydCBjb25zdCBUT0tFTl9FWFBJUkFUSU9OX0JVRkZFUiA9IDYwICogNjAgKiAxMDAwOyAvLyBPbmUgaG91clxuXG5leHBvcnQgY29uc3QgU0VSVklDRSA9ICdpbnN0YWxsYXRpb25zJztcbmV4cG9ydCBjb25zdCBTRVJWSUNFX05BTUUgPSAnSW5zdGFsbGF0aW9ucyc7XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIEZpcmViYXNlRXJyb3IgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBTRVJWSUNFLCBTRVJWSUNFX05BTUUgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBjb25zdCBlbnVtIEVycm9yQ29kZSB7XG4gIE1JU1NJTkdfQVBQX0NPTkZJR19WQUxVRVMgPSAnbWlzc2luZy1hcHAtY29uZmlnLXZhbHVlcycsXG4gIE5PVF9SRUdJU1RFUkVEID0gJ25vdC1yZWdpc3RlcmVkJyxcbiAgSU5TVEFMTEFUSU9OX05PVF9GT1VORCA9ICdpbnN0YWxsYXRpb24tbm90LWZvdW5kJyxcbiAgUkVRVUVTVF9GQUlMRUQgPSAncmVxdWVzdC1mYWlsZWQnLFxuICBBUFBfT0ZGTElORSA9ICdhcHAtb2ZmbGluZScsXG4gIERFTEVURV9QRU5ESU5HX1JFR0lTVFJBVElPTiA9ICdkZWxldGUtcGVuZGluZy1yZWdpc3RyYXRpb24nXG59XG5cbmNvbnN0IEVSUk9SX0RFU0NSSVBUSU9OX01BUDogeyByZWFkb25seSBba2V5IGluIEVycm9yQ29kZV06IHN0cmluZyB9ID0ge1xuICBbRXJyb3JDb2RlLk1JU1NJTkdfQVBQX0NPTkZJR19WQUxVRVNdOlxuICAgICdNaXNzaW5nIEFwcCBjb25maWd1cmF0aW9uIHZhbHVlOiBcInskdmFsdWVOYW1lfVwiJyxcbiAgW0Vycm9yQ29kZS5OT1RfUkVHSVNURVJFRF06ICdGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgbm90IHJlZ2lzdGVyZWQuJyxcbiAgW0Vycm9yQ29kZS5JTlNUQUxMQVRJT05fTk9UX0ZPVU5EXTogJ0ZpcmViYXNlIEluc3RhbGxhdGlvbiBub3QgZm91bmQuJyxcbiAgW0Vycm9yQ29kZS5SRVFVRVNUX0ZBSUxFRF06XG4gICAgJ3skcmVxdWVzdE5hbWV9IHJlcXVlc3QgZmFpbGVkIHdpdGggZXJyb3IgXCJ7JHNlcnZlckNvZGV9IHskc2VydmVyU3RhdHVzfTogeyRzZXJ2ZXJNZXNzYWdlfVwiJyxcbiAgW0Vycm9yQ29kZS5BUFBfT0ZGTElORV06ICdDb3VsZCBub3QgcHJvY2VzcyByZXF1ZXN0LiBBcHBsaWNhdGlvbiBvZmZsaW5lLicsXG4gIFtFcnJvckNvZGUuREVMRVRFX1BFTkRJTkdfUkVHSVNUUkFUSU9OXTpcbiAgICBcIkNhbid0IGRlbGV0ZSBpbnN0YWxsYXRpb24gd2hpbGUgdGhlcmUgaXMgYSBwZW5kaW5nIHJlZ2lzdHJhdGlvbiByZXF1ZXN0LlwiXG59O1xuXG5pbnRlcmZhY2UgRXJyb3JQYXJhbXMge1xuICBbRXJyb3JDb2RlLk1JU1NJTkdfQVBQX0NPTkZJR19WQUxVRVNdOiB7XG4gICAgdmFsdWVOYW1lOiBzdHJpbmc7XG4gIH07XG4gIFtFcnJvckNvZGUuUkVRVUVTVF9GQUlMRURdOiB7XG4gICAgcmVxdWVzdE5hbWU6IHN0cmluZztcbiAgICBbaW5kZXg6IHN0cmluZ106IHN0cmluZyB8IG51bWJlcjsgLy8gdG8gbWFrZSBUeXBlc2NyaXB0IDMuOCBoYXBweVxuICB9ICYgU2VydmVyRXJyb3JEYXRhO1xufVxuXG5leHBvcnQgY29uc3QgRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3Rvcnk8RXJyb3JDb2RlLCBFcnJvclBhcmFtcz4oXG4gIFNFUlZJQ0UsXG4gIFNFUlZJQ0VfTkFNRSxcbiAgRVJST1JfREVTQ1JJUFRJT05fTUFQXG4pO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlcnZlckVycm9yRGF0YSB7XG4gIHNlcnZlckNvZGU6IG51bWJlcjtcbiAgc2VydmVyTWVzc2FnZTogc3RyaW5nO1xuICBzZXJ2ZXJTdGF0dXM6IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgU2VydmVyRXJyb3IgPSBGaXJlYmFzZUVycm9yICYgeyBjdXN0b21EYXRhOiBTZXJ2ZXJFcnJvckRhdGEgfTtcblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBlcnJvciBpcyBhIEZpcmViYXNlRXJyb3IgdGhhdCBpcyBiYXNlZCBvbiBhbiBlcnJvciBmcm9tIHRoZSBzZXJ2ZXIuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTZXJ2ZXJFcnJvcihlcnJvcjogdW5rbm93bik6IGVycm9yIGlzIFNlcnZlckVycm9yIHtcbiAgcmV0dXJuIChcbiAgICBlcnJvciBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IgJiZcbiAgICBlcnJvci5jb2RlLmluY2x1ZGVzKEVycm9yQ29kZS5SRVFVRVNUX0ZBSUxFRClcbiAgKTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEZpcmViYXNlRXJyb3IgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBHZW5lcmF0ZUF1dGhUb2tlblJlc3BvbnNlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9hcGktcmVzcG9uc2UnO1xuaW1wb3J0IHtcbiAgQ29tcGxldGVkQXV0aFRva2VuLFxuICBSZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnksXG4gIFJlcXVlc3RTdGF0dXNcbn0gZnJvbSAnLi4vaW50ZXJmYWNlcy9pbnN0YWxsYXRpb24tZW50cnknO1xuaW1wb3J0IHtcbiAgSU5TVEFMTEFUSU9OU19BUElfVVJMLFxuICBJTlRFUk5BTF9BVVRIX1ZFUlNJT05cbn0gZnJvbSAnLi4vdXRpbC9jb25zdGFudHMnO1xuaW1wb3J0IHsgRVJST1JfRkFDVE9SWSwgRXJyb3JDb2RlIH0gZnJvbSAnLi4vdXRpbC9lcnJvcnMnO1xuaW1wb3J0IHsgQXBwQ29uZmlnIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9pbnN0YWxsYXRpb24taW1wbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQoeyBwcm9qZWN0SWQgfTogQXBwQ29uZmlnKTogc3RyaW5nIHtcbiAgcmV0dXJuIGAke0lOU1RBTExBVElPTlNfQVBJX1VSTH0vcHJvamVjdHMvJHtwcm9qZWN0SWR9L2luc3RhbGxhdGlvbnNgO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdEF1dGhUb2tlbkluZm9Gcm9tUmVzcG9uc2UoXG4gIHJlc3BvbnNlOiBHZW5lcmF0ZUF1dGhUb2tlblJlc3BvbnNlXG4pOiBDb21wbGV0ZWRBdXRoVG9rZW4ge1xuICByZXR1cm4ge1xuICAgIHRva2VuOiByZXNwb25zZS50b2tlbixcbiAgICByZXF1ZXN0U3RhdHVzOiBSZXF1ZXN0U3RhdHVzLkNPTVBMRVRFRCxcbiAgICBleHBpcmVzSW46IGdldEV4cGlyZXNJbkZyb21SZXNwb25zZUV4cGlyZXNJbihyZXNwb25zZS5leHBpcmVzSW4pLFxuICAgIGNyZWF0aW9uVGltZTogRGF0ZS5ub3coKVxuICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RXJyb3JGcm9tUmVzcG9uc2UoXG4gIHJlcXVlc3ROYW1lOiBzdHJpbmcsXG4gIHJlc3BvbnNlOiBSZXNwb25zZVxuKTogUHJvbWlzZTxGaXJlYmFzZUVycm9yPiB7XG4gIGNvbnN0IHJlc3BvbnNlSnNvbjogRXJyb3JSZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgY29uc3QgZXJyb3JEYXRhID0gcmVzcG9uc2VKc29uLmVycm9yO1xuICByZXR1cm4gRVJST1JfRkFDVE9SWS5jcmVhdGUoRXJyb3JDb2RlLlJFUVVFU1RfRkFJTEVELCB7XG4gICAgcmVxdWVzdE5hbWUsXG4gICAgc2VydmVyQ29kZTogZXJyb3JEYXRhLmNvZGUsXG4gICAgc2VydmVyTWVzc2FnZTogZXJyb3JEYXRhLm1lc3NhZ2UsXG4gICAgc2VydmVyU3RhdHVzOiBlcnJvckRhdGEuc3RhdHVzXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGVhZGVycyh7IGFwaUtleSB9OiBBcHBDb25maWcpOiBIZWFkZXJzIHtcbiAgcmV0dXJuIG5ldyBIZWFkZXJzKHtcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICd4LWdvb2ctYXBpLWtleSc6IGFwaUtleVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEhlYWRlcnNXaXRoQXV0aChcbiAgYXBwQ29uZmlnOiBBcHBDb25maWcsXG4gIHsgcmVmcmVzaFRva2VuIH06IFJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeVxuKTogSGVhZGVycyB7XG4gIGNvbnN0IGhlYWRlcnMgPSBnZXRIZWFkZXJzKGFwcENvbmZpZyk7XG4gIGhlYWRlcnMuYXBwZW5kKCdBdXRob3JpemF0aW9uJywgZ2V0QXV0aG9yaXphdGlvbkhlYWRlcihyZWZyZXNoVG9rZW4pKTtcbiAgcmV0dXJuIGhlYWRlcnM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXJyb3JSZXNwb25zZSB7XG4gIGVycm9yOiB7XG4gICAgY29kZTogbnVtYmVyO1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICBzdGF0dXM6IHN0cmluZztcbiAgfTtcbn1cblxuLyoqXG4gKiBDYWxscyB0aGUgcGFzc2VkIGluIGZldGNoIHdyYXBwZXIgYW5kIHJldHVybnMgdGhlIHJlc3BvbnNlLlxuICogSWYgdGhlIHJldHVybmVkIHJlc3BvbnNlIGhhcyBhIHN0YXR1cyBvZiA1eHgsIHJlLXJ1bnMgdGhlIGZ1bmN0aW9uIG9uY2UgYW5kXG4gKiByZXR1cm5zIHRoZSByZXNwb25zZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJldHJ5SWZTZXJ2ZXJFcnJvcihcbiAgZm46ICgpID0+IFByb21pc2U8UmVzcG9uc2U+XG4pOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKCk7XG5cbiAgaWYgKHJlc3VsdC5zdGF0dXMgPj0gNTAwICYmIHJlc3VsdC5zdGF0dXMgPCA2MDApIHtcbiAgICAvLyBJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IuIFJldHJ5IHJlcXVlc3QuXG4gICAgcmV0dXJuIGZuKCk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBnZXRFeHBpcmVzSW5Gcm9tUmVzcG9uc2VFeHBpcmVzSW4ocmVzcG9uc2VFeHBpcmVzSW46IHN0cmluZyk6IG51bWJlciB7XG4gIC8vIFRoaXMgd29ya3MgYmVjYXVzZSB0aGUgc2VydmVyIHdpbGwgbmV2ZXIgcmVzcG9uZCB3aXRoIGZyYWN0aW9ucyBvZiBhIHNlY29uZC5cbiAgcmV0dXJuIE51bWJlcihyZXNwb25zZUV4cGlyZXNJbi5yZXBsYWNlKCdzJywgJzAwMCcpKTtcbn1cblxuZnVuY3Rpb24gZ2V0QXV0aG9yaXphdGlvbkhlYWRlcihyZWZyZXNoVG9rZW46IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBgJHtJTlRFUk5BTF9BVVRIX1ZFUlNJT059ICR7cmVmcmVzaFRva2VufWA7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDcmVhdGVJbnN0YWxsYXRpb25SZXNwb25zZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvYXBpLXJlc3BvbnNlJztcbmltcG9ydCB7XG4gIEluUHJvZ3Jlc3NJbnN0YWxsYXRpb25FbnRyeSxcbiAgUmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5LFxuICBSZXF1ZXN0U3RhdHVzXG59IGZyb20gJy4uL2ludGVyZmFjZXMvaW5zdGFsbGF0aW9uLWVudHJ5JztcbmltcG9ydCB7IElOVEVSTkFMX0FVVEhfVkVSU0lPTiwgUEFDS0FHRV9WRVJTSU9OIH0gZnJvbSAnLi4vdXRpbC9jb25zdGFudHMnO1xuaW1wb3J0IHtcbiAgZXh0cmFjdEF1dGhUb2tlbkluZm9Gcm9tUmVzcG9uc2UsXG4gIGdldEVycm9yRnJvbVJlc3BvbnNlLFxuICBnZXRIZWFkZXJzLFxuICBnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQsXG4gIHJldHJ5SWZTZXJ2ZXJFcnJvclxufSBmcm9tICcuL2NvbW1vbic7XG5pbXBvcnQgeyBBcHBDb25maWcgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2luc3RhbGxhdGlvbi1pbXBsJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUluc3RhbGxhdGlvblJlcXVlc3QoXG4gIGFwcENvbmZpZzogQXBwQ29uZmlnLFxuICB7IGZpZCB9OiBJblByb2dyZXNzSW5zdGFsbGF0aW9uRW50cnlcbik6IFByb21pc2U8UmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5PiB7XG4gIGNvbnN0IGVuZHBvaW50ID0gZ2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KGFwcENvbmZpZyk7XG5cbiAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoYXBwQ29uZmlnKTtcbiAgY29uc3QgYm9keSA9IHtcbiAgICBmaWQsXG4gICAgYXV0aFZlcnNpb246IElOVEVSTkFMX0FVVEhfVkVSU0lPTixcbiAgICBhcHBJZDogYXBwQ29uZmlnLmFwcElkLFxuICAgIHNka1ZlcnNpb246IFBBQ0tBR0VfVkVSU0lPTlxuICB9O1xuXG4gIGNvbnN0IHJlcXVlc3Q6IFJlcXVlc3RJbml0ID0ge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGhlYWRlcnMsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcbiAgfTtcblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJldHJ5SWZTZXJ2ZXJFcnJvcigoKSA9PiBmZXRjaChlbmRwb2ludCwgcmVxdWVzdCkpO1xuICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICBjb25zdCByZXNwb25zZVZhbHVlOiBDcmVhdGVJbnN0YWxsYXRpb25SZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBjb25zdCByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnk6IFJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSA9IHtcbiAgICAgIGZpZDogcmVzcG9uc2VWYWx1ZS5maWQgfHwgZmlkLFxuICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiBSZXF1ZXN0U3RhdHVzLkNPTVBMRVRFRCxcbiAgICAgIHJlZnJlc2hUb2tlbjogcmVzcG9uc2VWYWx1ZS5yZWZyZXNoVG9rZW4sXG4gICAgICBhdXRoVG9rZW46IGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlVmFsdWUuYXV0aFRva2VuKVxuICAgIH07XG4gICAgcmV0dXJuIHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBhd2FpdCBnZXRFcnJvckZyb21SZXNwb25zZSgnQ3JlYXRlIEluc3RhbGxhdGlvbicsIHJlc3BvbnNlKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgZ2l2ZW4gdGltZSBwYXNzZXMuICovXG5leHBvcnQgZnVuY3Rpb24gc2xlZXAobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4ocmVzb2x2ZSA9PiB7XG4gICAgc2V0VGltZW91dChyZXNvbHZlLCBtcyk7XG4gIH0pO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlclRvQmFzZTY0VXJsU2FmZShhcnJheTogVWludDhBcnJheSk6IHN0cmluZyB7XG4gIGNvbnN0IGI2NCA9IGJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZSguLi5hcnJheSkpO1xuICByZXR1cm4gYjY0LnJlcGxhY2UoL1xcKy9nLCAnLScpLnJlcGxhY2UoL1xcLy9nLCAnXycpO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgYnVmZmVyVG9CYXNlNjRVcmxTYWZlIH0gZnJvbSAnLi9idWZmZXItdG8tYmFzZTY0LXVybC1zYWZlJztcblxuZXhwb3J0IGNvbnN0IFZBTElEX0ZJRF9QQVRURVJOID0gL15bY2RlZl1bXFx3LV17MjF9JC87XG5leHBvcnQgY29uc3QgSU5WQUxJRF9GSUQgPSAnJztcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBuZXcgRklEIHVzaW5nIHJhbmRvbSB2YWx1ZXMgZnJvbSBXZWIgQ3J5cHRvIEFQSS5cbiAqIFJldHVybnMgYW4gZW1wdHkgc3RyaW5nIGlmIEZJRCBnZW5lcmF0aW9uIGZhaWxzIGZvciBhbnkgcmVhc29uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVGaWQoKTogc3RyaW5nIHtcbiAgdHJ5IHtcbiAgICAvLyBBIHZhbGlkIEZJRCBoYXMgZXhhY3RseSAyMiBiYXNlNjQgY2hhcmFjdGVycywgd2hpY2ggaXMgMTMyIGJpdHMsIG9yIDE2LjVcbiAgICAvLyBieXRlcy4gb3VyIGltcGxlbWVudGF0aW9uIGdlbmVyYXRlcyBhIDE3IGJ5dGUgYXJyYXkgaW5zdGVhZC5cbiAgICBjb25zdCBmaWRCeXRlQXJyYXkgPSBuZXcgVWludDhBcnJheSgxNyk7XG4gICAgY29uc3QgY3J5cHRvID1cbiAgICAgIHNlbGYuY3J5cHRvIHx8IChzZWxmIGFzIHVua25vd24gYXMgeyBtc0NyeXB0bzogQ3J5cHRvIH0pLm1zQ3J5cHRvO1xuICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoZmlkQnl0ZUFycmF5KTtcblxuICAgIC8vIFJlcGxhY2UgdGhlIGZpcnN0IDQgcmFuZG9tIGJpdHMgd2l0aCB0aGUgY29uc3RhbnQgRklEIGhlYWRlciBvZiAwYjAxMTEuXG4gICAgZmlkQnl0ZUFycmF5WzBdID0gMGIwMTExMDAwMCArIChmaWRCeXRlQXJyYXlbMF0gJSAwYjAwMDEwMDAwKTtcblxuICAgIGNvbnN0IGZpZCA9IGVuY29kZShmaWRCeXRlQXJyYXkpO1xuXG4gICAgcmV0dXJuIFZBTElEX0ZJRF9QQVRURVJOLnRlc3QoZmlkKSA/IGZpZCA6IElOVkFMSURfRklEO1xuICB9IGNhdGNoIHtcbiAgICAvLyBGSUQgZ2VuZXJhdGlvbiBlcnJvcmVkXG4gICAgcmV0dXJuIElOVkFMSURfRklEO1xuICB9XG59XG5cbi8qKiBDb252ZXJ0cyBhIEZJRCBVaW50OEFycmF5IHRvIGEgYmFzZTY0IHN0cmluZyByZXByZXNlbnRhdGlvbi4gKi9cbmZ1bmN0aW9uIGVuY29kZShmaWRCeXRlQXJyYXk6IFVpbnQ4QXJyYXkpOiBzdHJpbmcge1xuICBjb25zdCBiNjRTdHJpbmcgPSBidWZmZXJUb0Jhc2U2NFVybFNhZmUoZmlkQnl0ZUFycmF5KTtcblxuICAvLyBSZW1vdmUgdGhlIDIzcmQgY2hhcmFjdGVyIHRoYXQgd2FzIGFkZGVkIGJlY2F1c2Ugb2YgdGhlIGV4dHJhIDQgYml0cyBhdCB0aGVcbiAgLy8gZW5kIG9mIG91ciAxNyBieXRlIGFycmF5LCBhbmQgdGhlICc9JyBwYWRkaW5nLlxuICByZXR1cm4gYjY0U3RyaW5nLnN1YnN0cigwLCAyMik7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBBcHBDb25maWcgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2luc3RhbGxhdGlvbi1pbXBsJztcblxuLyoqIFJldHVybnMgYSBzdHJpbmcga2V5IHRoYXQgY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgdGhlIGFwcC4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRLZXkoYXBwQ29uZmlnOiBBcHBDb25maWcpOiBzdHJpbmcge1xuICByZXR1cm4gYCR7YXBwQ29uZmlnLmFwcE5hbWV9ISR7YXBwQ29uZmlnLmFwcElkfWA7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBnZXRLZXkgfSBmcm9tICcuLi91dGlsL2dldC1rZXknO1xuaW1wb3J0IHsgQXBwQ29uZmlnIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9pbnN0YWxsYXRpb24taW1wbCc7XG5pbXBvcnQgeyBJZENoYW5nZUNhbGxiYWNrRm4gfSBmcm9tICcuLi9hcGknO1xuXG5jb25zdCBmaWRDaGFuZ2VDYWxsYmFja3M6IE1hcDxzdHJpbmcsIFNldDxJZENoYW5nZUNhbGxiYWNrRm4+PiA9IG5ldyBNYXAoKTtcblxuLyoqXG4gKiBDYWxscyB0aGUgb25JZENoYW5nZSBjYWxsYmFja3Mgd2l0aCB0aGUgbmV3IEZJRCB2YWx1ZSwgYW5kIGJyb2FkY2FzdHMgdGhlXG4gKiBjaGFuZ2UgdG8gb3RoZXIgdGFicy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpZENoYW5nZWQoYXBwQ29uZmlnOiBBcHBDb25maWcsIGZpZDogc3RyaW5nKTogdm9pZCB7XG4gIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xuXG4gIGNhbGxGaWRDaGFuZ2VDYWxsYmFja3Moa2V5LCBmaWQpO1xuICBicm9hZGNhc3RGaWRDaGFuZ2Uoa2V5LCBmaWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2FsbGJhY2soXG4gIGFwcENvbmZpZzogQXBwQ29uZmlnLFxuICBjYWxsYmFjazogSWRDaGFuZ2VDYWxsYmFja0ZuXG4pOiB2b2lkIHtcbiAgLy8gT3BlbiB0aGUgYnJvYWRjYXN0IGNoYW5uZWwgaWYgaXQncyBub3QgYWxyZWFkeSBvcGVuLFxuICAvLyB0byBiZSBhYmxlIHRvIGxpc3RlbiB0byBjaGFuZ2UgZXZlbnRzIGZyb20gb3RoZXIgdGFicy5cbiAgZ2V0QnJvYWRjYXN0Q2hhbm5lbCgpO1xuXG4gIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xuXG4gIGxldCBjYWxsYmFja1NldCA9IGZpZENoYW5nZUNhbGxiYWNrcy5nZXQoa2V5KTtcbiAgaWYgKCFjYWxsYmFja1NldCkge1xuICAgIGNhbGxiYWNrU2V0ID0gbmV3IFNldCgpO1xuICAgIGZpZENoYW5nZUNhbGxiYWNrcy5zZXQoa2V5LCBjYWxsYmFja1NldCk7XG4gIH1cbiAgY2FsbGJhY2tTZXQuYWRkKGNhbGxiYWNrKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUNhbGxiYWNrKFxuICBhcHBDb25maWc6IEFwcENvbmZpZyxcbiAgY2FsbGJhY2s6IElkQ2hhbmdlQ2FsbGJhY2tGblxuKTogdm9pZCB7XG4gIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xuXG4gIGNvbnN0IGNhbGxiYWNrU2V0ID0gZmlkQ2hhbmdlQ2FsbGJhY2tzLmdldChrZXkpO1xuXG4gIGlmICghY2FsbGJhY2tTZXQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjYWxsYmFja1NldC5kZWxldGUoY2FsbGJhY2spO1xuICBpZiAoY2FsbGJhY2tTZXQuc2l6ZSA9PT0gMCkge1xuICAgIGZpZENoYW5nZUNhbGxiYWNrcy5kZWxldGUoa2V5KTtcbiAgfVxuXG4gIC8vIENsb3NlIGJyb2FkY2FzdCBjaGFubmVsIGlmIHRoZXJlIGFyZSBubyBtb3JlIGNhbGxiYWNrcy5cbiAgY2xvc2VCcm9hZGNhc3RDaGFubmVsKCk7XG59XG5cbmZ1bmN0aW9uIGNhbGxGaWRDaGFuZ2VDYWxsYmFja3Moa2V5OiBzdHJpbmcsIGZpZDogc3RyaW5nKTogdm9pZCB7XG4gIGNvbnN0IGNhbGxiYWNrcyA9IGZpZENoYW5nZUNhbGxiYWNrcy5nZXQoa2V5KTtcbiAgaWYgKCFjYWxsYmFja3MpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xuICAgIGNhbGxiYWNrKGZpZCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYnJvYWRjYXN0RmlkQ2hhbmdlKGtleTogc3RyaW5nLCBmaWQ6IHN0cmluZyk6IHZvaWQge1xuICBjb25zdCBjaGFubmVsID0gZ2V0QnJvYWRjYXN0Q2hhbm5lbCgpO1xuICBpZiAoY2hhbm5lbCkge1xuICAgIGNoYW5uZWwucG9zdE1lc3NhZ2UoeyBrZXksIGZpZCB9KTtcbiAgfVxuICBjbG9zZUJyb2FkY2FzdENoYW5uZWwoKTtcbn1cblxubGV0IGJyb2FkY2FzdENoYW5uZWw6IEJyb2FkY2FzdENoYW5uZWwgfCBudWxsID0gbnVsbDtcbi8qKiBPcGVucyBhbmQgcmV0dXJucyBhIEJyb2FkY2FzdENoYW5uZWwgaWYgaXQgaXMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyLiAqL1xuZnVuY3Rpb24gZ2V0QnJvYWRjYXN0Q2hhbm5lbCgpOiBCcm9hZGNhc3RDaGFubmVsIHwgbnVsbCB7XG4gIGlmICghYnJvYWRjYXN0Q2hhbm5lbCAmJiAnQnJvYWRjYXN0Q2hhbm5lbCcgaW4gc2VsZikge1xuICAgIGJyb2FkY2FzdENoYW5uZWwgPSBuZXcgQnJvYWRjYXN0Q2hhbm5lbCgnW0ZpcmViYXNlXSBGSUQgQ2hhbmdlJyk7XG4gICAgYnJvYWRjYXN0Q2hhbm5lbC5vbm1lc3NhZ2UgPSBlID0+IHtcbiAgICAgIGNhbGxGaWRDaGFuZ2VDYWxsYmFja3MoZS5kYXRhLmtleSwgZS5kYXRhLmZpZCk7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gYnJvYWRjYXN0Q2hhbm5lbDtcbn1cblxuZnVuY3Rpb24gY2xvc2VCcm9hZGNhc3RDaGFubmVsKCk6IHZvaWQge1xuICBpZiAoZmlkQ2hhbmdlQ2FsbGJhY2tzLnNpemUgPT09IDAgJiYgYnJvYWRjYXN0Q2hhbm5lbCkge1xuICAgIGJyb2FkY2FzdENoYW5uZWwuY2xvc2UoKTtcbiAgICBicm9hZGNhc3RDaGFubmVsID0gbnVsbDtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgREIsIG9wZW5EYiB9IGZyb20gJ2lkYic7XG5pbXBvcnQgeyBBcHBDb25maWcgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2luc3RhbGxhdGlvbi1pbXBsJztcbmltcG9ydCB7IEluc3RhbGxhdGlvbkVudHJ5IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9pbnN0YWxsYXRpb24tZW50cnknO1xuaW1wb3J0IHsgZ2V0S2V5IH0gZnJvbSAnLi4vdXRpbC9nZXQta2V5JztcbmltcG9ydCB7IGZpZENoYW5nZWQgfSBmcm9tICcuL2ZpZC1jaGFuZ2VkJztcblxuY29uc3QgREFUQUJBU0VfTkFNRSA9ICdmaXJlYmFzZS1pbnN0YWxsYXRpb25zLWRhdGFiYXNlJztcbmNvbnN0IERBVEFCQVNFX1ZFUlNJT04gPSAxO1xuY29uc3QgT0JKRUNUX1NUT1JFX05BTUUgPSAnZmlyZWJhc2UtaW5zdGFsbGF0aW9ucy1zdG9yZSc7XG5cbmxldCBkYlByb21pc2U6IFByb21pc2U8REI+IHwgbnVsbCA9IG51bGw7XG5mdW5jdGlvbiBnZXREYlByb21pc2UoKTogUHJvbWlzZTxEQj4ge1xuICBpZiAoIWRiUHJvbWlzZSkge1xuICAgIGRiUHJvbWlzZSA9IG9wZW5EYihEQVRBQkFTRV9OQU1FLCBEQVRBQkFTRV9WRVJTSU9OLCB1cGdyYWRlREIgPT4ge1xuICAgICAgLy8gV2UgZG9uJ3QgdXNlICdicmVhaycgaW4gdGhpcyBzd2l0Y2ggc3RhdGVtZW50LCB0aGUgZmFsbC10aHJvdWdoXG4gICAgICAvLyBiZWhhdmlvciBpcyB3aGF0IHdlIHdhbnQsIGJlY2F1c2UgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHZlcnNpb25zIGJldHdlZW5cbiAgICAgIC8vIHRoZSBvbGQgdmVyc2lvbiBhbmQgdGhlIGN1cnJlbnQgdmVyc2lvbiwgd2Ugd2FudCBBTEwgdGhlIG1pZ3JhdGlvbnNcbiAgICAgIC8vIHRoYXQgY29ycmVzcG9uZCB0byB0aG9zZSB2ZXJzaW9ucyB0byBydW4sIG5vdCBvbmx5IHRoZSBsYXN0IG9uZS5cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZWZhdWx0LWNhc2VcbiAgICAgIHN3aXRjaCAodXBncmFkZURCLm9sZFZlcnNpb24pIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHVwZ3JhZGVEQi5jcmVhdGVPYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGRiUHJvbWlzZTtcbn1cblxuLyoqIEdldHMgcmVjb3JkKHMpIGZyb20gdGhlIG9iamVjdFN0b3JlIHRoYXQgbWF0Y2ggdGhlIGdpdmVuIGtleS4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXQoXG4gIGFwcENvbmZpZzogQXBwQ29uZmlnXG4pOiBQcm9taXNlPEluc3RhbGxhdGlvbkVudHJ5IHwgdW5kZWZpbmVkPiB7XG4gIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xuICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xuICByZXR1cm4gZGJcbiAgICAudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUpXG4gICAgLm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKVxuICAgIC5nZXQoa2V5KTtcbn1cblxuLyoqIEFzc2lnbnMgb3Igb3ZlcndyaXRlcyB0aGUgcmVjb3JkIGZvciB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlIGdpdmVuIHZhbHVlLiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNldDxWYWx1ZVR5cGUgZXh0ZW5kcyBJbnN0YWxsYXRpb25FbnRyeT4oXG4gIGFwcENvbmZpZzogQXBwQ29uZmlnLFxuICB2YWx1ZTogVmFsdWVUeXBlXG4pOiBQcm9taXNlPFZhbHVlVHlwZT4ge1xuICBjb25zdCBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcbiAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcbiAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihPQkpFQ1RfU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xuICBjb25zdCBvYmplY3RTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKTtcbiAgY29uc3Qgb2xkVmFsdWUgPSBhd2FpdCBvYmplY3RTdG9yZS5nZXQoa2V5KTtcbiAgYXdhaXQgb2JqZWN0U3RvcmUucHV0KHZhbHVlLCBrZXkpO1xuICBhd2FpdCB0eC5jb21wbGV0ZTtcblxuICBpZiAoIW9sZFZhbHVlIHx8IG9sZFZhbHVlLmZpZCAhPT0gdmFsdWUuZmlkKSB7XG4gICAgZmlkQ2hhbmdlZChhcHBDb25maWcsIHZhbHVlLmZpZCk7XG4gIH1cblxuICByZXR1cm4gdmFsdWU7XG59XG5cbi8qKiBSZW1vdmVzIHJlY29yZChzKSBmcm9tIHRoZSBvYmplY3RTdG9yZSB0aGF0IG1hdGNoIHRoZSBnaXZlbiBrZXkuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVtb3ZlKGFwcENvbmZpZzogQXBwQ29uZmlnKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xuICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xuICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKE9CSkVDVF9TVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XG4gIGF3YWl0IHR4Lm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKS5kZWxldGUoa2V5KTtcbiAgYXdhaXQgdHguY29tcGxldGU7XG59XG5cbi8qKlxuICogQXRvbWljYWxseSB1cGRhdGVzIGEgcmVjb3JkIHdpdGggdGhlIHJlc3VsdCBvZiB1cGRhdGVGbiwgd2hpY2ggZ2V0c1xuICogY2FsbGVkIHdpdGggdGhlIGN1cnJlbnQgdmFsdWUuIElmIG5ld1ZhbHVlIGlzIHVuZGVmaW5lZCwgdGhlIHJlY29yZCBpc1xuICogZGVsZXRlZCBpbnN0ZWFkLlxuICogQHJldHVybiBVcGRhdGVkIHZhbHVlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGU8VmFsdWVUeXBlIGV4dGVuZHMgSW5zdGFsbGF0aW9uRW50cnkgfCB1bmRlZmluZWQ+KFxuICBhcHBDb25maWc6IEFwcENvbmZpZyxcbiAgdXBkYXRlRm46IChwcmV2aW91c1ZhbHVlOiBJbnN0YWxsYXRpb25FbnRyeSB8IHVuZGVmaW5lZCkgPT4gVmFsdWVUeXBlXG4pOiBQcm9taXNlPFZhbHVlVHlwZT4ge1xuICBjb25zdCBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcbiAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcbiAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihPQkpFQ1RfU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xuICBjb25zdCBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKTtcbiAgY29uc3Qgb2xkVmFsdWU6IEluc3RhbGxhdGlvbkVudHJ5IHwgdW5kZWZpbmVkID0gYXdhaXQgc3RvcmUuZ2V0KGtleSk7XG4gIGNvbnN0IG5ld1ZhbHVlID0gdXBkYXRlRm4ob2xkVmFsdWUpO1xuXG4gIGlmIChuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYXdhaXQgc3RvcmUuZGVsZXRlKGtleSk7XG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgc3RvcmUucHV0KG5ld1ZhbHVlLCBrZXkpO1xuICB9XG4gIGF3YWl0IHR4LmNvbXBsZXRlO1xuXG4gIGlmIChuZXdWYWx1ZSAmJiAoIW9sZFZhbHVlIHx8IG9sZFZhbHVlLmZpZCAhPT0gbmV3VmFsdWUuZmlkKSkge1xuICAgIGZpZENoYW5nZWQoYXBwQ29uZmlnLCBuZXdWYWx1ZS5maWQpO1xuICB9XG5cbiAgcmV0dXJuIG5ld1ZhbHVlO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYXIoKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XG4gIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcbiAgYXdhaXQgdHgub2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpLmNsZWFyKCk7XG4gIGF3YWl0IHR4LmNvbXBsZXRlO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlSW5zdGFsbGF0aW9uUmVxdWVzdCB9IGZyb20gJy4uL2Z1bmN0aW9ucy9jcmVhdGUtaW5zdGFsbGF0aW9uLXJlcXVlc3QnO1xuaW1wb3J0IHsgQXBwQ29uZmlnIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9pbnN0YWxsYXRpb24taW1wbCc7XG5pbXBvcnQge1xuICBJblByb2dyZXNzSW5zdGFsbGF0aW9uRW50cnksXG4gIEluc3RhbGxhdGlvbkVudHJ5LFxuICBSZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnksXG4gIFJlcXVlc3RTdGF0dXNcbn0gZnJvbSAnLi4vaW50ZXJmYWNlcy9pbnN0YWxsYXRpb24tZW50cnknO1xuaW1wb3J0IHsgUEVORElOR19USU1FT1VUX01TIH0gZnJvbSAnLi4vdXRpbC9jb25zdGFudHMnO1xuaW1wb3J0IHsgRVJST1JfRkFDVE9SWSwgRXJyb3JDb2RlLCBpc1NlcnZlckVycm9yIH0gZnJvbSAnLi4vdXRpbC9lcnJvcnMnO1xuaW1wb3J0IHsgc2xlZXAgfSBmcm9tICcuLi91dGlsL3NsZWVwJztcbmltcG9ydCB7IGdlbmVyYXRlRmlkLCBJTlZBTElEX0ZJRCB9IGZyb20gJy4vZ2VuZXJhdGUtZmlkJztcbmltcG9ydCB7IHJlbW92ZSwgc2V0LCB1cGRhdGUgfSBmcm9tICcuL2lkYi1tYW5hZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBJbnN0YWxsYXRpb25FbnRyeVdpdGhSZWdpc3RyYXRpb25Qcm9taXNlIHtcbiAgaW5zdGFsbGF0aW9uRW50cnk6IEluc3RhbGxhdGlvbkVudHJ5O1xuICAvKiogRXhpc3QgaWZmIHRoZSBpbnN0YWxsYXRpb25FbnRyeSBpcyBub3QgcmVnaXN0ZXJlZC4gKi9cbiAgcmVnaXN0cmF0aW9uUHJvbWlzZT86IFByb21pc2U8UmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5Pjtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIGFuZCByZXR1cm5zIHRoZSBJbnN0YWxsYXRpb25FbnRyeSBmcm9tIHRoZSBkYXRhYmFzZS5cbiAqIEFsc28gdHJpZ2dlcnMgYSByZWdpc3RyYXRpb24gcmVxdWVzdCBpZiBpdCBpcyBuZWNlc3NhcnkgYW5kIHBvc3NpYmxlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SW5zdGFsbGF0aW9uRW50cnkoXG4gIGFwcENvbmZpZzogQXBwQ29uZmlnXG4pOiBQcm9taXNlPEluc3RhbGxhdGlvbkVudHJ5V2l0aFJlZ2lzdHJhdGlvblByb21pc2U+IHtcbiAgbGV0IHJlZ2lzdHJhdGlvblByb21pc2U6IFByb21pc2U8UmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5PiB8IHVuZGVmaW5lZDtcblxuICBjb25zdCBpbnN0YWxsYXRpb25FbnRyeSA9IGF3YWl0IHVwZGF0ZShhcHBDb25maWcsIG9sZEVudHJ5ID0+IHtcbiAgICBjb25zdCBpbnN0YWxsYXRpb25FbnRyeSA9IHVwZGF0ZU9yQ3JlYXRlSW5zdGFsbGF0aW9uRW50cnkob2xkRW50cnkpO1xuICAgIGNvbnN0IGVudHJ5V2l0aFByb21pc2UgPSB0cmlnZ2VyUmVnaXN0cmF0aW9uSWZOZWNlc3NhcnkoXG4gICAgICBhcHBDb25maWcsXG4gICAgICBpbnN0YWxsYXRpb25FbnRyeVxuICAgICk7XG4gICAgcmVnaXN0cmF0aW9uUHJvbWlzZSA9IGVudHJ5V2l0aFByb21pc2UucmVnaXN0cmF0aW9uUHJvbWlzZTtcbiAgICByZXR1cm4gZW50cnlXaXRoUHJvbWlzZS5pbnN0YWxsYXRpb25FbnRyeTtcbiAgfSk7XG5cbiAgaWYgKGluc3RhbGxhdGlvbkVudHJ5LmZpZCA9PT0gSU5WQUxJRF9GSUQpIHtcbiAgICAvLyBGSUQgZ2VuZXJhdGlvbiBmYWlsZWQuIFdhaXRpbmcgZm9yIHRoZSBGSUQgZnJvbSB0aGUgc2VydmVyLlxuICAgIHJldHVybiB7IGluc3RhbGxhdGlvbkVudHJ5OiBhd2FpdCByZWdpc3RyYXRpb25Qcm9taXNlISB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpbnN0YWxsYXRpb25FbnRyeSxcbiAgICByZWdpc3RyYXRpb25Qcm9taXNlXG4gIH07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBJbnN0YWxsYXRpb24gRW50cnkgaWYgb25lIGRvZXMgbm90IGV4aXN0LlxuICogQWxzbyBjbGVhcnMgdGltZWQgb3V0IHBlbmRpbmcgcmVxdWVzdHMuXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZU9yQ3JlYXRlSW5zdGFsbGF0aW9uRW50cnkoXG4gIG9sZEVudHJ5OiBJbnN0YWxsYXRpb25FbnRyeSB8IHVuZGVmaW5lZFxuKTogSW5zdGFsbGF0aW9uRW50cnkge1xuICBjb25zdCBlbnRyeTogSW5zdGFsbGF0aW9uRW50cnkgPSBvbGRFbnRyeSB8fCB7XG4gICAgZmlkOiBnZW5lcmF0ZUZpZCgpLFxuICAgIHJlZ2lzdHJhdGlvblN0YXR1czogUmVxdWVzdFN0YXR1cy5OT1RfU1RBUlRFRFxuICB9O1xuXG4gIHJldHVybiBjbGVhclRpbWVkT3V0UmVxdWVzdChlbnRyeSk7XG59XG5cbi8qKlxuICogSWYgdGhlIEZpcmViYXNlIEluc3RhbGxhdGlvbiBpcyBub3QgcmVnaXN0ZXJlZCB5ZXQsIHRoaXMgd2lsbCB0cmlnZ2VyIHRoZVxuICogcmVnaXN0cmF0aW9uIGFuZCByZXR1cm4gYW4gSW5Qcm9ncmVzc0luc3RhbGxhdGlvbkVudHJ5LlxuICpcbiAqIElmIHJlZ2lzdHJhdGlvblByb21pc2UgZG9lcyBub3QgZXhpc3QsIHRoZSBpbnN0YWxsYXRpb25FbnRyeSBpcyBndWFyYW50ZWVkXG4gKiB0byBiZSByZWdpc3RlcmVkLlxuICovXG5mdW5jdGlvbiB0cmlnZ2VyUmVnaXN0cmF0aW9uSWZOZWNlc3NhcnkoXG4gIGFwcENvbmZpZzogQXBwQ29uZmlnLFxuICBpbnN0YWxsYXRpb25FbnRyeTogSW5zdGFsbGF0aW9uRW50cnlcbik6IEluc3RhbGxhdGlvbkVudHJ5V2l0aFJlZ2lzdHJhdGlvblByb21pc2Uge1xuICBpZiAoaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSBSZXF1ZXN0U3RhdHVzLk5PVF9TVEFSVEVEKSB7XG4gICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XG4gICAgICAvLyBSZWdpc3RyYXRpb24gcmVxdWlyZWQgYnV0IGFwcCBpcyBvZmZsaW5lLlxuICAgICAgY29uc3QgcmVnaXN0cmF0aW9uUHJvbWlzZVdpdGhFcnJvciA9IFByb21pc2UucmVqZWN0KFxuICAgICAgICBFUlJPUl9GQUNUT1JZLmNyZWF0ZShFcnJvckNvZGUuQVBQX09GRkxJTkUpXG4gICAgICApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5zdGFsbGF0aW9uRW50cnksXG4gICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2U6IHJlZ2lzdHJhdGlvblByb21pc2VXaXRoRXJyb3JcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gVHJ5IHJlZ2lzdGVyaW5nLiBDaGFuZ2Ugc3RhdHVzIHRvIElOX1BST0dSRVNTLlxuICAgIGNvbnN0IGluUHJvZ3Jlc3NFbnRyeTogSW5Qcm9ncmVzc0luc3RhbGxhdGlvbkVudHJ5ID0ge1xuICAgICAgZmlkOiBpbnN0YWxsYXRpb25FbnRyeS5maWQsXG4gICAgICByZWdpc3RyYXRpb25TdGF0dXM6IFJlcXVlc3RTdGF0dXMuSU5fUFJPR1JFU1MsXG4gICAgICByZWdpc3RyYXRpb25UaW1lOiBEYXRlLm5vdygpXG4gICAgfTtcbiAgICBjb25zdCByZWdpc3RyYXRpb25Qcm9taXNlID0gcmVnaXN0ZXJJbnN0YWxsYXRpb24oXG4gICAgICBhcHBDb25maWcsXG4gICAgICBpblByb2dyZXNzRW50cnlcbiAgICApO1xuICAgIHJldHVybiB7IGluc3RhbGxhdGlvbkVudHJ5OiBpblByb2dyZXNzRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2UgfTtcbiAgfSBlbHNlIGlmIChcbiAgICBpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IFJlcXVlc3RTdGF0dXMuSU5fUFJPR1JFU1NcbiAgKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGluc3RhbGxhdGlvbkVudHJ5LFxuICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZTogd2FpdFVudGlsRmlkUmVnaXN0cmF0aW9uKGFwcENvbmZpZylcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7IGluc3RhbGxhdGlvbkVudHJ5IH07XG4gIH1cbn1cblxuLyoqIFRoaXMgd2lsbCBiZSBleGVjdXRlZCBvbmx5IG9uY2UgZm9yIGVhY2ggbmV3IEZpcmViYXNlIEluc3RhbGxhdGlvbi4gKi9cbmFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVySW5zdGFsbGF0aW9uKFxuICBhcHBDb25maWc6IEFwcENvbmZpZyxcbiAgaW5zdGFsbGF0aW9uRW50cnk6IEluUHJvZ3Jlc3NJbnN0YWxsYXRpb25FbnRyeVxuKTogUHJvbWlzZTxSZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnk+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkgPSBhd2FpdCBjcmVhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KFxuICAgICAgYXBwQ29uZmlnLFxuICAgICAgaW5zdGFsbGF0aW9uRW50cnlcbiAgICApO1xuICAgIHJldHVybiBzZXQoYXBwQ29uZmlnLCByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKGlzU2VydmVyRXJyb3IoZSkgJiYgZS5jdXN0b21EYXRhLnNlcnZlckNvZGUgPT09IDQwOSkge1xuICAgICAgLy8gU2VydmVyIHJldHVybmVkIGEgXCJGSUQgY2FuIG5vdCBiZSB1c2VkXCIgZXJyb3IuXG4gICAgICAvLyBHZW5lcmF0ZSBhIG5ldyBJRCBuZXh0IHRpbWUuXG4gICAgICBhd2FpdCByZW1vdmUoYXBwQ29uZmlnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmVnaXN0cmF0aW9uIGZhaWxlZC4gU2V0IEZJRCBhcyBub3QgcmVnaXN0ZXJlZC5cbiAgICAgIGF3YWl0IHNldChhcHBDb25maWcsIHtcbiAgICAgICAgZmlkOiBpbnN0YWxsYXRpb25FbnRyeS5maWQsXG4gICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogUmVxdWVzdFN0YXR1cy5OT1RfU1RBUlRFRFxuICAgICAgfSk7XG4gICAgfVxuICAgIHRocm93IGU7XG4gIH1cbn1cblxuLyoqIENhbGwgaWYgRklEIHJlZ2lzdHJhdGlvbiBpcyBwZW5kaW5nIGluIGFub3RoZXIgcmVxdWVzdC4gKi9cbmFzeW5jIGZ1bmN0aW9uIHdhaXRVbnRpbEZpZFJlZ2lzdHJhdGlvbihcbiAgYXBwQ29uZmlnOiBBcHBDb25maWdcbik6IFByb21pc2U8UmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5PiB7XG4gIC8vIFVuZm9ydHVuYXRlbHksIHRoZXJlIGlzIG5vIHdheSBvZiByZWxpYWJseSBvYnNlcnZpbmcgd2hlbiBhIHZhbHVlIGluXG4gIC8vIEluZGV4ZWREQiBjaGFuZ2VzICh5ZXQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9pbmRleGVkLWRiLW9ic2VydmVycyksXG4gIC8vIHNvIHdlIG5lZWQgdG8gcG9sbC5cblxuICBsZXQgZW50cnk6IEluc3RhbGxhdGlvbkVudHJ5ID0gYXdhaXQgdXBkYXRlSW5zdGFsbGF0aW9uUmVxdWVzdChhcHBDb25maWcpO1xuICB3aGlsZSAoZW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSBSZXF1ZXN0U3RhdHVzLklOX1BST0dSRVNTKSB7XG4gICAgLy8gY3JlYXRlSW5zdGFsbGF0aW9uIHJlcXVlc3Qgc3RpbGwgaW4gcHJvZ3Jlc3MuXG4gICAgYXdhaXQgc2xlZXAoMTAwKTtcblxuICAgIGVudHJ5ID0gYXdhaXQgdXBkYXRlSW5zdGFsbGF0aW9uUmVxdWVzdChhcHBDb25maWcpO1xuICB9XG5cbiAgaWYgKGVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gUmVxdWVzdFN0YXR1cy5OT1RfU1RBUlRFRCkge1xuICAgIC8vIFRoZSByZXF1ZXN0IHRpbWVkIG91dCBvciBmYWlsZWQgaW4gYSBkaWZmZXJlbnQgY2FsbC4gVHJ5IGFnYWluLlxuICAgIGNvbnN0IHsgaW5zdGFsbGF0aW9uRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2UgfSA9XG4gICAgICBhd2FpdCBnZXRJbnN0YWxsYXRpb25FbnRyeShhcHBDb25maWcpO1xuXG4gICAgaWYgKHJlZ2lzdHJhdGlvblByb21pc2UpIHtcbiAgICAgIHJldHVybiByZWdpc3RyYXRpb25Qcm9taXNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpZiB0aGVyZSBpcyBubyByZWdpc3RyYXRpb25Qcm9taXNlLCBlbnRyeSBpcyByZWdpc3RlcmVkLlxuICAgICAgcmV0dXJuIGluc3RhbGxhdGlvbkVudHJ5IGFzIFJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZW50cnk7XG59XG5cbi8qKlxuICogQ2FsbGVkIG9ubHkgaWYgdGhlcmUgaXMgYSBDcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBpbiBwcm9ncmVzcy5cbiAqXG4gKiBVcGRhdGVzIHRoZSBJbnN0YWxsYXRpb25FbnRyeSBpbiB0aGUgREIgYmFzZWQgb24gdGhlIHN0YXR1cyBvZiB0aGVcbiAqIENyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0LlxuICpcbiAqIFJldHVybnMgdGhlIHVwZGF0ZWQgSW5zdGFsbGF0aW9uRW50cnkuXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZUluc3RhbGxhdGlvblJlcXVlc3QoXG4gIGFwcENvbmZpZzogQXBwQ29uZmlnXG4pOiBQcm9taXNlPEluc3RhbGxhdGlvbkVudHJ5PiB7XG4gIHJldHVybiB1cGRhdGUoYXBwQ29uZmlnLCBvbGRFbnRyeSA9PiB7XG4gICAgaWYgKCFvbGRFbnRyeSkge1xuICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoRXJyb3JDb2RlLklOU1RBTExBVElPTl9OT1RfRk9VTkQpO1xuICAgIH1cbiAgICByZXR1cm4gY2xlYXJUaW1lZE91dFJlcXVlc3Qob2xkRW50cnkpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gY2xlYXJUaW1lZE91dFJlcXVlc3QoZW50cnk6IEluc3RhbGxhdGlvbkVudHJ5KTogSW5zdGFsbGF0aW9uRW50cnkge1xuICBpZiAoaGFzSW5zdGFsbGF0aW9uUmVxdWVzdFRpbWVkT3V0KGVudHJ5KSkge1xuICAgIHJldHVybiB7XG4gICAgICBmaWQ6IGVudHJ5LmZpZCxcbiAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogUmVxdWVzdFN0YXR1cy5OT1RfU1RBUlRFRFxuICAgIH07XG4gIH1cblxuICByZXR1cm4gZW50cnk7XG59XG5cbmZ1bmN0aW9uIGhhc0luc3RhbGxhdGlvblJlcXVlc3RUaW1lZE91dChcbiAgaW5zdGFsbGF0aW9uRW50cnk6IEluc3RhbGxhdGlvbkVudHJ5XG4pOiBib29sZWFuIHtcbiAgcmV0dXJuIChcbiAgICBpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IFJlcXVlc3RTdGF0dXMuSU5fUFJPR1JFU1MgJiZcbiAgICBpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25UaW1lICsgUEVORElOR19USU1FT1VUX01TIDwgRGF0ZS5ub3coKVxuICApO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgR2VuZXJhdGVBdXRoVG9rZW5SZXNwb25zZSB9IGZyb20gJy4uL2ludGVyZmFjZXMvYXBpLXJlc3BvbnNlJztcbmltcG9ydCB7XG4gIENvbXBsZXRlZEF1dGhUb2tlbixcbiAgUmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5XG59IGZyb20gJy4uL2ludGVyZmFjZXMvaW5zdGFsbGF0aW9uLWVudHJ5JztcbmltcG9ydCB7IFBBQ0tBR0VfVkVSU0lPTiB9IGZyb20gJy4uL3V0aWwvY29uc3RhbnRzJztcbmltcG9ydCB7XG4gIGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlLFxuICBnZXRFcnJvckZyb21SZXNwb25zZSxcbiAgZ2V0SGVhZGVyc1dpdGhBdXRoLFxuICBnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQsXG4gIHJldHJ5SWZTZXJ2ZXJFcnJvclxufSBmcm9tICcuL2NvbW1vbic7XG5pbXBvcnQge1xuICBGaXJlYmFzZUluc3RhbGxhdGlvbnNJbXBsLFxuICBBcHBDb25maWdcbn0gZnJvbSAnLi4vaW50ZXJmYWNlcy9pbnN0YWxsYXRpb24taW1wbCc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUF1dGhUb2tlblJlcXVlc3QoXG4gIHsgYXBwQ29uZmlnLCBwbGF0Zm9ybUxvZ2dlclByb3ZpZGVyIH06IEZpcmViYXNlSW5zdGFsbGF0aW9uc0ltcGwsXG4gIGluc3RhbGxhdGlvbkVudHJ5OiBSZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnlcbik6IFByb21pc2U8Q29tcGxldGVkQXV0aFRva2VuPiB7XG4gIGNvbnN0IGVuZHBvaW50ID0gZ2V0R2VuZXJhdGVBdXRoVG9rZW5FbmRwb2ludChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcblxuICBjb25zdCBoZWFkZXJzID0gZ2V0SGVhZGVyc1dpdGhBdXRoKGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xuXG4gIC8vIElmIHBsYXRmb3JtIGxvZ2dlciBleGlzdHMsIGFkZCB0aGUgcGxhdGZvcm0gaW5mbyBzdHJpbmcgdG8gdGhlIGhlYWRlci5cbiAgY29uc3QgcGxhdGZvcm1Mb2dnZXIgPSBwbGF0Zm9ybUxvZ2dlclByb3ZpZGVyLmdldEltbWVkaWF0ZSh7XG4gICAgb3B0aW9uYWw6IHRydWVcbiAgfSk7XG4gIGlmIChwbGF0Zm9ybUxvZ2dlcikge1xuICAgIGhlYWRlcnMuYXBwZW5kKCd4LWZpcmViYXNlLWNsaWVudCcsIHBsYXRmb3JtTG9nZ2VyLmdldFBsYXRmb3JtSW5mb1N0cmluZygpKTtcbiAgfVxuXG4gIGNvbnN0IGJvZHkgPSB7XG4gICAgaW5zdGFsbGF0aW9uOiB7XG4gICAgICBzZGtWZXJzaW9uOiBQQUNLQUdFX1ZFUlNJT05cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcmVxdWVzdDogUmVxdWVzdEluaXQgPSB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVycyxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxuICB9O1xuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlJZlNlcnZlckVycm9yKCgpID0+IGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KSk7XG4gIGlmIChyZXNwb25zZS5vaykge1xuICAgIGNvbnN0IHJlc3BvbnNlVmFsdWU6IEdlbmVyYXRlQXV0aFRva2VuUmVzcG9uc2UgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgY29uc3QgY29tcGxldGVkQXV0aFRva2VuOiBDb21wbGV0ZWRBdXRoVG9rZW4gPVxuICAgICAgZXh0cmFjdEF1dGhUb2tlbkluZm9Gcm9tUmVzcG9uc2UocmVzcG9uc2VWYWx1ZSk7XG4gICAgcmV0dXJuIGNvbXBsZXRlZEF1dGhUb2tlbjtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBhd2FpdCBnZXRFcnJvckZyb21SZXNwb25zZSgnR2VuZXJhdGUgQXV0aCBUb2tlbicsIHJlc3BvbnNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50KFxuICBhcHBDb25maWc6IEFwcENvbmZpZyxcbiAgeyBmaWQgfTogUmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5XG4pOiBzdHJpbmcge1xuICByZXR1cm4gYCR7Z2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KGFwcENvbmZpZyl9LyR7ZmlkfS9hdXRoVG9rZW5zOmdlbmVyYXRlYDtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGdlbmVyYXRlQXV0aFRva2VuUmVxdWVzdCB9IGZyb20gJy4uL2Z1bmN0aW9ucy9nZW5lcmF0ZS1hdXRoLXRva2VuLXJlcXVlc3QnO1xuaW1wb3J0IHtcbiAgQXBwQ29uZmlnLFxuICBGaXJlYmFzZUluc3RhbGxhdGlvbnNJbXBsXG59IGZyb20gJy4uL2ludGVyZmFjZXMvaW5zdGFsbGF0aW9uLWltcGwnO1xuaW1wb3J0IHtcbiAgQXV0aFRva2VuLFxuICBDb21wbGV0ZWRBdXRoVG9rZW4sXG4gIEluUHJvZ3Jlc3NBdXRoVG9rZW4sXG4gIEluc3RhbGxhdGlvbkVudHJ5LFxuICBSZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnksXG4gIFJlcXVlc3RTdGF0dXNcbn0gZnJvbSAnLi4vaW50ZXJmYWNlcy9pbnN0YWxsYXRpb24tZW50cnknO1xuaW1wb3J0IHsgUEVORElOR19USU1FT1VUX01TLCBUT0tFTl9FWFBJUkFUSU9OX0JVRkZFUiB9IGZyb20gJy4uL3V0aWwvY29uc3RhbnRzJztcbmltcG9ydCB7IEVSUk9SX0ZBQ1RPUlksIEVycm9yQ29kZSwgaXNTZXJ2ZXJFcnJvciB9IGZyb20gJy4uL3V0aWwvZXJyb3JzJztcbmltcG9ydCB7IHNsZWVwIH0gZnJvbSAnLi4vdXRpbC9zbGVlcCc7XG5pbXBvcnQgeyByZW1vdmUsIHNldCwgdXBkYXRlIH0gZnJvbSAnLi9pZGItbWFuYWdlcic7XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbGlkIGF1dGhlbnRpY2F0aW9uIHRva2VuIGZvciB0aGUgaW5zdGFsbGF0aW9uLiBHZW5lcmF0ZXMgYSBuZXdcbiAqIHRva2VuIGlmIG9uZSBkb2Vzbid0IGV4aXN0LCBpcyBleHBpcmVkIG9yIGFib3V0IHRvIGV4cGlyZS5cbiAqXG4gKiBTaG91bGQgb25seSBiZSBjYWxsZWQgaWYgdGhlIEZpcmViYXNlIEluc3RhbGxhdGlvbiBpcyByZWdpc3RlcmVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVmcmVzaEF1dGhUb2tlbihcbiAgaW5zdGFsbGF0aW9uczogRmlyZWJhc2VJbnN0YWxsYXRpb25zSW1wbCxcbiAgZm9yY2VSZWZyZXNoID0gZmFsc2Vcbik6IFByb21pc2U8Q29tcGxldGVkQXV0aFRva2VuPiB7XG4gIGxldCB0b2tlblByb21pc2U6IFByb21pc2U8Q29tcGxldGVkQXV0aFRva2VuPiB8IHVuZGVmaW5lZDtcbiAgY29uc3QgZW50cnkgPSBhd2FpdCB1cGRhdGUoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcsIG9sZEVudHJ5ID0+IHtcbiAgICBpZiAoIWlzRW50cnlSZWdpc3RlcmVkKG9sZEVudHJ5KSkge1xuICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoRXJyb3JDb2RlLk5PVF9SRUdJU1RFUkVEKTtcbiAgICB9XG5cbiAgICBjb25zdCBvbGRBdXRoVG9rZW4gPSBvbGRFbnRyeS5hdXRoVG9rZW47XG4gICAgaWYgKCFmb3JjZVJlZnJlc2ggJiYgaXNBdXRoVG9rZW5WYWxpZChvbGRBdXRoVG9rZW4pKSB7XG4gICAgICAvLyBUaGVyZSBpcyBhIHZhbGlkIHRva2VuIGluIHRoZSBEQi5cbiAgICAgIHJldHVybiBvbGRFbnRyeTtcbiAgICB9IGVsc2UgaWYgKG9sZEF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSBSZXF1ZXN0U3RhdHVzLklOX1BST0dSRVNTKSB7XG4gICAgICAvLyBUaGVyZSBhbHJlYWR5IGlzIGEgdG9rZW4gcmVxdWVzdCBpbiBwcm9ncmVzcy5cbiAgICAgIHRva2VuUHJvbWlzZSA9IHdhaXRVbnRpbEF1dGhUb2tlblJlcXVlc3QoaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoKTtcbiAgICAgIHJldHVybiBvbGRFbnRyeTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm8gdG9rZW4gb3IgdG9rZW4gZXhwaXJlZC5cbiAgICAgIGlmICghbmF2aWdhdG9yLm9uTGluZSkge1xuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShFcnJvckNvZGUuQVBQX09GRkxJTkUpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpblByb2dyZXNzRW50cnkgPSBtYWtlQXV0aFRva2VuUmVxdWVzdEluUHJvZ3Jlc3NFbnRyeShvbGRFbnRyeSk7XG4gICAgICB0b2tlblByb21pc2UgPSBmZXRjaEF1dGhUb2tlbkZyb21TZXJ2ZXIoaW5zdGFsbGF0aW9ucywgaW5Qcm9ncmVzc0VudHJ5KTtcbiAgICAgIHJldHVybiBpblByb2dyZXNzRW50cnk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBhdXRoVG9rZW4gPSB0b2tlblByb21pc2VcbiAgICA/IGF3YWl0IHRva2VuUHJvbWlzZVxuICAgIDogKGVudHJ5LmF1dGhUb2tlbiBhcyBDb21wbGV0ZWRBdXRoVG9rZW4pO1xuICByZXR1cm4gYXV0aFRva2VuO1xufVxuXG4vKipcbiAqIENhbGwgb25seSBpZiBGSUQgaXMgcmVnaXN0ZXJlZCBhbmQgQXV0aCBUb2tlbiByZXF1ZXN0IGlzIGluIHByb2dyZXNzLlxuICpcbiAqIFdhaXRzIHVudGlsIHRoZSBjdXJyZW50IHBlbmRpbmcgcmVxdWVzdCBmaW5pc2hlcy4gSWYgdGhlIHJlcXVlc3QgdGltZXMgb3V0LFxuICogdHJpZXMgb25jZSBpbiB0aGlzIHRocmVhZCBhcyB3ZWxsLlxuICovXG5hc3luYyBmdW5jdGlvbiB3YWl0VW50aWxBdXRoVG9rZW5SZXF1ZXN0KFxuICBpbnN0YWxsYXRpb25zOiBGaXJlYmFzZUluc3RhbGxhdGlvbnNJbXBsLFxuICBmb3JjZVJlZnJlc2g6IGJvb2xlYW5cbik6IFByb21pc2U8Q29tcGxldGVkQXV0aFRva2VuPiB7XG4gIC8vIFVuZm9ydHVuYXRlbHksIHRoZXJlIGlzIG5vIHdheSBvZiByZWxpYWJseSBvYnNlcnZpbmcgd2hlbiBhIHZhbHVlIGluXG4gIC8vIEluZGV4ZWREQiBjaGFuZ2VzICh5ZXQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9pbmRleGVkLWRiLW9ic2VydmVycyksXG4gIC8vIHNvIHdlIG5lZWQgdG8gcG9sbC5cblxuICBsZXQgZW50cnkgPSBhd2FpdCB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcbiAgd2hpbGUgKGVudHJ5LmF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSBSZXF1ZXN0U3RhdHVzLklOX1BST0dSRVNTKSB7XG4gICAgLy8gZ2VuZXJhdGVBdXRoVG9rZW4gc3RpbGwgaW4gcHJvZ3Jlc3MuXG4gICAgYXdhaXQgc2xlZXAoMTAwKTtcblxuICAgIGVudHJ5ID0gYXdhaXQgdXBkYXRlQXV0aFRva2VuUmVxdWVzdChpbnN0YWxsYXRpb25zLmFwcENvbmZpZyk7XG4gIH1cblxuICBjb25zdCBhdXRoVG9rZW4gPSBlbnRyeS5hdXRoVG9rZW47XG4gIGlmIChhdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gUmVxdWVzdFN0YXR1cy5OT1RfU1RBUlRFRCkge1xuICAgIC8vIFRoZSByZXF1ZXN0IHRpbWVkIG91dCBvciBmYWlsZWQgaW4gYSBkaWZmZXJlbnQgY2FsbC4gVHJ5IGFnYWluLlxuICAgIHJldHVybiByZWZyZXNoQXV0aFRva2VuKGluc3RhbGxhdGlvbnMsIGZvcmNlUmVmcmVzaCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGF1dGhUb2tlbjtcbiAgfVxufVxuXG4vKipcbiAqIENhbGxlZCBvbmx5IGlmIHRoZXJlIGlzIGEgR2VuZXJhdGVBdXRoVG9rZW4gcmVxdWVzdCBpbiBwcm9ncmVzcy5cbiAqXG4gKiBVcGRhdGVzIHRoZSBJbnN0YWxsYXRpb25FbnRyeSBpbiB0aGUgREIgYmFzZWQgb24gdGhlIHN0YXR1cyBvZiB0aGVcbiAqIEdlbmVyYXRlQXV0aFRva2VuIHJlcXVlc3QuXG4gKlxuICogUmV0dXJucyB0aGUgdXBkYXRlZCBJbnN0YWxsYXRpb25FbnRyeS5cbiAqL1xuZnVuY3Rpb24gdXBkYXRlQXV0aFRva2VuUmVxdWVzdChcbiAgYXBwQ29uZmlnOiBBcHBDb25maWdcbik6IFByb21pc2U8UmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5PiB7XG4gIHJldHVybiB1cGRhdGUoYXBwQ29uZmlnLCBvbGRFbnRyeSA9PiB7XG4gICAgaWYgKCFpc0VudHJ5UmVnaXN0ZXJlZChvbGRFbnRyeSkpIHtcbiAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKEVycm9yQ29kZS5OT1RfUkVHSVNURVJFRCk7XG4gICAgfVxuXG4gICAgY29uc3Qgb2xkQXV0aFRva2VuID0gb2xkRW50cnkuYXV0aFRva2VuO1xuICAgIGlmIChoYXNBdXRoVG9rZW5SZXF1ZXN0VGltZWRPdXQob2xkQXV0aFRva2VuKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ub2xkRW50cnksXG4gICAgICAgIGF1dGhUb2tlbjogeyByZXF1ZXN0U3RhdHVzOiBSZXF1ZXN0U3RhdHVzLk5PVF9TVEFSVEVEIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIG9sZEVudHJ5O1xuICB9KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hBdXRoVG9rZW5Gcm9tU2VydmVyKFxuICBpbnN0YWxsYXRpb25zOiBGaXJlYmFzZUluc3RhbGxhdGlvbnNJbXBsLFxuICBpbnN0YWxsYXRpb25FbnRyeTogUmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5XG4pOiBQcm9taXNlPENvbXBsZXRlZEF1dGhUb2tlbj4ge1xuICB0cnkge1xuICAgIGNvbnN0IGF1dGhUb2tlbiA9IGF3YWl0IGdlbmVyYXRlQXV0aFRva2VuUmVxdWVzdChcbiAgICAgIGluc3RhbGxhdGlvbnMsXG4gICAgICBpbnN0YWxsYXRpb25FbnRyeVxuICAgICk7XG4gICAgY29uc3QgdXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5OiBSZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkgPSB7XG4gICAgICAuLi5pbnN0YWxsYXRpb25FbnRyeSxcbiAgICAgIGF1dGhUb2tlblxuICAgIH07XG4gICAgYXdhaXQgc2V0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkpO1xuICAgIHJldHVybiBhdXRoVG9rZW47XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoXG4gICAgICBpc1NlcnZlckVycm9yKGUpICYmXG4gICAgICAoZS5jdXN0b21EYXRhLnNlcnZlckNvZGUgPT09IDQwMSB8fCBlLmN1c3RvbURhdGEuc2VydmVyQ29kZSA9PT0gNDA0KVxuICAgICkge1xuICAgICAgLy8gU2VydmVyIHJldHVybmVkIGEgXCJGSUQgbm90IGZvdW5kXCIgb3IgYSBcIkludmFsaWQgYXV0aGVudGljYXRpb25cIiBlcnJvci5cbiAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIG5leHQgdGltZS5cbiAgICAgIGF3YWl0IHJlbW92ZShpbnN0YWxsYXRpb25zLmFwcENvbmZpZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeTogUmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5ID0ge1xuICAgICAgICAuLi5pbnN0YWxsYXRpb25FbnRyeSxcbiAgICAgICAgYXV0aFRva2VuOiB7IHJlcXVlc3RTdGF0dXM6IFJlcXVlc3RTdGF0dXMuTk9UX1NUQVJURUQgfVxuICAgICAgfTtcbiAgICAgIGF3YWl0IHNldChpbnN0YWxsYXRpb25zLmFwcENvbmZpZywgdXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5KTtcbiAgICB9XG4gICAgdGhyb3cgZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0VudHJ5UmVnaXN0ZXJlZChcbiAgaW5zdGFsbGF0aW9uRW50cnk6IEluc3RhbGxhdGlvbkVudHJ5IHwgdW5kZWZpbmVkXG4pOiBpbnN0YWxsYXRpb25FbnRyeSBpcyBSZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkge1xuICByZXR1cm4gKFxuICAgIGluc3RhbGxhdGlvbkVudHJ5ICE9PSB1bmRlZmluZWQgJiZcbiAgICBpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IFJlcXVlc3RTdGF0dXMuQ09NUExFVEVEXG4gICk7XG59XG5cbmZ1bmN0aW9uIGlzQXV0aFRva2VuVmFsaWQoYXV0aFRva2VuOiBBdXRoVG9rZW4pOiBib29sZWFuIHtcbiAgcmV0dXJuIChcbiAgICBhdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gUmVxdWVzdFN0YXR1cy5DT01QTEVURUQgJiZcbiAgICAhaXNBdXRoVG9rZW5FeHBpcmVkKGF1dGhUb2tlbilcbiAgKTtcbn1cblxuZnVuY3Rpb24gaXNBdXRoVG9rZW5FeHBpcmVkKGF1dGhUb2tlbjogQ29tcGxldGVkQXV0aFRva2VuKTogYm9vbGVhbiB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gIHJldHVybiAoXG4gICAgbm93IDwgYXV0aFRva2VuLmNyZWF0aW9uVGltZSB8fFxuICAgIGF1dGhUb2tlbi5jcmVhdGlvblRpbWUgKyBhdXRoVG9rZW4uZXhwaXJlc0luIDwgbm93ICsgVE9LRU5fRVhQSVJBVElPTl9CVUZGRVJcbiAgKTtcbn1cblxuLyoqIFJldHVybnMgYW4gdXBkYXRlZCBJbnN0YWxsYXRpb25FbnRyeSB3aXRoIGFuIEluUHJvZ3Jlc3NBdXRoVG9rZW4uICovXG5mdW5jdGlvbiBtYWtlQXV0aFRva2VuUmVxdWVzdEluUHJvZ3Jlc3NFbnRyeShcbiAgb2xkRW50cnk6IFJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeVxuKTogUmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5IHtcbiAgY29uc3QgaW5Qcm9ncmVzc0F1dGhUb2tlbjogSW5Qcm9ncmVzc0F1dGhUb2tlbiA9IHtcbiAgICByZXF1ZXN0U3RhdHVzOiBSZXF1ZXN0U3RhdHVzLklOX1BST0dSRVNTLFxuICAgIHJlcXVlc3RUaW1lOiBEYXRlLm5vdygpXG4gIH07XG4gIHJldHVybiB7XG4gICAgLi4ub2xkRW50cnksXG4gICAgYXV0aFRva2VuOiBpblByb2dyZXNzQXV0aFRva2VuXG4gIH07XG59XG5cbmZ1bmN0aW9uIGhhc0F1dGhUb2tlblJlcXVlc3RUaW1lZE91dChhdXRoVG9rZW46IEF1dGhUb2tlbik6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgIGF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSBSZXF1ZXN0U3RhdHVzLklOX1BST0dSRVNTICYmXG4gICAgYXV0aFRva2VuLnJlcXVlc3RUaW1lICsgUEVORElOR19USU1FT1VUX01TIDwgRGF0ZS5ub3coKVxuICApO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgZ2V0SW5zdGFsbGF0aW9uRW50cnkgfSBmcm9tICcuLi9oZWxwZXJzL2dldC1pbnN0YWxsYXRpb24tZW50cnknO1xuaW1wb3J0IHsgcmVmcmVzaEF1dGhUb2tlbiB9IGZyb20gJy4uL2hlbHBlcnMvcmVmcmVzaC1hdXRoLXRva2VuJztcbmltcG9ydCB7IEZpcmViYXNlSW5zdGFsbGF0aW9uc0ltcGwgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2luc3RhbGxhdGlvbi1pbXBsJztcbmltcG9ydCB7IEluc3RhbGxhdGlvbnMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3B1YmxpYy10eXBlcyc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIEZpcmViYXNlIEluc3RhbGxhdGlvbiBpZiB0aGVyZSBpc24ndCBvbmUgZm9yIHRoZSBhcHAgYW5kXG4gKiByZXR1cm5zIHRoZSBJbnN0YWxsYXRpb24gSUQuXG4gKiBAcGFyYW0gaW5zdGFsbGF0aW9ucyAtIFRoZSBgSW5zdGFsbGF0aW9uc2AgaW5zdGFuY2UuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SWQoaW5zdGFsbGF0aW9uczogSW5zdGFsbGF0aW9ucyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IGluc3RhbGxhdGlvbnNJbXBsID0gaW5zdGFsbGF0aW9ucyBhcyBGaXJlYmFzZUluc3RhbGxhdGlvbnNJbXBsO1xuICBjb25zdCB7IGluc3RhbGxhdGlvbkVudHJ5LCByZWdpc3RyYXRpb25Qcm9taXNlIH0gPSBhd2FpdCBnZXRJbnN0YWxsYXRpb25FbnRyeShcbiAgICBpbnN0YWxsYXRpb25zSW1wbC5hcHBDb25maWdcbiAgKTtcblxuICBpZiAocmVnaXN0cmF0aW9uUHJvbWlzZSkge1xuICAgIHJlZ2lzdHJhdGlvblByb21pc2UuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gIH0gZWxzZSB7XG4gICAgLy8gSWYgdGhlIGluc3RhbGxhdGlvbiBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQsIHVwZGF0ZSB0aGUgYXV0aGVudGljYXRpb25cbiAgICAvLyB0b2tlbiBpZiBuZWVkZWQuXG4gICAgcmVmcmVzaEF1dGhUb2tlbihpbnN0YWxsYXRpb25zSW1wbCkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gIH1cblxuICByZXR1cm4gaW5zdGFsbGF0aW9uRW50cnkuZmlkO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgZ2V0SW5zdGFsbGF0aW9uRW50cnkgfSBmcm9tICcuLi9oZWxwZXJzL2dldC1pbnN0YWxsYXRpb24tZW50cnknO1xuaW1wb3J0IHsgcmVmcmVzaEF1dGhUb2tlbiB9IGZyb20gJy4uL2hlbHBlcnMvcmVmcmVzaC1hdXRoLXRva2VuJztcbmltcG9ydCB7XG4gIEZpcmViYXNlSW5zdGFsbGF0aW9uc0ltcGwsXG4gIEFwcENvbmZpZ1xufSBmcm9tICcuLi9pbnRlcmZhY2VzL2luc3RhbGxhdGlvbi1pbXBsJztcbmltcG9ydCB7IEluc3RhbGxhdGlvbnMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3B1YmxpYy10eXBlcyc7XG5cbi8qKlxuICogUmV0dXJucyBhIEZpcmViYXNlIEluc3RhbGxhdGlvbnMgYXV0aCB0b2tlbiwgaWRlbnRpZnlpbmcgdGhlIGN1cnJlbnRcbiAqIEZpcmViYXNlIEluc3RhbGxhdGlvbi5cbiAqIEBwYXJhbSBpbnN0YWxsYXRpb25zIC0gVGhlIGBJbnN0YWxsYXRpb25zYCBpbnN0YW5jZS5cbiAqIEBwYXJhbSBmb3JjZVJlZnJlc2ggLSBGb3JjZSByZWZyZXNoIHJlZ2FyZGxlc3Mgb2YgdG9rZW4gZXhwaXJhdGlvbi5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUb2tlbihcbiAgaW5zdGFsbGF0aW9uczogSW5zdGFsbGF0aW9ucyxcbiAgZm9yY2VSZWZyZXNoID0gZmFsc2Vcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IGluc3RhbGxhdGlvbnNJbXBsID0gaW5zdGFsbGF0aW9ucyBhcyBGaXJlYmFzZUluc3RhbGxhdGlvbnNJbXBsO1xuICBhd2FpdCBjb21wbGV0ZUluc3RhbGxhdGlvblJlZ2lzdHJhdGlvbihpbnN0YWxsYXRpb25zSW1wbC5hcHBDb25maWcpO1xuXG4gIC8vIEF0IHRoaXMgcG9pbnQgd2UgZWl0aGVyIGhhdmUgYSBSZWdpc3RlcmVkIEluc3RhbGxhdGlvbiBpbiB0aGUgREIsIG9yIHdlJ3ZlXG4gIC8vIGFscmVhZHkgdGhyb3duIGFuIGVycm9yLlxuICBjb25zdCBhdXRoVG9rZW4gPSBhd2FpdCByZWZyZXNoQXV0aFRva2VuKGluc3RhbGxhdGlvbnNJbXBsLCBmb3JjZVJlZnJlc2gpO1xuICByZXR1cm4gYXV0aFRva2VuLnRva2VuO1xufVxuXG5hc3luYyBmdW5jdGlvbiBjb21wbGV0ZUluc3RhbGxhdGlvblJlZ2lzdHJhdGlvbihcbiAgYXBwQ29uZmlnOiBBcHBDb25maWdcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IHJlZ2lzdHJhdGlvblByb21pc2UgfSA9IGF3YWl0IGdldEluc3RhbGxhdGlvbkVudHJ5KGFwcENvbmZpZyk7XG5cbiAgaWYgKHJlZ2lzdHJhdGlvblByb21pc2UpIHtcbiAgICAvLyBBIGNyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IGlzIGluIHByb2dyZXNzLiBXYWl0IHVudGlsIGl0IGZpbmlzaGVzLlxuICAgIGF3YWl0IHJlZ2lzdHJhdGlvblByb21pc2U7XG4gIH1cbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEFwcENvbmZpZyB9IGZyb20gJy4uL2ludGVyZmFjZXMvaW5zdGFsbGF0aW9uLWltcGwnO1xuaW1wb3J0IHsgUmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9pbnN0YWxsYXRpb24tZW50cnknO1xuaW1wb3J0IHtcbiAgZ2V0RXJyb3JGcm9tUmVzcG9uc2UsXG4gIGdldEhlYWRlcnNXaXRoQXV0aCxcbiAgZ2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50LFxuICByZXRyeUlmU2VydmVyRXJyb3Jcbn0gZnJvbSAnLi9jb21tb24nO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlSW5zdGFsbGF0aW9uUmVxdWVzdChcbiAgYXBwQ29uZmlnOiBBcHBDb25maWcsXG4gIGluc3RhbGxhdGlvbkVudHJ5OiBSZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnlcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBlbmRwb2ludCA9IGdldERlbGV0ZUVuZHBvaW50KGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xuXG4gIGNvbnN0IGhlYWRlcnMgPSBnZXRIZWFkZXJzV2l0aEF1dGgoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSk7XG4gIGNvbnN0IHJlcXVlc3Q6IFJlcXVlc3RJbml0ID0ge1xuICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgaGVhZGVyc1xuICB9O1xuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlJZlNlcnZlckVycm9yKCgpID0+IGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KSk7XG4gIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICB0aHJvdyBhd2FpdCBnZXRFcnJvckZyb21SZXNwb25zZSgnRGVsZXRlIEluc3RhbGxhdGlvbicsIHJlc3BvbnNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXREZWxldGVFbmRwb2ludChcbiAgYXBwQ29uZmlnOiBBcHBDb25maWcsXG4gIHsgZmlkIH06IFJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeVxuKTogc3RyaW5nIHtcbiAgcmV0dXJuIGAke2dldEluc3RhbGxhdGlvbnNFbmRwb2ludChhcHBDb25maWcpfS8ke2ZpZH1gO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgZGVsZXRlSW5zdGFsbGF0aW9uUmVxdWVzdCB9IGZyb20gJy4uL2Z1bmN0aW9ucy9kZWxldGUtaW5zdGFsbGF0aW9uLXJlcXVlc3QnO1xuaW1wb3J0IHsgcmVtb3ZlLCB1cGRhdGUgfSBmcm9tICcuLi9oZWxwZXJzL2lkYi1tYW5hZ2VyJztcbmltcG9ydCB7IFJlcXVlc3RTdGF0dXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2luc3RhbGxhdGlvbi1lbnRyeSc7XG5pbXBvcnQgeyBFUlJPUl9GQUNUT1JZLCBFcnJvckNvZGUgfSBmcm9tICcuLi91dGlsL2Vycm9ycyc7XG5pbXBvcnQgeyBGaXJlYmFzZUluc3RhbGxhdGlvbnNJbXBsIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9pbnN0YWxsYXRpb24taW1wbCc7XG5pbXBvcnQgeyBJbnN0YWxsYXRpb25zIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wdWJsaWMtdHlwZXMnO1xuXG4vKipcbiAqIERlbGV0ZXMgdGhlIEZpcmViYXNlIEluc3RhbGxhdGlvbiBhbmQgYWxsIGFzc29jaWF0ZWQgZGF0YS5cbiAqIEBwYXJhbSBpbnN0YWxsYXRpb25zIC0gVGhlIGBJbnN0YWxsYXRpb25zYCBpbnN0YW5jZS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVJbnN0YWxsYXRpb25zKFxuICBpbnN0YWxsYXRpb25zOiBJbnN0YWxsYXRpb25zXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgeyBhcHBDb25maWcgfSA9IGluc3RhbGxhdGlvbnMgYXMgRmlyZWJhc2VJbnN0YWxsYXRpb25zSW1wbDtcblxuICBjb25zdCBlbnRyeSA9IGF3YWl0IHVwZGF0ZShhcHBDb25maWcsIG9sZEVudHJ5ID0+IHtcbiAgICBpZiAob2xkRW50cnkgJiYgb2xkRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSBSZXF1ZXN0U3RhdHVzLk5PVF9TVEFSVEVEKSB7XG4gICAgICAvLyBEZWxldGUgdGhlIHVucmVnaXN0ZXJlZCBlbnRyeSB3aXRob3V0IHNlbmRpbmcgYSBkZWxldGVJbnN0YWxsYXRpb24gcmVxdWVzdC5cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiBvbGRFbnRyeTtcbiAgfSk7XG5cbiAgaWYgKGVudHJ5KSB7XG4gICAgaWYgKGVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gUmVxdWVzdFN0YXR1cy5JTl9QUk9HUkVTUykge1xuICAgICAgLy8gQ2FuJ3QgZGVsZXRlIHdoaWxlIHRyeWluZyB0byByZWdpc3Rlci5cbiAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKEVycm9yQ29kZS5ERUxFVEVfUEVORElOR19SRUdJU1RSQVRJT04pO1xuICAgIH0gZWxzZSBpZiAoZW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSBSZXF1ZXN0U3RhdHVzLkNPTVBMRVRFRCkge1xuICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKEVycm9yQ29kZS5BUFBfT0ZGTElORSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCBkZWxldGVJbnN0YWxsYXRpb25SZXF1ZXN0KGFwcENvbmZpZywgZW50cnkpO1xuICAgICAgICBhd2FpdCByZW1vdmUoYXBwQ29uZmlnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGFkZENhbGxiYWNrLCByZW1vdmVDYWxsYmFjayB9IGZyb20gJy4uL2hlbHBlcnMvZmlkLWNoYW5nZWQnO1xuaW1wb3J0IHsgRmlyZWJhc2VJbnN0YWxsYXRpb25zSW1wbCB9IGZyb20gJy4uL2ludGVyZmFjZXMvaW5zdGFsbGF0aW9uLWltcGwnO1xuaW1wb3J0IHsgSW5zdGFsbGF0aW9ucyB9IGZyb20gJy4uL2ludGVyZmFjZXMvcHVibGljLXR5cGVzJztcblxuLyoqXG4gKiBBbiB1c2VyIGRlZmluZWQgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCB3aGVuIEluc3RhbGxhdGlvbnMgSUQgY2hhbmdlcy5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB0eXBlIElkQ2hhbmdlQ2FsbGJhY2tGbiA9IChpbnN0YWxsYXRpb25JZDogc3RyaW5nKSA9PiB2b2lkO1xuLyoqXG4gKiBVbnN1YnNjcmliZSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHByZXZpb3VzbHkgYWRkZWQgdmlhIHtAbGluayAjSWRDaGFuZ2VDYWxsYmFja0ZufS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB0eXBlIElkQ2hhbmdlVW5zdWJzY3JpYmVGbiA9ICgpID0+IHZvaWQ7XG5cbi8qKlxuICogU2V0cyBhIG5ldyBjYWxsYmFjayB0aGF0IHdpbGwgZ2V0IGNhbGxlZCB3aGVuIEluc3RhbGxhdGlvbiBJRCBjaGFuZ2VzLlxuICogUmV0dXJucyBhbiB1bnN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IHdpbGwgcmVtb3ZlIHRoZSBjYWxsYmFjayB3aGVuIGNhbGxlZC5cbiAqIEBwYXJhbSBpbnN0YWxsYXRpb25zIC0gVGhlIGBJbnN0YWxsYXRpb25zYCBpbnN0YW5jZS5cbiAqIEBwYXJhbSBjYWxsYmFjayAtIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IGlzIGludm9rZWQgd2hlbiBGSUQgY2hhbmdlcy5cbiAqIEByZXR1cm5zIEEgZnVuY3Rpb24gdGhhdCBjYW4gYmUgY2FsbGVkIHRvIHVuc3Vic2NyaWJlLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9uSWRDaGFuZ2UoXG4gIGluc3RhbGxhdGlvbnM6IEluc3RhbGxhdGlvbnMsXG4gIGNhbGxiYWNrOiBJZENoYW5nZUNhbGxiYWNrRm5cbik6IElkQ2hhbmdlVW5zdWJzY3JpYmVGbiB7XG4gIGNvbnN0IHsgYXBwQ29uZmlnIH0gPSBpbnN0YWxsYXRpb25zIGFzIEZpcmViYXNlSW5zdGFsbGF0aW9uc0ltcGw7XG5cbiAgYWRkQ2FsbGJhY2soYXBwQ29uZmlnLCBjYWxsYmFjayk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgcmVtb3ZlQ2FsbGJhY2soYXBwQ29uZmlnLCBjYWxsYmFjayk7XG4gIH07XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBGaXJlYmFzZUFwcCwgZ2V0QXBwLCBfZ2V0UHJvdmlkZXIgfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IEluc3RhbGxhdGlvbnMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3B1YmxpYy10eXBlcyc7XG5cbi8qKlxuICogUmV0dXJucyBhbiBpbnN0YW5jZSBvZiB7QGxpbmsgSW5zdGFsbGF0aW9uc30gYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlblxuICoge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5zdGFsbGF0aW9ucyhhcHA6IEZpcmViYXNlQXBwID0gZ2V0QXBwKCkpOiBJbnN0YWxsYXRpb25zIHtcbiAgY29uc3QgaW5zdGFsbGF0aW9uc0ltcGwgPSBfZ2V0UHJvdmlkZXIoYXBwLCAnaW5zdGFsbGF0aW9ucycpLmdldEltbWVkaWF0ZSgpO1xuICByZXR1cm4gaW5zdGFsbGF0aW9uc0ltcGw7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBGaXJlYmFzZUFwcCwgRmlyZWJhc2VPcHRpb25zIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgQXBwQ29uZmlnIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9pbnN0YWxsYXRpb24taW1wbCc7XG5pbXBvcnQgeyBFUlJPUl9GQUNUT1JZLCBFcnJvckNvZGUgfSBmcm9tICcuLi91dGlsL2Vycm9ycyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0QXBwQ29uZmlnKGFwcDogRmlyZWJhc2VBcHApOiBBcHBDb25maWcge1xuICBpZiAoIWFwcCB8fCAhYXBwLm9wdGlvbnMpIHtcbiAgICB0aHJvdyBnZXRNaXNzaW5nVmFsdWVFcnJvcignQXBwIENvbmZpZ3VyYXRpb24nKTtcbiAgfVxuXG4gIGlmICghYXBwLm5hbWUpIHtcbiAgICB0aHJvdyBnZXRNaXNzaW5nVmFsdWVFcnJvcignQXBwIE5hbWUnKTtcbiAgfVxuXG4gIC8vIFJlcXVpcmVkIGFwcCBjb25maWcga2V5c1xuICBjb25zdCBjb25maWdLZXlzOiBBcnJheTxrZXlvZiBGaXJlYmFzZU9wdGlvbnM+ID0gW1xuICAgICdwcm9qZWN0SWQnLFxuICAgICdhcGlLZXknLFxuICAgICdhcHBJZCdcbiAgXTtcblxuICBmb3IgKGNvbnN0IGtleU5hbWUgb2YgY29uZmlnS2V5cykge1xuICAgIGlmICghYXBwLm9wdGlvbnNba2V5TmFtZV0pIHtcbiAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKGtleU5hbWUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYXBwTmFtZTogYXBwLm5hbWUsXG4gICAgcHJvamVjdElkOiBhcHAub3B0aW9ucy5wcm9qZWN0SWQhLFxuICAgIGFwaUtleTogYXBwLm9wdGlvbnMuYXBpS2V5ISxcbiAgICBhcHBJZDogYXBwLm9wdGlvbnMuYXBwSWQhXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldE1pc3NpbmdWYWx1ZUVycm9yKHZhbHVlTmFtZTogc3RyaW5nKTogRmlyZWJhc2VFcnJvciB7XG4gIHJldHVybiBFUlJPUl9GQUNUT1JZLmNyZWF0ZShFcnJvckNvZGUuTUlTU0lOR19BUFBfQ09ORklHX1ZBTFVFUywge1xuICAgIHZhbHVlTmFtZVxuICB9KTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IF9yZWdpc3RlckNvbXBvbmVudCwgX2dldFByb3ZpZGVyIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQge1xuICBDb21wb25lbnQsXG4gIENvbXBvbmVudFR5cGUsXG4gIEluc3RhbmNlRmFjdG9yeSxcbiAgQ29tcG9uZW50Q29udGFpbmVyXG59IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgZ2V0SWQsIGdldFRva2VuIH0gZnJvbSAnLi4vYXBpL2luZGV4JztcbmltcG9ydCB7IF9GaXJlYmFzZUluc3RhbGxhdGlvbnNJbnRlcm5hbCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcHVibGljLXR5cGVzJztcbmltcG9ydCB7IEZpcmViYXNlSW5zdGFsbGF0aW9uc0ltcGwgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2luc3RhbGxhdGlvbi1pbXBsJztcbmltcG9ydCB7IGV4dHJhY3RBcHBDb25maWcgfSBmcm9tICcuLi9oZWxwZXJzL2V4dHJhY3QtYXBwLWNvbmZpZyc7XG5cbmNvbnN0IElOU1RBTExBVElPTlNfTkFNRSA9ICdpbnN0YWxsYXRpb25zJztcbmNvbnN0IElOU1RBTExBVElPTlNfTkFNRV9JTlRFUk5BTCA9ICdpbnN0YWxsYXRpb25zLWludGVybmFsJztcblxuY29uc3QgcHVibGljRmFjdG9yeTogSW5zdGFuY2VGYWN0b3J5PCdpbnN0YWxsYXRpb25zJz4gPSAoXG4gIGNvbnRhaW5lcjogQ29tcG9uZW50Q29udGFpbmVyXG4pID0+IHtcbiAgY29uc3QgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcbiAgLy8gVGhyb3dzIGlmIGFwcCBpc24ndCBjb25maWd1cmVkIHByb3Blcmx5LlxuICBjb25zdCBhcHBDb25maWcgPSBleHRyYWN0QXBwQ29uZmlnKGFwcCk7XG4gIGNvbnN0IHBsYXRmb3JtTG9nZ2VyUHJvdmlkZXIgPSBfZ2V0UHJvdmlkZXIoYXBwLCAncGxhdGZvcm0tbG9nZ2VyJyk7XG5cbiAgY29uc3QgaW5zdGFsbGF0aW9uc0ltcGw6IEZpcmViYXNlSW5zdGFsbGF0aW9uc0ltcGwgPSB7XG4gICAgYXBwLFxuICAgIGFwcENvbmZpZyxcbiAgICBwbGF0Zm9ybUxvZ2dlclByb3ZpZGVyLFxuICAgIF9kZWxldGU6ICgpID0+IFByb21pc2UucmVzb2x2ZSgpXG4gIH07XG4gIHJldHVybiBpbnN0YWxsYXRpb25zSW1wbDtcbn07XG5cbmNvbnN0IGludGVybmFsRmFjdG9yeTogSW5zdGFuY2VGYWN0b3J5PCdpbnN0YWxsYXRpb25zLWludGVybmFsJz4gPSAoXG4gIGNvbnRhaW5lcjogQ29tcG9uZW50Q29udGFpbmVyXG4pID0+IHtcbiAgY29uc3QgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcbiAgLy8gSW50ZXJuYWwgRklTIGluc3RhbmNlIHJlbGllcyBvbiBwdWJsaWMgRklTIGluc3RhbmNlLlxuICBjb25zdCBpbnN0YWxsYXRpb25zID0gX2dldFByb3ZpZGVyKGFwcCwgSU5TVEFMTEFUSU9OU19OQU1FKS5nZXRJbW1lZGlhdGUoKTtcblxuICBjb25zdCBpbnN0YWxsYXRpb25zSW50ZXJuYWw6IF9GaXJlYmFzZUluc3RhbGxhdGlvbnNJbnRlcm5hbCA9IHtcbiAgICBnZXRJZDogKCkgPT4gZ2V0SWQoaW5zdGFsbGF0aW9ucyksXG4gICAgZ2V0VG9rZW46IChmb3JjZVJlZnJlc2g/OiBib29sZWFuKSA9PiBnZXRUb2tlbihpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2gpXG4gIH07XG4gIHJldHVybiBpbnN0YWxsYXRpb25zSW50ZXJuYWw7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJJbnN0YWxsYXRpb25zKCk6IHZvaWQge1xuICBfcmVnaXN0ZXJDb21wb25lbnQoXG4gICAgbmV3IENvbXBvbmVudChJTlNUQUxMQVRJT05TX05BTUUsIHB1YmxpY0ZhY3RvcnksIENvbXBvbmVudFR5cGUuUFVCTElDKVxuICApO1xuICBfcmVnaXN0ZXJDb21wb25lbnQoXG4gICAgbmV3IENvbXBvbmVudChcbiAgICAgIElOU1RBTExBVElPTlNfTkFNRV9JTlRFUk5BTCxcbiAgICAgIGludGVybmFsRmFjdG9yeSxcbiAgICAgIENvbXBvbmVudFR5cGUuUFJJVkFURVxuICAgIClcbiAgKTtcbn1cbiIsIi8qKlxuICogRmlyZWJhc2UgSW5zdGFsbGF0aW9uc1xuICpcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovXG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IHJlZ2lzdGVySW5zdGFsbGF0aW9ucyB9IGZyb20gJy4vZnVuY3Rpb25zL2NvbmZpZyc7XG5pbXBvcnQgeyByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IG5hbWUsIHZlcnNpb24gfSBmcm9tICcuLi9wYWNrYWdlLmpzb24nO1xuXG5leHBvcnQgKiBmcm9tICcuL2FwaSc7XG5leHBvcnQgKiBmcm9tICcuL2ludGVyZmFjZXMvcHVibGljLXR5cGVzJztcblxucmVnaXN0ZXJJbnN0YWxsYXRpb25zKCk7XG5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbik7XG4vLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdfX0JVSUxEX1RBUkdFVF9fJyk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7OztBQW1CQTtBQUVBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FDOUJBOzs7Ozs7Ozs7Ozs7Ozs7OztBQTZCQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBSUE7QUFKQTtBQUtBO0FBTEE7QUFPQTtBQVBBO0FBUUE7QUFSQTtBQXNCQTtBQWNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FDdkVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUErQkE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFGQTtBQUdBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFMQTtBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBUEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQVVBOzs7Ozs7O0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBSkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBWUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDOUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQWRBO0FBQUE7QUFvQkE7QUFwQkE7QUFDQTtBQURBO0FBb0JBO0FBQ0E7QUFyQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBc0JBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFGQTtBQUdBO0FBQ0E7QUFKQTtBQXZCQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQ2pDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQ3RCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FDcEJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQkE7QUFDQTtBQUVBOzs7OztBQUlBO0FBQ0E7OztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBYkE7O0FBZ0JBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7OztBQUlBO0FBQ0E7QUN0REE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBbUJBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQ3RCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBcUJBO0FBRUE7Ozs7O0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQU1BO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQVpBO0FBQ0E7QUFDQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQU1BO0FBQUE7QUFDQTtBQUNBO0FBUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBdUJBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBTkE7QUFXQTtBQUNBO0FBQUE7QUFDQTtBQWNBO0FBQ0E7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBSkE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFQQTtBQUFBO0FBQ0E7QUFEQTtBQVFBO0FBUkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBZkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBbUJBO0FBQ0E7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBSEE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVFBOzs7Ozs7OztBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBSkE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFQQTtBQUFBO0FBQ0E7QUFEQTtBQVFBO0FBQ0E7QUFDQTtBQVZBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQXJCQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUM1RkE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBcUNBOzs7Ozs7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQUlBO0FBQ0E7QUFaQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBTkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQWlCQTtBQWpCQTtBQUNBO0FBREE7QUFBQTtBQXFCQTtBQUNBO0FBRkE7QUFDQTtBQXJCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQTBCQTs7Ozs7O0FBSUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBRUE7Ozs7Ozs7OztBQU9BO0FBSUE7QUFBQTtBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQUNBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFBQTtBQUZBO0FBR0E7QUFIQTtBQUtBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUF0QkE7QUF3QkE7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBSEE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBTEE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBa0JBO0FBQ0E7QUFBQTtBQUNBO0FBSEE7QUFDQTtBQWxCQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQTBCQTtBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBT0E7QUFDQTtBQVJBO0FBQUE7QUFRQTtBQVJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBWUE7QUFaQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBZUE7QUFmQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQWlCQTtBQUFBO0FBQ0E7QUFsQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQStCQTs7Ozs7Ozs7OztBQVFBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSEE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFHQTtBQ2hPQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBbUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBdEJBO0FBQUE7QUE0QkE7QUE1QkE7QUFDQTtBQURBO0FBNEJBO0FBQ0E7QUE3QkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBOEJBO0FBQ0E7QUEvQkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQXNDQTtBQUVBO0FBRUE7QUFDQTtBQy9FQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQ0E7Ozs7Ozs7O0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUZBO0FBQUE7QUFNQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBRUE7QUFGQTtBQUdBO0FBQUE7QUFBQTtBQUFBOztBQUVBO0FBQ0E7QUFIQTs7QUFNQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTNCQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBTkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQThCQTtBQTlCQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFvQ0E7Ozs7Ozs7O0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFRQTtBQUNBO0FBVEE7QUFBQTtBQVNBO0FBVEE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFhQTtBQWJBO0FBQUE7QUFDQTtBQURBO0FBZ0JBO0FBQ0E7QUFqQkE7QUFpQkE7QUFqQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXlCQTs7Ozs7Ozs7OztBQVFBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQWJBO0FBZUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUtBO0FBSUE7QUFFQTtBQURBO0FBVkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQXdCQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQXpCQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBaUNBO0FBR0E7QUFFQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFEQTtBQUVBO0FBRkE7QUFJQTtBQUVBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQ3JOQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFzQkE7Ozs7Ozs7OztBQU9BO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQURBOzs7QUFLQTtBQUNBO0FBQ0E7QUFiQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUM3QkE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBeUJBOzs7Ozs7Ozs7O0FBUUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUpBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFTQTtBQVRBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBWUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFDQTtBQUpBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQzlDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBMEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQVBBO0FBQUE7QUFZQTtBQVpBO0FBQ0E7QUFEQTtBQVlBO0FBQ0E7QUFiQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWlCQTtBQUVBO0FBRUE7QUFDQTtBQ2pEQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF3QkE7Ozs7Ozs7O0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFIQTtBQUFBO0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQVZBO0FBQ0E7QUFEQTtBQUtBO0FBQ0E7QUFOQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFjQTtBQWRBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQWdCQTtBQUFBO0FBQ0E7QUFqQkE7QUFBQTtBQWlCQTtBQWpCQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBbUJBO0FBQUE7QUFDQTtBQXBCQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUM5QkE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0NBOzs7Ozs7Ozs7OztBQVNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FDckRBOzs7Ozs7Ozs7Ozs7Ozs7OztBQW9CQTs7Ozs7Ozs7O0FBT0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUM5QkE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FDeERBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE2QkE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUpBO0FBTUE7QUFkQTtBQUNBO0FBZ0JBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFEQTtBQUVBO0FBQUE7QUFBQTtBQUZBO0FBSUE7QUFYQTtBQUNBO0FBYUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFGQTtBQU1BO0FDMUVBOzs7Ozs7O0FBOEJBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@firebase/installations/dist/index.esm2017.js\n");

/***/ }),

/***/ "./node_modules/@firebase/logger/dist/index.esm2017.js":
/*!*************************************************************!*\
  !*** ./node_modules/@firebase/logger/dist/index.esm2017.js ***!
  \*************************************************************/
/*! exports provided: LogLevel, Logger, setLogLevel, setUserLogHandler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LogLevel\", function() { return LogLevel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Logger\", function() { return Logger; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setLogLevel\", function() { return setLogLevel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setUserLogHandler\", function() { return setUserLogHandler; });\nvar _ConsoleMethod;\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * A container for all of the Logger instances\r\n */\n\n\nvar instances = [];\n/**\r\n * The JS SDK supports 5 log levels and also allows a user the ability to\r\n * silence the logs altogether.\r\n *\r\n * The order is a follows:\r\n * DEBUG < VERBOSE < INFO < WARN < ERROR\r\n *\r\n * All of the log types above the current log level will be captured (i.e. if\r\n * you set the log level to `INFO`, errors will still be logged, but `DEBUG` and\r\n * `VERBOSE` logs will not)\r\n */\n\nvar LogLevel;\n\n(function (LogLevel) {\n  LogLevel[LogLevel[\"DEBUG\"] = 0] = \"DEBUG\";\n  LogLevel[LogLevel[\"VERBOSE\"] = 1] = \"VERBOSE\";\n  LogLevel[LogLevel[\"INFO\"] = 2] = \"INFO\";\n  LogLevel[LogLevel[\"WARN\"] = 3] = \"WARN\";\n  LogLevel[LogLevel[\"ERROR\"] = 4] = \"ERROR\";\n  LogLevel[LogLevel[\"SILENT\"] = 5] = \"SILENT\";\n})(LogLevel || (LogLevel = {}));\n\nvar levelStringToEnum = {\n  'debug': LogLevel.DEBUG,\n  'verbose': LogLevel.VERBOSE,\n  'info': LogLevel.INFO,\n  'warn': LogLevel.WARN,\n  'error': LogLevel.ERROR,\n  'silent': LogLevel.SILENT\n};\n/**\r\n * The default log level\r\n */\n\nvar defaultLogLevel = LogLevel.INFO;\n/**\r\n * By default, `console.debug` is not displayed in the developer console (in\r\n * chrome). To avoid forcing users to have to opt-in to these logs twice\r\n * (i.e. once for firebase, and once in the console), we are sending `DEBUG`\r\n * logs to the `console.log` function.\r\n */\n\nvar ConsoleMethod = (_ConsoleMethod = {}, _defineProperty(_ConsoleMethod, LogLevel.DEBUG, 'log'), _defineProperty(_ConsoleMethod, LogLevel.VERBOSE, 'log'), _defineProperty(_ConsoleMethod, LogLevel.INFO, 'info'), _defineProperty(_ConsoleMethod, LogLevel.WARN, 'warn'), _defineProperty(_ConsoleMethod, LogLevel.ERROR, 'error'), _ConsoleMethod);\n/**\r\n * The default log handler will forward DEBUG, VERBOSE, INFO, WARN, and ERROR\r\n * messages on to their corresponding console counterparts (if the log method\r\n * is supported by the current log level)\r\n */\n\nvar defaultLogHandler = function defaultLogHandler(instance, logType) {\n  if (logType < instance.logLevel) {\n    return;\n  }\n\n  var now = new Date().toISOString();\n  var method = ConsoleMethod[logType];\n\n  if (method) {\n    var _console;\n\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    (_console = console)[method].apply(_console, [\"[\".concat(now, \"]  \").concat(instance.name, \":\")].concat(args));\n  } else {\n    throw new Error(\"Attempted to log a message with an invalid logType (value: \".concat(logType, \")\"));\n  }\n};\n\nvar Logger = /*#__PURE__*/function () {\n  /**\r\n   * Gives you an instance of a Logger to capture messages according to\r\n   * Firebase's logging scheme.\r\n   *\r\n   * @param name The name that the logs will be associated with\r\n   */\n  function Logger(name) {\n    _classCallCheck(this, Logger);\n\n    this.name = name;\n    /**\r\n     * The log level of the given Logger instance.\r\n     */\n\n    this._logLevel = defaultLogLevel;\n    /**\r\n     * The main (internal) log handler for the Logger instance.\r\n     * Can be set to a new function in internal package code but not by user.\r\n     */\n\n    this._logHandler = defaultLogHandler;\n    /**\r\n     * The optional, additional, user-defined log handler for the Logger instance.\r\n     */\n\n    this._userLogHandler = null;\n    /**\r\n     * Capture the current instance for later use\r\n     */\n\n    instances.push(this);\n  }\n\n  _createClass(Logger, [{\n    key: \"setLogLevel\",\n    // Workaround for setter/getter having to be the same type.\n    value: function setLogLevel(val) {\n      this._logLevel = typeof val === 'string' ? levelStringToEnum[val] : val;\n    }\n  }, {\n    key: \"debug\",\n\n    /**\r\n     * The functions below are all based on the `console` interface\r\n     */\n    value: function debug() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      this._userLogHandler && this._userLogHandler.apply(this, [this, LogLevel.DEBUG].concat(args));\n\n      this._logHandler.apply(this, [this, LogLevel.DEBUG].concat(args));\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      this._userLogHandler && this._userLogHandler.apply(this, [this, LogLevel.VERBOSE].concat(args));\n\n      this._logHandler.apply(this, [this, LogLevel.VERBOSE].concat(args));\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      this._userLogHandler && this._userLogHandler.apply(this, [this, LogLevel.INFO].concat(args));\n\n      this._logHandler.apply(this, [this, LogLevel.INFO].concat(args));\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n\n      this._userLogHandler && this._userLogHandler.apply(this, [this, LogLevel.WARN].concat(args));\n\n      this._logHandler.apply(this, [this, LogLevel.WARN].concat(args));\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n        args[_key6] = arguments[_key6];\n      }\n\n      this._userLogHandler && this._userLogHandler.apply(this, [this, LogLevel.ERROR].concat(args));\n\n      this._logHandler.apply(this, [this, LogLevel.ERROR].concat(args));\n    }\n  }, {\n    key: \"logLevel\",\n    get: function get() {\n      return this._logLevel;\n    },\n    set: function set(val) {\n      if (!(val in LogLevel)) {\n        throw new TypeError(\"Invalid value \\\"\".concat(val, \"\\\" assigned to `logLevel`\"));\n      }\n\n      this._logLevel = val;\n    }\n  }, {\n    key: \"logHandler\",\n    get: function get() {\n      return this._logHandler;\n    },\n    set: function set(val) {\n      if (typeof val !== 'function') {\n        throw new TypeError('Value assigned to `logHandler` must be a function');\n      }\n\n      this._logHandler = val;\n    }\n  }, {\n    key: \"userLogHandler\",\n    get: function get() {\n      return this._userLogHandler;\n    },\n    set: function set(val) {\n      this._userLogHandler = val;\n    }\n  }]);\n\n  return Logger;\n}();\n\nfunction setLogLevel(level) {\n  instances.forEach(function (inst) {\n    inst.setLogLevel(level);\n  });\n}\n\nfunction setUserLogHandler(logCallback, options) {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    var _loop = function _loop() {\n      var instance = _step.value;\n      var customLogLevel = null;\n\n      if (options && options.level) {\n        customLogLevel = levelStringToEnum[options.level];\n      }\n\n      if (logCallback === null) {\n        instance.userLogHandler = null;\n      } else {\n        instance.userLogHandler = function (instance, level) {\n          for (var _len7 = arguments.length, args = new Array(_len7 > 2 ? _len7 - 2 : 0), _key7 = 2; _key7 < _len7; _key7++) {\n            args[_key7 - 2] = arguments[_key7];\n          }\n\n          var message = args.map(function (arg) {\n            if (arg == null) {\n              return null;\n            } else if (typeof arg === 'string') {\n              return arg;\n            } else if (typeof arg === 'number' || typeof arg === 'boolean') {\n              return arg.toString();\n            } else if (arg instanceof Error) {\n              return arg.message;\n            } else {\n              try {\n                return JSON.stringify(arg);\n              } catch (ignored) {\n                return null;\n              }\n            }\n          }).filter(function (arg) {\n            return arg;\n          }).join(' ');\n\n          if (level >= (customLogLevel !== null && customLogLevel !== void 0 ? customLogLevel : instance.logLevel)) {\n            logCallback({\n              level: LogLevel[level].toLowerCase(),\n              message: message,\n              args: args,\n              type: instance.name\n            });\n          }\n        };\n      }\n    };\n\n    for (var _iterator = instances[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      _loop();\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2xvZ2dlci9kaXN0L2luZGV4LmVzbTIwMTcuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vc3JjL2xvZ2dlci50cz8xMWQ5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmV4cG9ydCB0eXBlIExvZ0xldmVsU3RyaW5nID1cbiAgfCAnZGVidWcnXG4gIHwgJ3ZlcmJvc2UnXG4gIHwgJ2luZm8nXG4gIHwgJ3dhcm4nXG4gIHwgJ2Vycm9yJ1xuICB8ICdzaWxlbnQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIExvZ09wdGlvbnMge1xuICBsZXZlbDogTG9nTGV2ZWxTdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIExvZ0NhbGxiYWNrID0gKGNhbGxiYWNrUGFyYW1zOiBMb2dDYWxsYmFja1BhcmFtcykgPT4gdm9pZDtcblxuZXhwb3J0IGludGVyZmFjZSBMb2dDYWxsYmFja1BhcmFtcyB7XG4gIGxldmVsOiBMb2dMZXZlbFN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBhcmdzOiB1bmtub3duW107XG4gIHR5cGU6IHN0cmluZztcbn1cblxuLyoqXG4gKiBBIGNvbnRhaW5lciBmb3IgYWxsIG9mIHRoZSBMb2dnZXIgaW5zdGFuY2VzXG4gKi9cbmV4cG9ydCBjb25zdCBpbnN0YW5jZXM6IExvZ2dlcltdID0gW107XG5cbi8qKlxuICogVGhlIEpTIFNESyBzdXBwb3J0cyA1IGxvZyBsZXZlbHMgYW5kIGFsc28gYWxsb3dzIGEgdXNlciB0aGUgYWJpbGl0eSB0b1xuICogc2lsZW5jZSB0aGUgbG9ncyBhbHRvZ2V0aGVyLlxuICpcbiAqIFRoZSBvcmRlciBpcyBhIGZvbGxvd3M6XG4gKiBERUJVRyA8IFZFUkJPU0UgPCBJTkZPIDwgV0FSTiA8IEVSUk9SXG4gKlxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIHdpbGwgYmUgY2FwdHVyZWQgKGkuZS4gaWZcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgSU5GT2AsIGVycm9ycyB3aWxsIHN0aWxsIGJlIGxvZ2dlZCwgYnV0IGBERUJVR2AgYW5kXG4gKiBgVkVSQk9TRWAgbG9ncyB3aWxsIG5vdClcbiAqL1xuZXhwb3J0IGVudW0gTG9nTGV2ZWwge1xuICBERUJVRyxcbiAgVkVSQk9TRSxcbiAgSU5GTyxcbiAgV0FSTixcbiAgRVJST1IsXG4gIFNJTEVOVFxufVxuXG5jb25zdCBsZXZlbFN0cmluZ1RvRW51bTogeyBba2V5IGluIExvZ0xldmVsU3RyaW5nXTogTG9nTGV2ZWwgfSA9IHtcbiAgJ2RlYnVnJzogTG9nTGV2ZWwuREVCVUcsXG4gICd2ZXJib3NlJzogTG9nTGV2ZWwuVkVSQk9TRSxcbiAgJ2luZm8nOiBMb2dMZXZlbC5JTkZPLFxuICAnd2Fybic6IExvZ0xldmVsLldBUk4sXG4gICdlcnJvcic6IExvZ0xldmVsLkVSUk9SLFxuICAnc2lsZW50JzogTG9nTGV2ZWwuU0lMRU5UXG59O1xuXG4vKipcbiAqIFRoZSBkZWZhdWx0IGxvZyBsZXZlbFxuICovXG5jb25zdCBkZWZhdWx0TG9nTGV2ZWw6IExvZ0xldmVsID0gTG9nTGV2ZWwuSU5GTztcblxuLyoqXG4gKiBXZSBhbGxvdyB1c2VycyB0aGUgYWJpbGl0eSB0byBwYXNzIHRoZWlyIG93biBsb2cgaGFuZGxlci4gV2Ugd2lsbCBwYXNzIHRoZVxuICogdHlwZSBvZiBsb2csIHRoZSBjdXJyZW50IGxvZyBsZXZlbCwgYW5kIGFueSBvdGhlciBhcmd1bWVudHMgcGFzc2VkIChpLmUuIHRoZVxuICogbWVzc2FnZXMgdGhhdCB0aGUgdXNlciB3YW50cyB0byBsb2cpIHRvIHRoaXMgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCB0eXBlIExvZ0hhbmRsZXIgPSAoXG4gIGxvZ2dlckluc3RhbmNlOiBMb2dnZXIsXG4gIGxvZ1R5cGU6IExvZ0xldmVsLFxuICAuLi5hcmdzOiB1bmtub3duW11cbikgPT4gdm9pZDtcblxuLyoqXG4gKiBCeSBkZWZhdWx0LCBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGRpc3BsYXllZCBpbiB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgKGluXG4gKiBjaHJvbWUpLiBUbyBhdm9pZCBmb3JjaW5nIHVzZXJzIHRvIGhhdmUgdG8gb3B0LWluIHRvIHRoZXNlIGxvZ3MgdHdpY2VcbiAqIChpLmUuIG9uY2UgZm9yIGZpcmViYXNlLCBhbmQgb25jZSBpbiB0aGUgY29uc29sZSksIHdlIGFyZSBzZW5kaW5nIGBERUJVR2BcbiAqIGxvZ3MgdG8gdGhlIGBjb25zb2xlLmxvZ2AgZnVuY3Rpb24uXG4gKi9cbmNvbnN0IENvbnNvbGVNZXRob2QgPSB7XG4gIFtMb2dMZXZlbC5ERUJVR106ICdsb2cnLFxuICBbTG9nTGV2ZWwuVkVSQk9TRV06ICdsb2cnLFxuICBbTG9nTGV2ZWwuSU5GT106ICdpbmZvJyxcbiAgW0xvZ0xldmVsLldBUk5dOiAnd2FybicsXG4gIFtMb2dMZXZlbC5FUlJPUl06ICdlcnJvcidcbn07XG5cbi8qKlxuICogVGhlIGRlZmF1bHQgbG9nIGhhbmRsZXIgd2lsbCBmb3J3YXJkIERFQlVHLCBWRVJCT1NFLCBJTkZPLCBXQVJOLCBhbmQgRVJST1JcbiAqIG1lc3NhZ2VzIG9uIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgY29uc29sZSBjb3VudGVycGFydHMgKGlmIHRoZSBsb2cgbWV0aG9kXG4gKiBpcyBzdXBwb3J0ZWQgYnkgdGhlIGN1cnJlbnQgbG9nIGxldmVsKVxuICovXG5jb25zdCBkZWZhdWx0TG9nSGFuZGxlcjogTG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbG9nVHlwZSwgLi4uYXJncyk6IHZvaWQgPT4ge1xuICBpZiAobG9nVHlwZSA8IGluc3RhbmNlLmxvZ0xldmVsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgY29uc3QgbWV0aG9kID0gQ29uc29sZU1ldGhvZFtsb2dUeXBlIGFzIGtleW9mIHR5cGVvZiBDb25zb2xlTWV0aG9kXTtcbiAgaWYgKG1ldGhvZCkge1xuICAgIGNvbnNvbGVbbWV0aG9kIGFzICdsb2cnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJ10oXG4gICAgICBgWyR7bm93fV0gICR7aW5zdGFuY2UubmFtZX06YCxcbiAgICAgIC4uLmFyZ3NcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBBdHRlbXB0ZWQgdG8gbG9nIGEgbWVzc2FnZSB3aXRoIGFuIGludmFsaWQgbG9nVHlwZSAodmFsdWU6ICR7bG9nVHlwZX0pYFxuICAgICk7XG4gIH1cbn07XG5cbmV4cG9ydCBjbGFzcyBMb2dnZXIge1xuICAvKipcbiAgICogR2l2ZXMgeW91IGFuIGluc3RhbmNlIG9mIGEgTG9nZ2VyIHRvIGNhcHR1cmUgbWVzc2FnZXMgYWNjb3JkaW5nIHRvXG4gICAqIEZpcmViYXNlJ3MgbG9nZ2luZyBzY2hlbWUuXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRoYXQgdGhlIGxvZ3Mgd2lsbCBiZSBhc3NvY2lhdGVkIHdpdGhcbiAgICovXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBuYW1lOiBzdHJpbmcpIHtcbiAgICAvKipcbiAgICAgKiBDYXB0dXJlIHRoZSBjdXJyZW50IGluc3RhbmNlIGZvciBsYXRlciB1c2VcbiAgICAgKi9cbiAgICBpbnN0YW5jZXMucHVzaCh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbG9nIGxldmVsIG9mIHRoZSBnaXZlbiBMb2dnZXIgaW5zdGFuY2UuXG4gICAqL1xuICBwcml2YXRlIF9sb2dMZXZlbCA9IGRlZmF1bHRMb2dMZXZlbDtcblxuICBnZXQgbG9nTGV2ZWwoKTogTG9nTGV2ZWwge1xuICAgIHJldHVybiB0aGlzLl9sb2dMZXZlbDtcbiAgfVxuXG4gIHNldCBsb2dMZXZlbCh2YWw6IExvZ0xldmVsKSB7XG4gICAgaWYgKCEodmFsIGluIExvZ0xldmVsKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCB2YWx1ZSBcIiR7dmFsfVwiIGFzc2lnbmVkIHRvIFxcYGxvZ0xldmVsXFxgYCk7XG4gICAgfVxuICAgIHRoaXMuX2xvZ0xldmVsID0gdmFsO1xuICB9XG5cbiAgLy8gV29ya2Fyb3VuZCBmb3Igc2V0dGVyL2dldHRlciBoYXZpbmcgdG8gYmUgdGhlIHNhbWUgdHlwZS5cbiAgc2V0TG9nTGV2ZWwodmFsOiBMb2dMZXZlbCB8IExvZ0xldmVsU3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5fbG9nTGV2ZWwgPSB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyA/IGxldmVsU3RyaW5nVG9FbnVtW3ZhbF0gOiB2YWw7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG1haW4gKGludGVybmFsKSBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cbiAgICogQ2FuIGJlIHNldCB0byBhIG5ldyBmdW5jdGlvbiBpbiBpbnRlcm5hbCBwYWNrYWdlIGNvZGUgYnV0IG5vdCBieSB1c2VyLlxuICAgKi9cbiAgcHJpdmF0ZSBfbG9nSGFuZGxlcjogTG9nSGFuZGxlciA9IGRlZmF1bHRMb2dIYW5kbGVyO1xuICBnZXQgbG9nSGFuZGxlcigpOiBMb2dIYW5kbGVyIHtcbiAgICByZXR1cm4gdGhpcy5fbG9nSGFuZGxlcjtcbiAgfVxuICBzZXQgbG9nSGFuZGxlcih2YWw6IExvZ0hhbmRsZXIpIHtcbiAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgYXNzaWduZWQgdG8gYGxvZ0hhbmRsZXJgIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgIH1cbiAgICB0aGlzLl9sb2dIYW5kbGVyID0gdmFsO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBvcHRpb25hbCwgYWRkaXRpb25hbCwgdXNlci1kZWZpbmVkIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxuICAgKi9cbiAgcHJpdmF0ZSBfdXNlckxvZ0hhbmRsZXI6IExvZ0hhbmRsZXIgfCBudWxsID0gbnVsbDtcbiAgZ2V0IHVzZXJMb2dIYW5kbGVyKCk6IExvZ0hhbmRsZXIgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5fdXNlckxvZ0hhbmRsZXI7XG4gIH1cbiAgc2V0IHVzZXJMb2dIYW5kbGVyKHZhbDogTG9nSGFuZGxlciB8IG51bGwpIHtcbiAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IHZhbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZnVuY3Rpb25zIGJlbG93IGFyZSBhbGwgYmFzZWQgb24gdGhlIGBjb25zb2xlYCBpbnRlcmZhY2VcbiAgICovXG5cbiAgZGVidWcoLi4uYXJnczogdW5rbm93bltdKTogdm9pZCB7XG4gICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xuICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xuICB9XG4gIGxvZyguLi5hcmdzOiB1bmtub3duW10pOiB2b2lkIHtcbiAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJlxuICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuVkVSQk9TRSwgLi4uYXJncyk7XG4gICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcbiAgfVxuICBpbmZvKC4uLmFyZ3M6IHVua25vd25bXSk6IHZvaWQge1xuICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xuICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XG4gIH1cbiAgd2FybiguLi5hcmdzOiB1bmtub3duW10pOiB2b2lkIHtcbiAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcbiAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLldBUk4sIC4uLmFyZ3MpO1xuICB9XG4gIGVycm9yKC4uLmFyZ3M6IHVua25vd25bXSk6IHZvaWQge1xuICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkVSUk9SLCAuLi5hcmdzKTtcbiAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkVSUk9SLCAuLi5hcmdzKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0TG9nTGV2ZWwobGV2ZWw6IExvZ0xldmVsU3RyaW5nIHwgTG9nTGV2ZWwpOiB2b2lkIHtcbiAgaW5zdGFuY2VzLmZvckVhY2goaW5zdCA9PiB7XG4gICAgaW5zdC5zZXRMb2dMZXZlbChsZXZlbCk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0VXNlckxvZ0hhbmRsZXIoXG4gIGxvZ0NhbGxiYWNrOiBMb2dDYWxsYmFjayB8IG51bGwsXG4gIG9wdGlvbnM/OiBMb2dPcHRpb25zXG4pOiB2b2lkIHtcbiAgZm9yIChjb25zdCBpbnN0YW5jZSBvZiBpbnN0YW5jZXMpIHtcbiAgICBsZXQgY3VzdG9tTG9nTGV2ZWw6IExvZ0xldmVsIHwgbnVsbCA9IG51bGw7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sZXZlbCkge1xuICAgICAgY3VzdG9tTG9nTGV2ZWwgPSBsZXZlbFN0cmluZ1RvRW51bVtvcHRpb25zLmxldmVsXTtcbiAgICB9XG4gICAgaWYgKGxvZ0NhbGxiYWNrID09PSBudWxsKSB7XG4gICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gKFxuICAgICAgICBpbnN0YW5jZTogTG9nZ2VyLFxuICAgICAgICBsZXZlbDogTG9nTGV2ZWwsXG4gICAgICAgIC4uLmFyZ3M6IHVua25vd25bXVxuICAgICAgKSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhcmdzXG4gICAgICAgICAgLm1hcChhcmcgPT4ge1xuICAgICAgICAgICAgaWYgKGFyZyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICByZXR1cm4gYXJnO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGFyZy50b1N0cmluZygpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhcmcgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICByZXR1cm4gYXJnLm1lc3NhZ2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmcpO1xuICAgICAgICAgICAgICB9IGNhdGNoIChpZ25vcmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIC5maWx0ZXIoYXJnID0+IGFyZylcbiAgICAgICAgICAuam9pbignICcpO1xuICAgICAgICBpZiAobGV2ZWwgPj0gKGN1c3RvbUxvZ0xldmVsID8/IGluc3RhbmNlLmxvZ0xldmVsKSkge1xuICAgICAgICAgIGxvZ0NhbGxiYWNrKHtcbiAgICAgICAgICAgIGxldmVsOiBMb2dMZXZlbFtsZXZlbF0udG9Mb3dlckNhc2UoKSBhcyBMb2dMZXZlbFN0cmluZyxcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICBhcmdzLFxuICAgICAgICAgICAgdHlwZTogaW5zdGFuY2UubmFtZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBc0NBOzs7OztBQUdBO0FBRUE7Ozs7Ozs7Ozs7OztBQVdBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBU0E7Ozs7QUFHQTtBQWFBOzs7Ozs7O0FBTUE7QUFRQTs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBTkE7QUFNQTtBQUNBO0FBQUE7QUFEQTtBQU1BO0FBR0E7QUFmQTtBQUNBO0FBaUJBOzs7Ozs7O0FBT0E7QUFBQTtBQUNBO0FBREE7Ozs7O0FBVUE7Ozs7OztBQXNCQTs7Ozs7QUFjQTs7Ozs7QUExQ0E7QUFDQTtBQUNBOzs7O0FBa0JBO0FBQ0E7QUFDQTs7Ozs7OztBQWdDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTs7O0FBbEVBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7OztBQVlBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7OztBQU1BO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7Ozs7QUE2QkE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFEQTtBQUdBO0FBREE7QUFHQTtBQURBO0FBR0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQWhCQTtBQWtCQTtBQWxCQTtBQUNBO0FBbUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFoQ0E7QUFrQ0E7QUE1Q0E7QUFDQTtBQUNBO0FBQUE7QUEyQ0E7QUE3Q0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQThDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@firebase/logger/dist/index.esm2017.js\n");

/***/ }),

/***/ "./node_modules/@firebase/messaging/dist/index.esm2017.js":
/*!****************************************************************!*\
  !*** ./node_modules/@firebase/messaging/dist/index.esm2017.js ***!
  \****************************************************************/
/*! exports provided: deleteToken, getMessaging, getToken, isSupported, onMessage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deleteToken\", function() { return deleteToken; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getMessaging\", function() { return getMessagingInWindow; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getToken\", function() { return getToken; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isSupported\", function() { return isWindowSupported; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"onMessage\", function() { return onMessage; });\n/* harmony import */ var _firebase_installations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/installations */ \"./node_modules/@firebase/installations/dist/index.esm2017.js\");\n/* harmony import */ var _firebase_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @firebase/component */ \"./node_modules/@firebase/component/dist/index.esm.js\");\n/* harmony import */ var idb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! idb */ \"./node_modules/idb/build/idb.js\");\n/* harmony import */ var idb__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(idb__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @firebase/util */ \"./node_modules/@firebase/util/dist/index.esm2017.js\");\n/* harmony import */ var _firebase_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @firebase/app */ \"./node_modules/@firebase/app/dist/index.esm2017.js\");\nvar _ERROR_MAP;\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\n\n\n\n\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar DEFAULT_SW_PATH = '/firebase-messaging-sw.js';\nvar DEFAULT_SW_SCOPE = '/firebase-cloud-messaging-push-scope';\nvar DEFAULT_VAPID_KEY = 'BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4';\nvar ENDPOINT = 'https://fcmregistrations.googleapis.com/v1';\nvar CONSOLE_CAMPAIGN_ID = 'google.c.a.c_id';\nvar CONSOLE_CAMPAIGN_NAME = 'google.c.a.c_l';\nvar CONSOLE_CAMPAIGN_TIME = 'google.c.a.ts';\n/** Set to '1' if Analytics is enabled for the campaign */\n\nvar CONSOLE_CAMPAIGN_ANALYTICS_ENABLED = 'google.c.a.e';\nvar MessageType$1;\n\n(function (MessageType) {\n  MessageType[MessageType[\"DATA_MESSAGE\"] = 1] = \"DATA_MESSAGE\";\n  MessageType[MessageType[\"DISPLAY_NOTIFICATION\"] = 3] = \"DISPLAY_NOTIFICATION\";\n})(MessageType$1 || (MessageType$1 = {}));\n/**\r\n * @license\r\n * Copyright 2018 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except\r\n * in compliance with the License. You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under the License\r\n * is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express\r\n * or implied. See the License for the specific language governing permissions and limitations under\r\n * the License.\r\n */\n\n\nvar MessageType;\n\n(function (MessageType) {\n  MessageType[\"PUSH_RECEIVED\"] = \"push-received\";\n  MessageType[\"NOTIFICATION_CLICKED\"] = \"notification-clicked\";\n})(MessageType || (MessageType = {}));\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction arrayToBase64(array) {\n  var uint8Array = new Uint8Array(array);\n  var base64String = btoa(String.fromCharCode.apply(String, _toConsumableArray(uint8Array)));\n  return base64String.replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n}\n\nfunction base64ToArray(base64String) {\n  var padding = '='.repeat((4 - base64String.length % 4) % 4);\n  var base64 = (base64String + padding).replace(/\\-/g, '+').replace(/_/g, '/');\n  var rawData = atob(base64);\n  var outputArray = new Uint8Array(rawData.length);\n\n  for (var i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n\n  return outputArray;\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar OLD_DB_NAME = 'fcm_token_details_db';\n/**\r\n * The last DB version of 'fcm_token_details_db' was 4. This is one higher, so that the upgrade\r\n * callback is called for all versions of the old DB.\r\n */\n\nvar OLD_DB_VERSION = 5;\nvar OLD_OBJECT_STORE_NAME = 'fcm_token_object_Store';\n\nfunction migrateOldDatabase(senderId) {\n  var databases, dbNames, tokenDetails, db;\n  return regeneratorRuntime.async(function migrateOldDatabase$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!('databases' in indexedDB)) {\n            _context2.next = 7;\n            break;\n          }\n\n          _context2.next = 3;\n          return regeneratorRuntime.awrap(indexedDB.databases());\n\n        case 3:\n          databases = _context2.sent;\n          dbNames = databases.map(function (db) {\n            return db.name;\n          });\n\n          if (dbNames.includes(OLD_DB_NAME)) {\n            _context2.next = 7;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", null);\n\n        case 7:\n          tokenDetails = null;\n          _context2.next = 10;\n          return regeneratorRuntime.awrap(Object(idb__WEBPACK_IMPORTED_MODULE_2__[\"openDb\"])(OLD_DB_NAME, OLD_DB_VERSION, function _callee(db) {\n            var _a, objectStore, value, oldDetails, _oldDetails, _oldDetails2;\n\n            return regeneratorRuntime.async(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    if (!(db.oldVersion < 2)) {\n                      _context.next = 2;\n                      break;\n                    }\n\n                    return _context.abrupt(\"return\");\n\n                  case 2:\n                    if (db.objectStoreNames.contains(OLD_OBJECT_STORE_NAME)) {\n                      _context.next = 4;\n                      break;\n                    }\n\n                    return _context.abrupt(\"return\");\n\n                  case 4:\n                    objectStore = db.transaction.objectStore(OLD_OBJECT_STORE_NAME);\n                    _context.next = 7;\n                    return regeneratorRuntime.awrap(objectStore.index('fcmSenderId').get(senderId));\n\n                  case 7:\n                    value = _context.sent;\n                    _context.next = 10;\n                    return regeneratorRuntime.awrap(objectStore.clear());\n\n                  case 10:\n                    if (value) {\n                      _context.next = 12;\n                      break;\n                    }\n\n                    return _context.abrupt(\"return\");\n\n                  case 12:\n                    if (!(db.oldVersion === 2)) {\n                      _context.next = 19;\n                      break;\n                    }\n\n                    oldDetails = value;\n\n                    if (!(!oldDetails.auth || !oldDetails.p256dh || !oldDetails.endpoint)) {\n                      _context.next = 16;\n                      break;\n                    }\n\n                    return _context.abrupt(\"return\");\n\n                  case 16:\n                    tokenDetails = {\n                      token: oldDetails.fcmToken,\n                      createTime: (_a = oldDetails.createTime) !== null && _a !== void 0 ? _a : Date.now(),\n                      subscriptionOptions: {\n                        auth: oldDetails.auth,\n                        p256dh: oldDetails.p256dh,\n                        endpoint: oldDetails.endpoint,\n                        swScope: oldDetails.swScope,\n                        vapidKey: typeof oldDetails.vapidKey === 'string' ? oldDetails.vapidKey : arrayToBase64(oldDetails.vapidKey)\n                      }\n                    };\n                    _context.next = 20;\n                    break;\n\n                  case 19:\n                    if (db.oldVersion === 3) {\n                      _oldDetails = value;\n                      tokenDetails = {\n                        token: _oldDetails.fcmToken,\n                        createTime: _oldDetails.createTime,\n                        subscriptionOptions: {\n                          auth: arrayToBase64(_oldDetails.auth),\n                          p256dh: arrayToBase64(_oldDetails.p256dh),\n                          endpoint: _oldDetails.endpoint,\n                          swScope: _oldDetails.swScope,\n                          vapidKey: arrayToBase64(_oldDetails.vapidKey)\n                        }\n                      };\n                    } else if (db.oldVersion === 4) {\n                      _oldDetails2 = value;\n                      tokenDetails = {\n                        token: _oldDetails2.fcmToken,\n                        createTime: _oldDetails2.createTime,\n                        subscriptionOptions: {\n                          auth: arrayToBase64(_oldDetails2.auth),\n                          p256dh: arrayToBase64(_oldDetails2.p256dh),\n                          endpoint: _oldDetails2.endpoint,\n                          swScope: _oldDetails2.swScope,\n                          vapidKey: arrayToBase64(_oldDetails2.vapidKey)\n                        }\n                      };\n                    }\n\n                  case 20:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            });\n          }));\n\n        case 10:\n          db = _context2.sent;\n          db.close(); // Delete all old databases.\n\n          _context2.next = 14;\n          return regeneratorRuntime.awrap(Object(idb__WEBPACK_IMPORTED_MODULE_2__[\"deleteDb\"])(OLD_DB_NAME));\n\n        case 14:\n          _context2.next = 16;\n          return regeneratorRuntime.awrap(Object(idb__WEBPACK_IMPORTED_MODULE_2__[\"deleteDb\"])('fcm_vapid_details_db'));\n\n        case 16:\n          _context2.next = 18;\n          return regeneratorRuntime.awrap(Object(idb__WEBPACK_IMPORTED_MODULE_2__[\"deleteDb\"])('undefined'));\n\n        case 18:\n          return _context2.abrupt(\"return\", checkTokenDetails(tokenDetails) ? tokenDetails : null);\n\n        case 19:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n\nfunction checkTokenDetails(tokenDetails) {\n  if (!tokenDetails || !tokenDetails.subscriptionOptions) {\n    return false;\n  }\n\n  var subscriptionOptions = tokenDetails.subscriptionOptions;\n  return typeof tokenDetails.createTime === 'number' && tokenDetails.createTime > 0 && typeof tokenDetails.token === 'string' && tokenDetails.token.length > 0 && typeof subscriptionOptions.auth === 'string' && subscriptionOptions.auth.length > 0 && typeof subscriptionOptions.p256dh === 'string' && subscriptionOptions.p256dh.length > 0 && typeof subscriptionOptions.endpoint === 'string' && subscriptionOptions.endpoint.length > 0 && typeof subscriptionOptions.swScope === 'string' && subscriptionOptions.swScope.length > 0 && typeof subscriptionOptions.vapidKey === 'string' && subscriptionOptions.vapidKey.length > 0;\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n// Exported for tests.\n\n\nvar DATABASE_NAME = 'firebase-messaging-database';\nvar DATABASE_VERSION = 1;\nvar OBJECT_STORE_NAME = 'firebase-messaging-store';\nvar dbPromise = null;\n\nfunction getDbPromise() {\n  if (!dbPromise) {\n    dbPromise = Object(idb__WEBPACK_IMPORTED_MODULE_2__[\"openDb\"])(DATABASE_NAME, DATABASE_VERSION, function (upgradeDb) {\n      // We don't use 'break' in this switch statement, the fall-through behavior is what we want,\n      // because if there are multiple versions between the old version and the current version, we\n      // want ALL the migrations that correspond to those versions to run, not only the last one.\n      // eslint-disable-next-line default-case\n      switch (upgradeDb.oldVersion) {\n        case 0:\n          upgradeDb.createObjectStore(OBJECT_STORE_NAME);\n      }\n    });\n  }\n\n  return dbPromise;\n}\n/** Gets record(s) from the objectStore that match the given key. */\n\n\nfunction dbGet(firebaseDependencies) {\n  var key, db, tokenDetails, oldTokenDetails;\n  return regeneratorRuntime.async(function dbGet$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          key = getKey(firebaseDependencies);\n          _context3.next = 3;\n          return regeneratorRuntime.awrap(getDbPromise());\n\n        case 3:\n          db = _context3.sent;\n          _context3.next = 6;\n          return regeneratorRuntime.awrap(db.transaction(OBJECT_STORE_NAME).objectStore(OBJECT_STORE_NAME).get(key));\n\n        case 6:\n          tokenDetails = _context3.sent;\n\n          if (!tokenDetails) {\n            _context3.next = 11;\n            break;\n          }\n\n          return _context3.abrupt(\"return\", tokenDetails);\n\n        case 11:\n          _context3.next = 13;\n          return regeneratorRuntime.awrap(migrateOldDatabase(firebaseDependencies.appConfig.senderId));\n\n        case 13:\n          oldTokenDetails = _context3.sent;\n\n          if (!oldTokenDetails) {\n            _context3.next = 18;\n            break;\n          }\n\n          _context3.next = 17;\n          return regeneratorRuntime.awrap(dbSet(firebaseDependencies, oldTokenDetails));\n\n        case 17:\n          return _context3.abrupt(\"return\", oldTokenDetails);\n\n        case 18:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n}\n/** Assigns or overwrites the record for the given key with the given value. */\n\n\nfunction dbSet(firebaseDependencies, tokenDetails) {\n  var key, db, tx;\n  return regeneratorRuntime.async(function dbSet$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          key = getKey(firebaseDependencies);\n          _context4.next = 3;\n          return regeneratorRuntime.awrap(getDbPromise());\n\n        case 3:\n          db = _context4.sent;\n          tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n          _context4.next = 7;\n          return regeneratorRuntime.awrap(tx.objectStore(OBJECT_STORE_NAME).put(tokenDetails, key));\n\n        case 7:\n          _context4.next = 9;\n          return regeneratorRuntime.awrap(tx.complete);\n\n        case 9:\n          return _context4.abrupt(\"return\", tokenDetails);\n\n        case 10:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  });\n}\n/** Removes record(s) from the objectStore that match the given key. */\n\n\nfunction dbRemove(firebaseDependencies) {\n  var key, db, tx;\n  return regeneratorRuntime.async(function dbRemove$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          key = getKey(firebaseDependencies);\n          _context5.next = 3;\n          return regeneratorRuntime.awrap(getDbPromise());\n\n        case 3:\n          db = _context5.sent;\n          tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n          _context5.next = 7;\n          return regeneratorRuntime.awrap(tx.objectStore(OBJECT_STORE_NAME)[\"delete\"](key));\n\n        case 7:\n          _context5.next = 9;\n          return regeneratorRuntime.awrap(tx.complete);\n\n        case 9:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  });\n}\n\nfunction getKey(_ref) {\n  var appConfig = _ref.appConfig;\n  return appConfig.appId;\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar ERROR_MAP = (_ERROR_MAP = {}, _defineProperty(_ERROR_MAP, \"missing-app-config-values\"\n/* MISSING_APP_CONFIG_VALUES */\n, 'Missing App configuration value: \"{$valueName}\"'), _defineProperty(_ERROR_MAP, \"only-available-in-window\"\n/* AVAILABLE_IN_WINDOW */\n, 'This method is available in a Window context.'), _defineProperty(_ERROR_MAP, \"only-available-in-sw\"\n/* AVAILABLE_IN_SW */\n, 'This method is available in a service worker context.'), _defineProperty(_ERROR_MAP, \"permission-default\"\n/* PERMISSION_DEFAULT */\n, 'The notification permission was not granted and dismissed instead.'), _defineProperty(_ERROR_MAP, \"permission-blocked\"\n/* PERMISSION_BLOCKED */\n, 'The notification permission was not granted and blocked instead.'), _defineProperty(_ERROR_MAP, \"unsupported-browser\"\n/* UNSUPPORTED_BROWSER */\n, \"This browser doesn't support the API's required to use the firebase SDK.\"), _defineProperty(_ERROR_MAP, \"indexed-db-unsupported\"\n/* INDEXED_DB_UNSUPPORTED */\n, \"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)\"), _defineProperty(_ERROR_MAP, \"failed-service-worker-registration\"\n/* FAILED_DEFAULT_REGISTRATION */\n, 'We are unable to register the default service worker. {$browserErrorMessage}'), _defineProperty(_ERROR_MAP, \"token-subscribe-failed\"\n/* TOKEN_SUBSCRIBE_FAILED */\n, 'A problem occurred while subscribing the user to FCM: {$errorInfo}'), _defineProperty(_ERROR_MAP, \"token-subscribe-no-token\"\n/* TOKEN_SUBSCRIBE_NO_TOKEN */\n, 'FCM returned no token when subscribing the user to push.'), _defineProperty(_ERROR_MAP, \"token-unsubscribe-failed\"\n/* TOKEN_UNSUBSCRIBE_FAILED */\n, 'A problem occurred while unsubscribing the ' + 'user from FCM: {$errorInfo}'), _defineProperty(_ERROR_MAP, \"token-update-failed\"\n/* TOKEN_UPDATE_FAILED */\n, 'A problem occurred while updating the user from FCM: {$errorInfo}'), _defineProperty(_ERROR_MAP, \"token-update-no-token\"\n/* TOKEN_UPDATE_NO_TOKEN */\n, 'FCM returned no token when updating the user to push.'), _defineProperty(_ERROR_MAP, \"use-sw-after-get-token\"\n/* USE_SW_AFTER_GET_TOKEN */\n, 'The useServiceWorker() method may only be called once and must be ' + 'called before calling getToken() to ensure your service worker is used.'), _defineProperty(_ERROR_MAP, \"invalid-sw-registration\"\n/* INVALID_SW_REGISTRATION */\n, 'The input to useServiceWorker() must be a ServiceWorkerRegistration.'), _defineProperty(_ERROR_MAP, \"invalid-bg-handler\"\n/* INVALID_BG_HANDLER */\n, 'The input to setBackgroundMessageHandler() must be a function.'), _defineProperty(_ERROR_MAP, \"invalid-vapid-key\"\n/* INVALID_VAPID_KEY */\n, 'The public VAPID key must be a string.'), _defineProperty(_ERROR_MAP, \"use-vapid-key-after-get-token\"\n/* USE_VAPID_KEY_AFTER_GET_TOKEN */\n, 'The usePublicVapidKey() method may only be called once and must be ' + 'called before calling getToken() to ensure your VAPID key is used.'), _ERROR_MAP);\nvar ERROR_FACTORY = new _firebase_util__WEBPACK_IMPORTED_MODULE_3__[\"ErrorFactory\"]('messaging', 'Messaging', ERROR_MAP);\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nfunction requestGetToken(firebaseDependencies, subscriptionOptions) {\n  var headers, body, subscribeOptions, responseData, response, message;\n  return regeneratorRuntime.async(function requestGetToken$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return regeneratorRuntime.awrap(getHeaders(firebaseDependencies));\n\n        case 2:\n          headers = _context6.sent;\n          body = getBody(subscriptionOptions);\n          subscribeOptions = {\n            method: 'POST',\n            headers: headers,\n            body: JSON.stringify(body)\n          };\n          _context6.prev = 5;\n          _context6.next = 8;\n          return regeneratorRuntime.awrap(fetch(getEndpoint(firebaseDependencies.appConfig), subscribeOptions));\n\n        case 8:\n          response = _context6.sent;\n          _context6.next = 11;\n          return regeneratorRuntime.awrap(response.json());\n\n        case 11:\n          responseData = _context6.sent;\n          _context6.next = 17;\n          break;\n\n        case 14:\n          _context6.prev = 14;\n          _context6.t0 = _context6[\"catch\"](5);\n          throw ERROR_FACTORY.create(\"token-subscribe-failed\"\n          /* TOKEN_SUBSCRIBE_FAILED */\n          , {\n            errorInfo: _context6.t0\n          });\n\n        case 17:\n          if (!responseData.error) {\n            _context6.next = 20;\n            break;\n          }\n\n          message = responseData.error.message;\n          throw ERROR_FACTORY.create(\"token-subscribe-failed\"\n          /* TOKEN_SUBSCRIBE_FAILED */\n          , {\n            errorInfo: message\n          });\n\n        case 20:\n          if (responseData.token) {\n            _context6.next = 22;\n            break;\n          }\n\n          throw ERROR_FACTORY.create(\"token-subscribe-no-token\"\n          /* TOKEN_SUBSCRIBE_NO_TOKEN */\n          );\n\n        case 22:\n          return _context6.abrupt(\"return\", responseData.token);\n\n        case 23:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, null, null, [[5, 14]]);\n}\n\nfunction requestUpdateToken(firebaseDependencies, tokenDetails) {\n  var headers, body, updateOptions, responseData, response, message;\n  return regeneratorRuntime.async(function requestUpdateToken$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return regeneratorRuntime.awrap(getHeaders(firebaseDependencies));\n\n        case 2:\n          headers = _context7.sent;\n          body = getBody(tokenDetails.subscriptionOptions);\n          updateOptions = {\n            method: 'PATCH',\n            headers: headers,\n            body: JSON.stringify(body)\n          };\n          _context7.prev = 5;\n          _context7.next = 8;\n          return regeneratorRuntime.awrap(fetch(\"\".concat(getEndpoint(firebaseDependencies.appConfig), \"/\").concat(tokenDetails.token), updateOptions));\n\n        case 8:\n          response = _context7.sent;\n          _context7.next = 11;\n          return regeneratorRuntime.awrap(response.json());\n\n        case 11:\n          responseData = _context7.sent;\n          _context7.next = 17;\n          break;\n\n        case 14:\n          _context7.prev = 14;\n          _context7.t0 = _context7[\"catch\"](5);\n          throw ERROR_FACTORY.create(\"token-update-failed\"\n          /* TOKEN_UPDATE_FAILED */\n          , {\n            errorInfo: _context7.t0\n          });\n\n        case 17:\n          if (!responseData.error) {\n            _context7.next = 20;\n            break;\n          }\n\n          message = responseData.error.message;\n          throw ERROR_FACTORY.create(\"token-update-failed\"\n          /* TOKEN_UPDATE_FAILED */\n          , {\n            errorInfo: message\n          });\n\n        case 20:\n          if (responseData.token) {\n            _context7.next = 22;\n            break;\n          }\n\n          throw ERROR_FACTORY.create(\"token-update-no-token\"\n          /* TOKEN_UPDATE_NO_TOKEN */\n          );\n\n        case 22:\n          return _context7.abrupt(\"return\", responseData.token);\n\n        case 23:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, null, null, [[5, 14]]);\n}\n\nfunction requestDeleteToken(firebaseDependencies, token) {\n  var headers, unsubscribeOptions, response, responseData, message;\n  return regeneratorRuntime.async(function requestDeleteToken$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.next = 2;\n          return regeneratorRuntime.awrap(getHeaders(firebaseDependencies));\n\n        case 2:\n          headers = _context8.sent;\n          unsubscribeOptions = {\n            method: 'DELETE',\n            headers: headers\n          };\n          _context8.prev = 4;\n          _context8.next = 7;\n          return regeneratorRuntime.awrap(fetch(\"\".concat(getEndpoint(firebaseDependencies.appConfig), \"/\").concat(token), unsubscribeOptions));\n\n        case 7:\n          response = _context8.sent;\n          _context8.next = 10;\n          return regeneratorRuntime.awrap(response.json());\n\n        case 10:\n          responseData = _context8.sent;\n\n          if (!responseData.error) {\n            _context8.next = 14;\n            break;\n          }\n\n          message = responseData.error.message;\n          throw ERROR_FACTORY.create(\"token-unsubscribe-failed\"\n          /* TOKEN_UNSUBSCRIBE_FAILED */\n          , {\n            errorInfo: message\n          });\n\n        case 14:\n          _context8.next = 19;\n          break;\n\n        case 16:\n          _context8.prev = 16;\n          _context8.t0 = _context8[\"catch\"](4);\n          throw ERROR_FACTORY.create(\"token-unsubscribe-failed\"\n          /* TOKEN_UNSUBSCRIBE_FAILED */\n          , {\n            errorInfo: _context8.t0\n          });\n\n        case 19:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, null, null, [[4, 16]]);\n}\n\nfunction getEndpoint(_ref2) {\n  var projectId = _ref2.projectId;\n  return \"\".concat(ENDPOINT, \"/projects/\").concat(projectId, \"/registrations\");\n}\n\nfunction getHeaders(_ref3) {\n  var appConfig, installations, authToken;\n  return regeneratorRuntime.async(function getHeaders$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          appConfig = _ref3.appConfig, installations = _ref3.installations;\n          _context9.next = 3;\n          return regeneratorRuntime.awrap(installations.getToken());\n\n        case 3:\n          authToken = _context9.sent;\n          return _context9.abrupt(\"return\", new Headers({\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n            'x-goog-api-key': appConfig.apiKey,\n            'x-goog-firebase-installations-auth': \"FIS \".concat(authToken)\n          }));\n\n        case 5:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  });\n}\n\nfunction getBody(_ref4) {\n  var p256dh = _ref4.p256dh,\n      auth = _ref4.auth,\n      endpoint = _ref4.endpoint,\n      vapidKey = _ref4.vapidKey;\n  var body = {\n    web: {\n      endpoint: endpoint,\n      auth: auth,\n      p256dh: p256dh\n    }\n  };\n\n  if (vapidKey !== DEFAULT_VAPID_KEY) {\n    body.web.applicationPubKey = vapidKey;\n  }\n\n  return body;\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n// UpdateRegistration will be called once every week.\n\n\nvar TOKEN_EXPIRATION_MS = 7 * 24 * 60 * 60 * 1000; // 7 days\n\nfunction getTokenInternal(messaging) {\n  var pushSubscription, subscriptionOptions, tokenDetails;\n  return regeneratorRuntime.async(function getTokenInternal$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          _context10.next = 2;\n          return regeneratorRuntime.awrap(getPushSubscription(messaging.swRegistration, messaging.vapidKey));\n\n        case 2:\n          pushSubscription = _context10.sent;\n          subscriptionOptions = {\n            vapidKey: messaging.vapidKey,\n            swScope: messaging.swRegistration.scope,\n            endpoint: pushSubscription.endpoint,\n            auth: arrayToBase64(pushSubscription.getKey('auth')),\n            p256dh: arrayToBase64(pushSubscription.getKey('p256dh'))\n          };\n          _context10.next = 6;\n          return regeneratorRuntime.awrap(dbGet(messaging.firebaseDependencies));\n\n        case 6:\n          tokenDetails = _context10.sent;\n\n          if (tokenDetails) {\n            _context10.next = 11;\n            break;\n          }\n\n          return _context10.abrupt(\"return\", getNewToken(messaging.firebaseDependencies, subscriptionOptions));\n\n        case 11:\n          if (isTokenValid(tokenDetails.subscriptionOptions, subscriptionOptions)) {\n            _context10.next = 23;\n            break;\n          }\n\n          _context10.prev = 12;\n          _context10.next = 15;\n          return regeneratorRuntime.awrap(requestDeleteToken(messaging.firebaseDependencies, tokenDetails.token));\n\n        case 15:\n          _context10.next = 20;\n          break;\n\n        case 17:\n          _context10.prev = 17;\n          _context10.t0 = _context10[\"catch\"](12); // Suppress errors because of #2364\n\n          console.warn(_context10.t0);\n\n        case 20:\n          return _context10.abrupt(\"return\", getNewToken(messaging.firebaseDependencies, subscriptionOptions));\n\n        case 23:\n          if (!(Date.now() >= tokenDetails.createTime + TOKEN_EXPIRATION_MS)) {\n            _context10.next = 27;\n            break;\n          }\n\n          return _context10.abrupt(\"return\", updateToken(messaging, {\n            token: tokenDetails.token,\n            createTime: Date.now(),\n            subscriptionOptions: subscriptionOptions\n          }));\n\n        case 27:\n          return _context10.abrupt(\"return\", tokenDetails.token);\n\n        case 28:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  }, null, null, [[12, 17]]);\n}\n/**\r\n * This method deletes the token from the database, unsubscribes the token from FCM, and unregisters\r\n * the push subscription if it exists.\r\n */\n\n\nfunction deleteTokenInternal(messaging) {\n  var tokenDetails, pushSubscription;\n  return regeneratorRuntime.async(function deleteTokenInternal$(_context11) {\n    while (1) {\n      switch (_context11.prev = _context11.next) {\n        case 0:\n          _context11.next = 2;\n          return regeneratorRuntime.awrap(dbGet(messaging.firebaseDependencies));\n\n        case 2:\n          tokenDetails = _context11.sent;\n\n          if (!tokenDetails) {\n            _context11.next = 8;\n            break;\n          }\n\n          _context11.next = 6;\n          return regeneratorRuntime.awrap(requestDeleteToken(messaging.firebaseDependencies, tokenDetails.token));\n\n        case 6:\n          _context11.next = 8;\n          return regeneratorRuntime.awrap(dbRemove(messaging.firebaseDependencies));\n\n        case 8:\n          _context11.next = 10;\n          return regeneratorRuntime.awrap(messaging.swRegistration.pushManager.getSubscription());\n\n        case 10:\n          pushSubscription = _context11.sent;\n\n          if (!pushSubscription) {\n            _context11.next = 13;\n            break;\n          }\n\n          return _context11.abrupt(\"return\", pushSubscription.unsubscribe());\n\n        case 13:\n          return _context11.abrupt(\"return\", true);\n\n        case 14:\n        case \"end\":\n          return _context11.stop();\n      }\n    }\n  });\n}\n\nfunction updateToken(messaging, tokenDetails) {\n  var updatedToken, updatedTokenDetails;\n  return regeneratorRuntime.async(function updateToken$(_context12) {\n    while (1) {\n      switch (_context12.prev = _context12.next) {\n        case 0:\n          _context12.prev = 0;\n          _context12.next = 3;\n          return regeneratorRuntime.awrap(requestUpdateToken(messaging.firebaseDependencies, tokenDetails));\n\n        case 3:\n          updatedToken = _context12.sent;\n          updatedTokenDetails = Object.assign(Object.assign({}, tokenDetails), {\n            token: updatedToken,\n            createTime: Date.now()\n          });\n          _context12.next = 7;\n          return regeneratorRuntime.awrap(dbSet(messaging.firebaseDependencies, updatedTokenDetails));\n\n        case 7:\n          return _context12.abrupt(\"return\", updatedToken);\n\n        case 10:\n          _context12.prev = 10;\n          _context12.t0 = _context12[\"catch\"](0);\n          _context12.next = 14;\n          return regeneratorRuntime.awrap(deleteTokenInternal(messaging));\n\n        case 14:\n          throw _context12.t0;\n\n        case 15:\n        case \"end\":\n          return _context12.stop();\n      }\n    }\n  }, null, null, [[0, 10]]);\n}\n\nfunction getNewToken(firebaseDependencies, subscriptionOptions) {\n  var token, tokenDetails;\n  return regeneratorRuntime.async(function getNewToken$(_context13) {\n    while (1) {\n      switch (_context13.prev = _context13.next) {\n        case 0:\n          _context13.next = 2;\n          return regeneratorRuntime.awrap(requestGetToken(firebaseDependencies, subscriptionOptions));\n\n        case 2:\n          token = _context13.sent;\n          tokenDetails = {\n            token: token,\n            createTime: Date.now(),\n            subscriptionOptions: subscriptionOptions\n          };\n          _context13.next = 6;\n          return regeneratorRuntime.awrap(dbSet(firebaseDependencies, tokenDetails));\n\n        case 6:\n          return _context13.abrupt(\"return\", tokenDetails.token);\n\n        case 7:\n        case \"end\":\n          return _context13.stop();\n      }\n    }\n  });\n}\n/**\r\n * Gets a PushSubscription for the current user.\r\n */\n\n\nfunction getPushSubscription(swRegistration, vapidKey) {\n  var subscription;\n  return regeneratorRuntime.async(function getPushSubscription$(_context14) {\n    while (1) {\n      switch (_context14.prev = _context14.next) {\n        case 0:\n          _context14.next = 2;\n          return regeneratorRuntime.awrap(swRegistration.pushManager.getSubscription());\n\n        case 2:\n          subscription = _context14.sent;\n\n          if (!subscription) {\n            _context14.next = 5;\n            break;\n          }\n\n          return _context14.abrupt(\"return\", subscription);\n\n        case 5:\n          return _context14.abrupt(\"return\", swRegistration.pushManager.subscribe({\n            userVisibleOnly: true,\n            // Chrome <= 75 doesn't support base64-encoded VAPID key. For backward compatibility, VAPID key\n            // submitted to pushManager#subscribe must be of type Uint8Array.\n            applicationServerKey: base64ToArray(vapidKey)\n          }));\n\n        case 6:\n        case \"end\":\n          return _context14.stop();\n      }\n    }\n  });\n}\n/**\r\n * Checks if the saved tokenDetails object matches the configuration provided.\r\n */\n\n\nfunction isTokenValid(dbOptions, currentOptions) {\n  var isVapidKeyEqual = currentOptions.vapidKey === dbOptions.vapidKey;\n  var isEndpointEqual = currentOptions.endpoint === dbOptions.endpoint;\n  var isAuthEqual = currentOptions.auth === dbOptions.auth;\n  var isP256dhEqual = currentOptions.p256dh === dbOptions.p256dh;\n  return isVapidKeyEqual && isEndpointEqual && isAuthEqual && isP256dhEqual;\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction externalizePayload(internalPayload) {\n  var payload = {\n    from: internalPayload.from,\n    // eslint-disable-next-line camelcase\n    collapseKey: internalPayload.collapse_key,\n    // eslint-disable-next-line camelcase\n    messageId: internalPayload.fcm_message_id\n  };\n  propagateNotificationPayload(payload, internalPayload);\n  propagateDataPayload(payload, internalPayload);\n  propagateFcmOptions(payload, internalPayload);\n  return payload;\n}\n\nfunction propagateNotificationPayload(payload, messagePayloadInternal) {\n  if (!messagePayloadInternal.notification) {\n    return;\n  }\n\n  payload.notification = {};\n  var title = messagePayloadInternal.notification.title;\n\n  if (!!title) {\n    payload.notification.title = title;\n  }\n\n  var body = messagePayloadInternal.notification.body;\n\n  if (!!body) {\n    payload.notification.body = body;\n  }\n\n  var image = messagePayloadInternal.notification.image;\n\n  if (!!image) {\n    payload.notification.image = image;\n  }\n}\n\nfunction propagateDataPayload(payload, messagePayloadInternal) {\n  if (!messagePayloadInternal.data) {\n    return;\n  }\n\n  payload.data = messagePayloadInternal.data;\n}\n\nfunction propagateFcmOptions(payload, messagePayloadInternal) {\n  if (!messagePayloadInternal.fcmOptions) {\n    return;\n  }\n\n  payload.fcmOptions = {};\n  var link = messagePayloadInternal.fcmOptions.link;\n\n  if (!!link) {\n    payload.fcmOptions.link = link;\n  } // eslint-disable-next-line camelcase\n\n\n  var analyticsLabel = messagePayloadInternal.fcmOptions.analytics_label;\n\n  if (!!analyticsLabel) {\n    payload.fcmOptions.analyticsLabel = analyticsLabel;\n  }\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction isConsoleMessage(data) {\n  // This message has a campaign ID, meaning it was sent using the Firebase Console.\n  return _typeof(data) === 'object' && !!data && CONSOLE_CAMPAIGN_ID in data;\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\n_mergeStrings('hts/frbslgigp.ogepscmv/ieo/eaylg', 'tp:/ieaeogn-agolai.o/1frlglgc/o');\n\n_mergeStrings('AzSCbw63g1R0nCw85jG8', 'Iaya3yLKwmgvh7cF0q4');\n\nfunction _mergeStrings(s1, s2) {\n  var resultArray = [];\n\n  for (var i = 0; i < s1.length; i++) {\n    resultArray.push(s1.charAt(i));\n\n    if (i < s2.length) {\n      resultArray.push(s2.charAt(i));\n    }\n  }\n\n  return resultArray.join('');\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction extractAppConfig(app) {\n  if (!app || !app.options) {\n    throw getMissingValueError('App Configuration Object');\n  }\n\n  if (!app.name) {\n    throw getMissingValueError('App Name');\n  } // Required app config keys\n\n\n  var configKeys = ['projectId', 'apiKey', 'appId', 'messagingSenderId'];\n  var options = app.options;\n\n  for (var _i = 0, _configKeys = configKeys; _i < _configKeys.length; _i++) {\n    var keyName = _configKeys[_i];\n\n    if (!options[keyName]) {\n      throw getMissingValueError(keyName);\n    }\n  }\n\n  return {\n    appName: app.name,\n    projectId: options.projectId,\n    apiKey: options.apiKey,\n    appId: options.appId,\n    senderId: options.messagingSenderId\n  };\n}\n\nfunction getMissingValueError(valueName) {\n  return ERROR_FACTORY.create(\"missing-app-config-values\"\n  /* MISSING_APP_CONFIG_VALUES */\n  , {\n    valueName: valueName\n  });\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar MessagingService = /*#__PURE__*/function () {\n  function MessagingService(app, installations, analyticsProvider) {\n    _classCallCheck(this, MessagingService); // logging is only done with end user consent. Default to false.\n\n\n    this.deliveryMetricsExportedToBigQueryEnabled = false;\n    this.onBackgroundMessageHandler = null;\n    this.onMessageHandler = null;\n    this.logEvents = [];\n    this.isLogServiceStarted = false;\n    var appConfig = extractAppConfig(app);\n    this.firebaseDependencies = {\n      app: app,\n      appConfig: appConfig,\n      installations: installations,\n      analyticsProvider: analyticsProvider\n    };\n  }\n\n  _createClass(MessagingService, [{\n    key: \"_delete\",\n    value: function _delete() {\n      return Promise.resolve();\n    }\n  }]);\n\n  return MessagingService;\n}();\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction registerDefaultSw(messaging) {\n  return regeneratorRuntime.async(function registerDefaultSw$(_context15) {\n    while (1) {\n      switch (_context15.prev = _context15.next) {\n        case 0:\n          _context15.prev = 0;\n          _context15.next = 3;\n          return regeneratorRuntime.awrap(navigator.serviceWorker.register(DEFAULT_SW_PATH, {\n            scope: DEFAULT_SW_SCOPE\n          }));\n\n        case 3:\n          messaging.swRegistration = _context15.sent; // The timing when browser updates sw when sw has an update is unreliable from experiment. It\n          // leads to version conflict when the SDK upgrades to a newer version in the main page, but sw\n          // is stuck with the old version. For example,\n          // https://github.com/firebase/firebase-js-sdk/issues/2590 The following line reliably updates\n          // sw if there was an update.\n\n          messaging.swRegistration.update()[\"catch\"](function () {\n            /* it is non blocking and we don't care if it failed */\n          });\n          _context15.next = 10;\n          break;\n\n        case 7:\n          _context15.prev = 7;\n          _context15.t0 = _context15[\"catch\"](0);\n          throw ERROR_FACTORY.create(\"failed-service-worker-registration\"\n          /* FAILED_DEFAULT_REGISTRATION */\n          , {\n            browserErrorMessage: _context15.t0.message\n          });\n\n        case 10:\n        case \"end\":\n          return _context15.stop();\n      }\n    }\n  }, null, null, [[0, 7]]);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction updateSwReg(messaging, swRegistration) {\n  return regeneratorRuntime.async(function updateSwReg$(_context16) {\n    while (1) {\n      switch (_context16.prev = _context16.next) {\n        case 0:\n          if (!(!swRegistration && !messaging.swRegistration)) {\n            _context16.next = 3;\n            break;\n          }\n\n          _context16.next = 3;\n          return regeneratorRuntime.awrap(registerDefaultSw(messaging));\n\n        case 3:\n          if (!(!swRegistration && !!messaging.swRegistration)) {\n            _context16.next = 5;\n            break;\n          }\n\n          return _context16.abrupt(\"return\");\n\n        case 5:\n          if (swRegistration instanceof ServiceWorkerRegistration) {\n            _context16.next = 7;\n            break;\n          }\n\n          throw ERROR_FACTORY.create(\"invalid-sw-registration\"\n          /* INVALID_SW_REGISTRATION */\n          );\n\n        case 7:\n          messaging.swRegistration = swRegistration;\n\n        case 8:\n        case \"end\":\n          return _context16.stop();\n      }\n    }\n  });\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction updateVapidKey(messaging, vapidKey) {\n  return regeneratorRuntime.async(function updateVapidKey$(_context17) {\n    while (1) {\n      switch (_context17.prev = _context17.next) {\n        case 0:\n          if (!!vapidKey) {\n            messaging.vapidKey = vapidKey;\n          } else if (!messaging.vapidKey) {\n            messaging.vapidKey = DEFAULT_VAPID_KEY;\n          }\n\n        case 1:\n        case \"end\":\n          return _context17.stop();\n      }\n    }\n  });\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction getToken$1(messaging, options) {\n  return regeneratorRuntime.async(function getToken$1$(_context18) {\n    while (1) {\n      switch (_context18.prev = _context18.next) {\n        case 0:\n          if (navigator) {\n            _context18.next = 2;\n            break;\n          }\n\n          throw ERROR_FACTORY.create(\"only-available-in-window\"\n          /* AVAILABLE_IN_WINDOW */\n          );\n\n        case 2:\n          if (!(Notification.permission === 'default')) {\n            _context18.next = 5;\n            break;\n          }\n\n          _context18.next = 5;\n          return regeneratorRuntime.awrap(Notification.requestPermission());\n\n        case 5:\n          if (!(Notification.permission !== 'granted')) {\n            _context18.next = 7;\n            break;\n          }\n\n          throw ERROR_FACTORY.create(\"permission-blocked\"\n          /* PERMISSION_BLOCKED */\n          );\n\n        case 7:\n          _context18.next = 9;\n          return regeneratorRuntime.awrap(updateVapidKey(messaging, options === null || options === void 0 ? void 0 : options.vapidKey));\n\n        case 9:\n          _context18.next = 11;\n          return regeneratorRuntime.awrap(updateSwReg(messaging, options === null || options === void 0 ? void 0 : options.serviceWorkerRegistration));\n\n        case 11:\n          return _context18.abrupt(\"return\", getTokenInternal(messaging));\n\n        case 12:\n        case \"end\":\n          return _context18.stop();\n      }\n    }\n  });\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction logToScion(messaging, messageType, data) {\n  var eventType, analytics;\n  return regeneratorRuntime.async(function logToScion$(_context19) {\n    while (1) {\n      switch (_context19.prev = _context19.next) {\n        case 0:\n          eventType = getEventType(messageType);\n          _context19.next = 3;\n          return regeneratorRuntime.awrap(messaging.firebaseDependencies.analyticsProvider.get());\n\n        case 3:\n          analytics = _context19.sent;\n          analytics.logEvent(eventType, {\n            /* eslint-disable camelcase */\n            message_id: data[CONSOLE_CAMPAIGN_ID],\n            message_name: data[CONSOLE_CAMPAIGN_NAME],\n            message_time: data[CONSOLE_CAMPAIGN_TIME],\n            message_device_time: Math.floor(Date.now() / 1000)\n            /* eslint-enable camelcase */\n\n          });\n\n        case 5:\n        case \"end\":\n          return _context19.stop();\n      }\n    }\n  });\n}\n\nfunction getEventType(messageType) {\n  switch (messageType) {\n    case MessageType.NOTIFICATION_CLICKED:\n      return 'notification_open';\n\n    case MessageType.PUSH_RECEIVED:\n      return 'notification_foreground';\n\n    default:\n      throw new Error();\n  }\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction messageEventListener(messaging, event) {\n  var internalPayload, dataPayload;\n  return regeneratorRuntime.async(function messageEventListener$(_context20) {\n    while (1) {\n      switch (_context20.prev = _context20.next) {\n        case 0:\n          internalPayload = event.data;\n\n          if (internalPayload.isFirebaseMessaging) {\n            _context20.next = 3;\n            break;\n          }\n\n          return _context20.abrupt(\"return\");\n\n        case 3:\n          if (messaging.onMessageHandler && internalPayload.messageType === MessageType.PUSH_RECEIVED) {\n            if (typeof messaging.onMessageHandler === 'function') {\n              messaging.onMessageHandler(externalizePayload(internalPayload));\n            } else {\n              messaging.onMessageHandler.next(externalizePayload(internalPayload));\n            }\n          } // Log to Scion if applicable\n\n\n          dataPayload = internalPayload.data;\n\n          if (!(isConsoleMessage(dataPayload) && dataPayload[CONSOLE_CAMPAIGN_ANALYTICS_ENABLED] === '1')) {\n            _context20.next = 8;\n            break;\n          }\n\n          _context20.next = 8;\n          return regeneratorRuntime.awrap(logToScion(messaging, internalPayload.messageType, dataPayload));\n\n        case 8:\n        case \"end\":\n          return _context20.stop();\n      }\n    }\n  });\n}\n\nvar name = \"@firebase/messaging\";\nvar version = \"0.9.2\";\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar WindowMessagingFactory = function WindowMessagingFactory(container) {\n  var messaging = new MessagingService(container.getProvider('app').getImmediate(), container.getProvider('installations-internal').getImmediate(), container.getProvider('analytics-internal'));\n  navigator.serviceWorker.addEventListener('message', function (e) {\n    return messageEventListener(messaging, e);\n  });\n  return messaging;\n};\n\nvar WindowMessagingInternalFactory = function WindowMessagingInternalFactory(container) {\n  var messaging = container.getProvider('messaging').getImmediate();\n  var messagingInternal = {\n    getToken: function getToken(options) {\n      return getToken$1(messaging, options);\n    }\n  };\n  return messagingInternal;\n};\n\nfunction registerMessagingInWindow() {\n  Object(_firebase_app__WEBPACK_IMPORTED_MODULE_4__[\"_registerComponent\"])(new _firebase_component__WEBPACK_IMPORTED_MODULE_1__[\"Component\"]('messaging', WindowMessagingFactory, \"PUBLIC\"\n  /* PUBLIC */\n  ));\n\n  Object(_firebase_app__WEBPACK_IMPORTED_MODULE_4__[\"_registerComponent\"])(new _firebase_component__WEBPACK_IMPORTED_MODULE_1__[\"Component\"]('messaging-internal', WindowMessagingInternalFactory, \"PRIVATE\"\n  /* PRIVATE */\n  ));\n\n  Object(_firebase_app__WEBPACK_IMPORTED_MODULE_4__[\"registerVersion\"])(name, version); // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\n\n  Object(_firebase_app__WEBPACK_IMPORTED_MODULE_4__[\"registerVersion\"])(name, version, 'esm2017');\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Checks if all required APIs exist in the browser.\r\n * @returns a Promise that resolves to a boolean.\r\n *\r\n * @public\r\n */\n\n\nfunction isWindowSupported() {\n  return regeneratorRuntime.async(function isWindowSupported$(_context21) {\n    while (1) {\n      switch (_context21.prev = _context21.next) {\n        case 0:\n          _context21.t7 = typeof window !== 'undefined' && Object(_firebase_util__WEBPACK_IMPORTED_MODULE_3__[\"isIndexedDBAvailable\"])();\n\n          if (!_context21.t7) {\n            _context21.next = 5;\n            break;\n          }\n\n          _context21.next = 4;\n          return regeneratorRuntime.awrap(Object(_firebase_util__WEBPACK_IMPORTED_MODULE_3__[\"validateIndexedDBOpenable\"])());\n\n        case 4:\n          _context21.t7 = _context21.sent;\n\n        case 5:\n          _context21.t6 = _context21.t7;\n\n          if (!_context21.t6) {\n            _context21.next = 8;\n            break;\n          }\n\n          _context21.t6 = Object(_firebase_util__WEBPACK_IMPORTED_MODULE_3__[\"areCookiesEnabled\"])();\n\n        case 8:\n          _context21.t5 = _context21.t6;\n\n          if (!_context21.t5) {\n            _context21.next = 11;\n            break;\n          }\n\n          _context21.t5 = 'serviceWorker' in navigator;\n\n        case 11:\n          _context21.t4 = _context21.t5;\n\n          if (!_context21.t4) {\n            _context21.next = 14;\n            break;\n          }\n\n          _context21.t4 = 'PushManager' in window;\n\n        case 14:\n          _context21.t3 = _context21.t4;\n\n          if (!_context21.t3) {\n            _context21.next = 17;\n            break;\n          }\n\n          _context21.t3 = 'Notification' in window;\n\n        case 17:\n          _context21.t2 = _context21.t3;\n\n          if (!_context21.t2) {\n            _context21.next = 20;\n            break;\n          }\n\n          _context21.t2 = 'fetch' in window;\n\n        case 20:\n          _context21.t1 = _context21.t2;\n\n          if (!_context21.t1) {\n            _context21.next = 23;\n            break;\n          }\n\n          _context21.t1 = ServiceWorkerRegistration.prototype.hasOwnProperty('showNotification');\n\n        case 23:\n          _context21.t0 = _context21.t1;\n\n          if (!_context21.t0) {\n            _context21.next = 26;\n            break;\n          }\n\n          _context21.t0 = PushSubscription.prototype.hasOwnProperty('getKey');\n\n        case 26:\n          return _context21.abrupt(\"return\", _context21.t0);\n\n        case 27:\n        case \"end\":\n          return _context21.stop();\n      }\n    }\n  });\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction deleteToken$1(messaging) {\n  return regeneratorRuntime.async(function deleteToken$1$(_context22) {\n    while (1) {\n      switch (_context22.prev = _context22.next) {\n        case 0:\n          if (navigator) {\n            _context22.next = 2;\n            break;\n          }\n\n          throw ERROR_FACTORY.create(\"only-available-in-window\"\n          /* AVAILABLE_IN_WINDOW */\n          );\n\n        case 2:\n          if (messaging.swRegistration) {\n            _context22.next = 5;\n            break;\n          }\n\n          _context22.next = 5;\n          return regeneratorRuntime.awrap(registerDefaultSw(messaging));\n\n        case 5:\n          return _context22.abrupt(\"return\", deleteTokenInternal(messaging));\n\n        case 6:\n        case \"end\":\n          return _context22.stop();\n      }\n    }\n  });\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction onMessage$1(messaging, nextOrObserver) {\n  if (!navigator) {\n    throw ERROR_FACTORY.create(\"only-available-in-window\"\n    /* AVAILABLE_IN_WINDOW */\n    );\n  }\n\n  messaging.onMessageHandler = nextOrObserver;\n  return function () {\n    messaging.onMessageHandler = null;\n  };\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Retrieves a Firebase Cloud Messaging instance.\r\n *\r\n * @returns The Firebase Cloud Messaging instance associated with the provided firebase app.\r\n *\r\n * @public\r\n */\n\n\nfunction getMessagingInWindow() {\n  var app = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Object(_firebase_app__WEBPACK_IMPORTED_MODULE_4__[\"getApp\"])(); // Conscious decision to make this async check non-blocking during the messaging instance\n  // initialization phase for performance consideration. An error would be thrown latter for\n  // developer's information. Developers can then choose to import and call `isSupported` for\n  // special handling.\n\n  isWindowSupported().then(function (isSupported) {\n    // If `isWindowSupported()` resolved, but returned false.\n    if (!isSupported) {\n      throw ERROR_FACTORY.create(\"unsupported-browser\"\n      /* UNSUPPORTED_BROWSER */\n      );\n    }\n  }, function (_) {\n    // If `isWindowSupported()` rejected.\n    throw ERROR_FACTORY.create(\"indexed-db-unsupported\"\n    /* INDEXED_DB_UNSUPPORTED */\n    );\n  });\n  return Object(_firebase_app__WEBPACK_IMPORTED_MODULE_4__[\"_getProvider\"])(Object(_firebase_util__WEBPACK_IMPORTED_MODULE_3__[\"getModularInstance\"])(app), 'messaging').getImmediate();\n}\n/**\r\n * Subscribes the {@link Messaging} instance to push notifications. Returns an Firebase Cloud\r\n * Messaging registration token that can be used to send push messages to that {@link Messaging}\r\n * instance.\r\n *\r\n * If a notification permission isn't already granted, this method asks the user for permission. The\r\n * returned promise rejects if the user does not allow the app to show notifications.\r\n *\r\n * @param messaging - The {@link Messaging} instance.\r\n * @param options - Provides an optional vapid key and an optinoal service worker registration\r\n *\r\n * @returns The promise resolves with an FCM registration token.\r\n *\r\n * @public\r\n */\n\n\nfunction getToken(messaging, options) {\n  return regeneratorRuntime.async(function getToken$(_context23) {\n    while (1) {\n      switch (_context23.prev = _context23.next) {\n        case 0:\n          messaging = Object(_firebase_util__WEBPACK_IMPORTED_MODULE_3__[\"getModularInstance\"])(messaging);\n          return _context23.abrupt(\"return\", getToken$1(messaging, options));\n\n        case 2:\n        case \"end\":\n          return _context23.stop();\n      }\n    }\n  });\n}\n/**\r\n * Deletes the registration token associated with this {@link Messaging} instance and unsubscribes\r\n * the {@link Messaging} instance from the push subscription.\r\n *\r\n * @param messaging - The {@link Messaging} instance.\r\n *\r\n * @returns The promise resolves when the token has been successfully deleted.\r\n *\r\n * @public\r\n */\n\n\nfunction deleteToken(messaging) {\n  messaging = Object(_firebase_util__WEBPACK_IMPORTED_MODULE_3__[\"getModularInstance\"])(messaging);\n  return deleteToken$1(messaging);\n}\n/**\r\n * When a push message is received and the user is currently on a page for your origin, the\r\n * message is passed to the page and an `onMessage()` event is dispatched with the payload of\r\n * the push message.\r\n *\r\n *\r\n * @param messaging - The {@link Messaging} instance.\r\n * @param nextOrObserver - This function, or observer object with `next` defined,\r\n *     is called when a message is received and the user is currently viewing your page.\r\n * @returns To stop listening for messages execute this returned function.\r\n *\r\n * @public\r\n */\n\n\nfunction onMessage(messaging, nextOrObserver) {\n  messaging = Object(_firebase_util__WEBPACK_IMPORTED_MODULE_3__[\"getModularInstance\"])(messaging);\n  return onMessage$1(messaging, nextOrObserver);\n}\n/**\r\n * Firebase Cloud Messaging\r\n *\r\n * @packageDocumentation\r\n */\n\n\nregisterMessagingInWindow();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL21lc3NhZ2luZy9kaXN0L2luZGV4LmVzbTIwMTcuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vc3JjL3V0aWwvY29uc3RhbnRzLnRzP2VmMjUiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9pbnRlcmZhY2VzL2ludGVybmFsLW1lc3NhZ2UtcGF5bG9hZC50cz9jYTYyIiwid2VicGFjazovLy8uLi9zcmMvaGVscGVycy9hcnJheS1iYXNlNjQtdHJhbnNsYXRvci50cz9iMmFhIiwid2VicGFjazovLy8uLi9zcmMvaGVscGVycy9taWdyYXRlLW9sZC1kYXRhYmFzZS50cz8yNzAwIiwid2VicGFjazovLy8uLi9zcmMvaW50ZXJuYWxzL2lkYi1tYW5hZ2VyLnRzP2E5ODIiLCJ3ZWJwYWNrOi8vLy4uL3NyYy91dGlsL2Vycm9ycy50cz8yNTU5Iiwid2VicGFjazovLy8uLi9zcmMvaW50ZXJuYWxzL3JlcXVlc3RzLnRzP2FiMDYiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9pbnRlcm5hbHMvdG9rZW4tbWFuYWdlci50cz83ZTIyIiwid2VicGFjazovLy8uLi9zcmMvaGVscGVycy9leHRlcm5hbGl6ZVBheWxvYWQudHM/ZGQxNCIsIndlYnBhY2s6Ly8vLi4vc3JjL2hlbHBlcnMvaXMtY29uc29sZS1tZXNzYWdlLnRzPzg1YWQiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9oZWxwZXJzL2xvZ1RvRmlyZWxvZy50cz9jOTYyIiwid2VicGFjazovLy8uLi9zcmMvaGVscGVycy9leHRyYWN0LWFwcC1jb25maWcudHM/OWNjMyIsIndlYnBhY2s6Ly8vLi4vc3JjL21lc3NhZ2luZy1zZXJ2aWNlLnRzPzNlYjAiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9oZWxwZXJzL3JlZ2lzdGVyRGVmYXVsdFN3LnRzP2E0NjQiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9oZWxwZXJzL3VwZGF0ZVN3UmVnLnRzPzQ2N2EiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9oZWxwZXJzL3VwZGF0ZVZhcGlkS2V5LnRzPzUxYmYiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9hcGkvZ2V0VG9rZW4udHM/OTBlOCIsIndlYnBhY2s6Ly8vLi4vc3JjL2hlbHBlcnMvbG9nVG9TY2lvbi50cz8yNzc1Iiwid2VicGFjazovLy8uLi9zcmMvbGlzdGVuZXJzL3dpbmRvdy1saXN0ZW5lci50cz8xNGM1Iiwid2VicGFjazovLy8uLi9zcmMvaGVscGVycy9yZWdpc3Rlci50cz9iOTMzIiwid2VicGFjazovLy8uLi9zcmMvYXBpL2lzU3VwcG9ydGVkLnRzPzNlYjgiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9hcGkvZGVsZXRlVG9rZW4udHM/MGEzNSIsIndlYnBhY2s6Ly8vLi4vc3JjL2FwaS9vbk1lc3NhZ2UudHM/MzZlMiIsIndlYnBhY2s6Ly8vLi4vc3JjL2FwaS50cz9hZDE1Iiwid2VicGFjazovLy8uLi9zcmMvaW5kZXgudHM/NmYzNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TV19QQVRIID0gJy9maXJlYmFzZS1tZXNzYWdpbmctc3cuanMnO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfU1dfU0NPUEUgPSAnL2ZpcmViYXNlLWNsb3VkLW1lc3NhZ2luZy1wdXNoLXNjb3BlJztcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfVkFQSURfS0VZID1cbiAgJ0JET1U5OS1oNjdIY0E2SmVGWEhiU05NdTdlMnlOTnUzUnpvTWo4VE00Vzg4aklUZnE3Wm1QdklNMUl2LTRfbDJMeFFjWXdocWJ5MnhHcFd3empmQW5HNCc7XG5cbmV4cG9ydCBjb25zdCBFTkRQT0lOVCA9ICdodHRwczovL2ZjbXJlZ2lzdHJhdGlvbnMuZ29vZ2xlYXBpcy5jb20vdjEnO1xuXG4vKiogS2V5IG9mIEZDTSBQYXlsb2FkIGluIE5vdGlmaWNhdGlvbidzIGRhdGEgZmllbGQuICovXG5leHBvcnQgY29uc3QgRkNNX01TRyA9ICdGQ01fTVNHJztcblxuZXhwb3J0IGNvbnN0IENPTlNPTEVfQ0FNUEFJR05fSUQgPSAnZ29vZ2xlLmMuYS5jX2lkJztcbmV4cG9ydCBjb25zdCBDT05TT0xFX0NBTVBBSUdOX05BTUUgPSAnZ29vZ2xlLmMuYS5jX2wnO1xuZXhwb3J0IGNvbnN0IENPTlNPTEVfQ0FNUEFJR05fVElNRSA9ICdnb29nbGUuYy5hLnRzJztcbi8qKiBTZXQgdG8gJzEnIGlmIEFuYWx5dGljcyBpcyBlbmFibGVkIGZvciB0aGUgY2FtcGFpZ24gKi9cbmV4cG9ydCBjb25zdCBDT05TT0xFX0NBTVBBSUdOX0FOQUxZVElDU19FTkFCTEVEID0gJ2dvb2dsZS5jLmEuZSc7XG5leHBvcnQgY29uc3QgVEFHID0gJ0ZpcmViYXNlTWVzc2FnaW5nOiAnO1xuZXhwb3J0IGNvbnN0IE1BWF9OVU1CRVJfT0ZfRVZFTlRTX1BFUl9MT0dfUkVRVUVTVCA9IDEwMDA7XG5leHBvcnQgY29uc3QgTUFYX1JFVFJJRVMgPSAzO1xuZXhwb3J0IGNvbnN0IExPR19JTlRFUlZBTF9JTl9NUyA9IDg2NDAwMDAwOyAvLzI0IGhvdXJcbmV4cG9ydCBjb25zdCBERUZBVUxUX0JBQ0tPRkZfVElNRV9NUyA9IDUwMDA7XG5cbi8vIEZDTSBsb2cgc291cmNlIG5hbWUgcmVnaXN0ZXJlZCBhdCBGaXJlbG9nOiAnRkNNX0NMSUVOVF9FVkVOVF9MT0dHSU5HJy4gSXQgdW5pcXVlbHkgaWRlbnRpZmllc1xuLy8gRkNNJ3MgbG9nZ2luZyBjb25maWd1cmF0aW9uLlxuZXhwb3J0IGNvbnN0IEZDTV9MT0dfU09VUkNFID0gMTI0OTtcblxuLy8gRGVmaW5lZCBhcyBpbiBwcm90by9tZXNzYWdpbmdfZXZlbnQucHJvdG8uIE5lZ2xlY3RpbmcgZmllbGRzIHRoYXQgYXJlIHN1cHBvcnRlZC5cbmV4cG9ydCBjb25zdCBTREtfUExBVEZPUk1fV0VCID0gMztcbmV4cG9ydCBjb25zdCBFVkVOVF9NRVNTQUdFX0RFTElWRVJFRCA9IDE7XG5cbmV4cG9ydCBlbnVtIE1lc3NhZ2VUeXBlIHtcbiAgREFUQV9NRVNTQUdFID0gMSxcbiAgRElTUExBWV9OT1RJRklDQVRJT04gPSAzXG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHRcbiAqIGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZVxuICogaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3NcbiAqIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXJcbiAqIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIENPTlNPTEVfQ0FNUEFJR05fQU5BTFlUSUNTX0VOQUJMRUQsXG4gIENPTlNPTEVfQ0FNUEFJR05fSUQsXG4gIENPTlNPTEVfQ0FNUEFJR05fTkFNRSxcbiAgQ09OU09MRV9DQU1QQUlHTl9USU1FXG59IGZyb20gJy4uL3V0aWwvY29uc3RhbnRzJztcblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlUGF5bG9hZEludGVybmFsIHtcbiAgbm90aWZpY2F0aW9uPzogTm90aWZpY2F0aW9uUGF5bG9hZEludGVybmFsO1xuICBkYXRhPzogdW5rbm93bjtcbiAgZmNtT3B0aW9ucz86IEZjbU9wdGlvbnNJbnRlcm5hbDtcbiAgbWVzc2FnZVR5cGU/OiBNZXNzYWdlVHlwZTtcbiAgaXNGaXJlYmFzZU1lc3NhZ2luZz86IGJvb2xlYW47XG4gIGZyb206IHN0cmluZztcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxuICBjb2xsYXBzZV9rZXk6IHN0cmluZztcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxuICBmY21fbWVzc2FnZV9pZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5vdGlmaWNhdGlvblBheWxvYWRJbnRlcm5hbCBleHRlbmRzIE5vdGlmaWNhdGlvbk9wdGlvbnMge1xuICB0aXRsZTogc3RyaW5nO1xuICAvLyBTdXBwb3J0ZWQgaW4gdGhlIExlZ2FjeSBTZW5kIEFQSS5cbiAgLy8gU2VlOmh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2Nsb3VkLW1lc3NhZ2luZy94bXBwLXNlcnZlci1yZWYuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2VcbiAgY2xpY2tfYWN0aW9uPzogc3RyaW5nO1xufVxuXG4vLyBEZWZpbmVkIGluXG4vLyBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9yZWZlcmVuY2UvZmNtL3Jlc3QvdjEvcHJvamVjdHMubWVzc2FnZXMjd2VicHVzaGZjbW9wdGlvbnMuIE5vdGVcbi8vIHRoYXQgdGhlIGtleXMgYXJlIHNlbnQgdG8gdGhlIGNsaWVudHMgaW4gc25ha2UgY2FzZXMgd2hpY2ggd2UgbmVlZCB0byBjb252ZXJ0IHRvIGNhbWVsIHNvIGl0IGNhblxuLy8gYmUgZXhwb3NlZCBhcyBhIHR5cGUgdG8gbWF0Y2ggdGhlIEZpcmViYXNlIEFQSSBjb252ZW50aW9uLlxuZXhwb3J0IGludGVyZmFjZSBGY21PcHRpb25zSW50ZXJuYWwge1xuICBsaW5rPzogc3RyaW5nO1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2VcbiAgYW5hbHl0aWNzX2xhYmVsPzogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBNZXNzYWdlVHlwZSB7XG4gIFBVU0hfUkVDRUlWRUQgPSAncHVzaC1yZWNlaXZlZCcsXG4gIE5PVElGSUNBVElPTl9DTElDS0VEID0gJ25vdGlmaWNhdGlvbi1jbGlja2VkJ1xufVxuXG4vKiogQWRkaXRpb25hbCBkYXRhIG9mIGEgbWVzc2FnZSBzZW50IGZyb20gdGhlIEZOIENvbnNvbGUuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbnNvbGVNZXNzYWdlRGF0YSB7XG4gIFtDT05TT0xFX0NBTVBBSUdOX0lEXTogc3RyaW5nO1xuICBbQ09OU09MRV9DQU1QQUlHTl9USU1FXTogc3RyaW5nO1xuICBbQ09OU09MRV9DQU1QQUlHTl9OQU1FXT86IHN0cmluZztcbiAgW0NPTlNPTEVfQ0FNUEFJR05fQU5BTFlUSUNTX0VOQUJMRURdPzogJzEnO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFycmF5VG9CYXNlNjQoYXJyYXk6IFVpbnQ4QXJyYXkgfCBBcnJheUJ1ZmZlcik6IHN0cmluZyB7XG4gIGNvbnN0IHVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSk7XG4gIGNvbnN0IGJhc2U2NFN0cmluZyA9IGJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZSguLi51aW50OEFycmF5KSk7XG4gIHJldHVybiBiYXNlNjRTdHJpbmcucmVwbGFjZSgvPS9nLCAnJykucmVwbGFjZSgvXFwrL2csICctJykucmVwbGFjZSgvXFwvL2csICdfJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjRUb0FycmF5KGJhc2U2NFN0cmluZzogc3RyaW5nKTogVWludDhBcnJheSB7XG4gIGNvbnN0IHBhZGRpbmcgPSAnPScucmVwZWF0KCg0IC0gKGJhc2U2NFN0cmluZy5sZW5ndGggJSA0KSkgJSA0KTtcbiAgY29uc3QgYmFzZTY0ID0gKGJhc2U2NFN0cmluZyArIHBhZGRpbmcpXG4gICAgLnJlcGxhY2UoL1xcLS9nLCAnKycpXG4gICAgLnJlcGxhY2UoL18vZywgJy8nKTtcblxuICBjb25zdCByYXdEYXRhID0gYXRvYihiYXNlNjQpO1xuICBjb25zdCBvdXRwdXRBcnJheSA9IG5ldyBVaW50OEFycmF5KHJhd0RhdGEubGVuZ3RoKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHJhd0RhdGEubGVuZ3RoOyArK2kpIHtcbiAgICBvdXRwdXRBcnJheVtpXSA9IHJhd0RhdGEuY2hhckNvZGVBdChpKTtcbiAgfVxuICByZXR1cm4gb3V0cHV0QXJyYXk7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBkZWxldGVEYiwgb3BlbkRiIH0gZnJvbSAnaWRiJztcblxuaW1wb3J0IHsgVG9rZW5EZXRhaWxzIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90b2tlbi1kZXRhaWxzJztcbmltcG9ydCB7IGFycmF5VG9CYXNlNjQgfSBmcm9tICcuL2FycmF5LWJhc2U2NC10cmFuc2xhdG9yJztcblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9ibG9iLzc4NTdjMjEyZjk0NGEyYTllYjQyMWZkNGNiNzM3MDE4MWJjMDM0YjUvcGFja2FnZXMvbWVzc2FnaW5nL3NyYy9pbnRlcmZhY2VzL3Rva2VuLWRldGFpbHMudHNcbmV4cG9ydCBpbnRlcmZhY2UgVjJUb2tlbkRldGFpbHMge1xuICBmY21Ub2tlbjogc3RyaW5nO1xuICBzd1Njb3BlOiBzdHJpbmc7XG4gIHZhcGlkS2V5OiBzdHJpbmcgfCBVaW50OEFycmF5O1xuICBzdWJzY3JpcHRpb246IFB1c2hTdWJzY3JpcHRpb247XG4gIGZjbVNlbmRlcklkOiBzdHJpbmc7XG4gIGZjbVB1c2hTZXQ6IHN0cmluZztcbiAgY3JlYXRlVGltZT86IG51bWJlcjtcbiAgZW5kcG9pbnQ/OiBzdHJpbmc7XG4gIGF1dGg/OiBzdHJpbmc7XG4gIHAyNTZkaD86IHN0cmluZztcbn1cblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9ibG9iLzZiNWIxNWNlNGVhM2RmNWRmNWRmOGE4YjMzYTRlNDFlMjQ5Yzc3MTUvcGFja2FnZXMvbWVzc2FnaW5nL3NyYy9pbnRlcmZhY2VzL3Rva2VuLWRldGFpbHMudHNcbmV4cG9ydCBpbnRlcmZhY2UgVjNUb2tlbkRldGFpbHMge1xuICBmY21Ub2tlbjogc3RyaW5nO1xuICBzd1Njb3BlOiBzdHJpbmc7XG4gIHZhcGlkS2V5OiBVaW50OEFycmF5O1xuICBmY21TZW5kZXJJZDogc3RyaW5nO1xuICBmY21QdXNoU2V0OiBzdHJpbmc7XG4gIGVuZHBvaW50OiBzdHJpbmc7XG4gIGF1dGg6IEFycmF5QnVmZmVyO1xuICBwMjU2ZGg6IEFycmF5QnVmZmVyO1xuICBjcmVhdGVUaW1lOiBudW1iZXI7XG59XG5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvYmxvYi85NTY3ZGJhNjY0NzMyZjY4MWZhN2ZlNjBmNWI3MDMyYmIxZGFmNGM5L3BhY2thZ2VzL21lc3NhZ2luZy9zcmMvaW50ZXJmYWNlcy90b2tlbi1kZXRhaWxzLnRzXG5leHBvcnQgaW50ZXJmYWNlIFY0VG9rZW5EZXRhaWxzIHtcbiAgZmNtVG9rZW46IHN0cmluZztcbiAgc3dTY29wZTogc3RyaW5nO1xuICB2YXBpZEtleTogVWludDhBcnJheTtcbiAgZmNtU2VuZGVySWQ6IHN0cmluZztcbiAgZW5kcG9pbnQ6IHN0cmluZztcbiAgYXV0aDogQXJyYXlCdWZmZXJMaWtlO1xuICBwMjU2ZGg6IEFycmF5QnVmZmVyTGlrZTtcbiAgY3JlYXRlVGltZTogbnVtYmVyO1xufVxuXG5jb25zdCBPTERfREJfTkFNRSA9ICdmY21fdG9rZW5fZGV0YWlsc19kYic7XG4vKipcbiAqIFRoZSBsYXN0IERCIHZlcnNpb24gb2YgJ2ZjbV90b2tlbl9kZXRhaWxzX2RiJyB3YXMgNC4gVGhpcyBpcyBvbmUgaGlnaGVyLCBzbyB0aGF0IHRoZSB1cGdyYWRlXG4gKiBjYWxsYmFjayBpcyBjYWxsZWQgZm9yIGFsbCB2ZXJzaW9ucyBvZiB0aGUgb2xkIERCLlxuICovXG5jb25zdCBPTERfREJfVkVSU0lPTiA9IDU7XG5jb25zdCBPTERfT0JKRUNUX1NUT1JFX05BTUUgPSAnZmNtX3Rva2VuX29iamVjdF9TdG9yZSc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtaWdyYXRlT2xkRGF0YWJhc2UoXG4gIHNlbmRlcklkOiBzdHJpbmdcbik6IFByb21pc2U8VG9rZW5EZXRhaWxzIHwgbnVsbD4ge1xuICBpZiAoJ2RhdGFiYXNlcycgaW4gaW5kZXhlZERCKSB7XG4gICAgLy8gaW5kZXhlZERiLmRhdGFiYXNlcygpIGlzIGFuIEluZGV4ZWREQiB2MyBBUEkgYW5kIGRvZXMgbm90IGV4aXN0IGluIGFsbCBicm93c2Vycy4gVE9ETzogUmVtb3ZlXG4gICAgLy8gdHlwZWNhc3Qgd2hlbiBpdCBsYW5kcyBpbiBUUyB0eXBlcy5cbiAgICBjb25zdCBkYXRhYmFzZXMgPSBhd2FpdCAoXG4gICAgICBpbmRleGVkREIgYXMge1xuICAgICAgICBkYXRhYmFzZXMoKTogUHJvbWlzZTxBcnJheTx7IG5hbWU6IHN0cmluZzsgdmVyc2lvbjogbnVtYmVyIH0+PjtcbiAgICAgIH1cbiAgICApLmRhdGFiYXNlcygpO1xuICAgIGNvbnN0IGRiTmFtZXMgPSBkYXRhYmFzZXMubWFwKGRiID0+IGRiLm5hbWUpO1xuXG4gICAgaWYgKCFkYk5hbWVzLmluY2x1ZGVzKE9MRF9EQl9OQU1FKSkge1xuICAgICAgLy8gb2xkIERCIGRpZG4ndCBleGlzdCwgbm8gbmVlZCB0byBvcGVuLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgbGV0IHRva2VuRGV0YWlsczogVG9rZW5EZXRhaWxzIHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3QgZGIgPSBhd2FpdCBvcGVuRGIoT0xEX0RCX05BTUUsIE9MRF9EQl9WRVJTSU9OLCBhc3luYyBkYiA9PiB7XG4gICAgaWYgKGRiLm9sZFZlcnNpb24gPCAyKSB7XG4gICAgICAvLyBEYXRhYmFzZSB0b28gb2xkLCBza2lwIG1pZ3JhdGlvbi5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoT0xEX09CSkVDVF9TVE9SRV9OQU1FKSkge1xuICAgICAgLy8gRGF0YWJhc2UgZGlkIG5vdCBleGlzdC4gTm90aGluZyB0byBkby5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBvYmplY3RTdG9yZSA9IGRiLnRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKE9MRF9PQkpFQ1RfU1RPUkVfTkFNRSk7XG4gICAgY29uc3QgdmFsdWUgPSBhd2FpdCBvYmplY3RTdG9yZS5pbmRleCgnZmNtU2VuZGVySWQnKS5nZXQoc2VuZGVySWQpO1xuICAgIGF3YWl0IG9iamVjdFN0b3JlLmNsZWFyKCk7XG5cbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAvLyBObyBlbnRyeSBpbiB0aGUgZGF0YWJhc2UsIG5vdGhpbmcgdG8gbWlncmF0ZS5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZGIub2xkVmVyc2lvbiA9PT0gMikge1xuICAgICAgY29uc3Qgb2xkRGV0YWlscyA9IHZhbHVlIGFzIFYyVG9rZW5EZXRhaWxzO1xuXG4gICAgICBpZiAoIW9sZERldGFpbHMuYXV0aCB8fCAhb2xkRGV0YWlscy5wMjU2ZGggfHwgIW9sZERldGFpbHMuZW5kcG9pbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0b2tlbkRldGFpbHMgPSB7XG4gICAgICAgIHRva2VuOiBvbGREZXRhaWxzLmZjbVRva2VuLFxuICAgICAgICBjcmVhdGVUaW1lOiBvbGREZXRhaWxzLmNyZWF0ZVRpbWUgPz8gRGF0ZS5ub3coKSxcbiAgICAgICAgc3Vic2NyaXB0aW9uT3B0aW9uczoge1xuICAgICAgICAgIGF1dGg6IG9sZERldGFpbHMuYXV0aCxcbiAgICAgICAgICBwMjU2ZGg6IG9sZERldGFpbHMucDI1NmRoLFxuICAgICAgICAgIGVuZHBvaW50OiBvbGREZXRhaWxzLmVuZHBvaW50LFxuICAgICAgICAgIHN3U2NvcGU6IG9sZERldGFpbHMuc3dTY29wZSxcbiAgICAgICAgICB2YXBpZEtleTpcbiAgICAgICAgICAgIHR5cGVvZiBvbGREZXRhaWxzLnZhcGlkS2V5ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICA/IG9sZERldGFpbHMudmFwaWRLZXlcbiAgICAgICAgICAgICAgOiBhcnJheVRvQmFzZTY0KG9sZERldGFpbHMudmFwaWRLZXkpXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChkYi5vbGRWZXJzaW9uID09PSAzKSB7XG4gICAgICBjb25zdCBvbGREZXRhaWxzID0gdmFsdWUgYXMgVjNUb2tlbkRldGFpbHM7XG5cbiAgICAgIHRva2VuRGV0YWlscyA9IHtcbiAgICAgICAgdG9rZW46IG9sZERldGFpbHMuZmNtVG9rZW4sXG4gICAgICAgIGNyZWF0ZVRpbWU6IG9sZERldGFpbHMuY3JlYXRlVGltZSxcbiAgICAgICAgc3Vic2NyaXB0aW9uT3B0aW9uczoge1xuICAgICAgICAgIGF1dGg6IGFycmF5VG9CYXNlNjQob2xkRGV0YWlscy5hdXRoKSxcbiAgICAgICAgICBwMjU2ZGg6IGFycmF5VG9CYXNlNjQob2xkRGV0YWlscy5wMjU2ZGgpLFxuICAgICAgICAgIGVuZHBvaW50OiBvbGREZXRhaWxzLmVuZHBvaW50LFxuICAgICAgICAgIHN3U2NvcGU6IG9sZERldGFpbHMuc3dTY29wZSxcbiAgICAgICAgICB2YXBpZEtleTogYXJyYXlUb0Jhc2U2NChvbGREZXRhaWxzLnZhcGlkS2V5KVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoZGIub2xkVmVyc2lvbiA9PT0gNCkge1xuICAgICAgY29uc3Qgb2xkRGV0YWlscyA9IHZhbHVlIGFzIFY0VG9rZW5EZXRhaWxzO1xuXG4gICAgICB0b2tlbkRldGFpbHMgPSB7XG4gICAgICAgIHRva2VuOiBvbGREZXRhaWxzLmZjbVRva2VuLFxuICAgICAgICBjcmVhdGVUaW1lOiBvbGREZXRhaWxzLmNyZWF0ZVRpbWUsXG4gICAgICAgIHN1YnNjcmlwdGlvbk9wdGlvbnM6IHtcbiAgICAgICAgICBhdXRoOiBhcnJheVRvQmFzZTY0KG9sZERldGFpbHMuYXV0aCksXG4gICAgICAgICAgcDI1NmRoOiBhcnJheVRvQmFzZTY0KG9sZERldGFpbHMucDI1NmRoKSxcbiAgICAgICAgICBlbmRwb2ludDogb2xkRGV0YWlscy5lbmRwb2ludCxcbiAgICAgICAgICBzd1Njb3BlOiBvbGREZXRhaWxzLnN3U2NvcGUsXG4gICAgICAgICAgdmFwaWRLZXk6IGFycmF5VG9CYXNlNjQob2xkRGV0YWlscy52YXBpZEtleSlcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xuICBkYi5jbG9zZSgpO1xuXG4gIC8vIERlbGV0ZSBhbGwgb2xkIGRhdGFiYXNlcy5cbiAgYXdhaXQgZGVsZXRlRGIoT0xEX0RCX05BTUUpO1xuICBhd2FpdCBkZWxldGVEYignZmNtX3ZhcGlkX2RldGFpbHNfZGInKTtcbiAgYXdhaXQgZGVsZXRlRGIoJ3VuZGVmaW5lZCcpO1xuXG4gIHJldHVybiBjaGVja1Rva2VuRGV0YWlscyh0b2tlbkRldGFpbHMpID8gdG9rZW5EZXRhaWxzIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gY2hlY2tUb2tlbkRldGFpbHMoXG4gIHRva2VuRGV0YWlsczogVG9rZW5EZXRhaWxzIHwgbnVsbFxuKTogdG9rZW5EZXRhaWxzIGlzIFRva2VuRGV0YWlscyB7XG4gIGlmICghdG9rZW5EZXRhaWxzIHx8ICF0b2tlbkRldGFpbHMuc3Vic2NyaXB0aW9uT3B0aW9ucykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCB7IHN1YnNjcmlwdGlvbk9wdGlvbnMgfSA9IHRva2VuRGV0YWlscztcbiAgcmV0dXJuIChcbiAgICB0eXBlb2YgdG9rZW5EZXRhaWxzLmNyZWF0ZVRpbWUgPT09ICdudW1iZXInICYmXG4gICAgdG9rZW5EZXRhaWxzLmNyZWF0ZVRpbWUgPiAwICYmXG4gICAgdHlwZW9mIHRva2VuRGV0YWlscy50b2tlbiA9PT0gJ3N0cmluZycgJiZcbiAgICB0b2tlbkRldGFpbHMudG9rZW4ubGVuZ3RoID4gMCAmJlxuICAgIHR5cGVvZiBzdWJzY3JpcHRpb25PcHRpb25zLmF1dGggPT09ICdzdHJpbmcnICYmXG4gICAgc3Vic2NyaXB0aW9uT3B0aW9ucy5hdXRoLmxlbmd0aCA+IDAgJiZcbiAgICB0eXBlb2Ygc3Vic2NyaXB0aW9uT3B0aW9ucy5wMjU2ZGggPT09ICdzdHJpbmcnICYmXG4gICAgc3Vic2NyaXB0aW9uT3B0aW9ucy5wMjU2ZGgubGVuZ3RoID4gMCAmJlxuICAgIHR5cGVvZiBzdWJzY3JpcHRpb25PcHRpb25zLmVuZHBvaW50ID09PSAnc3RyaW5nJyAmJlxuICAgIHN1YnNjcmlwdGlvbk9wdGlvbnMuZW5kcG9pbnQubGVuZ3RoID4gMCAmJlxuICAgIHR5cGVvZiBzdWJzY3JpcHRpb25PcHRpb25zLnN3U2NvcGUgPT09ICdzdHJpbmcnICYmXG4gICAgc3Vic2NyaXB0aW9uT3B0aW9ucy5zd1Njb3BlLmxlbmd0aCA+IDAgJiZcbiAgICB0eXBlb2Ygc3Vic2NyaXB0aW9uT3B0aW9ucy52YXBpZEtleSA9PT0gJ3N0cmluZycgJiZcbiAgICBzdWJzY3JpcHRpb25PcHRpb25zLnZhcGlkS2V5Lmxlbmd0aCA+IDBcbiAgKTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IERCLCBkZWxldGVEYiwgb3BlbkRiIH0gZnJvbSAnaWRiJztcblxuaW1wb3J0IHsgRmlyZWJhc2VJbnRlcm5hbERlcGVuZGVuY2llcyB9IGZyb20gJy4uL2ludGVyZmFjZXMvaW50ZXJuYWwtZGVwZW5kZW5jaWVzJztcbmltcG9ydCB7IFRva2VuRGV0YWlscyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdG9rZW4tZGV0YWlscyc7XG5pbXBvcnQgeyBtaWdyYXRlT2xkRGF0YWJhc2UgfSBmcm9tICcuLi9oZWxwZXJzL21pZ3JhdGUtb2xkLWRhdGFiYXNlJztcblxuLy8gRXhwb3J0ZWQgZm9yIHRlc3RzLlxuZXhwb3J0IGNvbnN0IERBVEFCQVNFX05BTUUgPSAnZmlyZWJhc2UtbWVzc2FnaW5nLWRhdGFiYXNlJztcbmNvbnN0IERBVEFCQVNFX1ZFUlNJT04gPSAxO1xuY29uc3QgT0JKRUNUX1NUT1JFX05BTUUgPSAnZmlyZWJhc2UtbWVzc2FnaW5nLXN0b3JlJztcblxubGV0IGRiUHJvbWlzZTogUHJvbWlzZTxEQj4gfCBudWxsID0gbnVsbDtcbmZ1bmN0aW9uIGdldERiUHJvbWlzZSgpOiBQcm9taXNlPERCPiB7XG4gIGlmICghZGJQcm9taXNlKSB7XG4gICAgZGJQcm9taXNlID0gb3BlbkRiKERBVEFCQVNFX05BTUUsIERBVEFCQVNFX1ZFUlNJT04sIHVwZ3JhZGVEYiA9PiB7XG4gICAgICAvLyBXZSBkb24ndCB1c2UgJ2JyZWFrJyBpbiB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQsIHRoZSBmYWxsLXRocm91Z2ggYmVoYXZpb3IgaXMgd2hhdCB3ZSB3YW50LFxuICAgICAgLy8gYmVjYXVzZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgdmVyc2lvbnMgYmV0d2VlbiB0aGUgb2xkIHZlcnNpb24gYW5kIHRoZSBjdXJyZW50IHZlcnNpb24sIHdlXG4gICAgICAvLyB3YW50IEFMTCB0aGUgbWlncmF0aW9ucyB0aGF0IGNvcnJlc3BvbmQgdG8gdGhvc2UgdmVyc2lvbnMgdG8gcnVuLCBub3Qgb25seSB0aGUgbGFzdCBvbmUuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVmYXVsdC1jYXNlXG4gICAgICBzd2l0Y2ggKHVwZ3JhZGVEYi5vbGRWZXJzaW9uKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICB1cGdyYWRlRGIuY3JlYXRlT2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBkYlByb21pc2U7XG59XG5cbi8qKiBHZXRzIHJlY29yZChzKSBmcm9tIHRoZSBvYmplY3RTdG9yZSB0aGF0IG1hdGNoIHRoZSBnaXZlbiBrZXkuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGJHZXQoXG4gIGZpcmViYXNlRGVwZW5kZW5jaWVzOiBGaXJlYmFzZUludGVybmFsRGVwZW5kZW5jaWVzXG4pOiBQcm9taXNlPFRva2VuRGV0YWlscyB8IHVuZGVmaW5lZD4ge1xuICBjb25zdCBrZXkgPSBnZXRLZXkoZmlyZWJhc2VEZXBlbmRlbmNpZXMpO1xuICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xuICBjb25zdCB0b2tlbkRldGFpbHMgPSBhd2FpdCBkYlxuICAgIC50cmFuc2FjdGlvbihPQkpFQ1RfU1RPUkVfTkFNRSlcbiAgICAub2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpXG4gICAgLmdldChrZXkpO1xuXG4gIGlmICh0b2tlbkRldGFpbHMpIHtcbiAgICByZXR1cm4gdG9rZW5EZXRhaWxzO1xuICB9IGVsc2Uge1xuICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgdG9rZW5EZXRhaWxzIG9iamVjdCBpbiB0aGUgb2xkIERCLlxuICAgIGNvbnN0IG9sZFRva2VuRGV0YWlscyA9IGF3YWl0IG1pZ3JhdGVPbGREYXRhYmFzZShcbiAgICAgIGZpcmViYXNlRGVwZW5kZW5jaWVzLmFwcENvbmZpZy5zZW5kZXJJZFxuICAgICk7XG4gICAgaWYgKG9sZFRva2VuRGV0YWlscykge1xuICAgICAgYXdhaXQgZGJTZXQoZmlyZWJhc2VEZXBlbmRlbmNpZXMsIG9sZFRva2VuRGV0YWlscyk7XG4gICAgICByZXR1cm4gb2xkVG9rZW5EZXRhaWxzO1xuICAgIH1cbiAgfVxufVxuXG4vKiogQXNzaWducyBvciBvdmVyd3JpdGVzIHRoZSByZWNvcmQgZm9yIHRoZSBnaXZlbiBrZXkgd2l0aCB0aGUgZ2l2ZW4gdmFsdWUuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGJTZXQoXG4gIGZpcmViYXNlRGVwZW5kZW5jaWVzOiBGaXJlYmFzZUludGVybmFsRGVwZW5kZW5jaWVzLFxuICB0b2tlbkRldGFpbHM6IFRva2VuRGV0YWlsc1xuKTogUHJvbWlzZTxUb2tlbkRldGFpbHM+IHtcbiAgY29uc3Qga2V5ID0gZ2V0S2V5KGZpcmViYXNlRGVwZW5kZW5jaWVzKTtcbiAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcbiAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihPQkpFQ1RfU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xuICBhd2FpdCB0eC5vYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSkucHV0KHRva2VuRGV0YWlscywga2V5KTtcbiAgYXdhaXQgdHguY29tcGxldGU7XG4gIHJldHVybiB0b2tlbkRldGFpbHM7XG59XG5cbi8qKiBSZW1vdmVzIHJlY29yZChzKSBmcm9tIHRoZSBvYmplY3RTdG9yZSB0aGF0IG1hdGNoIHRoZSBnaXZlbiBrZXkuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGJSZW1vdmUoXG4gIGZpcmViYXNlRGVwZW5kZW5jaWVzOiBGaXJlYmFzZUludGVybmFsRGVwZW5kZW5jaWVzXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3Qga2V5ID0gZ2V0S2V5KGZpcmViYXNlRGVwZW5kZW5jaWVzKTtcbiAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcbiAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihPQkpFQ1RfU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xuICBhd2FpdCB0eC5vYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSkuZGVsZXRlKGtleSk7XG4gIGF3YWl0IHR4LmNvbXBsZXRlO1xufVxuXG4vKiogRGVsZXRlcyB0aGUgREIuIFVzZWZ1bCBmb3IgdGVzdHMuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGJEZWxldGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmIChkYlByb21pc2UpIHtcbiAgICAoYXdhaXQgZGJQcm9taXNlKS5jbG9zZSgpO1xuICAgIGF3YWl0IGRlbGV0ZURiKERBVEFCQVNFX05BTUUpO1xuICAgIGRiUHJvbWlzZSA9IG51bGw7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0S2V5KHsgYXBwQ29uZmlnIH06IEZpcmViYXNlSW50ZXJuYWxEZXBlbmRlbmNpZXMpOiBzdHJpbmcge1xuICByZXR1cm4gYXBwQ29uZmlnLmFwcElkO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBFcnJvck1hcCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuZXhwb3J0IGNvbnN0IGVudW0gRXJyb3JDb2RlIHtcbiAgTUlTU0lOR19BUFBfQ09ORklHX1ZBTFVFUyA9ICdtaXNzaW5nLWFwcC1jb25maWctdmFsdWVzJyxcbiAgQVZBSUxBQkxFX0lOX1dJTkRPVyA9ICdvbmx5LWF2YWlsYWJsZS1pbi13aW5kb3cnLFxuICBBVkFJTEFCTEVfSU5fU1cgPSAnb25seS1hdmFpbGFibGUtaW4tc3cnLFxuICBQRVJNSVNTSU9OX0RFRkFVTFQgPSAncGVybWlzc2lvbi1kZWZhdWx0JyxcbiAgUEVSTUlTU0lPTl9CTE9DS0VEID0gJ3Blcm1pc3Npb24tYmxvY2tlZCcsXG4gIFVOU1VQUE9SVEVEX0JST1dTRVIgPSAndW5zdXBwb3J0ZWQtYnJvd3NlcicsXG4gIElOREVYRURfREJfVU5TVVBQT1JURUQgPSAnaW5kZXhlZC1kYi11bnN1cHBvcnRlZCcsXG4gIEZBSUxFRF9ERUZBVUxUX1JFR0lTVFJBVElPTiA9ICdmYWlsZWQtc2VydmljZS13b3JrZXItcmVnaXN0cmF0aW9uJyxcbiAgVE9LRU5fU1VCU0NSSUJFX0ZBSUxFRCA9ICd0b2tlbi1zdWJzY3JpYmUtZmFpbGVkJyxcbiAgVE9LRU5fU1VCU0NSSUJFX05PX1RPS0VOID0gJ3Rva2VuLXN1YnNjcmliZS1uby10b2tlbicsXG4gIFRPS0VOX1VOU1VCU0NSSUJFX0ZBSUxFRCA9ICd0b2tlbi11bnN1YnNjcmliZS1mYWlsZWQnLFxuICBUT0tFTl9VUERBVEVfRkFJTEVEID0gJ3Rva2VuLXVwZGF0ZS1mYWlsZWQnLFxuICBUT0tFTl9VUERBVEVfTk9fVE9LRU4gPSAndG9rZW4tdXBkYXRlLW5vLXRva2VuJyxcbiAgSU5WQUxJRF9CR19IQU5ETEVSID0gJ2ludmFsaWQtYmctaGFuZGxlcicsXG4gIFVTRV9TV19BRlRFUl9HRVRfVE9LRU4gPSAndXNlLXN3LWFmdGVyLWdldC10b2tlbicsXG4gIElOVkFMSURfU1dfUkVHSVNUUkFUSU9OID0gJ2ludmFsaWQtc3ctcmVnaXN0cmF0aW9uJyxcbiAgVVNFX1ZBUElEX0tFWV9BRlRFUl9HRVRfVE9LRU4gPSAndXNlLXZhcGlkLWtleS1hZnRlci1nZXQtdG9rZW4nLFxuICBJTlZBTElEX1ZBUElEX0tFWSA9ICdpbnZhbGlkLXZhcGlkLWtleSdcbn1cblxuZXhwb3J0IGNvbnN0IEVSUk9SX01BUDogRXJyb3JNYXA8RXJyb3JDb2RlPiA9IHtcbiAgW0Vycm9yQ29kZS5NSVNTSU5HX0FQUF9DT05GSUdfVkFMVUVTXTpcbiAgICAnTWlzc2luZyBBcHAgY29uZmlndXJhdGlvbiB2YWx1ZTogXCJ7JHZhbHVlTmFtZX1cIicsXG4gIFtFcnJvckNvZGUuQVZBSUxBQkxFX0lOX1dJTkRPV106XG4gICAgJ1RoaXMgbWV0aG9kIGlzIGF2YWlsYWJsZSBpbiBhIFdpbmRvdyBjb250ZXh0LicsXG4gIFtFcnJvckNvZGUuQVZBSUxBQkxFX0lOX1NXXTpcbiAgICAnVGhpcyBtZXRob2QgaXMgYXZhaWxhYmxlIGluIGEgc2VydmljZSB3b3JrZXIgY29udGV4dC4nLFxuICBbRXJyb3JDb2RlLlBFUk1JU1NJT05fREVGQVVMVF06XG4gICAgJ1RoZSBub3RpZmljYXRpb24gcGVybWlzc2lvbiB3YXMgbm90IGdyYW50ZWQgYW5kIGRpc21pc3NlZCBpbnN0ZWFkLicsXG4gIFtFcnJvckNvZGUuUEVSTUlTU0lPTl9CTE9DS0VEXTpcbiAgICAnVGhlIG5vdGlmaWNhdGlvbiBwZXJtaXNzaW9uIHdhcyBub3QgZ3JhbnRlZCBhbmQgYmxvY2tlZCBpbnN0ZWFkLicsXG4gIFtFcnJvckNvZGUuVU5TVVBQT1JURURfQlJPV1NFUl06XG4gICAgXCJUaGlzIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoZSBBUEkncyByZXF1aXJlZCB0byB1c2UgdGhlIGZpcmViYXNlIFNESy5cIixcbiAgW0Vycm9yQ29kZS5JTkRFWEVEX0RCX1VOU1VQUE9SVEVEXTpcbiAgICBcIlRoaXMgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgaW5kZXhlZERiLm9wZW4oKSAoZXguIFNhZmFyaSBpRnJhbWUsIEZpcmVmb3ggUHJpdmF0ZSBCcm93c2luZywgZXRjKVwiLFxuICBbRXJyb3JDb2RlLkZBSUxFRF9ERUZBVUxUX1JFR0lTVFJBVElPTl06XG4gICAgJ1dlIGFyZSB1bmFibGUgdG8gcmVnaXN0ZXIgdGhlIGRlZmF1bHQgc2VydmljZSB3b3JrZXIuIHskYnJvd3NlckVycm9yTWVzc2FnZX0nLFxuICBbRXJyb3JDb2RlLlRPS0VOX1NVQlNDUklCRV9GQUlMRURdOlxuICAgICdBIHByb2JsZW0gb2NjdXJyZWQgd2hpbGUgc3Vic2NyaWJpbmcgdGhlIHVzZXIgdG8gRkNNOiB7JGVycm9ySW5mb30nLFxuICBbRXJyb3JDb2RlLlRPS0VOX1NVQlNDUklCRV9OT19UT0tFTl06XG4gICAgJ0ZDTSByZXR1cm5lZCBubyB0b2tlbiB3aGVuIHN1YnNjcmliaW5nIHRoZSB1c2VyIHRvIHB1c2guJyxcbiAgW0Vycm9yQ29kZS5UT0tFTl9VTlNVQlNDUklCRV9GQUlMRURdOlxuICAgICdBIHByb2JsZW0gb2NjdXJyZWQgd2hpbGUgdW5zdWJzY3JpYmluZyB0aGUgJyArXG4gICAgJ3VzZXIgZnJvbSBGQ006IHskZXJyb3JJbmZvfScsXG4gIFtFcnJvckNvZGUuVE9LRU5fVVBEQVRFX0ZBSUxFRF06XG4gICAgJ0EgcHJvYmxlbSBvY2N1cnJlZCB3aGlsZSB1cGRhdGluZyB0aGUgdXNlciBmcm9tIEZDTTogeyRlcnJvckluZm99JyxcbiAgW0Vycm9yQ29kZS5UT0tFTl9VUERBVEVfTk9fVE9LRU5dOlxuICAgICdGQ00gcmV0dXJuZWQgbm8gdG9rZW4gd2hlbiB1cGRhdGluZyB0aGUgdXNlciB0byBwdXNoLicsXG4gIFtFcnJvckNvZGUuVVNFX1NXX0FGVEVSX0dFVF9UT0tFTl06XG4gICAgJ1RoZSB1c2VTZXJ2aWNlV29ya2VyKCkgbWV0aG9kIG1heSBvbmx5IGJlIGNhbGxlZCBvbmNlIGFuZCBtdXN0IGJlICcgK1xuICAgICdjYWxsZWQgYmVmb3JlIGNhbGxpbmcgZ2V0VG9rZW4oKSB0byBlbnN1cmUgeW91ciBzZXJ2aWNlIHdvcmtlciBpcyB1c2VkLicsXG4gIFtFcnJvckNvZGUuSU5WQUxJRF9TV19SRUdJU1RSQVRJT05dOlxuICAgICdUaGUgaW5wdXQgdG8gdXNlU2VydmljZVdvcmtlcigpIG11c3QgYmUgYSBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uLicsXG4gIFtFcnJvckNvZGUuSU5WQUxJRF9CR19IQU5ETEVSXTpcbiAgICAnVGhlIGlucHV0IHRvIHNldEJhY2tncm91bmRNZXNzYWdlSGFuZGxlcigpIG11c3QgYmUgYSBmdW5jdGlvbi4nLFxuICBbRXJyb3JDb2RlLklOVkFMSURfVkFQSURfS0VZXTogJ1RoZSBwdWJsaWMgVkFQSUQga2V5IG11c3QgYmUgYSBzdHJpbmcuJyxcbiAgW0Vycm9yQ29kZS5VU0VfVkFQSURfS0VZX0FGVEVSX0dFVF9UT0tFTl06XG4gICAgJ1RoZSB1c2VQdWJsaWNWYXBpZEtleSgpIG1ldGhvZCBtYXkgb25seSBiZSBjYWxsZWQgb25jZSBhbmQgbXVzdCBiZSAnICtcbiAgICAnY2FsbGVkIGJlZm9yZSBjYWxsaW5nIGdldFRva2VuKCkgdG8gZW5zdXJlIHlvdXIgVkFQSUQga2V5IGlzIHVzZWQuJ1xufTtcblxuaW50ZXJmYWNlIEVycm9yUGFyYW1zIHtcbiAgW0Vycm9yQ29kZS5NSVNTSU5HX0FQUF9DT05GSUdfVkFMVUVTXToge1xuICAgIHZhbHVlTmFtZTogc3RyaW5nO1xuICB9O1xuICBbRXJyb3JDb2RlLkZBSUxFRF9ERUZBVUxUX1JFR0lTVFJBVElPTl06IHsgYnJvd3NlckVycm9yTWVzc2FnZTogc3RyaW5nIH07XG4gIFtFcnJvckNvZGUuVE9LRU5fU1VCU0NSSUJFX0ZBSUxFRF06IHsgZXJyb3JJbmZvOiBzdHJpbmcgfTtcbiAgW0Vycm9yQ29kZS5UT0tFTl9VTlNVQlNDUklCRV9GQUlMRURdOiB7IGVycm9ySW5mbzogc3RyaW5nIH07XG4gIFtFcnJvckNvZGUuVE9LRU5fVVBEQVRFX0ZBSUxFRF06IHsgZXJyb3JJbmZvOiBzdHJpbmcgfTtcbn1cblxuZXhwb3J0IGNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5PEVycm9yQ29kZSwgRXJyb3JQYXJhbXM+KFxuICAnbWVzc2FnaW5nJyxcbiAgJ01lc3NhZ2luZycsXG4gIEVSUk9SX01BUFxuKTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IERFRkFVTFRfVkFQSURfS0VZLCBFTkRQT0lOVCB9IGZyb20gJy4uL3V0aWwvY29uc3RhbnRzJztcbmltcG9ydCB7IEVSUk9SX0ZBQ1RPUlksIEVycm9yQ29kZSB9IGZyb20gJy4uL3V0aWwvZXJyb3JzJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbk9wdGlvbnMsIFRva2VuRGV0YWlscyB9IGZyb20gJy4uL2ludGVyZmFjZXMvdG9rZW4tZGV0YWlscyc7XG5cbmltcG9ydCB7IEFwcENvbmZpZyB9IGZyb20gJy4uL2ludGVyZmFjZXMvYXBwLWNvbmZpZyc7XG5pbXBvcnQgeyBGaXJlYmFzZUludGVybmFsRGVwZW5kZW5jaWVzIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9pbnRlcm5hbC1kZXBlbmRlbmNpZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFwaVJlc3BvbnNlIHtcbiAgdG9rZW4/OiBzdHJpbmc7XG4gIGVycm9yPzogeyBtZXNzYWdlOiBzdHJpbmcgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcGlSZXF1ZXN0Qm9keSB7XG4gIHdlYjoge1xuICAgIGVuZHBvaW50OiBzdHJpbmc7XG4gICAgcDI1NmRoOiBzdHJpbmc7XG4gICAgYXV0aDogc3RyaW5nO1xuICAgIGFwcGxpY2F0aW9uUHViS2V5Pzogc3RyaW5nO1xuICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdEdldFRva2VuKFxuICBmaXJlYmFzZURlcGVuZGVuY2llczogRmlyZWJhc2VJbnRlcm5hbERlcGVuZGVuY2llcyxcbiAgc3Vic2NyaXB0aW9uT3B0aW9uczogU3Vic2NyaXB0aW9uT3B0aW9uc1xuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgaGVhZGVycyA9IGF3YWl0IGdldEhlYWRlcnMoZmlyZWJhc2VEZXBlbmRlbmNpZXMpO1xuICBjb25zdCBib2R5ID0gZ2V0Qm9keShzdWJzY3JpcHRpb25PcHRpb25zKTtcblxuICBjb25zdCBzdWJzY3JpYmVPcHRpb25zID0ge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGhlYWRlcnMsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcbiAgfTtcblxuICBsZXQgcmVzcG9uc2VEYXRhOiBBcGlSZXNwb25zZTtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgZ2V0RW5kcG9pbnQoZmlyZWJhc2VEZXBlbmRlbmNpZXMuYXBwQ29uZmlnKSxcbiAgICAgIHN1YnNjcmliZU9wdGlvbnNcbiAgICApO1xuICAgIHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoRXJyb3JDb2RlLlRPS0VOX1NVQlNDUklCRV9GQUlMRUQsIHtcbiAgICAgIGVycm9ySW5mbzogZXJyXG4gICAgfSk7XG4gIH1cblxuICBpZiAocmVzcG9uc2VEYXRhLmVycm9yKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IHJlc3BvbnNlRGF0YS5lcnJvci5tZXNzYWdlO1xuICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKEVycm9yQ29kZS5UT0tFTl9TVUJTQ1JJQkVfRkFJTEVELCB7XG4gICAgICBlcnJvckluZm86IG1lc3NhZ2VcbiAgICB9KTtcbiAgfVxuXG4gIGlmICghcmVzcG9uc2VEYXRhLnRva2VuKSB7XG4gICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoRXJyb3JDb2RlLlRPS0VOX1NVQlNDUklCRV9OT19UT0tFTik7XG4gIH1cblxuICByZXR1cm4gcmVzcG9uc2VEYXRhLnRva2VuO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdFVwZGF0ZVRva2VuKFxuICBmaXJlYmFzZURlcGVuZGVuY2llczogRmlyZWJhc2VJbnRlcm5hbERlcGVuZGVuY2llcyxcbiAgdG9rZW5EZXRhaWxzOiBUb2tlbkRldGFpbHNcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IGhlYWRlcnMgPSBhd2FpdCBnZXRIZWFkZXJzKGZpcmViYXNlRGVwZW5kZW5jaWVzKTtcbiAgY29uc3QgYm9keSA9IGdldEJvZHkodG9rZW5EZXRhaWxzLnN1YnNjcmlwdGlvbk9wdGlvbnMhKTtcblxuICBjb25zdCB1cGRhdGVPcHRpb25zID0ge1xuICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICBoZWFkZXJzLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpXG4gIH07XG5cbiAgbGV0IHJlc3BvbnNlRGF0YTogQXBpUmVzcG9uc2U7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgIGAke2dldEVuZHBvaW50KGZpcmViYXNlRGVwZW5kZW5jaWVzLmFwcENvbmZpZyl9LyR7dG9rZW5EZXRhaWxzLnRva2VufWAsXG4gICAgICB1cGRhdGVPcHRpb25zXG4gICAgKTtcbiAgICByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKEVycm9yQ29kZS5UT0tFTl9VUERBVEVfRkFJTEVELCB7XG4gICAgICBlcnJvckluZm86IGVyclxuICAgIH0pO1xuICB9XG5cbiAgaWYgKHJlc3BvbnNlRGF0YS5lcnJvcikge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSByZXNwb25zZURhdGEuZXJyb3IubWVzc2FnZTtcbiAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShFcnJvckNvZGUuVE9LRU5fVVBEQVRFX0ZBSUxFRCwge1xuICAgICAgZXJyb3JJbmZvOiBtZXNzYWdlXG4gICAgfSk7XG4gIH1cblxuICBpZiAoIXJlc3BvbnNlRGF0YS50b2tlbikge1xuICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKEVycm9yQ29kZS5UT0tFTl9VUERBVEVfTk9fVE9LRU4pO1xuICB9XG5cbiAgcmV0dXJuIHJlc3BvbnNlRGF0YS50b2tlbjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVlc3REZWxldGVUb2tlbihcbiAgZmlyZWJhc2VEZXBlbmRlbmNpZXM6IEZpcmViYXNlSW50ZXJuYWxEZXBlbmRlbmNpZXMsXG4gIHRva2VuOiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBoZWFkZXJzID0gYXdhaXQgZ2V0SGVhZGVycyhmaXJlYmFzZURlcGVuZGVuY2llcyk7XG5cbiAgY29uc3QgdW5zdWJzY3JpYmVPcHRpb25zID0ge1xuICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgaGVhZGVyc1xuICB9O1xuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgIGAke2dldEVuZHBvaW50KGZpcmViYXNlRGVwZW5kZW5jaWVzLmFwcENvbmZpZyl9LyR7dG9rZW59YCxcbiAgICAgIHVuc3Vic2NyaWJlT3B0aW9uc1xuICAgICk7XG4gICAgY29uc3QgcmVzcG9uc2VEYXRhOiBBcGlSZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBpZiAocmVzcG9uc2VEYXRhLmVycm9yKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gcmVzcG9uc2VEYXRhLmVycm9yLm1lc3NhZ2U7XG4gICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShFcnJvckNvZGUuVE9LRU5fVU5TVUJTQ1JJQkVfRkFJTEVELCB7XG4gICAgICAgIGVycm9ySW5mbzogbWVzc2FnZVxuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShFcnJvckNvZGUuVE9LRU5fVU5TVUJTQ1JJQkVfRkFJTEVELCB7XG4gICAgICBlcnJvckluZm86IGVyclxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEVuZHBvaW50KHsgcHJvamVjdElkIH06IEFwcENvbmZpZyk6IHN0cmluZyB7XG4gIHJldHVybiBgJHtFTkRQT0lOVH0vcHJvamVjdHMvJHtwcm9qZWN0SWQhfS9yZWdpc3RyYXRpb25zYDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0SGVhZGVycyh7XG4gIGFwcENvbmZpZyxcbiAgaW5zdGFsbGF0aW9uc1xufTogRmlyZWJhc2VJbnRlcm5hbERlcGVuZGVuY2llcyk6IFByb21pc2U8SGVhZGVycz4ge1xuICBjb25zdCBhdXRoVG9rZW4gPSBhd2FpdCBpbnN0YWxsYXRpb25zLmdldFRva2VuKCk7XG5cbiAgcmV0dXJuIG5ldyBIZWFkZXJzKHtcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICd4LWdvb2ctYXBpLWtleSc6IGFwcENvbmZpZy5hcGlLZXkhLFxuICAgICd4LWdvb2ctZmlyZWJhc2UtaW5zdGFsbGF0aW9ucy1hdXRoJzogYEZJUyAke2F1dGhUb2tlbn1gXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRCb2R5KHtcbiAgcDI1NmRoLFxuICBhdXRoLFxuICBlbmRwb2ludCxcbiAgdmFwaWRLZXlcbn06IFN1YnNjcmlwdGlvbk9wdGlvbnMpOiBBcGlSZXF1ZXN0Qm9keSB7XG4gIGNvbnN0IGJvZHk6IEFwaVJlcXVlc3RCb2R5ID0ge1xuICAgIHdlYjoge1xuICAgICAgZW5kcG9pbnQsXG4gICAgICBhdXRoLFxuICAgICAgcDI1NmRoXG4gICAgfVxuICB9O1xuXG4gIGlmICh2YXBpZEtleSAhPT0gREVGQVVMVF9WQVBJRF9LRVkpIHtcbiAgICBib2R5LndlYi5hcHBsaWNhdGlvblB1YktleSA9IHZhcGlkS2V5O1xuICB9XG5cbiAgcmV0dXJuIGJvZHk7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBTdWJzY3JpcHRpb25PcHRpb25zLCBUb2tlbkRldGFpbHMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3Rva2VuLWRldGFpbHMnO1xuaW1wb3J0IHtcbiAgYXJyYXlUb0Jhc2U2NCxcbiAgYmFzZTY0VG9BcnJheVxufSBmcm9tICcuLi9oZWxwZXJzL2FycmF5LWJhc2U2NC10cmFuc2xhdG9yJztcbmltcG9ydCB7IGRiR2V0LCBkYlJlbW92ZSwgZGJTZXQgfSBmcm9tICcuL2lkYi1tYW5hZ2VyJztcbmltcG9ydCB7XG4gIHJlcXVlc3REZWxldGVUb2tlbixcbiAgcmVxdWVzdEdldFRva2VuLFxuICByZXF1ZXN0VXBkYXRlVG9rZW5cbn0gZnJvbSAnLi9yZXF1ZXN0cyc7XG5cbmltcG9ydCB7IEZpcmViYXNlSW50ZXJuYWxEZXBlbmRlbmNpZXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2ludGVybmFsLWRlcGVuZGVuY2llcyc7XG5pbXBvcnQgeyBNZXNzYWdpbmdTZXJ2aWNlIH0gZnJvbSAnLi4vbWVzc2FnaW5nLXNlcnZpY2UnO1xuXG4vLyBVcGRhdGVSZWdpc3RyYXRpb24gd2lsbCBiZSBjYWxsZWQgb25jZSBldmVyeSB3ZWVrLlxuY29uc3QgVE9LRU5fRVhQSVJBVElPTl9NUyA9IDcgKiAyNCAqIDYwICogNjAgKiAxMDAwOyAvLyA3IGRheXNcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRva2VuSW50ZXJuYWwoXG4gIG1lc3NhZ2luZzogTWVzc2FnaW5nU2VydmljZVxuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgcHVzaFN1YnNjcmlwdGlvbiA9IGF3YWl0IGdldFB1c2hTdWJzY3JpcHRpb24oXG4gICAgbWVzc2FnaW5nLnN3UmVnaXN0cmF0aW9uISxcbiAgICBtZXNzYWdpbmcudmFwaWRLZXkhXG4gICk7XG5cbiAgY29uc3Qgc3Vic2NyaXB0aW9uT3B0aW9uczogU3Vic2NyaXB0aW9uT3B0aW9ucyA9IHtcbiAgICB2YXBpZEtleTogbWVzc2FnaW5nLnZhcGlkS2V5ISxcbiAgICBzd1Njb3BlOiBtZXNzYWdpbmcuc3dSZWdpc3RyYXRpb24hLnNjb3BlLFxuICAgIGVuZHBvaW50OiBwdXNoU3Vic2NyaXB0aW9uLmVuZHBvaW50LFxuICAgIGF1dGg6IGFycmF5VG9CYXNlNjQocHVzaFN1YnNjcmlwdGlvbi5nZXRLZXkoJ2F1dGgnKSEpLFxuICAgIHAyNTZkaDogYXJyYXlUb0Jhc2U2NChwdXNoU3Vic2NyaXB0aW9uLmdldEtleSgncDI1NmRoJykhKVxuICB9O1xuXG4gIGNvbnN0IHRva2VuRGV0YWlscyA9IGF3YWl0IGRiR2V0KG1lc3NhZ2luZy5maXJlYmFzZURlcGVuZGVuY2llcyk7XG4gIGlmICghdG9rZW5EZXRhaWxzKSB7XG4gICAgLy8gTm8gdG9rZW4sIGdldCBhIG5ldyBvbmUuXG4gICAgcmV0dXJuIGdldE5ld1Rva2VuKG1lc3NhZ2luZy5maXJlYmFzZURlcGVuZGVuY2llcywgc3Vic2NyaXB0aW9uT3B0aW9ucyk7XG4gIH0gZWxzZSBpZiAoXG4gICAgIWlzVG9rZW5WYWxpZCh0b2tlbkRldGFpbHMuc3Vic2NyaXB0aW9uT3B0aW9ucyEsIHN1YnNjcmlwdGlvbk9wdGlvbnMpXG4gICkge1xuICAgIC8vIEludmFsaWQgdG9rZW4sIGdldCBhIG5ldyBvbmUuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHJlcXVlc3REZWxldGVUb2tlbihcbiAgICAgICAgbWVzc2FnaW5nLmZpcmViYXNlRGVwZW5kZW5jaWVzISxcbiAgICAgICAgdG9rZW5EZXRhaWxzLnRva2VuXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIFN1cHByZXNzIGVycm9ycyBiZWNhdXNlIG9mICMyMzY0XG4gICAgICBjb25zb2xlLndhcm4oZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdldE5ld1Rva2VuKG1lc3NhZ2luZy5maXJlYmFzZURlcGVuZGVuY2llcyEsIHN1YnNjcmlwdGlvbk9wdGlvbnMpO1xuICB9IGVsc2UgaWYgKERhdGUubm93KCkgPj0gdG9rZW5EZXRhaWxzLmNyZWF0ZVRpbWUgKyBUT0tFTl9FWFBJUkFUSU9OX01TKSB7XG4gICAgLy8gV2Vla2x5IHRva2VuIHJlZnJlc2hcbiAgICByZXR1cm4gdXBkYXRlVG9rZW4obWVzc2FnaW5nLCB7XG4gICAgICB0b2tlbjogdG9rZW5EZXRhaWxzLnRva2VuLFxuICAgICAgY3JlYXRlVGltZTogRGF0ZS5ub3coKSxcbiAgICAgIHN1YnNjcmlwdGlvbk9wdGlvbnNcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBWYWxpZCB0b2tlbiwgbm90aGluZyB0byBkby5cbiAgICByZXR1cm4gdG9rZW5EZXRhaWxzLnRva2VuO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2QgZGVsZXRlcyB0aGUgdG9rZW4gZnJvbSB0aGUgZGF0YWJhc2UsIHVuc3Vic2NyaWJlcyB0aGUgdG9rZW4gZnJvbSBGQ00sIGFuZCB1bnJlZ2lzdGVyc1xuICogdGhlIHB1c2ggc3Vic2NyaXB0aW9uIGlmIGl0IGV4aXN0cy5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVRva2VuSW50ZXJuYWwoXG4gIG1lc3NhZ2luZzogTWVzc2FnaW5nU2VydmljZVxuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIGNvbnN0IHRva2VuRGV0YWlscyA9IGF3YWl0IGRiR2V0KG1lc3NhZ2luZy5maXJlYmFzZURlcGVuZGVuY2llcyk7XG4gIGlmICh0b2tlbkRldGFpbHMpIHtcbiAgICBhd2FpdCByZXF1ZXN0RGVsZXRlVG9rZW4oXG4gICAgICBtZXNzYWdpbmcuZmlyZWJhc2VEZXBlbmRlbmNpZXMsXG4gICAgICB0b2tlbkRldGFpbHMudG9rZW5cbiAgICApO1xuICAgIGF3YWl0IGRiUmVtb3ZlKG1lc3NhZ2luZy5maXJlYmFzZURlcGVuZGVuY2llcyk7XG4gIH1cblxuICAvLyBVbnN1YnNjcmliZSBmcm9tIHRoZSBwdXNoIHN1YnNjcmlwdGlvbi5cbiAgY29uc3QgcHVzaFN1YnNjcmlwdGlvbiA9XG4gICAgYXdhaXQgbWVzc2FnaW5nLnN3UmVnaXN0cmF0aW9uIS5wdXNoTWFuYWdlci5nZXRTdWJzY3JpcHRpb24oKTtcbiAgaWYgKHB1c2hTdWJzY3JpcHRpb24pIHtcbiAgICByZXR1cm4gcHVzaFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICB9XG5cbiAgLy8gSWYgdGhlcmUncyBubyBTVywgY29uc2lkZXIgaXQgYSBzdWNjZXNzLlxuICByZXR1cm4gdHJ1ZTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlVG9rZW4oXG4gIG1lc3NhZ2luZzogTWVzc2FnaW5nU2VydmljZSxcbiAgdG9rZW5EZXRhaWxzOiBUb2tlbkRldGFpbHNcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXBkYXRlZFRva2VuID0gYXdhaXQgcmVxdWVzdFVwZGF0ZVRva2VuKFxuICAgICAgbWVzc2FnaW5nLmZpcmViYXNlRGVwZW5kZW5jaWVzLFxuICAgICAgdG9rZW5EZXRhaWxzXG4gICAgKTtcblxuICAgIGNvbnN0IHVwZGF0ZWRUb2tlbkRldGFpbHM6IFRva2VuRGV0YWlscyA9IHtcbiAgICAgIC4uLnRva2VuRGV0YWlscyxcbiAgICAgIHRva2VuOiB1cGRhdGVkVG9rZW4sXG4gICAgICBjcmVhdGVUaW1lOiBEYXRlLm5vdygpXG4gICAgfTtcblxuICAgIGF3YWl0IGRiU2V0KG1lc3NhZ2luZy5maXJlYmFzZURlcGVuZGVuY2llcywgdXBkYXRlZFRva2VuRGV0YWlscyk7XG4gICAgcmV0dXJuIHVwZGF0ZWRUb2tlbjtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGF3YWl0IGRlbGV0ZVRva2VuSW50ZXJuYWwobWVzc2FnaW5nKTtcbiAgICB0aHJvdyBlO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldE5ld1Rva2VuKFxuICBmaXJlYmFzZURlcGVuZGVuY2llczogRmlyZWJhc2VJbnRlcm5hbERlcGVuZGVuY2llcyxcbiAgc3Vic2NyaXB0aW9uT3B0aW9uczogU3Vic2NyaXB0aW9uT3B0aW9uc1xuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgdG9rZW4gPSBhd2FpdCByZXF1ZXN0R2V0VG9rZW4oXG4gICAgZmlyZWJhc2VEZXBlbmRlbmNpZXMsXG4gICAgc3Vic2NyaXB0aW9uT3B0aW9uc1xuICApO1xuICBjb25zdCB0b2tlbkRldGFpbHM6IFRva2VuRGV0YWlscyA9IHtcbiAgICB0b2tlbixcbiAgICBjcmVhdGVUaW1lOiBEYXRlLm5vdygpLFxuICAgIHN1YnNjcmlwdGlvbk9wdGlvbnNcbiAgfTtcbiAgYXdhaXQgZGJTZXQoZmlyZWJhc2VEZXBlbmRlbmNpZXMsIHRva2VuRGV0YWlscyk7XG4gIHJldHVybiB0b2tlbkRldGFpbHMudG9rZW47XG59XG5cbi8qKlxuICogR2V0cyBhIFB1c2hTdWJzY3JpcHRpb24gZm9yIHRoZSBjdXJyZW50IHVzZXIuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFB1c2hTdWJzY3JpcHRpb24oXG4gIHN3UmVnaXN0cmF0aW9uOiBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uLFxuICB2YXBpZEtleTogc3RyaW5nXG4pOiBQcm9taXNlPFB1c2hTdWJzY3JpcHRpb24+IHtcbiAgY29uc3Qgc3Vic2NyaXB0aW9uID0gYXdhaXQgc3dSZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIuZ2V0U3Vic2NyaXB0aW9uKCk7XG4gIGlmIChzdWJzY3JpcHRpb24pIHtcbiAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICB9XG5cbiAgcmV0dXJuIHN3UmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLnN1YnNjcmliZSh7XG4gICAgdXNlclZpc2libGVPbmx5OiB0cnVlLFxuICAgIC8vIENocm9tZSA8PSA3NSBkb2Vzbid0IHN1cHBvcnQgYmFzZTY0LWVuY29kZWQgVkFQSUQga2V5LiBGb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgVkFQSUQga2V5XG4gICAgLy8gc3VibWl0dGVkIHRvIHB1c2hNYW5hZ2VyI3N1YnNjcmliZSBtdXN0IGJlIG9mIHR5cGUgVWludDhBcnJheS5cbiAgICBhcHBsaWNhdGlvblNlcnZlcktleTogYmFzZTY0VG9BcnJheSh2YXBpZEtleSlcbiAgfSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBzYXZlZCB0b2tlbkRldGFpbHMgb2JqZWN0IG1hdGNoZXMgdGhlIGNvbmZpZ3VyYXRpb24gcHJvdmlkZWQuXG4gKi9cbmZ1bmN0aW9uIGlzVG9rZW5WYWxpZChcbiAgZGJPcHRpb25zOiBTdWJzY3JpcHRpb25PcHRpb25zLFxuICBjdXJyZW50T3B0aW9uczogU3Vic2NyaXB0aW9uT3B0aW9uc1xuKTogYm9vbGVhbiB7XG4gIGNvbnN0IGlzVmFwaWRLZXlFcXVhbCA9IGN1cnJlbnRPcHRpb25zLnZhcGlkS2V5ID09PSBkYk9wdGlvbnMudmFwaWRLZXk7XG4gIGNvbnN0IGlzRW5kcG9pbnRFcXVhbCA9IGN1cnJlbnRPcHRpb25zLmVuZHBvaW50ID09PSBkYk9wdGlvbnMuZW5kcG9pbnQ7XG4gIGNvbnN0IGlzQXV0aEVxdWFsID0gY3VycmVudE9wdGlvbnMuYXV0aCA9PT0gZGJPcHRpb25zLmF1dGg7XG4gIGNvbnN0IGlzUDI1NmRoRXF1YWwgPSBjdXJyZW50T3B0aW9ucy5wMjU2ZGggPT09IGRiT3B0aW9ucy5wMjU2ZGg7XG5cbiAgcmV0dXJuIGlzVmFwaWRLZXlFcXVhbCAmJiBpc0VuZHBvaW50RXF1YWwgJiYgaXNBdXRoRXF1YWwgJiYgaXNQMjU2ZGhFcXVhbDtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IE1lc3NhZ2VQYXlsb2FkIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wdWJsaWMtdHlwZXMnO1xuaW1wb3J0IHsgTWVzc2FnZVBheWxvYWRJbnRlcm5hbCB9IGZyb20gJy4uL2ludGVyZmFjZXMvaW50ZXJuYWwtbWVzc2FnZS1wYXlsb2FkJztcblxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVybmFsaXplUGF5bG9hZChcbiAgaW50ZXJuYWxQYXlsb2FkOiBNZXNzYWdlUGF5bG9hZEludGVybmFsXG4pOiBNZXNzYWdlUGF5bG9hZCB7XG4gIGNvbnN0IHBheWxvYWQ6IE1lc3NhZ2VQYXlsb2FkID0ge1xuICAgIGZyb206IGludGVybmFsUGF5bG9hZC5mcm9tLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2VcbiAgICBjb2xsYXBzZUtleTogaW50ZXJuYWxQYXlsb2FkLmNvbGxhcHNlX2tleSxcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2FtZWxjYXNlXG4gICAgbWVzc2FnZUlkOiBpbnRlcm5hbFBheWxvYWQuZmNtX21lc3NhZ2VfaWRcbiAgfSBhcyBNZXNzYWdlUGF5bG9hZDtcblxuICBwcm9wYWdhdGVOb3RpZmljYXRpb25QYXlsb2FkKHBheWxvYWQsIGludGVybmFsUGF5bG9hZCk7XG4gIHByb3BhZ2F0ZURhdGFQYXlsb2FkKHBheWxvYWQsIGludGVybmFsUGF5bG9hZCk7XG4gIHByb3BhZ2F0ZUZjbU9wdGlvbnMocGF5bG9hZCwgaW50ZXJuYWxQYXlsb2FkKTtcblxuICByZXR1cm4gcGF5bG9hZDtcbn1cblxuZnVuY3Rpb24gcHJvcGFnYXRlTm90aWZpY2F0aW9uUGF5bG9hZChcbiAgcGF5bG9hZDogTWVzc2FnZVBheWxvYWQsXG4gIG1lc3NhZ2VQYXlsb2FkSW50ZXJuYWw6IE1lc3NhZ2VQYXlsb2FkSW50ZXJuYWxcbik6IHZvaWQge1xuICBpZiAoIW1lc3NhZ2VQYXlsb2FkSW50ZXJuYWwubm90aWZpY2F0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcGF5bG9hZC5ub3RpZmljYXRpb24gPSB7fTtcblxuICBjb25zdCB0aXRsZSA9IG1lc3NhZ2VQYXlsb2FkSW50ZXJuYWwubm90aWZpY2F0aW9uIS50aXRsZTtcbiAgaWYgKCEhdGl0bGUpIHtcbiAgICBwYXlsb2FkLm5vdGlmaWNhdGlvbiEudGl0bGUgPSB0aXRsZTtcbiAgfVxuXG4gIGNvbnN0IGJvZHkgPSBtZXNzYWdlUGF5bG9hZEludGVybmFsLm5vdGlmaWNhdGlvbiEuYm9keTtcbiAgaWYgKCEhYm9keSkge1xuICAgIHBheWxvYWQubm90aWZpY2F0aW9uIS5ib2R5ID0gYm9keTtcbiAgfVxuXG4gIGNvbnN0IGltYWdlID0gbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5ub3RpZmljYXRpb24hLmltYWdlO1xuICBpZiAoISFpbWFnZSkge1xuICAgIHBheWxvYWQubm90aWZpY2F0aW9uIS5pbWFnZSA9IGltYWdlO1xuICB9XG59XG5cbmZ1bmN0aW9uIHByb3BhZ2F0ZURhdGFQYXlsb2FkKFxuICBwYXlsb2FkOiBNZXNzYWdlUGF5bG9hZCxcbiAgbWVzc2FnZVBheWxvYWRJbnRlcm5hbDogTWVzc2FnZVBheWxvYWRJbnRlcm5hbFxuKTogdm9pZCB7XG4gIGlmICghbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5kYXRhKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcGF5bG9hZC5kYXRhID0gbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5kYXRhIGFzIHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG59XG5cbmZ1bmN0aW9uIHByb3BhZ2F0ZUZjbU9wdGlvbnMoXG4gIHBheWxvYWQ6IE1lc3NhZ2VQYXlsb2FkLFxuICBtZXNzYWdlUGF5bG9hZEludGVybmFsOiBNZXNzYWdlUGF5bG9hZEludGVybmFsXG4pOiB2b2lkIHtcbiAgaWYgKCFtZXNzYWdlUGF5bG9hZEludGVybmFsLmZjbU9wdGlvbnMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBwYXlsb2FkLmZjbU9wdGlvbnMgPSB7fTtcblxuICBjb25zdCBsaW5rID0gbWVzc2FnZVBheWxvYWRJbnRlcm5hbC5mY21PcHRpb25zIS5saW5rO1xuICBpZiAoISFsaW5rKSB7XG4gICAgcGF5bG9hZC5mY21PcHRpb25zIS5saW5rID0gbGluaztcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2VcbiAgY29uc3QgYW5hbHl0aWNzTGFiZWwgPSBtZXNzYWdlUGF5bG9hZEludGVybmFsLmZjbU9wdGlvbnMhLmFuYWx5dGljc19sYWJlbDtcbiAgaWYgKCEhYW5hbHl0aWNzTGFiZWwpIHtcbiAgICBwYXlsb2FkLmZjbU9wdGlvbnMhLmFuYWx5dGljc0xhYmVsID0gYW5hbHl0aWNzTGFiZWw7XG4gIH1cbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENPTlNPTEVfQ0FNUEFJR05fSUQgfSBmcm9tICcuLi91dGlsL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBDb25zb2xlTWVzc2FnZURhdGEgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2ludGVybmFsLW1lc3NhZ2UtcGF5bG9hZCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0NvbnNvbGVNZXNzYWdlKGRhdGE6IHVua25vd24pOiBkYXRhIGlzIENvbnNvbGVNZXNzYWdlRGF0YSB7XG4gIC8vIFRoaXMgbWVzc2FnZSBoYXMgYSBjYW1wYWlnbiBJRCwgbWVhbmluZyBpdCB3YXMgc2VudCB1c2luZyB0aGUgRmlyZWJhc2UgQ29uc29sZS5cbiAgcmV0dXJuIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiAhIWRhdGEgJiYgQ09OU09MRV9DQU1QQUlHTl9JRCBpbiBkYXRhO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgREVGQVVMVF9CQUNLT0ZGX1RJTUVfTVMsXG4gIEVWRU5UX01FU1NBR0VfREVMSVZFUkVELFxuICBGQ01fTE9HX1NPVVJDRSxcbiAgTE9HX0lOVEVSVkFMX0lOX01TLFxuICBNQVhfTlVNQkVSX09GX0VWRU5UU19QRVJfTE9HX1JFUVVFU1QsXG4gIE1BWF9SRVRSSUVTLFxuICBNZXNzYWdlVHlwZSxcbiAgU0RLX1BMQVRGT1JNX1dFQlxufSBmcm9tICcuLi91dGlsL2NvbnN0YW50cyc7XG5pbXBvcnQge1xuICBGY21FdmVudCxcbiAgTG9nRXZlbnQsXG4gIExvZ1JlcXVlc3QsXG4gIExvZ1Jlc3BvbnNlXG59IGZyb20gJy4uL2ludGVyZmFjZXMvbG9nZ2luZy10eXBlcyc7XG5cbmltcG9ydCB7IE1lc3NhZ2VQYXlsb2FkSW50ZXJuYWwgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2ludGVybmFsLW1lc3NhZ2UtcGF5bG9hZCc7XG5pbXBvcnQgeyBNZXNzYWdpbmdTZXJ2aWNlIH0gZnJvbSAnLi4vbWVzc2FnaW5nLXNlcnZpY2UnO1xuXG5jb25zdCBGSVJFTE9HX0VORFBPSU5UID0gX21lcmdlU3RyaW5ncyhcbiAgJ2h0cy9mcmJzbGdpZ3Aub2dlcHNjbXYvaWVvL2VheWxnJyxcbiAgJ3RwOi9pZWFlb2duLWFnb2xhaS5vLzFmcmxnbGdjL28nXG4pO1xuXG5jb25zdCBGQ01fVFJBTlNQT1JUX0tFWSA9IF9tZXJnZVN0cmluZ3MoXG4gICdBelNDYnc2M2cxUjBuQ3c4NWpHOCcsXG4gICdJYXlhM3lMS3dtZ3ZoN2NGMHE0J1xuKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0TG9nZ2luZ1NlcnZpY2UobWVzc2FnaW5nOiBNZXNzYWdpbmdTZXJ2aWNlKTogdm9pZCB7XG4gIGlmICghbWVzc2FnaW5nLmlzTG9nU2VydmljZVN0YXJ0ZWQpIHtcbiAgICBfcHJvY2Vzc1F1ZXVlKG1lc3NhZ2luZywgTE9HX0lOVEVSVkFMX0lOX01TKTtcbiAgICBtZXNzYWdpbmcuaXNMb2dTZXJ2aWNlU3RhcnRlZCA9IHRydWU7XG4gIH1cbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIG1lc3NhZ2luZyB0aGUgbWVzc2FnaW5nIGluc3RhbmNlLlxuICogQHBhcmFtIG9mZnNldEluTXMgdGhpcyBtZXRob2QgZXhlY3V0ZSBhZnRlciBgb2Zmc2V0SW5Nc2AgZWxhcHNlZCAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfcHJvY2Vzc1F1ZXVlKFxuICBtZXNzYWdpbmc6IE1lc3NhZ2luZ1NlcnZpY2UsXG4gIG9mZnNldEluTXM6IG51bWJlclxuKTogdm9pZCB7XG4gIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgIGlmICghbWVzc2FnaW5nLmRlbGl2ZXJ5TWV0cmljc0V4cG9ydGVkVG9CaWdRdWVyeUVuYWJsZWQpIHtcbiAgICAgIC8vIGZsdXNoIGV2ZW50cyBhbmQgdGVybWluYXRlIGxvZ2dpbmcgc2VydmljZVxuICAgICAgbWVzc2FnaW5nLmxvZ0V2ZW50cyA9IFtdO1xuICAgICAgbWVzc2FnaW5nLmlzTG9nU2VydmljZVN0YXJ0ZWQgPSBmYWxzZTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghbWVzc2FnaW5nLmxvZ0V2ZW50cy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBfcHJvY2Vzc1F1ZXVlKG1lc3NhZ2luZywgTE9HX0lOVEVSVkFMX0lOX01TKTtcbiAgICB9XG5cbiAgICBhd2FpdCBfZGlzcGF0Y2hMb2dFdmVudHMobWVzc2FnaW5nKTtcbiAgfSwgb2Zmc2V0SW5Ncyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBfZGlzcGF0Y2hMb2dFdmVudHMoXG4gIG1lc3NhZ2luZzogTWVzc2FnaW5nU2VydmljZVxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGZvciAoXG4gICAgbGV0IGkgPSAwLCBuID0gbWVzc2FnaW5nLmxvZ0V2ZW50cy5sZW5ndGg7XG4gICAgaSA8IG47XG4gICAgaSArPSBNQVhfTlVNQkVSX09GX0VWRU5UU19QRVJfTE9HX1JFUVVFU1RcbiAgKSB7XG4gICAgY29uc3QgbG9nUmVxdWVzdCA9IF9jcmVhdGVMb2dSZXF1ZXN0KFxuICAgICAgbWVzc2FnaW5nLmxvZ0V2ZW50cy5zbGljZShpLCBpICsgTUFYX05VTUJFUl9PRl9FVkVOVFNfUEVSX0xPR19SRVFVRVNUKVxuICAgICk7XG5cbiAgICBsZXQgcmV0cnlDb3VudCA9IDAsXG4gICAgICByZXNwb25zZSA9IHt9IGFzIFJlc3BvbnNlO1xuXG4gICAgZG8ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgICBGSVJFTE9HX0VORFBPSU5ULmNvbmNhdCgnP2tleT0nLCBGQ01fVFJBTlNQT1JUX0tFWSksXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShsb2dSZXF1ZXN0KVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICAvLyBkb24ndCByZXRyeSBvbiAyMDBzIG9yIG5vbiByZXRyaWFibGUgZXJyb3JzXG4gICAgICAgIGlmIChyZXNwb25zZS5vayB8fCAoIXJlc3BvbnNlLm9rICYmICFpc1JldHJpYWJsZUVycm9yKHJlc3BvbnNlKSkpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2sgJiYgaXNSZXRyaWFibGVFcnJvcihyZXNwb25zZSkpIHtcbiAgICAgICAgICAvLyByZXRocm93IHRvIHJldHJ5IHdpdGggcXVvdGFcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAnYSByZXRyaWFibGUgTm9uLTIwMCBjb2RlIGlzIHJldHVybmVkIGluIGZldGNoIHRvIEZpcmVsb2cgZW5kcG9pbnQuIFJldHJ5J1xuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnN0IGlzTGFzdEF0dGVtcHQgPSByZXRyeUNvdW50ID09PSBNQVhfUkVUUklFUztcbiAgICAgICAgaWYgKGlzTGFzdEF0dGVtcHQpIHtcbiAgICAgICAgICAvLyBleGlzdGluZyB0aGUgZG8td2hpbGUgaW50ZXJhY3RpdmUgcmV0cnkgbG9naWMgYmVjYXVzZSByZXRyeSBxdW90YSBoYXMgcmVhY2hlZC5cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZXQgZGVsYXlJbk1zOiBudW1iZXI7XG4gICAgICB0cnkge1xuICAgICAgICBkZWxheUluTXMgPSBOdW1iZXIoXG4gICAgICAgICAgKChhd2FpdCByZXNwb25zZS5qc29uKCkpIGFzIExvZ1Jlc3BvbnNlKS5uZXh0UmVxdWVzdFdhaXRNaWxsaXNcbiAgICAgICAgKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZGVsYXlJbk1zID0gREVGQVVMVF9CQUNLT0ZGX1RJTUVfTVM7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheUluTXMpKTtcblxuICAgICAgcmV0cnlDb3VudCsrO1xuICAgIH0gd2hpbGUgKHJldHJ5Q291bnQgPCBNQVhfUkVUUklFUyk7XG4gIH1cblxuICBtZXNzYWdpbmcubG9nRXZlbnRzID0gW107XG4gIC8vIHNjaGVkdWxlIGZvciBuZXh0IGxvZ2dpbmdcbiAgX3Byb2Nlc3NRdWV1ZShtZXNzYWdpbmcsIExPR19JTlRFUlZBTF9JTl9NUyk7XG59XG5cbmZ1bmN0aW9uIGlzUmV0cmlhYmxlRXJyb3IocmVzcG9uc2U6IFJlc3BvbnNlKTogYm9vbGVhbiB7XG4gIGNvbnN0IGh0dHBTdGF0dXMgPSByZXNwb25zZS5zdGF0dXM7XG5cbiAgcmV0dXJuIChcbiAgICBodHRwU3RhdHVzID09PSA0MjkgfHxcbiAgICBodHRwU3RhdHVzID09PSA1MDAgfHxcbiAgICBodHRwU3RhdHVzID09PSA1MDMgfHxcbiAgICBodHRwU3RhdHVzID09PSA1MDRcbiAgKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN0YWdlTG9nKFxuICBtZXNzYWdpbmc6IE1lc3NhZ2luZ1NlcnZpY2UsXG4gIGludGVybmFsUGF5bG9hZDogTWVzc2FnZVBheWxvYWRJbnRlcm5hbFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGZjbUV2ZW50ID0gY3JlYXRlRmNtRXZlbnQoXG4gICAgaW50ZXJuYWxQYXlsb2FkLFxuICAgIGF3YWl0IG1lc3NhZ2luZy5maXJlYmFzZURlcGVuZGVuY2llcy5pbnN0YWxsYXRpb25zLmdldElkKClcbiAgKTtcblxuICBjcmVhdGVBbmRFbnF1ZXVlTG9nRXZlbnQobWVzc2FnaW5nLCBmY21FdmVudCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZjbUV2ZW50KFxuICBpbnRlcm5hbFBheWxvYWQ6IE1lc3NhZ2VQYXlsb2FkSW50ZXJuYWwsXG4gIGZpZDogc3RyaW5nXG4pOiBGY21FdmVudCB7XG4gIGNvbnN0IGZjbUV2ZW50ID0ge30gYXMgRmNtRXZlbnQ7XG5cbiAgLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXG4gIC8vIHNvbWUgZmllbGRzIHNob3VsZCBhbHdheXMgYmUgbm9uLW51bGwuIFN0aWxsIGNoZWNrIHRvIGVuc3VyZS5cbiAgaWYgKCEhaW50ZXJuYWxQYXlsb2FkLmZyb20pIHtcbiAgICBmY21FdmVudC5wcm9qZWN0X251bWJlciA9IGludGVybmFsUGF5bG9hZC5mcm9tO1xuICB9XG5cbiAgaWYgKCEhaW50ZXJuYWxQYXlsb2FkLmZjbV9tZXNzYWdlX2lkKSB7XG4gICAgZmNtRXZlbnQubWVzc2FnZV9pZCA9IGludGVybmFsUGF5bG9hZC5mY21fbWVzc2FnZV9pZDtcbiAgfVxuXG4gIGZjbUV2ZW50Lmluc3RhbmNlX2lkID0gZmlkO1xuXG4gIGlmICghIWludGVybmFsUGF5bG9hZC5ub3RpZmljYXRpb24pIHtcbiAgICBmY21FdmVudC5tZXNzYWdlX3R5cGUgPSBNZXNzYWdlVHlwZS5ESVNQTEFZX05PVElGSUNBVElPTi50b1N0cmluZygpO1xuICB9IGVsc2Uge1xuICAgIGZjbUV2ZW50Lm1lc3NhZ2VfdHlwZSA9IE1lc3NhZ2VUeXBlLkRBVEFfTUVTU0FHRS50b1N0cmluZygpO1xuICB9XG5cbiAgZmNtRXZlbnQuc2RrX3BsYXRmb3JtID0gU0RLX1BMQVRGT1JNX1dFQi50b1N0cmluZygpO1xuICBmY21FdmVudC5wYWNrYWdlX25hbWUgPSBzZWxmLm9yaWdpbi5yZXBsYWNlKC8oXlxcdys6fF4pXFwvXFwvLywgJycpO1xuXG4gIGlmICghIWludGVybmFsUGF5bG9hZC5jb2xsYXBzZV9rZXkpIHtcbiAgICBmY21FdmVudC5jb2xsYXBzZV9rZXkgPSBpbnRlcm5hbFBheWxvYWQuY29sbGFwc2Vfa2V5O1xuICB9XG5cbiAgZmNtRXZlbnQuZXZlbnQgPSBFVkVOVF9NRVNTQUdFX0RFTElWRVJFRC50b1N0cmluZygpO1xuXG4gIGlmICghIWludGVybmFsUGF5bG9hZC5mY21PcHRpb25zPy5hbmFseXRpY3NfbGFiZWwpIHtcbiAgICBmY21FdmVudC5hbmFseXRpY3NfbGFiZWwgPSBpbnRlcm5hbFBheWxvYWQuZmNtT3B0aW9ucz8uYW5hbHl0aWNzX2xhYmVsO1xuICB9XG5cbiAgLyogZXNsaW50LWVuYWJsZSBjYW1lbGNhc2UgKi9cbiAgcmV0dXJuIGZjbUV2ZW50O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBbmRFbnF1ZXVlTG9nRXZlbnQoXG4gIG1lc3NhZ2luZzogTWVzc2FnaW5nU2VydmljZSxcbiAgZmNtRXZlbnQ6IEZjbUV2ZW50XG4pOiB2b2lkIHtcbiAgY29uc3QgbG9nRXZlbnQgPSB7fSBhcyBMb2dFdmVudDtcblxuICAvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbiAgbG9nRXZlbnQuZXZlbnRfdGltZV9tcyA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSkudG9TdHJpbmcoKTtcbiAgbG9nRXZlbnQuc291cmNlX2V4dGVuc2lvbl9qc29uX3Byb3RvMyA9IEpTT04uc3RyaW5naWZ5KGZjbUV2ZW50KTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxuXG4gIG1lc3NhZ2luZy5sb2dFdmVudHMucHVzaChsb2dFdmVudCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfY3JlYXRlTG9nUmVxdWVzdChsb2dFdmVudFF1ZXVlOiBMb2dFdmVudFtdKTogTG9nUmVxdWVzdCB7XG4gIGNvbnN0IGxvZ1JlcXVlc3QgPSB7fSBhcyBMb2dSZXF1ZXN0O1xuXG4gIC8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuICBsb2dSZXF1ZXN0LmxvZ19zb3VyY2UgPSBGQ01fTE9HX1NPVVJDRS50b1N0cmluZygpO1xuICBsb2dSZXF1ZXN0LmxvZ19ldmVudCA9IGxvZ0V2ZW50UXVldWU7XG4gIC8qIGVzbGludC1lbmFibGUgY2FtZWxjYXNlICovXG5cbiAgcmV0dXJuIGxvZ1JlcXVlc3Q7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfbWVyZ2VTdHJpbmdzKHMxOiBzdHJpbmcsIHMyOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCByZXN1bHRBcnJheSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHMxLmxlbmd0aDsgaSsrKSB7XG4gICAgcmVzdWx0QXJyYXkucHVzaChzMS5jaGFyQXQoaSkpO1xuICAgIGlmIChpIDwgczIubGVuZ3RoKSB7XG4gICAgICByZXN1bHRBcnJheS5wdXNoKHMyLmNoYXJBdChpKSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdEFycmF5LmpvaW4oJycpO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRVJST1JfRkFDVE9SWSwgRXJyb3JDb2RlIH0gZnJvbSAnLi4vdXRpbC9lcnJvcnMnO1xuaW1wb3J0IHsgRmlyZWJhc2VBcHAsIEZpcmViYXNlT3B0aW9ucyB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuXG5pbXBvcnQgeyBBcHBDb25maWcgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2FwcC1jb25maWcnO1xuaW1wb3J0IHsgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RBcHBDb25maWcoYXBwOiBGaXJlYmFzZUFwcCk6IEFwcENvbmZpZyB7XG4gIGlmICghYXBwIHx8ICFhcHAub3B0aW9ucykge1xuICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKCdBcHAgQ29uZmlndXJhdGlvbiBPYmplY3QnKTtcbiAgfVxuXG4gIGlmICghYXBwLm5hbWUpIHtcbiAgICB0aHJvdyBnZXRNaXNzaW5nVmFsdWVFcnJvcignQXBwIE5hbWUnKTtcbiAgfVxuXG4gIC8vIFJlcXVpcmVkIGFwcCBjb25maWcga2V5c1xuICBjb25zdCBjb25maWdLZXlzOiBSZWFkb25seUFycmF5PGtleW9mIEZpcmViYXNlT3B0aW9ucz4gPSBbXG4gICAgJ3Byb2plY3RJZCcsXG4gICAgJ2FwaUtleScsXG4gICAgJ2FwcElkJyxcbiAgICAnbWVzc2FnaW5nU2VuZGVySWQnXG4gIF07XG5cbiAgY29uc3QgeyBvcHRpb25zIH0gPSBhcHA7XG4gIGZvciAoY29uc3Qga2V5TmFtZSBvZiBjb25maWdLZXlzKSB7XG4gICAgaWYgKCFvcHRpb25zW2tleU5hbWVdKSB7XG4gICAgICB0aHJvdyBnZXRNaXNzaW5nVmFsdWVFcnJvcihrZXlOYW1lKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFwcE5hbWU6IGFwcC5uYW1lLFxuICAgIHByb2plY3RJZDogb3B0aW9ucy5wcm9qZWN0SWQhLFxuICAgIGFwaUtleTogb3B0aW9ucy5hcGlLZXkhLFxuICAgIGFwcElkOiBvcHRpb25zLmFwcElkISxcbiAgICBzZW5kZXJJZDogb3B0aW9ucy5tZXNzYWdpbmdTZW5kZXJJZCFcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0TWlzc2luZ1ZhbHVlRXJyb3IodmFsdWVOYW1lOiBzdHJpbmcpOiBGaXJlYmFzZUVycm9yIHtcbiAgcmV0dXJuIEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKEVycm9yQ29kZS5NSVNTSU5HX0FQUF9DT05GSUdfVkFMVUVTLCB7XG4gICAgdmFsdWVOYW1lXG4gIH0pO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRmlyZWJhc2VBcHAsIF9GaXJlYmFzZVNlcnZpY2UgfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IE1lc3NhZ2VQYXlsb2FkLCBOZXh0Rm4sIE9ic2VydmVyIH0gZnJvbSAnLi9pbnRlcmZhY2VzL3B1YmxpYy10eXBlcyc7XG5cbmltcG9ydCB7IEZpcmViYXNlQW5hbHl0aWNzSW50ZXJuYWxOYW1lIH0gZnJvbSAnQGZpcmViYXNlL2FuYWx5dGljcy1pbnRlcm9wLXR5cGVzJztcbmltcG9ydCB7IEZpcmViYXNlSW50ZXJuYWxEZXBlbmRlbmNpZXMgfSBmcm9tICcuL2ludGVyZmFjZXMvaW50ZXJuYWwtZGVwZW5kZW5jaWVzJztcbmltcG9ydCB7IExvZ0V2ZW50IH0gZnJvbSAnLi9pbnRlcmZhY2VzL2xvZ2dpbmctdHlwZXMnO1xuaW1wb3J0IHsgUHJvdmlkZXIgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IF9GaXJlYmFzZUluc3RhbGxhdGlvbnNJbnRlcm5hbCB9IGZyb20gJ0BmaXJlYmFzZS9pbnN0YWxsYXRpb25zJztcbmltcG9ydCB7IGV4dHJhY3RBcHBDb25maWcgfSBmcm9tICcuL2hlbHBlcnMvZXh0cmFjdC1hcHAtY29uZmlnJztcblxuZXhwb3J0IGNsYXNzIE1lc3NhZ2luZ1NlcnZpY2UgaW1wbGVtZW50cyBfRmlyZWJhc2VTZXJ2aWNlIHtcbiAgcmVhZG9ubHkgYXBwITogRmlyZWJhc2VBcHA7XG4gIHJlYWRvbmx5IGZpcmViYXNlRGVwZW5kZW5jaWVzITogRmlyZWJhc2VJbnRlcm5hbERlcGVuZGVuY2llcztcblxuICBzd1JlZ2lzdHJhdGlvbj86IFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb247XG4gIHZhcGlkS2V5Pzogc3RyaW5nO1xuICAvLyBsb2dnaW5nIGlzIG9ubHkgZG9uZSB3aXRoIGVuZCB1c2VyIGNvbnNlbnQuIERlZmF1bHQgdG8gZmFsc2UuXG4gIGRlbGl2ZXJ5TWV0cmljc0V4cG9ydGVkVG9CaWdRdWVyeUVuYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBvbkJhY2tncm91bmRNZXNzYWdlSGFuZGxlcjpcbiAgICB8IE5leHRGbjxNZXNzYWdlUGF5bG9hZD5cbiAgICB8IE9ic2VydmVyPE1lc3NhZ2VQYXlsb2FkPlxuICAgIHwgbnVsbCA9IG51bGw7XG5cbiAgb25NZXNzYWdlSGFuZGxlcjogTmV4dEZuPE1lc3NhZ2VQYXlsb2FkPiB8IE9ic2VydmVyPE1lc3NhZ2VQYXlsb2FkPiB8IG51bGwgPVxuICAgIG51bGw7XG5cbiAgbG9nRXZlbnRzOiBMb2dFdmVudFtdID0gW107XG4gIGlzTG9nU2VydmljZVN0YXJ0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEZpcmViYXNlQXBwLFxuICAgIGluc3RhbGxhdGlvbnM6IF9GaXJlYmFzZUluc3RhbGxhdGlvbnNJbnRlcm5hbCxcbiAgICBhbmFseXRpY3NQcm92aWRlcjogUHJvdmlkZXI8RmlyZWJhc2VBbmFseXRpY3NJbnRlcm5hbE5hbWU+XG4gICkge1xuICAgIGNvbnN0IGFwcENvbmZpZyA9IGV4dHJhY3RBcHBDb25maWcoYXBwKTtcblxuICAgIHRoaXMuZmlyZWJhc2VEZXBlbmRlbmNpZXMgPSB7XG4gICAgICBhcHAsXG4gICAgICBhcHBDb25maWcsXG4gICAgICBpbnN0YWxsYXRpb25zLFxuICAgICAgYW5hbHl0aWNzUHJvdmlkZXJcbiAgICB9O1xuICB9XG5cbiAgX2RlbGV0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IERFRkFVTFRfU1dfUEFUSCwgREVGQVVMVF9TV19TQ09QRSB9IGZyb20gJy4uL3V0aWwvY29uc3RhbnRzJztcbmltcG9ydCB7IEVSUk9SX0ZBQ1RPUlksIEVycm9yQ29kZSB9IGZyb20gJy4uL3V0aWwvZXJyb3JzJztcblxuaW1wb3J0IHsgTWVzc2FnaW5nU2VydmljZSB9IGZyb20gJy4uL21lc3NhZ2luZy1zZXJ2aWNlJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyRGVmYXVsdFN3KFxuICBtZXNzYWdpbmc6IE1lc3NhZ2luZ1NlcnZpY2Vcbik6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIG1lc3NhZ2luZy5zd1JlZ2lzdHJhdGlvbiA9IGF3YWl0IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKFxuICAgICAgREVGQVVMVF9TV19QQVRILFxuICAgICAge1xuICAgICAgICBzY29wZTogREVGQVVMVF9TV19TQ09QRVxuICAgICAgfVxuICAgICk7XG5cbiAgICAvLyBUaGUgdGltaW5nIHdoZW4gYnJvd3NlciB1cGRhdGVzIHN3IHdoZW4gc3cgaGFzIGFuIHVwZGF0ZSBpcyB1bnJlbGlhYmxlIGZyb20gZXhwZXJpbWVudC4gSXRcbiAgICAvLyBsZWFkcyB0byB2ZXJzaW9uIGNvbmZsaWN0IHdoZW4gdGhlIFNESyB1cGdyYWRlcyB0byBhIG5ld2VyIHZlcnNpb24gaW4gdGhlIG1haW4gcGFnZSwgYnV0IHN3XG4gICAgLy8gaXMgc3R1Y2sgd2l0aCB0aGUgb2xkIHZlcnNpb24uIEZvciBleGFtcGxlLFxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzI1OTAgVGhlIGZvbGxvd2luZyBsaW5lIHJlbGlhYmx5IHVwZGF0ZXNcbiAgICAvLyBzdyBpZiB0aGVyZSB3YXMgYW4gdXBkYXRlLlxuICAgIG1lc3NhZ2luZy5zd1JlZ2lzdHJhdGlvbi51cGRhdGUoKS5jYXRjaCgoKSA9PiB7XG4gICAgICAvKiBpdCBpcyBub24gYmxvY2tpbmcgYW5kIHdlIGRvbid0IGNhcmUgaWYgaXQgZmFpbGVkICovXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShFcnJvckNvZGUuRkFJTEVEX0RFRkFVTFRfUkVHSVNUUkFUSU9OLCB7XG4gICAgICBicm93c2VyRXJyb3JNZXNzYWdlOiBlLm1lc3NhZ2VcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRVJST1JfRkFDVE9SWSwgRXJyb3JDb2RlIH0gZnJvbSAnLi4vdXRpbC9lcnJvcnMnO1xuXG5pbXBvcnQgeyBNZXNzYWdpbmdTZXJ2aWNlIH0gZnJvbSAnLi4vbWVzc2FnaW5nLXNlcnZpY2UnO1xuaW1wb3J0IHsgcmVnaXN0ZXJEZWZhdWx0U3cgfSBmcm9tICcuL3JlZ2lzdGVyRGVmYXVsdFN3JztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVN3UmVnKFxuICBtZXNzYWdpbmc6IE1lc3NhZ2luZ1NlcnZpY2UsXG4gIHN3UmVnaXN0cmF0aW9uPzogU2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbiB8IHVuZGVmaW5lZFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmICghc3dSZWdpc3RyYXRpb24gJiYgIW1lc3NhZ2luZy5zd1JlZ2lzdHJhdGlvbikge1xuICAgIGF3YWl0IHJlZ2lzdGVyRGVmYXVsdFN3KG1lc3NhZ2luZyk7XG4gIH1cblxuICBpZiAoIXN3UmVnaXN0cmF0aW9uICYmICEhbWVzc2FnaW5nLnN3UmVnaXN0cmF0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCEoc3dSZWdpc3RyYXRpb24gaW5zdGFuY2VvZiBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uKSkge1xuICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKEVycm9yQ29kZS5JTlZBTElEX1NXX1JFR0lTVFJBVElPTik7XG4gIH1cblxuICBtZXNzYWdpbmcuc3dSZWdpc3RyYXRpb24gPSBzd1JlZ2lzdHJhdGlvbjtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IERFRkFVTFRfVkFQSURfS0VZIH0gZnJvbSAnLi4vdXRpbC9jb25zdGFudHMnO1xuaW1wb3J0IHsgTWVzc2FnaW5nU2VydmljZSB9IGZyb20gJy4uL21lc3NhZ2luZy1zZXJ2aWNlJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVZhcGlkS2V5KFxuICBtZXNzYWdpbmc6IE1lc3NhZ2luZ1NlcnZpY2UsXG4gIHZhcGlkS2V5Pzogc3RyaW5nIHwgdW5kZWZpbmVkXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgaWYgKCEhdmFwaWRLZXkpIHtcbiAgICBtZXNzYWdpbmcudmFwaWRLZXkgPSB2YXBpZEtleTtcbiAgfSBlbHNlIGlmICghbWVzc2FnaW5nLnZhcGlkS2V5KSB7XG4gICAgbWVzc2FnaW5nLnZhcGlkS2V5ID0gREVGQVVMVF9WQVBJRF9LRVk7XG4gIH1cbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEVSUk9SX0ZBQ1RPUlksIEVycm9yQ29kZSB9IGZyb20gJy4uL3V0aWwvZXJyb3JzJztcblxuaW1wb3J0IHsgTWVzc2FnaW5nU2VydmljZSB9IGZyb20gJy4uL21lc3NhZ2luZy1zZXJ2aWNlJztcbmltcG9ydCB7IGdldFRva2VuSW50ZXJuYWwgfSBmcm9tICcuLi9pbnRlcm5hbHMvdG9rZW4tbWFuYWdlcic7XG5pbXBvcnQgeyB1cGRhdGVTd1JlZyB9IGZyb20gJy4uL2hlbHBlcnMvdXBkYXRlU3dSZWcnO1xuaW1wb3J0IHsgdXBkYXRlVmFwaWRLZXkgfSBmcm9tICcuLi9oZWxwZXJzL3VwZGF0ZVZhcGlkS2V5JztcbmltcG9ydCB7IEdldFRva2VuT3B0aW9ucyB9IGZyb20gJy4uL2ludGVyZmFjZXMvcHVibGljLXR5cGVzJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRva2VuKFxuICBtZXNzYWdpbmc6IE1lc3NhZ2luZ1NlcnZpY2UsXG4gIG9wdGlvbnM/OiBHZXRUb2tlbk9wdGlvbnNcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGlmICghbmF2aWdhdG9yKSB7XG4gICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoRXJyb3JDb2RlLkFWQUlMQUJMRV9JTl9XSU5ET1cpO1xuICB9XG5cbiAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uID09PSAnZGVmYXVsdCcpIHtcbiAgICBhd2FpdCBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKTtcbiAgfVxuXG4gIGlmIChOb3RpZmljYXRpb24ucGVybWlzc2lvbiAhPT0gJ2dyYW50ZWQnKSB7XG4gICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoRXJyb3JDb2RlLlBFUk1JU1NJT05fQkxPQ0tFRCk7XG4gIH1cblxuICBhd2FpdCB1cGRhdGVWYXBpZEtleShtZXNzYWdpbmcsIG9wdGlvbnM/LnZhcGlkS2V5KTtcbiAgYXdhaXQgdXBkYXRlU3dSZWcobWVzc2FnaW5nLCBvcHRpb25zPy5zZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uKTtcblxuICByZXR1cm4gZ2V0VG9rZW5JbnRlcm5hbChtZXNzYWdpbmcpO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgQ09OU09MRV9DQU1QQUlHTl9JRCxcbiAgQ09OU09MRV9DQU1QQUlHTl9OQU1FLFxuICBDT05TT0xFX0NBTVBBSUdOX1RJTUVcbn0gZnJvbSAnLi4vdXRpbC9jb25zdGFudHMnO1xuaW1wb3J0IHtcbiAgQ29uc29sZU1lc3NhZ2VEYXRhLFxuICBNZXNzYWdlVHlwZVxufSBmcm9tICcuLi9pbnRlcmZhY2VzL2ludGVybmFsLW1lc3NhZ2UtcGF5bG9hZCc7XG5cbmltcG9ydCB7IE1lc3NhZ2luZ1NlcnZpY2UgfSBmcm9tICcuLi9tZXNzYWdpbmctc2VydmljZSc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dUb1NjaW9uKFxuICBtZXNzYWdpbmc6IE1lc3NhZ2luZ1NlcnZpY2UsXG4gIG1lc3NhZ2VUeXBlOiBNZXNzYWdlVHlwZSxcbiAgZGF0YTogQ29uc29sZU1lc3NhZ2VEYXRhXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgZXZlbnRUeXBlID0gZ2V0RXZlbnRUeXBlKG1lc3NhZ2VUeXBlKTtcbiAgY29uc3QgYW5hbHl0aWNzID1cbiAgICBhd2FpdCBtZXNzYWdpbmcuZmlyZWJhc2VEZXBlbmRlbmNpZXMuYW5hbHl0aWNzUHJvdmlkZXIuZ2V0KCk7XG4gIGFuYWx5dGljcy5sb2dFdmVudChldmVudFR5cGUsIHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbiAgICBtZXNzYWdlX2lkOiBkYXRhW0NPTlNPTEVfQ0FNUEFJR05fSURdLFxuICAgIG1lc3NhZ2VfbmFtZTogZGF0YVtDT05TT0xFX0NBTVBBSUdOX05BTUVdLFxuICAgIG1lc3NhZ2VfdGltZTogZGF0YVtDT05TT0xFX0NBTVBBSUdOX1RJTUVdLFxuICAgIG1lc3NhZ2VfZGV2aWNlX3RpbWU6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApXG4gICAgLyogZXNsaW50LWVuYWJsZSBjYW1lbGNhc2UgKi9cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldEV2ZW50VHlwZShtZXNzYWdlVHlwZTogTWVzc2FnZVR5cGUpOiBzdHJpbmcge1xuICBzd2l0Y2ggKG1lc3NhZ2VUeXBlKSB7XG4gICAgY2FzZSBNZXNzYWdlVHlwZS5OT1RJRklDQVRJT05fQ0xJQ0tFRDpcbiAgICAgIHJldHVybiAnbm90aWZpY2F0aW9uX29wZW4nO1xuICAgIGNhc2UgTWVzc2FnZVR5cGUuUFVTSF9SRUNFSVZFRDpcbiAgICAgIHJldHVybiAnbm90aWZpY2F0aW9uX2ZvcmVncm91bmQnO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgTWVzc2FnZVBheWxvYWRJbnRlcm5hbCxcbiAgTWVzc2FnZVR5cGVcbn0gZnJvbSAnLi4vaW50ZXJmYWNlcy9pbnRlcm5hbC1tZXNzYWdlLXBheWxvYWQnO1xuXG5pbXBvcnQgeyBDT05TT0xFX0NBTVBBSUdOX0FOQUxZVElDU19FTkFCTEVEIH0gZnJvbSAnLi4vdXRpbC9jb25zdGFudHMnO1xuaW1wb3J0IHsgTWVzc2FnaW5nU2VydmljZSB9IGZyb20gJy4uL21lc3NhZ2luZy1zZXJ2aWNlJztcbmltcG9ydCB7IGV4dGVybmFsaXplUGF5bG9hZCB9IGZyb20gJy4uL2hlbHBlcnMvZXh0ZXJuYWxpemVQYXlsb2FkJztcbmltcG9ydCB7IGlzQ29uc29sZU1lc3NhZ2UgfSBmcm9tICcuLi9oZWxwZXJzL2lzLWNvbnNvbGUtbWVzc2FnZSc7XG5pbXBvcnQgeyBsb2dUb1NjaW9uIH0gZnJvbSAnLi4vaGVscGVycy9sb2dUb1NjaW9uJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1lc3NhZ2VFdmVudExpc3RlbmVyKFxuICBtZXNzYWdpbmc6IE1lc3NhZ2luZ1NlcnZpY2UsXG4gIGV2ZW50OiBNZXNzYWdlRXZlbnRcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBpbnRlcm5hbFBheWxvYWQgPSBldmVudC5kYXRhIGFzIE1lc3NhZ2VQYXlsb2FkSW50ZXJuYWw7XG5cbiAgaWYgKCFpbnRlcm5hbFBheWxvYWQuaXNGaXJlYmFzZU1lc3NhZ2luZykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChcbiAgICBtZXNzYWdpbmcub25NZXNzYWdlSGFuZGxlciAmJlxuICAgIGludGVybmFsUGF5bG9hZC5tZXNzYWdlVHlwZSA9PT0gTWVzc2FnZVR5cGUuUFVTSF9SRUNFSVZFRFxuICApIHtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2luZy5vbk1lc3NhZ2VIYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBtZXNzYWdpbmcub25NZXNzYWdlSGFuZGxlcihleHRlcm5hbGl6ZVBheWxvYWQoaW50ZXJuYWxQYXlsb2FkKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lc3NhZ2luZy5vbk1lc3NhZ2VIYW5kbGVyLm5leHQoZXh0ZXJuYWxpemVQYXlsb2FkKGludGVybmFsUGF5bG9hZCkpO1xuICAgIH1cbiAgfVxuXG4gIC8vIExvZyB0byBTY2lvbiBpZiBhcHBsaWNhYmxlXG4gIGNvbnN0IGRhdGFQYXlsb2FkID0gaW50ZXJuYWxQYXlsb2FkLmRhdGE7XG4gIGlmIChcbiAgICBpc0NvbnNvbGVNZXNzYWdlKGRhdGFQYXlsb2FkKSAmJlxuICAgIGRhdGFQYXlsb2FkW0NPTlNPTEVfQ0FNUEFJR05fQU5BTFlUSUNTX0VOQUJMRURdID09PSAnMSdcbiAgKSB7XG4gICAgYXdhaXQgbG9nVG9TY2lvbihtZXNzYWdpbmcsIGludGVybmFsUGF5bG9hZC5tZXNzYWdlVHlwZSEsIGRhdGFQYXlsb2FkKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBDb21wb25lbnRDb250YWluZXIsXG4gIENvbXBvbmVudFR5cGUsXG4gIEluc3RhbmNlRmFjdG9yeVxufSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7XG4gIG9uTm90aWZpY2F0aW9uQ2xpY2ssXG4gIG9uUHVzaCxcbiAgb25TdWJDaGFuZ2Vcbn0gZnJvbSAnLi4vbGlzdGVuZXJzL3N3LWxpc3RlbmVycyc7XG5cbmltcG9ydCB7IEdldFRva2VuT3B0aW9ucyB9IGZyb20gJy4uL2ludGVyZmFjZXMvcHVibGljLXR5cGVzJztcbmltcG9ydCB7IE1lc3NhZ2luZ0ludGVybmFsIH0gZnJvbSAnQGZpcmViYXNlL21lc3NhZ2luZy1pbnRlcm9wLXR5cGVzJztcbmltcG9ydCB7IE1lc3NhZ2luZ1NlcnZpY2UgfSBmcm9tICcuLi9tZXNzYWdpbmctc2VydmljZSc7XG5pbXBvcnQgeyBTZXJ2aWNlV29ya2VyR2xvYmFsU2NvcGUgfSBmcm9tICcuLi91dGlsL3N3LXR5cGVzJztcbmltcG9ydCB7IF9yZWdpc3RlckNvbXBvbmVudCwgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJy4uL2FwaS9nZXRUb2tlbic7XG5pbXBvcnQgeyBtZXNzYWdlRXZlbnRMaXN0ZW5lciB9IGZyb20gJy4uL2xpc3RlbmVycy93aW5kb3ctbGlzdGVuZXInO1xuXG5pbXBvcnQgeyBuYW1lLCB2ZXJzaW9uIH0gZnJvbSAnLi4vLi4vcGFja2FnZS5qc29uJztcblxuY29uc3QgV2luZG93TWVzc2FnaW5nRmFjdG9yeTogSW5zdGFuY2VGYWN0b3J5PCdtZXNzYWdpbmcnPiA9IChcbiAgY29udGFpbmVyOiBDb21wb25lbnRDb250YWluZXJcbikgPT4ge1xuICBjb25zdCBtZXNzYWdpbmcgPSBuZXcgTWVzc2FnaW5nU2VydmljZShcbiAgICBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpLFxuICAgIGNvbnRhaW5lci5nZXRQcm92aWRlcignaW5zdGFsbGF0aW9ucy1pbnRlcm5hbCcpLmdldEltbWVkaWF0ZSgpLFxuICAgIGNvbnRhaW5lci5nZXRQcm92aWRlcignYW5hbHl0aWNzLWludGVybmFsJylcbiAgKTtcblxuICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZSA9PlxuICAgIG1lc3NhZ2VFdmVudExpc3RlbmVyKG1lc3NhZ2luZyBhcyBNZXNzYWdpbmdTZXJ2aWNlLCBlKVxuICApO1xuXG4gIHJldHVybiBtZXNzYWdpbmc7XG59O1xuXG5jb25zdCBXaW5kb3dNZXNzYWdpbmdJbnRlcm5hbEZhY3Rvcnk6IEluc3RhbmNlRmFjdG9yeTwnbWVzc2FnaW5nLWludGVybmFsJz4gPSAoXG4gIGNvbnRhaW5lcjogQ29tcG9uZW50Q29udGFpbmVyXG4pID0+IHtcbiAgY29uc3QgbWVzc2FnaW5nID0gY29udGFpbmVyXG4gICAgLmdldFByb3ZpZGVyKCdtZXNzYWdpbmcnKVxuICAgIC5nZXRJbW1lZGlhdGUoKSBhcyBNZXNzYWdpbmdTZXJ2aWNlO1xuXG4gIGNvbnN0IG1lc3NhZ2luZ0ludGVybmFsOiBNZXNzYWdpbmdJbnRlcm5hbCA9IHtcbiAgICBnZXRUb2tlbjogKG9wdGlvbnM/OiBHZXRUb2tlbk9wdGlvbnMpID0+IGdldFRva2VuKG1lc3NhZ2luZywgb3B0aW9ucylcbiAgfTtcblxuICByZXR1cm4gbWVzc2FnaW5nSW50ZXJuYWw7XG59O1xuXG5kZWNsYXJlIGNvbnN0IHNlbGY6IFNlcnZpY2VXb3JrZXJHbG9iYWxTY29wZTtcbmNvbnN0IFN3TWVzc2FnaW5nRmFjdG9yeTogSW5zdGFuY2VGYWN0b3J5PCdtZXNzYWdpbmcnPiA9IChcbiAgY29udGFpbmVyOiBDb21wb25lbnRDb250YWluZXJcbikgPT4ge1xuICBjb25zdCBtZXNzYWdpbmcgPSBuZXcgTWVzc2FnaW5nU2VydmljZShcbiAgICBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpLFxuICAgIGNvbnRhaW5lci5nZXRQcm92aWRlcignaW5zdGFsbGF0aW9ucy1pbnRlcm5hbCcpLmdldEltbWVkaWF0ZSgpLFxuICAgIGNvbnRhaW5lci5nZXRQcm92aWRlcignYW5hbHl0aWNzLWludGVybmFsJylcbiAgKTtcblxuICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ3B1c2gnLCBlID0+IHtcbiAgICBlLndhaXRVbnRpbChvblB1c2goZSwgbWVzc2FnaW5nIGFzIE1lc3NhZ2luZ1NlcnZpY2UpKTtcbiAgfSk7XG4gIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcigncHVzaHN1YnNjcmlwdGlvbmNoYW5nZScsIGUgPT4ge1xuICAgIGUud2FpdFVudGlsKG9uU3ViQ2hhbmdlKGUsIG1lc3NhZ2luZyBhcyBNZXNzYWdpbmdTZXJ2aWNlKSk7XG4gIH0pO1xuICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ25vdGlmaWNhdGlvbmNsaWNrJywgZSA9PiB7XG4gICAgZS53YWl0VW50aWwob25Ob3RpZmljYXRpb25DbGljayhlKSk7XG4gIH0pO1xuXG4gIHJldHVybiBtZXNzYWdpbmc7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJNZXNzYWdpbmdJbldpbmRvdygpOiB2b2lkIHtcbiAgX3JlZ2lzdGVyQ29tcG9uZW50KFxuICAgIG5ldyBDb21wb25lbnQoJ21lc3NhZ2luZycsIFdpbmRvd01lc3NhZ2luZ0ZhY3RvcnksIENvbXBvbmVudFR5cGUuUFVCTElDKVxuICApO1xuXG4gIF9yZWdpc3RlckNvbXBvbmVudChcbiAgICBuZXcgQ29tcG9uZW50KFxuICAgICAgJ21lc3NhZ2luZy1pbnRlcm5hbCcsXG4gICAgICBXaW5kb3dNZXNzYWdpbmdJbnRlcm5hbEZhY3RvcnksXG4gICAgICBDb21wb25lbnRUeXBlLlBSSVZBVEVcbiAgICApXG4gICk7XG5cbiAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24pO1xuICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxuICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ19fQlVJTERfVEFSR0VUX18nKTtcbn1cblxuLyoqXG4gKiBUaGUgbWVzc2FnaW5nIGluc3RhbmNlIHJlZ2lzdGVyZWQgaW4gc3cgaXMgbmFtZWQgZGlmZmVyZW50bHkgdGhhbiB0aGF0IG9mIGluIGNsaWVudC4gVGhpcyBpc1xuICogYmVjYXVzZSBib3RoIGByZWdpc3Rlck1lc3NhZ2luZ0luV2luZG93YCBhbmQgYHJlZ2lzdGVyTWVzc2FnaW5nSW5Td2Agd291bGQgYmUgY2FsbGVkIGluXG4gKiBgbWVzc2FnaW5nLWNvbXBhdGAgYW5kIGNvbXBvbmVudCB3aXRoIHRoZSBzYW1lIG5hbWUgY2FuIG9ubHkgYmUgcmVnaXN0ZXJlZCBvbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJNZXNzYWdpbmdJblN3KCk6IHZvaWQge1xuICBfcmVnaXN0ZXJDb21wb25lbnQoXG4gICAgbmV3IENvbXBvbmVudCgnbWVzc2FnaW5nLXN3JywgU3dNZXNzYWdpbmdGYWN0b3J5LCBDb21wb25lbnRUeXBlLlBVQkxJQylcbiAgKTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIGFyZUNvb2tpZXNFbmFibGVkLFxuICBpc0luZGV4ZWREQkF2YWlsYWJsZSxcbiAgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZVxufSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGFsbCByZXF1aXJlZCBBUElzIGV4aXN0IGluIHRoZSBicm93c2VyLlxuICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBib29sZWFuLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGlzV2luZG93U3VwcG9ydGVkKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAvLyBmaXJlYmFzZS1qcy1zZGsvaXNzdWVzLzIzOTMgcmV2ZWFscyB0aGF0IGlkYiNvcGVuIGluIFNhZmFyaSBpZnJhbWUgYW5kIEZpcmVmb3ggcHJpdmF0ZSBicm93c2luZ1xuICAvLyBtaWdodCBiZSBwcm9oaWJpdGVkIHRvIHJ1bi4gSW4gdGhlc2UgY29udGV4dHMsIGFuIGVycm9yIHdvdWxkIGJlIHRocm93biBkdXJpbmcgdGhlIG1lc3NhZ2luZ1xuICAvLyBpbnN0YW50aWF0aW5nIHBoYXNlLCBpbmZvcm1pbmcgdGhlIGRldmVsb3BlcnMgdG8gaW1wb3J0L2NhbGwgaXNTdXBwb3J0ZWQgZm9yIHNwZWNpYWwgaGFuZGxpbmcuXG4gIHJldHVybiAoXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICBpc0luZGV4ZWREQkF2YWlsYWJsZSgpICYmXG4gICAgKGF3YWl0IHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKSkgJiZcbiAgICBhcmVDb29raWVzRW5hYmxlZCgpICYmXG4gICAgJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvciAmJlxuICAgICdQdXNoTWFuYWdlcicgaW4gd2luZG93ICYmXG4gICAgJ05vdGlmaWNhdGlvbicgaW4gd2luZG93ICYmXG4gICAgJ2ZldGNoJyBpbiB3aW5kb3cgJiZcbiAgICBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSgnc2hvd05vdGlmaWNhdGlvbicpICYmXG4gICAgUHVzaFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJ2dldEtleScpXG4gICk7XG59XG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgYWxsIHJlcXVpcmVkIEFQSXMgZXhpc3Qgd2l0aGluIFNXIENvbnRleHRcbiAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgYm9vbGVhbi5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpc1N3U3VwcG9ydGVkKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAvLyBmaXJlYmFzZS1qcy1zZGsvaXNzdWVzLzIzOTMgcmV2ZWFscyB0aGF0IGlkYiNvcGVuIGluIFNhZmFyaSBpZnJhbWUgYW5kIEZpcmVmb3ggcHJpdmF0ZSBicm93c2luZ1xuICAvLyBtaWdodCBiZSBwcm9oaWJpdGVkIHRvIHJ1bi4gSW4gdGhlc2UgY29udGV4dHMsIGFuIGVycm9yIHdvdWxkIGJlIHRocm93biBkdXJpbmcgdGhlIG1lc3NhZ2luZ1xuICAvLyBpbnN0YW50aWF0aW5nIHBoYXNlLCBpbmZvcm1pbmcgdGhlIGRldmVsb3BlcnMgdG8gaW1wb3J0L2NhbGwgaXNTdXBwb3J0ZWQgZm9yIHNwZWNpYWwgaGFuZGxpbmcuXG4gIHJldHVybiAoXG4gICAgaXNJbmRleGVkREJBdmFpbGFibGUoKSAmJlxuICAgIChhd2FpdCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKCkpICYmXG4gICAgJ1B1c2hNYW5hZ2VyJyBpbiBzZWxmICYmXG4gICAgJ05vdGlmaWNhdGlvbicgaW4gc2VsZiAmJlxuICAgIFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24ucHJvdG90eXBlLmhhc093blByb3BlcnR5KCdzaG93Tm90aWZpY2F0aW9uJykgJiZcbiAgICBQdXNoU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSgnZ2V0S2V5JylcbiAgKTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEVSUk9SX0ZBQ1RPUlksIEVycm9yQ29kZSB9IGZyb20gJy4uL3V0aWwvZXJyb3JzJztcblxuaW1wb3J0IHsgTWVzc2FnaW5nU2VydmljZSB9IGZyb20gJy4uL21lc3NhZ2luZy1zZXJ2aWNlJztcbmltcG9ydCB7IGRlbGV0ZVRva2VuSW50ZXJuYWwgfSBmcm9tICcuLi9pbnRlcm5hbHMvdG9rZW4tbWFuYWdlcic7XG5pbXBvcnQgeyByZWdpc3RlckRlZmF1bHRTdyB9IGZyb20gJy4uL2hlbHBlcnMvcmVnaXN0ZXJEZWZhdWx0U3cnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlVG9rZW4oXG4gIG1lc3NhZ2luZzogTWVzc2FnaW5nU2VydmljZVxuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIGlmICghbmF2aWdhdG9yKSB7XG4gICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoRXJyb3JDb2RlLkFWQUlMQUJMRV9JTl9XSU5ET1cpO1xuICB9XG5cbiAgaWYgKCFtZXNzYWdpbmcuc3dSZWdpc3RyYXRpb24pIHtcbiAgICBhd2FpdCByZWdpc3RlckRlZmF1bHRTdyhtZXNzYWdpbmcpO1xuICB9XG5cbiAgcmV0dXJuIGRlbGV0ZVRva2VuSW50ZXJuYWwobWVzc2FnaW5nKTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEVSUk9SX0ZBQ1RPUlksIEVycm9yQ29kZSB9IGZyb20gJy4uL3V0aWwvZXJyb3JzJztcblxuaW1wb3J0IHtcbiAgTWVzc2FnZVBheWxvYWQsXG4gIE5leHRGbixcbiAgT2JzZXJ2ZXIsXG4gIFVuc3Vic2NyaWJlXG59IGZyb20gJy4uL2ludGVyZmFjZXMvcHVibGljLXR5cGVzJztcbmltcG9ydCB7IE1lc3NhZ2luZ1NlcnZpY2UgfSBmcm9tICcuLi9tZXNzYWdpbmctc2VydmljZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBvbk1lc3NhZ2UoXG4gIG1lc3NhZ2luZzogTWVzc2FnaW5nU2VydmljZSxcbiAgbmV4dE9yT2JzZXJ2ZXI6IE5leHRGbjxNZXNzYWdlUGF5bG9hZD4gfCBPYnNlcnZlcjxNZXNzYWdlUGF5bG9hZD5cbik6IFVuc3Vic2NyaWJlIHtcbiAgaWYgKCFuYXZpZ2F0b3IpIHtcbiAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShFcnJvckNvZGUuQVZBSUxBQkxFX0lOX1dJTkRPVyk7XG4gIH1cblxuICBtZXNzYWdpbmcub25NZXNzYWdlSGFuZGxlciA9IG5leHRPck9ic2VydmVyO1xuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgbWVzc2FnaW5nLm9uTWVzc2FnZUhhbmRsZXIgPSBudWxsO1xuICB9O1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRVJST1JfRkFDVE9SWSwgRXJyb3JDb2RlIH0gZnJvbSAnLi91dGlsL2Vycm9ycyc7XG5pbXBvcnQgeyBGaXJlYmFzZUFwcCwgX2dldFByb3ZpZGVyLCBnZXRBcHAgfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7XG4gIEdldFRva2VuT3B0aW9ucyxcbiAgTWVzc2FnZVBheWxvYWQsXG4gIE1lc3NhZ2luZ1xufSBmcm9tICcuL2ludGVyZmFjZXMvcHVibGljLXR5cGVzJztcbmltcG9ydCB7XG4gIE5leHRGbixcbiAgT2JzZXJ2ZXIsXG4gIFVuc3Vic2NyaWJlLFxuICBnZXRNb2R1bGFySW5zdGFuY2Vcbn0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgaXNTd1N1cHBvcnRlZCwgaXNXaW5kb3dTdXBwb3J0ZWQgfSBmcm9tICcuL2FwaS9pc1N1cHBvcnRlZCc7XG5cbmltcG9ydCB7IE1lc3NhZ2luZ1NlcnZpY2UgfSBmcm9tICcuL21lc3NhZ2luZy1zZXJ2aWNlJztcbmltcG9ydCB7IGRlbGV0ZVRva2VuIGFzIF9kZWxldGVUb2tlbiB9IGZyb20gJy4vYXBpL2RlbGV0ZVRva2VuJztcbmltcG9ydCB7IGdldFRva2VuIGFzIF9nZXRUb2tlbiB9IGZyb20gJy4vYXBpL2dldFRva2VuJztcbmltcG9ydCB7IG9uQmFja2dyb3VuZE1lc3NhZ2UgYXMgX29uQmFja2dyb3VuZE1lc3NhZ2UgfSBmcm9tICcuL2FwaS9vbkJhY2tncm91bmRNZXNzYWdlJztcbmltcG9ydCB7IG9uTWVzc2FnZSBhcyBfb25NZXNzYWdlIH0gZnJvbSAnLi9hcGkvb25NZXNzYWdlJztcbmltcG9ydCB7IF9zZXREZWxpdmVyeU1ldHJpY3NFeHBvcnRlZFRvQmlnUXVlcnlFbmFibGVkIH0gZnJvbSAnLi9hcGkvc2V0RGVsaXZlcnlNZXRyaWNzRXhwb3J0ZWRUb0JpZ1F1ZXJ5RW5hYmxlZCc7XG5cbi8qKlxuICogUmV0cmlldmVzIGEgRmlyZWJhc2UgQ2xvdWQgTWVzc2FnaW5nIGluc3RhbmNlLlxuICpcbiAqIEByZXR1cm5zIFRoZSBGaXJlYmFzZSBDbG91ZCBNZXNzYWdpbmcgaW5zdGFuY2UgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZCBmaXJlYmFzZSBhcHAuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWVzc2FnaW5nSW5XaW5kb3coYXBwOiBGaXJlYmFzZUFwcCA9IGdldEFwcCgpKTogTWVzc2FnaW5nIHtcbiAgLy8gQ29uc2Npb3VzIGRlY2lzaW9uIHRvIG1ha2UgdGhpcyBhc3luYyBjaGVjayBub24tYmxvY2tpbmcgZHVyaW5nIHRoZSBtZXNzYWdpbmcgaW5zdGFuY2VcbiAgLy8gaW5pdGlhbGl6YXRpb24gcGhhc2UgZm9yIHBlcmZvcm1hbmNlIGNvbnNpZGVyYXRpb24uIEFuIGVycm9yIHdvdWxkIGJlIHRocm93biBsYXR0ZXIgZm9yXG4gIC8vIGRldmVsb3BlcidzIGluZm9ybWF0aW9uLiBEZXZlbG9wZXJzIGNhbiB0aGVuIGNob29zZSB0byBpbXBvcnQgYW5kIGNhbGwgYGlzU3VwcG9ydGVkYCBmb3JcbiAgLy8gc3BlY2lhbCBoYW5kbGluZy5cbiAgaXNXaW5kb3dTdXBwb3J0ZWQoKS50aGVuKFxuICAgIGlzU3VwcG9ydGVkID0+IHtcbiAgICAgIC8vIElmIGBpc1dpbmRvd1N1cHBvcnRlZCgpYCByZXNvbHZlZCwgYnV0IHJldHVybmVkIGZhbHNlLlxuICAgICAgaWYgKCFpc1N1cHBvcnRlZCkge1xuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShFcnJvckNvZGUuVU5TVVBQT1JURURfQlJPV1NFUik7XG4gICAgICB9XG4gICAgfSxcbiAgICBfID0+IHtcbiAgICAgIC8vIElmIGBpc1dpbmRvd1N1cHBvcnRlZCgpYCByZWplY3RlZC5cbiAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKEVycm9yQ29kZS5JTkRFWEVEX0RCX1VOU1VQUE9SVEVEKTtcbiAgICB9XG4gICk7XG4gIHJldHVybiBfZ2V0UHJvdmlkZXIoZ2V0TW9kdWxhckluc3RhbmNlKGFwcCksICdtZXNzYWdpbmcnKS5nZXRJbW1lZGlhdGUoKTtcbn1cblxuLyoqXG4gKiBSZXRyaWV2ZXMgYSBGaXJlYmFzZSBDbG91ZCBNZXNzYWdpbmcgaW5zdGFuY2UuXG4gKlxuICogQHJldHVybnMgVGhlIEZpcmViYXNlIENsb3VkIE1lc3NhZ2luZyBpbnN0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhlIHByb3ZpZGVkIGZpcmViYXNlIGFwcC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNZXNzYWdpbmdJblN3KGFwcDogRmlyZWJhc2VBcHAgPSBnZXRBcHAoKSk6IE1lc3NhZ2luZyB7XG4gIC8vIENvbnNjaW91cyBkZWNpc2lvbiB0byBtYWtlIHRoaXMgYXN5bmMgY2hlY2sgbm9uLWJsb2NraW5nIGR1cmluZyB0aGUgbWVzc2FnaW5nIGluc3RhbmNlXG4gIC8vIGluaXRpYWxpemF0aW9uIHBoYXNlIGZvciBwZXJmb3JtYW5jZSBjb25zaWRlcmF0aW9uLiBBbiBlcnJvciB3b3VsZCBiZSB0aHJvd24gbGF0dGVyIGZvclxuICAvLyBkZXZlbG9wZXIncyBpbmZvcm1hdGlvbi4gRGV2ZWxvcGVycyBjYW4gdGhlbiBjaG9vc2UgdG8gaW1wb3J0IGFuZCBjYWxsIGBpc1N1cHBvcnRlZGAgZm9yXG4gIC8vIHNwZWNpYWwgaGFuZGxpbmcuXG4gIGlzU3dTdXBwb3J0ZWQoKS50aGVuKFxuICAgIGlzU3VwcG9ydGVkID0+IHtcbiAgICAgIC8vIElmIGBpc1N3U3VwcG9ydGVkKClgIHJlc29sdmVkLCBidXQgcmV0dXJuZWQgZmFsc2UuXG4gICAgICBpZiAoIWlzU3VwcG9ydGVkKSB7XG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKEVycm9yQ29kZS5VTlNVUFBPUlRFRF9CUk9XU0VSKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIF8gPT4ge1xuICAgICAgLy8gSWYgYGlzU3dTdXBwb3J0ZWQoKWAgcmVqZWN0ZWQuXG4gICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShFcnJvckNvZGUuSU5ERVhFRF9EQl9VTlNVUFBPUlRFRCk7XG4gICAgfVxuICApO1xuICByZXR1cm4gX2dldFByb3ZpZGVyKGdldE1vZHVsYXJJbnN0YW5jZShhcHApLCAnbWVzc2FnaW5nLXN3JykuZ2V0SW1tZWRpYXRlKCk7XG59XG5cbi8qKlxuICogU3Vic2NyaWJlcyB0aGUge0BsaW5rIE1lc3NhZ2luZ30gaW5zdGFuY2UgdG8gcHVzaCBub3RpZmljYXRpb25zLiBSZXR1cm5zIGFuIEZpcmViYXNlIENsb3VkXG4gKiBNZXNzYWdpbmcgcmVnaXN0cmF0aW9uIHRva2VuIHRoYXQgY2FuIGJlIHVzZWQgdG8gc2VuZCBwdXNoIG1lc3NhZ2VzIHRvIHRoYXQge0BsaW5rIE1lc3NhZ2luZ31cbiAqIGluc3RhbmNlLlxuICpcbiAqIElmIGEgbm90aWZpY2F0aW9uIHBlcm1pc3Npb24gaXNuJ3QgYWxyZWFkeSBncmFudGVkLCB0aGlzIG1ldGhvZCBhc2tzIHRoZSB1c2VyIGZvciBwZXJtaXNzaW9uLiBUaGVcbiAqIHJldHVybmVkIHByb21pc2UgcmVqZWN0cyBpZiB0aGUgdXNlciBkb2VzIG5vdCBhbGxvdyB0aGUgYXBwIHRvIHNob3cgbm90aWZpY2F0aW9ucy5cbiAqXG4gKiBAcGFyYW0gbWVzc2FnaW5nIC0gVGhlIHtAbGluayBNZXNzYWdpbmd9IGluc3RhbmNlLlxuICogQHBhcmFtIG9wdGlvbnMgLSBQcm92aWRlcyBhbiBvcHRpb25hbCB2YXBpZCBrZXkgYW5kIGFuIG9wdGlub2FsIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvblxuICpcbiAqIEByZXR1cm5zIFRoZSBwcm9taXNlIHJlc29sdmVzIHdpdGggYW4gRkNNIHJlZ2lzdHJhdGlvbiB0b2tlbi5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUb2tlbihcbiAgbWVzc2FnaW5nOiBNZXNzYWdpbmcsXG4gIG9wdGlvbnM/OiBHZXRUb2tlbk9wdGlvbnNcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIG1lc3NhZ2luZyA9IGdldE1vZHVsYXJJbnN0YW5jZShtZXNzYWdpbmcpO1xuICByZXR1cm4gX2dldFRva2VuKG1lc3NhZ2luZyBhcyBNZXNzYWdpbmdTZXJ2aWNlLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBEZWxldGVzIHRoZSByZWdpc3RyYXRpb24gdG9rZW4gYXNzb2NpYXRlZCB3aXRoIHRoaXMge0BsaW5rIE1lc3NhZ2luZ30gaW5zdGFuY2UgYW5kIHVuc3Vic2NyaWJlc1xuICogdGhlIHtAbGluayBNZXNzYWdpbmd9IGluc3RhbmNlIGZyb20gdGhlIHB1c2ggc3Vic2NyaXB0aW9uLlxuICpcbiAqIEBwYXJhbSBtZXNzYWdpbmcgLSBUaGUge0BsaW5rIE1lc3NhZ2luZ30gaW5zdGFuY2UuXG4gKlxuICogQHJldHVybnMgVGhlIHByb21pc2UgcmVzb2x2ZXMgd2hlbiB0aGUgdG9rZW4gaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlVG9rZW4obWVzc2FnaW5nOiBNZXNzYWdpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgbWVzc2FnaW5nID0gZ2V0TW9kdWxhckluc3RhbmNlKG1lc3NhZ2luZyk7XG4gIHJldHVybiBfZGVsZXRlVG9rZW4obWVzc2FnaW5nIGFzIE1lc3NhZ2luZ1NlcnZpY2UpO1xufVxuXG4vKipcbiAqIFdoZW4gYSBwdXNoIG1lc3NhZ2UgaXMgcmVjZWl2ZWQgYW5kIHRoZSB1c2VyIGlzIGN1cnJlbnRseSBvbiBhIHBhZ2UgZm9yIHlvdXIgb3JpZ2luLCB0aGVcbiAqIG1lc3NhZ2UgaXMgcGFzc2VkIHRvIHRoZSBwYWdlIGFuZCBhbiBgb25NZXNzYWdlKClgIGV2ZW50IGlzIGRpc3BhdGNoZWQgd2l0aCB0aGUgcGF5bG9hZCBvZlxuICogdGhlIHB1c2ggbWVzc2FnZS5cbiAqXG4gKlxuICogQHBhcmFtIG1lc3NhZ2luZyAtIFRoZSB7QGxpbmsgTWVzc2FnaW5nfSBpbnN0YW5jZS5cbiAqIEBwYXJhbSBuZXh0T3JPYnNlcnZlciAtIFRoaXMgZnVuY3Rpb24sIG9yIG9ic2VydmVyIG9iamVjdCB3aXRoIGBuZXh0YCBkZWZpbmVkLFxuICogICAgIGlzIGNhbGxlZCB3aGVuIGEgbWVzc2FnZSBpcyByZWNlaXZlZCBhbmQgdGhlIHVzZXIgaXMgY3VycmVudGx5IHZpZXdpbmcgeW91ciBwYWdlLlxuICogQHJldHVybnMgVG8gc3RvcCBsaXN0ZW5pbmcgZm9yIG1lc3NhZ2VzIGV4ZWN1dGUgdGhpcyByZXR1cm5lZCBmdW5jdGlvbi5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvbk1lc3NhZ2UoXG4gIG1lc3NhZ2luZzogTWVzc2FnaW5nLFxuICBuZXh0T3JPYnNlcnZlcjogTmV4dEZuPE1lc3NhZ2VQYXlsb2FkPiB8IE9ic2VydmVyPE1lc3NhZ2VQYXlsb2FkPlxuKTogVW5zdWJzY3JpYmUge1xuICBtZXNzYWdpbmcgPSBnZXRNb2R1bGFySW5zdGFuY2UobWVzc2FnaW5nKTtcbiAgcmV0dXJuIF9vbk1lc3NhZ2UobWVzc2FnaW5nIGFzIE1lc3NhZ2luZ1NlcnZpY2UsIG5leHRPck9ic2VydmVyKTtcbn1cblxuLyoqXG4gKiBDYWxsZWQgd2hlbiBhIG1lc3NhZ2UgaXMgcmVjZWl2ZWQgd2hpbGUgdGhlIGFwcCBpcyBpbiB0aGUgYmFja2dyb3VuZC4gQW4gYXBwIGlzIGNvbnNpZGVyZWQgdG8gYmVcbiAqIGluIHRoZSBiYWNrZ3JvdW5kIGlmIG5vIGFjdGl2ZSB3aW5kb3cgaXMgZGlzcGxheWVkLlxuICpcbiAqIEBwYXJhbSBtZXNzYWdpbmcgLSBUaGUge0BsaW5rIE1lc3NhZ2luZ30gaW5zdGFuY2UuXG4gKiBAcGFyYW0gbmV4dE9yT2JzZXJ2ZXIgLSBUaGlzIGZ1bmN0aW9uLCBvciBvYnNlcnZlciBvYmplY3Qgd2l0aCBgbmV4dGAgZGVmaW5lZCwgaXMgY2FsbGVkIHdoZW4gYVxuICogbWVzc2FnZSBpcyByZWNlaXZlZCBhbmQgdGhlIGFwcCBpcyBjdXJyZW50bHkgaW4gdGhlIGJhY2tncm91bmQuXG4gKlxuICogQHJldHVybnMgVG8gc3RvcCBsaXN0ZW5pbmcgZm9yIG1lc3NhZ2VzIGV4ZWN1dGUgdGhpcyByZXR1cm5lZCBmdW5jdGlvblxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9uQmFja2dyb3VuZE1lc3NhZ2UoXG4gIG1lc3NhZ2luZzogTWVzc2FnaW5nLFxuICBuZXh0T3JPYnNlcnZlcjogTmV4dEZuPE1lc3NhZ2VQYXlsb2FkPiB8IE9ic2VydmVyPE1lc3NhZ2VQYXlsb2FkPlxuKTogVW5zdWJzY3JpYmUge1xuICBtZXNzYWdpbmcgPSBnZXRNb2R1bGFySW5zdGFuY2UobWVzc2FnaW5nKTtcbiAgcmV0dXJuIF9vbkJhY2tncm91bmRNZXNzYWdlKG1lc3NhZ2luZyBhcyBNZXNzYWdpbmdTZXJ2aWNlLCBuZXh0T3JPYnNlcnZlcik7XG59XG5cbi8qKlxuICogRW5hYmxlcyBvciBkaXNhYmxlcyBGaXJlYmFzZSBDbG91ZCBNZXNzYWdpbmcgbWVzc2FnZSBkZWxpdmVyeSBtZXRyaWNzIGV4cG9ydCB0byBCaWdRdWVyeS4gQnlcbiAqIGRlZmF1bHQsIG1lc3NhZ2UgZGVsaXZlcnkgbWV0cmljcyBhcmUgbm90IGV4cG9ydGVkIHRvIEJpZ1F1ZXJ5LiBVc2UgdGhpcyBtZXRob2QgdG8gZW5hYmxlIG9yXG4gKiBkaXNhYmxlIHRoZSBleHBvcnQgYXQgcnVudGltZS5cbiAqXG4gKiBAcGFyYW0gbWVzc2FnaW5nIC0gVGhlIGBGaXJlYmFzZU1lc3NhZ2luZ2AgaW5zdGFuY2UuXG4gKiBAcGFyYW0gZW5hYmxlIC0gV2hldGhlciBGaXJlYmFzZSBDbG91ZCBNZXNzYWdpbmcgc2hvdWxkIGV4cG9ydCBtZXNzYWdlIGRlbGl2ZXJ5IG1ldHJpY3MgdG9cbiAqIEJpZ1F1ZXJ5LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4cGVyaW1lbnRhbFNldERlbGl2ZXJ5TWV0cmljc0V4cG9ydGVkVG9CaWdRdWVyeUVuYWJsZWQoXG4gIG1lc3NhZ2luZzogTWVzc2FnaW5nLFxuICBlbmFibGU6IGJvb2xlYW5cbik6IHZvaWQge1xuICBtZXNzYWdpbmcgPSBnZXRNb2R1bGFySW5zdGFuY2UobWVzc2FnaW5nKTtcbiAgcmV0dXJuIF9zZXREZWxpdmVyeU1ldHJpY3NFeHBvcnRlZFRvQmlnUXVlcnlFbmFibGVkKG1lc3NhZ2luZywgZW5hYmxlKTtcbn1cbiIsIi8qKlxuICogRmlyZWJhc2UgQ2xvdWQgTWVzc2FnaW5nXG4gKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKi9cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0ICdAZmlyZWJhc2UvaW5zdGFsbGF0aW9ucyc7XG5cbmltcG9ydCB7IE1lc3NhZ2luZyB9IGZyb20gJy4vaW50ZXJmYWNlcy9wdWJsaWMtdHlwZXMnO1xuaW1wb3J0IHsgcmVnaXN0ZXJNZXNzYWdpbmdJbldpbmRvdyB9IGZyb20gJy4vaGVscGVycy9yZWdpc3Rlcic7XG5cbmV4cG9ydCB7XG4gIGdldFRva2VuLFxuICBkZWxldGVUb2tlbixcbiAgb25NZXNzYWdlLFxuICBnZXRNZXNzYWdpbmdJbldpbmRvdyBhcyBnZXRNZXNzYWdpbmdcbn0gZnJvbSAnLi9hcGknO1xuZXhwb3J0IHsgaXNXaW5kb3dTdXBwb3J0ZWQgYXMgaXNTdXBwb3J0ZWQgfSBmcm9tICcuL2FwaS9pc1N1cHBvcnRlZCc7XG5leHBvcnQgKiBmcm9tICcuL2ludGVyZmFjZXMvcHVibGljLXR5cGVzJztcblxuZGVjbGFyZSBtb2R1bGUgJ0BmaXJlYmFzZS9jb21wb25lbnQnIHtcbiAgaW50ZXJmYWNlIE5hbWVTZXJ2aWNlTWFwcGluZyB7XG4gICAgJ21lc3NhZ2luZyc6IE1lc3NhZ2luZztcbiAgfVxufVxuXG5yZWdpc3Rlck1lc3NhZ2luZ0luV2luZG93KCk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBO0FBQ0E7QUFFQTtBQUdBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBZUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUZBO0FDL0NBOzs7Ozs7Ozs7Ozs7Ozs7O0FBc0RBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFGQTtBQ3REQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQ3BDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNkRBO0FBQ0E7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBTUE7QUFLQTtBQUFBO0FBWEE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFtQkE7QUFuQkE7QUFBQTtBQXFCQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQVdBO0FBWEE7QUFBQTtBQUNBO0FBREE7QUFZQTtBQVpBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFvQkE7QUFDQTtBQXRCQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBMkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBSEE7QUEzQkE7QUFBQTtBQUNBO0FBREE7QUF5Q0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBSEE7QUFIQTtBQWVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFIQTtBQVdBO0FBQ0E7QUF0RUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBckJBO0FBQ0E7QUFEQTtBQXFCQTtBQXVFQTtBQUNBO0FBN0ZBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBcUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU1BO0FBZ0JBO0FDbE1BOzs7Ozs7Ozs7Ozs7Ozs7O0FBdUJBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQVVBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFIQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBSkE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBTkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBY0E7QUFDQTtBQWZBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXdCQTtBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUpBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQU5BO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUhBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUxBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWtCQTtBQUFBO0FBQ0E7QUFDQTtBQ3pHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBd0NBO0FBQ0E7QUFEQTtBQUdBO0FBSEE7QUFLQTtBQUxBO0FBT0E7QUFQQTtBQVNBO0FBVEE7QUFXQTtBQVhBO0FBYUE7QUFiQTtBQWVBO0FBZkE7QUFpQkE7QUFqQkE7QUFtQkE7QUFuQkE7QUFxQkE7QUFyQkE7QUF3QkE7QUF4QkE7QUEwQkE7QUExQkE7QUE0QkE7QUE1QkE7QUErQkE7QUEvQkE7QUFpQ0E7QUFqQ0E7QUFtQ0E7QUFuQ0E7QUFvQ0E7QUFwQ0E7QUFtREE7QUMzRkE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBc0NBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFQQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBZUE7QUFmQTtBQUFBO0FBQ0E7QUFEQTtBQW1CQTtBQW5CQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQXFCQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBdEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQTBCQTtBQTNCQTtBQTRCQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBN0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBa0NBO0FBQUE7QUFDQTtBQW5DQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBdUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFQQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBZUE7QUFmQTtBQUFBO0FBQ0E7QUFEQTtBQW1CQTtBQW5CQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQXFCQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBdEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQTBCQTtBQTNCQTtBQTRCQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBN0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBa0NBO0FBQUE7QUFDQTtBQW5DQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBdUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQU5BO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFZQTtBQVpBO0FBQUE7QUFDQTtBQURBO0FBZ0JBO0FBQ0E7QUFqQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWlCQTtBQWxCQTtBQW1CQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBcEJBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUF3QkE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQXpCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBNkJBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQVBBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFhQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3pMQTs7Ozs7Ozs7Ozs7Ozs7OztBQWdDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUkE7QUFBQTtBQUNBO0FBREE7QUFnQkE7QUFDQTtBQWpCQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQThCQTtBQUNBO0FBaENBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBc0NBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUF0Q0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFnREE7Ozs7OztBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUpBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFhQTtBQUNBO0FBZEE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBc0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUtBO0FBRUE7QUFDQTtBQUZBO0FBWEE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQXVCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVJBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBaUJBOzs7OztBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUxBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQVVBOzs7QUFHQTtBQUpBO0FBQ0E7QUFWQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWlCQTs7Ozs7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQ3hMQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBb0JBO0FBR0E7QUFDQTs7QUFFQTs7QUFFQTtBQUxBO0FBUUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFWQTtBQUNBO0FBQ0E7QUFZQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUMvRkE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW9CQTs7QUFFQTtBQUNBO0FDdkJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFxQ0E7QUFDQTtBQUlBO0FBQ0E7QUE4TEE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuUEE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFDQTtBQVFBO0FBVkE7QUFDQTtBQWlCQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUM1REE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTJCQTtBQW9CQTtBQUdBO0FBQ0E7QUFDQTtBQWxCQTtBQUVBO0FBS0E7QUFHQTtBQUNBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDaEVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFzQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU9BO0FBREE7QUFDQTtBQVBBO0FBSUE7Ozs7OztBQVlBOztBQUFBO0FBaEJBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBb0JBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFyQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUN0QkE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXNCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQWFBO0FBQUE7QUFDQTtBQWRBO0FBZ0JBO0FBQ0E7QUFqQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUN0QkE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW9CQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBVEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUNwQkE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXlCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFBQTtBQUNBO0FBTkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFhQTtBQUFBO0FBQ0E7QUFkQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUN6QkE7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTZCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUxBO0FBQUE7QUFDQTtBQURBO0FBTUE7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBTEE7QUFDQTtBQVRBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFOQTtBQVFBO0FDeERBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE0QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUxBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFVQTtBQUlBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFsQkE7QUFDQTtBQUNBO0FBb0JBO0FBQ0E7QUF2QkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7OztBQzdCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1Q0E7QUFHQTtBQU1BO0FBQUE7QUFBQTtBQUlBO0FBYkE7QUFDQTtBQWVBO0FBR0E7QUFJQTtBQUNBO0FBQUE7QUFBQTtBQURBO0FBSUE7QUFYQTtBQUNBO0FBb0NBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUdBO0FBRkE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FDNUdBOzs7Ozs7Ozs7Ozs7Ozs7OztBQXVCQTs7Ozs7Ozs7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FDN0JBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQUE7QUFDQTtBQUxBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FDdkJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUEyQkE7QUFJQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFEQTtBQUdBO0FDeENBOzs7Ozs7Ozs7Ozs7Ozs7OztBQXVDQTs7Ozs7Ozs7O0FBT0E7QUFBQTs7Ozs7QUFLQTs7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBTEE7O0FBU0E7QUFBQTtBQUFBO0FBVEE7QUFZQTtBQUNBO0FBNkJBOzs7Ozs7Ozs7Ozs7Ozs7OztBQWVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUpBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVFBOzs7Ozs7Ozs7Ozs7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7QUFhQTtBQUlBO0FBQ0E7QUFDQTtBQ3RKQTs7Ozs7OztBQTJDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@firebase/messaging/dist/index.esm2017.js\n");

/***/ }),

/***/ "./node_modules/@firebase/util/dist/index.esm2017.js":
/*!***********************************************************!*\
  !*** ./node_modules/@firebase/util/dist/index.esm2017.js ***!
  \***********************************************************/
/*! exports provided: CONSTANTS, Deferred, ErrorFactory, FirebaseError, MAX_VALUE_MILLIS, RANDOM_FACTOR, Sha1, areCookiesEnabled, assert, assertionError, async, base64, base64Decode, base64Encode, base64urlEncodeWithoutPadding, calculateBackoffMillis, contains, createMockUserToken, createSubscribe, decode, deepCopy, deepEqual, deepExtend, errorPrefix, extractQuerystring, getGlobal, getModularInstance, getUA, isAdmin, isBrowser, isBrowserExtension, isElectron, isEmpty, isIE, isIndexedDBAvailable, isMobileCordova, isNode, isNodeSdk, isReactNative, isSafari, isUWP, isValidFormat, isValidTimestamp, issuedAtTime, jsonEval, map, ordinal, querystring, querystringDecode, safeGet, stringLength, stringToByteArray, stringify, validateArgCount, validateCallback, validateContextObject, validateIndexedDBOpenable, validateNamespace */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(global) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CONSTANTS\", function() { return CONSTANTS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Deferred\", function() { return Deferred; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ErrorFactory\", function() { return ErrorFactory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FirebaseError\", function() { return FirebaseError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MAX_VALUE_MILLIS\", function() { return MAX_VALUE_MILLIS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RANDOM_FACTOR\", function() { return RANDOM_FACTOR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Sha1\", function() { return Sha1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"areCookiesEnabled\", function() { return areCookiesEnabled; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"assert\", function() { return assert; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"assertionError\", function() { return assertionError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"async\", function() { return async; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"base64\", function() { return base64; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"base64Decode\", function() { return base64Decode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"base64Encode\", function() { return base64Encode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"base64urlEncodeWithoutPadding\", function() { return base64urlEncodeWithoutPadding; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"calculateBackoffMillis\", function() { return calculateBackoffMillis; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"contains\", function() { return contains; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createMockUserToken\", function() { return createMockUserToken; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createSubscribe\", function() { return createSubscribe; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"decode\", function() { return decode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deepCopy\", function() { return deepCopy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deepEqual\", function() { return deepEqual; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deepExtend\", function() { return deepExtend; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"errorPrefix\", function() { return errorPrefix; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"extractQuerystring\", function() { return extractQuerystring; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getGlobal\", function() { return getGlobal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getModularInstance\", function() { return getModularInstance; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getUA\", function() { return getUA; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isAdmin\", function() { return isAdmin; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isBrowser\", function() { return isBrowser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isBrowserExtension\", function() { return isBrowserExtension; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isElectron\", function() { return isElectron; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isEmpty\", function() { return isEmpty; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isIE\", function() { return isIE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isIndexedDBAvailable\", function() { return isIndexedDBAvailable; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isMobileCordova\", function() { return isMobileCordova; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isNode\", function() { return isNode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isNodeSdk\", function() { return isNodeSdk; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isReactNative\", function() { return isReactNative; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isSafari\", function() { return isSafari; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isUWP\", function() { return isUWP; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isValidFormat\", function() { return isValidFormat; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isValidTimestamp\", function() { return isValidTimestamp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"issuedAtTime\", function() { return issuedAtTime; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"jsonEval\", function() { return jsonEval; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"map\", function() { return map; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ordinal\", function() { return ordinal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"querystring\", function() { return querystring; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"querystringDecode\", function() { return querystringDecode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"safeGet\", function() { return safeGet; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"stringLength\", function() { return stringLength; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"stringToByteArray\", function() { return stringToByteArray; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"stringify\", function() { return stringify; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validateArgCount\", function() { return validateArgCount; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validateCallback\", function() { return validateCallback; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validateContextObject\", function() { return validateContextObject; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validateIndexedDBOpenable\", function() { return validateIndexedDBOpenable; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validateNamespace\", function() { return validateNamespace; });\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !_isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return _setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * @fileoverview Firebase constants.  Some of these (@defines) can be overridden at compile-time.\r\n */\n\n\nvar CONSTANTS = {\n  /**\r\n   * @define {boolean} Whether this is the client Node.js SDK.\r\n   */\n  NODE_CLIENT: false,\n\n  /**\r\n   * @define {boolean} Whether this is the Admin Node.js SDK.\r\n   */\n  NODE_ADMIN: false,\n\n  /**\r\n   * Firebase SDK Version\r\n   */\n  SDK_VERSION: '${JSCORE_VERSION}'\n};\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Throws an error if the provided assertion is falsy\r\n */\n\nvar assert = function assert(assertion, message) {\n  if (!assertion) {\n    throw assertionError(message);\n  }\n};\n/**\r\n * Returns an Error object suitable for throwing.\r\n */\n\n\nvar assertionError = function assertionError(message) {\n  return new Error('Firebase Database (' + CONSTANTS.SDK_VERSION + ') INTERNAL ASSERT FAILED: ' + message);\n};\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar stringToByteArray$1 = function stringToByteArray$1(str) {\n  // TODO(user): Use native implementations if/when available\n  var out = [];\n  var p = 0;\n\n  for (var i = 0; i < str.length; i++) {\n    var c = str.charCodeAt(i);\n\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = c >> 6 | 192;\n      out[p++] = c & 63 | 128;\n    } else if ((c & 0xfc00) === 0xd800 && i + 1 < str.length && (str.charCodeAt(i + 1) & 0xfc00) === 0xdc00) {\n      // Surrogate Pair\n      c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\n      out[p++] = c >> 18 | 240;\n      out[p++] = c >> 12 & 63 | 128;\n      out[p++] = c >> 6 & 63 | 128;\n      out[p++] = c & 63 | 128;\n    } else {\n      out[p++] = c >> 12 | 224;\n      out[p++] = c >> 6 & 63 | 128;\n      out[p++] = c & 63 | 128;\n    }\n  }\n\n  return out;\n};\n/**\r\n * Turns an array of numbers into the string given by the concatenation of the\r\n * characters to which the numbers correspond.\r\n * @param bytes Array of numbers representing characters.\r\n * @return Stringification of the array.\r\n */\n\n\nvar byteArrayToString = function byteArrayToString(bytes) {\n  // TODO(user): Use native implementations if/when available\n  var out = [];\n  var pos = 0,\n      c = 0;\n\n  while (pos < bytes.length) {\n    var c1 = bytes[pos++];\n\n    if (c1 < 128) {\n      out[c++] = String.fromCharCode(c1);\n    } else if (c1 > 191 && c1 < 224) {\n      var c2 = bytes[pos++];\n      out[c++] = String.fromCharCode((c1 & 31) << 6 | c2 & 63);\n    } else if (c1 > 239 && c1 < 365) {\n      // Surrogate Pair\n      var _c = bytes[pos++];\n      var c3 = bytes[pos++];\n      var c4 = bytes[pos++];\n      var u = ((c1 & 7) << 18 | (_c & 63) << 12 | (c3 & 63) << 6 | c4 & 63) - 0x10000;\n      out[c++] = String.fromCharCode(0xd800 + (u >> 10));\n      out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\n    } else {\n      var _c2 = bytes[pos++];\n      var _c3 = bytes[pos++];\n      out[c++] = String.fromCharCode((c1 & 15) << 12 | (_c2 & 63) << 6 | _c3 & 63);\n    }\n  }\n\n  return out.join('');\n}; // We define it as an object literal instead of a class because a class compiled down to es5 can't\n// be treeshaked. https://github.com/rollup/rollup/issues/1691\n// Static lookup maps, lazily populated by init_()\n\n\nvar base64 = {\n  /**\r\n   * Maps bytes to characters.\r\n   */\n  byteToCharMap_: null,\n\n  /**\r\n   * Maps characters to bytes.\r\n   */\n  charToByteMap_: null,\n\n  /**\r\n   * Maps bytes to websafe characters.\r\n   * @private\r\n   */\n  byteToCharMapWebSafe_: null,\n\n  /**\r\n   * Maps websafe characters to bytes.\r\n   * @private\r\n   */\n  charToByteMapWebSafe_: null,\n\n  /**\r\n   * Our default alphabet, shared between\r\n   * ENCODED_VALS and ENCODED_VALS_WEBSAFE\r\n   */\n  ENCODED_VALS_BASE: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\n\n  /**\r\n   * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\r\n   */\n  get ENCODED_VALS() {\n    return this.ENCODED_VALS_BASE + '+/=';\n  },\n\n  /**\r\n   * Our websafe alphabet.\r\n   */\n  get ENCODED_VALS_WEBSAFE() {\n    return this.ENCODED_VALS_BASE + '-_.';\n  },\n\n  /**\r\n   * Whether this browser supports the atob and btoa functions. This extension\r\n   * started at Mozilla but is now implemented by many browsers. We use the\r\n   * ASSUME_* variables to avoid pulling in the full useragent detection library\r\n   * but still allowing the standard per-browser compilations.\r\n   *\r\n   */\n  HAS_NATIVE_SUPPORT: typeof atob === 'function',\n\n  /**\r\n   * Base64-encode an array of bytes.\r\n   *\r\n   * @param input An array of bytes (numbers with\r\n   *     value in [0, 255]) to encode.\r\n   * @param webSafe Boolean indicating we should use the\r\n   *     alternative alphabet.\r\n   * @return The base64 encoded string.\r\n   */\n  encodeByteArray: function encodeByteArray(input, webSafe) {\n    if (!Array.isArray(input)) {\n      throw Error('encodeByteArray takes an array as a parameter');\n    }\n\n    this.init_();\n    var byteToCharMap = webSafe ? this.byteToCharMapWebSafe_ : this.byteToCharMap_;\n    var output = [];\n\n    for (var i = 0; i < input.length; i += 3) {\n      var byte1 = input[i];\n      var haveByte2 = i + 1 < input.length;\n      var byte2 = haveByte2 ? input[i + 1] : 0;\n      var haveByte3 = i + 2 < input.length;\n      var byte3 = haveByte3 ? input[i + 2] : 0;\n      var outByte1 = byte1 >> 2;\n      var outByte2 = (byte1 & 0x03) << 4 | byte2 >> 4;\n      var outByte3 = (byte2 & 0x0f) << 2 | byte3 >> 6;\n      var outByte4 = byte3 & 0x3f;\n\n      if (!haveByte3) {\n        outByte4 = 64;\n\n        if (!haveByte2) {\n          outByte3 = 64;\n        }\n      }\n\n      output.push(byteToCharMap[outByte1], byteToCharMap[outByte2], byteToCharMap[outByte3], byteToCharMap[outByte4]);\n    }\n\n    return output.join('');\n  },\n\n  /**\r\n   * Base64-encode a string.\r\n   *\r\n   * @param input A string to encode.\r\n   * @param webSafe If true, we should use the\r\n   *     alternative alphabet.\r\n   * @return The base64 encoded string.\r\n   */\n  encodeString: function encodeString(input, webSafe) {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return btoa(input);\n    }\n\n    return this.encodeByteArray(stringToByteArray$1(input), webSafe);\n  },\n\n  /**\r\n   * Base64-decode a string.\r\n   *\r\n   * @param input to decode.\r\n   * @param webSafe True if we should use the\r\n   *     alternative alphabet.\r\n   * @return string representing the decoded value.\r\n   */\n  decodeString: function decodeString(input, webSafe) {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return atob(input);\n    }\n\n    return byteArrayToString(this.decodeStringToByteArray(input, webSafe));\n  },\n\n  /**\r\n   * Base64-decode a string.\r\n   *\r\n   * In base-64 decoding, groups of four characters are converted into three\r\n   * bytes.  If the encoder did not apply padding, the input length may not\r\n   * be a multiple of 4.\r\n   *\r\n   * In this case, the last group will have fewer than 4 characters, and\r\n   * padding will be inferred.  If the group has one or two characters, it decodes\r\n   * to one byte.  If the group has three characters, it decodes to two bytes.\r\n   *\r\n   * @param input Input to decode.\r\n   * @param webSafe True if we should use the web-safe alphabet.\r\n   * @return bytes representing the decoded value.\r\n   */\n  decodeStringToByteArray: function decodeStringToByteArray(input, webSafe) {\n    this.init_();\n    var charToByteMap = webSafe ? this.charToByteMapWebSafe_ : this.charToByteMap_;\n    var output = [];\n\n    for (var i = 0; i < input.length;) {\n      var byte1 = charToByteMap[input.charAt(i++)];\n      var haveByte2 = i < input.length;\n      var byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\n      ++i;\n      var haveByte3 = i < input.length;\n      var byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n      var haveByte4 = i < input.length;\n      var byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\n        throw Error();\n      }\n\n      var outByte1 = byte1 << 2 | byte2 >> 4;\n      output.push(outByte1);\n\n      if (byte3 !== 64) {\n        var outByte2 = byte2 << 4 & 0xf0 | byte3 >> 2;\n        output.push(outByte2);\n\n        if (byte4 !== 64) {\n          var outByte3 = byte3 << 6 & 0xc0 | byte4;\n          output.push(outByte3);\n        }\n      }\n    }\n\n    return output;\n  },\n\n  /**\r\n   * Lazy static initialization function. Called before\r\n   * accessing any of the static map variables.\r\n   * @private\r\n   */\n  init_: function init_() {\n    if (!this.byteToCharMap_) {\n      this.byteToCharMap_ = {};\n      this.charToByteMap_ = {};\n      this.byteToCharMapWebSafe_ = {};\n      this.charToByteMapWebSafe_ = {}; // We want quick mappings back and forth, so we precompute two maps.\n\n      for (var i = 0; i < this.ENCODED_VALS.length; i++) {\n        this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\n        this.charToByteMap_[this.byteToCharMap_[i]] = i;\n        this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\n        this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i; // Be forgiving when decoding and correctly decode both encodings.\n\n        if (i >= this.ENCODED_VALS_BASE.length) {\n          this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\n          this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\n        }\n      }\n    }\n  }\n};\n/**\r\n * URL-safe base64 encoding\r\n */\n\nvar base64Encode = function base64Encode(str) {\n  var utf8Bytes = stringToByteArray$1(str);\n  return base64.encodeByteArray(utf8Bytes, true);\n};\n/**\r\n * URL-safe base64 encoding (without \".\" padding in the end).\r\n * e.g. Used in JSON Web Token (JWT) parts.\r\n */\n\n\nvar base64urlEncodeWithoutPadding = function base64urlEncodeWithoutPadding(str) {\n  // Use base64url encoding and remove padding in the end (dot characters).\n  return base64Encode(str).replace(/\\./g, '');\n};\n/**\r\n * URL-safe base64 decoding\r\n *\r\n * NOTE: DO NOT use the global atob() function - it does NOT support the\r\n * base64Url variant encoding.\r\n *\r\n * @param str To be decoded\r\n * @return Decoded result, if possible\r\n */\n\n\nvar base64Decode = function base64Decode(str) {\n  try {\n    return base64.decodeString(str, true);\n  } catch (e) {\n    console.error('base64Decode failed: ', e);\n  }\n\n  return null;\n};\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Do a deep-copy of basic JavaScript Objects or Arrays.\r\n */\n\n\nfunction deepCopy(value) {\n  return deepExtend(undefined, value);\n}\n/**\r\n * Copy properties from source to target (recursively allows extension\r\n * of Objects and Arrays).  Scalar values in the target are over-written.\r\n * If target is undefined, an object of the appropriate type will be created\r\n * (and returned).\r\n *\r\n * We recursively copy all child properties of plain Objects in the source- so\r\n * that namespace- like dictionaries are merged.\r\n *\r\n * Note that the target can be a function, in which case the properties in\r\n * the source Object are copied onto it as static properties of the Function.\r\n *\r\n * Note: we don't merge __proto__ to prevent prototype pollution\r\n */\n\n\nfunction deepExtend(target, source) {\n  if (!(source instanceof Object)) {\n    return source;\n  }\n\n  switch (source.constructor) {\n    case Date:\n      // Treat Dates like scalars; if the target date object had any child\n      // properties - they will be lost!\n      var dateValue = source;\n      return new Date(dateValue.getTime());\n\n    case Object:\n      if (target === undefined) {\n        target = {};\n      }\n\n      break;\n\n    case Array:\n      // Always copy the array source and overwrite the target.\n      target = [];\n      break;\n\n    default:\n      // Not a plain Object - treat it as a scalar.\n      return source;\n  }\n\n  for (var prop in source) {\n    // use isValidKey to guard against prototype pollution. See https://snyk.io/vuln/SNYK-JS-LODASH-450202\n    if (!source.hasOwnProperty(prop) || !isValidKey(prop)) {\n      continue;\n    }\n\n    target[prop] = deepExtend(target[prop], source[prop]);\n  }\n\n  return target;\n}\n\nfunction isValidKey(key) {\n  return key !== '__proto__';\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar Deferred = /*#__PURE__*/function () {\n  function Deferred() {\n    var _this = this;\n\n    _classCallCheck(this, Deferred);\n\n    this.reject = function () {};\n\n    this.resolve = function () {};\n\n    this.promise = new Promise(function (resolve, reject) {\n      _this.resolve = resolve;\n      _this.reject = reject;\n    });\n  }\n  /**\r\n   * Our API internals are not promiseified and cannot because our callback APIs have subtle expectations around\r\n   * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\r\n   * and returns a node-style callback which will resolve or reject the Deferred's promise.\r\n   */\n\n\n  _createClass(Deferred, [{\n    key: \"wrapCallback\",\n    value: function wrapCallback(callback) {\n      var _this2 = this;\n\n      return function (error, value) {\n        if (error) {\n          _this2.reject(error);\n        } else {\n          _this2.resolve(value);\n        }\n\n        if (typeof callback === 'function') {\n          // Attaching noop handler just in case developer wasn't expecting\n          // promises\n          _this2.promise[\"catch\"](function () {}); // Some of our callbacks don't expect a value and our own tests\n          // assert that the parameter length is 1\n\n\n          if (callback.length === 1) {\n            callback(error);\n          } else {\n            callback(error, value);\n          }\n        }\n      };\n    }\n  }]);\n\n  return Deferred;\n}();\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction createMockUserToken(token, projectId) {\n  if (token.uid) {\n    throw new Error('The \"uid\" field is no longer supported by mockUserToken. Please use \"sub\" instead for Firebase Auth User ID.');\n  } // Unsecured JWTs use \"none\" as the algorithm.\n\n\n  var header = {\n    alg: 'none',\n    type: 'JWT'\n  };\n  var project = projectId || 'demo-project';\n  var iat = token.iat || 0;\n  var sub = token.sub || token.user_id;\n\n  if (!sub) {\n    throw new Error(\"mockUserToken must contain 'sub' or 'user_id' field!\");\n  }\n\n  var payload = Object.assign({\n    // Set all required fields to decent defaults\n    iss: \"https://securetoken.google.com/\".concat(project),\n    aud: project,\n    iat: iat,\n    exp: iat + 3600,\n    auth_time: iat,\n    sub: sub,\n    user_id: sub,\n    firebase: {\n      sign_in_provider: 'custom',\n      identities: {}\n    }\n  }, token); // Unsecured JWTs use the empty string as a signature.\n\n  var signature = '';\n  return [base64urlEncodeWithoutPadding(JSON.stringify(header)), base64urlEncodeWithoutPadding(JSON.stringify(payload)), signature].join('.');\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Returns navigator.userAgent string or '' if it's not defined.\r\n * @return user agent string\r\n */\n\n\nfunction getUA() {\n  if (typeof navigator !== 'undefined' && typeof navigator['userAgent'] === 'string') {\n    return navigator['userAgent'];\n  } else {\n    return '';\n  }\n}\n/**\r\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\r\n *\r\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap\r\n * in the Ripple emulator) nor Cordova `onDeviceReady`, which would normally\r\n * wait for a callback.\r\n */\n\n\nfunction isMobileCordova() {\n  return typeof window !== 'undefined' && // @ts-ignore Setting up an broadly applicable index signature for Window\n  // just to deal with this case would probably be a bad idea.\n  !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) && /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA());\n}\n/**\r\n * Detect Node.js.\r\n *\r\n * @return true if Node.js environment is detected.\r\n */\n// Node detection logic from: https://github.com/iliakan/detect-node/\n\n\nfunction isNode() {\n  try {\n    return Object.prototype.toString.call(global.process) === '[object process]';\n  } catch (e) {\n    return false;\n  }\n}\n/**\r\n * Detect Browser Environment\r\n */\n\n\nfunction isBrowser() {\n  return (typeof self === \"undefined\" ? \"undefined\" : _typeof(self)) === 'object' && self.self === self;\n}\n\nfunction isBrowserExtension() {\n  var runtime = (typeof chrome === \"undefined\" ? \"undefined\" : _typeof(chrome)) === 'object' ? chrome.runtime : (typeof browser === \"undefined\" ? \"undefined\" : _typeof(browser)) === 'object' ? browser.runtime : undefined;\n  return _typeof(runtime) === 'object' && runtime.id !== undefined;\n}\n/**\r\n * Detect React Native.\r\n *\r\n * @return true if ReactNative environment is detected.\r\n */\n\n\nfunction isReactNative() {\n  return (typeof navigator === \"undefined\" ? \"undefined\" : _typeof(navigator)) === 'object' && navigator['product'] === 'ReactNative';\n}\n/** Detects Electron apps. */\n\n\nfunction isElectron() {\n  return getUA().indexOf('Electron/') >= 0;\n}\n/** Detects Internet Explorer. */\n\n\nfunction isIE() {\n  var ua = getUA();\n  return ua.indexOf('MSIE ') >= 0 || ua.indexOf('Trident/') >= 0;\n}\n/** Detects Universal Windows Platform apps. */\n\n\nfunction isUWP() {\n  return getUA().indexOf('MSAppHost/') >= 0;\n}\n/**\r\n * Detect whether the current SDK build is the Node version.\r\n *\r\n * @return true if it's the Node SDK build.\r\n */\n\n\nfunction isNodeSdk() {\n  return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\n}\n/** Returns true if we are running in Safari. */\n\n\nfunction isSafari() {\n  return !isNode() && navigator.userAgent.includes('Safari') && !navigator.userAgent.includes('Chrome');\n}\n/**\r\n * This method checks if indexedDB is supported by current browser/service worker context\r\n * @return true if indexedDB is supported by current browser/service worker context\r\n */\n\n\nfunction isIndexedDBAvailable() {\n  return (typeof indexedDB === \"undefined\" ? \"undefined\" : _typeof(indexedDB)) === 'object';\n}\n/**\r\n * This method validates browser/sw context for indexedDB by opening a dummy indexedDB database and reject\r\n * if errors occur during the database open operation.\r\n *\r\n * @throws exception if current browser/sw context can't run idb.open (ex: Safari iframe, Firefox\r\n * private browsing)\r\n */\n\n\nfunction validateIndexedDBOpenable() {\n  return new Promise(function (resolve, reject) {\n    try {\n      var preExist = true;\n      var DB_CHECK_NAME = 'validate-browser-context-for-indexeddb-analytics-module';\n      var request = self.indexedDB.open(DB_CHECK_NAME);\n\n      request.onsuccess = function () {\n        request.result.close(); // delete database only when it doesn't pre-exist\n\n        if (!preExist) {\n          self.indexedDB.deleteDatabase(DB_CHECK_NAME);\n        }\n\n        resolve(true);\n      };\n\n      request.onupgradeneeded = function () {\n        preExist = false;\n      };\n\n      request.onerror = function () {\n        var _a;\n\n        reject(((_a = request.error) === null || _a === void 0 ? void 0 : _a.message) || '');\n      };\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n/**\r\n *\r\n * This method checks whether cookie is enabled within current browser\r\n * @return true if cookie is enabled within current browser\r\n */\n\n\nfunction areCookiesEnabled() {\n  if (typeof navigator === 'undefined' || !navigator.cookieEnabled) {\n    return false;\n  }\n\n  return true;\n}\n/**\r\n * Polyfill for `globalThis` object.\r\n * @returns the `globalThis` object for the given environment.\r\n */\n\n\nfunction getGlobal() {\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n\n  throw new Error('Unable to locate global object.');\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * @fileoverview Standardized Firebase Error.\r\n *\r\n * Usage:\r\n *\r\n *   // Typescript string literals for type-safe codes\r\n *   type Err =\r\n *     'unknown' |\r\n *     'object-not-found'\r\n *     ;\r\n *\r\n *   // Closure enum for type-safe error codes\r\n *   // at-enum {string}\r\n *   var Err = {\r\n *     UNKNOWN: 'unknown',\r\n *     OBJECT_NOT_FOUND: 'object-not-found',\r\n *   }\r\n *\r\n *   let errors: Map<Err, string> = {\r\n *     'generic-error': \"Unknown error\",\r\n *     'file-not-found': \"Could not find file: {$file}\",\r\n *   };\r\n *\r\n *   // Type-safe function - must pass a valid error code as param.\r\n *   let error = new ErrorFactory<Err>('service', 'Service', errors);\r\n *\r\n *   ...\r\n *   throw error.create(Err.GENERIC);\r\n *   ...\r\n *   throw error.create(Err.FILE_NOT_FOUND, {'file': fileName});\r\n *   ...\r\n *   // Service: Could not file file: foo.txt (service/file-not-found).\r\n *\r\n *   catch (e) {\r\n *     assert(e.message === \"Could not find file: foo.txt.\");\r\n *     if (e.code === 'service/file-not-found') {\r\n *       console.log(\"Could not read file: \" + e['file']);\r\n *     }\r\n *   }\r\n */\n\n\nvar ERROR_NAME = 'FirebaseError'; // Based on code from:\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types\n\nvar FirebaseError = /*#__PURE__*/function (_Error) {\n  _inherits(FirebaseError, _Error);\n\n  function FirebaseError(code, message, customData) {\n    var _this3;\n\n    _classCallCheck(this, FirebaseError);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(FirebaseError).call(this, message));\n    _this3.code = code;\n    _this3.customData = customData;\n    _this3.name = ERROR_NAME; // Fix For ES5\n    // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n\n    Object.setPrototypeOf(_assertThisInitialized(_this3), FirebaseError.prototype); // Maintains proper stack trace for where our error was thrown.\n    // Only available on V8.\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(_assertThisInitialized(_this3), ErrorFactory.prototype.create);\n    }\n\n    return _this3;\n  }\n\n  return FirebaseError;\n}(_wrapNativeSuper(Error));\n\nvar ErrorFactory = /*#__PURE__*/function () {\n  function ErrorFactory(service, serviceName, errors) {\n    _classCallCheck(this, ErrorFactory);\n\n    this.service = service;\n    this.serviceName = serviceName;\n    this.errors = errors;\n  }\n\n  _createClass(ErrorFactory, [{\n    key: \"create\",\n    value: function create(code) {\n      var customData = (arguments.length <= 1 ? undefined : arguments[1]) || {};\n      var fullCode = \"\".concat(this.service, \"/\").concat(code);\n      var template = this.errors[code];\n      var message = template ? replaceTemplate(template, customData) : 'Error'; // Service Name: Error message (service/code).\n\n      var fullMessage = \"\".concat(this.serviceName, \": \").concat(message, \" (\").concat(fullCode, \").\");\n      var error = new FirebaseError(fullCode, fullMessage, customData);\n      return error;\n    }\n  }]);\n\n  return ErrorFactory;\n}();\n\nfunction replaceTemplate(template, data) {\n  return template.replace(PATTERN, function (_, key) {\n    var value = data[key];\n    return value != null ? String(value) : \"<\".concat(key, \"?>\");\n  });\n}\n\nvar PATTERN = /\\{\\$([^}]+)}/g;\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Evaluates a JSON string into a javascript object.\r\n *\r\n * @param {string} str A string containing JSON.\r\n * @return {*} The javascript object representing the specified JSON.\r\n */\n\nfunction jsonEval(str) {\n  return JSON.parse(str);\n}\n/**\r\n * Returns JSON representing a javascript object.\r\n * @param {*} data Javascript object to be stringified.\r\n * @return {string} The JSON contents of the object.\r\n */\n\n\nfunction stringify(data) {\n  return JSON.stringify(data);\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Decodes a Firebase auth. token into constituent parts.\r\n *\r\n * Notes:\r\n * - May return with invalid / incomplete claims if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\n\n\nvar decode = function decode(token) {\n  var header = {},\n      claims = {},\n      data = {},\n      signature = '';\n\n  try {\n    var parts = token.split('.');\n    header = jsonEval(base64Decode(parts[0]) || '');\n    claims = jsonEval(base64Decode(parts[1]) || '');\n    signature = parts[2];\n    data = claims['d'] || {};\n    delete claims['d'];\n  } catch (e) {}\n\n  return {\n    header: header,\n    claims: claims,\n    data: data,\n    signature: signature\n  };\n};\n/**\r\n * Decodes a Firebase auth. token and checks the validity of its time-based claims. Will return true if the\r\n * token is within the time window authorized by the 'nbf' (not-before) and 'iat' (issued-at) claims.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\n\n\nvar isValidTimestamp = function isValidTimestamp(token) {\n  var claims = decode(token).claims;\n  var now = Math.floor(new Date().getTime() / 1000);\n  var validSince = 0,\n      validUntil = 0;\n\n  if (_typeof(claims) === 'object') {\n    if (claims.hasOwnProperty('nbf')) {\n      validSince = claims['nbf'];\n    } else if (claims.hasOwnProperty('iat')) {\n      validSince = claims['iat'];\n    }\n\n    if (claims.hasOwnProperty('exp')) {\n      validUntil = claims['exp'];\n    } else {\n      // token will expire after 24h by default\n      validUntil = validSince + 86400;\n    }\n  }\n\n  return !!now && !!validSince && !!validUntil && now >= validSince && now <= validUntil;\n};\n/**\r\n * Decodes a Firebase auth. token and returns its issued at time if valid, null otherwise.\r\n *\r\n * Notes:\r\n * - May return null if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\n\n\nvar issuedAtTime = function issuedAtTime(token) {\n  var claims = decode(token).claims;\n\n  if (_typeof(claims) === 'object' && claims.hasOwnProperty('iat')) {\n    return claims['iat'];\n  }\n\n  return null;\n};\n/**\r\n * Decodes a Firebase auth. token and checks the validity of its format. Expects a valid issued-at time.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\n\n\nvar isValidFormat = function isValidFormat(token) {\n  var decoded = decode(token),\n      claims = decoded.claims;\n  return !!claims && _typeof(claims) === 'object' && claims.hasOwnProperty('iat');\n};\n/**\r\n * Attempts to peer into an auth token and determine if it's an admin auth token by looking at the claims portion.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\n\n\nvar isAdmin = function isAdmin(token) {\n  var claims = decode(token).claims;\n  return _typeof(claims) === 'object' && claims['admin'] === true;\n};\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction contains(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nfunction safeGet(obj, key) {\n  if (Object.prototype.hasOwnProperty.call(obj, key)) {\n    return obj[key];\n  } else {\n    return undefined;\n  }\n}\n\nfunction isEmpty(obj) {\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction map(obj, fn, contextObj) {\n  var res = {};\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      res[key] = fn.call(contextObj, obj[key], key, obj);\n    }\n  }\n\n  return res;\n}\n/**\r\n * Deep equal two objects. Support Arrays and Objects.\r\n */\n\n\nfunction deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  var aKeys = Object.keys(a);\n  var bKeys = Object.keys(b);\n\n  for (var _i = 0, _aKeys = aKeys; _i < _aKeys.length; _i++) {\n    var k = _aKeys[_i];\n\n    if (!bKeys.includes(k)) {\n      return false;\n    }\n\n    var aProp = a[k];\n    var bProp = b[k];\n\n    if (isObject(aProp) && isObject(bProp)) {\n      if (!deepEqual(aProp, bProp)) {\n        return false;\n      }\n    } else if (aProp !== bProp) {\n      return false;\n    }\n  }\n\n  for (var _i2 = 0, _bKeys = bKeys; _i2 < _bKeys.length; _i2++) {\n    var _k = _bKeys[_i2];\n\n    if (!aKeys.includes(_k)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isObject(thing) {\n  return thing !== null && _typeof(thing) === 'object';\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a\r\n * params object (e.g. {arg: 'val', arg2: 'val2'})\r\n * Note: You must prepend it with ? when adding it to a URL.\r\n */\n\n\nfunction querystring(querystringParams) {\n  var params = [];\n\n  var _loop = function _loop() {\n    var _Object$entries$_i = _slicedToArray(_Object$entries[_i3], 2),\n        key = _Object$entries$_i[0],\n        value = _Object$entries$_i[1];\n\n    if (Array.isArray(value)) {\n      value.forEach(function (arrayVal) {\n        params.push(encodeURIComponent(key) + '=' + encodeURIComponent(arrayVal));\n      });\n    } else {\n      params.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n    }\n  };\n\n  for (var _i3 = 0, _Object$entries = Object.entries(querystringParams); _i3 < _Object$entries.length; _i3++) {\n    _loop();\n  }\n\n  return params.length ? '&' + params.join('&') : '';\n}\n/**\r\n * Decodes a querystring (e.g. ?arg=val&arg2=val2) into a params object\r\n * (e.g. {arg: 'val', arg2: 'val2'})\r\n */\n\n\nfunction querystringDecode(querystring) {\n  var obj = {};\n  var tokens = querystring.replace(/^\\?/, '').split('&');\n  tokens.forEach(function (token) {\n    if (token) {\n      var _token$split = token.split('='),\n          _token$split2 = _slicedToArray(_token$split, 2),\n          key = _token$split2[0],\n          value = _token$split2[1];\n\n      obj[decodeURIComponent(key)] = decodeURIComponent(value);\n    }\n  });\n  return obj;\n}\n/**\r\n * Extract the query string part of a URL, including the leading question mark (if present).\r\n */\n\n\nfunction extractQuerystring(url) {\n  var queryStart = url.indexOf('?');\n\n  if (!queryStart) {\n    return '';\n  }\n\n  var fragmentStart = url.indexOf('#', queryStart);\n  return url.substring(queryStart, fragmentStart > 0 ? fragmentStart : undefined);\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * @fileoverview SHA-1 cryptographic hash.\r\n * Variable names follow the notation in FIPS PUB 180-3:\r\n * http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf.\r\n *\r\n * Usage:\r\n *   var sha1 = new sha1();\r\n *   sha1.update(bytes);\r\n *   var hash = sha1.digest();\r\n *\r\n * Performance:\r\n *   Chrome 23:   ~400 Mbit/s\r\n *   Firefox 16:  ~250 Mbit/s\r\n *\r\n */\n\n/**\r\n * SHA-1 cryptographic hash constructor.\r\n *\r\n * The properties declared here are discussed in the above algorithm document.\r\n * @constructor\r\n * @final\r\n * @struct\r\n */\n\n\nvar Sha1 = /*#__PURE__*/function () {\n  function Sha1() {\n    _classCallCheck(this, Sha1);\n    /**\r\n     * Holds the previous values of accumulated variables a-e in the compress_\r\n     * function.\r\n     * @private\r\n     */\n\n\n    this.chain_ = [];\n    /**\r\n     * A buffer holding the partially computed hash result.\r\n     * @private\r\n     */\n\n    this.buf_ = [];\n    /**\r\n     * An array of 80 bytes, each a part of the message to be hashed.  Referred to\r\n     * as the message schedule in the docs.\r\n     * @private\r\n     */\n\n    this.W_ = [];\n    /**\r\n     * Contains data needed to pad messages less than 64 bytes.\r\n     * @private\r\n     */\n\n    this.pad_ = [];\n    /**\r\n     * @private {number}\r\n     */\n\n    this.inbuf_ = 0;\n    /**\r\n     * @private {number}\r\n     */\n\n    this.total_ = 0;\n    this.blockSize = 512 / 8;\n    this.pad_[0] = 128;\n\n    for (var i = 1; i < this.blockSize; ++i) {\n      this.pad_[i] = 0;\n    }\n\n    this.reset();\n  }\n\n  _createClass(Sha1, [{\n    key: \"reset\",\n    value: function reset() {\n      this.chain_[0] = 0x67452301;\n      this.chain_[1] = 0xefcdab89;\n      this.chain_[2] = 0x98badcfe;\n      this.chain_[3] = 0x10325476;\n      this.chain_[4] = 0xc3d2e1f0;\n      this.inbuf_ = 0;\n      this.total_ = 0;\n    }\n    /**\r\n     * Internal compress helper function.\r\n     * @param buf Block to compress.\r\n     * @param offset Offset of the block in the buffer.\r\n     * @private\r\n     */\n\n  }, {\n    key: \"compress_\",\n    value: function compress_(buf, offset) {\n      if (!offset) {\n        offset = 0;\n      }\n\n      var W = this.W_; // get 16 big endian words\n\n      if (typeof buf === 'string') {\n        for (var i = 0; i < 16; i++) {\n          // TODO(user): [bug 8140122] Recent versions of Safari for Mac OS and iOS\n          // have a bug that turns the post-increment ++ operator into pre-increment\n          // during JIT compilation.  We have code that depends heavily on SHA-1 for\n          // correctness and which is affected by this bug, so I've removed all uses\n          // of post-increment ++ in which the result value is used.  We can revert\n          // this change once the Safari bug\n          // (https://bugs.webkit.org/show_bug.cgi?id=109036) has been fixed and\n          // most clients have been updated.\n          W[i] = buf.charCodeAt(offset) << 24 | buf.charCodeAt(offset + 1) << 16 | buf.charCodeAt(offset + 2) << 8 | buf.charCodeAt(offset + 3);\n          offset += 4;\n        }\n      } else {\n        for (var _i4 = 0; _i4 < 16; _i4++) {\n          W[_i4] = buf[offset] << 24 | buf[offset + 1] << 16 | buf[offset + 2] << 8 | buf[offset + 3];\n          offset += 4;\n        }\n      } // expand to 80 words\n\n\n      for (var _i5 = 16; _i5 < 80; _i5++) {\n        var t = W[_i5 - 3] ^ W[_i5 - 8] ^ W[_i5 - 14] ^ W[_i5 - 16];\n        W[_i5] = (t << 1 | t >>> 31) & 0xffffffff;\n      }\n\n      var a = this.chain_[0];\n      var b = this.chain_[1];\n      var c = this.chain_[2];\n      var d = this.chain_[3];\n      var e = this.chain_[4];\n      var f, k; // TODO(user): Try to unroll this loop to speed up the computation.\n\n      for (var _i6 = 0; _i6 < 80; _i6++) {\n        if (_i6 < 40) {\n          if (_i6 < 20) {\n            f = d ^ b & (c ^ d);\n            k = 0x5a827999;\n          } else {\n            f = b ^ c ^ d;\n            k = 0x6ed9eba1;\n          }\n        } else {\n          if (_i6 < 60) {\n            f = b & c | d & (b | c);\n            k = 0x8f1bbcdc;\n          } else {\n            f = b ^ c ^ d;\n            k = 0xca62c1d6;\n          }\n        }\n\n        var _t = (a << 5 | a >>> 27) + f + e + k + W[_i6] & 0xffffffff;\n\n        e = d;\n        d = c;\n        c = (b << 30 | b >>> 2) & 0xffffffff;\n        b = a;\n        a = _t;\n      }\n\n      this.chain_[0] = this.chain_[0] + a & 0xffffffff;\n      this.chain_[1] = this.chain_[1] + b & 0xffffffff;\n      this.chain_[2] = this.chain_[2] + c & 0xffffffff;\n      this.chain_[3] = this.chain_[3] + d & 0xffffffff;\n      this.chain_[4] = this.chain_[4] + e & 0xffffffff;\n    }\n  }, {\n    key: \"update\",\n    value: function update(bytes, length) {\n      // TODO(johnlenz): tighten the function signature and remove this check\n      if (bytes == null) {\n        return;\n      }\n\n      if (length === undefined) {\n        length = bytes.length;\n      }\n\n      var lengthMinusBlock = length - this.blockSize;\n      var n = 0; // Using local instead of member variables gives ~5% speedup on Firefox 16.\n\n      var buf = this.buf_;\n      var inbuf = this.inbuf_; // The outer while loop should execute at most twice.\n\n      while (n < length) {\n        // When we have no data in the block to top up, we can directly process the\n        // input buffer (assuming it contains sufficient data). This gives ~25%\n        // speedup on Chrome 23 and ~15% speedup on Firefox 16, but requires that\n        // the data is provided in large chunks (or in multiples of 64 bytes).\n        if (inbuf === 0) {\n          while (n <= lengthMinusBlock) {\n            this.compress_(bytes, n);\n            n += this.blockSize;\n          }\n        }\n\n        if (typeof bytes === 'string') {\n          while (n < length) {\n            buf[inbuf] = bytes.charCodeAt(n);\n            ++inbuf;\n            ++n;\n\n            if (inbuf === this.blockSize) {\n              this.compress_(buf);\n              inbuf = 0; // Jump to the outer loop so we use the full-block optimization.\n\n              break;\n            }\n          }\n        } else {\n          while (n < length) {\n            buf[inbuf] = bytes[n];\n            ++inbuf;\n            ++n;\n\n            if (inbuf === this.blockSize) {\n              this.compress_(buf);\n              inbuf = 0; // Jump to the outer loop so we use the full-block optimization.\n\n              break;\n            }\n          }\n        }\n      }\n\n      this.inbuf_ = inbuf;\n      this.total_ += length;\n    }\n    /** @override */\n\n  }, {\n    key: \"digest\",\n    value: function digest() {\n      var digest = [];\n      var totalBits = this.total_ * 8; // Add pad 0x80 0x00*.\n\n      if (this.inbuf_ < 56) {\n        this.update(this.pad_, 56 - this.inbuf_);\n      } else {\n        this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));\n      } // Add # bits.\n\n\n      for (var i = this.blockSize - 1; i >= 56; i--) {\n        this.buf_[i] = totalBits & 255;\n        totalBits /= 256; // Don't use bit-shifting here!\n      }\n\n      this.compress_(this.buf_);\n      var n = 0;\n\n      for (var _i7 = 0; _i7 < 5; _i7++) {\n        for (var j = 24; j >= 0; j -= 8) {\n          digest[n] = this.chain_[_i7] >> j & 255;\n          ++n;\n        }\n      }\n\n      return digest;\n    }\n  }]);\n\n  return Sha1;\n}();\n/**\r\n * Helper to make a Subscribe function (just like Promise helps make a\r\n * Thenable).\r\n *\r\n * @param executor Function which can make calls to a single Observer\r\n *     as a proxy.\r\n * @param onNoObservers Callback when count of Observers goes to zero.\r\n */\n\n\nfunction createSubscribe(executor, onNoObservers) {\n  var proxy = new ObserverProxy(executor, onNoObservers);\n  return proxy.subscribe.bind(proxy);\n}\n/**\r\n * Implement fan-out for any number of Observers attached via a subscribe\r\n * function.\r\n */\n\n\nvar ObserverProxy = /*#__PURE__*/function () {\n  /**\r\n   * @param executor Function which can make calls to a single Observer\r\n   *     as a proxy.\r\n   * @param onNoObservers Callback when count of Observers goes to zero.\r\n   */\n  function ObserverProxy(executor, onNoObservers) {\n    var _this4 = this;\n\n    _classCallCheck(this, ObserverProxy);\n\n    this.observers = [];\n    this.unsubscribes = [];\n    this.observerCount = 0; // Micro-task scheduling by calling task.then().\n\n    this.task = Promise.resolve();\n    this.finalized = false;\n    this.onNoObservers = onNoObservers; // Call the executor asynchronously so subscribers that are called\n    // synchronously after the creation of the subscribe function\n    // can still receive the very first value generated in the executor.\n\n    this.task.then(function () {\n      executor(_this4);\n    })[\"catch\"](function (e) {\n      _this4.error(e);\n    });\n  }\n\n  _createClass(ObserverProxy, [{\n    key: \"next\",\n    value: function next(value) {\n      this.forEachObserver(function (observer) {\n        observer.next(value);\n      });\n    }\n  }, {\n    key: \"error\",\n    value: function error(_error) {\n      this.forEachObserver(function (observer) {\n        observer.error(_error);\n      });\n      this.close(_error);\n    }\n  }, {\n    key: \"complete\",\n    value: function complete() {\n      this.forEachObserver(function (observer) {\n        observer.complete();\n      });\n      this.close();\n    }\n    /**\r\n     * Subscribe function that can be used to add an Observer to the fan-out list.\r\n     *\r\n     * - We require that no event is sent to a subscriber sychronously to their\r\n     *   call to subscribe().\r\n     */\n\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(nextOrObserver, error, complete) {\n      var _this5 = this;\n\n      var observer;\n\n      if (nextOrObserver === undefined && error === undefined && complete === undefined) {\n        throw new Error('Missing Observer.');\n      } // Assemble an Observer object when passed as callback functions.\n\n\n      if (implementsAnyMethods(nextOrObserver, ['next', 'error', 'complete'])) {\n        observer = nextOrObserver;\n      } else {\n        observer = {\n          next: nextOrObserver,\n          error: error,\n          complete: complete\n        };\n      }\n\n      if (observer.next === undefined) {\n        observer.next = noop;\n      }\n\n      if (observer.error === undefined) {\n        observer.error = noop;\n      }\n\n      if (observer.complete === undefined) {\n        observer.complete = noop;\n      }\n\n      var unsub = this.unsubscribeOne.bind(this, this.observers.length); // Attempt to subscribe to a terminated Observable - we\n      // just respond to the Observer with the final error or complete\n      // event.\n\n      if (this.finalized) {\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        this.task.then(function () {\n          try {\n            if (_this5.finalError) {\n              observer.error(_this5.finalError);\n            } else {\n              observer.complete();\n            }\n          } catch (e) {// nothing\n          }\n\n          return;\n        });\n      }\n\n      this.observers.push(observer);\n      return unsub;\n    } // Unsubscribe is synchronous - we guarantee that no events are sent to\n    // any unsubscribed Observer.\n\n  }, {\n    key: \"unsubscribeOne\",\n    value: function unsubscribeOne(i) {\n      if (this.observers === undefined || this.observers[i] === undefined) {\n        return;\n      }\n\n      delete this.observers[i];\n      this.observerCount -= 1;\n\n      if (this.observerCount === 0 && this.onNoObservers !== undefined) {\n        this.onNoObservers(this);\n      }\n    }\n  }, {\n    key: \"forEachObserver\",\n    value: function forEachObserver(fn) {\n      if (this.finalized) {\n        // Already closed by previous event....just eat the additional values.\n        return;\n      } // Since sendOne calls asynchronously - there is no chance that\n      // this.observers will become undefined.\n\n\n      for (var i = 0; i < this.observers.length; i++) {\n        this.sendOne(i, fn);\n      }\n    } // Call the Observer via one of it's callback function. We are careful to\n    // confirm that the observe has not been unsubscribed since this asynchronous\n    // function had been queued.\n\n  }, {\n    key: \"sendOne\",\n    value: function sendOne(i, fn) {\n      var _this6 = this; // Execute the callback asynchronously\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n\n\n      this.task.then(function () {\n        if (_this6.observers !== undefined && _this6.observers[i] !== undefined) {\n          try {\n            fn(_this6.observers[i]);\n          } catch (e) {\n            // Ignore exceptions raised in Observers or missing methods of an\n            // Observer.\n            // Log error to console. b/31404806\n            if (typeof console !== 'undefined' && console.error) {\n              console.error(e);\n            }\n          }\n        }\n      });\n    }\n  }, {\n    key: \"close\",\n    value: function close(err) {\n      var _this7 = this;\n\n      if (this.finalized) {\n        return;\n      }\n\n      this.finalized = true;\n\n      if (err !== undefined) {\n        this.finalError = err;\n      } // Proxy is no longer needed - garbage collect references\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n\n\n      this.task.then(function () {\n        _this7.observers = undefined;\n        _this7.onNoObservers = undefined;\n      });\n    }\n  }]);\n\n  return ObserverProxy;\n}();\n/** Turn synchronous function into one called asynchronously. */\n// eslint-disable-next-line @typescript-eslint/ban-types\n\n\nfunction async(fn, onError) {\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    Promise.resolve(true).then(function () {\n      fn.apply(void 0, args);\n    })[\"catch\"](function (error) {\n      if (onError) {\n        onError(error);\n      }\n    });\n  };\n}\n/**\r\n * Return true if the object passed in implements any of the named methods.\r\n */\n\n\nfunction implementsAnyMethods(obj, methods) {\n  if (_typeof(obj) !== 'object' || obj === null) {\n    return false;\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = methods[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var method = _step.value;\n\n      if (method in obj && typeof obj[method] === 'function') {\n        return true;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction noop() {// do nothing\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Check to make sure the appropriate number of arguments are provided for a public function.\r\n * Throws an error if it fails.\r\n *\r\n * @param fnName The function name\r\n * @param minCount The minimum number of arguments to allow for the function call\r\n * @param maxCount The maximum number of argument to allow for the function call\r\n * @param argCount The actual number of arguments provided.\r\n */\n\n\nvar validateArgCount = function validateArgCount(fnName, minCount, maxCount, argCount) {\n  var argError;\n\n  if (argCount < minCount) {\n    argError = 'at least ' + minCount;\n  } else if (argCount > maxCount) {\n    argError = maxCount === 0 ? 'none' : 'no more than ' + maxCount;\n  }\n\n  if (argError) {\n    var error = fnName + ' failed: Was called with ' + argCount + (argCount === 1 ? ' argument.' : ' arguments.') + ' Expects ' + argError + '.';\n    throw new Error(error);\n  }\n};\n/**\r\n * Generates a string to prefix an error message about failed argument validation\r\n *\r\n * @param fnName The function name\r\n * @param argName The name of the argument\r\n * @return The prefix to add to the error thrown for validation.\r\n */\n\n\nfunction errorPrefix(fnName, argName) {\n  return \"\".concat(fnName, \" failed: \").concat(argName, \" argument \");\n}\n/**\r\n * @param fnName\r\n * @param argumentNumber\r\n * @param namespace\r\n * @param optional\r\n */\n\n\nfunction validateNamespace(fnName, namespace, optional) {\n  if (optional && !namespace) {\n    return;\n  }\n\n  if (typeof namespace !== 'string') {\n    //TODO: I should do more validation here. We only allow certain chars in namespaces.\n    throw new Error(errorPrefix(fnName, 'namespace') + 'must be a valid firebase namespace.');\n  }\n}\n\nfunction validateCallback(fnName, argumentName, // eslint-disable-next-line @typescript-eslint/ban-types\ncallback, optional) {\n  if (optional && !callback) {\n    return;\n  }\n\n  if (typeof callback !== 'function') {\n    throw new Error(errorPrefix(fnName, argumentName) + 'must be a valid function.');\n  }\n}\n\nfunction validateContextObject(fnName, argumentName, context, optional) {\n  if (optional && !context) {\n    return;\n  }\n\n  if (_typeof(context) !== 'object' || context === null) {\n    throw new Error(errorPrefix(fnName, argumentName) + 'must be a valid context object.');\n  }\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n// Code originally came from goog.crypt.stringToUtf8ByteArray, but for some reason they\n// automatically replaced '\\r\\n' with '\\n', and they didn't handle surrogate pairs,\n// so it's been modified.\n// Note that not all Unicode characters appear as single characters in JavaScript strings.\n// fromCharCode returns the UTF-16 encoding of a character - so some Unicode characters\n// use 2 characters in Javascript.  All 4-byte UTF-8 characters begin with a first\n// character in the range 0xD800 - 0xDBFF (the first character of a so-called surrogate\n// pair).\n// See http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.3\n\n/**\r\n * @param {string} str\r\n * @return {Array}\r\n */\n\n\nvar stringToByteArray = function stringToByteArray(str) {\n  var out = [];\n  var p = 0;\n\n  for (var i = 0; i < str.length; i++) {\n    var c = str.charCodeAt(i); // Is this the lead surrogate in a surrogate pair?\n\n    if (c >= 0xd800 && c <= 0xdbff) {\n      var high = c - 0xd800; // the high 10 bits.\n\n      i++;\n      assert(i < str.length, 'Surrogate pair missing trail surrogate.');\n      var low = str.charCodeAt(i) - 0xdc00; // the low 10 bits.\n\n      c = 0x10000 + (high << 10) + low;\n    }\n\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = c >> 6 | 192;\n      out[p++] = c & 63 | 128;\n    } else if (c < 65536) {\n      out[p++] = c >> 12 | 224;\n      out[p++] = c >> 6 & 63 | 128;\n      out[p++] = c & 63 | 128;\n    } else {\n      out[p++] = c >> 18 | 240;\n      out[p++] = c >> 12 & 63 | 128;\n      out[p++] = c >> 6 & 63 | 128;\n      out[p++] = c & 63 | 128;\n    }\n  }\n\n  return out;\n};\n/**\r\n * Calculate length without actually converting; useful for doing cheaper validation.\r\n * @param {string} str\r\n * @return {number}\r\n */\n\n\nvar stringLength = function stringLength(str) {\n  var p = 0;\n\n  for (var i = 0; i < str.length; i++) {\n    var c = str.charCodeAt(i);\n\n    if (c < 128) {\n      p++;\n    } else if (c < 2048) {\n      p += 2;\n    } else if (c >= 0xd800 && c <= 0xdbff) {\n      // Lead surrogate of a surrogate pair.  The pair together will take 4 bytes to represent.\n      p += 4;\n      i++; // skip trail surrogate.\n    } else {\n      p += 3;\n    }\n  }\n\n  return p;\n};\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * The amount of milliseconds to exponentially increase.\r\n */\n\n\nvar DEFAULT_INTERVAL_MILLIS = 1000;\n/**\r\n * The factor to backoff by.\r\n * Should be a number greater than 1.\r\n */\n\nvar DEFAULT_BACKOFF_FACTOR = 2;\n/**\r\n * The maximum milliseconds to increase to.\r\n *\r\n * <p>Visible for testing\r\n */\n\nvar MAX_VALUE_MILLIS = 4 * 60 * 60 * 1000; // Four hours, like iOS and Android.\n\n/**\r\n * The percentage of backoff time to randomize by.\r\n * See\r\n * http://go/safe-client-behavior#step-1-determine-the-appropriate-retry-interval-to-handle-spike-traffic\r\n * for context.\r\n *\r\n * <p>Visible for testing\r\n */\n\nvar RANDOM_FACTOR = 0.5;\n/**\r\n * Based on the backoff method from\r\n * https://github.com/google/closure-library/blob/master/closure/goog/math/exponentialbackoff.js.\r\n * Extracted here so we don't need to pass metadata and a stateful ExponentialBackoff object around.\r\n */\n\nfunction calculateBackoffMillis(backoffCount) {\n  var intervalMillis = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_INTERVAL_MILLIS;\n  var backoffFactor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_BACKOFF_FACTOR; // Calculates an exponentially increasing value.\n  // Deviation: calculates value from count and a constant interval, so we only need to save value\n  // and count to restore state.\n\n  var currBaseValue = intervalMillis * Math.pow(backoffFactor, backoffCount); // A random \"fuzz\" to avoid waves of retries.\n  // Deviation: randomFactor is required.\n\n  var randomWait = Math.round( // A fraction of the backoff value to add/subtract.\n  // Deviation: changes multiplication order to improve readability.\n  RANDOM_FACTOR * currBaseValue * ( // A random float (rounded to int by Math.round above) in the range [-1, 1]. Determines\n  // if we add or subtract.\n  Math.random() - 0.5) * 2); // Limits backoff to max to avoid effectively permanent backoff.\n\n  return Math.min(MAX_VALUE_MILLIS, currBaseValue + randomWait);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Provide English ordinal letters after a number\r\n */\n\n\nfunction ordinal(i) {\n  if (!Number.isFinite(i)) {\n    return \"\".concat(i);\n  }\n\n  return i + indicator(i);\n}\n\nfunction indicator(i) {\n  i = Math.abs(i);\n  var cent = i % 100;\n\n  if (cent >= 10 && cent <= 20) {\n    return 'th';\n  }\n\n  var dec = i % 10;\n\n  if (dec === 1) {\n    return 'st';\n  }\n\n  if (dec === 2) {\n    return 'nd';\n  }\n\n  if (dec === 3) {\n    return 'rd';\n  }\n\n  return 'th';\n}\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction getModularInstance(service) {\n  if (service && service._delegate) {\n    return service._delegate;\n  } else {\n    return service;\n  }\n}\n\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9pbmRleC5lc20yMDE3LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL3NyYy9jb25zdGFudHMudHM/MzViMCIsIndlYnBhY2s6Ly8vLi4vc3JjL2Fzc2VydC50cz8xMmY4Iiwid2VicGFjazovLy8uLi9zcmMvY3J5cHQudHM/M2JhMSIsIndlYnBhY2s6Ly8vLi4vc3JjL2RlZXBDb3B5LnRzP2U5MTQiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9kZWZlcnJlZC50cz8yMTc2Iiwid2VicGFjazovLy8uLi9zcmMvZW11bGF0b3IudHM/OTBmMiIsIndlYnBhY2s6Ly8vLi4vc3JjL2Vudmlyb25tZW50LnRzPzE0NmUiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9lcnJvcnMudHM/M2Q1YiIsIndlYnBhY2s6Ly8vLi4vc3JjL2pzb24udHM/MGRiNCIsIndlYnBhY2s6Ly8vLi4vc3JjL2p3dC50cz8xNTZmIiwid2VicGFjazovLy8uLi9zcmMvb2JqLnRzPzc0NTkiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9xdWVyeS50cz8xZTM4Iiwid2VicGFjazovLy8uLi9zcmMvc2hhMS50cz8zODNiIiwid2VicGFjazovLy8uLi9zcmMvc3Vic2NyaWJlLnRzPzk4ODMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy92YWxpZGF0aW9uLnRzP2RlNmYiLCJ3ZWJwYWNrOi8vLy4uL3NyYy91dGY4LnRzPzEzYzUiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9leHBvbmVudGlhbF9iYWNrb2ZmLnRzPzBjNzAiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9mb3JtYXR0ZXJzLnRzP2ZkNWMiLCJ3ZWJwYWNrOi8vLy4uL3NyYy9jb21wYXQudHM/NDNlOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgRmlyZWJhc2UgY29uc3RhbnRzLiAgU29tZSBvZiB0aGVzZSAoQGRlZmluZXMpIGNhbiBiZSBvdmVycmlkZGVuIGF0IGNvbXBpbGUtdGltZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgQ09OU1RBTlRTID0ge1xuICAvKipcbiAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBjbGllbnQgTm9kZS5qcyBTREsuXG4gICAqL1xuICBOT0RFX0NMSUVOVDogZmFsc2UsXG4gIC8qKlxuICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIEFkbWluIE5vZGUuanMgU0RLLlxuICAgKi9cbiAgTk9ERV9BRE1JTjogZmFsc2UsXG5cbiAgLyoqXG4gICAqIEZpcmViYXNlIFNESyBWZXJzaW9uXG4gICAqL1xuICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059J1xufTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENPTlNUQU5UUyB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuLyoqXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIHByb3ZpZGVkIGFzc2VydGlvbiBpcyBmYWxzeVxuICovXG5leHBvcnQgY29uc3QgYXNzZXJ0ID0gZnVuY3Rpb24gKGFzc2VydGlvbjogdW5rbm93biwgbWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gIGlmICghYXNzZXJ0aW9uKSB7XG4gICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IobWVzc2FnZSk7XG4gIH1cbn07XG5cbi8qKlxuICogUmV0dXJucyBhbiBFcnJvciBvYmplY3Qgc3VpdGFibGUgZm9yIHRocm93aW5nLlxuICovXG5leHBvcnQgY29uc3QgYXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZTogc3RyaW5nKTogRXJyb3Ige1xuICByZXR1cm4gbmV3IEVycm9yKFxuICAgICdGaXJlYmFzZSBEYXRhYmFzZSAoJyArXG4gICAgICBDT05TVEFOVFMuU0RLX1ZFUlNJT04gK1xuICAgICAgJykgSU5URVJOQUwgQVNTRVJUIEZBSUxFRDogJyArXG4gICAgICBtZXNzYWdlXG4gICk7XG59O1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkgPSBmdW5jdGlvbiAoc3RyOiBzdHJpbmcpOiBudW1iZXJbXSB7XG4gIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXG4gIGNvbnN0IG91dDogbnVtYmVyW10gPSBbXTtcbiAgbGV0IHAgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgaWYgKGMgPCAxMjgpIHtcbiAgICAgIG91dFtwKytdID0gYztcbiAgICB9IGVsc2UgaWYgKGMgPCAyMDQ4KSB7XG4gICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xuICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiZcbiAgICAgIGkgKyAxIDwgc3RyLmxlbmd0aCAmJlxuICAgICAgKHN0ci5jaGFyQ29kZUF0KGkgKyAxKSAmIDB4ZmMwMCkgPT09IDB4ZGMwMFxuICAgICkge1xuICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcbiAgICAgIGMgPSAweDEwMDAwICsgKChjICYgMHgwM2ZmKSA8PCAxMCkgKyAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4MDNmZik7XG4gICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcbiAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcbiAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xuICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XG4gICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcbiAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XG4gICAgfVxuICB9XG4gIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFR1cm5zIGFuIGFycmF5IG9mIG51bWJlcnMgaW50byB0aGUgc3RyaW5nIGdpdmVuIGJ5IHRoZSBjb25jYXRlbmF0aW9uIG9mIHRoZVxuICogY2hhcmFjdGVycyB0byB3aGljaCB0aGUgbnVtYmVycyBjb3JyZXNwb25kLlxuICogQHBhcmFtIGJ5dGVzIEFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGNoYXJhY3RlcnMuXG4gKiBAcmV0dXJuIFN0cmluZ2lmaWNhdGlvbiBvZiB0aGUgYXJyYXkuXG4gKi9cbmNvbnN0IGJ5dGVBcnJheVRvU3RyaW5nID0gZnVuY3Rpb24gKGJ5dGVzOiBudW1iZXJbXSk6IHN0cmluZyB7XG4gIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXG4gIGNvbnN0IG91dDogc3RyaW5nW10gPSBbXTtcbiAgbGV0IHBvcyA9IDAsXG4gICAgYyA9IDA7XG4gIHdoaWxlIChwb3MgPCBieXRlcy5sZW5ndGgpIHtcbiAgICBjb25zdCBjMSA9IGJ5dGVzW3BvcysrXTtcbiAgICBpZiAoYzEgPCAxMjgpIHtcbiAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZShjMSk7XG4gICAgfSBlbHNlIGlmIChjMSA+IDE5MSAmJiBjMSA8IDIyNCkge1xuICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XG4gICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDMxKSA8PCA2KSB8IChjMiAmIDYzKSk7XG4gICAgfSBlbHNlIGlmIChjMSA+IDIzOSAmJiBjMSA8IDM2NSkge1xuICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcbiAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xuICAgICAgY29uc3QgYzMgPSBieXRlc1twb3MrK107XG4gICAgICBjb25zdCBjNCA9IGJ5dGVzW3BvcysrXTtcbiAgICAgIGNvbnN0IHUgPVxuICAgICAgICAoKChjMSAmIDcpIDw8IDE4KSB8ICgoYzIgJiA2MykgPDwgMTIpIHwgKChjMyAmIDYzKSA8PCA2KSB8IChjNCAmIDYzKSkgLVxuICAgICAgICAweDEwMDAwO1xuICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZDgwMCArICh1ID4+IDEwKSk7XG4gICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkYzAwICsgKHUgJiAxMDIzKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xuICAgICAgY29uc3QgYzMgPSBieXRlc1twb3MrK107XG4gICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoXG4gICAgICAgICgoYzEgJiAxNSkgPDwgMTIpIHwgKChjMiAmIDYzKSA8PCA2KSB8IChjMyAmIDYzKVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG91dC5qb2luKCcnKTtcbn07XG5cbmludGVyZmFjZSBCYXNlNjQge1xuICBieXRlVG9DaGFyTWFwXzogeyBba2V5OiBudW1iZXJdOiBzdHJpbmcgfSB8IG51bGw7XG4gIGNoYXJUb0J5dGVNYXBfOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9IHwgbnVsbDtcbiAgYnl0ZVRvQ2hhck1hcFdlYlNhZmVfOiB7IFtrZXk6IG51bWJlcl06IHN0cmluZyB9IHwgbnVsbDtcbiAgY2hhclRvQnl0ZU1hcFdlYlNhZmVfOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9IHwgbnVsbDtcbiAgRU5DT0RFRF9WQUxTX0JBU0U6IHN0cmluZztcbiAgcmVhZG9ubHkgRU5DT0RFRF9WQUxTOiBzdHJpbmc7XG4gIHJlYWRvbmx5IEVOQ09ERURfVkFMU19XRUJTQUZFOiBzdHJpbmc7XG4gIEhBU19OQVRJVkVfU1VQUE9SVDogYm9vbGVhbjtcbiAgZW5jb2RlQnl0ZUFycmF5KGlucHV0OiBudW1iZXJbXSB8IFVpbnQ4QXJyYXksIHdlYlNhZmU/OiBib29sZWFuKTogc3RyaW5nO1xuICBlbmNvZGVTdHJpbmcoaW5wdXQ6IHN0cmluZywgd2ViU2FmZT86IGJvb2xlYW4pOiBzdHJpbmc7XG4gIGRlY29kZVN0cmluZyhpbnB1dDogc3RyaW5nLCB3ZWJTYWZlOiBib29sZWFuKTogc3RyaW5nO1xuICBkZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dDogc3RyaW5nLCB3ZWJTYWZlOiBib29sZWFuKTogbnVtYmVyW107XG4gIGluaXRfKCk6IHZvaWQ7XG59XG5cbi8vIFdlIGRlZmluZSBpdCBhcyBhbiBvYmplY3QgbGl0ZXJhbCBpbnN0ZWFkIG9mIGEgY2xhc3MgYmVjYXVzZSBhIGNsYXNzIGNvbXBpbGVkIGRvd24gdG8gZXM1IGNhbid0XG4vLyBiZSB0cmVlc2hha2VkLiBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC9pc3N1ZXMvMTY5MVxuLy8gU3RhdGljIGxvb2t1cCBtYXBzLCBsYXppbHkgcG9wdWxhdGVkIGJ5IGluaXRfKClcbmV4cG9ydCBjb25zdCBiYXNlNjQ6IEJhc2U2NCA9IHtcbiAgLyoqXG4gICAqIE1hcHMgYnl0ZXMgdG8gY2hhcmFjdGVycy5cbiAgICovXG4gIGJ5dGVUb0NoYXJNYXBfOiBudWxsLFxuXG4gIC8qKlxuICAgKiBNYXBzIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXG4gICAqL1xuICBjaGFyVG9CeXRlTWFwXzogbnVsbCxcblxuICAvKipcbiAgICogTWFwcyBieXRlcyB0byB3ZWJzYWZlIGNoYXJhY3RlcnMuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBieXRlVG9DaGFyTWFwV2ViU2FmZV86IG51bGwsXG5cbiAgLyoqXG4gICAqIE1hcHMgd2Vic2FmZSBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2hhclRvQnl0ZU1hcFdlYlNhZmVfOiBudWxsLFxuXG4gIC8qKlxuICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldCwgc2hhcmVkIGJldHdlZW5cbiAgICogRU5DT0RFRF9WQUxTIGFuZCBFTkNPREVEX1ZBTFNfV0VCU0FGRVxuICAgKi9cbiAgRU5DT0RFRF9WQUxTX0JBU0U6XG4gICAgJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJyArICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicgKyAnMDEyMzQ1Njc4OScsXG5cbiAgLyoqXG4gICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LiBWYWx1ZSA2NCAoPSkgaXMgc3BlY2lhbDsgaXQgbWVhbnMgXCJub3RoaW5nLlwiXG4gICAqL1xuICBnZXQgRU5DT0RFRF9WQUxTKCkge1xuICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJysvPSc7XG4gIH0sXG5cbiAgLyoqXG4gICAqIE91ciB3ZWJzYWZlIGFscGhhYmV0LlxuICAgKi9cbiAgZ2V0IEVOQ09ERURfVkFMU19XRUJTQUZFKCkge1xuICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJy1fLic7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhpcyBicm93c2VyIHN1cHBvcnRzIHRoZSBhdG9iIGFuZCBidG9hIGZ1bmN0aW9ucy4gVGhpcyBleHRlbnNpb25cbiAgICogc3RhcnRlZCBhdCBNb3ppbGxhIGJ1dCBpcyBub3cgaW1wbGVtZW50ZWQgYnkgbWFueSBicm93c2Vycy4gV2UgdXNlIHRoZVxuICAgKiBBU1NVTUVfKiB2YXJpYWJsZXMgdG8gYXZvaWQgcHVsbGluZyBpbiB0aGUgZnVsbCB1c2VyYWdlbnQgZGV0ZWN0aW9uIGxpYnJhcnlcbiAgICogYnV0IHN0aWxsIGFsbG93aW5nIHRoZSBzdGFuZGFyZCBwZXItYnJvd3NlciBjb21waWxhdGlvbnMuXG4gICAqXG4gICAqL1xuICBIQVNfTkFUSVZFX1NVUFBPUlQ6IHR5cGVvZiBhdG9iID09PSAnZnVuY3Rpb24nLFxuXG4gIC8qKlxuICAgKiBCYXNlNjQtZW5jb2RlIGFuIGFycmF5IG9mIGJ5dGVzLlxuICAgKlxuICAgKiBAcGFyYW0gaW5wdXQgQW4gYXJyYXkgb2YgYnl0ZXMgKG51bWJlcnMgd2l0aFxuICAgKiAgICAgdmFsdWUgaW4gWzAsIDI1NV0pIHRvIGVuY29kZS5cbiAgICogQHBhcmFtIHdlYlNhZmUgQm9vbGVhbiBpbmRpY2F0aW5nIHdlIHNob3VsZCB1c2UgdGhlXG4gICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cbiAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxuICAgKi9cbiAgZW5jb2RlQnl0ZUFycmF5KGlucHV0OiBudW1iZXJbXSB8IFVpbnQ4QXJyYXksIHdlYlNhZmU/OiBib29sZWFuKTogc3RyaW5nIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICB0aHJvdyBFcnJvcignZW5jb2RlQnl0ZUFycmF5IHRha2VzIGFuIGFycmF5IGFzIGEgcGFyYW1ldGVyJyk7XG4gICAgfVxuXG4gICAgdGhpcy5pbml0XygpO1xuXG4gICAgY29uc3QgYnl0ZVRvQ2hhck1hcCA9IHdlYlNhZmVcbiAgICAgID8gdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV8hXG4gICAgICA6IHRoaXMuYnl0ZVRvQ2hhck1hcF8hO1xuXG4gICAgY29uc3Qgb3V0cHV0ID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICBjb25zdCBieXRlMSA9IGlucHV0W2ldO1xuICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSArIDEgPCBpbnB1dC5sZW5ndGg7XG4gICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGlucHV0W2kgKyAxXSA6IDA7XG4gICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpICsgMiA8IGlucHV0Lmxlbmd0aDtcbiAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gaW5wdXRbaSArIDJdIDogMDtcblxuICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSBieXRlMSA+PiAyO1xuICAgICAgY29uc3Qgb3V0Qnl0ZTIgPSAoKGJ5dGUxICYgMHgwMykgPDwgNCkgfCAoYnl0ZTIgPj4gNCk7XG4gICAgICBsZXQgb3V0Qnl0ZTMgPSAoKGJ5dGUyICYgMHgwZikgPDwgMikgfCAoYnl0ZTMgPj4gNik7XG4gICAgICBsZXQgb3V0Qnl0ZTQgPSBieXRlMyAmIDB4M2Y7XG5cbiAgICAgIGlmICghaGF2ZUJ5dGUzKSB7XG4gICAgICAgIG91dEJ5dGU0ID0gNjQ7XG5cbiAgICAgICAgaWYgKCFoYXZlQnl0ZTIpIHtcbiAgICAgICAgICBvdXRCeXRlMyA9IDY0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG91dHB1dC5wdXNoKFxuICAgICAgICBieXRlVG9DaGFyTWFwW291dEJ5dGUxXSxcbiAgICAgICAgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMl0sXG4gICAgICAgIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTNdLFxuICAgICAgICBieXRlVG9DaGFyTWFwW291dEJ5dGU0XVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBCYXNlNjQtZW5jb2RlIGEgc3RyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0gaW5wdXQgQSBzdHJpbmcgdG8gZW5jb2RlLlxuICAgKiBAcGFyYW0gd2ViU2FmZSBJZiB0cnVlLCB3ZSBzaG91bGQgdXNlIHRoZVxuICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXG4gICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cbiAgICovXG4gIGVuY29kZVN0cmluZyhpbnB1dDogc3RyaW5nLCB3ZWJTYWZlPzogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcbiAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXG4gICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XG4gICAgICByZXR1cm4gYnRvYShpbnB1dCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmVuY29kZUJ5dGVBcnJheShzdHJpbmdUb0J5dGVBcnJheShpbnB1dCksIHdlYlNhZmUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0gaW5wdXQgdG8gZGVjb2RlLlxuICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlXG4gICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cbiAgICogQHJldHVybiBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxuICAgKi9cbiAgZGVjb2RlU3RyaW5nKGlucHV0OiBzdHJpbmcsIHdlYlNhZmU6IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XG4gICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxuICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xuICAgICAgcmV0dXJuIGF0b2IoaW5wdXQpO1xuICAgIH1cbiAgICByZXR1cm4gYnl0ZUFycmF5VG9TdHJpbmcodGhpcy5kZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxuICAgKlxuICAgKiBJbiBiYXNlLTY0IGRlY29kaW5nLCBncm91cHMgb2YgZm91ciBjaGFyYWN0ZXJzIGFyZSBjb252ZXJ0ZWQgaW50byB0aHJlZVxuICAgKiBieXRlcy4gIElmIHRoZSBlbmNvZGVyIGRpZCBub3QgYXBwbHkgcGFkZGluZywgdGhlIGlucHV0IGxlbmd0aCBtYXkgbm90XG4gICAqIGJlIGEgbXVsdGlwbGUgb2YgNC5cbiAgICpcbiAgICogSW4gdGhpcyBjYXNlLCB0aGUgbGFzdCBncm91cCB3aWxsIGhhdmUgZmV3ZXIgdGhhbiA0IGNoYXJhY3RlcnMsIGFuZFxuICAgKiBwYWRkaW5nIHdpbGwgYmUgaW5mZXJyZWQuICBJZiB0aGUgZ3JvdXAgaGFzIG9uZSBvciB0d28gY2hhcmFjdGVycywgaXQgZGVjb2Rlc1xuICAgKiB0byBvbmUgYnl0ZS4gIElmIHRoZSBncm91cCBoYXMgdGhyZWUgY2hhcmFjdGVycywgaXQgZGVjb2RlcyB0byB0d28gYnl0ZXMuXG4gICAqXG4gICAqIEBwYXJhbSBpbnB1dCBJbnB1dCB0byBkZWNvZGUuXG4gICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGUgd2ViLXNhZmUgYWxwaGFiZXQuXG4gICAqIEByZXR1cm4gYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxuICAgKi9cbiAgZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQ6IHN0cmluZywgd2ViU2FmZTogYm9vbGVhbik6IG51bWJlcltdIHtcbiAgICB0aGlzLmluaXRfKCk7XG5cbiAgICBjb25zdCBjaGFyVG9CeXRlTWFwID0gd2ViU2FmZVxuICAgICAgPyB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXyFcbiAgICAgIDogdGhpcy5jaGFyVG9CeXRlTWFwXyE7XG5cbiAgICBjb25zdCBvdXRwdXQ6IG51bWJlcltdID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgKSB7XG4gICAgICBjb25zdCBieXRlMSA9IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkrKyldO1xuXG4gICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xuICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiAwO1xuICAgICAgKytpO1xuXG4gICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpIDwgaW5wdXQubGVuZ3RoO1xuICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcbiAgICAgICsraTtcblxuICAgICAgY29uc3QgaGF2ZUJ5dGU0ID0gaSA8IGlucHV0Lmxlbmd0aDtcbiAgICAgIGNvbnN0IGJ5dGU0ID0gaGF2ZUJ5dGU0ID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XG4gICAgICArK2k7XG5cbiAgICAgIGlmIChieXRlMSA9PSBudWxsIHx8IGJ5dGUyID09IG51bGwgfHwgYnl0ZTMgPT0gbnVsbCB8fCBieXRlNCA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IEVycm9yKCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG91dEJ5dGUxID0gKGJ5dGUxIDw8IDIpIHwgKGJ5dGUyID4+IDQpO1xuICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTEpO1xuXG4gICAgICBpZiAoYnl0ZTMgIT09IDY0KSB7XG4gICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMiA8PCA0KSAmIDB4ZjApIHwgKGJ5dGUzID4+IDIpO1xuICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMik7XG5cbiAgICAgICAgaWYgKGJ5dGU0ICE9PSA2NCkge1xuICAgICAgICAgIGNvbnN0IG91dEJ5dGUzID0gKChieXRlMyA8PCA2KSAmIDB4YzApIHwgYnl0ZTQ7XG4gICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfSxcblxuICAvKipcbiAgICogTGF6eSBzdGF0aWMgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uIENhbGxlZCBiZWZvcmVcbiAgICogYWNjZXNzaW5nIGFueSBvZiB0aGUgc3RhdGljIG1hcCB2YXJpYWJsZXMuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpbml0XygpIHtcbiAgICBpZiAoIXRoaXMuYnl0ZVRvQ2hhck1hcF8pIHtcbiAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF8gPSB7fTtcbiAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF8gPSB7fTtcbiAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfID0ge307XG4gICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXyA9IHt9O1xuXG4gICAgICAvLyBXZSB3YW50IHF1aWNrIG1hcHBpbmdzIGJhY2sgYW5kIGZvcnRoLCBzbyB3ZSBwcmVjb21wdXRlIHR3byBtYXBzLlxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLkVOQ09ERURfVkFMUy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpO1xuICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuYnl0ZVRvQ2hhck1hcF9baV1dID0gaTtcbiAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV0gPSB0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKTtcbiAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV1dID0gaTtcblxuICAgICAgICAvLyBCZSBmb3JnaXZpbmcgd2hlbiBkZWNvZGluZyBhbmQgY29ycmVjdGx5IGRlY29kZSBib3RoIGVuY29kaW5ncy5cbiAgICAgICAgaWYgKGkgPj0gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRS5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpXSA9IGk7XG4gICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpXSA9IGk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogVVJMLXNhZmUgYmFzZTY0IGVuY29kaW5nXG4gKi9cbmV4cG9ydCBjb25zdCBiYXNlNjRFbmNvZGUgPSBmdW5jdGlvbiAoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCB1dGY4Qnl0ZXMgPSBzdHJpbmdUb0J5dGVBcnJheShzdHIpO1xuICByZXR1cm4gYmFzZTY0LmVuY29kZUJ5dGVBcnJheSh1dGY4Qnl0ZXMsIHRydWUpO1xufTtcblxuLyoqXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmcgKHdpdGhvdXQgXCIuXCIgcGFkZGluZyBpbiB0aGUgZW5kKS5cbiAqIGUuZy4gVXNlZCBpbiBKU09OIFdlYiBUb2tlbiAoSldUKSBwYXJ0cy5cbiAqL1xuZXhwb3J0IGNvbnN0IGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nID0gZnVuY3Rpb24gKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgLy8gVXNlIGJhc2U2NHVybCBlbmNvZGluZyBhbmQgcmVtb3ZlIHBhZGRpbmcgaW4gdGhlIGVuZCAoZG90IGNoYXJhY3RlcnMpLlxuICByZXR1cm4gYmFzZTY0RW5jb2RlKHN0cikucmVwbGFjZSgvXFwuL2csICcnKTtcbn07XG5cbi8qKlxuICogVVJMLXNhZmUgYmFzZTY0IGRlY29kaW5nXG4gKlxuICogTk9URTogRE8gTk9UIHVzZSB0aGUgZ2xvYmFsIGF0b2IoKSBmdW5jdGlvbiAtIGl0IGRvZXMgTk9UIHN1cHBvcnQgdGhlXG4gKiBiYXNlNjRVcmwgdmFyaWFudCBlbmNvZGluZy5cbiAqXG4gKiBAcGFyYW0gc3RyIFRvIGJlIGRlY29kZWRcbiAqIEByZXR1cm4gRGVjb2RlZCByZXN1bHQsIGlmIHBvc3NpYmxlXG4gKi9cbmV4cG9ydCBjb25zdCBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYmFzZTY0LmRlY29kZVN0cmluZyhzdHIsIHRydWUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcignYmFzZTY0RGVjb2RlIGZhaWxlZDogJywgZSk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBEbyBhIGRlZXAtY29weSBvZiBiYXNpYyBKYXZhU2NyaXB0IE9iamVjdHMgb3IgQXJyYXlzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVlcENvcHk8VD4odmFsdWU6IFQpOiBUIHtcbiAgcmV0dXJuIGRlZXBFeHRlbmQodW5kZWZpbmVkLCB2YWx1ZSkgYXMgVDtcbn1cblxuLyoqXG4gKiBDb3B5IHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0IChyZWN1cnNpdmVseSBhbGxvd3MgZXh0ZW5zaW9uXG4gKiBvZiBPYmplY3RzIGFuZCBBcnJheXMpLiAgU2NhbGFyIHZhbHVlcyBpbiB0aGUgdGFyZ2V0IGFyZSBvdmVyLXdyaXR0ZW4uXG4gKiBJZiB0YXJnZXQgaXMgdW5kZWZpbmVkLCBhbiBvYmplY3Qgb2YgdGhlIGFwcHJvcHJpYXRlIHR5cGUgd2lsbCBiZSBjcmVhdGVkXG4gKiAoYW5kIHJldHVybmVkKS5cbiAqXG4gKiBXZSByZWN1cnNpdmVseSBjb3B5IGFsbCBjaGlsZCBwcm9wZXJ0aWVzIG9mIHBsYWluIE9iamVjdHMgaW4gdGhlIHNvdXJjZS0gc29cbiAqIHRoYXQgbmFtZXNwYWNlLSBsaWtlIGRpY3Rpb25hcmllcyBhcmUgbWVyZ2VkLlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgdGFyZ2V0IGNhbiBiZSBhIGZ1bmN0aW9uLCBpbiB3aGljaCBjYXNlIHRoZSBwcm9wZXJ0aWVzIGluXG4gKiB0aGUgc291cmNlIE9iamVjdCBhcmUgY29waWVkIG9udG8gaXQgYXMgc3RhdGljIHByb3BlcnRpZXMgb2YgdGhlIEZ1bmN0aW9uLlxuICpcbiAqIE5vdGU6IHdlIGRvbid0IG1lcmdlIF9fcHJvdG9fXyB0byBwcmV2ZW50IHByb3RvdHlwZSBwb2xsdXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZXBFeHRlbmQodGFyZ2V0OiB1bmtub3duLCBzb3VyY2U6IHVua25vd24pOiB1bmtub3duIHtcbiAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgT2JqZWN0KSkge1xuICAgIHJldHVybiBzb3VyY2U7XG4gIH1cblxuICBzd2l0Y2ggKHNvdXJjZS5jb25zdHJ1Y3Rvcikge1xuICAgIGNhc2UgRGF0ZTpcbiAgICAgIC8vIFRyZWF0IERhdGVzIGxpa2Ugc2NhbGFyczsgaWYgdGhlIHRhcmdldCBkYXRlIG9iamVjdCBoYWQgYW55IGNoaWxkXG4gICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXG4gICAgICBjb25zdCBkYXRlVmFsdWUgPSBzb3VyY2UgYXMgRGF0ZTtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlVmFsdWUuZ2V0VGltZSgpKTtcblxuICAgIGNhc2UgT2JqZWN0OlxuICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRhcmdldCA9IHt9O1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBBcnJheTpcbiAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxuICAgICAgdGFyZ2V0ID0gW107XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICAvLyBOb3QgYSBwbGFpbiBPYmplY3QgLSB0cmVhdCBpdCBhcyBhIHNjYWxhci5cbiAgICAgIHJldHVybiBzb3VyY2U7XG4gIH1cblxuICBmb3IgKGNvbnN0IHByb3AgaW4gc291cmNlKSB7XG4gICAgLy8gdXNlIGlzVmFsaWRLZXkgdG8gZ3VhcmQgYWdhaW5zdCBwcm90b3R5cGUgcG9sbHV0aW9uLiBTZWUgaHR0cHM6Ly9zbnlrLmlvL3Z1bG4vU05ZSy1KUy1MT0RBU0gtNDUwMjAyXG4gICAgaWYgKCFzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgIWlzVmFsaWRLZXkocHJvcCkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAodGFyZ2V0IGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KVtwcm9wXSA9IGRlZXBFeHRlbmQoXG4gICAgICAodGFyZ2V0IGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KVtwcm9wXSxcbiAgICAgIChzb3VyY2UgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pW3Byb3BdXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRLZXkoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIGtleSAhPT0gJ19fcHJvdG9fXyc7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5leHBvcnQgY2xhc3MgRGVmZXJyZWQ8Uj4ge1xuICBwcm9taXNlOiBQcm9taXNlPFI+O1xuICByZWplY3Q6ICh2YWx1ZT86IHVua25vd24pID0+IHZvaWQgPSAoKSA9PiB7fTtcbiAgcmVzb2x2ZTogKHZhbHVlPzogdW5rbm93bikgPT4gdm9pZCA9ICgpID0+IHt9O1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlIGFzICh2YWx1ZT86IHVua25vd24pID0+IHZvaWQ7XG4gICAgICB0aGlzLnJlamVjdCA9IHJlamVjdCBhcyAodmFsdWU/OiB1bmtub3duKSA9PiB2b2lkO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE91ciBBUEkgaW50ZXJuYWxzIGFyZSBub3QgcHJvbWlzZWlmaWVkIGFuZCBjYW5ub3QgYmVjYXVzZSBvdXIgY2FsbGJhY2sgQVBJcyBoYXZlIHN1YnRsZSBleHBlY3RhdGlvbnMgYXJvdW5kXG4gICAqIGludm9raW5nIHByb21pc2VzIGlubGluZSwgd2hpY2ggUHJvbWlzZXMgYXJlIGZvcmJpZGRlbiB0byBkby4gVGhpcyBtZXRob2QgYWNjZXB0cyBhbiBvcHRpb25hbCBub2RlLXN0eWxlIGNhbGxiYWNrXG4gICAqIGFuZCByZXR1cm5zIGEgbm9kZS1zdHlsZSBjYWxsYmFjayB3aGljaCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBEZWZlcnJlZCdzIHByb21pc2UuXG4gICAqL1xuICB3cmFwQ2FsbGJhY2soXG4gICAgY2FsbGJhY2s/OiAoZXJyb3I/OiB1bmtub3duLCB2YWx1ZT86IHVua25vd24pID0+IHZvaWRcbiAgKTogKGVycm9yOiB1bmtub3duLCB2YWx1ZT86IHVua25vd24pID0+IHZvaWQge1xuICAgIHJldHVybiAoZXJyb3IsIHZhbHVlPykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVzb2x2ZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIEF0dGFjaGluZyBub29wIGhhbmRsZXIganVzdCBpbiBjYXNlIGRldmVsb3BlciB3YXNuJ3QgZXhwZWN0aW5nXG4gICAgICAgIC8vIHByb21pc2VzXG4gICAgICAgIHRoaXMucHJvbWlzZS5jYXRjaCgoKSA9PiB7fSk7XG5cbiAgICAgICAgLy8gU29tZSBvZiBvdXIgY2FsbGJhY2tzIGRvbid0IGV4cGVjdCBhIHZhbHVlIGFuZCBvdXIgb3duIHRlc3RzXG4gICAgICAgIC8vIGFzc2VydCB0aGF0IHRoZSBwYXJhbWV0ZXIgbGVuZ3RoIGlzIDFcbiAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWxsYmFjayhlcnJvciwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcgfSBmcm9tICcuL2NyeXB0JztcblxuLy8gRmlyZWJhc2UgQXV0aCB0b2tlbnMgY29udGFpbiBzbmFrZV9jYXNlIGNsYWltcyBmb2xsb3dpbmcgdGhlIEpXVCBzdGFuZGFyZCAvIGNvbnZlbnRpb24uXG4vKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cblxuZXhwb3J0IHR5cGUgRmlyZWJhc2VTaWduSW5Qcm92aWRlciA9XG4gIHwgJ2N1c3RvbSdcbiAgfCAnZW1haWwnXG4gIHwgJ3Bhc3N3b3JkJ1xuICB8ICdwaG9uZSdcbiAgfCAnYW5vbnltb3VzJ1xuICB8ICdnb29nbGUuY29tJ1xuICB8ICdmYWNlYm9vay5jb20nXG4gIHwgJ2dpdGh1Yi5jb20nXG4gIHwgJ3R3aXR0ZXIuY29tJ1xuICB8ICdtaWNyb3NvZnQuY29tJ1xuICB8ICdhcHBsZS5jb20nO1xuXG5pbnRlcmZhY2UgRmlyZWJhc2VJZFRva2VuIHtcbiAgLy8gQWx3YXlzIHNldCB0byBodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vUFJPSkVDVF9JRFxuICBpc3M6IHN0cmluZztcblxuICAvLyBBbHdheXMgc2V0IHRvIFBST0pFQ1RfSURcbiAgYXVkOiBzdHJpbmc7XG5cbiAgLy8gVGhlIHVzZXIncyB1bmlxdWUgSURcbiAgc3ViOiBzdHJpbmc7XG5cbiAgLy8gVGhlIHRva2VuIGlzc3VlIHRpbWUsIGluIHNlY29uZHMgc2luY2UgZXBvY2hcbiAgaWF0OiBudW1iZXI7XG5cbiAgLy8gVGhlIHRva2VuIGV4cGlyeSB0aW1lLCBub3JtYWxseSAnaWF0JyArIDM2MDBcbiAgZXhwOiBudW1iZXI7XG5cbiAgLy8gVGhlIHVzZXIncyB1bmlxdWUgSUQuIE11c3QgYmUgZXF1YWwgdG8gJ3N1YidcbiAgdXNlcl9pZDogc3RyaW5nO1xuXG4gIC8vIFRoZSB0aW1lIHRoZSB1c2VyIGF1dGhlbnRpY2F0ZWQsIG5vcm1hbGx5ICdpYXQnXG4gIGF1dGhfdGltZTogbnVtYmVyO1xuXG4gIC8vIFRoZSBzaWduIGluIHByb3ZpZGVyLCBvbmx5IHNldCB3aGVuIHRoZSBwcm92aWRlciBpcyAnYW5vbnltb3VzJ1xuICBwcm92aWRlcl9pZD86ICdhbm9ueW1vdXMnO1xuXG4gIC8vIFRoZSB1c2VyJ3MgcHJpbWFyeSBlbWFpbFxuICBlbWFpbD86IHN0cmluZztcblxuICAvLyBUaGUgdXNlcidzIGVtYWlsIHZlcmlmaWNhdGlvbiBzdGF0dXNcbiAgZW1haWxfdmVyaWZpZWQ/OiBib29sZWFuO1xuXG4gIC8vIFRoZSB1c2VyJ3MgcHJpbWFyeSBwaG9uZSBudW1iZXJcbiAgcGhvbmVfbnVtYmVyPzogc3RyaW5nO1xuXG4gIC8vIFRoZSB1c2VyJ3MgZGlzcGxheSBuYW1lXG4gIG5hbWU/OiBzdHJpbmc7XG5cbiAgLy8gVGhlIHVzZXIncyBwcm9maWxlIHBob3RvIFVSTFxuICBwaWN0dXJlPzogc3RyaW5nO1xuXG4gIC8vIEluZm9ybWF0aW9uIG9uIGFsbCBpZGVudGl0aWVzIGxpbmtlZCB0byB0aGlzIHVzZXJcbiAgZmlyZWJhc2U6IHtcbiAgICAvLyBUaGUgcHJpbWFyeSBzaWduLWluIHByb3ZpZGVyXG4gICAgc2lnbl9pbl9wcm92aWRlcjogRmlyZWJhc2VTaWduSW5Qcm92aWRlcjtcblxuICAgIC8vIEEgbWFwIG9mIHByb3ZpZGVycyB0byB0aGUgdXNlcidzIGxpc3Qgb2YgdW5pcXVlIGlkZW50aWZpZXJzIGZyb21cbiAgICAvLyBlYWNoIHByb3ZpZGVyXG4gICAgaWRlbnRpdGllcz86IHsgW3Byb3ZpZGVyIGluIEZpcmViYXNlU2lnbkluUHJvdmlkZXJdPzogc3RyaW5nW10gfTtcbiAgfTtcblxuICAvLyBDdXN0b20gY2xhaW1zIHNldCBieSB0aGUgZGV2ZWxvcGVyXG4gIFtjbGFpbTogc3RyaW5nXTogdW5rbm93bjtcblxuICB1aWQ/OiBuZXZlcjsgLy8gVHJ5IHRvIGNhdGNoIGEgY29tbW9uIG1pc3Rha2Ugb2YgXCJ1aWRcIiAoc2hvdWxkIGJlIFwic3ViXCIgaW5zdGVhZCkuXG59XG5cbmV4cG9ydCB0eXBlIEVtdWxhdG9yTW9ja1Rva2VuT3B0aW9ucyA9ICh7IHVzZXJfaWQ6IHN0cmluZyB9IHwgeyBzdWI6IHN0cmluZyB9KSAmXG4gIFBhcnRpYWw8RmlyZWJhc2VJZFRva2VuPjtcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1vY2tVc2VyVG9rZW4oXG4gIHRva2VuOiBFbXVsYXRvck1vY2tUb2tlbk9wdGlvbnMsXG4gIHByb2plY3RJZD86IHN0cmluZ1xuKTogc3RyaW5nIHtcbiAgaWYgKHRva2VuLnVpZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdUaGUgXCJ1aWRcIiBmaWVsZCBpcyBubyBsb25nZXIgc3VwcG9ydGVkIGJ5IG1vY2tVc2VyVG9rZW4uIFBsZWFzZSB1c2UgXCJzdWJcIiBpbnN0ZWFkIGZvciBGaXJlYmFzZSBBdXRoIFVzZXIgSUQuJ1xuICAgICk7XG4gIH1cbiAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIFwibm9uZVwiIGFzIHRoZSBhbGdvcml0aG0uXG4gIGNvbnN0IGhlYWRlciA9IHtcbiAgICBhbGc6ICdub25lJyxcbiAgICB0eXBlOiAnSldUJ1xuICB9O1xuXG4gIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0SWQgfHwgJ2RlbW8tcHJvamVjdCc7XG4gIGNvbnN0IGlhdCA9IHRva2VuLmlhdCB8fCAwO1xuICBjb25zdCBzdWIgPSB0b2tlbi5zdWIgfHwgdG9rZW4udXNlcl9pZDtcbiAgaWYgKCFzdWIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xuICB9XG5cbiAgY29uc3QgcGF5bG9hZDogRmlyZWJhc2VJZFRva2VuID0ge1xuICAgIC8vIFNldCBhbGwgcmVxdWlyZWQgZmllbGRzIHRvIGRlY2VudCBkZWZhdWx0c1xuICAgIGlzczogYGh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS8ke3Byb2plY3R9YCxcbiAgICBhdWQ6IHByb2plY3QsXG4gICAgaWF0LFxuICAgIGV4cDogaWF0ICsgMzYwMCxcbiAgICBhdXRoX3RpbWU6IGlhdCxcbiAgICBzdWIsXG4gICAgdXNlcl9pZDogc3ViLFxuICAgIGZpcmViYXNlOiB7XG4gICAgICBzaWduX2luX3Byb3ZpZGVyOiAnY3VzdG9tJyxcbiAgICAgIGlkZW50aXRpZXM6IHt9XG4gICAgfSxcblxuICAgIC8vIE92ZXJyaWRlIHdpdGggdXNlciBvcHRpb25zXG4gICAgLi4udG9rZW5cbiAgfTtcblxuICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgdGhlIGVtcHR5IHN0cmluZyBhcyBhIHNpZ25hdHVyZS5cbiAgY29uc3Qgc2lnbmF0dXJlID0gJyc7XG4gIHJldHVybiBbXG4gICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoaGVhZGVyKSksXG4gICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpLFxuICAgIHNpZ25hdHVyZVxuICBdLmpvaW4oJy4nKTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENPTlNUQU5UUyB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuLyoqXG4gKiBSZXR1cm5zIG5hdmlnYXRvci51c2VyQWdlbnQgc3RyaW5nIG9yICcnIGlmIGl0J3Mgbm90IGRlZmluZWQuXG4gKiBAcmV0dXJuIHVzZXIgYWdlbnQgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVQSgpOiBzdHJpbmcge1xuICBpZiAoXG4gICAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgbmF2aWdhdG9yWyd1c2VyQWdlbnQnXSA9PT0gJ3N0cmluZydcbiAgKSB7XG4gICAgcmV0dXJuIG5hdmlnYXRvclsndXNlckFnZW50J107XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG59XG5cbi8qKlxuICogRGV0ZWN0IENvcmRvdmEgLyBQaG9uZUdhcCAvIElvbmljIGZyYW1ld29ya3Mgb24gYSBtb2JpbGUgZGV2aWNlLlxuICpcbiAqIERlbGliZXJhdGVseSBkb2VzIG5vdCByZWx5IG9uIGNoZWNraW5nIGBmaWxlOi8vYCBVUkxzIChhcyB0aGlzIGZhaWxzIFBob25lR2FwXG4gKiBpbiB0aGUgUmlwcGxlIGVtdWxhdG9yKSBub3IgQ29yZG92YSBgb25EZXZpY2VSZWFkeWAsIHdoaWNoIHdvdWxkIG5vcm1hbGx5XG4gKiB3YWl0IGZvciBhIGNhbGxiYWNrLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNNb2JpbGVDb3Jkb3ZhKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgLy8gQHRzLWlnbm9yZSBTZXR0aW5nIHVwIGFuIGJyb2FkbHkgYXBwbGljYWJsZSBpbmRleCBzaWduYXR1cmUgZm9yIFdpbmRvd1xuICAgIC8vIGp1c3QgdG8gZGVhbCB3aXRoIHRoaXMgY2FzZSB3b3VsZCBwcm9iYWJseSBiZSBhIGJhZCBpZGVhLlxuICAgICEhKHdpbmRvd1snY29yZG92YSddIHx8IHdpbmRvd1sncGhvbmVnYXAnXSB8fCB3aW5kb3dbJ1Bob25lR2FwJ10pICYmXG4gICAgL2lvc3xpcGhvbmV8aXBvZHxpcGFkfGFuZHJvaWR8YmxhY2tiZXJyeXxpZW1vYmlsZS9pLnRlc3QoZ2V0VUEoKSlcbiAgKTtcbn1cblxuLyoqXG4gKiBEZXRlY3QgTm9kZS5qcy5cbiAqXG4gKiBAcmV0dXJuIHRydWUgaWYgTm9kZS5qcyBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cbiAqL1xuLy8gTm9kZSBkZXRlY3Rpb24gbG9naWMgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2lsaWFrYW4vZGV0ZWN0LW5vZGUvXG5leHBvcnQgZnVuY3Rpb24gaXNOb2RlKCk6IGJvb2xlYW4ge1xuICB0cnkge1xuICAgIHJldHVybiAoXG4gICAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSdcbiAgICApO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogRGV0ZWN0IEJyb3dzZXIgRW52aXJvbm1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQnJvd3NlcigpOiBib29sZWFuIHtcbiAgcmV0dXJuIHR5cGVvZiBzZWxmID09PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGY7XG59XG5cbi8qKlxuICogRGV0ZWN0IGJyb3dzZXIgZXh0ZW5zaW9ucyAoQ2hyb21lIGFuZCBGaXJlZm94IGF0IGxlYXN0KS5cbiAqL1xuaW50ZXJmYWNlIEJyb3dzZXJSdW50aW1lIHtcbiAgaWQ/OiB1bmtub3duO1xufVxuZGVjbGFyZSBjb25zdCBjaHJvbWU6IHsgcnVudGltZT86IEJyb3dzZXJSdW50aW1lIH07XG5kZWNsYXJlIGNvbnN0IGJyb3dzZXI6IHsgcnVudGltZT86IEJyb3dzZXJSdW50aW1lIH07XG5leHBvcnQgZnVuY3Rpb24gaXNCcm93c2VyRXh0ZW5zaW9uKCk6IGJvb2xlYW4ge1xuICBjb25zdCBydW50aW1lID1cbiAgICB0eXBlb2YgY2hyb21lID09PSAnb2JqZWN0J1xuICAgICAgPyBjaHJvbWUucnVudGltZVxuICAgICAgOiB0eXBlb2YgYnJvd3NlciA9PT0gJ29iamVjdCdcbiAgICAgID8gYnJvd3Nlci5ydW50aW1lXG4gICAgICA6IHVuZGVmaW5lZDtcbiAgcmV0dXJuIHR5cGVvZiBydW50aW1lID09PSAnb2JqZWN0JyAmJiBydW50aW1lLmlkICE9PSB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogRGV0ZWN0IFJlYWN0IE5hdGl2ZS5cbiAqXG4gKiBAcmV0dXJuIHRydWUgaWYgUmVhY3ROYXRpdmUgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1JlYWN0TmF0aXZlKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmIG5hdmlnYXRvclsncHJvZHVjdCddID09PSAnUmVhY3ROYXRpdmUnXG4gICk7XG59XG5cbi8qKiBEZXRlY3RzIEVsZWN0cm9uIGFwcHMuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbGVjdHJvbigpOiBib29sZWFuIHtcbiAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignRWxlY3Ryb24vJykgPj0gMDtcbn1cblxuLyoqIERldGVjdHMgSW50ZXJuZXQgRXhwbG9yZXIuICovXG5leHBvcnQgZnVuY3Rpb24gaXNJRSgpOiBib29sZWFuIHtcbiAgY29uc3QgdWEgPSBnZXRVQSgpO1xuICByZXR1cm4gdWEuaW5kZXhPZignTVNJRSAnKSA+PSAwIHx8IHVhLmluZGV4T2YoJ1RyaWRlbnQvJykgPj0gMDtcbn1cblxuLyoqIERldGVjdHMgVW5pdmVyc2FsIFdpbmRvd3MgUGxhdGZvcm0gYXBwcy4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1VXUCgpOiBib29sZWFuIHtcbiAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignTVNBcHBIb3N0LycpID49IDA7XG59XG5cbi8qKlxuICogRGV0ZWN0IHdoZXRoZXIgdGhlIGN1cnJlbnQgU0RLIGJ1aWxkIGlzIHRoZSBOb2RlIHZlcnNpb24uXG4gKlxuICogQHJldHVybiB0cnVlIGlmIGl0J3MgdGhlIE5vZGUgU0RLIGJ1aWxkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOb2RlU2RrKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gQ09OU1RBTlRTLk5PREVfQ0xJRU5UID09PSB0cnVlIHx8IENPTlNUQU5UUy5OT0RFX0FETUlOID09PSB0cnVlO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBydW5uaW5nIGluIFNhZmFyaS4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1NhZmFyaSgpOiBib29sZWFuIHtcbiAgcmV0dXJuIChcbiAgICAhaXNOb2RlKCkgJiZcbiAgICBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdTYWZhcmknKSAmJlxuICAgICFuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdDaHJvbWUnKVxuICApO1xufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyBpZiBpbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IGN1cnJlbnQgYnJvd3Nlci9zZXJ2aWNlIHdvcmtlciBjb250ZXh0XG4gKiBAcmV0dXJuIHRydWUgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNJbmRleGVkREJBdmFpbGFibGUoKTogYm9vbGVhbiB7XG4gIHJldHVybiB0eXBlb2YgaW5kZXhlZERCID09PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCB2YWxpZGF0ZXMgYnJvd3Nlci9zdyBjb250ZXh0IGZvciBpbmRleGVkREIgYnkgb3BlbmluZyBhIGR1bW15IGluZGV4ZWREQiBkYXRhYmFzZSBhbmQgcmVqZWN0XG4gKiBpZiBlcnJvcnMgb2NjdXIgZHVyaW5nIHRoZSBkYXRhYmFzZSBvcGVuIG9wZXJhdGlvbi5cbiAqXG4gKiBAdGhyb3dzIGV4Y2VwdGlvbiBpZiBjdXJyZW50IGJyb3dzZXIvc3cgY29udGV4dCBjYW4ndCBydW4gaWRiLm9wZW4gKGV4OiBTYWZhcmkgaWZyYW1lLCBGaXJlZm94XG4gKiBwcml2YXRlIGJyb3dzaW5nKVxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB0cnkge1xuICAgICAgbGV0IHByZUV4aXN0OiBib29sZWFuID0gdHJ1ZTtcbiAgICAgIGNvbnN0IERCX0NIRUNLX05BTUUgPVxuICAgICAgICAndmFsaWRhdGUtYnJvd3Nlci1jb250ZXh0LWZvci1pbmRleGVkZGItYW5hbHl0aWNzLW1vZHVsZSc7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gc2VsZi5pbmRleGVkREIub3BlbihEQl9DSEVDS19OQU1FKTtcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICByZXF1ZXN0LnJlc3VsdC5jbG9zZSgpO1xuICAgICAgICAvLyBkZWxldGUgZGF0YWJhc2Ugb25seSB3aGVuIGl0IGRvZXNuJ3QgcHJlLWV4aXN0XG4gICAgICAgIGlmICghcHJlRXhpc3QpIHtcbiAgICAgICAgICBzZWxmLmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShEQl9DSEVDS19OQU1FKTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgfTtcbiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKCkgPT4ge1xuICAgICAgICBwcmVFeGlzdCA9IGZhbHNlO1xuICAgICAgfTtcblxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcj8ubWVzc2FnZSB8fCAnJyk7XG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZWplY3QoZXJyb3IpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICpcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyB3aGV0aGVyIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBjb29raWUgaXMgZW5hYmxlZCB3aXRoaW4gY3VycmVudCBicm93c2VyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcmVDb29raWVzRW5hYmxlZCgpOiBib29sZWFuIHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IuY29va2llRW5hYmxlZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgYGdsb2JhbFRoaXNgIG9iamVjdC5cbiAqIEByZXR1cm5zIHRoZSBgZ2xvYmFsVGhpc2Agb2JqZWN0IGZvciB0aGUgZ2l2ZW4gZW52aXJvbm1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRHbG9iYWwoKTogdHlwZW9mIGdsb2JhbFRoaXMge1xuICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHNlbGY7XG4gIH1cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHdpbmRvdztcbiAgfVxuICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZ2xvYmFsO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0LicpO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGZpbGVvdmVydmlldyBTdGFuZGFyZGl6ZWQgRmlyZWJhc2UgRXJyb3IuXG4gKlxuICogVXNhZ2U6XG4gKlxuICogICAvLyBUeXBlc2NyaXB0IHN0cmluZyBsaXRlcmFscyBmb3IgdHlwZS1zYWZlIGNvZGVzXG4gKiAgIHR5cGUgRXJyID1cbiAqICAgICAndW5rbm93bicgfFxuICogICAgICdvYmplY3Qtbm90LWZvdW5kJ1xuICogICAgIDtcbiAqXG4gKiAgIC8vIENsb3N1cmUgZW51bSBmb3IgdHlwZS1zYWZlIGVycm9yIGNvZGVzXG4gKiAgIC8vIGF0LWVudW0ge3N0cmluZ31cbiAqICAgdmFyIEVyciA9IHtcbiAqICAgICBVTktOT1dOOiAndW5rbm93bicsXG4gKiAgICAgT0JKRUNUX05PVF9GT1VORDogJ29iamVjdC1ub3QtZm91bmQnLFxuICogICB9XG4gKlxuICogICBsZXQgZXJyb3JzOiBNYXA8RXJyLCBzdHJpbmc+ID0ge1xuICogICAgICdnZW5lcmljLWVycm9yJzogXCJVbmtub3duIGVycm9yXCIsXG4gKiAgICAgJ2ZpbGUtbm90LWZvdW5kJzogXCJDb3VsZCBub3QgZmluZCBmaWxlOiB7JGZpbGV9XCIsXG4gKiAgIH07XG4gKlxuICogICAvLyBUeXBlLXNhZmUgZnVuY3Rpb24gLSBtdXN0IHBhc3MgYSB2YWxpZCBlcnJvciBjb2RlIGFzIHBhcmFtLlxuICogICBsZXQgZXJyb3IgPSBuZXcgRXJyb3JGYWN0b3J5PEVycj4oJ3NlcnZpY2UnLCAnU2VydmljZScsIGVycm9ycyk7XG4gKlxuICogICAuLi5cbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5HRU5FUklDKTtcbiAqICAgLi4uXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuRklMRV9OT1RfRk9VTkQsIHsnZmlsZSc6IGZpbGVOYW1lfSk7XG4gKiAgIC4uLlxuICogICAvLyBTZXJ2aWNlOiBDb3VsZCBub3QgZmlsZSBmaWxlOiBmb28udHh0IChzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kKS5cbiAqXG4gKiAgIGNhdGNoIChlKSB7XG4gKiAgICAgYXNzZXJ0KGUubWVzc2FnZSA9PT0gXCJDb3VsZCBub3QgZmluZCBmaWxlOiBmb28udHh0LlwiKTtcbiAqICAgICBpZiAoZS5jb2RlID09PSAnc2VydmljZS9maWxlLW5vdC1mb3VuZCcpIHtcbiAqICAgICAgIGNvbnNvbGUubG9nKFwiQ291bGQgbm90IHJlYWQgZmlsZTogXCIgKyBlWydmaWxlJ10pO1xuICogICAgIH1cbiAqICAgfVxuICovXG5cbmV4cG9ydCB0eXBlIEVycm9yTWFwPEVycm9yQ29kZSBleHRlbmRzIHN0cmluZz4gPSB7XG4gIHJlYWRvbmx5IFtLIGluIEVycm9yQ29kZV06IHN0cmluZztcbn07XG5cbmNvbnN0IEVSUk9SX05BTUUgPSAnRmlyZWJhc2VFcnJvcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaW5nTGlrZSB7XG4gIHRvU3RyaW5nKCk6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFcnJvckRhdGEge1xuICBba2V5OiBzdHJpbmddOiB1bmtub3duO1xufVxuXG4vLyBCYXNlZCBvbiBjb2RlIGZyb206XG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNDdXN0b21fRXJyb3JfVHlwZXNcbmV4cG9ydCBjbGFzcyBGaXJlYmFzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICByZWFkb25seSBuYW1lID0gRVJST1JfTkFNRTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICByZWFkb25seSBjb2RlOiBzdHJpbmcsXG4gICAgbWVzc2FnZTogc3RyaW5nLFxuICAgIHB1YmxpYyBjdXN0b21EYXRhPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG5cbiAgICAvLyBGaXggRm9yIEVTNVxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC13aWtpL2Jsb2IvbWFzdGVyL0JyZWFraW5nLUNoYW5nZXMubWQjZXh0ZW5kaW5nLWJ1aWx0LWlucy1saWtlLWVycm9yLWFycmF5LWFuZC1tYXAtbWF5LW5vLWxvbmdlci13b3JrXG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEZpcmViYXNlRXJyb3IucHJvdG90eXBlKTtcblxuICAgIC8vIE1haW50YWlucyBwcm9wZXIgc3RhY2sgdHJhY2UgZm9yIHdoZXJlIG91ciBlcnJvciB3YXMgdGhyb3duLlxuICAgIC8vIE9ubHkgYXZhaWxhYmxlIG9uIFY4LlxuICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgRXJyb3JGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRXJyb3JGYWN0b3J5PFxuICBFcnJvckNvZGUgZXh0ZW5kcyBzdHJpbmcsXG4gIEVycm9yUGFyYW1zIGV4dGVuZHMgeyByZWFkb25seSBbSyBpbiBFcnJvckNvZGVdPzogRXJyb3JEYXRhIH0gPSB7fVxuPiB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgc2VydmljZTogc3RyaW5nLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgc2VydmljZU5hbWU6IHN0cmluZyxcbiAgICBwcml2YXRlIHJlYWRvbmx5IGVycm9yczogRXJyb3JNYXA8RXJyb3JDb2RlPlxuICApIHt9XG5cbiAgY3JlYXRlPEsgZXh0ZW5kcyBFcnJvckNvZGU+KFxuICAgIGNvZGU6IEssXG4gICAgLi4uZGF0YTogSyBleHRlbmRzIGtleW9mIEVycm9yUGFyYW1zID8gW0Vycm9yUGFyYW1zW0tdXSA6IFtdXG4gICk6IEZpcmViYXNlRXJyb3Ige1xuICAgIGNvbnN0IGN1c3RvbURhdGEgPSAoZGF0YVswXSBhcyBFcnJvckRhdGEpIHx8IHt9O1xuICAgIGNvbnN0IGZ1bGxDb2RlID0gYCR7dGhpcy5zZXJ2aWNlfS8ke2NvZGV9YDtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMuZXJyb3JzW2NvZGVdO1xuXG4gICAgY29uc3QgbWVzc2FnZSA9IHRlbXBsYXRlID8gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBjdXN0b21EYXRhKSA6ICdFcnJvcic7XG4gICAgLy8gU2VydmljZSBOYW1lOiBFcnJvciBtZXNzYWdlIChzZXJ2aWNlL2NvZGUpLlxuICAgIGNvbnN0IGZ1bGxNZXNzYWdlID0gYCR7dGhpcy5zZXJ2aWNlTmFtZX06ICR7bWVzc2FnZX0gKCR7ZnVsbENvZGV9KS5gO1xuXG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRmlyZWJhc2VFcnJvcihmdWxsQ29kZSwgZnVsbE1lc3NhZ2UsIGN1c3RvbURhdGEpO1xuXG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZTogc3RyaW5nLCBkYXRhOiBFcnJvckRhdGEpOiBzdHJpbmcge1xuICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZShQQVRURVJOLCAoXywga2V5KSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBkYXRhW2tleV07XG4gICAgcmV0dXJuIHZhbHVlICE9IG51bGwgPyBTdHJpbmcodmFsdWUpIDogYDwke2tleX0/PmA7XG4gIH0pO1xufVxuXG5jb25zdCBQQVRURVJOID0gL1xce1xcJChbXn1dKyl9L2c7XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEV2YWx1YXRlcyBhIEpTT04gc3RyaW5nIGludG8gYSBqYXZhc2NyaXB0IG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIEEgc3RyaW5nIGNvbnRhaW5pbmcgSlNPTi5cbiAqIEByZXR1cm4geyp9IFRoZSBqYXZhc2NyaXB0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHNwZWNpZmllZCBKU09OLlxuICovXG5leHBvcnQgZnVuY3Rpb24ganNvbkV2YWwoc3RyOiBzdHJpbmcpOiB1bmtub3duIHtcbiAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIEpTT04gcmVwcmVzZW50aW5nIGEgamF2YXNjcmlwdCBvYmplY3QuXG4gKiBAcGFyYW0geyp9IGRhdGEgSmF2YXNjcmlwdCBvYmplY3QgdG8gYmUgc3RyaW5naWZpZWQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBKU09OIGNvbnRlbnRzIG9mIHRoZSBvYmplY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnkoZGF0YTogdW5rbm93bik6IHN0cmluZyB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGJhc2U2NERlY29kZSB9IGZyb20gJy4vY3J5cHQnO1xuaW1wb3J0IHsganNvbkV2YWwgfSBmcm9tICcuL2pzb24nO1xuXG5pbnRlcmZhY2UgQ2xhaW1zIHtcbiAgW2tleTogc3RyaW5nXToge307XG59XG5cbmludGVyZmFjZSBEZWNvZGVkVG9rZW4ge1xuICBoZWFkZXI6IG9iamVjdDtcbiAgY2xhaW1zOiBDbGFpbXM7XG4gIGRhdGE6IG9iamVjdDtcbiAgc2lnbmF0dXJlOiBzdHJpbmc7XG59XG5cbi8qKlxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGludG8gY29uc3RpdHVlbnQgcGFydHMuXG4gKlxuICogTm90ZXM6XG4gKiAtIE1heSByZXR1cm4gd2l0aCBpbnZhbGlkIC8gaW5jb21wbGV0ZSBjbGFpbXMgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxuICovXG5leHBvcnQgY29uc3QgZGVjb2RlID0gZnVuY3Rpb24gKHRva2VuOiBzdHJpbmcpOiBEZWNvZGVkVG9rZW4ge1xuICBsZXQgaGVhZGVyID0ge30sXG4gICAgY2xhaW1zOiBDbGFpbXMgPSB7fSxcbiAgICBkYXRhID0ge30sXG4gICAgc2lnbmF0dXJlID0gJyc7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XG4gICAgaGVhZGVyID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzBdKSB8fCAnJykgYXMgb2JqZWN0O1xuICAgIGNsYWltcyA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1sxXSkgfHwgJycpIGFzIENsYWltcztcbiAgICBzaWduYXR1cmUgPSBwYXJ0c1syXTtcbiAgICBkYXRhID0gY2xhaW1zWydkJ10gfHwge307XG4gICAgZGVsZXRlIGNsYWltc1snZCddO1xuICB9IGNhdGNoIChlKSB7fVxuXG4gIHJldHVybiB7XG4gICAgaGVhZGVyLFxuICAgIGNsYWltcyxcbiAgICBkYXRhLFxuICAgIHNpZ25hdHVyZVxuICB9O1xufTtcblxuaW50ZXJmYWNlIERlY29kZWRUb2tlbiB7XG4gIGhlYWRlcjogb2JqZWN0O1xuICBjbGFpbXM6IENsYWltcztcbiAgZGF0YTogb2JqZWN0O1xuICBzaWduYXR1cmU6IHN0cmluZztcbn1cblxuLyoqXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIHRpbWUtYmFzZWQgY2xhaW1zLiBXaWxsIHJldHVybiB0cnVlIGlmIHRoZVxuICogdG9rZW4gaXMgd2l0aGluIHRoZSB0aW1lIHdpbmRvdyBhdXRob3JpemVkIGJ5IHRoZSAnbmJmJyAobm90LWJlZm9yZSkgYW5kICdpYXQnIChpc3N1ZWQtYXQpIGNsYWltcy5cbiAqXG4gKiBOb3RlczpcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGlzVmFsaWRUaW1lc3RhbXAgPSBmdW5jdGlvbiAodG9rZW46IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBjbGFpbXM6IENsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xuICBjb25zdCBub3c6IG51bWJlciA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcbiAgbGV0IHZhbGlkU2luY2U6IG51bWJlciA9IDAsXG4gICAgdmFsaWRVbnRpbDogbnVtYmVyID0gMDtcblxuICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCduYmYnKSkge1xuICAgICAgdmFsaWRTaW5jZSA9IGNsYWltc1snbmJmJ10gYXMgbnVtYmVyO1xuICAgIH0gZWxzZSBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xuICAgICAgdmFsaWRTaW5jZSA9IGNsYWltc1snaWF0J10gYXMgbnVtYmVyO1xuICAgIH1cblxuICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2V4cCcpKSB7XG4gICAgICB2YWxpZFVudGlsID0gY2xhaW1zWydleHAnXSBhcyBudW1iZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHRva2VuIHdpbGwgZXhwaXJlIGFmdGVyIDI0aCBieSBkZWZhdWx0XG4gICAgICB2YWxpZFVudGlsID0gdmFsaWRTaW5jZSArIDg2NDAwO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAoXG4gICAgISFub3cgJiZcbiAgICAhIXZhbGlkU2luY2UgJiZcbiAgICAhIXZhbGlkVW50aWwgJiZcbiAgICBub3cgPj0gdmFsaWRTaW5jZSAmJlxuICAgIG5vdyA8PSB2YWxpZFVudGlsXG4gICk7XG59O1xuXG4vKipcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgcmV0dXJucyBpdHMgaXNzdWVkIGF0IHRpbWUgaWYgdmFsaWQsIG51bGwgb3RoZXJ3aXNlLlxuICpcbiAqIE5vdGVzOlxuICogLSBNYXkgcmV0dXJuIG51bGwgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxuICovXG5leHBvcnQgY29uc3QgaXNzdWVkQXRUaW1lID0gZnVuY3Rpb24gKHRva2VuOiBzdHJpbmcpOiBudW1iZXIgfCBudWxsIHtcbiAgY29uc3QgY2xhaW1zOiBDbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcbiAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcbiAgICByZXR1cm4gY2xhaW1zWydpYXQnXSBhcyBudW1iZXI7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG4vKipcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgZm9ybWF0LiBFeHBlY3RzIGEgdmFsaWQgaXNzdWVkLWF0IHRpbWUuXG4gKlxuICogTm90ZXM6XG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXG4gKi9cbmV4cG9ydCBjb25zdCBpc1ZhbGlkRm9ybWF0ID0gZnVuY3Rpb24gKHRva2VuOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3QgZGVjb2RlZCA9IGRlY29kZSh0b2tlbiksXG4gICAgY2xhaW1zID0gZGVjb2RlZC5jbGFpbXM7XG5cbiAgcmV0dXJuICEhY2xhaW1zICYmIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0Jyk7XG59O1xuXG4vKipcbiAqIEF0dGVtcHRzIHRvIHBlZXIgaW50byBhbiBhdXRoIHRva2VuIGFuZCBkZXRlcm1pbmUgaWYgaXQncyBhbiBhZG1pbiBhdXRoIHRva2VuIGJ5IGxvb2tpbmcgYXQgdGhlIGNsYWltcyBwb3J0aW9uLlxuICpcbiAqIE5vdGVzOlxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxuICovXG5leHBvcnQgY29uc3QgaXNBZG1pbiA9IGZ1bmN0aW9uICh0b2tlbjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGNsYWltczogQ2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XG4gIHJldHVybiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXNbJ2FkbWluJ10gPT09IHRydWU7XG59O1xuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zPFQgZXh0ZW5kcyBvYmplY3Q+KG9iajogVCwga2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYWZlR2V0PFQgZXh0ZW5kcyBvYmplY3QsIEsgZXh0ZW5kcyBrZXlvZiBUPihcbiAgb2JqOiBULFxuICBrZXk6IEtcbik6IFRbS10gfCB1bmRlZmluZWQge1xuICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgIHJldHVybiBvYmpba2V5XTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5KG9iajogb2JqZWN0KTogb2JqIGlzIHt9IHtcbiAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXA8SyBleHRlbmRzIHN0cmluZywgViwgVT4oXG4gIG9iajogeyBba2V5IGluIEtdOiBWIH0sXG4gIGZuOiAodmFsdWU6IFYsIGtleTogSywgb2JqOiB7IFtrZXkgaW4gS106IFYgfSkgPT4gVSxcbiAgY29udGV4dE9iaj86IHVua25vd25cbik6IHsgW2tleSBpbiBLXTogVSB9IHtcbiAgY29uc3QgcmVzOiBQYXJ0aWFsPHsgW2tleSBpbiBLXTogVSB9PiA9IHt9O1xuICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgcmVzW2tleV0gPSBmbi5jYWxsKGNvbnRleHRPYmosIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXMgYXMgeyBba2V5IGluIEtdOiBVIH07XG59XG5cbi8qKlxuICogRGVlcCBlcXVhbCB0d28gb2JqZWN0cy4gU3VwcG9ydCBBcnJheXMgYW5kIE9iamVjdHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWVwRXF1YWwoYTogb2JqZWN0LCBiOiBvYmplY3QpOiBib29sZWFuIHtcbiAgaWYgKGEgPT09IGIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNvbnN0IGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XG4gIGNvbnN0IGJLZXlzID0gT2JqZWN0LmtleXMoYik7XG4gIGZvciAoY29uc3QgayBvZiBhS2V5cykge1xuICAgIGlmICghYktleXMuaW5jbHVkZXMoaykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBhUHJvcCA9IChhIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KVtrXTtcbiAgICBjb25zdCBiUHJvcCA9IChiIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KVtrXTtcbiAgICBpZiAoaXNPYmplY3QoYVByb3ApICYmIGlzT2JqZWN0KGJQcm9wKSkge1xuICAgICAgaWYgKCFkZWVwRXF1YWwoYVByb3AsIGJQcm9wKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhUHJvcCAhPT0gYlByb3ApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBmb3IgKGNvbnN0IGsgb2YgYktleXMpIHtcbiAgICBpZiAoIWFLZXlzLmluY2x1ZGVzKGspKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdCh0aGluZzogdW5rbm93bik6IHRoaW5nIGlzIG9iamVjdCB7XG4gIHJldHVybiB0aGluZyAhPT0gbnVsbCAmJiB0eXBlb2YgdGhpbmcgPT09ICdvYmplY3QnO1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBSZXR1cm5zIGEgcXVlcnlzdHJpbmctZm9ybWF0dGVkIHN0cmluZyAoZS5nLiAmYXJnPXZhbCZhcmcyPXZhbDIpIGZyb20gYVxuICogcGFyYW1zIG9iamVjdCAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcbiAqIE5vdGU6IFlvdSBtdXN0IHByZXBlbmQgaXQgd2l0aCA/IHdoZW4gYWRkaW5nIGl0IHRvIGEgVVJMLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVlcnlzdHJpbmcocXVlcnlzdHJpbmdQYXJhbXM6IHtcbiAgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyO1xufSk6IHN0cmluZyB7XG4gIGNvbnN0IHBhcmFtcyA9IFtdO1xuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhxdWVyeXN0cmluZ1BhcmFtcykpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHZhbHVlLmZvckVhY2goYXJyYXlWYWwgPT4ge1xuICAgICAgICBwYXJhbXMucHVzaChcbiAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbClcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcGFyYW1zLmxlbmd0aCA/ICcmJyArIHBhcmFtcy5qb2luKCcmJykgOiAnJztcbn1cblxuLyoqXG4gKiBEZWNvZGVzIGEgcXVlcnlzdHJpbmcgKGUuZy4gP2FyZz12YWwmYXJnMj12YWwyKSBpbnRvIGEgcGFyYW1zIG9iamVjdFxuICogKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWVyeXN0cmluZ0RlY29kZShxdWVyeXN0cmluZzogc3RyaW5nKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gIGNvbnN0IG9iajogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICBjb25zdCB0b2tlbnMgPSBxdWVyeXN0cmluZy5yZXBsYWNlKC9eXFw/LywgJycpLnNwbGl0KCcmJyk7XG5cbiAgdG9rZW5zLmZvckVhY2godG9rZW4gPT4ge1xuICAgIGlmICh0b2tlbikge1xuICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gdG9rZW4uc3BsaXQoJz0nKTtcbiAgICAgIG9ialtkZWNvZGVVUklDb21wb25lbnQoa2V5KV0gPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogRXh0cmFjdCB0aGUgcXVlcnkgc3RyaW5nIHBhcnQgb2YgYSBVUkwsIGluY2x1ZGluZyB0aGUgbGVhZGluZyBxdWVzdGlvbiBtYXJrIChpZiBwcmVzZW50KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RRdWVyeXN0cmluZyh1cmw6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHF1ZXJ5U3RhcnQgPSB1cmwuaW5kZXhPZignPycpO1xuICBpZiAoIXF1ZXJ5U3RhcnQpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgY29uc3QgZnJhZ21lbnRTdGFydCA9IHVybC5pbmRleE9mKCcjJywgcXVlcnlTdGFydCk7XG4gIHJldHVybiB1cmwuc3Vic3RyaW5nKFxuICAgIHF1ZXJ5U3RhcnQsXG4gICAgZnJhZ21lbnRTdGFydCA+IDAgPyBmcmFnbWVudFN0YXJ0IDogdW5kZWZpbmVkXG4gICk7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoLlxuICogVmFyaWFibGUgbmFtZXMgZm9sbG93IHRoZSBub3RhdGlvbiBpbiBGSVBTIFBVQiAxODAtMzpcbiAqIGh0dHA6Ly9jc3JjLm5pc3QuZ292L3B1YmxpY2F0aW9ucy9maXBzL2ZpcHMxODAtMy9maXBzMTgwLTNfZmluYWwucGRmLlxuICpcbiAqIFVzYWdlOlxuICogICB2YXIgc2hhMSA9IG5ldyBzaGExKCk7XG4gKiAgIHNoYTEudXBkYXRlKGJ5dGVzKTtcbiAqICAgdmFyIGhhc2ggPSBzaGExLmRpZ2VzdCgpO1xuICpcbiAqIFBlcmZvcm1hbmNlOlxuICogICBDaHJvbWUgMjM6ICAgfjQwMCBNYml0L3NcbiAqICAgRmlyZWZveCAxNjogIH4yNTAgTWJpdC9zXG4gKlxuICovXG5cbi8qKlxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxuICpcbiAqIFRoZSBwcm9wZXJ0aWVzIGRlY2xhcmVkIGhlcmUgYXJlIGRpc2N1c3NlZCBpbiB0aGUgYWJvdmUgYWxnb3JpdGhtIGRvY3VtZW50LlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZmluYWxcbiAqIEBzdHJ1Y3RcbiAqL1xuZXhwb3J0IGNsYXNzIFNoYTEge1xuICAvKipcbiAgICogSG9sZHMgdGhlIHByZXZpb3VzIHZhbHVlcyBvZiBhY2N1bXVsYXRlZCB2YXJpYWJsZXMgYS1lIGluIHRoZSBjb21wcmVzc19cbiAgICogZnVuY3Rpb24uXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGNoYWluXzogbnVtYmVyW10gPSBbXTtcblxuICAvKipcbiAgICogQSBidWZmZXIgaG9sZGluZyB0aGUgcGFydGlhbGx5IGNvbXB1dGVkIGhhc2ggcmVzdWx0LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBidWZfOiBudW1iZXJbXSA9IFtdO1xuXG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiA4MCBieXRlcywgZWFjaCBhIHBhcnQgb2YgdGhlIG1lc3NhZ2UgdG8gYmUgaGFzaGVkLiAgUmVmZXJyZWQgdG9cbiAgICogYXMgdGhlIG1lc3NhZ2Ugc2NoZWR1bGUgaW4gdGhlIGRvY3MuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIFdfOiBudW1iZXJbXSA9IFtdO1xuXG4gIC8qKlxuICAgKiBDb250YWlucyBkYXRhIG5lZWRlZCB0byBwYWQgbWVzc2FnZXMgbGVzcyB0aGFuIDY0IGJ5dGVzLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBwYWRfOiBudW1iZXJbXSA9IFtdO1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxuICAgKi9cbiAgcHJpdmF0ZSBpbmJ1Zl86IG51bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlIHtudW1iZXJ9XG4gICAqL1xuICBwcml2YXRlIHRvdGFsXzogbnVtYmVyID0gMDtcblxuICBibG9ja1NpemU6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmJsb2NrU2l6ZSA9IDUxMiAvIDg7XG5cbiAgICB0aGlzLnBhZF9bMF0gPSAxMjg7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgKytpKSB7XG4gICAgICB0aGlzLnBhZF9baV0gPSAwO1xuICAgIH1cblxuICAgIHRoaXMucmVzZXQoKTtcbiAgfVxuXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuY2hhaW5fWzBdID0gMHg2NzQ1MjMwMTtcbiAgICB0aGlzLmNoYWluX1sxXSA9IDB4ZWZjZGFiODk7XG4gICAgdGhpcy5jaGFpbl9bMl0gPSAweDk4YmFkY2ZlO1xuICAgIHRoaXMuY2hhaW5fWzNdID0gMHgxMDMyNTQ3NjtcbiAgICB0aGlzLmNoYWluX1s0XSA9IDB4YzNkMmUxZjA7XG5cbiAgICB0aGlzLmluYnVmXyA9IDA7XG4gICAgdGhpcy50b3RhbF8gPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEludGVybmFsIGNvbXByZXNzIGhlbHBlciBmdW5jdGlvbi5cbiAgICogQHBhcmFtIGJ1ZiBCbG9jayB0byBjb21wcmVzcy5cbiAgICogQHBhcmFtIG9mZnNldCBPZmZzZXQgb2YgdGhlIGJsb2NrIGluIHRoZSBidWZmZXIuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjb21wcmVzc18oYnVmOiBudW1iZXJbXSB8IFVpbnQ4QXJyYXkgfCBzdHJpbmcsIG9mZnNldD86IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghb2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIGNvbnN0IFcgPSB0aGlzLldfO1xuXG4gICAgLy8gZ2V0IDE2IGJpZyBlbmRpYW4gd29yZHNcbiAgICBpZiAodHlwZW9mIGJ1ZiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xuICAgICAgICAvLyBUT0RPKHVzZXIpOiBbYnVnIDgxNDAxMjJdIFJlY2VudCB2ZXJzaW9ucyBvZiBTYWZhcmkgZm9yIE1hYyBPUyBhbmQgaU9TXG4gICAgICAgIC8vIGhhdmUgYSBidWcgdGhhdCB0dXJucyB0aGUgcG9zdC1pbmNyZW1lbnQgKysgb3BlcmF0b3IgaW50byBwcmUtaW5jcmVtZW50XG4gICAgICAgIC8vIGR1cmluZyBKSVQgY29tcGlsYXRpb24uICBXZSBoYXZlIGNvZGUgdGhhdCBkZXBlbmRzIGhlYXZpbHkgb24gU0hBLTEgZm9yXG4gICAgICAgIC8vIGNvcnJlY3RuZXNzIGFuZCB3aGljaCBpcyBhZmZlY3RlZCBieSB0aGlzIGJ1Zywgc28gSSd2ZSByZW1vdmVkIGFsbCB1c2VzXG4gICAgICAgIC8vIG9mIHBvc3QtaW5jcmVtZW50ICsrIGluIHdoaWNoIHRoZSByZXN1bHQgdmFsdWUgaXMgdXNlZC4gIFdlIGNhbiByZXZlcnRcbiAgICAgICAgLy8gdGhpcyBjaGFuZ2Ugb25jZSB0aGUgU2FmYXJpIGJ1Z1xuICAgICAgICAvLyAoaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEwOTAzNikgaGFzIGJlZW4gZml4ZWQgYW5kXG4gICAgICAgIC8vIG1vc3QgY2xpZW50cyBoYXZlIGJlZW4gdXBkYXRlZC5cbiAgICAgICAgV1tpXSA9XG4gICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCkgPDwgMjQpIHxcbiAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMSkgPDwgMTYpIHxcbiAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMikgPDwgOCkgfFxuICAgICAgICAgIGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDMpO1xuICAgICAgICBvZmZzZXQgKz0gNDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XG4gICAgICAgIFdbaV0gPVxuICAgICAgICAgIChidWZbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICAgICAgIChidWZbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAgICAgICAoYnVmW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICAgICAgICBidWZbb2Zmc2V0ICsgM107XG4gICAgICAgIG9mZnNldCArPSA0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGV4cGFuZCB0byA4MCB3b3Jkc1xuICAgIGZvciAobGV0IGkgPSAxNjsgaSA8IDgwOyBpKyspIHtcbiAgICAgIGNvbnN0IHQgPSBXW2kgLSAzXSBeIFdbaSAtIDhdIF4gV1tpIC0gMTRdIF4gV1tpIC0gMTZdO1xuICAgICAgV1tpXSA9ICgodCA8PCAxKSB8ICh0ID4+PiAzMSkpICYgMHhmZmZmZmZmZjtcbiAgICB9XG5cbiAgICBsZXQgYSA9IHRoaXMuY2hhaW5fWzBdO1xuICAgIGxldCBiID0gdGhpcy5jaGFpbl9bMV07XG4gICAgbGV0IGMgPSB0aGlzLmNoYWluX1syXTtcbiAgICBsZXQgZCA9IHRoaXMuY2hhaW5fWzNdO1xuICAgIGxldCBlID0gdGhpcy5jaGFpbl9bNF07XG4gICAgbGV0IGYsIGs7XG5cbiAgICAvLyBUT0RPKHVzZXIpOiBUcnkgdG8gdW5yb2xsIHRoaXMgbG9vcCB0byBzcGVlZCB1cCB0aGUgY29tcHV0YXRpb24uXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XG4gICAgICBpZiAoaSA8IDQwKSB7XG4gICAgICAgIGlmIChpIDwgMjApIHtcbiAgICAgICAgICBmID0gZCBeIChiICYgKGMgXiBkKSk7XG4gICAgICAgICAgayA9IDB4NWE4Mjc5OTk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZiA9IGIgXiBjIF4gZDtcbiAgICAgICAgICBrID0gMHg2ZWQ5ZWJhMTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGkgPCA2MCkge1xuICAgICAgICAgIGYgPSAoYiAmIGMpIHwgKGQgJiAoYiB8IGMpKTtcbiAgICAgICAgICBrID0gMHg4ZjFiYmNkYztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmID0gYiBeIGMgXiBkO1xuICAgICAgICAgIGsgPSAweGNhNjJjMWQ2O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHQgPSAoKChhIDw8IDUpIHwgKGEgPj4+IDI3KSkgKyBmICsgZSArIGsgKyBXW2ldKSAmIDB4ZmZmZmZmZmY7XG4gICAgICBlID0gZDtcbiAgICAgIGQgPSBjO1xuICAgICAgYyA9ICgoYiA8PCAzMCkgfCAoYiA+Pj4gMikpICYgMHhmZmZmZmZmZjtcbiAgICAgIGIgPSBhO1xuICAgICAgYSA9IHQ7XG4gICAgfVxuXG4gICAgdGhpcy5jaGFpbl9bMF0gPSAodGhpcy5jaGFpbl9bMF0gKyBhKSAmIDB4ZmZmZmZmZmY7XG4gICAgdGhpcy5jaGFpbl9bMV0gPSAodGhpcy5jaGFpbl9bMV0gKyBiKSAmIDB4ZmZmZmZmZmY7XG4gICAgdGhpcy5jaGFpbl9bMl0gPSAodGhpcy5jaGFpbl9bMl0gKyBjKSAmIDB4ZmZmZmZmZmY7XG4gICAgdGhpcy5jaGFpbl9bM10gPSAodGhpcy5jaGFpbl9bM10gKyBkKSAmIDB4ZmZmZmZmZmY7XG4gICAgdGhpcy5jaGFpbl9bNF0gPSAodGhpcy5jaGFpbl9bNF0gKyBlKSAmIDB4ZmZmZmZmZmY7XG4gIH1cblxuICB1cGRhdGUoYnl0ZXM/OiBudW1iZXJbXSB8IFVpbnQ4QXJyYXkgfCBzdHJpbmcsIGxlbmd0aD86IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFRPRE8oam9obmxlbnopOiB0aWdodGVuIHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgYW5kIHJlbW92ZSB0aGlzIGNoZWNrXG4gICAgaWYgKGJ5dGVzID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcbiAgICB9XG5cbiAgICBjb25zdCBsZW5ndGhNaW51c0Jsb2NrID0gbGVuZ3RoIC0gdGhpcy5ibG9ja1NpemU7XG4gICAgbGV0IG4gPSAwO1xuICAgIC8vIFVzaW5nIGxvY2FsIGluc3RlYWQgb2YgbWVtYmVyIHZhcmlhYmxlcyBnaXZlcyB+NSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LlxuICAgIGNvbnN0IGJ1ZiA9IHRoaXMuYnVmXztcbiAgICBsZXQgaW5idWYgPSB0aGlzLmluYnVmXztcblxuICAgIC8vIFRoZSBvdXRlciB3aGlsZSBsb29wIHNob3VsZCBleGVjdXRlIGF0IG1vc3QgdHdpY2UuXG4gICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcbiAgICAgIC8vIFdoZW4gd2UgaGF2ZSBubyBkYXRhIGluIHRoZSBibG9jayB0byB0b3AgdXAsIHdlIGNhbiBkaXJlY3RseSBwcm9jZXNzIHRoZVxuICAgICAgLy8gaW5wdXQgYnVmZmVyIChhc3N1bWluZyBpdCBjb250YWlucyBzdWZmaWNpZW50IGRhdGEpLiBUaGlzIGdpdmVzIH4yNSVcbiAgICAgIC8vIHNwZWVkdXAgb24gQ2hyb21lIDIzIGFuZCB+MTUlIHNwZWVkdXAgb24gRmlyZWZveCAxNiwgYnV0IHJlcXVpcmVzIHRoYXRcbiAgICAgIC8vIHRoZSBkYXRhIGlzIHByb3ZpZGVkIGluIGxhcmdlIGNodW5rcyAob3IgaW4gbXVsdGlwbGVzIG9mIDY0IGJ5dGVzKS5cbiAgICAgIGlmIChpbmJ1ZiA9PT0gMCkge1xuICAgICAgICB3aGlsZSAobiA8PSBsZW5ndGhNaW51c0Jsb2NrKSB7XG4gICAgICAgICAgdGhpcy5jb21wcmVzc18oYnl0ZXMsIG4pO1xuICAgICAgICAgIG4gKz0gdGhpcy5ibG9ja1NpemU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcbiAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXMuY2hhckNvZGVBdChuKTtcbiAgICAgICAgICArK2luYnVmO1xuICAgICAgICAgICsrbjtcbiAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xuICAgICAgICAgICAgaW5idWYgPSAwO1xuICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xuICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlc1tuXTtcbiAgICAgICAgICArK2luYnVmO1xuICAgICAgICAgICsrbjtcbiAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xuICAgICAgICAgICAgaW5idWYgPSAwO1xuICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5pbmJ1Zl8gPSBpbmJ1ZjtcbiAgICB0aGlzLnRvdGFsXyArPSBsZW5ndGg7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGRpZ2VzdCgpOiBudW1iZXJbXSB7XG4gICAgY29uc3QgZGlnZXN0OiBudW1iZXJbXSA9IFtdO1xuICAgIGxldCB0b3RhbEJpdHMgPSB0aGlzLnRvdGFsXyAqIDg7XG5cbiAgICAvLyBBZGQgcGFkIDB4ODAgMHgwMCouXG4gICAgaWYgKHRoaXMuaW5idWZfIDwgNTYpIHtcbiAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgNTYgLSB0aGlzLmluYnVmXyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgdGhpcy5ibG9ja1NpemUgLSAodGhpcy5pbmJ1Zl8gLSA1NikpO1xuICAgIH1cblxuICAgIC8vIEFkZCAjIGJpdHMuXG4gICAgZm9yIChsZXQgaSA9IHRoaXMuYmxvY2tTaXplIC0gMTsgaSA+PSA1NjsgaS0tKSB7XG4gICAgICB0aGlzLmJ1Zl9baV0gPSB0b3RhbEJpdHMgJiAyNTU7XG4gICAgICB0b3RhbEJpdHMgLz0gMjU2OyAvLyBEb24ndCB1c2UgYml0LXNoaWZ0aW5nIGhlcmUhXG4gICAgfVxuXG4gICAgdGhpcy5jb21wcmVzc18odGhpcy5idWZfKTtcblxuICAgIGxldCBuID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDI0OyBqID49IDA7IGogLT0gOCkge1xuICAgICAgICBkaWdlc3Rbbl0gPSAodGhpcy5jaGFpbl9baV0gPj4gaikgJiAyNTU7XG4gICAgICAgICsrbjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRpZ2VzdDtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmV4cG9ydCB0eXBlIE5leHRGbjxUPiA9ICh2YWx1ZTogVCkgPT4gdm9pZDtcbmV4cG9ydCB0eXBlIEVycm9yRm4gPSAoZXJyb3I6IEVycm9yKSA9PiB2b2lkO1xuZXhwb3J0IHR5cGUgQ29tcGxldGVGbiA9ICgpID0+IHZvaWQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgT2JzZXJ2ZXI8VD4ge1xuICAvLyBDYWxsZWQgb25jZSBmb3IgZWFjaCB2YWx1ZSBpbiBhIHN0cmVhbSBvZiB2YWx1ZXMuXG4gIG5leHQ6IE5leHRGbjxUPjtcblxuICAvLyBBIHN0cmVhbSB0ZXJtaW5hdGVzIGJ5IGEgc2luZ2xlIGNhbGwgdG8gRUlUSEVSIGVycm9yKCkgb3IgY29tcGxldGUoKS5cbiAgZXJyb3I6IEVycm9yRm47XG5cbiAgLy8gTm8gZXZlbnRzIHdpbGwgYmUgc2VudCB0byBuZXh0KCkgb25jZSBjb21wbGV0ZSgpIGlzIGNhbGxlZC5cbiAgY29tcGxldGU6IENvbXBsZXRlRm47XG59XG5cbmV4cG9ydCB0eXBlIFBhcnRpYWxPYnNlcnZlcjxUPiA9IFBhcnRpYWw8T2JzZXJ2ZXI8VD4+O1xuXG4vLyBUT0RPOiBTdXBwb3J0IGFsc28gVW5zdWJzY3JpYmUudW5zdWJzY3JpYmU/XG5leHBvcnQgdHlwZSBVbnN1YnNjcmliZSA9ICgpID0+IHZvaWQ7XG5cbi8qKlxuICogVGhlIFN1YnNjcmliZSBpbnRlcmZhY2UgaGFzIHR3byBmb3JtcyAtIHBhc3NpbmcgdGhlIGlubGluZSBmdW5jdGlvblxuICogY2FsbGJhY2tzLCBvciBhIG9iamVjdCBpbnRlcmZhY2Ugd2l0aCBjYWxsYmFjayBwcm9wZXJ0aWVzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN1YnNjcmliZTxUPiB7XG4gIChuZXh0PzogTmV4dEZuPFQ+LCBlcnJvcj86IEVycm9yRm4sIGNvbXBsZXRlPzogQ29tcGxldGVGbik6IFVuc3Vic2NyaWJlO1xuICAob2JzZXJ2ZXI6IFBhcnRpYWxPYnNlcnZlcjxUPik6IFVuc3Vic2NyaWJlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE9ic2VydmFibGU8VD4ge1xuICAvLyBTdWJzY3JpYmUgbWV0aG9kXG4gIHN1YnNjcmliZTogU3Vic2NyaWJlPFQ+O1xufVxuXG5leHBvcnQgdHlwZSBFeGVjdXRvcjxUPiA9IChvYnNlcnZlcjogT2JzZXJ2ZXI8VD4pID0+IHZvaWQ7XG5cbi8qKlxuICogSGVscGVyIHRvIG1ha2UgYSBTdWJzY3JpYmUgZnVuY3Rpb24gKGp1c3QgbGlrZSBQcm9taXNlIGhlbHBzIG1ha2UgYVxuICogVGhlbmFibGUpLlxuICpcbiAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxuICogICAgIGFzIGEgcHJveHkuXG4gKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdWJzY3JpYmU8VD4oXG4gIGV4ZWN1dG9yOiBFeGVjdXRvcjxUPixcbiAgb25Ob09ic2VydmVycz86IEV4ZWN1dG9yPFQ+XG4pOiBTdWJzY3JpYmU8VD4ge1xuICBjb25zdCBwcm94eSA9IG5ldyBPYnNlcnZlclByb3h5PFQ+KGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKTtcbiAgcmV0dXJuIHByb3h5LnN1YnNjcmliZS5iaW5kKHByb3h5KTtcbn1cblxuLyoqXG4gKiBJbXBsZW1lbnQgZmFuLW91dCBmb3IgYW55IG51bWJlciBvZiBPYnNlcnZlcnMgYXR0YWNoZWQgdmlhIGEgc3Vic2NyaWJlXG4gKiBmdW5jdGlvbi5cbiAqL1xuY2xhc3MgT2JzZXJ2ZXJQcm94eTxUPiBpbXBsZW1lbnRzIE9ic2VydmVyPFQ+IHtcbiAgcHJpdmF0ZSBvYnNlcnZlcnM6IEFycmF5PE9ic2VydmVyPFQ+PiB8IHVuZGVmaW5lZCA9IFtdO1xuICBwcml2YXRlIHVuc3Vic2NyaWJlczogVW5zdWJzY3JpYmVbXSA9IFtdO1xuICBwcml2YXRlIG9uTm9PYnNlcnZlcnM6IEV4ZWN1dG9yPFQ+IHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIG9ic2VydmVyQ291bnQgPSAwO1xuICAvLyBNaWNyby10YXNrIHNjaGVkdWxpbmcgYnkgY2FsbGluZyB0YXNrLnRoZW4oKS5cbiAgcHJpdmF0ZSB0YXNrID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIHByaXZhdGUgZmluYWxpemVkID0gZmFsc2U7XG4gIHByaXZhdGUgZmluYWxFcnJvcj86IEVycm9yO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcbiAgICogICAgIGFzIGEgcHJveHkuXG4gICAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGV4ZWN1dG9yOiBFeGVjdXRvcjxUPiwgb25Ob09ic2VydmVycz86IEV4ZWN1dG9yPFQ+KSB7XG4gICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gb25Ob09ic2VydmVycztcbiAgICAvLyBDYWxsIHRoZSBleGVjdXRvciBhc3luY2hyb25vdXNseSBzbyBzdWJzY3JpYmVycyB0aGF0IGFyZSBjYWxsZWRcbiAgICAvLyBzeW5jaHJvbm91c2x5IGFmdGVyIHRoZSBjcmVhdGlvbiBvZiB0aGUgc3Vic2NyaWJlIGZ1bmN0aW9uXG4gICAgLy8gY2FuIHN0aWxsIHJlY2VpdmUgdGhlIHZlcnkgZmlyc3QgdmFsdWUgZ2VuZXJhdGVkIGluIHRoZSBleGVjdXRvci5cbiAgICB0aGlzLnRhc2tcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgZXhlY3V0b3IodGhpcyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGUgPT4ge1xuICAgICAgICB0aGlzLmVycm9yKGUpO1xuICAgICAgfSk7XG4gIH1cblxuICBuZXh0KHZhbHVlOiBUKTogdm9pZCB7XG4gICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyOiBPYnNlcnZlcjxUPikgPT4ge1xuICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XG4gICAgfSk7XG4gIH1cblxuICBlcnJvcihlcnJvcjogRXJyb3IpOiB2b2lkIHtcbiAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXI6IE9ic2VydmVyPFQ+KSA9PiB7XG4gICAgICBvYnNlcnZlci5lcnJvcihlcnJvcik7XG4gICAgfSk7XG4gICAgdGhpcy5jbG9zZShlcnJvcik7XG4gIH1cblxuICBjb21wbGV0ZSgpOiB2b2lkIHtcbiAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXI6IE9ic2VydmVyPFQ+KSA9PiB7XG4gICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpYmUgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgYW4gT2JzZXJ2ZXIgdG8gdGhlIGZhbi1vdXQgbGlzdC5cbiAgICpcbiAgICogLSBXZSByZXF1aXJlIHRoYXQgbm8gZXZlbnQgaXMgc2VudCB0byBhIHN1YnNjcmliZXIgc3ljaHJvbm91c2x5IHRvIHRoZWlyXG4gICAqICAgY2FsbCB0byBzdWJzY3JpYmUoKS5cbiAgICovXG4gIHN1YnNjcmliZShcbiAgICBuZXh0T3JPYnNlcnZlcj86IE5leHRGbjxUPiB8IFBhcnRpYWxPYnNlcnZlcjxUPixcbiAgICBlcnJvcj86IEVycm9yRm4sXG4gICAgY29tcGxldGU/OiBDb21wbGV0ZUZuXG4gICk6IFVuc3Vic2NyaWJlIHtcbiAgICBsZXQgb2JzZXJ2ZXI6IE9ic2VydmVyPFQ+O1xuXG4gICAgaWYgKFxuICAgICAgbmV4dE9yT2JzZXJ2ZXIgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgZXJyb3IgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgY29tcGxldGUgPT09IHVuZGVmaW5lZFxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE9ic2VydmVyLicpO1xuICAgIH1cblxuICAgIC8vIEFzc2VtYmxlIGFuIE9ic2VydmVyIG9iamVjdCB3aGVuIHBhc3NlZCBhcyBjYWxsYmFjayBmdW5jdGlvbnMuXG4gICAgaWYgKFxuICAgICAgaW1wbGVtZW50c0FueU1ldGhvZHMobmV4dE9yT2JzZXJ2ZXIgYXMgeyBba2V5OiBzdHJpbmddOiB1bmtub3duIH0sIFtcbiAgICAgICAgJ25leHQnLFxuICAgICAgICAnZXJyb3InLFxuICAgICAgICAnY29tcGxldGUnXG4gICAgICBdKVxuICAgICkge1xuICAgICAgb2JzZXJ2ZXIgPSBuZXh0T3JPYnNlcnZlciBhcyBPYnNlcnZlcjxUPjtcbiAgICB9IGVsc2Uge1xuICAgICAgb2JzZXJ2ZXIgPSB7XG4gICAgICAgIG5leHQ6IG5leHRPck9ic2VydmVyIGFzIE5leHRGbjxUPixcbiAgICAgICAgZXJyb3IsXG4gICAgICAgIGNvbXBsZXRlXG4gICAgICB9IGFzIE9ic2VydmVyPFQ+O1xuICAgIH1cblxuICAgIGlmIChvYnNlcnZlci5uZXh0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG9ic2VydmVyLm5leHQgPSBub29wIGFzIE5leHRGbjxUPjtcbiAgICB9XG4gICAgaWYgKG9ic2VydmVyLmVycm9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG9ic2VydmVyLmVycm9yID0gbm9vcCBhcyBFcnJvckZuO1xuICAgIH1cbiAgICBpZiAob2JzZXJ2ZXIuY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgb2JzZXJ2ZXIuY29tcGxldGUgPSBub29wIGFzIENvbXBsZXRlRm47XG4gICAgfVxuXG4gICAgY29uc3QgdW5zdWIgPSB0aGlzLnVuc3Vic2NyaWJlT25lLmJpbmQodGhpcywgdGhpcy5vYnNlcnZlcnMhLmxlbmd0aCk7XG5cbiAgICAvLyBBdHRlbXB0IHRvIHN1YnNjcmliZSB0byBhIHRlcm1pbmF0ZWQgT2JzZXJ2YWJsZSAtIHdlXG4gICAgLy8ganVzdCByZXNwb25kIHRvIHRoZSBPYnNlcnZlciB3aXRoIHRoZSBmaW5hbCBlcnJvciBvciBjb21wbGV0ZVxuICAgIC8vIGV2ZW50LlxuICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0aGlzLmZpbmFsRXJyb3IpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKHRoaXMuZmluYWxFcnJvcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gbm90aGluZ1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMub2JzZXJ2ZXJzIS5wdXNoKG9ic2VydmVyIGFzIE9ic2VydmVyPFQ+KTtcblxuICAgIHJldHVybiB1bnN1YjtcbiAgfVxuXG4gIC8vIFVuc3Vic2NyaWJlIGlzIHN5bmNocm9ub3VzIC0gd2UgZ3VhcmFudGVlIHRoYXQgbm8gZXZlbnRzIGFyZSBzZW50IHRvXG4gIC8vIGFueSB1bnN1YnNjcmliZWQgT2JzZXJ2ZXIuXG4gIHByaXZhdGUgdW5zdWJzY3JpYmVPbmUoaTogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub2JzZXJ2ZXJzID09PSB1bmRlZmluZWQgfHwgdGhpcy5vYnNlcnZlcnNbaV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRlbGV0ZSB0aGlzLm9ic2VydmVyc1tpXTtcblxuICAgIHRoaXMub2JzZXJ2ZXJDb3VudCAtPSAxO1xuICAgIGlmICh0aGlzLm9ic2VydmVyQ291bnQgPT09IDAgJiYgdGhpcy5vbk5vT2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMub25Ob09ic2VydmVycyh0aGlzKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGZvckVhY2hPYnNlcnZlcihmbjogKG9ic2VydmVyOiBPYnNlcnZlcjxUPikgPT4gdm9pZCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xuICAgICAgLy8gQWxyZWFkeSBjbG9zZWQgYnkgcHJldmlvdXMgZXZlbnQuLi4uanVzdCBlYXQgdGhlIGFkZGl0aW9uYWwgdmFsdWVzLlxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNpbmNlIHNlbmRPbmUgY2FsbHMgYXN5bmNocm9ub3VzbHkgLSB0aGVyZSBpcyBubyBjaGFuY2UgdGhhdFxuICAgIC8vIHRoaXMub2JzZXJ2ZXJzIHdpbGwgYmVjb21lIHVuZGVmaW5lZC5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub2JzZXJ2ZXJzIS5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zZW5kT25lKGksIGZuKTtcbiAgICB9XG4gIH1cblxuICAvLyBDYWxsIHRoZSBPYnNlcnZlciB2aWEgb25lIG9mIGl0J3MgY2FsbGJhY2sgZnVuY3Rpb24uIFdlIGFyZSBjYXJlZnVsIHRvXG4gIC8vIGNvbmZpcm0gdGhhdCB0aGUgb2JzZXJ2ZSBoYXMgbm90IGJlZW4gdW5zdWJzY3JpYmVkIHNpbmNlIHRoaXMgYXN5bmNocm9ub3VzXG4gIC8vIGZ1bmN0aW9uIGhhZCBiZWVuIHF1ZXVlZC5cbiAgcHJpdmF0ZSBzZW5kT25lKGk6IG51bWJlciwgZm46IChvYnNlcnZlcjogT2JzZXJ2ZXI8VD4pID0+IHZvaWQpOiB2b2lkIHtcbiAgICAvLyBFeGVjdXRlIHRoZSBjYWxsYmFjayBhc3luY2hyb25vdXNseVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XG4gICAgICBpZiAodGhpcy5vYnNlcnZlcnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm9ic2VydmVyc1tpXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm4odGhpcy5vYnNlcnZlcnNbaV0pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gSWdub3JlIGV4Y2VwdGlvbnMgcmFpc2VkIGluIE9ic2VydmVycyBvciBtaXNzaW5nIG1ldGhvZHMgb2YgYW5cbiAgICAgICAgICAvLyBPYnNlcnZlci5cbiAgICAgICAgICAvLyBMb2cgZXJyb3IgdG8gY29uc29sZS4gYi8zMTQwNDgwNlxuICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY2xvc2UoZXJyPzogRXJyb3IpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xuICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5maW5hbEVycm9yID0gZXJyO1xuICAgIH1cbiAgICAvLyBQcm94eSBpcyBubyBsb25nZXIgbmVlZGVkIC0gZ2FyYmFnZSBjb2xsZWN0IHJlZmVyZW5jZXNcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5vYnNlcnZlcnMgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSB1bmRlZmluZWQ7XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqIFR1cm4gc3luY2hyb25vdXMgZnVuY3Rpb24gaW50byBvbmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcbmV4cG9ydCBmdW5jdGlvbiBhc3luYyhmbjogRnVuY3Rpb24sIG9uRXJyb3I/OiBFcnJvckZuKTogRnVuY3Rpb24ge1xuICByZXR1cm4gKC4uLmFyZ3M6IHVua25vd25bXSkgPT4ge1xuICAgIFByb21pc2UucmVzb2x2ZSh0cnVlKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBmbiguLi5hcmdzKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yOiBFcnJvcikgPT4ge1xuICAgICAgICBpZiAob25FcnJvcikge1xuICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgb2JqZWN0IHBhc3NlZCBpbiBpbXBsZW1lbnRzIGFueSBvZiB0aGUgbmFtZWQgbWV0aG9kcy5cbiAqL1xuZnVuY3Rpb24gaW1wbGVtZW50c0FueU1ldGhvZHMoXG4gIG9iajogeyBba2V5OiBzdHJpbmddOiB1bmtub3duIH0sXG4gIG1ldGhvZHM6IHN0cmluZ1tdXG4pOiBib29sZWFuIHtcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZvciAoY29uc3QgbWV0aG9kIG9mIG1ldGhvZHMpIHtcbiAgICBpZiAobWV0aG9kIGluIG9iaiAmJiB0eXBlb2Ygb2JqW21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gbm9vcCgpOiB2b2lkIHtcbiAgLy8gZG8gbm90aGluZ1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBDaGVjayB0byBtYWtlIHN1cmUgdGhlIGFwcHJvcHJpYXRlIG51bWJlciBvZiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIGZvciBhIHB1YmxpYyBmdW5jdGlvbi5cbiAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBmYWlscy5cbiAqXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXG4gKiBAcGFyYW0gbWluQ291bnQgVGhlIG1pbmltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcbiAqIEBwYXJhbSBtYXhDb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgYXJndW1lbnQgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXG4gKiBAcGFyYW0gYXJnQ291bnQgVGhlIGFjdHVhbCBudW1iZXIgb2YgYXJndW1lbnRzIHByb3ZpZGVkLlxuICovXG5leHBvcnQgY29uc3QgdmFsaWRhdGVBcmdDb3VudCA9IGZ1bmN0aW9uIChcbiAgZm5OYW1lOiBzdHJpbmcsXG4gIG1pbkNvdW50OiBudW1iZXIsXG4gIG1heENvdW50OiBudW1iZXIsXG4gIGFyZ0NvdW50OiBudW1iZXJcbik6IHZvaWQge1xuICBsZXQgYXJnRXJyb3I7XG4gIGlmIChhcmdDb3VudCA8IG1pbkNvdW50KSB7XG4gICAgYXJnRXJyb3IgPSAnYXQgbGVhc3QgJyArIG1pbkNvdW50O1xuICB9IGVsc2UgaWYgKGFyZ0NvdW50ID4gbWF4Q291bnQpIHtcbiAgICBhcmdFcnJvciA9IG1heENvdW50ID09PSAwID8gJ25vbmUnIDogJ25vIG1vcmUgdGhhbiAnICsgbWF4Q291bnQ7XG4gIH1cbiAgaWYgKGFyZ0Vycm9yKSB7XG4gICAgY29uc3QgZXJyb3IgPVxuICAgICAgZm5OYW1lICtcbiAgICAgICcgZmFpbGVkOiBXYXMgY2FsbGVkIHdpdGggJyArXG4gICAgICBhcmdDb3VudCArXG4gICAgICAoYXJnQ291bnQgPT09IDEgPyAnIGFyZ3VtZW50LicgOiAnIGFyZ3VtZW50cy4nKSArXG4gICAgICAnIEV4cGVjdHMgJyArXG4gICAgICBhcmdFcnJvciArXG4gICAgICAnLic7XG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdG8gcHJlZml4IGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgZmFpbGVkIGFyZ3VtZW50IHZhbGlkYXRpb25cbiAqXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXG4gKiBAcGFyYW0gYXJnTmFtZSBUaGUgbmFtZSBvZiB0aGUgYXJndW1lbnRcbiAqIEByZXR1cm4gVGhlIHByZWZpeCB0byBhZGQgdG8gdGhlIGVycm9yIHRocm93biBmb3IgdmFsaWRhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVycm9yUHJlZml4KGZuTmFtZTogc3RyaW5nLCBhcmdOYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gYCR7Zm5OYW1lfSBmYWlsZWQ6ICR7YXJnTmFtZX0gYXJndW1lbnQgYDtcbn1cblxuLyoqXG4gKiBAcGFyYW0gZm5OYW1lXG4gKiBAcGFyYW0gYXJndW1lbnROdW1iZXJcbiAqIEBwYXJhbSBuYW1lc3BhY2VcbiAqIEBwYXJhbSBvcHRpb25hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVOYW1lc3BhY2UoXG4gIGZuTmFtZTogc3RyaW5nLFxuICBuYW1lc3BhY2U6IHN0cmluZyxcbiAgb3B0aW9uYWw6IGJvb2xlYW5cbik6IHZvaWQge1xuICBpZiAob3B0aW9uYWwgJiYgIW5hbWVzcGFjZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcbiAgICAvL1RPRE86IEkgc2hvdWxkIGRvIG1vcmUgdmFsaWRhdGlvbiBoZXJlLiBXZSBvbmx5IGFsbG93IGNlcnRhaW4gY2hhcnMgaW4gbmFtZXNwYWNlcy5cbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBlcnJvclByZWZpeChmbk5hbWUsICduYW1lc3BhY2UnKSArICdtdXN0IGJlIGEgdmFsaWQgZmlyZWJhc2UgbmFtZXNwYWNlLidcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKFxuICBmbk5hbWU6IHN0cmluZyxcbiAgYXJndW1lbnROYW1lOiBzdHJpbmcsXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXG4gIGNhbGxiYWNrOiBGdW5jdGlvbixcbiAgb3B0aW9uYWw6IGJvb2xlYW5cbik6IHZvaWQge1xuICBpZiAob3B0aW9uYWwgJiYgIWNhbGxiYWNrKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGZ1bmN0aW9uLidcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUNvbnRleHRPYmplY3QoXG4gIGZuTmFtZTogc3RyaW5nLFxuICBhcmd1bWVudE5hbWU6IHN0cmluZyxcbiAgY29udGV4dDogdW5rbm93bixcbiAgb3B0aW9uYWw6IGJvb2xlYW5cbik6IHZvaWQge1xuICBpZiAob3B0aW9uYWwgJiYgIWNvbnRleHQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHR5cGVvZiBjb250ZXh0ICE9PSAnb2JqZWN0JyB8fCBjb250ZXh0ID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBjb250ZXh0IG9iamVjdC4nXG4gICAgKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnQnO1xuXG4vLyBDb2RlIG9yaWdpbmFsbHkgY2FtZSBmcm9tIGdvb2cuY3J5cHQuc3RyaW5nVG9VdGY4Qnl0ZUFycmF5LCBidXQgZm9yIHNvbWUgcmVhc29uIHRoZXlcbi8vIGF1dG9tYXRpY2FsbHkgcmVwbGFjZWQgJ1xcclxcbicgd2l0aCAnXFxuJywgYW5kIHRoZXkgZGlkbid0IGhhbmRsZSBzdXJyb2dhdGUgcGFpcnMsXG4vLyBzbyBpdCdzIGJlZW4gbW9kaWZpZWQuXG5cbi8vIE5vdGUgdGhhdCBub3QgYWxsIFVuaWNvZGUgY2hhcmFjdGVycyBhcHBlYXIgYXMgc2luZ2xlIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdCBzdHJpbmdzLlxuLy8gZnJvbUNoYXJDb2RlIHJldHVybnMgdGhlIFVURi0xNiBlbmNvZGluZyBvZiBhIGNoYXJhY3RlciAtIHNvIHNvbWUgVW5pY29kZSBjaGFyYWN0ZXJzXG4vLyB1c2UgMiBjaGFyYWN0ZXJzIGluIEphdmFzY3JpcHQuICBBbGwgNC1ieXRlIFVURi04IGNoYXJhY3RlcnMgYmVnaW4gd2l0aCBhIGZpcnN0XG4vLyBjaGFyYWN0ZXIgaW4gdGhlIHJhbmdlIDB4RDgwMCAtIDB4REJGRiAodGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHNvLWNhbGxlZCBzdXJyb2dhdGVcbi8vIHBhaXIpLlxuLy8gU2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi81LjEvI3NlYy0xNS4xLjNcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuZXhwb3J0IGNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5ID0gZnVuY3Rpb24gKHN0cjogc3RyaW5nKTogbnVtYmVyW10ge1xuICBjb25zdCBvdXQ6IG51bWJlcltdID0gW107XG4gIGxldCBwID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuXG4gICAgLy8gSXMgdGhpcyB0aGUgbGVhZCBzdXJyb2dhdGUgaW4gYSBzdXJyb2dhdGUgcGFpcj9cbiAgICBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcbiAgICAgIGNvbnN0IGhpZ2ggPSBjIC0gMHhkODAwOyAvLyB0aGUgaGlnaCAxMCBiaXRzLlxuICAgICAgaSsrO1xuICAgICAgYXNzZXJ0KGkgPCBzdHIubGVuZ3RoLCAnU3Vycm9nYXRlIHBhaXIgbWlzc2luZyB0cmFpbCBzdXJyb2dhdGUuJyk7XG4gICAgICBjb25zdCBsb3cgPSBzdHIuY2hhckNvZGVBdChpKSAtIDB4ZGMwMDsgLy8gdGhlIGxvdyAxMCBiaXRzLlxuICAgICAgYyA9IDB4MTAwMDAgKyAoaGlnaCA8PCAxMCkgKyBsb3c7XG4gICAgfVxuXG4gICAgaWYgKGMgPCAxMjgpIHtcbiAgICAgIG91dFtwKytdID0gYztcbiAgICB9IGVsc2UgaWYgKGMgPCAyMDQ4KSB7XG4gICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xuICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcbiAgICB9IGVsc2UgaWYgKGMgPCA2NTUzNikge1xuICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XG4gICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcbiAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xuICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xuICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XG4gICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGUgbGVuZ3RoIHdpdGhvdXQgYWN0dWFsbHkgY29udmVydGluZzsgdXNlZnVsIGZvciBkb2luZyBjaGVhcGVyIHZhbGlkYXRpb24uXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBzdHJpbmdMZW5ndGggPSBmdW5jdGlvbiAoc3RyOiBzdHJpbmcpOiBudW1iZXIge1xuICBsZXQgcCA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIGlmIChjIDwgMTI4KSB7XG4gICAgICBwKys7XG4gICAgfSBlbHNlIGlmIChjIDwgMjA0OCkge1xuICAgICAgcCArPSAyO1xuICAgIH0gZWxzZSBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcbiAgICAgIC8vIExlYWQgc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIuICBUaGUgcGFpciB0b2dldGhlciB3aWxsIHRha2UgNCBieXRlcyB0byByZXByZXNlbnQuXG4gICAgICBwICs9IDQ7XG4gICAgICBpKys7IC8vIHNraXAgdHJhaWwgc3Vycm9nYXRlLlxuICAgIH0gZWxzZSB7XG4gICAgICBwICs9IDM7XG4gICAgfVxuICB9XG4gIHJldHVybiBwO1xufTtcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogVGhlIGFtb3VudCBvZiBtaWxsaXNlY29uZHMgdG8gZXhwb25lbnRpYWxseSBpbmNyZWFzZS5cbiAqL1xuY29uc3QgREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMgPSAxMDAwO1xuXG4vKipcbiAqIFRoZSBmYWN0b3IgdG8gYmFja29mZiBieS5cbiAqIFNob3VsZCBiZSBhIG51bWJlciBncmVhdGVyIHRoYW4gMS5cbiAqL1xuY29uc3QgREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiA9IDI7XG5cbi8qKlxuICogVGhlIG1heGltdW0gbWlsbGlzZWNvbmRzIHRvIGluY3JlYXNlIHRvLlxuICpcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IE1BWF9WQUxVRV9NSUxMSVMgPSA0ICogNjAgKiA2MCAqIDEwMDA7IC8vIEZvdXIgaG91cnMsIGxpa2UgaU9TIGFuZCBBbmRyb2lkLlxuXG4vKipcbiAqIFRoZSBwZXJjZW50YWdlIG9mIGJhY2tvZmYgdGltZSB0byByYW5kb21pemUgYnkuXG4gKiBTZWVcbiAqIGh0dHA6Ly9nby9zYWZlLWNsaWVudC1iZWhhdmlvciNzdGVwLTEtZGV0ZXJtaW5lLXRoZS1hcHByb3ByaWF0ZS1yZXRyeS1pbnRlcnZhbC10by1oYW5kbGUtc3Bpa2UtdHJhZmZpY1xuICogZm9yIGNvbnRleHQuXG4gKlxuICogPHA+VmlzaWJsZSBmb3IgdGVzdGluZ1xuICovXG5leHBvcnQgY29uc3QgUkFORE9NX0ZBQ1RPUiA9IDAuNTtcblxuLyoqXG4gKiBCYXNlZCBvbiB0aGUgYmFja29mZiBtZXRob2QgZnJvbVxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9tYXN0ZXIvY2xvc3VyZS9nb29nL21hdGgvZXhwb25lbnRpYWxiYWNrb2ZmLmpzLlxuICogRXh0cmFjdGVkIGhlcmUgc28gd2UgZG9uJ3QgbmVlZCB0byBwYXNzIG1ldGFkYXRhIGFuZCBhIHN0YXRlZnVsIEV4cG9uZW50aWFsQmFja29mZiBvYmplY3QgYXJvdW5kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlQmFja29mZk1pbGxpcyhcbiAgYmFja29mZkNvdW50OiBudW1iZXIsXG4gIGludGVydmFsTWlsbGlzOiBudW1iZXIgPSBERUZBVUxUX0lOVEVSVkFMX01JTExJUyxcbiAgYmFja29mZkZhY3RvcjogbnVtYmVyID0gREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUlxuKTogbnVtYmVyIHtcbiAgLy8gQ2FsY3VsYXRlcyBhbiBleHBvbmVudGlhbGx5IGluY3JlYXNpbmcgdmFsdWUuXG4gIC8vIERldmlhdGlvbjogY2FsY3VsYXRlcyB2YWx1ZSBmcm9tIGNvdW50IGFuZCBhIGNvbnN0YW50IGludGVydmFsLCBzbyB3ZSBvbmx5IG5lZWQgdG8gc2F2ZSB2YWx1ZVxuICAvLyBhbmQgY291bnQgdG8gcmVzdG9yZSBzdGF0ZS5cbiAgY29uc3QgY3VyckJhc2VWYWx1ZSA9IGludGVydmFsTWlsbGlzICogTWF0aC5wb3coYmFja29mZkZhY3RvciwgYmFja29mZkNvdW50KTtcblxuICAvLyBBIHJhbmRvbSBcImZ1enpcIiB0byBhdm9pZCB3YXZlcyBvZiByZXRyaWVzLlxuICAvLyBEZXZpYXRpb246IHJhbmRvbUZhY3RvciBpcyByZXF1aXJlZC5cbiAgY29uc3QgcmFuZG9tV2FpdCA9IE1hdGgucm91bmQoXG4gICAgLy8gQSBmcmFjdGlvbiBvZiB0aGUgYmFja29mZiB2YWx1ZSB0byBhZGQvc3VidHJhY3QuXG4gICAgLy8gRGV2aWF0aW9uOiBjaGFuZ2VzIG11bHRpcGxpY2F0aW9uIG9yZGVyIHRvIGltcHJvdmUgcmVhZGFiaWxpdHkuXG4gICAgUkFORE9NX0ZBQ1RPUiAqXG4gICAgICBjdXJyQmFzZVZhbHVlICpcbiAgICAgIC8vIEEgcmFuZG9tIGZsb2F0IChyb3VuZGVkIHRvIGludCBieSBNYXRoLnJvdW5kIGFib3ZlKSBpbiB0aGUgcmFuZ2UgWy0xLCAxXS4gRGV0ZXJtaW5lc1xuICAgICAgLy8gaWYgd2UgYWRkIG9yIHN1YnRyYWN0LlxuICAgICAgKE1hdGgucmFuZG9tKCkgLSAwLjUpICpcbiAgICAgIDJcbiAgKTtcblxuICAvLyBMaW1pdHMgYmFja29mZiB0byBtYXggdG8gYXZvaWQgZWZmZWN0aXZlbHkgcGVybWFuZW50IGJhY2tvZmYuXG4gIHJldHVybiBNYXRoLm1pbihNQVhfVkFMVUVfTUlMTElTLCBjdXJyQmFzZVZhbHVlICsgcmFuZG9tV2FpdCk7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFByb3ZpZGUgRW5nbGlzaCBvcmRpbmFsIGxldHRlcnMgYWZ0ZXIgYSBudW1iZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9yZGluYWwoaTogbnVtYmVyKTogc3RyaW5nIHtcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaSkpIHtcbiAgICByZXR1cm4gYCR7aX1gO1xuICB9XG4gIHJldHVybiBpICsgaW5kaWNhdG9yKGkpO1xufVxuXG5mdW5jdGlvbiBpbmRpY2F0b3IoaTogbnVtYmVyKTogc3RyaW5nIHtcbiAgaSA9IE1hdGguYWJzKGkpO1xuICBjb25zdCBjZW50ID0gaSAlIDEwMDtcbiAgaWYgKGNlbnQgPj0gMTAgJiYgY2VudCA8PSAyMCkge1xuICAgIHJldHVybiAndGgnO1xuICB9XG4gIGNvbnN0IGRlYyA9IGkgJSAxMDtcbiAgaWYgKGRlYyA9PT0gMSkge1xuICAgIHJldHVybiAnc3QnO1xuICB9XG4gIGlmIChkZWMgPT09IDIpIHtcbiAgICByZXR1cm4gJ25kJztcbiAgfVxuICBpZiAoZGVjID09PSAzKSB7XG4gICAgcmV0dXJuICdyZCc7XG4gIH1cbiAgcmV0dXJuICd0aCc7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBhdDxUPiB7XG4gIF9kZWxlZ2F0ZTogVDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1vZHVsYXJJbnN0YW5jZTxFeHBTZXJ2aWNlPihcbiAgc2VydmljZTogQ29tcGF0PEV4cFNlcnZpY2U+IHwgRXhwU2VydmljZVxuKTogRXhwU2VydmljZSB7XG4gIGlmIChzZXJ2aWNlICYmIChzZXJ2aWNlIGFzIENvbXBhdDxFeHBTZXJ2aWNlPikuX2RlbGVnYXRlKSB7XG4gICAgcmV0dXJuIChzZXJ2aWNlIGFzIENvbXBhdDxFeHBTZXJ2aWNlPikuX2RlbGVnYXRlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzZXJ2aWNlIGFzIEV4cFNlcnZpY2U7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7Ozs7O0FBSUE7Ozs7QUFJQTtBQUNBOzs7O0FBR0E7QUFDQTs7OztBQUlBO0FBYkE7QUNyQkE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBbUJBOzs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7Ozs7O0FBR0E7QUFDQTs7QUNoQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWlCQTs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBRkE7O0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUE1QkE7QUErQkE7Ozs7Ozs7O0FBTUE7O0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBRkE7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBVEE7QUFXQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQTlCQTtBQWtEQTtBQUNBO0FBQ0E7QUFDQTtBQURBOzs7O0FBSUE7QUFDQTs7OztBQUlBO0FBQ0E7Ozs7O0FBS0E7QUFDQTs7Ozs7QUFLQTtBQUNBOzs7OztBQUtBO0FBQ0E7Ozs7QUFLQTtBQUNBO0FBbENBO0FBQ0E7Ozs7QUF1Q0E7QUFDQTtBQXpDQTtBQUNBOzs7Ozs7OztBQWtEQTtBQUNBOzs7Ozs7Ozs7O0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQXZHQTtBQUNBOzs7Ozs7Ozs7QUFpSEE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUF4SEE7QUFDQTs7Ozs7Ozs7O0FBa0lBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBeklBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7QUEwSkE7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBck1BO0FBQ0E7Ozs7OztBQTRNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbE9BO0FBcU9BOzs7O0FBR0E7QUFDQTtBQUNBOztBQUdBOzs7Ozs7QUFJQTs7QUFFQTs7QUFHQTs7Ozs7Ozs7Ozs7QUFTQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUFBOztBQy9XQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQW5CQTtBQUNBO0FBcUJBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDakZBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7QUFJQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBSEE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7Ozs7Ozs7O0FBUUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFBQTs7O0FBR0E7Ozs7QUFJQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFsQkE7QUFvQkE7Ozs7O0FDeERBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE4RkE7QUFJQTtBQUNBO0FBSEE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQVRBO0FBQ0E7QUFrQkE7QUFDQTtBQUtBO0FDN0lBOzs7Ozs7Ozs7Ozs7Ozs7OztBQW1CQTs7Ozs7O0FBSUE7QUFDQTtBQUlBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7O0FBT0E7QUFDQTs7QUFJQTtBQUdBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFNQTtBQUNBO0FBRUE7Ozs7Ozs7QUFLQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUtBO0FBRUE7Ozs7OztBQUlBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFOQTtBQUNBO0FBT0E7QUFDQTtBQURBO0FBQ0E7QUFHQTs7O0FBQ0E7QUFEQTtBQWpCQTtBQXFCQTtBQUNBO0FBdkJBO0FBeUJBO0FBRUE7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUMvTUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBZ0JBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE2Q0E7QUFXQTtBQUNBO0FBQUE7OztBQUdBO0FBR0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUpBO0FBRUE7QUFMQTs7O0FBV0E7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFhQTtBQUNBOztBQXBCQTtBQUNBO0FBcUJBO0FBSUE7QUFHQTtBQUNBO0FBSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUNsSUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBOzs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUNsQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBK0JBOzs7Ozs7Ozs7QUFPQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7O0FBZUE7Ozs7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQVNBOzs7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOztBQUdBOzs7Ozs7Ozs7QUFPQTtBQUNBO0FBQUE7QUFHQTs7QUFHQTs7Ozs7Ozs7O0FBT0E7QUFDQTtBQUNBOztBQ2hKQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBOzs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMzRkE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBOzs7Ozs7O0FBS0E7QUFHQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFPQTtBQUNBO0FBWEE7QUFDQTtBQUNBO0FBQUE7QUFVQTtBQUNBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFFQTs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFJQTtBQ3RFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnQkE7Ozs7Ozs7Ozs7QUFRQTtBQXVDQTtBQUFBOzs7Ozs7OztBQWpDQTs7Ozs7O0FBTUE7Ozs7Ozs7QUFPQTs7Ozs7O0FBTUE7Ozs7O0FBS0E7Ozs7O0FBS0E7QUFLQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7Ozs7Ozs7QUFTQTtBQUtBO0FBQ0E7QUFoQkE7QUFrQkE7QUFDQTtBQUtBO0FBQ0E7QUFqQ0E7QUFDQTtBQUNBO0FBbUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBR0E7QUFSQTtBQUNBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7OztBQ3BPQTs7Ozs7Ozs7OztBQVFBO0FBSUE7QUFDQTtBQUNBO0FBRUE7Ozs7OztBQUlBOzs7Ozs7QUFlQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBZkE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7Ozs7QUFJQTtBQUVBO0FBRkE7QUFLQTtBQUxBO0FBT0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7Ozs7Ozs7Ozs7QUFTQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQVRBO0FBQ0E7QUFDQTtBQVdBO0FBT0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFLQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUFBO0FBVkE7QUFZQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBOztBQUVBO0FBSEE7Ozs7QUFRQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFNQTtBQUFBOzs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQWNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBTkE7Ozs7QUFVQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBUEE7QUFEQTtBQVdBO0FBRUE7Ozs7O0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFNQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUM1U0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBOzs7Ozs7Ozs7OztBQVNBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFRQTtBQUNBOztBQUdBOzs7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7QUFNQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FDbkhBOzs7Ozs7Ozs7Ozs7Ozs7O0FBbUJBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FBR0E7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQURBOztBQUlBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7O0FDekZBOzs7Ozs7Ozs7Ozs7Ozs7OztBQWlCQTs7Ozs7QUFHQTtBQUVBOzs7OztBQUlBO0FBRUE7Ozs7OztBQUtBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBUUE7QUFFQTs7Ozs7O0FBS0E7QUFHQTtBQUFBOzs7O0FBS0E7OztBQUlBOztBQUdBOztBQUlBO0FBQ0E7QUFJQTtBQUNBO0FDM0VBOzs7Ozs7Ozs7Ozs7Ozs7OztBQWlCQTs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FDNUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFxQkE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@firebase/util/dist/index.esm2017.js\n");

/***/ }),

/***/ "./node_modules/firebase/app/dist/index.esm.js":
/*!*****************************************************!*\
  !*** ./node_modules/firebase/app/dist/index.esm.js ***!
  \*****************************************************/
/*! exports provided: FirebaseError, SDK_VERSION, _DEFAULT_ENTRY_NAME, _addComponent, _addOrOverwriteComponent, _apps, _clearComponents, _components, _getProvider, _registerComponent, _removeServiceInstance, deleteApp, getApp, getApps, initializeApp, onLog, registerVersion, setLogLevel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/app */ \"./node_modules/@firebase/app/dist/index.esm2017.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"FirebaseError\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"FirebaseError\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"SDK_VERSION\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"SDK_VERSION\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"_DEFAULT_ENTRY_NAME\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"_DEFAULT_ENTRY_NAME\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"_addComponent\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"_addComponent\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"_addOrOverwriteComponent\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"_addOrOverwriteComponent\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"_apps\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"_apps\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"_clearComponents\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"_clearComponents\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"_components\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"_components\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"_getProvider\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"_getProvider\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"_registerComponent\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"_registerComponent\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"_removeServiceInstance\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"_removeServiceInstance\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"deleteApp\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"deleteApp\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"getApp\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"getApp\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"getApps\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"getApps\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"initializeApp\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"initializeApp\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"onLog\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"onLog\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"registerVersion\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"registerVersion\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"setLogLevel\", function() { return _firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"setLogLevel\"]; });\n\n\n\nvar name = \"firebase\";\nvar version = \"9.1.3\";\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nObject(_firebase_app__WEBPACK_IMPORTED_MODULE_0__[\"registerVersion\"])(name, version, 'app');//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvYXBwL2Rpc3QvaW5kZXguZXNtLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL2luZGV4LnRzPzc4YmIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IHJlZ2lzdGVyVmVyc2lvbiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgbmFtZSwgdmVyc2lvbiB9IGZyb20gJy4uL3BhY2thZ2UuanNvbic7XG5cbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnYXBwJyk7XG5leHBvcnQgKiBmcm9tICdAZmlyZWJhc2UvYXBwJztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBbUJBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/firebase/app/dist/index.esm.js\n");

/***/ }),

/***/ "./node_modules/firebase/messaging/dist/index.esm.js":
/*!***********************************************************!*\
  !*** ./node_modules/firebase/messaging/dist/index.esm.js ***!
  \***********************************************************/
/*! exports provided: deleteToken, getMessaging, getToken, isSupported, onMessage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _firebase_messaging__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/messaging */ \"./node_modules/@firebase/messaging/dist/index.esm2017.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"deleteToken\", function() { return _firebase_messaging__WEBPACK_IMPORTED_MODULE_0__[\"deleteToken\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"getMessaging\", function() { return _firebase_messaging__WEBPACK_IMPORTED_MODULE_0__[\"getMessaging\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"getToken\", function() { return _firebase_messaging__WEBPACK_IMPORTED_MODULE_0__[\"getToken\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"isSupported\", function() { return _firebase_messaging__WEBPACK_IMPORTED_MODULE_0__[\"isSupported\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"onMessage\", function() { return _firebase_messaging__WEBPACK_IMPORTED_MODULE_0__[\"onMessage\"]; });\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvbWVzc2FnaW5nL2Rpc3QvaW5kZXguZXNtLmpzLmpzIiwic291cmNlcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/firebase/messaging/dist/index.esm.js\n");

/***/ }),

/***/ "./node_modules/idb/build/idb.js":
/*!***************************************!*\
  !*** ./node_modules/idb/build/idb.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\n(function (global, factory) {\n  ( false ? undefined : _typeof(exports)) === 'object' && typeof module !== 'undefined' ? factory(exports) :  true ? !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)) : (undefined);\n})(this, function (exports) {\n  'use strict';\n\n  function toArray(arr) {\n    return Array.prototype.slice.call(arr);\n  }\n\n  function promisifyRequest(request) {\n    return new Promise(function (resolve, reject) {\n      request.onsuccess = function () {\n        resolve(request.result);\n      };\n\n      request.onerror = function () {\n        reject(request.error);\n      };\n    });\n  }\n\n  function promisifyRequestCall(obj, method, args) {\n    var request;\n    var p = new Promise(function (resolve, reject) {\n      request = obj[method].apply(obj, args);\n      promisifyRequest(request).then(resolve, reject);\n    });\n    p.request = request;\n    return p;\n  }\n\n  function promisifyCursorRequestCall(obj, method, args) {\n    var p = promisifyRequestCall(obj, method, args);\n    return p.then(function (value) {\n      if (!value) return;\n      return new Cursor(value, p.request);\n    });\n  }\n\n  function proxyProperties(ProxyClass, targetProp, properties) {\n    properties.forEach(function (prop) {\n      Object.defineProperty(ProxyClass.prototype, prop, {\n        get: function get() {\n          return this[targetProp][prop];\n        },\n        set: function set(val) {\n          this[targetProp][prop] = val;\n        }\n      });\n    });\n  }\n\n  function proxyRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function (prop) {\n      if (!(prop in Constructor.prototype)) return;\n\n      ProxyClass.prototype[prop] = function () {\n        return promisifyRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function proxyMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function (prop) {\n      if (!(prop in Constructor.prototype)) return;\n\n      ProxyClass.prototype[prop] = function () {\n        return this[targetProp][prop].apply(this[targetProp], arguments);\n      };\n    });\n  }\n\n  function proxyCursorRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function (prop) {\n      if (!(prop in Constructor.prototype)) return;\n\n      ProxyClass.prototype[prop] = function () {\n        return promisifyCursorRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function Index(index) {\n    this._index = index;\n  }\n\n  proxyProperties(Index, '_index', ['name', 'keyPath', 'multiEntry', 'unique']);\n  proxyRequestMethods(Index, '_index', IDBIndex, ['get', 'getKey', 'getAll', 'getAllKeys', 'count']);\n  proxyCursorRequestMethods(Index, '_index', IDBIndex, ['openCursor', 'openKeyCursor']);\n\n  function Cursor(cursor, request) {\n    this._cursor = cursor;\n    this._request = request;\n  }\n\n  proxyProperties(Cursor, '_cursor', ['direction', 'key', 'primaryKey', 'value']);\n  proxyRequestMethods(Cursor, '_cursor', IDBCursor, ['update', 'delete']); // proxy 'next' methods\n\n  ['advance', 'continue', 'continuePrimaryKey'].forEach(function (methodName) {\n    if (!(methodName in IDBCursor.prototype)) return;\n\n    Cursor.prototype[methodName] = function () {\n      var cursor = this;\n      var args = arguments;\n      return Promise.resolve().then(function () {\n        cursor._cursor[methodName].apply(cursor._cursor, args);\n\n        return promisifyRequest(cursor._request).then(function (value) {\n          if (!value) return;\n          return new Cursor(value, cursor._request);\n        });\n      });\n    };\n  });\n\n  function ObjectStore(store) {\n    this._store = store;\n  }\n\n  ObjectStore.prototype.createIndex = function () {\n    return new Index(this._store.createIndex.apply(this._store, arguments));\n  };\n\n  ObjectStore.prototype.index = function () {\n    return new Index(this._store.index.apply(this._store, arguments));\n  };\n\n  proxyProperties(ObjectStore, '_store', ['name', 'keyPath', 'indexNames', 'autoIncrement']);\n  proxyRequestMethods(ObjectStore, '_store', IDBObjectStore, ['put', 'add', 'delete', 'clear', 'get', 'getAll', 'getKey', 'getAllKeys', 'count']);\n  proxyCursorRequestMethods(ObjectStore, '_store', IDBObjectStore, ['openCursor', 'openKeyCursor']);\n  proxyMethods(ObjectStore, '_store', IDBObjectStore, ['deleteIndex']);\n\n  function Transaction(idbTransaction) {\n    this._tx = idbTransaction;\n    this.complete = new Promise(function (resolve, reject) {\n      idbTransaction.oncomplete = function () {\n        resolve();\n      };\n\n      idbTransaction.onerror = function () {\n        reject(idbTransaction.error);\n      };\n\n      idbTransaction.onabort = function () {\n        reject(idbTransaction.error);\n      };\n    });\n  }\n\n  Transaction.prototype.objectStore = function () {\n    return new ObjectStore(this._tx.objectStore.apply(this._tx, arguments));\n  };\n\n  proxyProperties(Transaction, '_tx', ['objectStoreNames', 'mode']);\n  proxyMethods(Transaction, '_tx', IDBTransaction, ['abort']);\n\n  function UpgradeDB(db, oldVersion, transaction) {\n    this._db = db;\n    this.oldVersion = oldVersion;\n    this.transaction = new Transaction(transaction);\n  }\n\n  UpgradeDB.prototype.createObjectStore = function () {\n    return new ObjectStore(this._db.createObjectStore.apply(this._db, arguments));\n  };\n\n  proxyProperties(UpgradeDB, '_db', ['name', 'version', 'objectStoreNames']);\n  proxyMethods(UpgradeDB, '_db', IDBDatabase, ['deleteObjectStore', 'close']);\n\n  function DB(db) {\n    this._db = db;\n  }\n\n  DB.prototype.transaction = function () {\n    return new Transaction(this._db.transaction.apply(this._db, arguments));\n  };\n\n  proxyProperties(DB, '_db', ['name', 'version', 'objectStoreNames']);\n  proxyMethods(DB, '_db', IDBDatabase, ['close']); // Add cursor iterators\n  // TODO: remove this once browsers do the right thing with promises\n\n  ['openCursor', 'openKeyCursor'].forEach(function (funcName) {\n    [ObjectStore, Index].forEach(function (Constructor) {\n      // Don't create iterateKeyCursor if openKeyCursor doesn't exist.\n      if (!(funcName in Constructor.prototype)) return;\n\n      Constructor.prototype[funcName.replace('open', 'iterate')] = function () {\n        var args = toArray(arguments);\n        var callback = args[args.length - 1];\n        var nativeObject = this._store || this._index;\n        var request = nativeObject[funcName].apply(nativeObject, args.slice(0, -1));\n\n        request.onsuccess = function () {\n          callback(request.result);\n        };\n      };\n    });\n  }); // polyfill getAll\n\n  [Index, ObjectStore].forEach(function (Constructor) {\n    if (Constructor.prototype.getAll) return;\n\n    Constructor.prototype.getAll = function (query, count) {\n      var instance = this;\n      var items = [];\n      return new Promise(function (resolve) {\n        instance.iterateCursor(query, function (cursor) {\n          if (!cursor) {\n            resolve(items);\n            return;\n          }\n\n          items.push(cursor.value);\n\n          if (count !== undefined && items.length == count) {\n            resolve(items);\n            return;\n          }\n\n          cursor[\"continue\"]();\n        });\n      });\n    };\n  });\n\n  function openDb(name, version, upgradeCallback) {\n    var p = promisifyRequestCall(indexedDB, 'open', [name, version]);\n    var request = p.request;\n\n    if (request) {\n      request.onupgradeneeded = function (event) {\n        if (upgradeCallback) {\n          upgradeCallback(new UpgradeDB(request.result, event.oldVersion, request.transaction));\n        }\n      };\n    }\n\n    return p.then(function (db) {\n      return new DB(db);\n    });\n  }\n\n  function deleteDb(name) {\n    return promisifyRequestCall(indexedDB, 'deleteDatabase', [name]);\n  }\n\n  exports.openDb = openDb;\n  exports.deleteDb = deleteDb;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL2lkYi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvaWRiLmpzPzlkYmIiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeShleHBvcnRzKSA6XG4gIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2V4cG9ydHMnXSwgZmFjdG9yeSkgOlxuICAoZ2xvYmFsID0gZ2xvYmFsIHx8IHNlbGYsIGZhY3RvcnkoZ2xvYmFsLmlkYiA9IHt9KSk7XG59KHRoaXMsIGZ1bmN0aW9uIChleHBvcnRzKSB7ICd1c2Ugc3RyaWN0JztcblxuICBmdW5jdGlvbiB0b0FycmF5KGFycikge1xuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnIpO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7XG4gICAgICB9O1xuXG4gICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3RDYWxsKG9iaiwgbWV0aG9kLCBhcmdzKSB7XG4gICAgdmFyIHJlcXVlc3Q7XG4gICAgdmFyIHAgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlcXVlc3QgPSBvYmpbbWV0aG9kXS5hcHBseShvYmosIGFyZ3MpO1xuICAgICAgcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0KS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBwLnJlcXVlc3QgPSByZXF1ZXN0O1xuICAgIHJldHVybiBwO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJvbWlzaWZ5Q3Vyc29yUmVxdWVzdENhbGwob2JqLCBtZXRob2QsIGFyZ3MpIHtcbiAgICB2YXIgcCA9IHByb21pc2lmeVJlcXVlc3RDYWxsKG9iaiwgbWV0aG9kLCBhcmdzKTtcbiAgICByZXR1cm4gcC50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAoIXZhbHVlKSByZXR1cm47XG4gICAgICByZXR1cm4gbmV3IEN1cnNvcih2YWx1ZSwgcC5yZXF1ZXN0KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3h5UHJvcGVydGllcyhQcm94eUNsYXNzLCB0YXJnZXRQcm9wLCBwcm9wZXJ0aWVzKSB7XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcm94eUNsYXNzLnByb3RvdHlwZSwgcHJvcCwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB0aGlzW3RhcmdldFByb3BdW3Byb3BdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgIHRoaXNbdGFyZ2V0UHJvcF1bcHJvcF0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJveHlSZXF1ZXN0TWV0aG9kcyhQcm94eUNsYXNzLCB0YXJnZXRQcm9wLCBDb25zdHJ1Y3RvciwgcHJvcGVydGllcykge1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgICBpZiAoIShwcm9wIGluIENvbnN0cnVjdG9yLnByb3RvdHlwZSkpIHJldHVybjtcbiAgICAgIFByb3h5Q2xhc3MucHJvdG90eXBlW3Byb3BdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0Q2FsbCh0aGlzW3RhcmdldFByb3BdLCBwcm9wLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3h5TWV0aG9kcyhQcm94eUNsYXNzLCB0YXJnZXRQcm9wLCBDb25zdHJ1Y3RvciwgcHJvcGVydGllcykge1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgICBpZiAoIShwcm9wIGluIENvbnN0cnVjdG9yLnByb3RvdHlwZSkpIHJldHVybjtcbiAgICAgIFByb3h5Q2xhc3MucHJvdG90eXBlW3Byb3BdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzW3RhcmdldFByb3BdW3Byb3BdLmFwcGx5KHRoaXNbdGFyZ2V0UHJvcF0sIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJveHlDdXJzb3JSZXF1ZXN0TWV0aG9kcyhQcm94eUNsYXNzLCB0YXJnZXRQcm9wLCBDb25zdHJ1Y3RvciwgcHJvcGVydGllcykge1xuICAgIHByb3BlcnRpZXMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG4gICAgICBpZiAoIShwcm9wIGluIENvbnN0cnVjdG9yLnByb3RvdHlwZSkpIHJldHVybjtcbiAgICAgIFByb3h5Q2xhc3MucHJvdG90eXBlW3Byb3BdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNpZnlDdXJzb3JSZXF1ZXN0Q2FsbCh0aGlzW3RhcmdldFByb3BdLCBwcm9wLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIEluZGV4KGluZGV4KSB7XG4gICAgdGhpcy5faW5kZXggPSBpbmRleDtcbiAgfVxuXG4gIHByb3h5UHJvcGVydGllcyhJbmRleCwgJ19pbmRleCcsIFtcbiAgICAnbmFtZScsXG4gICAgJ2tleVBhdGgnLFxuICAgICdtdWx0aUVudHJ5JyxcbiAgICAndW5pcXVlJ1xuICBdKTtcblxuICBwcm94eVJlcXVlc3RNZXRob2RzKEluZGV4LCAnX2luZGV4JywgSURCSW5kZXgsIFtcbiAgICAnZ2V0JyxcbiAgICAnZ2V0S2V5JyxcbiAgICAnZ2V0QWxsJyxcbiAgICAnZ2V0QWxsS2V5cycsXG4gICAgJ2NvdW50J1xuICBdKTtcblxuICBwcm94eUN1cnNvclJlcXVlc3RNZXRob2RzKEluZGV4LCAnX2luZGV4JywgSURCSW5kZXgsIFtcbiAgICAnb3BlbkN1cnNvcicsXG4gICAgJ29wZW5LZXlDdXJzb3InXG4gIF0pO1xuXG4gIGZ1bmN0aW9uIEN1cnNvcihjdXJzb3IsIHJlcXVlc3QpIHtcbiAgICB0aGlzLl9jdXJzb3IgPSBjdXJzb3I7XG4gICAgdGhpcy5fcmVxdWVzdCA9IHJlcXVlc3Q7XG4gIH1cblxuICBwcm94eVByb3BlcnRpZXMoQ3Vyc29yLCAnX2N1cnNvcicsIFtcbiAgICAnZGlyZWN0aW9uJyxcbiAgICAna2V5JyxcbiAgICAncHJpbWFyeUtleScsXG4gICAgJ3ZhbHVlJ1xuICBdKTtcblxuICBwcm94eVJlcXVlc3RNZXRob2RzKEN1cnNvciwgJ19jdXJzb3InLCBJREJDdXJzb3IsIFtcbiAgICAndXBkYXRlJyxcbiAgICAnZGVsZXRlJ1xuICBdKTtcblxuICAvLyBwcm94eSAnbmV4dCcgbWV0aG9kc1xuICBbJ2FkdmFuY2UnLCAnY29udGludWUnLCAnY29udGludWVQcmltYXJ5S2V5J10uZm9yRWFjaChmdW5jdGlvbihtZXRob2ROYW1lKSB7XG4gICAgaWYgKCEobWV0aG9kTmFtZSBpbiBJREJDdXJzb3IucHJvdG90eXBlKSkgcmV0dXJuO1xuICAgIEN1cnNvci5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjdXJzb3IgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgY3Vyc29yLl9jdXJzb3JbbWV0aG9kTmFtZV0uYXBwbHkoY3Vyc29yLl9jdXJzb3IsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdChjdXJzb3IuX3JlcXVlc3QpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBpZiAoIXZhbHVlKSByZXR1cm47XG4gICAgICAgICAgcmV0dXJuIG5ldyBDdXJzb3IodmFsdWUsIGN1cnNvci5fcmVxdWVzdCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gT2JqZWN0U3RvcmUoc3RvcmUpIHtcbiAgICB0aGlzLl9zdG9yZSA9IHN0b3JlO1xuICB9XG5cbiAgT2JqZWN0U3RvcmUucHJvdG90eXBlLmNyZWF0ZUluZGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBJbmRleCh0aGlzLl9zdG9yZS5jcmVhdGVJbmRleC5hcHBseSh0aGlzLl9zdG9yZSwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgT2JqZWN0U3RvcmUucHJvdG90eXBlLmluZGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBJbmRleCh0aGlzLl9zdG9yZS5pbmRleC5hcHBseSh0aGlzLl9zdG9yZSwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgcHJveHlQcm9wZXJ0aWVzKE9iamVjdFN0b3JlLCAnX3N0b3JlJywgW1xuICAgICduYW1lJyxcbiAgICAna2V5UGF0aCcsXG4gICAgJ2luZGV4TmFtZXMnLFxuICAgICdhdXRvSW5jcmVtZW50J1xuICBdKTtcblxuICBwcm94eVJlcXVlc3RNZXRob2RzKE9iamVjdFN0b3JlLCAnX3N0b3JlJywgSURCT2JqZWN0U3RvcmUsIFtcbiAgICAncHV0JyxcbiAgICAnYWRkJyxcbiAgICAnZGVsZXRlJyxcbiAgICAnY2xlYXInLFxuICAgICdnZXQnLFxuICAgICdnZXRBbGwnLFxuICAgICdnZXRLZXknLFxuICAgICdnZXRBbGxLZXlzJyxcbiAgICAnY291bnQnXG4gIF0pO1xuXG4gIHByb3h5Q3Vyc29yUmVxdWVzdE1ldGhvZHMoT2JqZWN0U3RvcmUsICdfc3RvcmUnLCBJREJPYmplY3RTdG9yZSwgW1xuICAgICdvcGVuQ3Vyc29yJyxcbiAgICAnb3BlbktleUN1cnNvcidcbiAgXSk7XG5cbiAgcHJveHlNZXRob2RzKE9iamVjdFN0b3JlLCAnX3N0b3JlJywgSURCT2JqZWN0U3RvcmUsIFtcbiAgICAnZGVsZXRlSW5kZXgnXG4gIF0pO1xuXG4gIGZ1bmN0aW9uIFRyYW5zYWN0aW9uKGlkYlRyYW5zYWN0aW9uKSB7XG4gICAgdGhpcy5fdHggPSBpZGJUcmFuc2FjdGlvbjtcbiAgICB0aGlzLmNvbXBsZXRlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBpZGJUcmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH07XG4gICAgICBpZGJUcmFuc2FjdGlvbi5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChpZGJUcmFuc2FjdGlvbi5lcnJvcik7XG4gICAgICB9O1xuICAgICAgaWRiVHJhbnNhY3Rpb24ub25hYm9ydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QoaWRiVHJhbnNhY3Rpb24uZXJyb3IpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5vYmplY3RTdG9yZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgT2JqZWN0U3RvcmUodGhpcy5fdHgub2JqZWN0U3RvcmUuYXBwbHkodGhpcy5fdHgsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb3h5UHJvcGVydGllcyhUcmFuc2FjdGlvbiwgJ190eCcsIFtcbiAgICAnb2JqZWN0U3RvcmVOYW1lcycsXG4gICAgJ21vZGUnXG4gIF0pO1xuXG4gIHByb3h5TWV0aG9kcyhUcmFuc2FjdGlvbiwgJ190eCcsIElEQlRyYW5zYWN0aW9uLCBbXG4gICAgJ2Fib3J0J1xuICBdKTtcblxuICBmdW5jdGlvbiBVcGdyYWRlREIoZGIsIG9sZFZlcnNpb24sIHRyYW5zYWN0aW9uKSB7XG4gICAgdGhpcy5fZGIgPSBkYjtcbiAgICB0aGlzLm9sZFZlcnNpb24gPSBvbGRWZXJzaW9uO1xuICAgIHRoaXMudHJhbnNhY3Rpb24gPSBuZXcgVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICB9XG5cbiAgVXBncmFkZURCLnByb3RvdHlwZS5jcmVhdGVPYmplY3RTdG9yZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgT2JqZWN0U3RvcmUodGhpcy5fZGIuY3JlYXRlT2JqZWN0U3RvcmUuYXBwbHkodGhpcy5fZGIsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb3h5UHJvcGVydGllcyhVcGdyYWRlREIsICdfZGInLCBbXG4gICAgJ25hbWUnLFxuICAgICd2ZXJzaW9uJyxcbiAgICAnb2JqZWN0U3RvcmVOYW1lcydcbiAgXSk7XG5cbiAgcHJveHlNZXRob2RzKFVwZ3JhZGVEQiwgJ19kYicsIElEQkRhdGFiYXNlLCBbXG4gICAgJ2RlbGV0ZU9iamVjdFN0b3JlJyxcbiAgICAnY2xvc2UnXG4gIF0pO1xuXG4gIGZ1bmN0aW9uIERCKGRiKSB7XG4gICAgdGhpcy5fZGIgPSBkYjtcbiAgfVxuXG4gIERCLnByb3RvdHlwZS50cmFuc2FjdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgVHJhbnNhY3Rpb24odGhpcy5fZGIudHJhbnNhY3Rpb24uYXBwbHkodGhpcy5fZGIsIGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIHByb3h5UHJvcGVydGllcyhEQiwgJ19kYicsIFtcbiAgICAnbmFtZScsXG4gICAgJ3ZlcnNpb24nLFxuICAgICdvYmplY3RTdG9yZU5hbWVzJ1xuICBdKTtcblxuICBwcm94eU1ldGhvZHMoREIsICdfZGInLCBJREJEYXRhYmFzZSwgW1xuICAgICdjbG9zZSdcbiAgXSk7XG5cbiAgLy8gQWRkIGN1cnNvciBpdGVyYXRvcnNcbiAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgb25jZSBicm93c2VycyBkbyB0aGUgcmlnaHQgdGhpbmcgd2l0aCBwcm9taXNlc1xuICBbJ29wZW5DdXJzb3InLCAnb3BlbktleUN1cnNvciddLmZvckVhY2goZnVuY3Rpb24oZnVuY05hbWUpIHtcbiAgICBbT2JqZWN0U3RvcmUsIEluZGV4XS5mb3JFYWNoKGZ1bmN0aW9uKENvbnN0cnVjdG9yKSB7XG4gICAgICAvLyBEb24ndCBjcmVhdGUgaXRlcmF0ZUtleUN1cnNvciBpZiBvcGVuS2V5Q3Vyc29yIGRvZXNuJ3QgZXhpc3QuXG4gICAgICBpZiAoIShmdW5jTmFtZSBpbiBDb25zdHJ1Y3Rvci5wcm90b3R5cGUpKSByZXR1cm47XG5cbiAgICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZVtmdW5jTmFtZS5yZXBsYWNlKCdvcGVuJywgJ2l0ZXJhdGUnKV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcbiAgICAgICAgdmFyIG5hdGl2ZU9iamVjdCA9IHRoaXMuX3N0b3JlIHx8IHRoaXMuX2luZGV4O1xuICAgICAgICB2YXIgcmVxdWVzdCA9IG5hdGl2ZU9iamVjdFtmdW5jTmFtZV0uYXBwbHkobmF0aXZlT2JqZWN0LCBhcmdzLnNsaWNlKDAsIC0xKSk7XG4gICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY2FsbGJhY2socmVxdWVzdC5yZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gcG9seWZpbGwgZ2V0QWxsXG4gIFtJbmRleCwgT2JqZWN0U3RvcmVdLmZvckVhY2goZnVuY3Rpb24oQ29uc3RydWN0b3IpIHtcbiAgICBpZiAoQ29uc3RydWN0b3IucHJvdG90eXBlLmdldEFsbCkgcmV0dXJuO1xuICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbihxdWVyeSwgY291bnQpIHtcbiAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXM7XG4gICAgICB2YXIgaXRlbXMgPSBbXTtcblxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICAgICAgaW5zdGFuY2UuaXRlcmF0ZUN1cnNvcihxdWVyeSwgZnVuY3Rpb24oY3Vyc29yKSB7XG4gICAgICAgICAgaWYgKCFjdXJzb3IpIHtcbiAgICAgICAgICAgIHJlc29sdmUoaXRlbXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpdGVtcy5wdXNoKGN1cnNvci52YWx1ZSk7XG5cbiAgICAgICAgICBpZiAoY291bnQgIT09IHVuZGVmaW5lZCAmJiBpdGVtcy5sZW5ndGggPT0gY291bnQpIHtcbiAgICAgICAgICAgIHJlc29sdmUoaXRlbXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJzb3IuY29udGludWUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxuICBmdW5jdGlvbiBvcGVuRGIobmFtZSwgdmVyc2lvbiwgdXBncmFkZUNhbGxiYWNrKSB7XG4gICAgdmFyIHAgPSBwcm9taXNpZnlSZXF1ZXN0Q2FsbChpbmRleGVkREIsICdvcGVuJywgW25hbWUsIHZlcnNpb25dKTtcbiAgICB2YXIgcmVxdWVzdCA9IHAucmVxdWVzdDtcblxuICAgIGlmIChyZXF1ZXN0KSB7XG4gICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmICh1cGdyYWRlQ2FsbGJhY2spIHtcbiAgICAgICAgICB1cGdyYWRlQ2FsbGJhY2sobmV3IFVwZ3JhZGVEQihyZXF1ZXN0LnJlc3VsdCwgZXZlbnQub2xkVmVyc2lvbiwgcmVxdWVzdC50cmFuc2FjdGlvbikpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBwLnRoZW4oZnVuY3Rpb24oZGIpIHtcbiAgICAgIHJldHVybiBuZXcgREIoZGIpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVsZXRlRGIobmFtZSkge1xuICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0Q2FsbChpbmRleGVkREIsICdkZWxldGVEYXRhYmFzZScsIFtuYW1lXSk7XG4gIH1cblxuICBleHBvcnRzLm9wZW5EYiA9IG9wZW5EYjtcbiAgZXhwb3J0cy5kZWxldGVEYiA9IGRlbGV0ZURiO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbn0pKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFEQTtBQUxBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQU5BO0FBREE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUZBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBRkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBUUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBSEE7QUFGQTtBQUNBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFPQTtBQVlBO0FBS0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFQQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBS0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFNQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBTUE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUxBO0FBSkE7QUFwUEE7QUFDQTtBQW9RQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFYQTtBQURBO0FBSkE7QUFGQTtBQUNBO0FBdUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUF6VEEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/idb/build/idb.js\n");

/***/ }),

/***/ "./node_modules/tslib/tslib.es6.js":
/*!*****************************************!*\
  !*** ./node_modules/tslib/tslib.es6.js ***!
  \*****************************************/
/*! exports provided: __extends, __assign, __rest, __decorate, __param, __metadata, __awaiter, __generator, __createBinding, __exportStar, __values, __read, __spread, __spreadArrays, __spreadArray, __await, __asyncGenerator, __asyncDelegator, __asyncValues, __makeTemplateObject, __importStar, __importDefault, __classPrivateFieldGet, __classPrivateFieldSet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__extends\", function() { return __extends; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__assign\", function() { return _assign; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__rest\", function() { return __rest; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__decorate\", function() { return __decorate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__param\", function() { return __param; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__metadata\", function() { return __metadata; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__awaiter\", function() { return __awaiter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__generator\", function() { return __generator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__createBinding\", function() { return __createBinding; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__exportStar\", function() { return __exportStar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__values\", function() { return __values; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__read\", function() { return __read; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__spread\", function() { return __spread; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__spreadArrays\", function() { return __spreadArrays; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__spreadArray\", function() { return __spreadArray; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__await\", function() { return __await; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncGenerator\", function() { return __asyncGenerator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncDelegator\", function() { return __asyncDelegator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncValues\", function() { return __asyncValues; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__makeTemplateObject\", function() { return __makeTemplateObject; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__importStar\", function() { return __importStar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__importDefault\", function() { return __importDefault; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__classPrivateFieldGet\", function() { return __classPrivateFieldGet; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__classPrivateFieldSet\", function() { return __classPrivateFieldSet; });\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nfunction __decorate(decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if ((typeof Reflect === \"undefined\" ? \"undefined\" : _typeof(Reflect)) === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\nfunction __param(paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n}\nfunction __metadata(metadataKey, metadataValue) {\n  if ((typeof Reflect === \"undefined\" ? \"undefined\" : _typeof(Reflect)) === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nfunction __generator(thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\nvar __createBinding = Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n};\nfunction __exportStar(m, o) {\n  for (var p in m) {\n    if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n  }\n}\nfunction __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n}\n/** @deprecated */\n\nfunction __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++) {\n    ar = ar.concat(__read(arguments[i]));\n  }\n\n  return ar;\n}\n/** @deprecated */\n\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n\n  return r;\n}\nfunction __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\nfunction __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\nfunction __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []),\n      i,\n      q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i;\n\n  function verb(n) {\n    if (g[n]) i[n] = function (v) {\n      return new Promise(function (a, b) {\n        q.push([n, v, a, b]) > 1 || resume(n, v);\n      });\n    };\n  }\n\n  function resume(n, v) {\n    try {\n      step(g[n](v));\n    } catch (e) {\n      settle(q[0][3], e);\n    }\n  }\n\n  function step(r) {\n    r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);\n  }\n\n  function fulfill(value) {\n    resume(\"next\", value);\n  }\n\n  function reject(value) {\n    resume(\"throw\", value);\n  }\n\n  function settle(f, v) {\n    if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);\n  }\n}\nfunction __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) {\n    throw e;\n  }), verb(\"return\"), i[Symbol.iterator] = function () {\n    return this;\n  }, i;\n\n  function verb(n, f) {\n    i[n] = o[n] ? function (v) {\n      return (p = !p) ? {\n        value: __await(o[n](v)),\n        done: n === \"return\"\n      } : f ? f(v) : v;\n    } : f;\n  }\n}\nfunction __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator],\n      i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i);\n\n  function verb(n) {\n    i[n] = o[n] && function (v) {\n      return new Promise(function (resolve, reject) {\n        v = o[n](v), settle(resolve, reject, v.done, v.value);\n      });\n    };\n  }\n\n  function settle(resolve, reject, d, v) {\n    Promise.resolve(v).then(function (v) {\n      resolve({\n        value: v,\n        done: d\n      });\n    }, reject);\n  }\n}\nfunction __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n}\n;\n\nvar __setModuleDefault = Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n};\n\nfunction __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n}\nfunction __importDefault(mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n}\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\nfunction __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcz85YWI0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XHJcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcclxuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQURBO0FBRUE7QUFBQTtBQUFBO0FBRkE7QUFDQTtBQUVBO0FBSkE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFMQTtBQUNBO0FBTUE7QUFSQTtBQUNBOztBQVVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBSkE7QUFNQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFYQTtBQUNBO0FBWUE7QUFoQkE7QUFpQkE7QUFBQTtBQWpCQTtBQWlCQTtBQUFBO0FBakJBO0FBQ0E7QUFpQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUNBO0FBTEE7QUFRQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUhBO0FBS0E7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBR0E7QUFIQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/tslib/tslib.es6.js\n");

/***/ }),

/***/ "./node_modules/ua-parser-js/src/ua-parser.js":
/*!****************************************************!*\
  !*** ./node_modules/ua-parser-js/src/ua-parser.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(module) {var __WEBPACK_AMD_DEFINE_RESULT__;function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n/*!@license\n * UAParser.js v0.7.28\n * Lightweight JavaScript-based User-Agent string parser\n * https://github.com/faisalman/ua-parser-js\n *\n * Copyright © 2012-2021 Faisal Salman <f@faisalman.com>\n * Licensed under MIT License\n */\n\n\n(function (window, undefined) {\n  'use strict'; //////////////\n  // Constants\n  /////////////\n\n  var LIBVERSION = '0.7.28',\n      EMPTY = '',\n      UNKNOWN = '?',\n      FUNC_TYPE = 'function',\n      UNDEF_TYPE = 'undefined',\n      OBJ_TYPE = 'object',\n      STR_TYPE = 'string',\n      MAJOR = 'major',\n      // deprecated\n  MODEL = 'model',\n      NAME = 'name',\n      TYPE = 'type',\n      VENDOR = 'vendor',\n      VERSION = 'version',\n      ARCHITECTURE = 'architecture',\n      CONSOLE = 'console',\n      MOBILE = 'mobile',\n      TABLET = 'tablet',\n      SMARTTV = 'smarttv',\n      WEARABLE = 'wearable',\n      EMBEDDED = 'embedded',\n      UA_MAX_LENGTH = 255; ///////////\n  // Helper\n  //////////\n\n  var util = {\n    extend: function extend(regexes, extensions) {\n      var mergedRegexes = {};\n\n      for (var i in regexes) {\n        if (extensions[i] && extensions[i].length % 2 === 0) {\n          mergedRegexes[i] = extensions[i].concat(regexes[i]);\n        } else {\n          mergedRegexes[i] = regexes[i];\n        }\n      }\n\n      return mergedRegexes;\n    },\n    has: function has(str1, str2) {\n      return _typeof(str1) === STR_TYPE ? str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1 : false;\n    },\n    lowerize: function lowerize(str) {\n      return str.toLowerCase();\n    },\n    major: function major(version) {\n      return _typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, '').split(\".\")[0] : undefined;\n    },\n    trim: function trim(str, len) {\n      str = str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n      return _typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n    }\n  }; ///////////////\n  // Map helper\n  //////////////\n\n  var mapper = {\n    rgx: function rgx(ua, arrays) {\n      var i = 0,\n          j,\n          k,\n          p,\n          q,\n          matches,\n          match; // loop through all regexes maps\n\n      while (i < arrays.length && !matches) {\n        var regex = arrays[i],\n            // even sequence (0,2,4,..)\n        props = arrays[i + 1]; // odd sequence (1,3,5,..)\n\n        j = k = 0; // try matching uastring with regexes\n\n        while (j < regex.length && !matches) {\n          matches = regex[j++].exec(ua);\n\n          if (!!matches) {\n            for (p = 0; p < props.length; p++) {\n              match = matches[++k];\n              q = props[p]; // check if given property is actually array\n\n              if (_typeof(q) === OBJ_TYPE && q.length > 0) {\n                if (q.length == 2) {\n                  if (_typeof(q[1]) == FUNC_TYPE) {\n                    // assign modified match\n                    this[q[0]] = q[1].call(this, match);\n                  } else {\n                    // assign given value, ignore regex match\n                    this[q[0]] = q[1];\n                  }\n                } else if (q.length == 3) {\n                  // check whether function or regex\n                  if (_typeof(q[1]) === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                    // call function (usually string mapper)\n                    this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                  } else {\n                    // sanitize match using given regex\n                    this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                  }\n                } else if (q.length == 4) {\n                  this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                }\n              } else {\n                this[q] = match ? match : undefined;\n              }\n            }\n          }\n        }\n\n        i += 2;\n      }\n    },\n    str: function str(_str, map) {\n      for (var i in map) {\n        // check if array\n        if (_typeof(map[i]) === OBJ_TYPE && map[i].length > 0) {\n          for (var j = 0; j < map[i].length; j++) {\n            if (util.has(map[i][j], _str)) {\n              return i === UNKNOWN ? undefined : i;\n            }\n          }\n        } else if (util.has(map[i], _str)) {\n          return i === UNKNOWN ? undefined : i;\n        }\n      }\n\n      return _str;\n    }\n  }; ///////////////\n  // String map\n  //////////////\n\n  var maps = {\n    browser: {\n      // Safari < 3.0\n      oldSafari: {\n        version: {\n          '1.0': '/8',\n          '1.2': '/1',\n          '1.3': '/3',\n          '2.0': '/412',\n          '2.0.2': '/416',\n          '2.0.3': '/417',\n          '2.0.4': '/419',\n          '?': '/'\n        }\n      },\n      oldEdge: {\n        version: {\n          '0.1': '12.',\n          '21': '13.',\n          '31': '14.',\n          '39': '15.',\n          '41': '16.',\n          '42': '17.',\n          '44': '18.'\n        }\n      }\n    },\n    os: {\n      windows: {\n        version: {\n          'ME': '4.90',\n          'NT 3.11': 'NT3.51',\n          'NT 4.0': 'NT4.0',\n          '2000': 'NT 5.0',\n          'XP': ['NT 5.1', 'NT 5.2'],\n          'Vista': 'NT 6.0',\n          '7': 'NT 6.1',\n          '8': 'NT 6.2',\n          '8.1': 'NT 6.3',\n          '10': ['NT 6.4', 'NT 10.0'],\n          'RT': 'ARM'\n        }\n      }\n    }\n  }; //////////////\n  // Regex map\n  /////////////\n\n  var regexes = {\n    browser: [[/\\b(?:crmo|crios)\\/([\\w\\.]+)/i // Chrome for Android/iOS\n    ], [VERSION, [NAME, 'Chrome']], [/edg(?:e|ios|a)?\\/([\\w\\.]+)/i // Microsoft Edge\n    ], [VERSION, [NAME, 'Edge']], [// breaking change (reserved for next major release):\n    ///edge\\/([\\w\\.]+)/i                                                  // Old Edge (Trident)\n    //], [[VERSION, mapper.str, maps.browser.oldEdge.version], [NAME, 'Edge']], [\n    // Presto based\n    /(opera\\smini)\\/([\\w\\.-]+)/i, // Opera Mini\n    /(opera\\s[mobiletab]{3,6})\\b.+version\\/([\\w\\.-]+)/i, // Opera Mobi/Tablet\n    /(opera)(?:.+version\\/|[\\/\\s]+)([\\w\\.]+)/i // Opera\n    ], [NAME, VERSION], [/opios[\\/\\s]+([\\w\\.]+)/i // Opera mini on iphone >= 8.0\n    ], [VERSION, [NAME, 'Opera Mini']], [/\\sopr\\/([\\w\\.]+)/i // Opera Webkit\n    ], [VERSION, [NAME, 'Opera']], [// Mixed\n    /(kindle)\\/([\\w\\.]+)/i, // Kindle\n    /(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?([\\w\\.]*)/i, // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n    // Trident based\n    /(avant\\s|iemobile|slim)(?:browser)?[\\/\\s]?([\\w\\.]*)/i, // Avant/IEMobile/SlimBrowser\n    /(ba?idubrowser)[\\/\\s]?([\\w\\.]+)/i, // Baidu Browser\n    /(?:ms|\\()(ie)\\s([\\w\\.]+)/i, // Internet Explorer\n    // Webkit/KHTML based\n    /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\\/([\\w\\.-]+)/i, // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n    /(rekonq|puffin|brave|whale|qqbrowserlite|qq)\\/([\\w\\.]+)/i, // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ, aka ShouQ\n    /(weibo)__([\\d\\.]+)/i // Weibo\n    ], [NAME, VERSION], [/(?:[\\s\\/]uc?\\s?browser|(?:juc.+)ucweb)[\\/\\s]?([\\w\\.]+)/i // UCBrowser\n    ], [VERSION, [NAME, 'UCBrowser']], [/(?:windowswechat)?\\sqbcore\\/([\\w\\.]+)\\b.*(?:windowswechat)?/i // WeChat Desktop for Windows Built-in Browser\n    ], [VERSION, [NAME, 'WeChat(Win) Desktop']], [/micromessenger\\/([\\w\\.]+)/i // WeChat\n    ], [VERSION, [NAME, 'WeChat']], [/konqueror\\/([\\w\\.]+)/i // Konqueror\n    ], [VERSION, [NAME, 'Konqueror']], [/trident.+rv[:\\s]([\\w\\.]{1,9})\\b.+like\\sgecko/i // IE11\n    ], [VERSION, [NAME, 'IE']], [/yabrowser\\/([\\w\\.]+)/i // Yandex\n    ], [VERSION, [NAME, 'Yandex']], [/(avast|avg)\\/([\\w\\.]+)/i // Avast/AVG Secure Browser\n    ], [[NAME, /(.+)/, '$1 Secure Browser'], VERSION], [/focus\\/([\\w\\.]+)/i // Firefox Focus\n    ], [VERSION, [NAME, 'Firefox Focus']], [/opt\\/([\\w\\.]+)/i // Opera Touch\n    ], [VERSION, [NAME, 'Opera Touch']], [/coc_coc_browser\\/([\\w\\.]+)/i // Coc Coc Browser\n    ], [VERSION, [NAME, 'Coc Coc']], [/dolfin\\/([\\w\\.]+)/i // Dolphin\n    ], [VERSION, [NAME, 'Dolphin']], [/coast\\/([\\w\\.]+)/i // Opera Coast\n    ], [VERSION, [NAME, 'Opera Coast']], [/xiaomi\\/miuibrowser\\/([\\w\\.]+)/i // MIUI Browser\n    ], [VERSION, [NAME, 'MIUI Browser']], [/fxios\\/([\\w\\.-]+)/i // Firefox for iOS\n    ], [VERSION, [NAME, 'Firefox']], [/(qihu|qhbrowser|qihoobrowser|360browser)/i // 360\n    ], [[NAME, '360 Browser']], [/(oculus|samsung|sailfish)browser\\/([\\w\\.]+)/i], [[NAME, /(.+)/, '$1 Browser'], VERSION], [// Oculus/Samsung/Sailfish Browser\n    /(comodo_dragon)\\/([\\w\\.]+)/i // Comodo Dragon\n    ], [[NAME, /_/g, ' '], VERSION], [/\\s(electron)\\/([\\w\\.]+)\\ssafari/i, // Electron-based App\n    /(tesla)(?:\\sqtcarbrowser|\\/(20[12]\\d\\.[\\w\\.-]+))/i, // Tesla\n    /m?(qqbrowser|baiduboxapp|2345Explorer)[\\/\\s]?([\\w\\.]+)/i // QQBrowser/Baidu App/2345 Browser\n    ], [NAME, VERSION], [/(MetaSr)[\\/\\s]?([\\w\\.]+)/i, // SouGouBrowser\n    /(LBBROWSER)/i // LieBao Browser\n    ], [NAME], [// WebView\n    /;fbav\\/([\\w\\.]+);/i // Facebook App for iOS & Android with version\n    ], [VERSION, [NAME, 'Facebook']], [/FBAN\\/FBIOS|FB_IAB\\/FB4A/i // Facebook App for iOS & Android without version\n    ], [[NAME, 'Facebook']], [/safari\\s(line)\\/([\\w\\.]+)/i, // Line App for iOS\n    /\\b(line)\\/([\\w\\.]+)\\/iab/i, // Line App for Android\n    /(chromium|instagram)[\\/\\s]([\\w\\.-]+)/i // Chromium/Instagram\n    ], [NAME, VERSION], [/\\bgsa\\/([\\w\\.]+)\\s.*safari\\//i // Google Search Appliance on iOS\n    ], [VERSION, [NAME, 'GSA']], [/headlesschrome(?:\\/([\\w\\.]+)|\\s)/i // Chrome Headless\n    ], [VERSION, [NAME, 'Chrome Headless']], [/\\swv\\).+(chrome)\\/([\\w\\.]+)/i // Chrome WebView\n    ], [[NAME, 'Chrome WebView'], VERSION], [/droid.+\\sversion\\/([\\w\\.]+)\\b.+(?:mobile\\ssafari|safari)/i // Android Browser\n    ], [VERSION, [NAME, 'Android Browser']], [/(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?([\\w\\.]+)/i // Chrome/OmniWeb/Arora/Tizen/Nokia\n    ], [NAME, VERSION], [/version\\/([\\w\\.]+)\\s.*mobile\\/\\w+\\s(safari)/i // Mobile Safari\n    ], [VERSION, [NAME, 'Mobile Safari']], [/version\\/([\\w\\.]+)\\s.*(mobile\\s?safari|safari)/i // Safari & Safari Mobile\n    ], [VERSION, NAME], [/webkit.+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i // Safari < 3.0\n    ], [NAME, [VERSION, mapper.str, maps.browser.oldSafari.version]], [/(webkit|khtml)\\/([\\w\\.]+)/i], [NAME, VERSION], [// Gecko based\n    /(navigator|netscape)\\/([\\w\\.-]+)/i // Netscape\n    ], [[NAME, 'Netscape'], VERSION], [/ile\\svr;\\srv:([\\w\\.]+)\\).+firefox/i // Firefox Reality\n    ], [VERSION, [NAME, 'Firefox Reality']], [/ekiohf.+(flow)\\/([\\w\\.]+)/i, // Flow\n    /(swiftfox)/i, // Swiftfox\n    /(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?([\\w\\.\\+]+)/i, // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n    /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([\\w\\.-]+)$/i, // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n    /(firefox)\\/([\\w\\.]+)\\s[\\w\\s\\-]+\\/[\\w\\.]+$/i, // Other Firefox-based\n    /(mozilla)\\/([\\w\\.]+)\\s.+rv\\:.+gecko\\/\\d+/i, // Mozilla\n    // Other\n    /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\\/\\s]?([\\w\\.]+)/i, // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir\n    /(links)\\s\\(([\\w\\.]+)/i, // Links\n    /(gobrowser)\\/?([\\w\\.]*)/i, // GoBrowser\n    /(ice\\s?browser)\\/v?([\\w\\._]+)/i, // ICE Browser\n    /(mosaic)[\\/\\s]([\\w\\.]+)/i // Mosaic\n    ], [NAME, VERSION]],\n    cpu: [[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\\)]/i // AMD64 (x64)\n    ], [[ARCHITECTURE, 'amd64']], [/(ia32(?=;))/i // IA32 (quicktime)\n    ], [[ARCHITECTURE, util.lowerize]], [/((?:i[346]|x)86)[;\\)]/i // IA32 (x86)\n    ], [[ARCHITECTURE, 'ia32']], [/\\b(aarch64|armv?8e?l?)\\b/i // ARM64\n    ], [[ARCHITECTURE, 'arm64']], [/\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i // ARMHF\n    ], [[ARCHITECTURE, 'armhf']], [// PocketPC mistakenly identified as PowerPC\n    /windows\\s(ce|mobile);\\sppc;/i], [[ARCHITECTURE, 'arm']], [/((?:ppc|powerpc)(?:64)?)(?:\\smac|;|\\))/i // PowerPC\n    ], [[ARCHITECTURE, /ower/, '', util.lowerize]], [/(sun4\\w)[;\\)]/i // SPARC\n    ], [[ARCHITECTURE, 'sparc']], [/((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\\s)avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n    ], [[ARCHITECTURE, util.lowerize]]],\n    device: [[//////////////////////////\n    // MOBILES & TABLETS\n    // Ordered by popularity\n    /////////////////////////\n    // Samsung\n    /\\b(sch-i[89]0\\d|shw-m380s|sm-[pt]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus\\s10)/i], [MODEL, [VENDOR, 'Samsung'], [TYPE, TABLET]], [/\\b((?:s[cgp]h|gt|sm)-\\w+|galaxy\\snexus)/i, /\\ssamsung[\\s-]([\\w-]+)/i, /sec-(sgh\\w+)/i], [MODEL, [VENDOR, 'Samsung'], [TYPE, MOBILE]], [// Apple\n    /\\((ip(?:hone|od)[\\s\\w]*);/i // iPod/iPhone\n    ], [MODEL, [VENDOR, 'Apple'], [TYPE, MOBILE]], [/\\((ipad);[\\w\\s\\),;-]+apple/i, // iPad\n    /applecoremedia\\/[\\w\\.]+\\s\\((ipad)/i, /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i], [MODEL, [VENDOR, 'Apple'], [TYPE, TABLET]], [// Huawei\n    /\\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\\d{2})/i], [MODEL, [VENDOR, 'Huawei'], [TYPE, TABLET]], [/d\\/huawei([\\w\\s-]+)[;\\)]/i, /\\b(nexus\\s6p|vog-[at]?l\\d\\d|ane-[at]?l[x\\d]\\d|eml-a?l\\d\\da?|lya-[at]?l\\d[\\dc]|clt-a?l\\d\\di?|ele-l\\d\\d)/i, /\\b(\\w{2,4}-[atu][ln][01259][019])[;\\)\\s]/i], [MODEL, [VENDOR, 'Huawei'], [TYPE, MOBILE]], [// Xiaomi\n    /\\b(poco[\\s\\w]+)(?:\\sbuild|\\))/i, // Xiaomi POCO\n    /\\b;\\s(\\w+)\\sbuild\\/hm\\1/i, // Xiaomi Hongmi 'numeric' models\n    /\\b(hm[\\s\\-_]?note?[\\s_]?(?:\\d\\w)?)\\sbuild/i, // Xiaomi Hongmi\n    /\\b(redmi[\\s\\-_]?(?:note|k)?[\\w\\s_]+)(?:\\sbuild|\\))/i, // Xiaomi Redmi\n    /\\b(mi[\\s\\-_]?(?:a\\d|one|one[\\s_]plus|note lte)?[\\s_]?(?:\\d?\\w?)[\\s_]?(?:plus)?)\\sbuild/i // Xiaomi Mi\n    ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, MOBILE]], [/\\b(mi[\\s\\-_]?(?:pad)(?:[\\w\\s_]+))(?:\\sbuild|\\))/i // Mi Pad tablets\n    ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, TABLET]], [// OPPO\n    /;\\s(\\w+)\\sbuild.+\\soppo/i, /\\s(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007)\\b/i], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [// Vivo\n    /\\svivo\\s(\\w+)(?:\\sbuild|\\))/i, /\\s(v[12]\\d{3}\\w?[at])(?:\\sbuild|;)/i], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [// Realme\n    /\\s(rmx[12]\\d{3})(?:\\sbuild|;)/i], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [// Motorola\n    /\\s(milestone|droid(?:[2-4x]|\\s(?:bionic|x2|pro|razr))?:?(\\s4g)?)\\b[\\w\\s]+build\\//i, /\\smot(?:orola)?[\\s-](\\w*)/i, /((?:moto[\\s\\w\\(\\)]+|xt\\d{3,4}|nexus\\s6)(?=\\sbuild|\\)))/i], [MODEL, [VENDOR, 'Motorola'], [TYPE, MOBILE]], [/\\s(mz60\\d|xoom[\\s2]{0,2})\\sbuild\\//i], [MODEL, [VENDOR, 'Motorola'], [TYPE, TABLET]], [// LG\n    /((?=lg)?[vl]k\\-?\\d{3})\\sbuild|\\s3\\.[\\s\\w;-]{10}lg?-([06cv9]{3,4})/i], [MODEL, [VENDOR, 'LG'], [TYPE, TABLET]], [/(lm-?f100[nv]?|nexus\\s[45])/i, /lg[e;\\s\\/-]+((?!browser|netcast)\\w+)/i, /\\blg(\\-?[\\d\\w]+)\\sbuild/i], [MODEL, [VENDOR, 'LG'], [TYPE, MOBILE]], [// Lenovo\n    /(ideatab[\\w\\-\\s]+)/i, /lenovo\\s?(s(?:5000|6000)(?:[\\w-]+)|tab(?:[\\s\\w]+)|yt[\\d\\w-]{6}|tb[\\d\\w-]{6})/i // Lenovo tablets\n    ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [// Nokia\n    /(?:maemo|nokia).*(n900|lumia\\s\\d+)/i, /nokia[\\s_-]?([\\w\\.-]*)/i], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [// Google\n    /droid.+;\\s(pixel\\sc)[\\s)]/i // Google Pixel C\n    ], [MODEL, [VENDOR, 'Google'], [TYPE, TABLET]], [/droid.+;\\s(pixel[\\s\\daxl]{0,6})(?:\\sbuild|\\))/i // Google Pixel\n    ], [MODEL, [VENDOR, 'Google'], [TYPE, MOBILE]], [// Sony\n    /droid.+\\s([c-g]\\d{4}|so[-l]\\w+|xq-a\\w[4-7][12])(?=\\sbuild\\/|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i], [MODEL, [VENDOR, 'Sony'], [TYPE, MOBILE]], [/sony\\stablet\\s[ps]\\sbuild\\//i, /(?:sony)?sgp\\w+(?:\\sbuild\\/|\\))/i], [[MODEL, 'Xperia Tablet'], [VENDOR, 'Sony'], [TYPE, TABLET]], [// OnePlus\n    /\\s(kb2005|in20[12]5|be20[12][59])\\b/i, /\\ba000(1)\\sbuild/i, // OnePlus\n    /\\boneplus\\s(a\\d{4})[\\s)]/i], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [// Amazon\n    /(alexa)webm/i, /(kf[a-z]{2}wi)(\\sbuild\\/|\\))/i, // Kindle Fire without Silk\n    /(kf[a-z]+)(\\sbuild\\/|\\)).+silk\\//i // Kindle Fire HD\n    ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [/(sd|kf)[0349hijorstuw]+(\\sbuild\\/|\\)).+silk\\//i // Fire Phone\n    ], [[MODEL, 'Fire Phone'], [VENDOR, 'Amazon'], [TYPE, MOBILE]], [// BlackBerry\n    /\\((playbook);[\\w\\s\\),;-]+(rim)/i // BlackBerry PlayBook\n    ], [MODEL, VENDOR, [TYPE, TABLET]], [/((?:bb[a-f]|st[hv])100-\\d)/i, /\\(bb10;\\s(\\w+)/i // BlackBerry 10\n    ], [MODEL, [VENDOR, 'BlackBerry'], [TYPE, MOBILE]], [// Asus\n    /(?:\\b|asus_)(transfo[prime\\s]{4,10}\\s\\w+|eeepc|slider\\s\\w+|nexus\\s7|padfone|p00[cj])/i], [MODEL, [VENDOR, 'ASUS'], [TYPE, TABLET]], [/\\s(z[es]6[027][01][km][ls]|zenfone\\s\\d\\w?)\\b/i], [MODEL, [VENDOR, 'ASUS'], [TYPE, MOBILE]], [// HTC\n    /(nexus\\s9)/i // HTC Nexus 9\n    ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [/(htc)[;_\\s-]{1,2}([\\w\\s]+(?=\\)|\\sbuild)|\\w+)/i, // HTC\n    // ZTE\n    /(zte)-(\\w*)/i, /(alcatel|geeksphone|nexian|panasonic|(?=;\\s)sony)[_\\s-]?([\\w-]*)/i // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n    ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [// Acer\n    /droid[x\\d\\.\\s;]+\\s([ab][1-7]\\-?[0178a]\\d\\d?)/i], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [// Meizu\n    /droid.+;\\s(m[1-5]\\snote)\\sbuild/i, /\\bmz-([\\w-]{2,})/i], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [// MIXED\n    /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\\s_-]?([\\w-]*)/i, // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron\n    /(hp)\\s([\\w\\s]+\\w)/i, // HP iPAQ\n    /(asus)-?(\\w+)/i, // Asus\n    /(microsoft);\\s(lumia[\\s\\w]+)/i, // Microsoft Lumia\n    /(lenovo)[_\\s-]?([\\w-]+)/i, // Lenovo\n    /linux;.+(jolla);/i, // Jolla\n    /droid.+;\\s(oppo)\\s?([\\w\\s]+)\\sbuild/i // OPPO\n    ], [VENDOR, MODEL, [TYPE, MOBILE]], [/(archos)\\s(gamepad2?)/i, // Archos\n    /(hp).+(touchpad(?!.+tablet)|tablet)/i, // HP TouchPad\n    /(kindle)\\/([\\w\\.]+)/i, // Kindle\n    /\\s(nook)[\\w\\s]+build\\/(\\w+)/i, // Nook\n    /(dell)\\s(strea[kpr\\s\\d]*[\\dko])/i, // Dell Streak\n    /[;\\/]\\s?(le[\\s\\-]+pan)[\\s\\-]+(\\w{1,9})\\sbuild/i, // Le Pan Tablets\n    /[;\\/]\\s?(trinity)[\\-\\s]*(t\\d{3})\\sbuild/i, // Trinity Tablets\n    /\\b(gigaset)[\\s\\-]+(q\\w{1,9})\\sbuild/i, // Gigaset Tablets\n    /\\b(vodafone)\\s([\\w\\s]+)(?:\\)|\\sbuild)/i // Vodafone\n    ], [VENDOR, MODEL, [TYPE, TABLET]], [/\\s(surface\\sduo)\\s/i // Surface Duo\n    ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, TABLET]], [/droid\\s[\\d\\.]+;\\s(fp\\du?)\\sbuild/i], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [/\\s(u304aa)\\sbuild/i // AT&T\n    ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [/sie-(\\w*)/i // Siemens\n    ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [/[;\\/]\\s?(rct\\w+)\\sbuild/i // RCA Tablets\n    ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [/[;\\/\\s](venue[\\d\\s]{2,7})\\sbuild/i // Dell Venue Tablets\n    ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [/[;\\/]\\s?(q(?:mv|ta)\\w+)\\sbuild/i // Verizon Tablet\n    ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [/[;\\/]\\s(?:barnes[&\\s]+noble\\s|bn[rt])([\\w\\s\\+]*)\\sbuild/i // Barnes & Noble Tablet\n    ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [/[;\\/]\\s(tm\\d{3}\\w+)\\sbuild/i], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [/;\\s(k88)\\sbuild/i // ZTE K Series Tablet\n    ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [/;\\s(nx\\d{3}j)\\sbuild/i // ZTE Nubia\n    ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [/[;\\/]\\s?(gen\\d{3})\\sbuild.*49h/i // Swiss GEN Mobile\n    ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [/[;\\/]\\s?(zur\\d{3})\\sbuild/i // Swiss ZUR Tablet\n    ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [/[;\\/]\\s?((zeki)?tb.*\\b)\\sbuild/i // Zeki Tablets\n    ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [/[;\\/]\\s([yr]\\d{2})\\sbuild/i, /[;\\/]\\s(dragon[\\-\\s]+touch\\s|dt)(\\w{5})\\sbuild/i // Dragon Touch Tablet\n    ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [/[;\\/]\\s?(ns-?\\w{0,9})\\sbuild/i // Insignia Tablets\n    ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [/[;\\/]\\s?((nxa|Next)-?\\w{0,9})\\sbuild/i // NextBook Tablets\n    ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [/[;\\/]\\s?(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05]))\\sbuild/i], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [// Voice Xtreme Phones\n    /[;\\/]\\s?(lvtel\\-)?(v1[12])\\sbuild/i // LvTel Phones\n    ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [/;\\s(ph-1)\\s/i], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [// Essential PH-1\n    /[;\\/]\\s?(v(100md|700na|7011|917g).*\\b)\\sbuild/i // Envizen Tablets\n    ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [/[;\\/]\\s?(trio[\\s\\w\\-\\.]+)\\sbuild/i // MachSpeed Tablets\n    ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [/[;\\/]\\s?tu_(1491)\\sbuild/i // Rotor Tablets\n    ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [/(shield[\\w\\s]+)\\sbuild/i // Nvidia Shield Tablets\n    ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [/(sprint)\\s(\\w+)/i // Sprint Phones\n    ], [VENDOR, MODEL, [TYPE, MOBILE]], [/(kin\\.[onetw]{3})/i // Microsoft Kin\n    ], [[MODEL, /\\./g, ' '], [VENDOR, 'Microsoft'], [TYPE, MOBILE]], [/droid\\s[\\d\\.]+;\\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i // Zebra\n    ], [MODEL, [VENDOR, 'Zebra'], [TYPE, TABLET]], [/droid\\s[\\d\\.]+;\\s(ec30|ps20|tc[2-8]\\d[kx])\\)/i], [MODEL, [VENDOR, 'Zebra'], [TYPE, MOBILE]], [///////////////////\n    // CONSOLES\n    ///////////////////\n    /\\s(ouya)\\s/i, // Ouya\n    /(nintendo)\\s([wids3utch]+)/i // Nintendo\n    ], [VENDOR, MODEL, [TYPE, CONSOLE]], [/droid.+;\\s(shield)\\sbuild/i // Nvidia\n    ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [/(playstation\\s[345portablevi]+)/i // Playstation\n    ], [MODEL, [VENDOR, 'Sony'], [TYPE, CONSOLE]], [/[\\s\\(;](xbox(?:\\sone)?(?!;\\sxbox))[\\s\\);]/i // Microsoft Xbox\n    ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, CONSOLE]], [///////////////////\n    // SMARTTVS\n    ///////////////////\n    /smart-tv.+(samsung)/i // Samsung\n    ], [VENDOR, [TYPE, SMARTTV]], [/hbbtv.+maple;(\\d+)/i], [[MODEL, /^/, 'SmartTV'], [VENDOR, 'Samsung'], [TYPE, SMARTTV]], [/(?:linux;\\snetcast.+smarttv|lg\\snetcast\\.tv-201\\d)/i // LG SmartTV\n    ], [[VENDOR, 'LG'], [TYPE, SMARTTV]], [/(apple)\\s?tv/i // Apple TV\n    ], [VENDOR, [MODEL, 'Apple TV'], [TYPE, SMARTTV]], [/crkey/i // Google Chromecast\n    ], [[MODEL, 'Chromecast'], [VENDOR, 'Google'], [TYPE, SMARTTV]], [/droid.+aft([\\w])(\\sbuild\\/|\\))/i // Fire TV\n    ], [MODEL, [VENDOR, 'Amazon'], [TYPE, SMARTTV]], [/\\(dtv[\\);].+(aquos)/i // Sharp\n    ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [/hbbtv\\/\\d+\\.\\d+\\.\\d+\\s+\\([\\w\\s]*;\\s*(\\w[^;]*);([^;]*)/i // HbbTV devices\n    ], [[VENDOR, util.trim], [MODEL, util.trim], [TYPE, SMARTTV]], [/[\\s\\/\\(](android\\s|smart[-\\s]?|opera\\s)tv[;\\)\\s]/i // SmartTV from Unidentified Vendors\n    ], [[TYPE, SMARTTV]], [///////////////////\n    // WEARABLES\n    ///////////////////\n    /((pebble))app\\/[\\d\\.]+\\s/i // Pebble\n    ], [VENDOR, MODEL, [TYPE, WEARABLE]], [/droid.+;\\s(glass)\\s\\d/i // Google Glass\n    ], [MODEL, [VENDOR, 'Google'], [TYPE, WEARABLE]], [/droid\\s[\\d\\.]+;\\s(wt63?0{2,3})\\)/i], [MODEL, [VENDOR, 'Zebra'], [TYPE, WEARABLE]], [///////////////////\n    // EMBEDDED\n    ///////////////////\n    /(tesla)(?:\\sqtcarbrowser|\\/20[12]\\d\\.[\\w\\.-]+)/i // Tesla\n    ], [VENDOR, [TYPE, EMBEDDED]], [////////////////////\n    // MIXED (GENERIC)\n    ///////////////////\n    /droid .+?; ([^;]+?)(?: build|\\) applewebkit).+? mobile safari/i // Android Phones from Unidentified Vendors\n    ], [MODEL, [TYPE, MOBILE]], [/droid .+?;\\s([^;]+?)(?: build|\\) applewebkit).+?(?! mobile) safari/i // Android Tablets from Unidentified Vendors\n    ], [MODEL, [TYPE, TABLET]], [/\\s(tablet|tab)[;\\/]/i, // Unidentifiable Tablet\n    /\\s(mobile)(?:[;\\/]|\\ssafari)/i // Unidentifiable Mobile\n    ], [[TYPE, util.lowerize]], [/(android[\\w\\.\\s\\-]{0,9});.+build/i // Generic Android Device\n    ], [MODEL, [VENDOR, 'Generic']], [/(phone)/i], [[TYPE, MOBILE]]],\n    engine: [[/windows.+\\sedge\\/([\\w\\.]+)/i // EdgeHTML\n    ], [VERSION, [NAME, 'EdgeHTML']], [/webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i // Blink\n    ], [VERSION, [NAME, 'Blink']], [/(presto)\\/([\\w\\.]+)/i, // Presto\n    /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna\n    /ekioh(flow)\\/([\\w\\.]+)/i, // Flow\n    /(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i, // KHTML/Tasman/Links\n    /(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i // iCab\n    ], [NAME, VERSION], [/rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i // Gecko\n    ], [VERSION, NAME]],\n    os: [[// Windows\n    /microsoft\\s(windows)\\s(vista|xp)/i // Windows (iTunes)\n    ], [NAME, VERSION], [/(windows)\\snt\\s6\\.2;\\s(arm)/i, // Windows RT\n    /(windows\\sphone(?:\\sos)*)[\\s\\/]?([\\d\\.\\s\\w]*)/i, // Windows Phone\n    /(windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)(?!.+xbox)/i], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [/(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [// iOS/macOS\n    /ip[honead]{2,4}\\b(?:.*os\\s([\\w]+)\\slike\\smac|;\\sopera)/i, // iOS\n    /cfnetwork\\/.+darwin/i], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [/(mac\\sos\\sx)\\s?([\\w\\s\\.]*)/i, /(macintosh|mac(?=_powerpc)\\s)(?!.+haiku)/i // Mac OS\n    ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [// Mobile OSes                                                      // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo/Contiki/Sailfish OS\n    /(android|webos|palm\\sos|qnx|bada|rim\\stablet\\sos|meego|sailfish|contiki)[\\/\\s-]?([\\w\\.]*)/i, /(blackberry)\\w*\\/([\\w\\.]*)/i, // Blackberry\n    /(tizen|kaios)[\\/\\s]([\\w\\.]+)/i, // Tizen/KaiOS\n    /\\((series40);/i // Series 40\n    ], [NAME, VERSION], [/\\(bb(10);/i // BlackBerry 10\n    ], [VERSION, [NAME, 'BlackBerry']], [/(?:symbian\\s?os|symbos|s60(?=;)|series60)[\\/\\s-]?([\\w\\.]*)/i // Symbian\n    ], [VERSION, [NAME, 'Symbian']], [/mozilla.+\\(mobile;.+gecko.+firefox/i // Firefox OS\n    ], [[NAME, 'Firefox OS']], [/web0s;.+rt(tv)/i, /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i // WebOS\n    ], [VERSION, [NAME, 'webOS']], [// Google Chromecast\n    /crkey\\/([\\d\\.]+)/i // Google Chromecast\n    ], [VERSION, [NAME, 'Chromecast']], [/(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i // Chromium OS\n    ], [[NAME, 'Chromium OS'], VERSION], [// Console\n    /(nintendo|playstation)\\s([wids345portablevuch]+)/i, // Nintendo/Playstation\n    /(xbox);\\s+xbox\\s([^\\);]+)/i, // Microsoft Xbox (360, One, X, S, Series X, Series S)\n    // GNU/Linux based\n    /(mint)[\\/\\s\\(\\)]?(\\w*)/i, // Mint\n    /(mageia|vectorlinux)[;\\s]/i, // Mageia/VectorLinux\n    /(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\\sgnu\\/linux)?(?:\\slinux)?[\\/\\s-]?(?!chrom|package)([\\w\\.-]*)/i, // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware\n    // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus\n    /(hurd|linux)\\s?([\\w\\.]*)/i, // Hurd/Linux\n    /(gnu)\\s?([\\w\\.]*)/i, // GNU\n    // BSD based\n    /\\s([frentopc-]{0,4}bsd|dragonfly)\\s?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly\n    /(haiku)\\s(\\w+)/i // Haiku\n    ], [NAME, VERSION], [// Other\n    /(sunos)\\s?([\\w\\.\\d]*)/i // Solaris\n    ], [[NAME, 'Solaris'], VERSION], [/((?:open)?solaris)[\\/\\s-]?([\\w\\.]*)/i, // Solaris\n    /(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.])*/i, // AIX\n    /(plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos|openvms|fuchsia)/i, // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS/OpenVMS/Fuchsia\n    /(unix)\\s?([\\w\\.]*)/i // UNIX\n    ], [NAME, VERSION]]\n  }; /////////////////\n  // Constructor\n  ////////////////\n\n  var UAParser = function UAParser(ua, extensions) {\n    if (_typeof(ua) === 'object') {\n      extensions = ua;\n      ua = undefined;\n    }\n\n    if (!(this instanceof UAParser)) {\n      return new UAParser(ua, extensions).getResult();\n    }\n\n    var _ua = ua || (typeof window !== 'undefined' && window.navigator && window.navigator.userAgent ? window.navigator.userAgent : EMPTY);\n\n    var _rgxmap = extensions ? util.extend(regexes, extensions) : regexes;\n\n    this.getBrowser = function () {\n      var _browser = {\n        name: undefined,\n        version: undefined\n      };\n      mapper.rgx.call(_browser, _ua, _rgxmap.browser);\n      _browser.major = util.major(_browser.version); // deprecated\n\n      return _browser;\n    };\n\n    this.getCPU = function () {\n      var _cpu = {\n        architecture: undefined\n      };\n      mapper.rgx.call(_cpu, _ua, _rgxmap.cpu);\n      return _cpu;\n    };\n\n    this.getDevice = function () {\n      var _device = {\n        vendor: undefined,\n        model: undefined,\n        type: undefined\n      };\n      mapper.rgx.call(_device, _ua, _rgxmap.device);\n      return _device;\n    };\n\n    this.getEngine = function () {\n      var _engine = {\n        name: undefined,\n        version: undefined\n      };\n      mapper.rgx.call(_engine, _ua, _rgxmap.engine);\n      return _engine;\n    };\n\n    this.getOS = function () {\n      var _os = {\n        name: undefined,\n        version: undefined\n      };\n      mapper.rgx.call(_os, _ua, _rgxmap.os);\n      return _os;\n    };\n\n    this.getResult = function () {\n      return {\n        ua: this.getUA(),\n        browser: this.getBrowser(),\n        engine: this.getEngine(),\n        os: this.getOS(),\n        device: this.getDevice(),\n        cpu: this.getCPU()\n      };\n    };\n\n    this.getUA = function () {\n      return _ua;\n    };\n\n    this.setUA = function (ua) {\n      _ua = _typeof(ua) === STR_TYPE && ua.length > UA_MAX_LENGTH ? util.trim(ua, UA_MAX_LENGTH) : ua;\n      return this;\n    };\n\n    this.setUA(_ua);\n    return this;\n  };\n\n  UAParser.VERSION = LIBVERSION;\n  UAParser.BROWSER = {\n    NAME: NAME,\n    MAJOR: MAJOR,\n    // deprecated\n    VERSION: VERSION\n  };\n  UAParser.CPU = {\n    ARCHITECTURE: ARCHITECTURE\n  };\n  UAParser.DEVICE = {\n    MODEL: MODEL,\n    VENDOR: VENDOR,\n    TYPE: TYPE,\n    CONSOLE: CONSOLE,\n    MOBILE: MOBILE,\n    SMARTTV: SMARTTV,\n    TABLET: TABLET,\n    WEARABLE: WEARABLE,\n    EMBEDDED: EMBEDDED\n  };\n  UAParser.ENGINE = {\n    NAME: NAME,\n    VERSION: VERSION\n  };\n  UAParser.OS = {\n    NAME: NAME,\n    VERSION: VERSION\n  }; ///////////\n  // Export\n  //////////\n  // check js environment\n\n  if (( false ? undefined : _typeof(exports)) !== UNDEF_TYPE) {\n    // nodejs env\n    if (( false ? undefined : _typeof(module)) !== UNDEF_TYPE && module.exports) {\n      exports = module.exports = UAParser;\n    }\n\n    exports.UAParser = UAParser;\n  } else {\n    // requirejs env (optional)\n    if (true) {\n      !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n        return UAParser;\n      }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else {}\n  } // jQuery/Zepto specific (optional)\n  // Note:\n  //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n  //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n  //   and we should catch that.\n\n\n  var $ = typeof window !== 'undefined' && (window.jQuery || window.Zepto);\n\n  if ($ && !$.ua) {\n    var parser = new UAParser();\n    $.ua = parser.getResult();\n\n    $.ua.get = function () {\n      return parser.getUA();\n    };\n\n    $.ua.set = function (uastring) {\n      parser.setUA(uastring);\n      var result = parser.getResult();\n\n      for (var prop in result) {\n        $.ua[prop] = result[prop];\n      }\n    };\n  }\n})((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === 'object' ? window : this);\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/module.js */ \"./node_modules/webpack/buildin/module.js\")(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdWEtcGFyc2VyLWpzL3NyYy91YS1wYXJzZXIuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdWEtcGFyc2VyLWpzL3NyYy91YS1wYXJzZXIuanM/MmI4MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFAbGljZW5zZVxuICogVUFQYXJzZXIuanMgdjAuNy4yOFxuICogTGlnaHR3ZWlnaHQgSmF2YVNjcmlwdC1iYXNlZCBVc2VyLUFnZW50IHN0cmluZyBwYXJzZXJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWlzYWxtYW4vdWEtcGFyc2VyLWpzXG4gKlxuICogQ29weXJpZ2h0IMKpIDIwMTItMjAyMSBGYWlzYWwgU2FsbWFuIDxmQGZhaXNhbG1hbi5jb20+XG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgTGljZW5zZVxuICovXG5cbihmdW5jdGlvbiAod2luZG93LCB1bmRlZmluZWQpIHtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vLy8vLy8vLy8vLy8vXG4gICAgLy8gQ29uc3RhbnRzXG4gICAgLy8vLy8vLy8vLy8vL1xuXG5cbiAgICB2YXIgTElCVkVSU0lPTiAgPSAnMC43LjI4JyxcbiAgICAgICAgRU1QVFkgICAgICAgPSAnJyxcbiAgICAgICAgVU5LTk9XTiAgICAgPSAnPycsXG4gICAgICAgIEZVTkNfVFlQRSAgID0gJ2Z1bmN0aW9uJyxcbiAgICAgICAgVU5ERUZfVFlQRSAgPSAndW5kZWZpbmVkJyxcbiAgICAgICAgT0JKX1RZUEUgICAgPSAnb2JqZWN0JyxcbiAgICAgICAgU1RSX1RZUEUgICAgPSAnc3RyaW5nJyxcbiAgICAgICAgTUFKT1IgICAgICAgPSAnbWFqb3InLCAvLyBkZXByZWNhdGVkXG4gICAgICAgIE1PREVMICAgICAgID0gJ21vZGVsJyxcbiAgICAgICAgTkFNRSAgICAgICAgPSAnbmFtZScsXG4gICAgICAgIFRZUEUgICAgICAgID0gJ3R5cGUnLFxuICAgICAgICBWRU5ET1IgICAgICA9ICd2ZW5kb3InLFxuICAgICAgICBWRVJTSU9OICAgICA9ICd2ZXJzaW9uJyxcbiAgICAgICAgQVJDSElURUNUVVJFPSAnYXJjaGl0ZWN0dXJlJyxcbiAgICAgICAgQ09OU09MRSAgICAgPSAnY29uc29sZScsXG4gICAgICAgIE1PQklMRSAgICAgID0gJ21vYmlsZScsXG4gICAgICAgIFRBQkxFVCAgICAgID0gJ3RhYmxldCcsXG4gICAgICAgIFNNQVJUVFYgICAgID0gJ3NtYXJ0dHYnLFxuICAgICAgICBXRUFSQUJMRSAgICA9ICd3ZWFyYWJsZScsXG4gICAgICAgIEVNQkVEREVEICAgID0gJ2VtYmVkZGVkJyxcbiAgICAgICAgVUFfTUFYX0xFTkdUSCA9IDI1NTtcblxuXG4gICAgLy8vLy8vLy8vLy9cbiAgICAvLyBIZWxwZXJcbiAgICAvLy8vLy8vLy8vXG5cblxuICAgIHZhciB1dGlsID0ge1xuICAgICAgICBleHRlbmQgOiBmdW5jdGlvbiAocmVnZXhlcywgZXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgdmFyIG1lcmdlZFJlZ2V4ZXMgPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gcmVnZXhlcykge1xuICAgICAgICAgICAgICAgIGlmIChleHRlbnNpb25zW2ldICYmIGV4dGVuc2lvbnNbaV0ubGVuZ3RoICUgMiA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBtZXJnZWRSZWdleGVzW2ldID0gZXh0ZW5zaW9uc1tpXS5jb25jYXQocmVnZXhlc1tpXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2VkUmVnZXhlc1tpXSA9IHJlZ2V4ZXNbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lcmdlZFJlZ2V4ZXM7XG4gICAgICAgIH0sXG4gICAgICAgIGhhcyA6IGZ1bmN0aW9uIChzdHIxLCBzdHIyKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHN0cjEgPT09IFNUUl9UWVBFID8gc3RyMi50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc3RyMS50b0xvd2VyQ2FzZSgpKSAhPT0gLTEgOiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgbG93ZXJpemUgOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIG1ham9yIDogZnVuY3Rpb24gKHZlcnNpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YodmVyc2lvbikgPT09IFNUUl9UWVBFID8gdmVyc2lvbi5yZXBsYWNlKC9bXlxcZFxcLl0vZywnJykuc3BsaXQoXCIuXCIpWzBdIDogdW5kZWZpbmVkO1xuICAgICAgICB9LFxuICAgICAgICB0cmltIDogZnVuY3Rpb24gKHN0ciwgbGVuKSB7XG4gICAgICAgICAgICBzdHIgPSBzdHIucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csICcnKTtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YobGVuKSA9PT0gVU5ERUZfVFlQRSA/IHN0ciA6IHN0ci5zdWJzdHJpbmcoMCwgVUFfTUFYX0xFTkdUSCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICAvLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBNYXAgaGVscGVyXG4gICAgLy8vLy8vLy8vLy8vLy9cblxuXG4gICAgdmFyIG1hcHBlciA9IHtcblxuICAgICAgICByZ3ggOiBmdW5jdGlvbiAodWEsIGFycmF5cykge1xuXG4gICAgICAgICAgICB2YXIgaSA9IDAsIGosIGssIHAsIHEsIG1hdGNoZXMsIG1hdGNoO1xuXG4gICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggYWxsIHJlZ2V4ZXMgbWFwc1xuICAgICAgICAgICAgd2hpbGUgKGkgPCBhcnJheXMubGVuZ3RoICYmICFtYXRjaGVzKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVnZXggPSBhcnJheXNbaV0sICAgICAgIC8vIGV2ZW4gc2VxdWVuY2UgKDAsMiw0LC4uKVxuICAgICAgICAgICAgICAgICAgICBwcm9wcyA9IGFycmF5c1tpICsgMV07ICAgLy8gb2RkIHNlcXVlbmNlICgxLDMsNSwuLilcbiAgICAgICAgICAgICAgICBqID0gayA9IDA7XG5cbiAgICAgICAgICAgICAgICAvLyB0cnkgbWF0Y2hpbmcgdWFzdHJpbmcgd2l0aCByZWdleGVzXG4gICAgICAgICAgICAgICAgd2hpbGUgKGogPCByZWdleC5sZW5ndGggJiYgIW1hdGNoZXMpIHtcblxuICAgICAgICAgICAgICAgICAgICBtYXRjaGVzID0gcmVnZXhbaisrXS5leGVjKHVhKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoISFtYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHAgPSAwOyBwIDwgcHJvcHMubGVuZ3RoOyBwKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IG1hdGNoZXNbKytrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0gcHJvcHNbcF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgZ2l2ZW4gcHJvcGVydHkgaXMgYWN0dWFsbHkgYXJyYXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHEgPT09IE9CSl9UWVBFICYmIHEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocS5sZW5ndGggPT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBxWzFdID09IEZVTkNfVFlQRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFzc2lnbiBtb2RpZmllZCBtYXRjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbcVswXV0gPSBxWzFdLmNhbGwodGhpcywgbWF0Y2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhc3NpZ24gZ2l2ZW4gdmFsdWUsIGlnbm9yZSByZWdleCBtYXRjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbcVswXV0gPSBxWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHEubGVuZ3RoID09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgZnVuY3Rpb24gb3IgcmVnZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcVsxXSA9PT0gRlVOQ19UWVBFICYmICEocVsxXS5leGVjICYmIHFbMV0udGVzdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGZ1bmN0aW9uICh1c3VhbGx5IHN0cmluZyBtYXBwZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1txWzBdXSA9IG1hdGNoID8gcVsxXS5jYWxsKHRoaXMsIG1hdGNoLCBxWzJdKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2FuaXRpemUgbWF0Y2ggdXNpbmcgZ2l2ZW4gcmVnZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3FbMF1dID0gbWF0Y2ggPyBtYXRjaC5yZXBsYWNlKHFbMV0sIHFbMl0pIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHEubGVuZ3RoID09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3FbMF1dID0gbWF0Y2ggPyBxWzNdLmNhbGwodGhpcywgbWF0Y2gucmVwbGFjZShxWzFdLCBxWzJdKSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3FdID0gbWF0Y2ggPyBtYXRjaCA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSArPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHN0ciA6IGZ1bmN0aW9uIChzdHIsIG1hcCkge1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpIGluIG1hcCkge1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIGFycmF5XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXBbaV0gPT09IE9CSl9UWVBFICYmIG1hcFtpXS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWFwW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXRpbC5oYXMobWFwW2ldW2pdLCBzdHIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChpID09PSBVTktOT1dOKSA/IHVuZGVmaW5lZCA6IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHV0aWwuaGFzKG1hcFtpXSwgc3RyKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGkgPT09IFVOS05PV04pID8gdW5kZWZpbmVkIDogaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gU3RyaW5nIG1hcFxuICAgIC8vLy8vLy8vLy8vLy8vXG5cblxuICAgIHZhciBtYXBzID0ge1xuXG4gICAgICAgIGJyb3dzZXIgOiB7XG4gICAgICAgICAgICAvLyBTYWZhcmkgPCAzLjBcbiAgICAgICAgICAgIG9sZFNhZmFyaSA6IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uIDoge1xuICAgICAgICAgICAgICAgICAgICAnMS4wJyAgIDogJy84JyxcbiAgICAgICAgICAgICAgICAgICAgJzEuMicgICA6ICcvMScsXG4gICAgICAgICAgICAgICAgICAgICcxLjMnICAgOiAnLzMnLFxuICAgICAgICAgICAgICAgICAgICAnMi4wJyAgIDogJy80MTInLFxuICAgICAgICAgICAgICAgICAgICAnMi4wLjInIDogJy80MTYnLFxuICAgICAgICAgICAgICAgICAgICAnMi4wLjMnIDogJy80MTcnLFxuICAgICAgICAgICAgICAgICAgICAnMi4wLjQnIDogJy80MTknLFxuICAgICAgICAgICAgICAgICAgICAnPycgICAgIDogJy8nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9sZEVkZ2UgOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbiA6IHtcbiAgICAgICAgICAgICAgICAgICAgJzAuMScgICA6ICcxMi4nLFxuICAgICAgICAgICAgICAgICAgICAnMjEnICAgIDogJzEzLicsXG4gICAgICAgICAgICAgICAgICAgICczMScgICAgOiAnMTQuJyxcbiAgICAgICAgICAgICAgICAgICAgJzM5JyAgICA6ICcxNS4nLFxuICAgICAgICAgICAgICAgICAgICAnNDEnICAgIDogJzE2LicsXG4gICAgICAgICAgICAgICAgICAgICc0MicgICAgOiAnMTcuJyxcbiAgICAgICAgICAgICAgICAgICAgJzQ0JyAgICA6ICcxOC4nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIG9zIDoge1xuICAgICAgICAgICAgd2luZG93cyA6IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uIDoge1xuICAgICAgICAgICAgICAgICAgICAnTUUnICAgICAgICA6ICc0LjkwJyxcbiAgICAgICAgICAgICAgICAgICAgJ05UIDMuMTEnICAgOiAnTlQzLjUxJyxcbiAgICAgICAgICAgICAgICAgICAgJ05UIDQuMCcgICAgOiAnTlQ0LjAnLFxuICAgICAgICAgICAgICAgICAgICAnMjAwMCcgICAgICA6ICdOVCA1LjAnLFxuICAgICAgICAgICAgICAgICAgICAnWFAnICAgICAgICA6IFsnTlQgNS4xJywgJ05UIDUuMiddLFxuICAgICAgICAgICAgICAgICAgICAnVmlzdGEnICAgICA6ICdOVCA2LjAnLFxuICAgICAgICAgICAgICAgICAgICAnNycgICAgICAgICA6ICdOVCA2LjEnLFxuICAgICAgICAgICAgICAgICAgICAnOCcgICAgICAgICA6ICdOVCA2LjInLFxuICAgICAgICAgICAgICAgICAgICAnOC4xJyAgICAgICA6ICdOVCA2LjMnLFxuICAgICAgICAgICAgICAgICAgICAnMTAnICAgICAgICA6IFsnTlQgNi40JywgJ05UIDEwLjAnXSxcbiAgICAgICAgICAgICAgICAgICAgJ1JUJyAgICAgICAgOiAnQVJNJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIC8vLy8vLy8vLy8vLy8vXG4gICAgLy8gUmVnZXggbWFwXG4gICAgLy8vLy8vLy8vLy8vL1xuXG5cbiAgICB2YXIgcmVnZXhlcyA9IHtcblxuICAgICAgICBicm93c2VyIDogW1tcblxuICAgICAgICAgICAgL1xcYig/OmNybW98Y3Jpb3MpXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hyb21lIGZvciBBbmRyb2lkL2lPU1xuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnQ2hyb21lJ11dLCBbXG4gICAgICAgICAgICAvZWRnKD86ZXxpb3N8YSk/XFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pY3Jvc29mdCBFZGdlXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdFZGdlJ11dLCBbXG4gICAgICAgICAgICAvLyBicmVha2luZyBjaGFuZ2UgKHJlc2VydmVkIGZvciBuZXh0IG1ham9yIHJlbGVhc2UpOlxuICAgICAgICAgICAgLy8vZWRnZVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9sZCBFZGdlIChUcmlkZW50KVxuICAgICAgICAgICAgLy9dLCBbW1ZFUlNJT04sIG1hcHBlci5zdHIsIG1hcHMuYnJvd3Nlci5vbGRFZGdlLnZlcnNpb25dLCBbTkFNRSwgJ0VkZ2UnXV0sIFtcblxuICAgICAgICAgICAgLy8gUHJlc3RvIGJhc2VkXG4gICAgICAgICAgICAvKG9wZXJhXFxzbWluaSlcXC8oW1xcd1xcLi1dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPcGVyYSBNaW5pXG4gICAgICAgICAgICAvKG9wZXJhXFxzW21vYmlsZXRhYl17Myw2fSlcXGIuK3ZlcnNpb25cXC8oW1xcd1xcLi1dKykvaSwgICAgICAgICAgICAgICAgLy8gT3BlcmEgTW9iaS9UYWJsZXRcbiAgICAgICAgICAgIC8ob3BlcmEpKD86Lit2ZXJzaW9uXFwvfFtcXC9cXHNdKykoW1xcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPcGVyYVxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvb3Bpb3NbXFwvXFxzXSsoW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPcGVyYSBtaW5pIG9uIGlwaG9uZSA+PSA4LjBcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ09wZXJhIE1pbmknXV0sIFtcbiAgICAgICAgICAgIC9cXHNvcHJcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9wZXJhIFdlYmtpdFxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnT3BlcmEnXV0sIFtcblxuICAgICAgICAgICAgLy8gTWl4ZWRcbiAgICAgICAgICAgIC8oa2luZGxlKVxcLyhbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2luZGxlXG4gICAgICAgICAgICAvKGx1bmFzY2FwZXxtYXh0aG9ufG5ldGZyb250fGphc21pbmV8YmxhemVyKVtcXC9cXHNdPyhbXFx3XFwuXSopL2ksICAgICAvLyBMdW5hc2NhcGUvTWF4dGhvbi9OZXRmcm9udC9KYXNtaW5lL0JsYXplclxuICAgICAgICAgICAgLy8gVHJpZGVudCBiYXNlZFxuICAgICAgICAgICAgLyhhdmFudFxcc3xpZW1vYmlsZXxzbGltKSg/OmJyb3dzZXIpP1tcXC9cXHNdPyhbXFx3XFwuXSopL2ksICAgICAgICAgICAgIC8vIEF2YW50L0lFTW9iaWxlL1NsaW1Ccm93c2VyXG4gICAgICAgICAgICAvKGJhP2lkdWJyb3dzZXIpW1xcL1xcc10/KFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCYWlkdSBCcm93c2VyXG4gICAgICAgICAgICAvKD86bXN8XFwoKShpZSlcXHMoW1xcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnRlcm5ldCBFeHBsb3JlclxuXG4gICAgICAgICAgICAvLyBXZWJraXQvS0hUTUwgYmFzZWRcbiAgICAgICAgICAgIC8oZmxvY2t8cm9ja21lbHR8bWlkb3JpfGVwaXBoYW55fHNpbGt8c2t5ZmlyZXxvdmlicm93c2VyfGJvbHR8aXJvbnx2aXZhbGRpfGlyaWRpdW18cGhhbnRvbWpzfGJvd3NlcnxxdWFya3xxdXB6aWxsYXxmYWxrb24pXFwvKFtcXHdcXC4tXSspL2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZsb2NrL1JvY2tNZWx0L01pZG9yaS9FcGlwaGFueS9TaWxrL1NreWZpcmUvQm9sdC9Jcm9uL0lyaWRpdW0vUGhhbnRvbUpTL0Jvd3Nlci9RdXBaaWxsYS9GYWxrb25cbiAgICAgICAgICAgIC8ocmVrb25xfHB1ZmZpbnxicmF2ZXx3aGFsZXxxcWJyb3dzZXJsaXRlfHFxKVxcLyhbXFx3XFwuXSspL2ksICAgICAgICAgLy8gUmVrb25xL1B1ZmZpbi9CcmF2ZS9XaGFsZS9RUUJyb3dzZXJMaXRlL1FRLCBha2EgU2hvdVFcbiAgICAgICAgICAgIC8od2VpYm8pX18oW1xcZFxcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZWlib1xuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvKD86W1xcc1xcL111Yz9cXHM/YnJvd3NlcnwoPzpqdWMuKyl1Y3dlYilbXFwvXFxzXT8oW1xcd1xcLl0rKS9pICAgICAgICAgICAvLyBVQ0Jyb3dzZXJcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ1VDQnJvd3NlciddXSwgW1xuICAgICAgICAgICAgLyg/OndpbmRvd3N3ZWNoYXQpP1xcc3FiY29yZVxcLyhbXFx3XFwuXSspXFxiLiooPzp3aW5kb3dzd2VjaGF0KT8vaSAgICAgIC8vIFdlQ2hhdCBEZXNrdG9wIGZvciBXaW5kb3dzIEJ1aWx0LWluIEJyb3dzZXJcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ1dlQ2hhdChXaW4pIERlc2t0b3AnXV0sIFtcbiAgICAgICAgICAgIC9taWNyb21lc3NlbmdlclxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2VDaGF0XG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdXZUNoYXQnXV0sIFtcbiAgICAgICAgICAgIC9rb25xdWVyb3JcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS29ucXVlcm9yXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdLb25xdWVyb3InXV0sIFtcbiAgICAgICAgICAgIC90cmlkZW50Litydls6XFxzXShbXFx3XFwuXXsxLDl9KVxcYi4rbGlrZVxcc2dlY2tvL2kgICAgICAgICAgICAgICAgICAgICAvLyBJRTExXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdJRSddXSwgW1xuICAgICAgICAgICAgL3lhYnJvd3NlclxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBZYW5kZXhcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ1lhbmRleCddXSwgW1xuICAgICAgICAgICAgLyhhdmFzdHxhdmcpXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBdmFzdC9BVkcgU2VjdXJlIEJyb3dzZXJcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgLyguKykvLCAnJDEgU2VjdXJlIEJyb3dzZXInXSwgVkVSU0lPTl0sIFtcbiAgICAgICAgICAgIC9mb2N1c1xcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyZWZveCBGb2N1c1xuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnRmlyZWZveCBGb2N1cyddXSwgW1xuICAgICAgICAgICAgL29wdFxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPcGVyYSBUb3VjaFxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnT3BlcmEgVG91Y2gnXV0sIFtcbiAgICAgICAgICAgIC9jb2NfY29jX2Jyb3dzZXJcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29jIENvYyBCcm93c2VyXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdDb2MgQ29jJ11dLCBbXG4gICAgICAgICAgICAvZG9sZmluXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvbHBoaW5cbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ0RvbHBoaW4nXV0sIFtcbiAgICAgICAgICAgIC9jb2FzdFxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3BlcmEgQ29hc3RcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ09wZXJhIENvYXN0J11dLFxuICAgICAgICAgICAgWy94aWFvbWlcXC9taXVpYnJvd3NlclxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTUlVSSBCcm93c2VyXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdNSVVJIEJyb3dzZXInXV0sIFtcbiAgICAgICAgICAgIC9meGlvc1xcLyhbXFx3XFwuLV0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyZWZveCBmb3IgaU9TXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdGaXJlZm94J11dLCBbXG4gICAgICAgICAgICAvKHFpaHV8cWhicm93c2VyfHFpaG9vYnJvd3NlcnwzNjBicm93c2VyKS9pICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDM2MFxuICAgICAgICAgICAgXSwgW1tOQU1FLCAnMzYwIEJyb3dzZXInXV0sIFtcbiAgICAgICAgICAgIC8ob2N1bHVzfHNhbXN1bmd8c2FpbGZpc2gpYnJvd3NlclxcLyhbXFx3XFwuXSspL2lcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgLyguKykvLCAnJDEgQnJvd3NlciddLCBWRVJTSU9OXSwgWyAgICAgICAgICAgICAgICAgICAgICAgLy8gT2N1bHVzL1NhbXN1bmcvU2FpbGZpc2ggQnJvd3NlclxuICAgICAgICAgICAgLyhjb21vZG9fZHJhZ29uKVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21vZG8gRHJhZ29uXG4gICAgICAgICAgICBdLCBbW05BTUUsIC9fL2csICcgJ10sIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvXFxzKGVsZWN0cm9uKVxcLyhbXFx3XFwuXSspXFxzc2FmYXJpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRWxlY3Ryb24tYmFzZWQgQXBwXG4gICAgICAgICAgICAvKHRlc2xhKSg/Olxcc3F0Y2FyYnJvd3NlcnxcXC8oMjBbMTJdXFxkXFwuW1xcd1xcLi1dKykpL2ksICAgICAgICAgICAgICAgIC8vIFRlc2xhXG4gICAgICAgICAgICAvbT8ocXFicm93c2VyfGJhaWR1Ym94YXBwfDIzNDVFeHBsb3JlcilbXFwvXFxzXT8oW1xcd1xcLl0rKS9pICAgICAgICAgICAvLyBRUUJyb3dzZXIvQmFpZHUgQXBwLzIzNDUgQnJvd3NlclxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvKE1ldGFTcilbXFwvXFxzXT8oW1xcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTb3VHb3VCcm93c2VyXG4gICAgICAgICAgICAvKExCQlJPV1NFUikvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExpZUJhbyBCcm93c2VyXG4gICAgICAgICAgICBdLCBbTkFNRV0sIFtcblxuICAgICAgICAgICAgLy8gV2ViVmlld1xuICAgICAgICAgICAgLztmYmF2XFwvKFtcXHdcXC5dKyk7L2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGYWNlYm9vayBBcHAgZm9yIGlPUyAmIEFuZHJvaWQgd2l0aCB2ZXJzaW9uXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdGYWNlYm9vayddXSwgW1xuICAgICAgICAgICAgL0ZCQU5cXC9GQklPU3xGQl9JQUJcXC9GQjRBL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhY2Vib29rIEFwcCBmb3IgaU9TICYgQW5kcm9pZCB3aXRob3V0IHZlcnNpb25cbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ0ZhY2Vib29rJ11dLCBbXG4gICAgICAgICAgICAvc2FmYXJpXFxzKGxpbmUpXFwvKFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMaW5lIEFwcCBmb3IgaU9TXG4gICAgICAgICAgICAvXFxiKGxpbmUpXFwvKFtcXHdcXC5dKylcXC9pYWIvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGluZSBBcHAgZm9yIEFuZHJvaWRcbiAgICAgICAgICAgIC8oY2hyb21pdW18aW5zdGFncmFtKVtcXC9cXHNdKFtcXHdcXC4tXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENocm9taXVtL0luc3RhZ3JhbVxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvXFxiZ3NhXFwvKFtcXHdcXC5dKylcXHMuKnNhZmFyaVxcLy9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdvb2dsZSBTZWFyY2ggQXBwbGlhbmNlIG9uIGlPU1xuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnR1NBJ11dLCBbXG5cbiAgICAgICAgICAgIC9oZWFkbGVzc2Nocm9tZSg/OlxcLyhbXFx3XFwuXSspfFxccykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENocm9tZSBIZWFkbGVzc1xuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnQ2hyb21lIEhlYWRsZXNzJ11dLCBbXG5cbiAgICAgICAgICAgIC9cXHN3dlxcKS4rKGNocm9tZSlcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaHJvbWUgV2ViVmlld1xuICAgICAgICAgICAgXSwgW1tOQU1FLCAnQ2hyb21lIFdlYlZpZXcnXSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgL2Ryb2lkLitcXHN2ZXJzaW9uXFwvKFtcXHdcXC5dKylcXGIuKyg/Om1vYmlsZVxcc3NhZmFyaXxzYWZhcmkpL2kgICAgICAgICAvLyBBbmRyb2lkIEJyb3dzZXJcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ0FuZHJvaWQgQnJvd3NlciddXSwgW1xuXG4gICAgICAgICAgICAvKGNocm9tZXxvbW5pd2VifGFyb3JhfFt0aXplbm9rYV17NX1cXHM/YnJvd3NlcilcXC92PyhbXFx3XFwuXSspL2kgICAgICAvLyBDaHJvbWUvT21uaVdlYi9Bcm9yYS9UaXplbi9Ob2tpYVxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC92ZXJzaW9uXFwvKFtcXHdcXC5dKylcXHMuKm1vYmlsZVxcL1xcdytcXHMoc2FmYXJpKS9pICAgICAgICAgICAgICAgICAgICAgIC8vIE1vYmlsZSBTYWZhcmlcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ01vYmlsZSBTYWZhcmknXV0sIFtcbiAgICAgICAgICAgIC92ZXJzaW9uXFwvKFtcXHdcXC5dKylcXHMuKihtb2JpbGVcXHM/c2FmYXJpfHNhZmFyaSkvaSAgICAgICAgICAgICAgICAgICAvLyBTYWZhcmkgJiBTYWZhcmkgTW9iaWxlXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgTkFNRV0sIFtcbiAgICAgICAgICAgIC93ZWJraXQuKz8obW9iaWxlXFxzP3NhZmFyaXxzYWZhcmkpKFxcL1tcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgIC8vIFNhZmFyaSA8IDMuMFxuICAgICAgICAgICAgXSwgW05BTUUsIFtWRVJTSU9OLCBtYXBwZXIuc3RyLCBtYXBzLmJyb3dzZXIub2xkU2FmYXJpLnZlcnNpb25dXSwgW1xuXG4gICAgICAgICAgICAvKHdlYmtpdHxraHRtbClcXC8oW1xcd1xcLl0rKS9pXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLy8gR2Vja28gYmFzZWRcbiAgICAgICAgICAgIC8obmF2aWdhdG9yfG5ldHNjYXBlKVxcLyhbXFx3XFwuLV0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmV0c2NhcGVcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ05ldHNjYXBlJ10sIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvaWxlXFxzdnI7XFxzcnY6KFtcXHdcXC5dKylcXCkuK2ZpcmVmb3gvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyZWZveCBSZWFsaXR5XG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdGaXJlZm94IFJlYWxpdHknXV0sIFtcbiAgICAgICAgICAgIC9la2lvaGYuKyhmbG93KVxcLyhbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmxvd1xuICAgICAgICAgICAgLyhzd2lmdGZveCkvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTd2lmdGZveFxuICAgICAgICAgICAgLyhpY2VkcmFnb258aWNld2Vhc2VsfGNhbWlub3xjaGltZXJhfGZlbm5lY3xtYWVtb1xcc2Jyb3dzZXJ8bWluaW1vfGNvbmtlcm9yKVtcXC9cXHNdPyhbXFx3XFwuXFwrXSspL2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEljZURyYWdvbi9JY2V3ZWFzZWwvQ2FtaW5vL0NoaW1lcmEvRmVubmVjL01hZW1vL01pbmltby9Db25rZXJvclxuICAgICAgICAgICAgLyhmaXJlZm94fHNlYW1vbmtleXxrLW1lbGVvbnxpY2VjYXR8aWNlYXBlfGZpcmViaXJkfHBob2VuaXh8cGFsZW1vb258YmFzaWxpc2t8d2F0ZXJmb3gpXFwvKFtcXHdcXC4tXSspJC9pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJlZm94L1NlYU1vbmtleS9LLU1lbGVvbi9JY2VDYXQvSWNlQXBlL0ZpcmViaXJkL1Bob2VuaXhcbiAgICAgICAgICAgIC8oZmlyZWZveClcXC8oW1xcd1xcLl0rKVxcc1tcXHdcXHNcXC1dK1xcL1tcXHdcXC5dKyQvaSwgICAgICAgICAgICAgICAgICAgICAgIC8vIE90aGVyIEZpcmVmb3gtYmFzZWRcbiAgICAgICAgICAgIC8obW96aWxsYSlcXC8oW1xcd1xcLl0rKVxccy4rcnZcXDouK2dlY2tvXFwvXFxkKy9pLCAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1vemlsbGFcblxuICAgICAgICAgICAgLy8gT3RoZXJcbiAgICAgICAgICAgIC8ocG9sYXJpc3xseW54fGRpbGxvfGljYWJ8ZG9yaXN8YW1heWF8dzNtfG5ldHN1cmZ8c2xlaXBuaXIpW1xcL1xcc10/KFtcXHdcXC5dKykvaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUG9sYXJpcy9MeW54L0RpbGxvL2lDYWIvRG9yaXMvQW1heWEvdzNtL05ldFN1cmYvU2xlaXBuaXJcbiAgICAgICAgICAgIC8obGlua3MpXFxzXFwoKFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExpbmtzXG4gICAgICAgICAgICAvKGdvYnJvd3NlcilcXC8/KFtcXHdcXC5dKikvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdvQnJvd3NlclxuICAgICAgICAgICAgLyhpY2VcXHM/YnJvd3NlcilcXC92PyhbXFx3XFwuX10rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUNFIEJyb3dzZXJcbiAgICAgICAgICAgIC8obW9zYWljKVtcXC9cXHNdKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1vc2FpY1xuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dXG4gICAgICAgIF0sXG5cbiAgICAgICAgY3B1IDogW1tcblxuICAgICAgICAgICAgLyg/OihhbWR8eCg/Oig/Ojg2fDY0KVtfLV0pP3x3b3d8d2luKTY0KVs7XFwpXS9pICAgICAgICAgICAgICAgICAgICAgLy8gQU1ENjQgKHg2NClcbiAgICAgICAgICAgIF0sIFtbQVJDSElURUNUVVJFLCAnYW1kNjQnXV0sIFtcblxuICAgICAgICAgICAgLyhpYTMyKD89OykpL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJQTMyIChxdWlja3RpbWUpXG4gICAgICAgICAgICBdLCBbW0FSQ0hJVEVDVFVSRSwgdXRpbC5sb3dlcml6ZV1dLCBbXG5cbiAgICAgICAgICAgIC8oKD86aVszNDZdfHgpODYpWztcXCldL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElBMzIgKHg4NilcbiAgICAgICAgICAgIF0sIFtbQVJDSElURUNUVVJFLCAnaWEzMiddXSwgW1xuXG4gICAgICAgICAgICAvXFxiKGFhcmNoNjR8YXJtdj84ZT9sPylcXGIvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQVJNNjRcbiAgICAgICAgICAgIF0sIFtbQVJDSElURUNUVVJFLCAnYXJtNjQnXV0sIFtcblxuICAgICAgICAgICAgL1xcYihhcm0oPzp2WzY3XSk/aHQ/bj9bZmxdcD8pXFxiL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFSTUhGXG4gICAgICAgICAgICBdLCBbW0FSQ0hJVEVDVFVSRSwgJ2FybWhmJ11dLCBbXG5cbiAgICAgICAgICAgIC8vIFBvY2tldFBDIG1pc3Rha2VubHkgaWRlbnRpZmllZCBhcyBQb3dlclBDXG4gICAgICAgICAgICAvd2luZG93c1xccyhjZXxtb2JpbGUpO1xcc3BwYzsvaVxuICAgICAgICAgICAgXSwgW1tBUkNISVRFQ1RVUkUsICdhcm0nXV0sIFtcblxuICAgICAgICAgICAgLygoPzpwcGN8cG93ZXJwYykoPzo2NCk/KSg/Olxcc21hY3w7fFxcKSkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBvd2VyUENcbiAgICAgICAgICAgIF0sIFtbQVJDSElURUNUVVJFLCAvb3dlci8sICcnLCB1dGlsLmxvd2VyaXplXV0sIFtcblxuICAgICAgICAgICAgLyhzdW40XFx3KVs7XFwpXS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNQQVJDXG4gICAgICAgICAgICBdLCBbW0FSQ0hJVEVDVFVSRSwgJ3NwYXJjJ11dLCBbXG5cbiAgICAgICAgICAgIC8oKD86YXZyMzJ8aWE2NCg/PTspKXw2OGsoPz1cXCkpfFxcYmFybSg/OjY0fCg/PXYoPzpbMS03XXxbNS03XTEpbD98O3xlYWJpKSl8KD89YXRtZWxcXHMpYXZyfCg/OmlyaXh8bWlwc3xzcGFyYykoPzo2NCk/XFxifHBhLXJpc2MpL2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUE2NCwgNjhLLCBBUk0vNjQsIEFWUi8zMiwgSVJJWC82NCwgTUlQUy82NCwgU1BBUkMvNjQsIFBBLVJJU0NcbiAgICAgICAgICAgIF0sIFtbQVJDSElURUNUVVJFLCB1dGlsLmxvd2VyaXplXV1cbiAgICAgICAgXSxcblxuICAgICAgICBkZXZpY2UgOiBbW1xuXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgLy8gTU9CSUxFUyAmIFRBQkxFVFNcbiAgICAgICAgICAgIC8vIE9yZGVyZWQgYnkgcG9wdWxhcml0eVxuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICAvLyBTYW1zdW5nXG4gICAgICAgICAgICAvXFxiKHNjaC1pWzg5XTBcXGR8c2h3LW0zODBzfHNtLVtwdF1cXHd7Miw0fXxndC1bcG5dXFxkezIsNH18c2doLXQ4WzU2XTl8bmV4dXNcXHMxMCkvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnU2Ftc3VuZyddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9cXGIoKD86c1tjZ3BdaHxndHxzbSktXFx3K3xnYWxheHlcXHNuZXh1cykvaSxcbiAgICAgICAgICAgIC9cXHNzYW1zdW5nW1xccy1dKFtcXHctXSspL2ksXG4gICAgICAgICAgICAvc2VjLShzZ2hcXHcrKS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdTYW1zdW5nJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBBcHBsZVxuICAgICAgICAgICAgL1xcKChpcCg/OmhvbmV8b2QpW1xcc1xcd10qKTsvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpUG9kL2lQaG9uZVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnQXBwbGUnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG4gICAgICAgICAgICAvXFwoKGlwYWQpO1tcXHdcXHNcXCksOy1dK2FwcGxlL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpUGFkXG4gICAgICAgICAgICAvYXBwbGVjb3JlbWVkaWFcXC9bXFx3XFwuXStcXHNcXCgoaXBhZCkvaSxcbiAgICAgICAgICAgIC9cXGIoaXBhZClcXGRcXGQ/LFxcZFxcZD9bO1xcXV0uK2lvcy9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdBcHBsZSddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgLy8gSHVhd2VpXG4gICAgICAgICAgICAvXFxiKCg/OmFncnxhZ3NbMjNdfGJhaDI/fHNodD8pLWE/W2x3XVxcZHsyfSkvaSxcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0h1YXdlaSddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9kXFwvaHVhd2VpKFtcXHdcXHMtXSspWztcXCldL2ksXG4gICAgICAgICAgICAvXFxiKG5leHVzXFxzNnB8dm9nLVthdF0/bFxcZFxcZHxhbmUtW2F0XT9sW3hcXGRdXFxkfGVtbC1hP2xcXGRcXGRhP3xseWEtW2F0XT9sXFxkW1xcZGNdfGNsdC1hP2xcXGRcXGRpP3xlbGUtbFxcZFxcZCkvaSxcbiAgICAgICAgICAgIC9cXGIoXFx3ezIsNH0tW2F0dV1bbG5dWzAxMjU5XVswMTldKVs7XFwpXFxzXS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdIdWF3ZWknXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8vIFhpYW9taVxuICAgICAgICAgICAgL1xcYihwb2NvW1xcc1xcd10rKSg/Olxcc2J1aWxkfFxcKSkvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFhpYW9taSBQT0NPXG4gICAgICAgICAgICAvXFxiO1xccyhcXHcrKVxcc2J1aWxkXFwvaG1cXDEvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFhpYW9taSBIb25nbWkgJ251bWVyaWMnIG1vZGVsc1xuICAgICAgICAgICAgL1xcYihobVtcXHNcXC1fXT9ub3RlP1tcXHNfXT8oPzpcXGRcXHcpPylcXHNidWlsZC9pLCAgICAgICAgICAgICAgICAgICAgICAgLy8gWGlhb21pIEhvbmdtaVxuICAgICAgICAgICAgL1xcYihyZWRtaVtcXHNcXC1fXT8oPzpub3RlfGspP1tcXHdcXHNfXSspKD86XFxzYnVpbGR8XFwpKS9pLCAgICAgICAgICAgICAgLy8gWGlhb21pIFJlZG1pXG4gICAgICAgICAgICAvXFxiKG1pW1xcc1xcLV9dPyg/OmFcXGR8b25lfG9uZVtcXHNfXXBsdXN8bm90ZSBsdGUpP1tcXHNfXT8oPzpcXGQ/XFx3PylbXFxzX10/KD86cGx1cyk/KVxcc2J1aWxkL2kgIC8vIFhpYW9taSBNaVxuICAgICAgICAgICAgXSwgW1tNT0RFTCwgL18vZywgJyAnXSwgW1ZFTkRPUiwgJ1hpYW9taSddLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9cXGIobWlbXFxzXFwtX10/KD86cGFkKSg/OltcXHdcXHNfXSspKSg/Olxcc2J1aWxkfFxcKSkvaSAgICAgICAgICAgICAgICAgIC8vIE1pIFBhZCB0YWJsZXRzXG4gICAgICAgICAgICBdLFtbTU9ERUwsIC9fL2csICcgJ10sIFtWRU5ET1IsICdYaWFvbWknXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC8vIE9QUE9cbiAgICAgICAgICAgIC87XFxzKFxcdyspXFxzYnVpbGQuK1xcc29wcG8vaSxcbiAgICAgICAgICAgIC9cXHMoY3BoWzEyXVxcZHszfXxwKD86YWZ8Y1thbF18ZFxcd3xlW2FyXSlbbXRdXFxkMHx4OTAwNylcXGIvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnT1BQTyddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gVml2b1xuICAgICAgICAgICAgL1xcc3Zpdm9cXHMoXFx3KykoPzpcXHNidWlsZHxcXCkpL2ksXG4gICAgICAgICAgICAvXFxzKHZbMTJdXFxkezN9XFx3P1thdF0pKD86XFxzYnVpbGR8OykvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnVml2byddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gUmVhbG1lXG4gICAgICAgICAgICAvXFxzKHJteFsxMl1cXGR7M30pKD86XFxzYnVpbGR8OykvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnUmVhbG1lJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBNb3Rvcm9sYVxuICAgICAgICAgICAgL1xccyhtaWxlc3RvbmV8ZHJvaWQoPzpbMi00eF18XFxzKD86YmlvbmljfHgyfHByb3xyYXpyKSk/Oj8oXFxzNGcpPylcXGJbXFx3XFxzXStidWlsZFxcLy9pLFxuICAgICAgICAgICAgL1xcc21vdCg/Om9yb2xhKT9bXFxzLV0oXFx3KikvaSxcbiAgICAgICAgICAgIC8oKD86bW90b1tcXHNcXHdcXChcXCldK3x4dFxcZHszLDR9fG5leHVzXFxzNikoPz1cXHNidWlsZHxcXCkpKS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdNb3Rvcm9sYSddLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9cXHMobXo2MFxcZHx4b29tW1xcczJdezAsMn0pXFxzYnVpbGRcXC8vaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnTW90b3JvbGEnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC8vIExHXG4gICAgICAgICAgICAvKCg/PWxnKT9bdmxda1xcLT9cXGR7M30pXFxzYnVpbGR8XFxzM1xcLltcXHNcXHc7LV17MTB9bGc/LShbMDZjdjldezMsNH0pL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0xHJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgLyhsbS0/ZjEwMFtudl0/fG5leHVzXFxzWzQ1XSkvaSxcbiAgICAgICAgICAgIC9sZ1tlO1xcc1xcLy1dKygoPyFicm93c2VyfG5ldGNhc3QpXFx3KykvaSxcbiAgICAgICAgICAgIC9cXGJsZyhcXC0/W1xcZFxcd10rKVxcc2J1aWxkL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0xHJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBMZW5vdm9cbiAgICAgICAgICAgIC8oaWRlYXRhYltcXHdcXC1cXHNdKykvaSxcbiAgICAgICAgICAgIC9sZW5vdm9cXHM/KHMoPzo1MDAwfDYwMDApKD86W1xcdy1dKyl8dGFiKD86W1xcc1xcd10rKXx5dFtcXGRcXHctXXs2fXx0YltcXGRcXHctXXs2fSkvaSAgICAgICAgLy8gTGVub3ZvIHRhYmxldHNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0xlbm92byddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgLy8gTm9raWFcbiAgICAgICAgICAgIC8oPzptYWVtb3xub2tpYSkuKihuOTAwfGx1bWlhXFxzXFxkKykvaSxcbiAgICAgICAgICAgIC9ub2tpYVtcXHNfLV0/KFtcXHdcXC4tXSopL2lcbiAgICAgICAgICAgIF0sIFtbTU9ERUwsIC9fL2csICcgJ10sIFtWRU5ET1IsICdOb2tpYSddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gR29vZ2xlXG4gICAgICAgICAgICAvZHJvaWQuKztcXHMocGl4ZWxcXHNjKVtcXHMpXS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdvb2dsZSBQaXhlbCBDXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdHb29nbGUnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvZHJvaWQuKztcXHMocGl4ZWxbXFxzXFxkYXhsXXswLDZ9KSg/Olxcc2J1aWxkfFxcKSkvaSAgICAgICAgICAgICAgICAgICAgLy8gR29vZ2xlIFBpeGVsXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdHb29nbGUnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8vIFNvbnlcbiAgICAgICAgICAgIC9kcm9pZC4rXFxzKFtjLWddXFxkezR9fHNvWy1sXVxcdyt8eHEtYVxcd1s0LTddWzEyXSkoPz1cXHNidWlsZFxcL3xcXCkuK2Nocm9tZVxcLyg/IVsxLTZdezAsMX1cXGRcXC4pKS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdTb255J10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgL3NvbnlcXHN0YWJsZXRcXHNbcHNdXFxzYnVpbGRcXC8vaSxcbiAgICAgICAgICAgIC8oPzpzb255KT9zZ3BcXHcrKD86XFxzYnVpbGRcXC98XFwpKS9pXG4gICAgICAgICAgICBdLCBbW01PREVMLCAnWHBlcmlhIFRhYmxldCddLCBbVkVORE9SLCAnU29ueSddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgLy8gT25lUGx1c1xuICAgICAgICAgICAgL1xccyhrYjIwMDV8aW4yMFsxMl01fGJlMjBbMTJdWzU5XSlcXGIvaSxcbiAgICAgICAgICAgIC9cXGJhMDAwKDEpXFxzYnVpbGQvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmVQbHVzXG4gICAgICAgICAgICAvXFxib25lcGx1c1xccyhhXFxkezR9KVtcXHMpXS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdPbmVQbHVzJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBBbWF6b25cbiAgICAgICAgICAgIC8oYWxleGEpd2VibS9pLFxuICAgICAgICAgICAgLyhrZlthLXpdezJ9d2kpKFxcc2J1aWxkXFwvfFxcKSkvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBLaW5kbGUgRmlyZSB3aXRob3V0IFNpbGtcbiAgICAgICAgICAgIC8oa2ZbYS16XSspKFxcc2J1aWxkXFwvfFxcKSkuK3NpbGtcXC8vaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtpbmRsZSBGaXJlIEhEXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdBbWF6b24nXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvKHNkfGtmKVswMzQ5aGlqb3JzdHV3XSsoXFxzYnVpbGRcXC98XFwpKS4rc2lsa1xcLy9pICAgICAgICAgICAgICAgICAgICAvLyBGaXJlIFBob25lXG4gICAgICAgICAgICBdLCBbW01PREVMLCAnRmlyZSBQaG9uZSddLCBbVkVORE9SLCAnQW1hem9uJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBCbGFja0JlcnJ5XG4gICAgICAgICAgICAvXFwoKHBsYXlib29rKTtbXFx3XFxzXFwpLDstXSsocmltKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCbGFja0JlcnJ5IFBsYXlCb29rXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFZFTkRPUiwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvKCg/OmJiW2EtZl18c3RbaHZdKTEwMC1cXGQpL2ksXG4gICAgICAgICAgICAvXFwoYmIxMDtcXHMoXFx3KykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrQmVycnkgMTBcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0JsYWNrQmVycnknXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8vIEFzdXNcbiAgICAgICAgICAgIC8oPzpcXGJ8YXN1c18pKHRyYW5zZm9bcHJpbWVcXHNdezQsMTB9XFxzXFx3K3xlZWVwY3xzbGlkZXJcXHNcXHcrfG5leHVzXFxzN3xwYWRmb25lfHAwMFtjal0pL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0FTVVMnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvXFxzKHpbZXNdNlswMjddWzAxXVtrbV1bbHNdfHplbmZvbmVcXHNcXGRcXHc/KVxcYi9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdBU1VTJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBIVENcbiAgICAgICAgICAgIC8obmV4dXNcXHM5KS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhUQyBOZXh1cyA5XG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdIVEMnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvKGh0YylbO19cXHMtXXsxLDJ9KFtcXHdcXHNdKyg/PVxcKXxcXHNidWlsZCl8XFx3KykvaSwgICAgICAgICAgICAgICAgICAgIC8vIEhUQ1xuXG4gICAgICAgICAgICAvLyBaVEVcbiAgICAgICAgICAgIC8oenRlKS0oXFx3KikvaSxcbiAgICAgICAgICAgIC8oYWxjYXRlbHxnZWVrc3Bob25lfG5leGlhbnxwYW5hc29uaWN8KD89O1xccylzb255KVtfXFxzLV0/KFtcXHctXSopL2kgLy8gQWxjYXRlbC9HZWVrc1Bob25lL05leGlhbi9QYW5hc29uaWMvU29ueVxuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgW01PREVMLCAvXy9nLCAnICddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gQWNlclxuICAgICAgICAgICAgL2Ryb2lkW3hcXGRcXC5cXHM7XStcXHMoW2FiXVsxLTddXFwtP1swMTc4YV1cXGRcXGQ/KS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdBY2VyJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvLyBNZWl6dVxuICAgICAgICAgICAgL2Ryb2lkLis7XFxzKG1bMS01XVxcc25vdGUpXFxzYnVpbGQvaSxcbiAgICAgICAgICAgIC9cXGJtei0oW1xcdy1dezIsfSkvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnTWVpenUnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8vIE1JWEVEXG4gICAgICAgICAgICAvKGJsYWNrYmVycnl8YmVucXxwYWxtKD89XFwtKXxzb255ZXJpY3Nzb258YWNlcnxhc3VzfGRlbGx8bWVpenV8bW90b3JvbGF8cG9seXRyb24pW1xcc18tXT8oW1xcdy1dKikvaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2tCZXJyeS9CZW5RL1BhbG0vU29ueS1Fcmljc3Nvbi9BY2VyL0FzdXMvRGVsbC9NZWl6dS9Nb3Rvcm9sYS9Qb2x5dHJvblxuICAgICAgICAgICAgLyhocClcXHMoW1xcd1xcc10rXFx3KS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSFAgaVBBUVxuICAgICAgICAgICAgLyhhc3VzKS0/KFxcdyspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXN1c1xuICAgICAgICAgICAgLyhtaWNyb3NvZnQpO1xccyhsdW1pYVtcXHNcXHddKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNaWNyb3NvZnQgTHVtaWFcbiAgICAgICAgICAgIC8obGVub3ZvKVtfXFxzLV0/KFtcXHctXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMZW5vdm9cbiAgICAgICAgICAgIC9saW51eDsuKyhqb2xsYSk7L2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSm9sbGFcbiAgICAgICAgICAgIC9kcm9pZC4rO1xccyhvcHBvKVxccz8oW1xcd1xcc10rKVxcc2J1aWxkL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPUFBPXG4gICAgICAgICAgICBdLCBbVkVORE9SLCBNT0RFTCwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8oYXJjaG9zKVxccyhnYW1lcGFkMj8pL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFyY2hvc1xuICAgICAgICAgICAgLyhocCkuKyh0b3VjaHBhZCg/IS4rdGFibGV0KXx0YWJsZXQpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIUCBUb3VjaFBhZFxuICAgICAgICAgICAgLyhraW5kbGUpXFwvKFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBLaW5kbGVcbiAgICAgICAgICAgIC9cXHMobm9vaylbXFx3XFxzXStidWlsZFxcLyhcXHcrKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb29rXG4gICAgICAgICAgICAvKGRlbGwpXFxzKHN0cmVhW2twclxcc1xcZF0qW1xcZGtvXSkvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWxsIFN0cmVha1xuICAgICAgICAgICAgL1s7XFwvXVxccz8obGVbXFxzXFwtXStwYW4pW1xcc1xcLV0rKFxcd3sxLDl9KVxcc2J1aWxkL2ksICAgICAgICAgICAgICAgICAgIC8vIExlIFBhbiBUYWJsZXRzXG4gICAgICAgICAgICAvWztcXC9dXFxzPyh0cmluaXR5KVtcXC1cXHNdKih0XFxkezN9KVxcc2J1aWxkL2ksICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyaW5pdHkgVGFibGV0c1xuICAgICAgICAgICAgL1xcYihnaWdhc2V0KVtcXHNcXC1dKyhxXFx3ezEsOX0pXFxzYnVpbGQvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdpZ2FzZXQgVGFibGV0c1xuICAgICAgICAgICAgL1xcYih2b2RhZm9uZSlcXHMoW1xcd1xcc10rKSg/OlxcKXxcXHNidWlsZCkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWb2RhZm9uZVxuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgTU9ERUwsIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvXFxzKHN1cmZhY2VcXHNkdW8pXFxzL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1cmZhY2UgRHVvXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdNaWNyb3NvZnQnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvZHJvaWRcXHNbXFxkXFwuXSs7XFxzKGZwXFxkdT8pXFxzYnVpbGQvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnRmFpcnBob25lJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgL1xccyh1MzA0YWEpXFxzYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFUJlRcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0FUJlQnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG4gICAgICAgICAgICAvc2llLShcXHcqKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaWVtZW5zXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdTaWVtZW5zJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgL1s7XFwvXVxccz8ocmN0XFx3KylcXHNidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUkNBIFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ1JDQSddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9bO1xcL1xcc10odmVudWVbXFxkXFxzXXsyLDd9KVxcc2J1aWxkL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWxsIFZlbnVlIFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0RlbGwnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvWztcXC9dXFxzPyhxKD86bXZ8dGEpXFx3KylcXHNidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpem9uIFRhYmxldFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnVmVyaXpvbiddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9bO1xcL11cXHMoPzpiYXJuZXNbJlxcc10rbm9ibGVcXHN8Ym5bcnRdKShbXFx3XFxzXFwrXSopXFxzYnVpbGQvaSAgICAgICAgICAvLyBCYXJuZXMgJiBOb2JsZSBUYWJsZXRcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0Jhcm5lcyAmIE5vYmxlJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL1s7XFwvXVxccyh0bVxcZHszfVxcdyspXFxzYnVpbGQvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnTnVWaXNpb24nXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvO1xccyhrODgpXFxzYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gWlRFIEsgU2VyaWVzIFRhYmxldFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnWlRFJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgLztcXHMobnhcXGR7M31qKVxcc2J1aWxkL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBaVEUgTnViaWFcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ1pURSddLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9bO1xcL11cXHM/KGdlblxcZHszfSlcXHNidWlsZC4qNDloL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN3aXNzIEdFTiBNb2JpbGVcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ1N3aXNzJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgL1s7XFwvXVxccz8oenVyXFxkezN9KVxcc2J1aWxkL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3dpc3MgWlVSIFRhYmxldFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnU3dpc3MnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvWztcXC9dXFxzPygoemVraSk/dGIuKlxcYilcXHNidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBaZWtpIFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ1pla2knXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvWztcXC9dXFxzKFt5cl1cXGR7Mn0pXFxzYnVpbGQvaSxcbiAgICAgICAgICAgIC9bO1xcL11cXHMoZHJhZ29uW1xcLVxcc10rdG91Y2hcXHN8ZHQpKFxcd3s1fSlcXHNidWlsZC9pICAgICAgICAgICAgICAgICAgIC8vIERyYWdvbiBUb3VjaCBUYWJsZXRcbiAgICAgICAgICAgIF0sIFtbVkVORE9SLCAnRHJhZ29uIFRvdWNoJ10sIE1PREVMLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9bO1xcL11cXHM/KG5zLT9cXHd7MCw5fSlcXHNidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluc2lnbmlhIFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0luc2lnbmlhJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL1s7XFwvXVxccz8oKG54YXxOZXh0KS0/XFx3ezAsOX0pXFxzYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmV4dEJvb2sgVGFibGV0c1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnTmV4dEJvb2snXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvWztcXC9dXFxzPyh4dHJlbWVcXF8pPyh2KDFbMDQ1XXwyWzAxNV18WzM0NjldMHw3WzA1XSkpXFxzYnVpbGQvaVxuICAgICAgICAgICAgXSwgW1tWRU5ET1IsICdWb2ljZSddLCBNT0RFTCwgW1RZUEUsIE1PQklMRV1dLCBbICAgICAgICAgICAgICAgICAgICAvLyBWb2ljZSBYdHJlbWUgUGhvbmVzXG4gICAgICAgICAgICAvWztcXC9dXFxzPyhsdnRlbFxcLSk/KHYxWzEyXSlcXHNidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMdlRlbCBQaG9uZXNcbiAgICAgICAgICAgIF0sIFtbVkVORE9SLCAnTHZUZWwnXSwgTU9ERUwsIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgLztcXHMocGgtMSlcXHMvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnRXNzZW50aWFsJ10sIFtUWVBFLCBNT0JJTEVdXSwgWyAgICAgICAgICAgICAgICAvLyBFc3NlbnRpYWwgUEgtMVxuICAgICAgICAgICAgL1s7XFwvXVxccz8odigxMDBtZHw3MDBuYXw3MDExfDkxN2cpLipcXGIpXFxzYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgLy8gRW52aXplbiBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdFbnZpemVuJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL1s7XFwvXVxccz8odHJpb1tcXHNcXHdcXC1cXC5dKylcXHNidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFjaFNwZWVkIFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ01hY2hTcGVlZCddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9bO1xcL11cXHM/dHVfKDE0OTEpXFxzYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUm90b3IgVGFibGV0c1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnUm90b3InXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvKHNoaWVsZFtcXHdcXHNdKylcXHNidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE52aWRpYSBTaGllbGQgVGFibGV0c1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnTnZpZGlhJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgLyhzcHJpbnQpXFxzKFxcdyspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNwcmludCBQaG9uZXNcbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC8oa2luXFwuW29uZXR3XXszfSkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pY3Jvc29mdCBLaW5cbiAgICAgICAgICAgIF0sIFtbTU9ERUwsIC9cXC4vZywgJyAnXSwgW1ZFTkRPUiwgJ01pY3Jvc29mdCddLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9kcm9pZFxcc1tcXGRcXC5dKztcXHMoY2M2NjY2P3xldDVbMTZdfG1jWzIzOV1bMjNdeD98dmM4WzAzXXg/KVxcKS9pICAgICAvLyBaZWJyYVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnWmVicmEnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvZHJvaWRcXHNbXFxkXFwuXSs7XFxzKGVjMzB8cHMyMHx0Y1syLThdXFxkW2t4XSlcXCkvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnWmVicmEnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgIC8vIENPTlNPTEVTXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgICAgIC9cXHMob3V5YSlcXHMvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPdXlhXG4gICAgICAgICAgICAvKG5pbnRlbmRvKVxccyhbd2lkczN1dGNoXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOaW50ZW5kb1xuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgTU9ERUwsIFtUWVBFLCBDT05TT0xFXV0sIFtcbiAgICAgICAgICAgIC9kcm9pZC4rO1xccyhzaGllbGQpXFxzYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOdmlkaWFcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ052aWRpYSddLCBbVFlQRSwgQ09OU09MRV1dLCBbXG4gICAgICAgICAgICAvKHBsYXlzdGF0aW9uXFxzWzM0NXBvcnRhYmxldmldKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQbGF5c3RhdGlvblxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnU29ueSddLCBbVFlQRSwgQ09OU09MRV1dLCBbXG4gICAgICAgICAgICAvW1xcc1xcKDtdKHhib3goPzpcXHNvbmUpPyg/ITtcXHN4Ym94KSlbXFxzXFwpO10vaSAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pY3Jvc29mdCBYYm94XG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdNaWNyb3NvZnQnXSwgW1RZUEUsIENPTlNPTEVdXSwgW1xuXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAvLyBTTUFSVFRWU1xuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICAvc21hcnQtdHYuKyhzYW1zdW5nKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNhbXN1bmdcbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIFtUWVBFLCBTTUFSVFRWXV0sIFtcbiAgICAgICAgICAgIC9oYmJ0di4rbWFwbGU7KFxcZCspL2lcbiAgICAgICAgICAgIF0sIFtbTU9ERUwsIC9eLywgJ1NtYXJ0VFYnXSwgW1ZFTkRPUiwgJ1NhbXN1bmcnXSwgW1RZUEUsIFNNQVJUVFZdXSwgW1xuICAgICAgICAgICAgLyg/OmxpbnV4O1xcc25ldGNhc3QuK3NtYXJ0dHZ8bGdcXHNuZXRjYXN0XFwudHYtMjAxXFxkKS9pLCAgICAgICAgICAgICAgLy8gTEcgU21hcnRUVlxuICAgICAgICAgICAgXSwgW1tWRU5ET1IsICdMRyddLCBbVFlQRSwgU01BUlRUVl1dLCBbXG4gICAgICAgICAgICAvKGFwcGxlKVxccz90di9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBsZSBUVlxuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgW01PREVMLCAnQXBwbGUgVFYnXSwgW1RZUEUsIFNNQVJUVFZdXSwgW1xuICAgICAgICAgICAgL2Nya2V5L2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHb29nbGUgQ2hyb21lY2FzdFxuICAgICAgICAgICAgXSwgW1tNT0RFTCwgJ0Nocm9tZWNhc3QnXSwgW1ZFTkRPUiwgJ0dvb2dsZSddLCBbVFlQRSwgU01BUlRUVl1dLCBbXG4gICAgICAgICAgICAvZHJvaWQuK2FmdChbXFx3XSkoXFxzYnVpbGRcXC98XFwpKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJlIFRWXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdBbWF6b24nXSwgW1RZUEUsIFNNQVJUVFZdXSwgW1xuICAgICAgICAgICAgL1xcKGR0dltcXCk7XS4rKGFxdW9zKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNoYXJwXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdTaGFycCddLCBbVFlQRSwgU01BUlRUVl1dLCBbXG4gICAgICAgICAgICAvaGJidHZcXC9cXGQrXFwuXFxkK1xcLlxcZCtcXHMrXFwoW1xcd1xcc10qO1xccyooXFx3W147XSopOyhbXjtdKikvaSAgICAgICAgICAgIC8vIEhiYlRWIGRldmljZXNcbiAgICAgICAgICAgIF0sIFtbVkVORE9SLCB1dGlsLnRyaW1dLCBbTU9ERUwsIHV0aWwudHJpbV0sIFtUWVBFLCBTTUFSVFRWXV0sIFtcbiAgICAgICAgICAgIC9bXFxzXFwvXFwoXShhbmRyb2lkXFxzfHNtYXJ0Wy1cXHNdP3xvcGVyYVxccyl0dls7XFwpXFxzXS9pICAgICAgICAgICAgICAgICAvLyBTbWFydFRWIGZyb20gVW5pZGVudGlmaWVkIFZlbmRvcnNcbiAgICAgICAgICAgIF0sIFtbVFlQRSwgU01BUlRUVl1dLCBbXG5cbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgIC8vIFdFQVJBQkxFU1xuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICAvKChwZWJibGUpKWFwcFxcL1tcXGRcXC5dK1xccy9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQZWJibGVcbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgV0VBUkFCTEVdXSwgW1xuICAgICAgICAgICAgL2Ryb2lkLis7XFxzKGdsYXNzKVxcc1xcZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHb29nbGUgR2xhc3NcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0dvb2dsZSddLCBbVFlQRSwgV0VBUkFCTEVdXSwgW1xuICAgICAgICAgICAgL2Ryb2lkXFxzW1xcZFxcLl0rO1xccyh3dDYzPzB7MiwzfSlcXCkvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnWmVicmEnXSwgW1RZUEUsIFdFQVJBQkxFXV0sIFtcblxuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgLy8gRU1CRURERURcbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICAgICAgLyh0ZXNsYSkoPzpcXHNxdGNhcmJyb3dzZXJ8XFwvMjBbMTJdXFxkXFwuW1xcd1xcLi1dKykvaSAgICAgICAgICAgICAgICAgICAvLyBUZXNsYVxuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgW1RZUEUsIEVNQkVEREVEXV0sIFtcblxuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgIC8vIE1JWEVEIChHRU5FUklDKVxuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICAvZHJvaWQgLis/OyAoW147XSs/KSg/OiBidWlsZHxcXCkgYXBwbGV3ZWJraXQpLis/IG1vYmlsZSBzYWZhcmkvaSAgICAvLyBBbmRyb2lkIFBob25lcyBmcm9tIFVuaWRlbnRpZmllZCBWZW5kb3JzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgL2Ryb2lkIC4rPztcXHMoW147XSs/KSg/OiBidWlsZHxcXCkgYXBwbGV3ZWJraXQpLis/KD8hIG1vYmlsZSkgc2FmYXJpL2kgIC8vIEFuZHJvaWQgVGFibGV0cyBmcm9tIFVuaWRlbnRpZmllZCBWZW5kb3JzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL1xccyh0YWJsZXR8dGFiKVs7XFwvXS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVuaWRlbnRpZmlhYmxlIFRhYmxldFxuICAgICAgICAgICAgL1xccyhtb2JpbGUpKD86WztcXC9dfFxcc3NhZmFyaSkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVbmlkZW50aWZpYWJsZSBNb2JpbGVcbiAgICAgICAgICAgIF0sIFtbVFlQRSwgdXRpbC5sb3dlcml6ZV1dLCBbXG4gICAgICAgICAgICAvKGFuZHJvaWRbXFx3XFwuXFxzXFwtXXswLDl9KTsuK2J1aWxkL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmljIEFuZHJvaWQgRGV2aWNlXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdHZW5lcmljJ11dLCBbXG4gICAgICAgICAgICAvKHBob25lKS9pXG4gICAgICAgICAgICBdLCBbW1RZUEUsIE1PQklMRV1dXG4gICAgICAgIF0sXG5cbiAgICAgICAgZW5naW5lIDogW1tcblxuICAgICAgICAgICAgL3dpbmRvd3MuK1xcc2VkZ2VcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRWRnZUhUTUxcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ0VkZ2VIVE1MJ11dLCBbXG5cbiAgICAgICAgICAgIC93ZWJraXRcXC81MzdcXC4zNi4rY2hyb21lXFwvKD8hMjcpKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCbGlua1xuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnQmxpbmsnXV0sIFtcblxuICAgICAgICAgICAgLyhwcmVzdG8pXFwvKFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmVzdG9cbiAgICAgICAgICAgIC8od2Via2l0fHRyaWRlbnR8bmV0ZnJvbnR8bmV0c3VyZnxhbWF5YXxseW54fHczbXxnb2FubmEpXFwvKFtcXHdcXC5dKykvaSwgLy8gV2ViS2l0L1RyaWRlbnQvTmV0RnJvbnQvTmV0U3VyZi9BbWF5YS9MeW54L3czbS9Hb2FubmFcbiAgICAgICAgICAgIC9la2lvaChmbG93KVxcLyhbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmxvd1xuICAgICAgICAgICAgLyhraHRtbHx0YXNtYW58bGlua3MpW1xcL1xcc11cXCg/KFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtIVE1ML1Rhc21hbi9MaW5rc1xuICAgICAgICAgICAgLyhpY2FiKVtcXC9cXHNdKFsyM11cXC5bXFxkXFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlDYWJcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvcnZcXDooW1xcd1xcLl17MSw5fSlcXGIuKyhnZWNrbykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHZWNrb1xuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIE5BTUVdXG4gICAgICAgIF0sXG5cbiAgICAgICAgb3MgOiBbW1xuXG4gICAgICAgICAgICAvLyBXaW5kb3dzXG4gICAgICAgICAgICAvbWljcm9zb2Z0XFxzKHdpbmRvd3MpXFxzKHZpc3RhfHhwKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2luZG93cyAoaVR1bmVzKVxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvKHdpbmRvd3MpXFxzbnRcXHM2XFwuMjtcXHMoYXJtKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaW5kb3dzIFJUXG4gICAgICAgICAgICAvKHdpbmRvd3NcXHNwaG9uZSg/Olxcc29zKSopW1xcc1xcL10/KFtcXGRcXC5cXHNcXHddKikvaSwgICAgICAgICAgICAgICAgICAgLy8gV2luZG93cyBQaG9uZVxuICAgICAgICAgICAgLyh3aW5kb3dzXFxzbW9iaWxlfHdpbmRvd3MpW1xcc1xcL10/KFtudGNlXFxkXFwuXFxzXStcXHcpKD8hLit4Ym94KS9pXG4gICAgICAgICAgICBdLCBbTkFNRSwgW1ZFUlNJT04sIG1hcHBlci5zdHIsIG1hcHMub3Mud2luZG93cy52ZXJzaW9uXV0sIFtcbiAgICAgICAgICAgIC8od2luKD89M3w5fG4pfHdpblxcczl4XFxzKShbbnRcXGRcXC5dKykvaVxuICAgICAgICAgICAgXSwgW1tOQU1FLCAnV2luZG93cyddLCBbVkVSU0lPTiwgbWFwcGVyLnN0ciwgbWFwcy5vcy53aW5kb3dzLnZlcnNpb25dXSwgW1xuXG4gICAgICAgICAgICAvLyBpT1MvbWFjT1NcbiAgICAgICAgICAgIC9pcFtob25lYWRdezIsNH1cXGIoPzouKm9zXFxzKFtcXHddKylcXHNsaWtlXFxzbWFjfDtcXHNvcGVyYSkvaSwgICAgICAgICAgLy8gaU9TXG4gICAgICAgICAgICAvY2ZuZXR3b3JrXFwvLitkYXJ3aW4vaVxuICAgICAgICAgICAgXSwgW1tWRVJTSU9OLCAvXy9nLCAnLiddLCBbTkFNRSwgJ2lPUyddXSwgW1xuICAgICAgICAgICAgLyhtYWNcXHNvc1xcc3gpXFxzPyhbXFx3XFxzXFwuXSopL2ksXG4gICAgICAgICAgICAvKG1hY2ludG9zaHxtYWMoPz1fcG93ZXJwYylcXHMpKD8hLitoYWlrdSkvaSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWMgT1NcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ01hYyBPUyddLCBbVkVSU0lPTiwgL18vZywgJy4nXV0sIFtcblxuICAgICAgICAgICAgLy8gTW9iaWxlIE9TZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbmRyb2lkL1dlYk9TL1BhbG0vUU5YL0JhZGEvUklNL01lZUdvL0NvbnRpa2kvU2FpbGZpc2ggT1NcbiAgICAgICAgICAgIC8oYW5kcm9pZHx3ZWJvc3xwYWxtXFxzb3N8cW54fGJhZGF8cmltXFxzdGFibGV0XFxzb3N8bWVlZ298c2FpbGZpc2h8Y29udGlraSlbXFwvXFxzLV0/KFtcXHdcXC5dKikvaSxcbiAgICAgICAgICAgIC8oYmxhY2tiZXJyeSlcXHcqXFwvKFtcXHdcXC5dKikvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrYmVycnlcbiAgICAgICAgICAgIC8odGl6ZW58a2Fpb3MpW1xcL1xcc10oW1xcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRpemVuL0thaU9TXG4gICAgICAgICAgICAvXFwoKHNlcmllczQwKTsvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXJpZXMgNDBcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXSwgW1xuICAgICAgICAgICAgL1xcKGJiKDEwKTsvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2tCZXJyeSAxMFxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnQmxhY2tCZXJyeSddXSwgW1xuICAgICAgICAgICAgLyg/OnN5bWJpYW5cXHM/b3N8c3ltYm9zfHM2MCg/PTspfHNlcmllczYwKVtcXC9cXHMtXT8oW1xcd1xcLl0qKS9pICAgICAgIC8vIFN5bWJpYW5cbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ1N5bWJpYW4nXV0sIFtcbiAgICAgICAgICAgIC9tb3ppbGxhLitcXChtb2JpbGU7LitnZWNrby4rZmlyZWZveC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcmVmb3ggT1NcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ0ZpcmVmb3ggT1MnXV0sIFtcbiAgICAgICAgICAgIC93ZWIwczsuK3J0KHR2KS9pLFxuICAgICAgICAgICAgL1xcYig/OmhwKT93b3MoPzpicm93c2VyKT9cXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2ViT1NcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ3dlYk9TJ11dLCBbXG5cbiAgICAgICAgICAgIC8vIEdvb2dsZSBDaHJvbWVjYXN0XG4gICAgICAgICAgICAvY3JrZXlcXC8oW1xcZFxcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdvb2dsZSBDaHJvbWVjYXN0XG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdDaHJvbWVjYXN0J11dLCBbXG4gICAgICAgICAgICAvKGNyb3MpXFxzW1xcd10rXFxzKFtcXHdcXC5dK1xcdykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENocm9taXVtIE9TXG4gICAgICAgICAgICBdLCBbW05BTUUsICdDaHJvbWl1bSBPUyddLCBWRVJTSU9OXSxbXG5cbiAgICAgICAgICAgIC8vIENvbnNvbGVcbiAgICAgICAgICAgIC8obmludGVuZG98cGxheXN0YXRpb24pXFxzKFt3aWRzMzQ1cG9ydGFibGV2dWNoXSspL2ksICAgICAgICAgICAgICAgIC8vIE5pbnRlbmRvL1BsYXlzdGF0aW9uXG4gICAgICAgICAgICAvKHhib3gpO1xccyt4Ym94XFxzKFteXFwpO10rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pY3Jvc29mdCBYYm94ICgzNjAsIE9uZSwgWCwgUywgU2VyaWVzIFgsIFNlcmllcyBTKVxuXG4gICAgICAgICAgICAvLyBHTlUvTGludXggYmFzZWRcbiAgICAgICAgICAgIC8obWludClbXFwvXFxzXFwoXFwpXT8oXFx3KikvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNaW50XG4gICAgICAgICAgICAvKG1hZ2VpYXx2ZWN0b3JsaW51eClbO1xcc10vaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWdlaWEvVmVjdG9yTGludXhcbiAgICAgICAgICAgIC8oam9saXxba3hsbl0/dWJ1bnR1fGRlYmlhbnxzdXNlfG9wZW5zdXNlfGdlbnRvb3xhcmNoKD89XFxzbGludXgpfHNsYWNrd2FyZXxmZWRvcmF8bWFuZHJpdmF8Y2VudG9zfHBjbGludXhvc3xyZWRoYXR8emVud2Fsa3xsaW5wdXN8cmFzcGJpYW4pKD86XFxzZ251XFwvbGludXgpPyg/Olxcc2xpbnV4KT9bXFwvXFxzLV0/KD8hY2hyb218cGFja2FnZSkoW1xcd1xcLi1dKikvaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSm9saS9VYnVudHUvRGViaWFuL1NVU0UvR2VudG9vL0FyY2gvU2xhY2t3YXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZlZG9yYS9NYW5kcml2YS9DZW50T1MvUENMaW51eE9TL1JlZEhhdC9aZW53YWxrL0xpbnB1c1xuICAgICAgICAgICAgLyhodXJkfGxpbnV4KVxccz8oW1xcd1xcLl0qKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIdXJkL0xpbnV4XG4gICAgICAgICAgICAvKGdudSlcXHM/KFtcXHdcXC5dKikvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdOVVxuXG4gICAgICAgICAgICAvLyBCU0QgYmFzZWRcbiAgICAgICAgICAgIC9cXHMoW2ZyZW50b3BjLV17MCw0fWJzZHxkcmFnb25mbHkpXFxzPyg/IWFtZHxbaXgzNDZdezEsMn04NikoW1xcd1xcLl0qKS9pLCAgLy8gRnJlZUJTRC9OZXRCU0QvT3BlbkJTRC9QQy1CU0QvRHJhZ29uRmx5XG4gICAgICAgICAgICAvKGhhaWt1KVxccyhcXHcrKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGFpa3VcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvLyBPdGhlclxuICAgICAgICAgICAgLyhzdW5vcylcXHM/KFtcXHdcXC5cXGRdKikvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU29sYXJpc1xuICAgICAgICAgICAgXSwgW1tOQU1FLCAnU29sYXJpcyddLCBWRVJTSU9OXSwgW1xuICAgICAgICAgICAgLygoPzpvcGVuKT9zb2xhcmlzKVtcXC9cXHMtXT8oW1xcd1xcLl0qKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU29sYXJpc1xuICAgICAgICAgICAgLyhhaXgpXFxzKChcXGQpKD89XFwufFxcKXxcXHMpW1xcd1xcLl0pKi9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQUlYXG4gICAgICAgICAgICAvKHBsYW5cXHM5fG1pbml4fGJlb3N8b3NcXC8yfGFtaWdhb3N8bW9ycGhvc3xyaXNjXFxzb3N8b3BlbnZtc3xmdWNoc2lhKS9pLCAgLy8gUGxhbjkvTWluaXgvQmVPUy9PUzIvQW1pZ2FPUy9Nb3JwaE9TL1JJU0NPUy9PcGVuVk1TL0Z1Y2hzaWFcbiAgICAgICAgICAgIC8odW5peClcXHM/KFtcXHdcXC5dKikvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVU5JWFxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dXG4gICAgICAgIF1cbiAgICB9O1xuXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIENvbnN0cnVjdG9yXG4gICAgLy8vLy8vLy8vLy8vLy8vL1xuICAgIHZhciBVQVBhcnNlciA9IGZ1bmN0aW9uICh1YSwgZXh0ZW5zaW9ucykge1xuXG4gICAgICAgIGlmICh0eXBlb2YgdWEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBleHRlbnNpb25zID0gdWE7XG4gICAgICAgICAgICB1YSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBVQVBhcnNlcikpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVUFQYXJzZXIodWEsIGV4dGVuc2lvbnMpLmdldFJlc3VsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIF91YSA9IHVhIHx8ICgodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lm5hdmlnYXRvciAmJiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkgPyB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCA6IEVNUFRZKTtcbiAgICAgICAgdmFyIF9yZ3htYXAgPSBleHRlbnNpb25zID8gdXRpbC5leHRlbmQocmVnZXhlcywgZXh0ZW5zaW9ucykgOiByZWdleGVzO1xuXG4gICAgICAgIHRoaXMuZ2V0QnJvd3NlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYnJvd3NlciA9IHsgbmFtZTogdW5kZWZpbmVkLCB2ZXJzaW9uOiB1bmRlZmluZWQgfTtcbiAgICAgICAgICAgIG1hcHBlci5yZ3guY2FsbChfYnJvd3NlciwgX3VhLCBfcmd4bWFwLmJyb3dzZXIpO1xuICAgICAgICAgICAgX2Jyb3dzZXIubWFqb3IgPSB1dGlsLm1ham9yKF9icm93c2VyLnZlcnNpb24pOyAvLyBkZXByZWNhdGVkXG4gICAgICAgICAgICByZXR1cm4gX2Jyb3dzZXI7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0Q1BVID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9jcHUgPSB7IGFyY2hpdGVjdHVyZTogdW5kZWZpbmVkIH07XG4gICAgICAgICAgICBtYXBwZXIucmd4LmNhbGwoX2NwdSwgX3VhLCBfcmd4bWFwLmNwdSk7XG4gICAgICAgICAgICByZXR1cm4gX2NwdTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXREZXZpY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2RldmljZSA9IHsgdmVuZG9yOiB1bmRlZmluZWQsIG1vZGVsOiB1bmRlZmluZWQsIHR5cGU6IHVuZGVmaW5lZCB9O1xuICAgICAgICAgICAgbWFwcGVyLnJneC5jYWxsKF9kZXZpY2UsIF91YSwgX3JneG1hcC5kZXZpY2UpO1xuICAgICAgICAgICAgcmV0dXJuIF9kZXZpY2U7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0RW5naW5lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9lbmdpbmUgPSB7IG5hbWU6IHVuZGVmaW5lZCwgdmVyc2lvbjogdW5kZWZpbmVkIH07XG4gICAgICAgICAgICBtYXBwZXIucmd4LmNhbGwoX2VuZ2luZSwgX3VhLCBfcmd4bWFwLmVuZ2luZSk7XG4gICAgICAgICAgICByZXR1cm4gX2VuZ2luZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRPUyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfb3MgPSB7IG5hbWU6IHVuZGVmaW5lZCwgdmVyc2lvbjogdW5kZWZpbmVkIH07XG4gICAgICAgICAgICBtYXBwZXIucmd4LmNhbGwoX29zLCBfdWEsIF9yZ3htYXAub3MpO1xuICAgICAgICAgICAgcmV0dXJuIF9vcztcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRSZXN1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVhICAgICAgOiB0aGlzLmdldFVBKCksXG4gICAgICAgICAgICAgICAgYnJvd3NlciA6IHRoaXMuZ2V0QnJvd3NlcigpLFxuICAgICAgICAgICAgICAgIGVuZ2luZSAgOiB0aGlzLmdldEVuZ2luZSgpLFxuICAgICAgICAgICAgICAgIG9zICAgICAgOiB0aGlzLmdldE9TKCksXG4gICAgICAgICAgICAgICAgZGV2aWNlICA6IHRoaXMuZ2V0RGV2aWNlKCksXG4gICAgICAgICAgICAgICAgY3B1ICAgICA6IHRoaXMuZ2V0Q1BVKClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0VUEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3VhO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFVBID0gZnVuY3Rpb24gKHVhKSB7XG4gICAgICAgICAgICBfdWEgPSAodHlwZW9mIHVhID09PSBTVFJfVFlQRSAmJiB1YS5sZW5ndGggPiBVQV9NQVhfTEVOR1RIKSA/IHV0aWwudHJpbSh1YSwgVUFfTUFYX0xFTkdUSCkgOiB1YTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFVBKF91YSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBVQVBhcnNlci5WRVJTSU9OID0gTElCVkVSU0lPTjtcbiAgICBVQVBhcnNlci5CUk9XU0VSID0ge1xuICAgICAgICBOQU1FICAgIDogTkFNRSxcbiAgICAgICAgTUFKT1IgICA6IE1BSk9SLCAvLyBkZXByZWNhdGVkXG4gICAgICAgIFZFUlNJT04gOiBWRVJTSU9OXG4gICAgfTtcbiAgICBVQVBhcnNlci5DUFUgPSB7XG4gICAgICAgIEFSQ0hJVEVDVFVSRSA6IEFSQ0hJVEVDVFVSRVxuICAgIH07XG4gICAgVUFQYXJzZXIuREVWSUNFID0ge1xuICAgICAgICBNT0RFTCAgIDogTU9ERUwsXG4gICAgICAgIFZFTkRPUiAgOiBWRU5ET1IsXG4gICAgICAgIFRZUEUgICAgOiBUWVBFLFxuICAgICAgICBDT05TT0xFIDogQ09OU09MRSxcbiAgICAgICAgTU9CSUxFICA6IE1PQklMRSxcbiAgICAgICAgU01BUlRUViA6IFNNQVJUVFYsXG4gICAgICAgIFRBQkxFVCAgOiBUQUJMRVQsXG4gICAgICAgIFdFQVJBQkxFOiBXRUFSQUJMRSxcbiAgICAgICAgRU1CRURERUQ6IEVNQkVEREVEXG4gICAgfTtcbiAgICBVQVBhcnNlci5FTkdJTkUgPSB7XG4gICAgICAgIE5BTUUgICAgOiBOQU1FLFxuICAgICAgICBWRVJTSU9OIDogVkVSU0lPTlxuICAgIH07XG4gICAgVUFQYXJzZXIuT1MgPSB7XG4gICAgICAgIE5BTUUgICAgOiBOQU1FLFxuICAgICAgICBWRVJTSU9OIDogVkVSU0lPTlxuICAgIH07XG5cbiAgICAvLy8vLy8vLy8vL1xuICAgIC8vIEV4cG9ydFxuICAgIC8vLy8vLy8vLy9cblxuXG4gICAgLy8gY2hlY2sganMgZW52aXJvbm1lbnRcbiAgICBpZiAodHlwZW9mKGV4cG9ydHMpICE9PSBVTkRFRl9UWVBFKSB7XG4gICAgICAgIC8vIG5vZGVqcyBlbnZcbiAgICAgICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09IFVOREVGX1RZUEUgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IFVBUGFyc2VyO1xuICAgICAgICB9XG4gICAgICAgIGV4cG9ydHMuVUFQYXJzZXIgPSBVQVBhcnNlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyByZXF1aXJlanMgZW52IChvcHRpb25hbClcbiAgICAgICAgaWYgKHR5cGVvZihkZWZpbmUpID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgICAgIGRlZmluZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFVBUGFyc2VyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIC8vIGJyb3dzZXIgZW52XG4gICAgICAgICAgICB3aW5kb3cuVUFQYXJzZXIgPSBVQVBhcnNlcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGpRdWVyeS9aZXB0byBzcGVjaWZpYyAob3B0aW9uYWwpXG4gICAgLy8gTm90ZTpcbiAgICAvLyAgIEluIEFNRCBlbnYgdGhlIGdsb2JhbCBzY29wZSBzaG91bGQgYmUga2VwdCBjbGVhbiwgYnV0IGpRdWVyeSBpcyBhbiBleGNlcHRpb24uXG4gICAgLy8gICBqUXVlcnkgYWx3YXlzIGV4cG9ydHMgdG8gZ2xvYmFsIHNjb3BlLCB1bmxlc3MgalF1ZXJ5Lm5vQ29uZmxpY3QodHJ1ZSkgaXMgdXNlZCxcbiAgICAvLyAgIGFuZCB3ZSBzaG91bGQgY2F0Y2ggdGhhdC5cbiAgICB2YXIgJCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICh3aW5kb3cualF1ZXJ5IHx8IHdpbmRvdy5aZXB0byk7XG4gICAgaWYgKCQgJiYgISQudWEpIHtcbiAgICAgICAgdmFyIHBhcnNlciA9IG5ldyBVQVBhcnNlcigpO1xuICAgICAgICAkLnVhID0gcGFyc2VyLmdldFJlc3VsdCgpO1xuICAgICAgICAkLnVhLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZXIuZ2V0VUEoKTtcbiAgICAgICAgfTtcbiAgICAgICAgJC51YS5zZXQgPSBmdW5jdGlvbiAodWFzdHJpbmcpIHtcbiAgICAgICAgICAgIHBhcnNlci5zZXRVQSh1YXN0cmluZyk7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gcGFyc2VyLmdldFJlc3VsdCgpO1xuICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAkLnVhW3Byb3BdID0gcmVzdWx0W3Byb3BdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxufSkodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgPyB3aW5kb3cgOiB0aGlzKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUUE7QUFSQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUF3QkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFWQTtBQVlBO0FBQ0E7QUFiQTtBQWVBO0FBQ0E7QUFoQkE7QUFrQkE7QUFDQTtBQW5CQTtBQXFCQTtBQUNBO0FBQ0E7QUFDQTtBQXhCQTtBQTZCQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFDQTtBQXBCQTtBQXNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBbkRBO0FBc0RBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBckVBO0FBMEVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFEQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBREE7QUFkQTtBQTJCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFEQTtBQURBO0FBN0JBO0FBa0RBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUdBO0FBSUE7QUFDQTtBQUVBO0FBTEE7QUFBQTtBQUFBO0FBQUE7QUFTQTtBQUVBO0FBRUE7QUFBQTtBQUtBO0FBTEE7QUFBQTtBQUFBO0FBVUE7QUFWQTtBQUFBO0FBQUE7QUFBQTtBQWVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQUlBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBR0E7QUFBQTtBQUlBO0FBRUE7QUFBQTtBQUFBO0FBSUE7QUFFQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFFQTtBQUtBO0FBQUE7QUFJQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFVQTtBQVZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQW9CQTtBQUFBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFaQTtBQW1CQTtBQUdBO0FBR0E7QUFPQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBUEE7QUFhQTtBQUFBO0FBSUE7QUFqQkE7QUE2QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUUE7QUFFQTtBQUtBO0FBNUNBO0FBcURBO0FBckRBO0FBcUVBO0FBQUE7QUFLQTtBQUtBO0FBQUE7QUFJQTtBQW5GQTtBQTRGQTtBQTVGQTtBQWtHQTtBQUFBO0FBQUE7QUFNQTtBQUVBO0FBQUE7QUFJQTtBQTlHQTtBQXVIQTtBQUFBO0FBT0E7QUFIQTtBQUFBO0FBM0hBO0FBcUlBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVdBO0FBS0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBSUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBR0E7QUFFQTtBQUlBO0FBQUE7QUFJQTtBQUFBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBT0E7QUFDQTtBQUpBO0FBQUE7QUFBQTtBQVFBO0FBRUE7QUFFQTtBQUtBO0FBQ0E7QUFKQTtBQUFBO0FBU0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFLQTtBQUNBO0FBSkE7QUFBQTtBQU9BO0FBT0E7QUFDQTtBQUpBO0FBQUE7QUFVQTtBQUNBO0FBSkE7QUFBQTtBQU9BO0FBRUE7QUFBQTtBQUdBO0FBT0E7QUFBQTtBQUdBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU9BO0FBTUE7QUFBQTtBQUFBO0FBSUE7QUFKQTtBQVVBO0FBVkE7QUFlQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBT0E7QUFFQTtBQUVBO0FBRUE7QUFHQTtBQUFBO0FBSUE7QUFFQTtBQUFBO0FBTUE7QUFOQTtBQUFBO0FBQUE7QUFXQTtBQVhBO0FBQUE7QUFlQTtBQWZBO0FBQUE7QUFBQTtBQWtCQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUE3aEJBO0FBd2lCQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBSkE7QUFDQTtBQUtBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQURBO0FBQ0E7QUFTQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFHQTtBQUNBO0FBMURBO0FBQ0E7QUE0REE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBV0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQU1BO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFBQTtBQURBLGFBT0E7QUFuMkJBO0FBdTJCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQXozQkE7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ua-parser-js/src/ua-parser.js\n");

/***/ }),

/***/ "./src/firebase-config.js":
/*!********************************!*\
  !*** ./src/firebase-config.js ***!
  \********************************/
/*! exports provided: firebaseConfig, vapidKey */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"firebaseConfig\", function() { return firebaseConfig; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"vapidKey\", function() { return vapidKey; });\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ \"../config.js\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(config__WEBPACK_IMPORTED_MODULE_0__);\n\nvar firebaseConfig = {\n  apiKey: config__WEBPACK_IMPORTED_MODULE_0__[\"FIREBASE_API_KEY\"],\n  authDomain: config__WEBPACK_IMPORTED_MODULE_0__[\"FIREBASE_AUTH_DOMAIN\"],\n  projectId: config__WEBPACK_IMPORTED_MODULE_0__[\"FIREBASE_PROJECT_ID\"],\n  storageBucket: config__WEBPACK_IMPORTED_MODULE_0__[\"FIREBASE_STORAGE_BUCKET\"],\n  messagingSenderId: config__WEBPACK_IMPORTED_MODULE_0__[\"FIREBASE_MESSAGING_SENDER_ID\"],\n  appId: config__WEBPACK_IMPORTED_MODULE_0__[\"FIREBASE_APP_ID\"],\n  measurementId: config__WEBPACK_IMPORTED_MODULE_0__[\"FIREBASE_MEASUREMENT_ID\"]\n};\nvar vapidKey = config__WEBPACK_IMPORTED_MODULE_0__[\"FIREBASE_VAPID_KEY\"];//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZmlyZWJhc2UtY29uZmlnLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2ZpcmViYXNlLWNvbmZpZy5qcz9kZmRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEZJUkVCQVNFX0FQSV9LRVksXG4gIEZJUkVCQVNFX0FVVEhfRE9NQUlOLFxuICBGSVJFQkFTRV9QUk9KRUNUX0lELFxuICBGSVJFQkFTRV9TVE9SQUdFX0JVQ0tFVCxcbiAgRklSRUJBU0VfTUVTU0FHSU5HX1NFTkRFUl9JRCxcbiAgRklSRUJBU0VfQVBQX0lELFxuICBGSVJFQkFTRV9NRUFTVVJFTUVOVF9JRCxcbiAgRklSRUJBU0VfVkFQSURfS0VZLFxufSBmcm9tICdjb25maWcnO1xuXG5leHBvcnQgY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XG4gIGFwaUtleTogRklSRUJBU0VfQVBJX0tFWSxcbiAgYXV0aERvbWFpbjogRklSRUJBU0VfQVVUSF9ET01BSU4sXG4gIHByb2plY3RJZDogRklSRUJBU0VfUFJPSkVDVF9JRCxcbiAgc3RvcmFnZUJ1Y2tldDogRklSRUJBU0VfU1RPUkFHRV9CVUNLRVQsXG4gIG1lc3NhZ2luZ1NlbmRlcklkOiBGSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lELFxuICBhcHBJZDogRklSRUJBU0VfQVBQX0lELFxuICBtZWFzdXJlbWVudElkOiBGSVJFQkFTRV9NRUFTVVJFTUVOVF9JRCxcbn07XG5cbmV4cG9ydCBjb25zdCB2YXBpZEtleSA9IEZJUkVCQVNFX1ZBUElEX0tFWTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBVUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/firebase-config.js\n");

/***/ }),

/***/ "./src/push-notifications/fcm-management.js":
/*!**************************************************!*\
  !*** ./src/push-notifications/fcm-management.js ***!
  \**************************************************/
/*! exports provided: addRegistration, removeRegistration, hasRegistration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"addRegistration\", function() { return addRegistration; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"removeRegistration\", function() { return removeRegistration; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"hasRegistration\", function() { return hasRegistration; });\n/*\n * This module is responsible for persisting information about push notification\n * registrations to local storage.\n */\nvar registrations = function registrations() {\n  return JSON.parse(localStorage.getItem('fcm') || '[]');\n};\n\nvar updateRegistrations = function updateRegistrations(data) {\n  localStorage.setItem('fcm', JSON.stringify(data));\n};\n\nvar addRegistration = function addRegistration(userId) {\n  var data = Array.from(new Set(registrations().concat(userId)));\n  updateRegistrations(data);\n};\nvar removeRegistration = function removeRegistration(userId) {\n  console.log('registrations(): ', registrations());\n  var data = registrations().filter(function (id) {\n    return id !== userId;\n  });\n  updateRegistrations(data);\n};\nvar hasRegistration = function hasRegistration(userId) {\n  return registrations().includes(userId);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHVzaC1ub3RpZmljYXRpb25zL2ZjbS1tYW5hZ2VtZW50LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3B1c2gtbm90aWZpY2F0aW9ucy9mY20tbWFuYWdlbWVudC5qcz9hZTliIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG4vKlxuICogVGhpcyBtb2R1bGUgaXMgcmVzcG9uc2libGUgZm9yIHBlcnNpc3RpbmcgaW5mb3JtYXRpb24gYWJvdXQgcHVzaCBub3RpZmljYXRpb25cbiAqIHJlZ2lzdHJhdGlvbnMgdG8gbG9jYWwgc3RvcmFnZS5cbiAqL1xuY29uc3QgcmVnaXN0cmF0aW9ucyA9ICgpOiBBcnJheTxzdHJpbmc+ID0+IHtcbiAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZjbScpIHx8ICdbXScpO1xufTtcblxuY29uc3QgdXBkYXRlUmVnaXN0cmF0aW9ucyA9IChkYXRhKSA9PiB7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmY20nLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG59O1xuXG5leHBvcnQgY29uc3QgYWRkUmVnaXN0cmF0aW9uID0gKHVzZXJJZDogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IGRhdGEgPSBBcnJheS5mcm9tKG5ldyBTZXQocmVnaXN0cmF0aW9ucygpLmNvbmNhdCh1c2VySWQpKSk7XG4gIHVwZGF0ZVJlZ2lzdHJhdGlvbnMoZGF0YSk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVtb3ZlUmVnaXN0cmF0aW9uID0gKHVzZXJJZDogbnVtYmVyKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdyZWdpc3RyYXRpb25zKCk6ICcsIHJlZ2lzdHJhdGlvbnMoKSlcbiAgY29uc3QgZGF0YSA9IHJlZ2lzdHJhdGlvbnMoKS5maWx0ZXIoKGlkKSA9PiBpZCAhPT0gdXNlcklkKTtcbiAgdXBkYXRlUmVnaXN0cmF0aW9ucyhkYXRhKTtcbn07XG5cbmV4cG9ydCBjb25zdCBoYXNSZWdpc3RyYXRpb24gPSAodXNlcklkOiBudW1iZXIpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIHJlZ2lzdHJhdGlvbnMoKS5pbmNsdWRlcyh1c2VySWQpO1xufTsiXSwibWFwcGluZ3MiOiJBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFEQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/push-notifications/fcm-management.js\n");

/***/ }),

/***/ "./src/push-notifications/index.js":
/*!*****************************************!*\
  !*** ./src/push-notifications/index.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var lbryinc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lbryinc */ \"../extras/lbryinc/index.js\");\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/app */ \"./node_modules/firebase/app/dist/index.esm.js\");\n/* harmony import */ var firebase_messaging__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/messaging */ \"./node_modules/firebase/messaging/dist/index.esm.js\");\n/* harmony import */ var $web_src_firebase_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! $web/src/firebase-config */ \"./src/firebase-config.js\");\n/* harmony import */ var $web_src_push_notifications_fcm_management__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! $web/src/push-notifications/fcm-management */ \"./src/push-notifications/fcm-management.js\");\n/* harmony import */ var $web_src_ua__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! $web/src/ua */ \"./src/ua.js\");\n/* harmony import */ var $web_src_push_notifications_push_supported__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! $web/src/push-notifications/push-supported */ \"./src/push-notifications/push-supported.js\");\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/*\n * This module is responsible for managing browser push notification\n * subscriptions via the firebase SDK.\n */\n\n\n\n\n\n\n\n\n // $FlowFixMe\n\nvar messaging = null;\nvar pushSystem = null;\n\n(function _callee() {\n  var supported, app, _app;\n\n  return regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return regeneratorRuntime.awrap(Object($web_src_push_notifications_push_supported__WEBPACK_IMPORTED_MODULE_6__[\"isPushSupported\"])());\n\n        case 2:\n          supported = _context.sent;\n\n          if (supported) {\n            app = Object(firebase_app__WEBPACK_IMPORTED_MODULE_1__[\"initializeApp\"])($web_src_firebase_config__WEBPACK_IMPORTED_MODULE_3__[\"firebaseConfig\"]);\n            messaging = Object(firebase_messaging__WEBPACK_IMPORTED_MODULE_2__[\"getMessaging\"])(app);\n            pushSystem = {\n              supported: true,\n              subscribe: subscribe,\n              unsubscribe: unsubscribe,\n              subscribed: subscribed,\n              reconnect: reconnect,\n              disconnect: disconnect,\n              validate: validate\n            };\n          }\n\n          if (window.cordova) {\n            _app = Object(firebase_app__WEBPACK_IMPORTED_MODULE_1__[\"initializeApp\"])($web_src_firebase_config__WEBPACK_IMPORTED_MODULE_3__[\"firebaseConfig\"]);\n            messaging = Object(firebase_messaging__WEBPACK_IMPORTED_MODULE_2__[\"getMessaging\"])(_app);\n            pushSystem = {\n              supported: true,\n              subscribe: subscribe,\n              unsubscribe: unsubscribe,\n              subscribed: subscribed,\n              reconnect: reconnect,\n              disconnect: disconnect,\n              validate: validate\n            };\n          }\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n})(); // Proxy will forward to push system if it's supported.\n// $FlowIssue[incompatible-type]\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new Proxy({}, {\n  get: function get(target, prop) {\n    if (pushSystem) {\n      return pushSystem[prop];\n    } else if (window.cordova) {\n      // $FlowFixMe\n      return pushSystem[prop];\n    } else {\n      if (prop === 'supported') return false;\n      throw new Error('Push notifications are not supported in this browser environment.');\n    }\n  }\n}));\n\nvar subscriptionMetaData = function subscriptionMetaData() {\n  if (!window.cordova) {\n    var _window$navigator$use, _browserData$browser, _browserData$os;\n\n    var isMobile = ((_window$navigator$use = window.navigator.userAgentData) === null || _window$navigator$use === void 0 ? void 0 : _window$navigator$use.mobile) || false;\n    var browserName = ((_browserData$browser = $web_src_ua__WEBPACK_IMPORTED_MODULE_5__[\"browserData\"].browser) === null || _browserData$browser === void 0 ? void 0 : _browserData$browser.name) || 'unknown';\n    var osName = ((_browserData$os = $web_src_ua__WEBPACK_IMPORTED_MODULE_5__[\"browserData\"].os) === null || _browserData$os === void 0 ? void 0 : _browserData$os.name) || 'unknown';\n    return {\n      type: \"web-\".concat(isMobile ? 'mobile' : 'desktop'),\n      name: \"\".concat(browserName, \"-\").concat(osName)\n    };\n  } else {\n    return {\n      type: 'app-android',\n      name: 'Cordova-Android'\n    };\n  }\n};\n\nvar getFcmToken = function getFcmToken() {\n  var _navigator$serviceWor;\n\n  var swRegistration;\n  return regeneratorRuntime.async(function getFcmToken$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return regeneratorRuntime.awrap((_navigator$serviceWor = navigator.serviceWorker) === null || _navigator$serviceWor === void 0 ? void 0 : _navigator$serviceWor.ready);\n\n        case 2:\n          swRegistration = _context2.sent;\n\n          if (swRegistration) {\n            _context2.next = 5;\n            break;\n          }\n\n          return _context2.abrupt(\"return\");\n\n        case 5:\n          if (!window.cordova) {\n            _context2.next = 7;\n            break;\n          }\n\n          return _context2.abrupt(\"return\");\n\n        case 7:\n          return _context2.abrupt(\"return\", Object(firebase_messaging__WEBPACK_IMPORTED_MODULE_2__[\"getToken\"])(messaging, {\n            serviceWorkerRegistration: swRegistration,\n            vapidKey: $web_src_firebase_config__WEBPACK_IMPORTED_MODULE_3__[\"vapidKey\"]\n          }));\n\n        case 8:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n};\n\nvar subscribe = function subscribe(userId) {\n  var permanent,\n      fcmToken,\n      _args3 = arguments;\n  return regeneratorRuntime.async(function subscribe$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          permanent = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : true;\n          _context3.prev = 1;\n          _context3.next = 4;\n          return regeneratorRuntime.awrap(getFcmToken());\n\n        case 4:\n          fcmToken = _context3.sent;\n\n          if (window.cordova) {\n            fcmToken = localStorage.getItem('fcmToken');\n          }\n\n          if (fcmToken) {\n            _context3.next = 8;\n            break;\n          }\n\n          return _context3.abrupt(\"return\", false);\n\n        case 8:\n          _context3.next = 10;\n          return regeneratorRuntime.awrap(lbryinc__WEBPACK_IMPORTED_MODULE_0__[\"Lbryio\"].call('cfm', 'add', _objectSpread({\n            token: fcmToken\n          }, subscriptionMetaData())));\n\n        case 10:\n          if (permanent) Object($web_src_push_notifications_fcm_management__WEBPACK_IMPORTED_MODULE_4__[\"addRegistration\"])(userId);\n          return _context3.abrupt(\"return\", true);\n\n        case 14:\n          _context3.prev = 14;\n          _context3.t0 = _context3[\"catch\"](1);\n          console.log('subscribe error: ', _context3.t0);\n          return _context3.abrupt(\"return\", false);\n\n        case 18:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, [[1, 14]]);\n};\n\nvar unsubscribe = function unsubscribe(userId) {\n  var permanent,\n      fcmToken,\n      _args4 = arguments;\n  return regeneratorRuntime.async(function unsubscribe$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          permanent = _args4.length > 1 && _args4[1] !== undefined ? _args4[1] : true;\n          _context4.prev = 1;\n          _context4.next = 4;\n          return regeneratorRuntime.awrap(getFcmToken());\n\n        case 4:\n          fcmToken = _context4.sent;\n\n          if (fcmToken) {\n            _context4.next = 7;\n            break;\n          }\n\n          return _context4.abrupt(\"return\", false);\n\n        case 7:\n          _context4.next = 9;\n          return regeneratorRuntime.awrap(Object(firebase_messaging__WEBPACK_IMPORTED_MODULE_2__[\"deleteToken\"])(messaging));\n\n        case 9:\n          _context4.next = 11;\n          return regeneratorRuntime.awrap(lbryinc__WEBPACK_IMPORTED_MODULE_0__[\"Lbryio\"].call('cfm', 'remove', {\n            token: fcmToken\n          }));\n\n        case 11:\n          if (permanent) Object($web_src_push_notifications_fcm_management__WEBPACK_IMPORTED_MODULE_4__[\"removeRegistration\"])(userId);\n          return _context4.abrupt(\"return\", true);\n\n        case 15:\n          _context4.prev = 15;\n          _context4.t0 = _context4[\"catch\"](1);\n          console.log('subscribe error: ', _context4.t0);\n          return _context4.abrupt(\"return\", false);\n\n        case 19:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, null, null, [[1, 15]]);\n};\n\nvar subscribed = function subscribed(userId) {\n  var _navigator$serviceWor2;\n\n  var swRegistration, browserSubscriptionExists, userRecordExists;\n  return regeneratorRuntime.async(function subscribed$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return regeneratorRuntime.awrap((_navigator$serviceWor2 = navigator.serviceWorker) === null || _navigator$serviceWor2 === void 0 ? void 0 : _navigator$serviceWor2.ready);\n\n        case 2:\n          swRegistration = _context5.sent;\n\n          if (!(!swRegistration || !swRegistration.pushManager)) {\n            _context5.next = 5;\n            break;\n          }\n\n          return _context5.abrupt(\"return\", false);\n\n        case 5:\n          _context5.next = 7;\n          return regeneratorRuntime.awrap(swRegistration.pushManager.getSubscription());\n\n        case 7:\n          _context5.t0 = _context5.sent;\n          browserSubscriptionExists = _context5.t0 !== null;\n          userRecordExists = Object($web_src_push_notifications_fcm_management__WEBPACK_IMPORTED_MODULE_4__[\"hasRegistration\"])(userId);\n          return _context5.abrupt(\"return\", browserSubscriptionExists && userRecordExists);\n\n        case 11:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  });\n};\n\nvar reconnect = function reconnect(userId) {\n  return regeneratorRuntime.async(function reconnect$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          if (!Object($web_src_push_notifications_fcm_management__WEBPACK_IMPORTED_MODULE_4__[\"hasRegistration\"])(userId)) {\n            _context6.next = 4;\n            break;\n          }\n\n          return _context6.abrupt(\"return\", subscribe(userId, false));\n\n        case 4:\n          Object($web_src_push_notifications_fcm_management__WEBPACK_IMPORTED_MODULE_4__[\"addRegistration\"])(userId);\n\n        case 5:\n          return _context6.abrupt(\"return\", false);\n\n        case 6:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  });\n};\n\nvar disconnect = function disconnect(userId) {\n  return regeneratorRuntime.async(function disconnect$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          if (!Object($web_src_push_notifications_fcm_management__WEBPACK_IMPORTED_MODULE_4__[\"hasRegistration\"])(userId)) {\n            _context7.next = 2;\n            break;\n          }\n\n          return _context7.abrupt(\"return\", unsubscribe(userId, false));\n\n        case 2:\n          return _context7.abrupt(\"return\", false);\n\n        case 3:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  });\n};\n\nvar validate = function validate(userId) {\n  return regeneratorRuntime.async(function validate$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          if (Object($web_src_push_notifications_fcm_management__WEBPACK_IMPORTED_MODULE_4__[\"hasRegistration\"])(userId)) {\n            _context9.next = 2;\n            break;\n          }\n\n          return _context9.abrupt(\"return\");\n\n        case 2:\n          window.requestIdleCallback(function _callee2() {\n            var serverTokens, fcmToken, exists;\n            return regeneratorRuntime.async(function _callee2$(_context8) {\n              while (1) {\n                switch (_context8.prev = _context8.next) {\n                  case 0:\n                    _context8.next = 2;\n                    return regeneratorRuntime.awrap(lbryinc__WEBPACK_IMPORTED_MODULE_0__[\"Lbryio\"].call('cfm', 'list'));\n\n                  case 2:\n                    serverTokens = _context8.sent;\n                    _context8.next = 5;\n                    return regeneratorRuntime.awrap(getFcmToken());\n\n                  case 5:\n                    fcmToken = _context8.sent;\n\n                    if (fcmToken) {\n                      _context8.next = 8;\n                      break;\n                    }\n\n                    return _context8.abrupt(\"return\");\n\n                  case 8:\n                    exists = serverTokens.find(function (item) {\n                      return item.value === fcmToken;\n                    });\n\n                    if (exists) {\n                      _context8.next = 12;\n                      break;\n                    }\n\n                    _context8.next = 12;\n                    return regeneratorRuntime.awrap(subscribe(userId, false));\n\n                  case 12:\n                  case \"end\":\n                    return _context8.stop();\n                }\n              }\n            });\n          });\n\n        case 3:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  });\n};\n/* DEBUG */\n\n/*\nconst removeToken = async (token: string): Promise<boolean> => {\n  try {\n    await Lbryio.call('cfm', 'remove', { token: token });\n    return true;\n  } catch (err) {\n    console.log('removeToken error: ', err);\n    return false;\n  }\n};\n\nwindow.odysee.debug = {\n  removeToken: removeToken,\n  subscribe: subscribe,\n  unsubscribe: unsubscribe,\n  subscribed: subscribed,\n  reconnect: reconnect,\n  disconnect: disconnect,\n  validate: validate,\n\n  addRegistration: addRegistration,\n  removeRegistration: removeRegistration,\n  hasRegistration: hasRegistration\n}\n*///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHVzaC1ub3RpZmljYXRpb25zL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3B1c2gtbm90aWZpY2F0aW9ucy9pbmRleC5qcz81ZThhIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG4vKlxuICogVGhpcyBtb2R1bGUgaXMgcmVzcG9uc2libGUgZm9yIG1hbmFnaW5nIGJyb3dzZXIgcHVzaCBub3RpZmljYXRpb25cbiAqIHN1YnNjcmlwdGlvbnMgdmlhIHRoZSBmaXJlYmFzZSBTREsuXG4gKi9cblxuaW1wb3J0IHsgTGJyeWlvIH0gZnJvbSAnbGJyeWluYyc7XG5pbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSAnZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IGdldE1lc3NhZ2luZywgZ2V0VG9rZW4sIGRlbGV0ZVRva2VuIH0gZnJvbSAnZmlyZWJhc2UvbWVzc2FnaW5nJztcbmltcG9ydCB7IGZpcmViYXNlQ29uZmlnLCB2YXBpZEtleSB9IGZyb20gJyR3ZWIvc3JjL2ZpcmViYXNlLWNvbmZpZyc7XG5pbXBvcnQgeyBhZGRSZWdpc3RyYXRpb24sIHJlbW92ZVJlZ2lzdHJhdGlvbiwgaGFzUmVnaXN0cmF0aW9uIH0gZnJvbSAnJHdlYi9zcmMvcHVzaC1ub3RpZmljYXRpb25zL2ZjbS1tYW5hZ2VtZW50JztcbmltcG9ydCB7IGJyb3dzZXJEYXRhIH0gZnJvbSAnJHdlYi9zcmMvdWEnO1xuaW1wb3J0IHsgaXNQdXNoU3VwcG9ydGVkIH0gZnJvbSAnJHdlYi9zcmMvcHVzaC1ub3RpZmljYXRpb25zL3B1c2gtc3VwcG9ydGVkJztcbi8vICRGbG93Rml4TWVcblxubGV0IG1lc3NhZ2luZyA9IG51bGw7XG5sZXQgcHVzaFN5c3RlbSA9IG51bGw7XG5cbihhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHN1cHBvcnRlZCA9IGF3YWl0IGlzUHVzaFN1cHBvcnRlZCgpO1xuICBpZiAoc3VwcG9ydGVkKSB7XG4gICAgY29uc3QgYXBwID0gaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XG4gICAgbWVzc2FnaW5nID0gZ2V0TWVzc2FnaW5nKGFwcCk7XG4gICAgcHVzaFN5c3RlbSA9IHtcbiAgICAgIHN1cHBvcnRlZDogdHJ1ZSxcbiAgICAgIHN1YnNjcmliZSxcbiAgICAgIHVuc3Vic2NyaWJlLFxuICAgICAgc3Vic2NyaWJlZCxcbiAgICAgIHJlY29ubmVjdCxcbiAgICAgIGRpc2Nvbm5lY3QsXG4gICAgICB2YWxpZGF0ZSxcbiAgICB9O1xuICB9XG4gIGlmICh3aW5kb3cuY29yZG92YSkge1xuICAgIGNvbnN0IGFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xuICAgIG1lc3NhZ2luZyA9IGdldE1lc3NhZ2luZyhhcHApO1xuICAgIHB1c2hTeXN0ZW0gPSB7XG4gICAgICBzdXBwb3J0ZWQ6IHRydWUsXG4gICAgICBzdWJzY3JpYmUsXG4gICAgICB1bnN1YnNjcmliZSxcbiAgICAgIHN1YnNjcmliZWQsXG4gICAgICByZWNvbm5lY3QsXG4gICAgICBkaXNjb25uZWN0LFxuICAgICAgdmFsaWRhdGUsXG4gICAgfTtcbiAgfVxufSkoKTtcblxuLy8gUHJveHkgd2lsbCBmb3J3YXJkIHRvIHB1c2ggc3lzdGVtIGlmIGl0J3Mgc3VwcG9ydGVkLlxuLy8gJEZsb3dJc3N1ZVtpbmNvbXBhdGlibGUtdHlwZV1cbmV4cG9ydCBkZWZhdWx0IG5ldyBQcm94eShcbiAge30sXG4gIHtcbiAgICBnZXQodGFyZ2V0LCBwcm9wKSB7XG4gICAgICBpZiAocHVzaFN5c3RlbSkge1xuICAgICAgICByZXR1cm4gcHVzaFN5c3RlbVtwcm9wXTtcbiAgICAgIH0gZWxzZSBpZiAod2luZG93LmNvcmRvdmEpIHtcbiAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICByZXR1cm4gcHVzaFN5c3RlbVtwcm9wXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChwcm9wID09PSAnc3VwcG9ydGVkJykgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1B1c2ggbm90aWZpY2F0aW9ucyBhcmUgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXIgZW52aXJvbm1lbnQuJyk7XG4gICAgICB9XG4gICAgfSxcbiAgfVxuKTtcblxuY29uc3Qgc3Vic2NyaXB0aW9uTWV0YURhdGEgPSAoKSA9PiB7XG4gIGlmICghd2luZG93LmNvcmRvdmEpIHtcbiAgICBjb25zdCBpc01vYmlsZSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50RGF0YT8ubW9iaWxlIHx8IGZhbHNlO1xuICAgIGNvbnN0IGJyb3dzZXJOYW1lID0gYnJvd3NlckRhdGEuYnJvd3Nlcj8ubmFtZSB8fCAndW5rbm93bic7XG4gICAgY29uc3Qgb3NOYW1lID0gYnJvd3NlckRhdGEub3M/Lm5hbWUgfHwgJ3Vua25vd24nO1xuICAgIHJldHVybiB7IHR5cGU6IGB3ZWItJHtpc01vYmlsZSA/ICdtb2JpbGUnIDogJ2Rlc2t0b3AnfWAsIG5hbWU6IGAke2Jyb3dzZXJOYW1lfS0ke29zTmFtZX1gIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgdHlwZTogJ2FwcC1hbmRyb2lkJywgbmFtZTogJ0NvcmRvdmEtQW5kcm9pZCcgfTtcbiAgfVxufTtcblxuY29uc3QgZ2V0RmNtVG9rZW4gPSBhc3luYyAoKTogUHJvbWlzZTxzdHJpbmcgfCB2b2lkPiA9PiB7XG4gIGNvbnN0IHN3UmVnaXN0cmF0aW9uID0gYXdhaXQgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXI/LnJlYWR5O1xuICBpZiAoIXN3UmVnaXN0cmF0aW9uKSByZXR1cm47XG4gIGlmICh3aW5kb3cuY29yZG92YSkgcmV0dXJuO1xuICByZXR1cm4gZ2V0VG9rZW4obWVzc2FnaW5nLCB7IHNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb246IHN3UmVnaXN0cmF0aW9uLCB2YXBpZEtleSB9KTtcbn07XG5cbmNvbnN0IHN1YnNjcmliZSA9IGFzeW5jICh1c2VySWQ6IG51bWJlciwgcGVybWFuZW50OiBib29sZWFuID0gdHJ1ZSk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICB0cnkge1xuICAgIHZhciBmY21Ub2tlbiA9IGF3YWl0IGdldEZjbVRva2VuKCk7XG4gICAgaWYgKHdpbmRvdy5jb3Jkb3ZhKSB7XG4gICAgICBmY21Ub2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmY21Ub2tlbicpO1xuICAgIH1cbiAgICBpZiAoIWZjbVRva2VuKSByZXR1cm4gZmFsc2U7XG4gICAgYXdhaXQgTGJyeWlvLmNhbGwoJ2NmbScsICdhZGQnLCB7IHRva2VuOiBmY21Ub2tlbiwgLi4uc3Vic2NyaXB0aW9uTWV0YURhdGEoKSB9KTtcbiAgICBpZiAocGVybWFuZW50KSBhZGRSZWdpc3RyYXRpb24odXNlcklkKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5sb2coJ3N1YnNjcmliZSBlcnJvcjogJywgZXJyKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbmNvbnN0IHVuc3Vic2NyaWJlID0gYXN5bmMgKHVzZXJJZDogbnVtYmVyLCBwZXJtYW5lbnQ6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZmNtVG9rZW4gPSBhd2FpdCBnZXRGY21Ub2tlbigpO1xuICAgIGlmICghZmNtVG9rZW4pIHJldHVybiBmYWxzZTtcbiAgICBhd2FpdCBkZWxldGVUb2tlbihtZXNzYWdpbmcpO1xuICAgIGF3YWl0IExicnlpby5jYWxsKCdjZm0nLCAncmVtb3ZlJywgeyB0b2tlbjogZmNtVG9rZW4gfSk7XG4gICAgaWYgKHBlcm1hbmVudCkgcmVtb3ZlUmVnaXN0cmF0aW9uKHVzZXJJZCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUubG9nKCdzdWJzY3JpYmUgZXJyb3I6ICcsIGVycik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG5jb25zdCBzdWJzY3JpYmVkID0gYXN5bmMgKHVzZXJJZDogbnVtYmVyKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gIGNvbnN0IHN3UmVnaXN0cmF0aW9uID0gYXdhaXQgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXI/LnJlYWR5O1xuICBpZiAoIXN3UmVnaXN0cmF0aW9uIHx8ICFzd1JlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlcikgcmV0dXJuIGZhbHNlO1xuICBjb25zdCBicm93c2VyU3Vic2NyaXB0aW9uRXhpc3RzID0gKGF3YWl0IHN3UmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLmdldFN1YnNjcmlwdGlvbigpKSAhPT0gbnVsbDtcbiAgY29uc3QgdXNlclJlY29yZEV4aXN0cyA9IGhhc1JlZ2lzdHJhdGlvbih1c2VySWQpO1xuICByZXR1cm4gYnJvd3NlclN1YnNjcmlwdGlvbkV4aXN0cyAmJiB1c2VyUmVjb3JkRXhpc3RzO1xufTtcblxuY29uc3QgcmVjb25uZWN0ID0gYXN5bmMgKHVzZXJJZDogbnVtYmVyKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gIGlmIChoYXNSZWdpc3RyYXRpb24odXNlcklkKSkgcmV0dXJuIHN1YnNjcmliZSh1c2VySWQsIGZhbHNlKTtcbiAgZWxzZSBhZGRSZWdpc3RyYXRpb24odXNlcklkKTtcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgZGlzY29ubmVjdCA9IGFzeW5jICh1c2VySWQ6IG51bWJlcik6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICBpZiAoaGFzUmVnaXN0cmF0aW9uKHVzZXJJZCkpIHJldHVybiB1bnN1YnNjcmliZSh1c2VySWQsIGZhbHNlKTtcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgdmFsaWRhdGUgPSBhc3luYyAodXNlcklkOiBudW1iZXIpID0+IHtcbiAgaWYgKCFoYXNSZWdpc3RyYXRpb24odXNlcklkKSkgcmV0dXJuO1xuICB3aW5kb3cucmVxdWVzdElkbGVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgc2VydmVyVG9rZW5zID0gYXdhaXQgTGJyeWlvLmNhbGwoJ2NmbScsICdsaXN0Jyk7XG4gICAgY29uc3QgZmNtVG9rZW4gPSBhd2FpdCBnZXRGY21Ub2tlbigpO1xuICAgIGlmICghZmNtVG9rZW4pIHJldHVybjtcbiAgICBjb25zdCBleGlzdHMgPSBzZXJ2ZXJUb2tlbnMuZmluZCgoaXRlbSkgPT4gaXRlbS52YWx1ZSA9PT0gZmNtVG9rZW4pO1xuICAgIGlmICghZXhpc3RzKSB7XG4gICAgICBhd2FpdCBzdWJzY3JpYmUodXNlcklkLCBmYWxzZSk7XG4gICAgfVxuICB9KTtcbn07XG5cbi8qIERFQlVHICovXG4vKlxuY29uc3QgcmVtb3ZlVG9rZW4gPSBhc3luYyAodG9rZW46IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICB0cnkge1xuICAgIGF3YWl0IExicnlpby5jYWxsKCdjZm0nLCAncmVtb3ZlJywgeyB0b2tlbjogdG9rZW4gfSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUubG9nKCdyZW1vdmVUb2tlbiBlcnJvcjogJywgZXJyKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbndpbmRvdy5vZHlzZWUuZGVidWcgPSB7XG4gIHJlbW92ZVRva2VuOiByZW1vdmVUb2tlbixcbiAgc3Vic2NyaWJlOiBzdWJzY3JpYmUsXG4gIHVuc3Vic2NyaWJlOiB1bnN1YnNjcmliZSxcbiAgc3Vic2NyaWJlZDogc3Vic2NyaWJlZCxcbiAgcmVjb25uZWN0OiByZWNvbm5lY3QsXG4gIGRpc2Nvbm5lY3Q6IGRpc2Nvbm5lY3QsXG4gIHZhbGlkYXRlOiB2YWxpZGF0ZSxcblxuICBhZGRSZWdpc3RyYXRpb246IGFkZFJlZ2lzdHJhdGlvbixcbiAgcmVtb3ZlUmVnaXN0cmF0aW9uOiByZW1vdmVSZWdpc3RyYXRpb24sXG4gIGhhc1JlZ2lzdHJhdGlvbjogaGFzUmVnaXN0cmF0aW9uXG59XG4qL1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUNBO0FBNUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBK0JBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBQ0E7QUFjQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBUkE7QUFDQTtBQVVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFMQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBT0E7QUFBQTtBQUNBO0FBUkE7QUFRQTtBQVJBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFXQTtBQVhBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBZUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBS0E7QUFBQTtBQUNBO0FBTkE7QUFNQTtBQU5BO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFTQTtBQVRBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBYUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFDQTtBQUpBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBT0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBSEE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBSUE7QUFBQTtBQUpBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBYUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/push-notifications/index.js\n");

/***/ }),

/***/ "./src/push-notifications/push-supported.js":
/*!**************************************************!*\
  !*** ./src/push-notifications/push-supported.js ***!
  \**************************************************/
/*! exports provided: isPushSupported */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isPushSupported\", function() { return isPushSupported; });\n/* harmony import */ var firebase_messaging__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/messaging */ \"./node_modules/firebase/messaging/dist/index.esm.js\");\n\nvar isPushSupported = function isPushSupported() {\n  var activeRegistrations, swRegistered, firebaseSupported, notificationFeature;\n  return regeneratorRuntime.async(function isPushSupported$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (!('serviceWorker' in navigator)) {\n            _context.next = 15;\n            break;\n          }\n\n          _context.prev = 1;\n          _context.next = 4;\n          return regeneratorRuntime.awrap(navigator.serviceWorker.getRegistrations());\n\n        case 4:\n          activeRegistrations = _context.sent;\n          swRegistered = activeRegistrations.length > 0;\n          _context.next = 8;\n          return regeneratorRuntime.awrap(Object(firebase_messaging__WEBPACK_IMPORTED_MODULE_0__[\"isSupported\"])());\n\n        case 8:\n          firebaseSupported = _context.sent;\n          notificationFeature = 'Notification' in window;\n          return _context.abrupt(\"return\", swRegistered && firebaseSupported && notificationFeature);\n\n        case 13:\n          _context.prev = 13;\n          _context.t0 = _context[\"catch\"](1);\n\n        case 15:\n          return _context.abrupt(\"return\", false);\n\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[1, 13]]);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHVzaC1ub3RpZmljYXRpb25zL3B1c2gtc3VwcG9ydGVkLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3B1c2gtbm90aWZpY2F0aW9ucy9wdXNoLXN1cHBvcnRlZC5qcz80YjBkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5cbmltcG9ydCB7IGlzU3VwcG9ydGVkIH0gZnJvbSAnZmlyZWJhc2UvbWVzc2FnaW5nJztcblxuZXhwb3J0IGNvbnN0IGlzUHVzaFN1cHBvcnRlZCA9IGFzeW5jICgpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHtcbiAgICB0cnkge1xuICAgICAgLy8gU29tZSBicm93c2VycyBpbmNvZ25pdG8gZXhwb3NlIHN3IGJ1dCBub3QgdGhlIHJlZ2lzdHJhdGlvbiwgd2hpbGUgb3RoZXIgZG9uJ3QgZXhwb3NlIHN3IGF0IGFsbC5cbiAgICAgIC8vICRGbG93SXNzdWVbaW5jb21wYXRpYmxlLXR5cGVdXG4gICAgICBjb25zdCBhY3RpdmVSZWdpc3RyYXRpb25zOiBBcnJheTxTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uPiA9IGF3YWl0IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmdldFJlZ2lzdHJhdGlvbnMoKTtcbiAgICAgIGNvbnN0IHN3UmVnaXN0ZXJlZCA9IGFjdGl2ZVJlZ2lzdHJhdGlvbnMubGVuZ3RoID4gMDtcbiAgICAgIGNvbnN0IGZpcmViYXNlU3VwcG9ydGVkID0gYXdhaXQgaXNTdXBwb3J0ZWQoKTtcbiAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbkZlYXR1cmUgPSAnTm90aWZpY2F0aW9uJyBpbiB3aW5kb3c7XG4gICAgICByZXR1cm4gc3dSZWdpc3RlcmVkICYmIGZpcmViYXNlU3VwcG9ydGVkICYmIG5vdGlmaWNhdGlvbkZlYXR1cmU7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn07XG4iXSwibWFwcGluZ3MiOiJBQUVBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBTkE7QUFBQTtBQUNBO0FBREE7QUFPQTtBQUNBO0FBUkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/push-notifications/push-supported.js\n");

/***/ }),

/***/ "./src/ua.js":
/*!*******************!*\
  !*** ./src/ua.js ***!
  \*******************/
/*! exports provided: browserData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"browserData\", function() { return browserData; });\n/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ua-parser-js */ \"./node_modules/ua-parser-js/src/ua-parser.js\");\n/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ua_parser_js__WEBPACK_IMPORTED_MODULE_0__);\n\nvar parser = new ua_parser_js__WEBPACK_IMPORTED_MODULE_0__[\"UAParser\"]();\nvar browserData = parser.getResult();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdWEuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdWEuanM/NmZlMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVQVBhcnNlciB9IGZyb20gJ3VhLXBhcnNlci1qcyc7XG5jb25zdCBwYXJzZXIgPSBuZXcgVUFQYXJzZXIoKTtcblxuZXhwb3J0IGNvbnN0IGJyb3dzZXJEYXRhID0gcGFyc2VyLmdldFJlc3VsdCgpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/ua.js\n");

/***/ })

})