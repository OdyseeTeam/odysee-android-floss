webpackHotUpdate("ui-202209281736",{

/***/ "../ui/component/fileReactions/index.js":
/*!**********************************************!*\
  !*** ../ui/component/fileReactions/index.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-redux */ \"../node_modules/react-redux/es/index.js\");\n/* harmony import */ var redux_selectors_reactions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/selectors/reactions */ \"../ui/redux/selectors/reactions.js\");\n/* harmony import */ var redux_actions_reactions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux/actions/reactions */ \"../ui/redux/actions/reactions.js\");\n/* harmony import */ var _view__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./view */ \"../ui/component/fileReactions/view.jsx\");\n/* harmony import */ var redux_selectors_claims__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! redux/selectors/claims */ \"../ui/redux/selectors/claims.js\");\n/* harmony import */ var redux_selectors_memberships__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! redux/selectors/memberships */ \"../ui/redux/selectors/memberships.js\");\n/* harmony import */ var util_claim__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! util/claim */ \"../ui/util/claim.js\");\n\n\n\n\n\n\n\n\nvar select = function select(state, props) {\n  var uri = props.uri;\n  var claim = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_4__[\"selectClaimForUri\"])(state, uri);\n\n  var _ref = claim || {},\n      claimId = _ref.claim_id;\n\n  var channelId = Object(util_claim__WEBPACK_IMPORTED_MODULE_6__[\"getChannelIdFromClaim\"])(claim);\n  return {\n    myReaction: Object(redux_selectors_reactions__WEBPACK_IMPORTED_MODULE_1__[\"selectMyReactionForUri\"])(state, uri),\n    likeCount: Object(redux_selectors_reactions__WEBPACK_IMPORTED_MODULE_1__[\"selectLikeCountForUri\"])(state, uri),\n    dislikeCount: Object(redux_selectors_reactions__WEBPACK_IMPORTED_MODULE_1__[\"selectDislikeCountForUri\"])(state, uri),\n    isLivestreamClaim: Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_4__[\"selectIsStreamPlaceholderForUri\"])(state, uri),\n    claimId: claimId,\n    unauthorizedForContent: Object(redux_selectors_memberships__WEBPACK_IMPORTED_MODULE_5__[\"selectIfUnauthorizedForContent\"])(state, channelId, claimId, uri),\n    claimIsMine: Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_4__[\"selectClaimIsMine\"])(state, claim)\n  };\n};\n\nvar perform = {\n  doFetchReactions: redux_actions_reactions__WEBPACK_IMPORTED_MODULE_2__[\"doFetchReactions\"],\n  doReactionLike: redux_actions_reactions__WEBPACK_IMPORTED_MODULE_2__[\"doReactionLike\"],\n  doReactionDislike: redux_actions_reactions__WEBPACK_IMPORTED_MODULE_2__[\"doReactionDislike\"]\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_0__[\"connect\"])(select, perform)(_view__WEBPACK_IMPORTED_MODULE_3__[\"default\"]));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvY29tcG9uZW50L2ZpbGVSZWFjdGlvbnMvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vdWkvY29tcG9uZW50L2ZpbGVSZWFjdGlvbnMvaW5kZXguanM/N2FhOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHsgc2VsZWN0TXlSZWFjdGlvbkZvclVyaSwgc2VsZWN0TGlrZUNvdW50Rm9yVXJpLCBzZWxlY3REaXNsaWtlQ291bnRGb3JVcmkgfSBmcm9tICdyZWR1eC9zZWxlY3RvcnMvcmVhY3Rpb25zJztcbmltcG9ydCB7IGRvRmV0Y2hSZWFjdGlvbnMsIGRvUmVhY3Rpb25MaWtlLCBkb1JlYWN0aW9uRGlzbGlrZSB9IGZyb20gJ3JlZHV4L2FjdGlvbnMvcmVhY3Rpb25zJztcbmltcG9ydCBGaWxlUmVhY3Rpb25zIGZyb20gJy4vdmlldyc7XG5pbXBvcnQgeyBzZWxlY3RDbGFpbUZvclVyaSwgc2VsZWN0SXNTdHJlYW1QbGFjZWhvbGRlckZvclVyaSwgc2VsZWN0Q2xhaW1Jc01pbmUgfSBmcm9tICdyZWR1eC9zZWxlY3RvcnMvY2xhaW1zJztcbmltcG9ydCB7IHNlbGVjdElmVW5hdXRob3JpemVkRm9yQ29udGVudCB9IGZyb20gJ3JlZHV4L3NlbGVjdG9ycy9tZW1iZXJzaGlwcyc7XG5pbXBvcnQgeyBnZXRDaGFubmVsSWRGcm9tQ2xhaW0gfSBmcm9tICd1dGlsL2NsYWltJztcblxuY29uc3Qgc2VsZWN0ID0gKHN0YXRlLCBwcm9wcykgPT4ge1xuICBjb25zdCB7IHVyaSB9ID0gcHJvcHM7XG5cbiAgY29uc3QgY2xhaW0gPSBzZWxlY3RDbGFpbUZvclVyaShzdGF0ZSwgdXJpKTtcbiAgY29uc3QgeyBjbGFpbV9pZDogY2xhaW1JZCB9ID0gY2xhaW0gfHwge307XG5cbiAgY29uc3QgY2hhbm5lbElkID0gZ2V0Q2hhbm5lbElkRnJvbUNsYWltKGNsYWltKTtcblxuICByZXR1cm4ge1xuICAgIG15UmVhY3Rpb246IHNlbGVjdE15UmVhY3Rpb25Gb3JVcmkoc3RhdGUsIHVyaSksXG4gICAgbGlrZUNvdW50OiBzZWxlY3RMaWtlQ291bnRGb3JVcmkoc3RhdGUsIHVyaSksXG4gICAgZGlzbGlrZUNvdW50OiBzZWxlY3REaXNsaWtlQ291bnRGb3JVcmkoc3RhdGUsIHVyaSksXG4gICAgaXNMaXZlc3RyZWFtQ2xhaW06IHNlbGVjdElzU3RyZWFtUGxhY2Vob2xkZXJGb3JVcmkoc3RhdGUsIHVyaSksXG4gICAgY2xhaW1JZCxcbiAgICB1bmF1dGhvcml6ZWRGb3JDb250ZW50OiBzZWxlY3RJZlVuYXV0aG9yaXplZEZvckNvbnRlbnQoc3RhdGUsIGNoYW5uZWxJZCwgY2xhaW1JZCwgdXJpKSxcbiAgICBjbGFpbUlzTWluZTogc2VsZWN0Q2xhaW1Jc01pbmUoc3RhdGUsIGNsYWltKSxcbiAgfTtcbn07XG5cbmNvbnN0IHBlcmZvcm0gPSB7XG4gIGRvRmV0Y2hSZWFjdGlvbnMsXG4gIGRvUmVhY3Rpb25MaWtlLFxuICBkb1JlYWN0aW9uRGlzbGlrZSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3Qoc2VsZWN0LCBwZXJmb3JtKShGaWxlUmVhY3Rpb25zKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUpBO0FBQUE7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBUkE7QUFDQTtBQWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../ui/component/fileReactions/index.js\n");

/***/ }),

/***/ "../ui/component/fileReactions/view.jsx":
/*!**********************************************!*\
  !*** ../ui/component/fileReactions/view.jsx ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return FileReactions; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _mui_material_Skeleton__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material/Skeleton */ \"../node_modules/@mui/material/Skeleton/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! classnames */ \"../node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var constants_reactions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! constants/reactions */ \"../ui/constants/reactions.js\");\n/* harmony import */ var constants_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! constants/icons */ \"../ui/constants/icons.js\");\n/* harmony import */ var component_ratioBar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component/ratioBar */ \"../ui/component/ratioBar/index.js\");\n/* harmony import */ var util_number__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! util/number */ \"../ui/util/number.js\");\n/* harmony import */ var component_common_file_action_button__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! component/common/file-action-button */ \"../ui/component/common/file-action-button.jsx\");\n\n\n\n\n\n\n\n\nvar LIVE_REACTION_FETCH_MS = 1000 * 45;\nfunction FileReactions(props) {\n  var uri = props.uri,\n      claimId = props.claimId,\n      myReaction = props.myReaction,\n      likeCount = props.likeCount,\n      dislikeCount = props.dislikeCount,\n      isLivestreamClaim = props.isLivestreamClaim,\n      doFetchReactions = props.doFetchReactions,\n      doReactionLike = props.doReactionLike,\n      doReactionDislike = props.doReactionDislike,\n      unauthorizedForContent = props.unauthorizedForContent,\n      claimIsMine = props.claimIsMine;\n  var unauthedToReact = unauthorizedForContent && !claimIsMine;\n  react__WEBPACK_IMPORTED_MODULE_0___default.a.useEffect(function () {\n    function fetchReactions() {\n      doFetchReactions(claimId);\n    }\n\n    var fetchInterval;\n\n    if (claimId) {\n      fetchReactions();\n\n      if (isLivestreamClaim) {\n        fetchInterval = setInterval(fetchReactions, LIVE_REACTION_FETCH_MS);\n      }\n    }\n\n    return function () {\n      if (fetchInterval) {\n        clearInterval(fetchInterval);\n      }\n    };\n  }, [claimId, doFetchReactions, isLivestreamClaim]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_2___default()('ratio-wrapper', {\n      'comment__actions--disabled': unauthedToReact\n    })\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(LikeButton, {\n    myReaction: myReaction,\n    reactionCount: likeCount,\n    onClick: function onClick() {\n      return doReactionLike(uri);\n    }\n  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(DislikeButton, {\n    myReaction: myReaction,\n    reactionCount: dislikeCount,\n    onClick: function onClick() {\n      return doReactionDislike(uri);\n    }\n  }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(component_ratioBar__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n    likeCount: likeCount,\n    dislikeCount: dislikeCount\n  }));\n}\nvar Placeholder = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_mui_material_Skeleton__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n  variant: \"text\",\n  animation: \"wave\",\n  className: \"reaction-count-placeholder\"\n});\n\nvar LikeButton = function LikeButton(props) {\n  var myReaction = props.myReaction,\n      reactionCount = props.reactionCount,\n      onClick = props.onClick;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(component_common_file_action_button__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n    title: __('I like this'),\n    requiresAuth: true,\n    authSrc: \"filereaction_like\",\n    className: classnames__WEBPACK_IMPORTED_MODULE_2___default()('button--file-action button-like', {\n      'button--fire': myReaction === constants_reactions__WEBPACK_IMPORTED_MODULE_3__[\"LIKE\"]\n    }),\n    label: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, myReaction === constants_reactions__WEBPACK_IMPORTED_MODULE_3__[\"LIKE\"] && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"button__fire-glow\"\n    }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"button__fire-particle1\"\n    }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"button__fire-particle2\"\n    }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"button__fire-particle3\"\n    }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"button__fire-particle4\"\n    }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"button__fire-particle5\"\n    }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"button__fire-particle6\"\n    })), Number.isInteger(reactionCount) ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, Object(util_number__WEBPACK_IMPORTED_MODULE_6__[\"formatNumberWithCommas\"])(reactionCount, 0)) : Placeholder),\n    iconSize: 18,\n    icon: myReaction === constants_reactions__WEBPACK_IMPORTED_MODULE_3__[\"LIKE\"] ? constants_icons__WEBPACK_IMPORTED_MODULE_4__[\"FIRE_ACTIVE\"] : constants_icons__WEBPACK_IMPORTED_MODULE_4__[\"FIRE\"],\n    onClick: onClick\n  });\n};\n\nvar DislikeButton = function DislikeButton(props) {\n  var myReaction = props.myReaction,\n      reactionCount = props.reactionCount,\n      onClick = props.onClick;\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(component_common_file_action_button__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n    requiresAuth: true,\n    authSrc: 'filereaction_dislike',\n    title: __('I dislike this'),\n    className: classnames__WEBPACK_IMPORTED_MODULE_2___default()('button--file-action button-dislike', {\n      'button--slime': myReaction === constants_reactions__WEBPACK_IMPORTED_MODULE_3__[\"DISLIKE\"]\n    }),\n    label: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, myReaction === constants_reactions__WEBPACK_IMPORTED_MODULE_3__[\"DISLIKE\"] && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"button__slime-stain\"\n    }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"button__slime-drop1\"\n    }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n      className: \"button__slime-drop2\"\n    })), Number.isInteger(reactionCount) ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, Object(util_number__WEBPACK_IMPORTED_MODULE_6__[\"formatNumberWithCommas\"])(reactionCount, 0)) : Placeholder),\n    iconSize: 18,\n    icon: myReaction === constants_reactions__WEBPACK_IMPORTED_MODULE_3__[\"DISLIKE\"] ? constants_icons__WEBPACK_IMPORTED_MODULE_4__[\"SLIME_ACTIVE\"] : constants_icons__WEBPACK_IMPORTED_MODULE_4__[\"SLIME\"],\n    onClick: onClick\n  });\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvY29tcG9uZW50L2ZpbGVSZWFjdGlvbnMvdmlldy5qc3guanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vdWkvY29tcG9uZW50L2ZpbGVSZWFjdGlvbnMvdmlldy5qc3g/OGMxZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBTa2VsZXRvbiBmcm9tICdAbXVpL21hdGVyaWFsL1NrZWxldG9uJztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0ICogYXMgUkVBQ1RJT05fVFlQRVMgZnJvbSAnY29uc3RhbnRzL3JlYWN0aW9ucyc7XG5pbXBvcnQgKiBhcyBJQ09OUyBmcm9tICdjb25zdGFudHMvaWNvbnMnO1xuaW1wb3J0IFJhdGlvQmFyIGZyb20gJ2NvbXBvbmVudC9yYXRpb0Jhcic7XG5pbXBvcnQgeyBmb3JtYXROdW1iZXJXaXRoQ29tbWFzIH0gZnJvbSAndXRpbC9udW1iZXInO1xuaW1wb3J0IEZpbGVBY3Rpb25CdXR0b24gZnJvbSAnY29tcG9uZW50L2NvbW1vbi9maWxlLWFjdGlvbi1idXR0b24nO1xuXG5jb25zdCBMSVZFX1JFQUNUSU9OX0ZFVENIX01TID0gMTAwMCAqIDQ1O1xuXG50eXBlIFByb3BzID0ge1xuICB1cmk6IHN0cmluZyxcbiAgLy8gcmVkdXhcbiAgY2xhaW1JZD86IHN0cmluZyxcbiAgbGlrZUNvdW50OiBudW1iZXIsXG4gIGRpc2xpa2VDb3VudDogbnVtYmVyLFxuICBteVJlYWN0aW9uOiA/c3RyaW5nLFxuICBpc0xpdmVzdHJlYW1DbGFpbT86IGJvb2xlYW4sXG4gIGRvRmV0Y2hSZWFjdGlvbnM6IChjbGFpbUlkOiA/c3RyaW5nKSA9PiB2b2lkLFxuICBkb1JlYWN0aW9uTGlrZTogKHVyaTogc3RyaW5nKSA9PiB2b2lkLFxuICBkb1JlYWN0aW9uRGlzbGlrZTogKHVyaTogc3RyaW5nKSA9PiB2b2lkLFxuICB1bmF1dGhvcml6ZWRGb3JDb250ZW50PzogYm9vbGVhbixcbiAgY2xhaW1Jc01pbmU6IGJvb2xlYW4sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBGaWxlUmVhY3Rpb25zKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7XG4gICAgdXJpLFxuICAgIGNsYWltSWQsXG4gICAgbXlSZWFjdGlvbixcbiAgICBsaWtlQ291bnQsXG4gICAgZGlzbGlrZUNvdW50LFxuICAgIGlzTGl2ZXN0cmVhbUNsYWltLFxuICAgIGRvRmV0Y2hSZWFjdGlvbnMsXG4gICAgZG9SZWFjdGlvbkxpa2UsXG4gICAgZG9SZWFjdGlvbkRpc2xpa2UsXG4gICAgdW5hdXRob3JpemVkRm9yQ29udGVudCxcbiAgICBjbGFpbUlzTWluZSxcbiAgfSA9IHByb3BzO1xuXG4gIGNvbnN0IHVuYXV0aGVkVG9SZWFjdCA9IHVuYXV0aG9yaXplZEZvckNvbnRlbnQgJiYgIWNsYWltSXNNaW5lO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZnVuY3Rpb24gZmV0Y2hSZWFjdGlvbnMoKSB7XG4gICAgICBkb0ZldGNoUmVhY3Rpb25zKGNsYWltSWQpO1xuICAgIH1cblxuICAgIGxldCBmZXRjaEludGVydmFsO1xuICAgIGlmIChjbGFpbUlkKSB7XG4gICAgICBmZXRjaFJlYWN0aW9ucygpO1xuXG4gICAgICBpZiAoaXNMaXZlc3RyZWFtQ2xhaW0pIHtcbiAgICAgICAgZmV0Y2hJbnRlcnZhbCA9IHNldEludGVydmFsKGZldGNoUmVhY3Rpb25zLCBMSVZFX1JFQUNUSU9OX0ZFVENIX01TKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGZldGNoSW50ZXJ2YWwpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChmZXRjaEludGVydmFsKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbY2xhaW1JZCwgZG9GZXRjaFJlYWN0aW9ucywgaXNMaXZlc3RyZWFtQ2xhaW1dKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc25hbWVzKCdyYXRpby13cmFwcGVyJywgeyAnY29tbWVudF9fYWN0aW9ucy0tZGlzYWJsZWQnOiB1bmF1dGhlZFRvUmVhY3QgfSl9PlxuICAgICAgPExpa2VCdXR0b24gbXlSZWFjdGlvbj17bXlSZWFjdGlvbn0gcmVhY3Rpb25Db3VudD17bGlrZUNvdW50fSBvbkNsaWNrPXsoKSA9PiBkb1JlYWN0aW9uTGlrZSh1cmkpfSAvPlxuICAgICAgPERpc2xpa2VCdXR0b24gbXlSZWFjdGlvbj17bXlSZWFjdGlvbn0gcmVhY3Rpb25Db3VudD17ZGlzbGlrZUNvdW50fSBvbkNsaWNrPXsoKSA9PiBkb1JlYWN0aW9uRGlzbGlrZSh1cmkpfSAvPlxuICAgICAgPFJhdGlvQmFyIGxpa2VDb3VudD17bGlrZUNvdW50fSBkaXNsaWtlQ291bnQ9e2Rpc2xpa2VDb3VudH0gLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuY29uc3QgUGxhY2Vob2xkZXIgPSA8U2tlbGV0b24gdmFyaWFudD1cInRleHRcIiBhbmltYXRpb249XCJ3YXZlXCIgY2xhc3NOYW1lPVwicmVhY3Rpb24tY291bnQtcGxhY2Vob2xkZXJcIiAvPjtcblxudHlwZSBCdXR0b25Qcm9wcyA9IHtcbiAgbXlSZWFjdGlvbjogP3N0cmluZyxcbiAgcmVhY3Rpb25Db3VudDogbnVtYmVyLFxuICBvbkNsaWNrOiAoKSA9PiB2b2lkLFxufTtcblxuY29uc3QgTGlrZUJ1dHRvbiA9IChwcm9wczogQnV0dG9uUHJvcHMpID0+IHtcbiAgY29uc3QgeyBteVJlYWN0aW9uLCByZWFjdGlvbkNvdW50LCBvbkNsaWNrIH0gPSBwcm9wcztcblxuICByZXR1cm4gKFxuICAgIDxGaWxlQWN0aW9uQnV0dG9uXG4gICAgICB0aXRsZT17X18oJ0kgbGlrZSB0aGlzJyl9XG4gICAgICByZXF1aXJlc0F1dGhcbiAgICAgIGF1dGhTcmM9XCJmaWxlcmVhY3Rpb25fbGlrZVwiXG4gICAgICBjbGFzc05hbWU9e2NsYXNzbmFtZXMoJ2J1dHRvbi0tZmlsZS1hY3Rpb24gYnV0dG9uLWxpa2UnLCB7XG4gICAgICAgICdidXR0b24tLWZpcmUnOiBteVJlYWN0aW9uID09PSBSRUFDVElPTl9UWVBFUy5MSUtFLFxuICAgICAgfSl9XG4gICAgICBsYWJlbD17XG4gICAgICAgIDw+XG4gICAgICAgICAge215UmVhY3Rpb24gPT09IFJFQUNUSU9OX1RZUEVTLkxJS0UgJiYgKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b25fX2ZpcmUtZ2xvd1wiIC8+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uX19maXJlLXBhcnRpY2xlMVwiIC8+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uX19maXJlLXBhcnRpY2xlMlwiIC8+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uX19maXJlLXBhcnRpY2xlM1wiIC8+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uX19maXJlLXBhcnRpY2xlNFwiIC8+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uX19maXJlLXBhcnRpY2xlNVwiIC8+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uX19maXJlLXBhcnRpY2xlNlwiIC8+XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtOdW1iZXIuaXNJbnRlZ2VyKHJlYWN0aW9uQ291bnQpID8gPHNwYW4+e2Zvcm1hdE51bWJlcldpdGhDb21tYXMocmVhY3Rpb25Db3VudCwgMCl9PC9zcGFuPiA6IFBsYWNlaG9sZGVyfVxuICAgICAgICA8Lz5cbiAgICAgIH1cbiAgICAgIGljb25TaXplPXsxOH1cbiAgICAgIGljb249e215UmVhY3Rpb24gPT09IFJFQUNUSU9OX1RZUEVTLkxJS0UgPyBJQ09OUy5GSVJFX0FDVElWRSA6IElDT05TLkZJUkV9XG4gICAgICBvbkNsaWNrPXtvbkNsaWNrfVxuICAgIC8+XG4gICk7XG59O1xuXG5jb25zdCBEaXNsaWtlQnV0dG9uID0gKHByb3BzOiBCdXR0b25Qcm9wcykgPT4ge1xuICBjb25zdCB7IG15UmVhY3Rpb24sIHJlYWN0aW9uQ291bnQsIG9uQ2xpY2sgfSA9IHByb3BzO1xuXG4gIHJldHVybiAoXG4gICAgPEZpbGVBY3Rpb25CdXR0b25cbiAgICAgIHJlcXVpcmVzQXV0aFxuICAgICAgYXV0aFNyYz17J2ZpbGVyZWFjdGlvbl9kaXNsaWtlJ31cbiAgICAgIHRpdGxlPXtfXygnSSBkaXNsaWtlIHRoaXMnKX1cbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcygnYnV0dG9uLS1maWxlLWFjdGlvbiBidXR0b24tZGlzbGlrZScsIHtcbiAgICAgICAgJ2J1dHRvbi0tc2xpbWUnOiBteVJlYWN0aW9uID09PSBSRUFDVElPTl9UWVBFUy5ESVNMSUtFLFxuICAgICAgfSl9XG4gICAgICBsYWJlbD17XG4gICAgICAgIDw+XG4gICAgICAgICAge215UmVhY3Rpb24gPT09IFJFQUNUSU9OX1RZUEVTLkRJU0xJS0UgJiYgKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b25fX3NsaW1lLXN0YWluXCIgLz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b25fX3NsaW1lLWRyb3AxXCIgLz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b25fX3NsaW1lLWRyb3AyXCIgLz5cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG4gICAgICAgICAge051bWJlci5pc0ludGVnZXIocmVhY3Rpb25Db3VudCkgPyA8c3Bhbj57Zm9ybWF0TnVtYmVyV2l0aENvbW1hcyhyZWFjdGlvbkNvdW50LCAwKX08L3NwYW4+IDogUGxhY2Vob2xkZXJ9XG4gICAgICAgIDwvPlxuICAgICAgfVxuICAgICAgaWNvblNpemU9ezE4fVxuICAgICAgaWNvbj17bXlSZWFjdGlvbiA9PT0gUkVBQ1RJT05fVFlQRVMuRElTTElLRSA/IElDT05TLlNMSU1FX0FDVElWRSA6IElDT05TLlNMSU1FfVxuICAgICAgb25DbGljaz17b25DbGlja31cbiAgICAvPlxuICApO1xufTtcbiJdLCJtYXBwaW5ncyI6IkFBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBaUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQWRBO0FBcUJBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQU9BO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUlBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUF6QkE7QUFKQTtBQUNBO0FBaUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUlBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQXJCQTtBQUpBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../ui/component/fileReactions/view.jsx\n");

/***/ }),

/***/ "../ui/component/fileRenderFloating/index.js":
/*!***************************************************!*\
  !*** ../ui/component/fileRenderFloating/index.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-redux */ \"../node_modules/react-redux/es/index.js\");\n/* harmony import */ var redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux/selectors/claims */ \"../ui/redux/selectors/claims.js\");\n/* harmony import */ var redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux/selectors/file_info */ \"../ui/redux/selectors/file_info.js\");\n/* harmony import */ var redux_selectors_collections__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! redux/selectors/collections */ \"../ui/redux/selectors/collections.js\");\n/* harmony import */ var constants_settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! constants/settings */ \"../ui/constants/settings.js\");\n/* harmony import */ var constants_collections__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! constants/collections */ \"../ui/constants/collections.js\");\n/* harmony import */ var redux_selectors_content__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! redux/selectors/content */ \"../ui/redux/selectors/content.js\");\n/* harmony import */ var redux_selectors_settings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! redux/selectors/settings */ \"../ui/redux/selectors/settings.js\");\n/* harmony import */ var redux_actions_collections__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! redux/actions/collections */ \"../ui/redux/actions/collections.js\");\n/* harmony import */ var lbryinc__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! lbryinc */ \"../extras/lbryinc/index.js\");\n/* harmony import */ var redux_actions_content__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! redux/actions/content */ \"../ui/redux/actions/content.js\");\n/* harmony import */ var redux_actions_search__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! redux/actions/search */ \"../ui/redux/actions/search.js\");\n/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react-router */ \"../node_modules/react-router/esm/react-router.js\");\n/* harmony import */ var redux_selectors_app__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! redux/selectors/app */ \"../ui/redux/selectors/app.js\");\n/* harmony import */ var redux_selectors_livestream__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! redux/selectors/livestream */ \"../ui/redux/selectors/livestream.js\");\n/* harmony import */ var redux_actions_websocket__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! redux/actions/websocket */ \"../ui/redux/actions/websocket.js\");\n/* harmony import */ var util_claim__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! util/claim */ \"../ui/util/claim.js\");\n/* harmony import */ var redux_actions_app__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! redux/actions/app */ \"../ui/redux/actions/app.js\");\n/* harmony import */ var redux_selectors_memberships__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! redux/selectors/memberships */ \"../ui/redux/selectors/memberships.js\");\n/* harmony import */ var _view__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./view */ \"../ui/component/fileRenderFloating/view.jsx\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar select = function select(state, props) {\n  var location = props.location;\n  var search = location.search;\n  var urlParams = new URLSearchParams(search);\n  var collectionSidebarId = urlParams.get(constants_collections__WEBPACK_IMPORTED_MODULE_5__[\"COLLECTION_ID\"]);\n  var isFloating = Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_6__[\"makeSelectIsPlayerFloating\"])(location)(state);\n  var playingUri = Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_6__[\"selectPlayingUri\"])(state);\n  var uri = playingUri.uri,\n      collectionId = playingUri.collection.collectionId;\n  var claim = uri && Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectClaimForUri\"])(state, uri);\n\n  var _ref = claim || {},\n      claimId = _ref.claim_id,\n      channelClaim = _ref.signing_channel,\n      permanent_url = _ref.permanent_url;\n\n  var _ref2 = channelClaim || {},\n      channelUrl = _ref2.canonical_url;\n\n  var playingFromQueue = playingUri.source === constants_collections__WEBPACK_IMPORTED_MODULE_5__[\"QUEUE_ID\"];\n  var isInlinePlayer = Boolean(playingUri.source) && !isFloating;\n\n  var _ref3 = channelClaim || {},\n      channelClaimId = _ref3.claim_id;\n\n  return {\n    appDrawerOpen: Object(redux_selectors_app__WEBPACK_IMPORTED_MODULE_13__[\"selectHasAppDrawerOpen\"])(state),\n    channelUrl: channelUrl,\n    claimId: claimId,\n    claimWasPurchased: Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectClaimWasPurchasedForUri\"])(state, uri),\n    collectionId: collectionId,\n    collectionSidebarId: collectionSidebarId,\n    costInfo: Object(lbryinc__WEBPACK_IMPORTED_MODULE_9__[\"selectCostInfoForUri\"])(state, uri),\n    firstCollectionItemUrl: Object(redux_selectors_collections__WEBPACK_IMPORTED_MODULE_3__[\"selectFirstItemUrlForCollection\"])(state, collectionId),\n    floatingPlayerEnabled: playingFromQueue || isInlinePlayer || Object(redux_selectors_settings__WEBPACK_IMPORTED_MODULE_7__[\"selectClientSetting\"])(state, constants_settings__WEBPACK_IMPORTED_MODULE_4__[\"FLOATING_PLAYER\"]),\n    geoRestriction: Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectGeoRestrictionForUri\"])(state, uri),\n    hasClaimInQueue: permanent_url && Object(redux_selectors_collections__WEBPACK_IMPORTED_MODULE_3__[\"selectCollectionForIdHasClaimUrl\"])(state, constants_collections__WEBPACK_IMPORTED_MODULE_5__[\"QUEUE_ID\"], permanent_url),\n    isCurrentClaimLive: Object(redux_selectors_livestream__WEBPACK_IMPORTED_MODULE_14__[\"selectIsActiveLivestreamForUri\"])(state, uri),\n    isFloating: isFloating,\n    isLivestreamClaim: Object(util_claim__WEBPACK_IMPORTED_MODULE_16__[\"isStreamPlaceholderClaim\"])(claim),\n    isMature: Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectClaimIsNsfwForUri\"])(state, uri),\n    isProtectedContent: Boolean(Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectProtectedContentTagForUri\"])(state, uri)),\n    mainPlayerDimensions: Object(redux_selectors_app__WEBPACK_IMPORTED_MODULE_13__[\"selectMainPlayerDimensions\"])(state),\n    nextListUri: collectionId && Object(redux_selectors_collections__WEBPACK_IMPORTED_MODULE_3__[\"selectNextUrlForCollectionAndUrl\"])(state, uri, collectionId),\n    playingCollection: Object(redux_selectors_collections__WEBPACK_IMPORTED_MODULE_3__[\"selectCollectionForId\"])(state, collectionId),\n    playingUri: playingUri,\n    previousListUri: collectionId && Object(redux_selectors_collections__WEBPACK_IMPORTED_MODULE_3__[\"selectPreviousUrlForCollectionAndUrl\"])(state, uri, collectionId),\n    primaryUri: Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_6__[\"selectPrimaryUri\"])(state),\n    renderMode: Object(redux_selectors_content__WEBPACK_IMPORTED_MODULE_6__[\"makeSelectFileRenderModeForUri\"])(uri)(state),\n    socketConnection: Object(redux_selectors_livestream__WEBPACK_IMPORTED_MODULE_14__[\"selectSocketConnectionForId\"])(state, claimId),\n    streamingUrl: Object(redux_selectors_file_info__WEBPACK_IMPORTED_MODULE_2__[\"makeSelectStreamingUrlForUri\"])(uri)(state),\n    title: Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_1__[\"selectTitleForUri\"])(state, uri),\n    uri: uri,\n    videoAspectRatio: Object(util_claim__WEBPACK_IMPORTED_MODULE_16__[\"getVideoClaimAspectRatio\"])(claim),\n    videoTheaterMode: Object(redux_selectors_settings__WEBPACK_IMPORTED_MODULE_7__[\"selectClientSetting\"])(state, constants_settings__WEBPACK_IMPORTED_MODULE_4__[\"VIDEO_THEATER_MODE\"]),\n    unauthorizedForContent: Object(redux_selectors_memberships__WEBPACK_IMPORTED_MODULE_18__[\"selectIfUnauthorizedForContent\"])(state, channelClaimId, claimId, uri)\n  };\n};\n\nvar perform = {\n  doFetchRecommendedContent: redux_actions_search__WEBPACK_IMPORTED_MODULE_11__[\"doFetchRecommendedContent\"],\n  doUriInitiatePlay: redux_actions_content__WEBPACK_IMPORTED_MODULE_10__[\"doUriInitiatePlay\"],\n  doCommentSocketConnect: redux_actions_websocket__WEBPACK_IMPORTED_MODULE_15__[\"doCommentSocketConnect\"],\n  doCommentSocketDisconnect: redux_actions_websocket__WEBPACK_IMPORTED_MODULE_15__[\"doCommentSocketDisconnect\"],\n  doClearPlayingUri: redux_actions_content__WEBPACK_IMPORTED_MODULE_10__[\"doClearPlayingUri\"],\n  doClearQueueList: redux_actions_collections__WEBPACK_IMPORTED_MODULE_8__[\"doClearQueueList\"],\n  doOpenModal: redux_actions_app__WEBPACK_IMPORTED_MODULE_17__[\"doOpenModal\"],\n  doClearPlayingSource: redux_actions_content__WEBPACK_IMPORTED_MODULE_10__[\"doClearPlayingSource\"]\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_router__WEBPACK_IMPORTED_MODULE_12__[\"withRouter\"])(Object(react_redux__WEBPACK_IMPORTED_MODULE_0__[\"connect\"])(select, perform)(_view__WEBPACK_IMPORTED_MODULE_19__[\"default\"])));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvY29tcG9uZW50L2ZpbGVSZW5kZXJGbG9hdGluZy9pbmRleC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi91aS9jb21wb25lbnQvZmlsZVJlbmRlckZsb2F0aW5nL2luZGV4LmpzPzUxOWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB7XG4gIHNlbGVjdENsYWltRm9yVXJpLFxuICBzZWxlY3RUaXRsZUZvclVyaSxcbiAgc2VsZWN0Q2xhaW1XYXNQdXJjaGFzZWRGb3JVcmksXG4gIHNlbGVjdEdlb1Jlc3RyaWN0aW9uRm9yVXJpLFxuICBzZWxlY3RDbGFpbUlzTnNmd0ZvclVyaSxcbiAgc2VsZWN0UHJvdGVjdGVkQ29udGVudFRhZ0ZvclVyaSxcbn0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2NsYWltcyc7XG5pbXBvcnQgeyBtYWtlU2VsZWN0U3RyZWFtaW5nVXJsRm9yVXJpIH0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2ZpbGVfaW5mbyc7XG5pbXBvcnQge1xuICBzZWxlY3RDb2xsZWN0aW9uRm9ySWQsXG4gIHNlbGVjdE5leHRVcmxGb3JDb2xsZWN0aW9uQW5kVXJsLFxuICBzZWxlY3RQcmV2aW91c1VybEZvckNvbGxlY3Rpb25BbmRVcmwsXG4gIHNlbGVjdENvbGxlY3Rpb25Gb3JJZEhhc0NsYWltVXJsLFxuICBzZWxlY3RGaXJzdEl0ZW1VcmxGb3JDb2xsZWN0aW9uLFxufSBmcm9tICdyZWR1eC9zZWxlY3RvcnMvY29sbGVjdGlvbnMnO1xuaW1wb3J0ICogYXMgU0VUVElOR1MgZnJvbSAnY29uc3RhbnRzL3NldHRpbmdzJztcbmltcG9ydCAqIGFzIENPTExFQ1RJT05TX0NPTlNUUyBmcm9tICdjb25zdGFudHMvY29sbGVjdGlvbnMnO1xuaW1wb3J0IHtcbiAgbWFrZVNlbGVjdElzUGxheWVyRmxvYXRpbmcsXG4gIHNlbGVjdFByaW1hcnlVcmksXG4gIHNlbGVjdFBsYXlpbmdVcmksXG4gIG1ha2VTZWxlY3RGaWxlUmVuZGVyTW9kZUZvclVyaSxcbn0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2NvbnRlbnQnO1xuaW1wb3J0IHsgc2VsZWN0Q2xpZW50U2V0dGluZyB9IGZyb20gJ3JlZHV4L3NlbGVjdG9ycy9zZXR0aW5ncyc7XG5pbXBvcnQgeyBkb0NsZWFyUXVldWVMaXN0IH0gZnJvbSAncmVkdXgvYWN0aW9ucy9jb2xsZWN0aW9ucyc7XG5pbXBvcnQgeyBzZWxlY3RDb3N0SW5mb0ZvclVyaSB9IGZyb20gJ2xicnlpbmMnO1xuaW1wb3J0IHsgZG9VcmlJbml0aWF0ZVBsYXksIGRvQ2xlYXJQbGF5aW5nVXJpLCBkb0NsZWFyUGxheWluZ1NvdXJjZSB9IGZyb20gJ3JlZHV4L2FjdGlvbnMvY29udGVudCc7XG5pbXBvcnQgeyBkb0ZldGNoUmVjb21tZW5kZWRDb250ZW50IH0gZnJvbSAncmVkdXgvYWN0aW9ucy9zZWFyY2gnO1xuaW1wb3J0IHsgd2l0aFJvdXRlciB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5pbXBvcnQgeyBzZWxlY3RIYXNBcHBEcmF3ZXJPcGVuLCBzZWxlY3RNYWluUGxheWVyRGltZW5zaW9ucyB9IGZyb20gJ3JlZHV4L3NlbGVjdG9ycy9hcHAnO1xuaW1wb3J0IHsgc2VsZWN0SXNBY3RpdmVMaXZlc3RyZWFtRm9yVXJpLCBzZWxlY3RTb2NrZXRDb25uZWN0aW9uRm9ySWQgfSBmcm9tICdyZWR1eC9zZWxlY3RvcnMvbGl2ZXN0cmVhbSc7XG5pbXBvcnQgeyBkb0NvbW1lbnRTb2NrZXRDb25uZWN0LCBkb0NvbW1lbnRTb2NrZXREaXNjb25uZWN0IH0gZnJvbSAncmVkdXgvYWN0aW9ucy93ZWJzb2NrZXQnO1xuaW1wb3J0IHsgaXNTdHJlYW1QbGFjZWhvbGRlckNsYWltLCBnZXRWaWRlb0NsYWltQXNwZWN0UmF0aW8gfSBmcm9tICd1dGlsL2NsYWltJztcbmltcG9ydCB7IGRvT3Blbk1vZGFsIH0gZnJvbSAncmVkdXgvYWN0aW9ucy9hcHAnO1xuaW1wb3J0IHsgc2VsZWN0SWZVbmF1dGhvcml6ZWRGb3JDb250ZW50IH0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL21lbWJlcnNoaXBzJztcblxuaW1wb3J0IEZpbGVSZW5kZXJGbG9hdGluZyBmcm9tICcuL3ZpZXcnO1xuXG5jb25zdCBzZWxlY3QgPSAoc3RhdGUsIHByb3BzKSA9PiB7XG4gIGNvbnN0IHsgbG9jYXRpb24gfSA9IHByb3BzO1xuICBjb25zdCB7IHNlYXJjaCB9ID0gbG9jYXRpb247XG4gIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoc2VhcmNoKTtcbiAgY29uc3QgY29sbGVjdGlvblNpZGViYXJJZCA9IHVybFBhcmFtcy5nZXQoQ09MTEVDVElPTlNfQ09OU1RTLkNPTExFQ1RJT05fSUQpO1xuXG4gIGNvbnN0IGlzRmxvYXRpbmcgPSBtYWtlU2VsZWN0SXNQbGF5ZXJGbG9hdGluZyhsb2NhdGlvbikoc3RhdGUpO1xuXG4gIGNvbnN0IHBsYXlpbmdVcmkgPSBzZWxlY3RQbGF5aW5nVXJpKHN0YXRlKTtcbiAgY29uc3Qge1xuICAgIHVyaSxcbiAgICBjb2xsZWN0aW9uOiB7IGNvbGxlY3Rpb25JZCB9LFxuICB9ID0gcGxheWluZ1VyaTtcblxuICBjb25zdCBjbGFpbSA9IHVyaSAmJiBzZWxlY3RDbGFpbUZvclVyaShzdGF0ZSwgdXJpKTtcbiAgY29uc3QgeyBjbGFpbV9pZDogY2xhaW1JZCwgc2lnbmluZ19jaGFubmVsOiBjaGFubmVsQ2xhaW0sIHBlcm1hbmVudF91cmwgfSA9IGNsYWltIHx8IHt9O1xuICBjb25zdCB7IGNhbm9uaWNhbF91cmw6IGNoYW5uZWxVcmwgfSA9IGNoYW5uZWxDbGFpbSB8fCB7fTtcbiAgY29uc3QgcGxheWluZ0Zyb21RdWV1ZSA9IHBsYXlpbmdVcmkuc291cmNlID09PSBDT0xMRUNUSU9OU19DT05TVFMuUVVFVUVfSUQ7XG4gIGNvbnN0IGlzSW5saW5lUGxheWVyID0gQm9vbGVhbihwbGF5aW5nVXJpLnNvdXJjZSkgJiYgIWlzRmxvYXRpbmc7XG5cbiAgY29uc3QgeyBjbGFpbV9pZDogY2hhbm5lbENsYWltSWQgfSA9IGNoYW5uZWxDbGFpbSB8fCB7fTtcblxuICByZXR1cm4ge1xuICAgIGFwcERyYXdlck9wZW46IHNlbGVjdEhhc0FwcERyYXdlck9wZW4oc3RhdGUpLFxuICAgIGNoYW5uZWxVcmwsXG4gICAgY2xhaW1JZCxcbiAgICBjbGFpbVdhc1B1cmNoYXNlZDogc2VsZWN0Q2xhaW1XYXNQdXJjaGFzZWRGb3JVcmkoc3RhdGUsIHVyaSksXG4gICAgY29sbGVjdGlvbklkLFxuICAgIGNvbGxlY3Rpb25TaWRlYmFySWQsXG4gICAgY29zdEluZm86IHNlbGVjdENvc3RJbmZvRm9yVXJpKHN0YXRlLCB1cmkpLFxuICAgIGZpcnN0Q29sbGVjdGlvbkl0ZW1Vcmw6IHNlbGVjdEZpcnN0SXRlbVVybEZvckNvbGxlY3Rpb24oc3RhdGUsIGNvbGxlY3Rpb25JZCksXG4gICAgZmxvYXRpbmdQbGF5ZXJFbmFibGVkOiBwbGF5aW5nRnJvbVF1ZXVlIHx8IGlzSW5saW5lUGxheWVyIHx8IHNlbGVjdENsaWVudFNldHRpbmcoc3RhdGUsIFNFVFRJTkdTLkZMT0FUSU5HX1BMQVlFUiksXG4gICAgZ2VvUmVzdHJpY3Rpb246IHNlbGVjdEdlb1Jlc3RyaWN0aW9uRm9yVXJpKHN0YXRlLCB1cmkpLFxuICAgIGhhc0NsYWltSW5RdWV1ZTpcbiAgICAgIHBlcm1hbmVudF91cmwgJiYgc2VsZWN0Q29sbGVjdGlvbkZvcklkSGFzQ2xhaW1Vcmwoc3RhdGUsIENPTExFQ1RJT05TX0NPTlNUUy5RVUVVRV9JRCwgcGVybWFuZW50X3VybCksXG4gICAgaXNDdXJyZW50Q2xhaW1MaXZlOiBzZWxlY3RJc0FjdGl2ZUxpdmVzdHJlYW1Gb3JVcmkoc3RhdGUsIHVyaSksXG4gICAgaXNGbG9hdGluZyxcbiAgICBpc0xpdmVzdHJlYW1DbGFpbTogaXNTdHJlYW1QbGFjZWhvbGRlckNsYWltKGNsYWltKSxcbiAgICBpc01hdHVyZTogc2VsZWN0Q2xhaW1Jc05zZndGb3JVcmkoc3RhdGUsIHVyaSksXG4gICAgaXNQcm90ZWN0ZWRDb250ZW50OiBCb29sZWFuKHNlbGVjdFByb3RlY3RlZENvbnRlbnRUYWdGb3JVcmkoc3RhdGUsIHVyaSkpLFxuICAgIG1haW5QbGF5ZXJEaW1lbnNpb25zOiBzZWxlY3RNYWluUGxheWVyRGltZW5zaW9ucyhzdGF0ZSksXG4gICAgbmV4dExpc3RVcmk6IGNvbGxlY3Rpb25JZCAmJiBzZWxlY3ROZXh0VXJsRm9yQ29sbGVjdGlvbkFuZFVybChzdGF0ZSwgdXJpLCBjb2xsZWN0aW9uSWQpLFxuICAgIHBsYXlpbmdDb2xsZWN0aW9uOiBzZWxlY3RDb2xsZWN0aW9uRm9ySWQoc3RhdGUsIGNvbGxlY3Rpb25JZCksXG4gICAgcGxheWluZ1VyaSxcbiAgICBwcmV2aW91c0xpc3RVcmk6IGNvbGxlY3Rpb25JZCAmJiBzZWxlY3RQcmV2aW91c1VybEZvckNvbGxlY3Rpb25BbmRVcmwoc3RhdGUsIHVyaSwgY29sbGVjdGlvbklkKSxcbiAgICBwcmltYXJ5VXJpOiBzZWxlY3RQcmltYXJ5VXJpKHN0YXRlKSxcbiAgICByZW5kZXJNb2RlOiBtYWtlU2VsZWN0RmlsZVJlbmRlck1vZGVGb3JVcmkodXJpKShzdGF0ZSksXG4gICAgc29ja2V0Q29ubmVjdGlvbjogc2VsZWN0U29ja2V0Q29ubmVjdGlvbkZvcklkKHN0YXRlLCBjbGFpbUlkKSxcbiAgICBzdHJlYW1pbmdVcmw6IG1ha2VTZWxlY3RTdHJlYW1pbmdVcmxGb3JVcmkodXJpKShzdGF0ZSksXG4gICAgdGl0bGU6IHNlbGVjdFRpdGxlRm9yVXJpKHN0YXRlLCB1cmkpLFxuICAgIHVyaSxcbiAgICB2aWRlb0FzcGVjdFJhdGlvOiBnZXRWaWRlb0NsYWltQXNwZWN0UmF0aW8oY2xhaW0pLFxuICAgIHZpZGVvVGhlYXRlck1vZGU6IHNlbGVjdENsaWVudFNldHRpbmcoc3RhdGUsIFNFVFRJTkdTLlZJREVPX1RIRUFURVJfTU9ERSksXG4gICAgdW5hdXRob3JpemVkRm9yQ29udGVudDogc2VsZWN0SWZVbmF1dGhvcml6ZWRGb3JDb250ZW50KHN0YXRlLCBjaGFubmVsQ2xhaW1JZCwgY2xhaW1JZCwgdXJpKSxcbiAgfTtcbn07XG5cbmNvbnN0IHBlcmZvcm0gPSB7XG4gIGRvRmV0Y2hSZWNvbW1lbmRlZENvbnRlbnQsXG4gIGRvVXJpSW5pdGlhdGVQbGF5LFxuICBkb0NvbW1lbnRTb2NrZXRDb25uZWN0LFxuICBkb0NvbW1lbnRTb2NrZXREaXNjb25uZWN0LFxuICBkb0NsZWFyUGxheWluZ1VyaSxcbiAgZG9DbGVhclF1ZXVlTGlzdCxcbiAgZG9PcGVuTW9kYWwsXG4gIGRvQ2xlYXJQbGF5aW5nU291cmNlLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFJvdXRlcihjb25uZWN0KHNlbGVjdCwgcGVyZm9ybSkoRmlsZVJlbmRlckZsb2F0aW5nKSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFRQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFFQTtBQUVBO0FBUkE7QUFBQTtBQWNBO0FBQ0E7QUFmQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBZ0JBO0FBQ0E7QUFDQTtBQW5CQTtBQUFBO0FBQ0E7QUFxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEvQkE7QUF0QkE7QUFDQTtBQXdEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../ui/component/fileRenderFloating/index.js\n");

/***/ }),

/***/ "../ui/component/fileRenderFloating/view.jsx":
/*!***************************************************!*\
  !*** ../ui/component/fileRenderFloating/view.jsx ***!
  \***************************************************/
/*! exports provided: HEADER_HEIGHT_MOBILE, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HEADER_HEIGHT_MOBILE\", function() { return HEADER_HEIGHT_MOBILE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return FileRenderFloating; });\n/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @emotion/react */ \"../node_modules/@emotion/react/dist/emotion-react.browser.esm.js\");\n/* harmony import */ var constants_modal_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! constants/modal_types */ \"../ui/constants/modal_types.js\");\n/* harmony import */ var constants_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! constants/icons */ \"../ui/constants/icons.js\");\n/* harmony import */ var constants_file_render_modes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! constants/file_render_modes */ \"../ui/constants/file_render_modes.js\");\n/* harmony import */ var constants_player__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! constants/player */ \"../ui/constants/player.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ \"../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var component_button__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! component/button */ \"../ui/component/button/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! classnames */ \"../node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var component_common_loading_screen__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! component/common/loading-screen */ \"../ui/component/common/loading-screen.jsx\");\n/* harmony import */ var component_fileRender__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! component/fileRender */ \"../ui/component/fileRender/index.js\");\n/* harmony import */ var component_uriIndicator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! component/uriIndicator */ \"../ui/component/uriIndicator/index.js\");\n/* harmony import */ var effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! effects/use-persisted-state */ \"../ui/effects/use-persisted-state.js\");\n/* harmony import */ var page_file_view__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! page/file/view */ \"../ui/page/file/view.jsx\");\n/* harmony import */ var react_draggable__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react-draggable */ \"../node_modules/react-draggable/build/cjs/cjs.js\");\n/* harmony import */ var react_draggable__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react_draggable__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var util_full_screen__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! util/full-screen */ \"../ui/util/full-screen.js\");\n/* harmony import */ var util_url__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! util/url */ \"../ui/util/url.js\");\n/* harmony import */ var effects_use_screensize__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! effects/use-screensize */ \"../ui/effects/use-screensize.js\");\n/* harmony import */ var util_debounce__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! util/debounce */ \"../ui/util/debounce.js\");\n/* harmony import */ var util_lbryURI__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! util/lbryURI */ \"../ui/util/lbryURI.js\");\n/* harmony import */ var component_autoplayCountdown__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! component/autoplayCountdown */ \"../ui/component/autoplayCountdown/index.js\");\n/* harmony import */ var effects_use_play_next__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! effects/use-play-next */ \"../ui/effects/use-play-next.js\");\n/* harmony import */ var util_window__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! util/window */ \"../ui/util/window.js\");\n/* harmony import */ var component_playlistCard__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! component/playlistCard */ \"../ui/component/playlistCard/index.js\");\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n} // $FlowFixMe\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // scss/init/vars.scss\n// --header-height\n\nvar HEADER_HEIGHT = 60; // --header-height-mobile\n\nvar HEADER_HEIGHT_MOBILE = 56;\nvar DEBOUNCE_WINDOW_RESIZE_HANDLER_MS = 100;\nvar CONTENT_VIEWER_CLASS = 'content__viewer'; // ****************************************************************************\n// ****************************************************************************\n\nfunction FileRenderFloating(props) {\n  var _classnames;\n\n  var appDrawerOpen = props.appDrawerOpen,\n      channelUrl = props.channelUrl,\n      claimId = props.claimId,\n      claimWasPurchased = props.claimWasPurchased,\n      collectionId = props.collectionId,\n      collectionSidebarId = props.collectionSidebarId,\n      costInfo = props.costInfo,\n      doClearPlayingSource = props.doClearPlayingSource,\n      doClearPlayingUri = props.doClearPlayingUri,\n      doClearQueueList = props.doClearQueueList,\n      doCommentSocketConnect = props.doCommentSocketConnect,\n      doCommentSocketDisconnect = props.doCommentSocketDisconnect,\n      doFetchRecommendedContent = props.doFetchRecommendedContent,\n      doOpenModal = props.doOpenModal,\n      doUriInitiatePlay = props.doUriInitiatePlay,\n      firstCollectionItemUrl = props.firstCollectionItemUrl,\n      floatingPlayerEnabled = props.floatingPlayerEnabled,\n      geoRestriction = props.geoRestriction,\n      hasClaimInQueue = props.hasClaimInQueue,\n      isCurrentClaimLive = props.isCurrentClaimLive,\n      isFloating = props.isFloating,\n      isLivestreamClaim = props.isLivestreamClaim,\n      isMature = props.isMature,\n      isProtectedContent = props.isProtectedContent,\n      location = props.location,\n      mainPlayerDimensions = props.mainPlayerDimensions,\n      nextListUri = props.nextListUri,\n      playingCollection = props.playingCollection,\n      playingUri = props.playingUri,\n      previousListUri = props.previousListUri,\n      primaryUri = props.primaryUri,\n      renderMode = props.renderMode,\n      socketConnection = props.socketConnection,\n      streamingUrl = props.streamingUrl,\n      title = props.title,\n      unauthorizedForContent = props.unauthorizedForContent,\n      uri = props.uri,\n      videoAspectRatio = props.videoAspectRatio,\n      videoTheaterMode = props.videoTheaterMode;\n  var state = location.state;\n\n  var _ref = state || {},\n      overrideFloating = _ref.overrideFloating;\n\n  var isMobile = Object(effects_use_screensize__WEBPACK_IMPORTED_MODULE_16__[\"useIsMobile\"])();\n  var isTabletLandscape = Object(effects_use_screensize__WEBPACK_IMPORTED_MODULE_16__[\"useIsLandscapeScreen\"])() && !isMobile;\n  var isLandscapeRotated = Object(effects_use_screensize__WEBPACK_IMPORTED_MODULE_16__[\"useIsMobileLandscape\"])();\n  var initialMobileState = react__WEBPACK_IMPORTED_MODULE_5___default.a.useRef(isMobile);\n  var initialPlayerHeight = react__WEBPACK_IMPORTED_MODULE_5___default.a.useRef();\n  var resizedBetweenFloating = react__WEBPACK_IMPORTED_MODULE_5___default.a.useRef();\n  var playingUrl = playingUri.uri,\n      playingUriSource = playingUri.source,\n      playingPrimaryUri = playingUri.primaryUri;\n  var isComment = playingUriSource === 'comment';\n  var mainFilePlaying = Boolean(!isFloating && primaryUri && Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_18__[\"isURIEqual\"])(uri, primaryUri));\n  var noFloatingPlayer = !overrideFloating && (!isFloating || !floatingPlayerEnabled);\n\n  var _React$useState = react__WEBPACK_IMPORTED_MODULE_5___default.a.useState(),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      fileViewerRect = _React$useState2[0],\n      setFileViewerRect = _React$useState2[1];\n\n  var _React$useState3 = react__WEBPACK_IMPORTED_MODULE_5___default.a.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      wasDragging = _React$useState4[0],\n      setWasDragging = _React$useState4[1];\n\n  var _React$useState5 = react__WEBPACK_IMPORTED_MODULE_5___default.a.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      doNavigate = _React$useState6[0],\n      setDoNavigate = _React$useState6[1];\n\n  var _React$useState7 = react__WEBPACK_IMPORTED_MODULE_5___default.a.useState(true),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      shouldPlayNext = _React$useState8[0],\n      setPlayNext = _React$useState8[1];\n\n  var _React$useState9 = react__WEBPACK_IMPORTED_MODULE_5___default.a.useState(false),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      countdownCanceled = _React$useState10[0],\n      setCountdownCanceled = _React$useState10[1];\n\n  var _React$useState11 = react__WEBPACK_IMPORTED_MODULE_5___default.a.useState(false),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      forceDisable = _React$useState12[0],\n      setForceDisable = _React$useState12[1];\n\n  var _usePersistedState = Object(effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_11__[\"default\"])('floating-file-viewer:position', constants_player__WEBPACK_IMPORTED_MODULE_4__[\"DEFAULT_INITIAL_FLOATING_POS\"]),\n      _usePersistedState2 = _slicedToArray(_usePersistedState, 2),\n      position = _usePersistedState2[0],\n      setPosition = _usePersistedState2[1];\n\n  var relativePosRef = react__WEBPACK_IMPORTED_MODULE_5___default.a.useRef(Object(util_window__WEBPACK_IMPORTED_MODULE_21__[\"calculateRelativePos\"])(position.x, position.y));\n  var noPlayerHeight = (fileViewerRect === null || fileViewerRect === void 0 ? void 0 : fileViewerRect.height) === 0;\n  var navigateUrl = (playingPrimaryUri || playingUrl || '') + (collectionId ? Object(util_url__WEBPACK_IMPORTED_MODULE_15__[\"generateListSearchUrlParams\"])(collectionId) : '');\n  var isFree = costInfo && costInfo.cost === 0;\n  var isLoading = !costInfo || !streamingUrl && !costInfo.cost;\n  var canViewFile = isFree || claimWasPurchased;\n  var isPlayable = constants_file_render_modes__WEBPACK_IMPORTED_MODULE_3__[\"FLOATING_MODES\"].includes(renderMode) || isCurrentClaimLive;\n  var isReadyToPlay = isCurrentClaimLive || isPlayable && streamingUrl;\n  var theaterMode = renderMode === 'video' || renderMode === 'audio' ? videoTheaterMode : false; // ****************************************************************************\n  // FUNCTIONS\n  // ****************************************************************************\n\n  var handleResize = react__WEBPACK_IMPORTED_MODULE_5___default.a.useCallback(function () {\n    var filePageElement = document.querySelector(\".\".concat(page_file_view__WEBPACK_IMPORTED_MODULE_12__[\"PRIMARY_PLAYER_WRAPPER_CLASS\"]));\n    var playingElement = mainFilePlaying ? filePageElement : document.querySelector(\".\".concat(constants_player__WEBPACK_IMPORTED_MODULE_4__[\"INLINE_PLAYER_WRAPPER_CLASS\"]));\n    var element = playingElement || filePageElement;\n    if (!element) return;\n    var rect = element.getBoundingClientRect(); // getBoundingClientRect returns a DomRect, not an object\n\n    var objectRect = {\n      top: rect.top,\n      right: rect.right,\n      bottom: rect.bottom,\n      left: rect.left,\n      width: rect.width,\n      height: rect.height,\n      // $FlowFixMe\n      x: rect.x\n    }; // replace the initial value every time the window is resized if isMobile is true,\n    // since it could be a portrait -> landscape rotation switch, or if it was a mobile - desktop\n    // switch, so use the ref to compare the initial state\n\n    var resizedEnoughForMobileSwitch = isMobile !== initialMobileState.current;\n\n    if (videoAspectRatio && (!initialPlayerHeight.current || isMobile || resizedEnoughForMobileSwitch)) {\n      var heightForRect = Object(util_window__WEBPACK_IMPORTED_MODULE_21__[\"getPossiblePlayerHeight\"])(videoAspectRatio * rect.width, isMobile);\n      initialPlayerHeight.current = heightForRect;\n    } // $FlowFixMe\n\n\n    setFileViewerRect(_objectSpread({}, objectRect, {\n      windowOffset: window.pageYOffset\n    })); // force re-calculate when sourceId changes (playing a new claimLink on the same page)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isMobile, mainFilePlaying, videoAspectRatio, playingUri.sourceId]);\n  var restoreToRelativePosition = react__WEBPACK_IMPORTED_MODULE_5___default.a.useCallback(function () {\n    var SCROLL_BAR_PX = 12; // root: --body-scrollbar-width\n\n    var screenW = Object(util_window__WEBPACK_IMPORTED_MODULE_21__[\"getScreenWidth\"])() - SCROLL_BAR_PX;\n    var screenH = Object(util_window__WEBPACK_IMPORTED_MODULE_21__[\"getScreenHeight\"])();\n    var newX = Math.round(relativePosRef.current.x * screenW);\n    var newY = Math.round(relativePosRef.current.y * screenH);\n    var clampPosition = Object(util_window__WEBPACK_IMPORTED_MODULE_21__[\"clampFloatingPlayerToScreen\"])({\n      x: newX,\n      y: newY\n    });\n\n    if (![clampPosition.x, clampPosition.y].some(isNaN)) {\n      setPosition(clampPosition);\n    }\n  }, [setPosition]);\n  var clampToScreenOnResize = react__WEBPACK_IMPORTED_MODULE_5___default.a.useCallback(Object(util_debounce__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(restoreToRelativePosition, DEBOUNCE_WINDOW_RESIZE_HANDLER_MS), []); // For playlists when pressing next/previous etc and switching players\n\n  function resetState() {\n    setCountdownCanceled(false);\n    setDoNavigate(false);\n    setPlayNext(true);\n  } // ****************************************************************************\n  // EFFECTS\n  // ****************************************************************************\n\n\n  Object(effects_use_play_next__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(isFloating, collectionId, shouldPlayNext, nextListUri || firstCollectionItemUrl, previousListUri, doNavigate, doUriInitiatePlay, resetState); // Establish web socket connection for viewer count.\n\n  react__WEBPACK_IMPORTED_MODULE_5___default.a.useEffect(function () {\n    if (!claimId || !channelUrl || !isCurrentClaimLive) return;\n    var channelName = Object(util_url__WEBPACK_IMPORTED_MODULE_15__[\"formatLbryChannelName\"])(channelUrl);\n    var reversedClaimId = claimId.split('').reverse().join('');\n    var claimIdToUse = isProtectedContent ? reversedClaimId : claimId; // Only connect if not yet connected, so for example clicked on an embed instead of accessing\n    // from the Livestream page\n\n    if (!(socketConnection !== null && socketConnection !== void 0 && socketConnection.connected) && !unauthorizedForContent) {\n      doCommentSocketConnect(uri, channelName, claimIdToUse, undefined, isProtectedContent);\n    } // This will be used to disconnect for every case, since this is the main player component\n\n\n    return function () {\n      if (socketConnection !== null && socketConnection !== void 0 && socketConnection.connected && !unauthorizedForContent) {\n        doCommentSocketDisconnect(claimId, channelName);\n      }\n    };\n  }, [channelUrl, claimId, doCommentSocketConnect, doCommentSocketDisconnect, isCurrentClaimLive, socketConnection, uri]);\n  react__WEBPACK_IMPORTED_MODULE_5___default.a.useEffect(function () {\n    if (playingPrimaryUri || playingUrl || noPlayerHeight || collectionSidebarId) {\n      handleResize();\n      setCountdownCanceled(false);\n    }\n  }, [handleResize, playingPrimaryUri, theaterMode, playingUrl, noPlayerHeight, collectionSidebarId]); // Listen to main-window resizing and adjust the floating player position accordingly:\n\n  react__WEBPACK_IMPORTED_MODULE_5___default.a.useEffect(function () {\n    // intended to only run once: when floating player switches between true - false\n    // otherwise handleResize() can run twice when this effect re-runs, so use\n    // resizedBetweenFloating ref\n    if (isFloating) {\n      // Ensure player is within screen when 'isFloating' changes.\n      restoreToRelativePosition();\n      resizedBetweenFloating.current = false;\n    } else if (!resizedBetweenFloating.current) {\n      handleResize();\n      resizedBetweenFloating.current = true;\n    }\n\n    function onWindowResize() {\n      if (isFloating) clampToScreenOnResize();\n      if (collectionSidebarId || !isFloating) handleResize();\n    }\n\n    window.addEventListener('resize', onWindowResize);\n    if (!isFloating && !isMobile) Object(util_full_screen__WEBPACK_IMPORTED_MODULE_14__[\"onFullscreenChange\"])(window, 'add', handleResize);\n    return function () {\n      window.removeEventListener('resize', onWindowResize);\n      if (!isFloating && !isMobile) Object(util_full_screen__WEBPACK_IMPORTED_MODULE_14__[\"onFullscreenChange\"])(window, 'remove', handleResize);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [clampToScreenOnResize, handleResize, isFloating, collectionSidebarId]);\n  react__WEBPACK_IMPORTED_MODULE_5___default.a.useEffect(function () {\n    // Initial update for relativePosRef:\n    relativePosRef.current = Object(util_window__WEBPACK_IMPORTED_MODULE_21__[\"calculateRelativePos\"])(position.x, position.y); // eslint-disable-next-line react-hooks/exhaustive-deps -- Only on mount\n  }, []);\n  react__WEBPACK_IMPORTED_MODULE_5___default.a.useEffect(function () {\n    if (isFloating && isComment) {\n      // When the player begins floating, remove the comment source\n      // so that it doesn't try to resize again in case of going back\n      // to the origin's comment section and fail to position correctly\n      doClearPlayingSource();\n    }\n  }, [doClearPlayingSource, isComment, isFloating]);\n  react__WEBPACK_IMPORTED_MODULE_5___default.a.useEffect(function () {\n    if (isFloating) doFetchRecommendedContent(uri);\n  }, [doFetchRecommendedContent, isFloating, uri]);\n  react__WEBPACK_IMPORTED_MODULE_5___default.a.useEffect(function () {\n    return function () {\n      // basically if switched videos (playingUrl change or unmount),\n      // erase the data so it can be re-calculated\n      if (playingUrl) {\n        initialPlayerHeight.current = undefined;\n      }\n    };\n  }, [playingUrl]);\n  react__WEBPACK_IMPORTED_MODULE_5___default.a.useEffect(function () {\n    if (primaryUri && uri && primaryUri !== uri && !overrideFloating && !floatingPlayerEnabled && playingUrl) {\n      doClearPlayingUri();\n    }\n  }, [doClearPlayingUri, floatingPlayerEnabled, overrideFloating, playingUrl, primaryUri, uri]);\n\n  if (geoRestriction || !isPlayable && !collectionSidebarId || !uri && !collectionSidebarId || isFloating && noFloatingPlayer || collectionId && !isFloating && (!canViewFile && !nextListUri || countdownCanceled) || isLivestreamClaim && !isCurrentClaimLive) {\n    return null;\n  } // ****************************************************************************\n  // RENDER\n  // ****************************************************************************\n\n\n  function isDraggingVideojsComponent(e) {\n    var _e$target;\n\n    var className = e === null || e === void 0 ? void 0 : (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.className;\n    return typeof className === 'string' && (className.includes('vjs-volume-control') || className.includes('vjs-volume-level') || className.includes('vjs-mouse-display'));\n  }\n\n  function handleDragStart(e) {\n    if (isDraggingVideojsComponent(e)) {\n      return false;\n    } // Not really necessary, but reset just in case 'handleStop' didn't fire.\n\n\n    setWasDragging(false);\n  }\n\n  function handleDragMove(e, ui) {\n    if (isDraggingVideojsComponent(e)) {\n      return false;\n    }\n\n    var x = position.x,\n        y = position.y;\n    var newX = ui.x;\n    var newY = ui.y; // Mark as dragging if the position changed and we were not dragging before.\n\n    if (!wasDragging && (newX !== x || newY !== y)) {\n      setWasDragging(true);\n    }\n  }\n\n  function handleDragStop(e, ui) {\n    if (isDraggingVideojsComponent(e)) {\n      return false;\n    }\n\n    if (wasDragging) setWasDragging(false);\n    var x = ui.x,\n        y = ui.y;\n    var newPos = {\n      x: x,\n      y: y\n    };\n\n    if (newPos.x !== position.x || newPos.y !== position.y) {\n      newPos = Object(util_window__WEBPACK_IMPORTED_MODULE_21__[\"clampFloatingPlayerToScreen\"])(newPos);\n      setPosition(newPos);\n      relativePosRef.current = Object(util_window__WEBPACK_IMPORTED_MODULE_21__[\"calculateRelativePos\"])(newPos.x, newPos.y);\n    }\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_5___default.a.Fragment, null, uri && videoAspectRatio || collectionSidebarId ? react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(PlayerGlobalStyles, {\n    videoAspectRatio: videoAspectRatio,\n    theaterMode: theaterMode,\n    appDrawerOpen: appDrawerOpen && !isLandscapeRotated && !isTabletLandscape,\n    initialPlayerHeight: initialPlayerHeight,\n    isFloating: isFloating,\n    fileViewerRect: fileViewerRect || mainPlayerDimensions,\n    mainFilePlaying: mainFilePlaying,\n    isLandscapeRotated: isLandscapeRotated,\n    isTabletLandscape: isTabletLandscape\n  }) : null, uri && isPlayable && react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(react_draggable__WEBPACK_IMPORTED_MODULE_13___default.a, {\n    onDrag: handleDragMove,\n    onStart: handleDragStart,\n    onStop: handleDragStop,\n    defaultPosition: position,\n    position: isFloating ? position : {\n      x: 0,\n      y: 0\n    },\n    bounds: \"parent\",\n    handle: \".draggable\",\n    cancel: \".button\",\n    disabled: noFloatingPlayer || forceDisable\n  }, react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_7___default()([CONTENT_VIEWER_CLASS], (_classnames = {}, _defineProperty(_classnames, constants_player__WEBPACK_IMPORTED_MODULE_4__[\"FLOATING_PLAYER_CLASS\"], isFloating), _defineProperty(_classnames, 'content__viewer--inline', !isFloating), _defineProperty(_classnames, 'content__viewer--secondary', isComment), _defineProperty(_classnames, 'content__viewer--theater-mode', theaterMode && mainFilePlaying && !isMobile), _defineProperty(_classnames, 'content__viewer--disable-click', wasDragging), _defineProperty(_classnames, 'content__viewer--mobile', isMobile && !isLandscapeRotated && !playingUriSource), _classnames)),\n    style: !isFloating && fileViewerRect ? {\n      width: fileViewerRect.width,\n      height: appDrawerOpen ? \"\".concat(Object(util_window__WEBPACK_IMPORTED_MODULE_21__[\"getMaxLandscapeHeight\"])(), \"px\") : fileViewerRect.height,\n      left: fileViewerRect.x,\n      top: isMobile && !playingUriSource ? HEADER_HEIGHT_MOBILE : fileViewerRect.windowOffset + fileViewerRect.top - HEADER_HEIGHT\n    } : {}\n  }, react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_7___default()('content__wrapper', {\n      'content__wrapper--floating': isFloating\n    })\n  }, isFloating && react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(component_button__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n    title: __('Close'),\n    onClick: function onClick() {\n      if (hasClaimInQueue) {\n        doOpenModal(constants_modal_types__WEBPACK_IMPORTED_MODULE_1__[\"CONFIRM\"], {\n          title: __('Close Player'),\n          subtitle: __('Are you sure you want to close the player and clear the current Queue?'),\n          onConfirm: function onConfirm(closeModal) {\n            doClearPlayingUri();\n            doClearQueueList();\n            closeModal();\n          }\n        });\n      } else {\n        doClearPlayingUri();\n      }\n    },\n    icon: constants_icons__WEBPACK_IMPORTED_MODULE_2__[\"REMOVE\"],\n    button: \"primary\",\n    className: \"content__floating-close\"\n  }), isReadyToPlay && !isMature ? react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(component_fileRender__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n    className: classnames__WEBPACK_IMPORTED_MODULE_7___default()({\n      draggable: !isMobile\n    }),\n    uri: uri\n  }) : isLoading ? react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(component_common_loading_screen__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n    status: __('Loading')\n  }) : (!collectionId || !canViewFile || isMature) && react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    className: \"content__loading\"\n  }, react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(component_autoplayCountdown__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n    uri: uri,\n    nextRecommendedUri: nextListUri || firstCollectionItemUrl,\n    doNavigate: function doNavigate() {\n      return setDoNavigate(true);\n    },\n    doReplay: function doReplay() {\n      return doUriInitiatePlay({\n        uri: uri,\n        collection: {\n          collectionId: collectionId\n        }\n      }, false, isFloating);\n    },\n    doPrevious: !previousListUri ? undefined : function () {\n      setPlayNext(false);\n      setDoNavigate(true);\n    },\n    onCanceled: function onCanceled() {\n      return setCountdownCanceled(true);\n    },\n    skipPaid: true,\n    skipMature: true\n  })), isFloating && react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_7___default()('content__info', {\n      draggable: !isMobile\n    })\n  }, react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    className: \"content-info__text\"\n  }, react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(\"div\", {\n    className: \"claim-preview__title\",\n    title: title || uri\n  }, react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(component_button__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n    label: title || uri,\n    navigate: navigateUrl,\n    button: \"link\",\n    className: \"content__floating-link\"\n  })), react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(component_uriIndicator__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n    link: true,\n    uri: uri\n  })), playingCollection && collectionSidebarId !== collectionId && react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(component_playlistCard__WEBPACK_IMPORTED_MODULE_22__[\"default\"], {\n    id: collectionId,\n    uri: uri,\n    disableClickNavigation: true,\n    doDisablePlayerDrag: setForceDisable,\n    isFloating: true\n  }))))));\n}\n\nvar PlayerGlobalStyles = function PlayerGlobalStyles(props) {\n  var _ref2;\n\n  var videoAspectRatio = props.videoAspectRatio,\n      theaterMode = props.theaterMode,\n      appDrawerOpen = props.appDrawerOpen,\n      initialPlayerHeight = props.initialPlayerHeight,\n      isFloating = props.isFloating,\n      fileViewerRect = props.fileViewerRect,\n      mainFilePlaying = props.mainFilePlaying,\n      isLandscapeRotated = props.isLandscapeRotated,\n      isTabletLandscape = props.isTabletLandscape;\n  var justChanged = react__WEBPACK_IMPORTED_MODULE_5___default.a.useRef();\n  var isMobile = Object(effects_use_screensize__WEBPACK_IMPORTED_MODULE_16__[\"useIsMobile\"])();\n  var isMobilePlayer = isMobile && !isFloating; // to avoid miniplayer -> file page only\n\n  var heightForViewer = Object(util_window__WEBPACK_IMPORTED_MODULE_21__[\"getPossiblePlayerHeight\"])(videoAspectRatio * fileViewerRect.width, isMobile);\n  var widthForViewer = heightForViewer / videoAspectRatio;\n  var maxLandscapeHeight = Object(util_window__WEBPACK_IMPORTED_MODULE_21__[\"getMaxLandscapeHeight\"])(isMobile ? undefined : widthForViewer);\n  var heightResult = appDrawerOpen ? \"\".concat(maxLandscapeHeight, \"px\") : \"\".concat(heightForViewer, \"px\");\n  var amountNeededToCenter = Object(util_window__WEBPACK_IMPORTED_MODULE_21__[\"getAmountNeededToCenterVideo\"])(heightForViewer, maxLandscapeHeight); // forceDefaults = no styles should be applied to any of these conditions\n  // !mainFilePlaying = embeds on markdown (comments or posts)\n\n  var forceDefaults = !mainFilePlaying || theaterMode || isFloating || isMobile;\n  var videoGreaterThanLandscape = heightForViewer > maxLandscapeHeight; // Handles video shrink + center on mobile view\n  // direct DOM manipulation due to performance for every scroll\n\n  react__WEBPACK_IMPORTED_MODULE_5___default.a.useEffect(function () {\n    if (!isMobilePlayer || !mainFilePlaying || isLandscapeRotated || isTabletLandscape) return;\n    var viewer = document.querySelector(\".\".concat(CONTENT_VIEWER_CLASS));\n\n    if (viewer) {\n      if (!appDrawerOpen && heightForViewer) viewer.style.height = \"\".concat(heightForViewer, \"px\");\n\n      if (!appDrawerOpen) {\n        var htmlEl = document.querySelector('html');\n        if (htmlEl) htmlEl.scrollTop = 0;\n      }\n\n      justChanged.current = true;\n    }\n\n    if (appDrawerOpen) return;\n\n    function handleScroll() {\n      var rootEl = Object(util_window__WEBPACK_IMPORTED_MODULE_21__[\"getRootEl\"])();\n\n      if (justChanged.current) {\n        justChanged.current = false;\n        return;\n      }\n\n      var viewer = document.querySelector(\".\".concat(CONTENT_VIEWER_CLASS));\n      var videoNode = document.querySelector('.vjs-tech');\n      var touchOverlay = document.querySelector('.vjs-touch-overlay');\n\n      if (rootEl && viewer) {\n        var scrollTop = window.pageYOffset || rootEl.scrollTop;\n        var isHigherThanLandscape = scrollTop < initialPlayerHeight.current - maxLandscapeHeight;\n\n        if (videoNode) {\n          if (isHigherThanLandscape) {\n            if (initialPlayerHeight.current > maxLandscapeHeight) {\n              var result = initialPlayerHeight.current - scrollTop;\n\n              var _amountNeededToCenter = Object(util_window__WEBPACK_IMPORTED_MODULE_21__[\"getAmountNeededToCenterVideo\"])(videoNode.offsetHeight, result);\n\n              videoNode.style.top = \"\".concat(_amountNeededToCenter, \"px\");\n              if (touchOverlay) touchOverlay.style.height = \"\".concat(result, \"px\");\n              viewer.style.height = \"\".concat(result, \"px\");\n            }\n          } else {\n            if (touchOverlay) touchOverlay.style.height = \"\".concat(maxLandscapeHeight, \"px\");\n            viewer.style.height = \"\".concat(maxLandscapeHeight, \"px\");\n          }\n        }\n      }\n    }\n\n    window.addEventListener('scroll', handleScroll);\n    return function () {\n      var touchOverlay = document.querySelector('.vjs-touch-overlay');\n      if (touchOverlay) touchOverlay.removeAttribute('style');\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [appDrawerOpen, heightForViewer, isMobilePlayer, mainFilePlaying, maxLandscapeHeight, initialPlayerHeight, isLandscapeRotated, isTabletLandscape]);\n  react__WEBPACK_IMPORTED_MODULE_5___default.a.useEffect(function () {\n    if (videoGreaterThanLandscape && isMobilePlayer) {\n      var videoNode = document.querySelector('.vjs-tech');\n\n      if (videoNode) {\n        var top = appDrawerOpen ? amountNeededToCenter : 0;\n        videoNode.style.top = \"\".concat(top, \"px\");\n      }\n    }\n\n    if (isMobile && isFloating) {\n      var viewer = document.querySelector(\".\".concat(CONTENT_VIEWER_CLASS));\n      if (viewer) viewer.removeAttribute('style');\n      var touchOverlay = document.querySelector('.vjs-touch-overlay');\n      if (touchOverlay) touchOverlay.removeAttribute('style');\n\n      var _videoNode = document.querySelector('.vjs-tech');\n\n      if (_videoNode) _videoNode.removeAttribute('style');\n    }\n  }, [amountNeededToCenter, appDrawerOpen, isFloating, isMobile, isMobilePlayer, videoGreaterThanLandscape]);\n  react__WEBPACK_IMPORTED_MODULE_5___default.a.useEffect(function () {\n    if (isTabletLandscape) {\n      var videoNode = document.querySelector('.vjs-tech');\n      if (videoNode) videoNode.removeAttribute('style');\n      var touchOverlay = document.querySelector('.vjs-touch-overlay');\n      if (touchOverlay) touchOverlay.removeAttribute('style');\n    }\n  }, [isTabletLandscape]); // -- render styles --\n  // declaring some style objects as variables makes it easier for repeated cases\n\n  var transparentBackground = {\n    background: videoGreaterThanLandscape && mainFilePlaying && !forceDefaults ? 'transparent !important' : undefined\n  };\n  var maxHeight = {\n    maxHeight: !theaterMode && !isMobile ? 'var(--desktop-portrait-player-max-height)' : undefined\n  };\n  return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_emotion_react__WEBPACK_IMPORTED_MODULE_0__[\"Global\"], {\n    styles: (_ref2 = {}, _defineProperty(_ref2, \".\".concat(page_file_view__WEBPACK_IMPORTED_MODULE_12__[\"PRIMARY_PLAYER_WRAPPER_CLASS\"]), {\n      height: !theaterMode && mainFilePlaying && (fileViewerRect === null || fileViewerRect === void 0 ? void 0 : fileViewerRect.height) > 0 ? \"\".concat(heightResult, \" !important\") : undefined,\n      opacity: !theaterMode && mainFilePlaying ? '0 !important' : undefined\n    }), _defineProperty(_ref2, '.file-render--video', _objectSpread({}, transparentBackground, {}, maxHeight, {\n      video: maxHeight\n    })), _defineProperty(_ref2, '.content__wrapper', transparentBackground), _defineProperty(_ref2, '.video-js', _objectSpread({}, transparentBackground, {\n      '.vjs-touch-overlay': {\n        maxHeight: isTabletLandscape ? 'var(--desktop-portrait-player-max-height) !important' : undefined\n      }\n    })), _defineProperty(_ref2, '.vjs-fullscreen', {\n      video: {\n        top: 'unset !important',\n        height: '100% !important'\n      },\n      '.vjs-touch-overlay': {\n        height: '100% !important',\n        maxHeight: 'unset !important'\n      }\n    }), _defineProperty(_ref2, '.vjs-tech', {\n      opacity: '1',\n      height: '100%',\n      position: 'absolute',\n      top: isFloating ? '0px !important' : undefined\n    }), _defineProperty(_ref2, \".\".concat(CONTENT_VIEWER_CLASS), _objectSpread({\n      height: (!forceDefaults || isLandscapeRotated) && (!isMobile || isMobilePlayer) ? \"\".concat(heightResult, \" !important\") : undefined\n    }, maxHeight)), _defineProperty(_ref2, '.playlist-card', {\n      maxHeight: !isMobile && !theaterMode && mainFilePlaying ? \"\".concat(heightForViewer, \"px\") : isMobile ? '100%' : fileViewerRect ? \"\".concat(fileViewerRect.height, \"px\") : undefined\n    }), _ref2)\n  });\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvY29tcG9uZW50L2ZpbGVSZW5kZXJGbG9hdGluZy92aWV3LmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi91aS9jb21wb25lbnQvZmlsZVJlbmRlckZsb2F0aW5nL3ZpZXcuanN4P2VlMWQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcblxuLy8gJEZsb3dGaXhNZVxuaW1wb3J0IHsgR2xvYmFsIH0gZnJvbSAnQGVtb3Rpb24vcmVhY3QnO1xuXG5pbXBvcnQgdHlwZSB7IEVsZW1lbnRSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgKiBhcyBNT0RBTFMgZnJvbSAnY29uc3RhbnRzL21vZGFsX3R5cGVzJztcbmltcG9ydCAqIGFzIElDT05TIGZyb20gJ2NvbnN0YW50cy9pY29ucyc7XG5pbXBvcnQgKiBhcyBSRU5ERVJfTU9ERVMgZnJvbSAnY29uc3RhbnRzL2ZpbGVfcmVuZGVyX21vZGVzJztcbmltcG9ydCB7IElOTElORV9QTEFZRVJfV1JBUFBFUl9DTEFTUywgRkxPQVRJTkdfUExBWUVSX0NMQVNTLCBERUZBVUxUX0lOSVRJQUxfRkxPQVRJTkdfUE9TIH0gZnJvbSAnY29uc3RhbnRzL3BsYXllcic7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdjb21wb25lbnQvYnV0dG9uJztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IExvYWRpbmdTY3JlZW4gZnJvbSAnY29tcG9uZW50L2NvbW1vbi9sb2FkaW5nLXNjcmVlbic7XG5pbXBvcnQgRmlsZVJlbmRlciBmcm9tICdjb21wb25lbnQvZmlsZVJlbmRlcic7XG5pbXBvcnQgVXJpSW5kaWNhdG9yIGZyb20gJ2NvbXBvbmVudC91cmlJbmRpY2F0b3InO1xuaW1wb3J0IHVzZVBlcnNpc3RlZFN0YXRlIGZyb20gJ2VmZmVjdHMvdXNlLXBlcnNpc3RlZC1zdGF0ZSc7XG5pbXBvcnQgeyBQUklNQVJZX1BMQVlFUl9XUkFQUEVSX0NMQVNTIH0gZnJvbSAncGFnZS9maWxlL3ZpZXcnO1xuaW1wb3J0IERyYWdnYWJsZSBmcm9tICdyZWFjdC1kcmFnZ2FibGUnO1xuaW1wb3J0IHsgb25GdWxsc2NyZWVuQ2hhbmdlIH0gZnJvbSAndXRpbC9mdWxsLXNjcmVlbic7XG5pbXBvcnQgeyBnZW5lcmF0ZUxpc3RTZWFyY2hVcmxQYXJhbXMsIGZvcm1hdExicnlDaGFubmVsTmFtZSB9IGZyb20gJ3V0aWwvdXJsJztcbmltcG9ydCB7IHVzZUlzTW9iaWxlLCB1c2VJc01vYmlsZUxhbmRzY2FwZSwgdXNlSXNMYW5kc2NhcGVTY3JlZW4gfSBmcm9tICdlZmZlY3RzL3VzZS1zY3JlZW5zaXplJztcbmltcG9ydCBkZWJvdW5jZSBmcm9tICd1dGlsL2RlYm91bmNlJztcbmltcG9ydCB7IGlzVVJJRXF1YWwgfSBmcm9tICd1dGlsL2xicnlVUkknO1xuaW1wb3J0IEF1dG9wbGF5Q291bnRkb3duIGZyb20gJ2NvbXBvbmVudC9hdXRvcGxheUNvdW50ZG93bic7XG5pbXBvcnQgdXNlUGxheU5leHQgZnJvbSAnZWZmZWN0cy91c2UtcGxheS1uZXh0JztcbmltcG9ydCB7XG4gIGdldFJvb3RFbCxcbiAgZ2V0U2NyZWVuV2lkdGgsXG4gIGdldFNjcmVlbkhlaWdodCxcbiAgY2xhbXBGbG9hdGluZ1BsYXllclRvU2NyZWVuLFxuICBjYWxjdWxhdGVSZWxhdGl2ZVBvcyxcbiAgZ2V0TWF4TGFuZHNjYXBlSGVpZ2h0LFxuICBnZXRBbW91bnROZWVkZWRUb0NlbnRlclZpZGVvLFxuICBnZXRQb3NzaWJsZVBsYXllckhlaWdodCxcbn0gZnJvbSAndXRpbC93aW5kb3cnO1xuaW1wb3J0IFBsYXlsaXN0Q2FyZCBmcm9tICdjb21wb25lbnQvcGxheWxpc3RDYXJkJztcblxuLy8gc2Nzcy9pbml0L3ZhcnMuc2Nzc1xuLy8gLS1oZWFkZXItaGVpZ2h0XG5jb25zdCBIRUFERVJfSEVJR0hUID0gNjA7XG4vLyAtLWhlYWRlci1oZWlnaHQtbW9iaWxlXG5leHBvcnQgY29uc3QgSEVBREVSX0hFSUdIVF9NT0JJTEUgPSA1NjtcblxuY29uc3QgREVCT1VOQ0VfV0lORE9XX1JFU0laRV9IQU5ETEVSX01TID0gMTAwO1xuXG5jb25zdCBDT05URU5UX1ZJRVdFUl9DTEFTUyA9ICdjb250ZW50X192aWV3ZXInO1xuXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbnR5cGUgUHJvcHMgPSB7XG4gIGNsYWltSWQ6ID9zdHJpbmcsXG4gIGNoYW5uZWxVcmw6ID9zdHJpbmcsXG4gIGlzRmxvYXRpbmc6IGJvb2xlYW4sXG4gIHVyaTogc3RyaW5nLFxuICBzdHJlYW1pbmdVcmw/OiBzdHJpbmcsXG4gIHRpdGxlOiA/c3RyaW5nLFxuICBmbG9hdGluZ1BsYXllckVuYWJsZWQ6IGJvb2xlYW4sXG4gIHJlbmRlck1vZGU6IHN0cmluZyxcbiAgcGxheWluZ1VyaTogUGxheWluZ1VyaSxcbiAgcHJpbWFyeVVyaTogP3N0cmluZyxcbiAgdmlkZW9UaGVhdGVyTW9kZTogYm9vbGVhbixcbiAgY29sbGVjdGlvbklkOiBzdHJpbmcsXG4gIGNvbGxlY3Rpb25TaWRlYmFySWQ6ID9zdHJpbmcsXG4gIGNvc3RJbmZvOiBhbnksXG4gIGNsYWltV2FzUHVyY2hhc2VkOiBib29sZWFuLFxuICBuZXh0TGlzdFVyaTogc3RyaW5nLFxuICBwcmV2aW91c0xpc3RVcmk6IHN0cmluZyxcbiAgZG9GZXRjaFJlY29tbWVuZGVkQ29udGVudDogKHVyaTogc3RyaW5nKSA9PiB2b2lkLFxuICBkb1VyaUluaXRpYXRlUGxheTogKHBsYXlpbmdPcHRpb25zOiBQbGF5aW5nVXJpLCBpc1BsYXlhYmxlOiA/Ym9vbGVhbiwgaXNGbG9hdGluZzogP2Jvb2xlYW4pID0+IHZvaWQsXG4gIGlzQ3VycmVudENsYWltTGl2ZT86IGJvb2xlYW4sXG4gIHZpZGVvQXNwZWN0UmF0aW86IG51bWJlcixcbiAgc29ja2V0Q29ubmVjdGlvbjogeyBjb25uZWN0ZWQ6ID9ib29sZWFuIH0sXG4gIGlzTGl2ZXN0cmVhbUNsYWltOiBib29sZWFuLFxuICBnZW9SZXN0cmljdGlvbjogP0dlb1Jlc3RyaWN0aW9uLFxuICBhcHBEcmF3ZXJPcGVuOiBib29sZWFuLFxuICBwbGF5aW5nQ29sbGVjdGlvbjogQ29sbGVjdGlvbixcbiAgaGFzQ2xhaW1JblF1ZXVlOiBib29sZWFuLFxuICBtYWluUGxheWVyRGltZW5zaW9uczogeyBoZWlnaHQ6IG51bWJlciwgd2lkdGg6IG51bWJlciB9LFxuICBmaXJzdENvbGxlY3Rpb25JdGVtVXJsOiA/c3RyaW5nLFxuICBpc01hdHVyZTogYm9vbGVhbixcbiAgbG9jYXRpb246IHsgc3RhdGU/OiB7IG92ZXJyaWRlRmxvYXRpbmc/OiBib29sZWFuIH0gfSxcbiAgaXNQcm90ZWN0ZWRDb250ZW50OiBib29sZWFuLFxuICBkb0NvbW1lbnRTb2NrZXRDb25uZWN0OiAoXG4gICAgdXJpOiBzdHJpbmcsXG4gICAgY2hhbm5lbE5hbWU6IHN0cmluZyxcbiAgICBjbGFpbUlkOiBzdHJpbmcsXG4gICAgc3ViQ2F0ZWdvcnk6ID9zdHJpbmcsXG4gICAgcHJvdGVjdGVkRW5kcG9pbnQ6IGJvb2xlYW5cbiAgKSA9PiB2b2lkLFxuICBkb0NvbW1lbnRTb2NrZXREaXNjb25uZWN0OiAoc3RyaW5nLCBzdHJpbmcpID0+IHZvaWQsXG4gIGRvQ2xlYXJQbGF5aW5nVXJpOiAoKSA9PiB2b2lkLFxuICBkb0NsZWFyUXVldWVMaXN0OiAoKSA9PiB2b2lkLFxuICBkb09wZW5Nb2RhbDogKGlkOiBzdHJpbmcsIHt9KSA9PiB2b2lkLFxuICBkb0NsZWFyUGxheWluZ1NvdXJjZTogKCkgPT4gdm9pZCxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEZpbGVSZW5kZXJGbG9hdGluZyhwcm9wczogUHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIGFwcERyYXdlck9wZW4sXG4gICAgY2hhbm5lbFVybCxcbiAgICBjbGFpbUlkLFxuICAgIGNsYWltV2FzUHVyY2hhc2VkLFxuICAgIGNvbGxlY3Rpb25JZCxcbiAgICBjb2xsZWN0aW9uU2lkZWJhcklkLFxuICAgIGNvc3RJbmZvLFxuICAgIGRvQ2xlYXJQbGF5aW5nU291cmNlLFxuICAgIGRvQ2xlYXJQbGF5aW5nVXJpLFxuICAgIGRvQ2xlYXJRdWV1ZUxpc3QsXG4gICAgZG9Db21tZW50U29ja2V0Q29ubmVjdCxcbiAgICBkb0NvbW1lbnRTb2NrZXREaXNjb25uZWN0LFxuICAgIGRvRmV0Y2hSZWNvbW1lbmRlZENvbnRlbnQsXG4gICAgZG9PcGVuTW9kYWwsXG4gICAgZG9VcmlJbml0aWF0ZVBsYXksXG4gICAgZmlyc3RDb2xsZWN0aW9uSXRlbVVybCxcbiAgICBmbG9hdGluZ1BsYXllckVuYWJsZWQsXG4gICAgZ2VvUmVzdHJpY3Rpb24sXG4gICAgaGFzQ2xhaW1JblF1ZXVlLFxuICAgIGlzQ3VycmVudENsYWltTGl2ZSxcbiAgICBpc0Zsb2F0aW5nLFxuICAgIGlzTGl2ZXN0cmVhbUNsYWltLFxuICAgIGlzTWF0dXJlLFxuICAgIGlzUHJvdGVjdGVkQ29udGVudCxcbiAgICBsb2NhdGlvbixcbiAgICBtYWluUGxheWVyRGltZW5zaW9ucyxcbiAgICBuZXh0TGlzdFVyaSxcbiAgICBwbGF5aW5nQ29sbGVjdGlvbixcbiAgICBwbGF5aW5nVXJpLFxuICAgIHByZXZpb3VzTGlzdFVyaSxcbiAgICBwcmltYXJ5VXJpLFxuICAgIHJlbmRlck1vZGUsXG4gICAgc29ja2V0Q29ubmVjdGlvbixcbiAgICBzdHJlYW1pbmdVcmwsXG4gICAgdGl0bGUsXG4gICAgdW5hdXRob3JpemVkRm9yQ29udGVudCxcbiAgICB1cmksXG4gICAgdmlkZW9Bc3BlY3RSYXRpbyxcbiAgICB2aWRlb1RoZWF0ZXJNb2RlLFxuICB9ID0gcHJvcHM7XG5cbiAgY29uc3QgeyBzdGF0ZSB9ID0gbG9jYXRpb247XG4gIGNvbnN0IHsgb3ZlcnJpZGVGbG9hdGluZyB9ID0gc3RhdGUgfHwge307XG5cbiAgY29uc3QgaXNNb2JpbGUgPSB1c2VJc01vYmlsZSgpO1xuICBjb25zdCBpc1RhYmxldExhbmRzY2FwZSA9IHVzZUlzTGFuZHNjYXBlU2NyZWVuKCkgJiYgIWlzTW9iaWxlO1xuICBjb25zdCBpc0xhbmRzY2FwZVJvdGF0ZWQgPSB1c2VJc01vYmlsZUxhbmRzY2FwZSgpO1xuXG4gIGNvbnN0IGluaXRpYWxNb2JpbGVTdGF0ZSA9IFJlYWN0LnVzZVJlZihpc01vYmlsZSk7XG4gIGNvbnN0IGluaXRpYWxQbGF5ZXJIZWlnaHQgPSBSZWFjdC51c2VSZWYoKTtcbiAgY29uc3QgcmVzaXplZEJldHdlZW5GbG9hdGluZyA9IFJlYWN0LnVzZVJlZigpO1xuXG4gIGNvbnN0IHsgdXJpOiBwbGF5aW5nVXJsLCBzb3VyY2U6IHBsYXlpbmdVcmlTb3VyY2UsIHByaW1hcnlVcmk6IHBsYXlpbmdQcmltYXJ5VXJpIH0gPSBwbGF5aW5nVXJpO1xuXG4gIGNvbnN0IGlzQ29tbWVudCA9IHBsYXlpbmdVcmlTb3VyY2UgPT09ICdjb21tZW50JztcbiAgY29uc3QgbWFpbkZpbGVQbGF5aW5nID0gQm9vbGVhbighaXNGbG9hdGluZyAmJiBwcmltYXJ5VXJpICYmIGlzVVJJRXF1YWwodXJpLCBwcmltYXJ5VXJpKSk7XG4gIGNvbnN0IG5vRmxvYXRpbmdQbGF5ZXIgPSAhb3ZlcnJpZGVGbG9hdGluZyAmJiAoIWlzRmxvYXRpbmcgfHwgIWZsb2F0aW5nUGxheWVyRW5hYmxlZCk7XG5cbiAgY29uc3QgW2ZpbGVWaWV3ZXJSZWN0LCBzZXRGaWxlVmlld2VyUmVjdF0gPSBSZWFjdC51c2VTdGF0ZSgpO1xuICBjb25zdCBbd2FzRHJhZ2dpbmcsIHNldFdhc0RyYWdnaW5nXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2RvTmF2aWdhdGUsIHNldERvTmF2aWdhdGVdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvdWxkUGxheU5leHQsIHNldFBsYXlOZXh0XSA9IFJlYWN0LnVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbY291bnRkb3duQ2FuY2VsZWQsIHNldENvdW50ZG93bkNhbmNlbGVkXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2ZvcmNlRGlzYWJsZSwgc2V0Rm9yY2VEaXNhYmxlXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Bvc2l0aW9uLCBzZXRQb3NpdGlvbl0gPSB1c2VQZXJzaXN0ZWRTdGF0ZSgnZmxvYXRpbmctZmlsZS12aWV3ZXI6cG9zaXRpb24nLCBERUZBVUxUX0lOSVRJQUxfRkxPQVRJTkdfUE9TKTtcbiAgY29uc3QgcmVsYXRpdmVQb3NSZWYgPSBSZWFjdC51c2VSZWYoY2FsY3VsYXRlUmVsYXRpdmVQb3MocG9zaXRpb24ueCwgcG9zaXRpb24ueSkpO1xuICBjb25zdCBub1BsYXllckhlaWdodCA9IGZpbGVWaWV3ZXJSZWN0Py5oZWlnaHQgPT09IDA7XG5cbiAgY29uc3QgbmF2aWdhdGVVcmwgPVxuICAgIChwbGF5aW5nUHJpbWFyeVVyaSB8fCBwbGF5aW5nVXJsIHx8ICcnKSArIChjb2xsZWN0aW9uSWQgPyBnZW5lcmF0ZUxpc3RTZWFyY2hVcmxQYXJhbXMoY29sbGVjdGlvbklkKSA6ICcnKTtcblxuICBjb25zdCBpc0ZyZWUgPSBjb3N0SW5mbyAmJiBjb3N0SW5mby5jb3N0ID09PSAwO1xuICBjb25zdCBpc0xvYWRpbmcgPSAhY29zdEluZm8gfHwgKCFzdHJlYW1pbmdVcmwgJiYgIWNvc3RJbmZvLmNvc3QpO1xuICBjb25zdCBjYW5WaWV3RmlsZSA9IGlzRnJlZSB8fCBjbGFpbVdhc1B1cmNoYXNlZDtcbiAgY29uc3QgaXNQbGF5YWJsZSA9IFJFTkRFUl9NT0RFUy5GTE9BVElOR19NT0RFUy5pbmNsdWRlcyhyZW5kZXJNb2RlKSB8fCBpc0N1cnJlbnRDbGFpbUxpdmU7XG4gIGNvbnN0IGlzUmVhZHlUb1BsYXkgPSBpc0N1cnJlbnRDbGFpbUxpdmUgfHwgKGlzUGxheWFibGUgJiYgc3RyZWFtaW5nVXJsKTtcblxuICBjb25zdCB0aGVhdGVyTW9kZSA9IHJlbmRlck1vZGUgPT09ICd2aWRlbycgfHwgcmVuZGVyTW9kZSA9PT0gJ2F1ZGlvJyA/IHZpZGVvVGhlYXRlck1vZGUgOiBmYWxzZTtcblxuICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gIC8vIEZVTkNUSU9OU1xuICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cbiAgY29uc3QgaGFuZGxlUmVzaXplID0gUmVhY3QudXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IGZpbGVQYWdlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke1BSSU1BUllfUExBWUVSX1dSQVBQRVJfQ0xBU1N9YCk7XG5cbiAgICBjb25zdCBwbGF5aW5nRWxlbWVudCA9IG1haW5GaWxlUGxheWluZ1xuICAgICAgPyBmaWxlUGFnZUVsZW1lbnRcbiAgICAgIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7SU5MSU5FX1BMQVlFUl9XUkFQUEVSX0NMQVNTfWApO1xuXG4gICAgY29uc3QgZWxlbWVudCA9IHBsYXlpbmdFbGVtZW50IHx8IGZpbGVQYWdlRWxlbWVudDtcblxuICAgIGlmICghZWxlbWVudCkgcmV0dXJuO1xuXG4gICAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAvLyBnZXRCb3VuZGluZ0NsaWVudFJlY3QgcmV0dXJucyBhIERvbVJlY3QsIG5vdCBhbiBvYmplY3RcbiAgICBjb25zdCBvYmplY3RSZWN0ID0ge1xuICAgICAgdG9wOiByZWN0LnRvcCxcbiAgICAgIHJpZ2h0OiByZWN0LnJpZ2h0LFxuICAgICAgYm90dG9tOiByZWN0LmJvdHRvbSxcbiAgICAgIGxlZnQ6IHJlY3QubGVmdCxcbiAgICAgIHdpZHRoOiByZWN0LndpZHRoLFxuICAgICAgaGVpZ2h0OiByZWN0LmhlaWdodCxcbiAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgIHg6IHJlY3QueCxcbiAgICB9O1xuXG4gICAgLy8gcmVwbGFjZSB0aGUgaW5pdGlhbCB2YWx1ZSBldmVyeSB0aW1lIHRoZSB3aW5kb3cgaXMgcmVzaXplZCBpZiBpc01vYmlsZSBpcyB0cnVlLFxuICAgIC8vIHNpbmNlIGl0IGNvdWxkIGJlIGEgcG9ydHJhaXQgLT4gbGFuZHNjYXBlIHJvdGF0aW9uIHN3aXRjaCwgb3IgaWYgaXQgd2FzIGEgbW9iaWxlIC0gZGVza3RvcFxuICAgIC8vIHN3aXRjaCwgc28gdXNlIHRoZSByZWYgdG8gY29tcGFyZSB0aGUgaW5pdGlhbCBzdGF0ZVxuICAgIGNvbnN0IHJlc2l6ZWRFbm91Z2hGb3JNb2JpbGVTd2l0Y2ggPSBpc01vYmlsZSAhPT0gaW5pdGlhbE1vYmlsZVN0YXRlLmN1cnJlbnQ7XG4gICAgaWYgKHZpZGVvQXNwZWN0UmF0aW8gJiYgKCFpbml0aWFsUGxheWVySGVpZ2h0LmN1cnJlbnQgfHwgaXNNb2JpbGUgfHwgcmVzaXplZEVub3VnaEZvck1vYmlsZVN3aXRjaCkpIHtcbiAgICAgIGNvbnN0IGhlaWdodEZvclJlY3QgPSBnZXRQb3NzaWJsZVBsYXllckhlaWdodCh2aWRlb0FzcGVjdFJhdGlvICogcmVjdC53aWR0aCwgaXNNb2JpbGUpO1xuICAgICAgaW5pdGlhbFBsYXllckhlaWdodC5jdXJyZW50ID0gaGVpZ2h0Rm9yUmVjdDtcbiAgICB9XG5cbiAgICAvLyAkRmxvd0ZpeE1lXG4gICAgc2V0RmlsZVZpZXdlclJlY3QoeyAuLi5vYmplY3RSZWN0LCB3aW5kb3dPZmZzZXQ6IHdpbmRvdy5wYWdlWU9mZnNldCB9KTtcblxuICAgIC8vIGZvcmNlIHJlLWNhbGN1bGF0ZSB3aGVuIHNvdXJjZUlkIGNoYW5nZXMgKHBsYXlpbmcgYSBuZXcgY2xhaW1MaW5rIG9uIHRoZSBzYW1lIHBhZ2UpXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbaXNNb2JpbGUsIG1haW5GaWxlUGxheWluZywgdmlkZW9Bc3BlY3RSYXRpbywgcGxheWluZ1VyaS5zb3VyY2VJZF0pO1xuXG4gIGNvbnN0IHJlc3RvcmVUb1JlbGF0aXZlUG9zaXRpb24gPSBSZWFjdC51c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgU0NST0xMX0JBUl9QWCA9IDEyOyAvLyByb290OiAtLWJvZHktc2Nyb2xsYmFyLXdpZHRoXG4gICAgY29uc3Qgc2NyZWVuVyA9IGdldFNjcmVlbldpZHRoKCkgLSBTQ1JPTExfQkFSX1BYO1xuICAgIGNvbnN0IHNjcmVlbkggPSBnZXRTY3JlZW5IZWlnaHQoKTtcblxuICAgIGNvbnN0IG5ld1ggPSBNYXRoLnJvdW5kKHJlbGF0aXZlUG9zUmVmLmN1cnJlbnQueCAqIHNjcmVlblcpO1xuICAgIGNvbnN0IG5ld1kgPSBNYXRoLnJvdW5kKHJlbGF0aXZlUG9zUmVmLmN1cnJlbnQueSAqIHNjcmVlbkgpO1xuICAgIGNvbnN0IGNsYW1wUG9zaXRpb24gPSBjbGFtcEZsb2F0aW5nUGxheWVyVG9TY3JlZW4oeyB4OiBuZXdYLCB5OiBuZXdZIH0pO1xuXG4gICAgaWYgKCFbY2xhbXBQb3NpdGlvbi54LCBjbGFtcFBvc2l0aW9uLnldLnNvbWUoaXNOYU4pKSB7XG4gICAgICBzZXRQb3NpdGlvbihjbGFtcFBvc2l0aW9uKTtcbiAgICB9XG4gIH0sIFtzZXRQb3NpdGlvbl0pO1xuXG4gIGNvbnN0IGNsYW1wVG9TY3JlZW5PblJlc2l6ZSA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIGRlYm91bmNlKHJlc3RvcmVUb1JlbGF0aXZlUG9zaXRpb24sIERFQk9VTkNFX1dJTkRPV19SRVNJWkVfSEFORExFUl9NUyksXG4gICAgW11cbiAgKTtcblxuICAvLyBGb3IgcGxheWxpc3RzIHdoZW4gcHJlc3NpbmcgbmV4dC9wcmV2aW91cyBldGMgYW5kIHN3aXRjaGluZyBwbGF5ZXJzXG4gIGZ1bmN0aW9uIHJlc2V0U3RhdGUoKSB7XG4gICAgc2V0Q291bnRkb3duQ2FuY2VsZWQoZmFsc2UpO1xuICAgIHNldERvTmF2aWdhdGUoZmFsc2UpO1xuICAgIHNldFBsYXlOZXh0KHRydWUpO1xuICB9XG5cbiAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAvLyBFRkZFQ1RTXG4gIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuICB1c2VQbGF5TmV4dChcbiAgICBpc0Zsb2F0aW5nLFxuICAgIGNvbGxlY3Rpb25JZCxcbiAgICBzaG91bGRQbGF5TmV4dCxcbiAgICBuZXh0TGlzdFVyaSB8fCBmaXJzdENvbGxlY3Rpb25JdGVtVXJsLFxuICAgIHByZXZpb3VzTGlzdFVyaSxcbiAgICBkb05hdmlnYXRlLFxuICAgIGRvVXJpSW5pdGlhdGVQbGF5LFxuICAgIHJlc2V0U3RhdGVcbiAgKTtcblxuICAvLyBFc3RhYmxpc2ggd2ViIHNvY2tldCBjb25uZWN0aW9uIGZvciB2aWV3ZXIgY291bnQuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFjbGFpbUlkIHx8ICFjaGFubmVsVXJsIHx8ICFpc0N1cnJlbnRDbGFpbUxpdmUpIHJldHVybjtcblxuICAgIGNvbnN0IGNoYW5uZWxOYW1lID0gZm9ybWF0TGJyeUNoYW5uZWxOYW1lKGNoYW5uZWxVcmwpO1xuXG4gICAgY29uc3QgcmV2ZXJzZWRDbGFpbUlkID0gY2xhaW1JZC5zcGxpdCgnJykucmV2ZXJzZSgpLmpvaW4oJycpO1xuICAgIGNvbnN0IGNsYWltSWRUb1VzZSA9IGlzUHJvdGVjdGVkQ29udGVudCA/IHJldmVyc2VkQ2xhaW1JZCA6IGNsYWltSWQ7XG5cbiAgICAvLyBPbmx5IGNvbm5lY3QgaWYgbm90IHlldCBjb25uZWN0ZWQsIHNvIGZvciBleGFtcGxlIGNsaWNrZWQgb24gYW4gZW1iZWQgaW5zdGVhZCBvZiBhY2Nlc3NpbmdcbiAgICAvLyBmcm9tIHRoZSBMaXZlc3RyZWFtIHBhZ2VcbiAgICBpZiAoIXNvY2tldENvbm5lY3Rpb24/LmNvbm5lY3RlZCAmJiAhdW5hdXRob3JpemVkRm9yQ29udGVudCkge1xuICAgICAgZG9Db21tZW50U29ja2V0Q29ubmVjdCh1cmksIGNoYW5uZWxOYW1lLCBjbGFpbUlkVG9Vc2UsIHVuZGVmaW5lZCwgaXNQcm90ZWN0ZWRDb250ZW50KTtcbiAgICB9XG5cbiAgICAvLyBUaGlzIHdpbGwgYmUgdXNlZCB0byBkaXNjb25uZWN0IGZvciBldmVyeSBjYXNlLCBzaW5jZSB0aGlzIGlzIHRoZSBtYWluIHBsYXllciBjb21wb25lbnRcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHNvY2tldENvbm5lY3Rpb24/LmNvbm5lY3RlZCAmJiAhdW5hdXRob3JpemVkRm9yQ29udGVudCkge1xuICAgICAgICBkb0NvbW1lbnRTb2NrZXREaXNjb25uZWN0KGNsYWltSWQsIGNoYW5uZWxOYW1lKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXG4gICAgY2hhbm5lbFVybCxcbiAgICBjbGFpbUlkLFxuICAgIGRvQ29tbWVudFNvY2tldENvbm5lY3QsXG4gICAgZG9Db21tZW50U29ja2V0RGlzY29ubmVjdCxcbiAgICBpc0N1cnJlbnRDbGFpbUxpdmUsXG4gICAgc29ja2V0Q29ubmVjdGlvbixcbiAgICB1cmksXG4gIF0pO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHBsYXlpbmdQcmltYXJ5VXJpIHx8IHBsYXlpbmdVcmwgfHwgbm9QbGF5ZXJIZWlnaHQgfHwgY29sbGVjdGlvblNpZGViYXJJZCkge1xuICAgICAgaGFuZGxlUmVzaXplKCk7XG4gICAgICBzZXRDb3VudGRvd25DYW5jZWxlZChmYWxzZSk7XG4gICAgfVxuICB9LCBbaGFuZGxlUmVzaXplLCBwbGF5aW5nUHJpbWFyeVVyaSwgdGhlYXRlck1vZGUsIHBsYXlpbmdVcmwsIG5vUGxheWVySGVpZ2h0LCBjb2xsZWN0aW9uU2lkZWJhcklkXSk7XG5cbiAgLy8gTGlzdGVuIHRvIG1haW4td2luZG93IHJlc2l6aW5nIGFuZCBhZGp1c3QgdGhlIGZsb2F0aW5nIHBsYXllciBwb3NpdGlvbiBhY2NvcmRpbmdseTpcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBpbnRlbmRlZCB0byBvbmx5IHJ1biBvbmNlOiB3aGVuIGZsb2F0aW5nIHBsYXllciBzd2l0Y2hlcyBiZXR3ZWVuIHRydWUgLSBmYWxzZVxuICAgIC8vIG90aGVyd2lzZSBoYW5kbGVSZXNpemUoKSBjYW4gcnVuIHR3aWNlIHdoZW4gdGhpcyBlZmZlY3QgcmUtcnVucywgc28gdXNlXG4gICAgLy8gcmVzaXplZEJldHdlZW5GbG9hdGluZyByZWZcbiAgICBpZiAoaXNGbG9hdGluZykge1xuICAgICAgLy8gRW5zdXJlIHBsYXllciBpcyB3aXRoaW4gc2NyZWVuIHdoZW4gJ2lzRmxvYXRpbmcnIGNoYW5nZXMuXG4gICAgICByZXN0b3JlVG9SZWxhdGl2ZVBvc2l0aW9uKCk7XG4gICAgICByZXNpemVkQmV0d2VlbkZsb2F0aW5nLmN1cnJlbnQgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKCFyZXNpemVkQmV0d2VlbkZsb2F0aW5nLmN1cnJlbnQpIHtcbiAgICAgIGhhbmRsZVJlc2l6ZSgpO1xuICAgICAgcmVzaXplZEJldHdlZW5GbG9hdGluZy5jdXJyZW50ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbldpbmRvd1Jlc2l6ZSgpIHtcbiAgICAgIGlmIChpc0Zsb2F0aW5nKSBjbGFtcFRvU2NyZWVuT25SZXNpemUoKTtcbiAgICAgIGlmIChjb2xsZWN0aW9uU2lkZWJhcklkIHx8ICFpc0Zsb2F0aW5nKSBoYW5kbGVSZXNpemUoKTtcbiAgICB9XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25XaW5kb3dSZXNpemUpO1xuICAgIGlmICghaXNGbG9hdGluZyAmJiAhaXNNb2JpbGUpIG9uRnVsbHNjcmVlbkNoYW5nZSh3aW5kb3csICdhZGQnLCBoYW5kbGVSZXNpemUpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvbldpbmRvd1Jlc2l6ZSk7XG4gICAgICBpZiAoIWlzRmxvYXRpbmcgJiYgIWlzTW9iaWxlKSBvbkZ1bGxzY3JlZW5DaGFuZ2Uod2luZG93LCAncmVtb3ZlJywgaGFuZGxlUmVzaXplKTtcbiAgICB9O1xuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbY2xhbXBUb1NjcmVlbk9uUmVzaXplLCBoYW5kbGVSZXNpemUsIGlzRmxvYXRpbmcsIGNvbGxlY3Rpb25TaWRlYmFySWRdKTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIEluaXRpYWwgdXBkYXRlIGZvciByZWxhdGl2ZVBvc1JlZjpcbiAgICByZWxhdGl2ZVBvc1JlZi5jdXJyZW50ID0gY2FsY3VsYXRlUmVsYXRpdmVQb3MocG9zaXRpb24ueCwgcG9zaXRpb24ueSk7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzIC0tIE9ubHkgb24gbW91bnRcbiAgfSwgW10pO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzRmxvYXRpbmcgJiYgaXNDb21tZW50KSB7XG4gICAgICAvLyBXaGVuIHRoZSBwbGF5ZXIgYmVnaW5zIGZsb2F0aW5nLCByZW1vdmUgdGhlIGNvbW1lbnQgc291cmNlXG4gICAgICAvLyBzbyB0aGF0IGl0IGRvZXNuJ3QgdHJ5IHRvIHJlc2l6ZSBhZ2FpbiBpbiBjYXNlIG9mIGdvaW5nIGJhY2tcbiAgICAgIC8vIHRvIHRoZSBvcmlnaW4ncyBjb21tZW50IHNlY3Rpb24gYW5kIGZhaWwgdG8gcG9zaXRpb24gY29ycmVjdGx5XG4gICAgICBkb0NsZWFyUGxheWluZ1NvdXJjZSgpO1xuICAgIH1cbiAgfSwgW2RvQ2xlYXJQbGF5aW5nU291cmNlLCBpc0NvbW1lbnQsIGlzRmxvYXRpbmddKTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc0Zsb2F0aW5nKSBkb0ZldGNoUmVjb21tZW5kZWRDb250ZW50KHVyaSk7XG4gIH0sIFtkb0ZldGNoUmVjb21tZW5kZWRDb250ZW50LCBpc0Zsb2F0aW5nLCB1cmldKTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAvLyBiYXNpY2FsbHkgaWYgc3dpdGNoZWQgdmlkZW9zIChwbGF5aW5nVXJsIGNoYW5nZSBvciB1bm1vdW50KSxcbiAgICAgIC8vIGVyYXNlIHRoZSBkYXRhIHNvIGl0IGNhbiBiZSByZS1jYWxjdWxhdGVkXG4gICAgICBpZiAocGxheWluZ1VybCkge1xuICAgICAgICBpbml0aWFsUGxheWVySGVpZ2h0LmN1cnJlbnQgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW3BsYXlpbmdVcmxdKTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChwcmltYXJ5VXJpICYmIHVyaSAmJiBwcmltYXJ5VXJpICE9PSB1cmkgJiYgIW92ZXJyaWRlRmxvYXRpbmcgJiYgIWZsb2F0aW5nUGxheWVyRW5hYmxlZCAmJiBwbGF5aW5nVXJsKSB7XG4gICAgICBkb0NsZWFyUGxheWluZ1VyaSgpO1xuICAgIH1cbiAgfSwgW2RvQ2xlYXJQbGF5aW5nVXJpLCBmbG9hdGluZ1BsYXllckVuYWJsZWQsIG92ZXJyaWRlRmxvYXRpbmcsIHBsYXlpbmdVcmwsIHByaW1hcnlVcmksIHVyaV0pO1xuXG4gIGlmIChcbiAgICBnZW9SZXN0cmljdGlvbiB8fFxuICAgICghaXNQbGF5YWJsZSAmJiAhY29sbGVjdGlvblNpZGViYXJJZCkgfHxcbiAgICAoIXVyaSAmJiAhY29sbGVjdGlvblNpZGViYXJJZCkgfHxcbiAgICAoaXNGbG9hdGluZyAmJiBub0Zsb2F0aW5nUGxheWVyKSB8fFxuICAgIChjb2xsZWN0aW9uSWQgJiYgIWlzRmxvYXRpbmcgJiYgKCghY2FuVmlld0ZpbGUgJiYgIW5leHRMaXN0VXJpKSB8fCBjb3VudGRvd25DYW5jZWxlZCkpIHx8XG4gICAgKGlzTGl2ZXN0cmVhbUNsYWltICYmICFpc0N1cnJlbnRDbGFpbUxpdmUpXG4gICkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAvLyBSRU5ERVJcbiAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG4gIGZ1bmN0aW9uIGlzRHJhZ2dpbmdWaWRlb2pzQ29tcG9uZW50KGUpIHtcbiAgICBjb25zdCBjbGFzc05hbWUgPSBlPy50YXJnZXQ/LmNsYXNzTmFtZTtcbiAgICByZXR1cm4gKFxuICAgICAgdHlwZW9mIGNsYXNzTmFtZSA9PT0gJ3N0cmluZycgJiZcbiAgICAgIChjbGFzc05hbWUuaW5jbHVkZXMoJ3Zqcy12b2x1bWUtY29udHJvbCcpIHx8XG4gICAgICAgIGNsYXNzTmFtZS5pbmNsdWRlcygndmpzLXZvbHVtZS1sZXZlbCcpIHx8XG4gICAgICAgIGNsYXNzTmFtZS5pbmNsdWRlcygndmpzLW1vdXNlLWRpc3BsYXknKSlcbiAgICApO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlRHJhZ1N0YXJ0KGUpIHtcbiAgICBpZiAoaXNEcmFnZ2luZ1ZpZGVvanNDb21wb25lbnQoZSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBOb3QgcmVhbGx5IG5lY2Vzc2FyeSwgYnV0IHJlc2V0IGp1c3QgaW4gY2FzZSAnaGFuZGxlU3RvcCcgZGlkbid0IGZpcmUuXG4gICAgc2V0V2FzRHJhZ2dpbmcoZmFsc2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlRHJhZ01vdmUoZSwgdWkpIHtcbiAgICBpZiAoaXNEcmFnZ2luZ1ZpZGVvanNDb21wb25lbnQoZSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHgsIHkgfSA9IHBvc2l0aW9uO1xuICAgIGNvbnN0IG5ld1ggPSB1aS54O1xuICAgIGNvbnN0IG5ld1kgPSB1aS55O1xuXG4gICAgLy8gTWFyayBhcyBkcmFnZ2luZyBpZiB0aGUgcG9zaXRpb24gY2hhbmdlZCBhbmQgd2Ugd2VyZSBub3QgZHJhZ2dpbmcgYmVmb3JlLlxuICAgIGlmICghd2FzRHJhZ2dpbmcgJiYgKG5ld1ggIT09IHggfHwgbmV3WSAhPT0geSkpIHtcbiAgICAgIHNldFdhc0RyYWdnaW5nKHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZURyYWdTdG9wKGUsIHVpKSB7XG4gICAgaWYgKGlzRHJhZ2dpbmdWaWRlb2pzQ29tcG9uZW50KGUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHdhc0RyYWdnaW5nKSBzZXRXYXNEcmFnZ2luZyhmYWxzZSk7XG4gICAgY29uc3QgeyB4LCB5IH0gPSB1aTtcbiAgICBsZXQgbmV3UG9zID0geyB4LCB5IH07XG5cbiAgICBpZiAobmV3UG9zLnggIT09IHBvc2l0aW9uLnggfHwgbmV3UG9zLnkgIT09IHBvc2l0aW9uLnkpIHtcbiAgICAgIG5ld1BvcyA9IGNsYW1wRmxvYXRpbmdQbGF5ZXJUb1NjcmVlbihuZXdQb3MpO1xuXG4gICAgICBzZXRQb3NpdGlvbihuZXdQb3MpO1xuICAgICAgcmVsYXRpdmVQb3NSZWYuY3VycmVudCA9IGNhbGN1bGF0ZVJlbGF0aXZlUG9zKG5ld1Bvcy54LCBuZXdQb3MueSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgeyh1cmkgJiYgdmlkZW9Bc3BlY3RSYXRpbykgfHwgY29sbGVjdGlvblNpZGViYXJJZCA/IChcbiAgICAgICAgPFBsYXllckdsb2JhbFN0eWxlc1xuICAgICAgICAgIHZpZGVvQXNwZWN0UmF0aW89e3ZpZGVvQXNwZWN0UmF0aW99XG4gICAgICAgICAgdGhlYXRlck1vZGU9e3RoZWF0ZXJNb2RlfVxuICAgICAgICAgIGFwcERyYXdlck9wZW49e2FwcERyYXdlck9wZW4gJiYgIWlzTGFuZHNjYXBlUm90YXRlZCAmJiAhaXNUYWJsZXRMYW5kc2NhcGV9XG4gICAgICAgICAgaW5pdGlhbFBsYXllckhlaWdodD17aW5pdGlhbFBsYXllckhlaWdodH1cbiAgICAgICAgICBpc0Zsb2F0aW5nPXtpc0Zsb2F0aW5nfVxuICAgICAgICAgIGZpbGVWaWV3ZXJSZWN0PXtmaWxlVmlld2VyUmVjdCB8fCBtYWluUGxheWVyRGltZW5zaW9uc31cbiAgICAgICAgICBtYWluRmlsZVBsYXlpbmc9e21haW5GaWxlUGxheWluZ31cbiAgICAgICAgICBpc0xhbmRzY2FwZVJvdGF0ZWQ9e2lzTGFuZHNjYXBlUm90YXRlZH1cbiAgICAgICAgICBpc1RhYmxldExhbmRzY2FwZT17aXNUYWJsZXRMYW5kc2NhcGV9XG4gICAgICAgIC8+XG4gICAgICApIDogbnVsbH1cblxuICAgICAge3VyaSAmJiBpc1BsYXlhYmxlICYmIChcbiAgICAgICAgPERyYWdnYWJsZVxuICAgICAgICAgIG9uRHJhZz17aGFuZGxlRHJhZ01vdmV9XG4gICAgICAgICAgb25TdGFydD17aGFuZGxlRHJhZ1N0YXJ0fVxuICAgICAgICAgIG9uU3RvcD17aGFuZGxlRHJhZ1N0b3B9XG4gICAgICAgICAgZGVmYXVsdFBvc2l0aW9uPXtwb3NpdGlvbn1cbiAgICAgICAgICBwb3NpdGlvbj17aXNGbG9hdGluZyA/IHBvc2l0aW9uIDogeyB4OiAwLCB5OiAwIH19XG4gICAgICAgICAgYm91bmRzPVwicGFyZW50XCJcbiAgICAgICAgICBoYW5kbGU9XCIuZHJhZ2dhYmxlXCJcbiAgICAgICAgICBjYW5jZWw9XCIuYnV0dG9uXCJcbiAgICAgICAgICBkaXNhYmxlZD17bm9GbG9hdGluZ1BsYXllciB8fCBmb3JjZURpc2FibGV9XG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzbmFtZXMoW0NPTlRFTlRfVklFV0VSX0NMQVNTXSwge1xuICAgICAgICAgICAgICBbRkxPQVRJTkdfUExBWUVSX0NMQVNTXTogaXNGbG9hdGluZyxcbiAgICAgICAgICAgICAgJ2NvbnRlbnRfX3ZpZXdlci0taW5saW5lJzogIWlzRmxvYXRpbmcsXG4gICAgICAgICAgICAgICdjb250ZW50X192aWV3ZXItLXNlY29uZGFyeSc6IGlzQ29tbWVudCxcbiAgICAgICAgICAgICAgJ2NvbnRlbnRfX3ZpZXdlci0tdGhlYXRlci1tb2RlJzogdGhlYXRlck1vZGUgJiYgbWFpbkZpbGVQbGF5aW5nICYmICFpc01vYmlsZSxcbiAgICAgICAgICAgICAgJ2NvbnRlbnRfX3ZpZXdlci0tZGlzYWJsZS1jbGljayc6IHdhc0RyYWdnaW5nLFxuICAgICAgICAgICAgICAnY29udGVudF9fdmlld2VyLS1tb2JpbGUnOiBpc01vYmlsZSAmJiAhaXNMYW5kc2NhcGVSb3RhdGVkICYmICFwbGF5aW5nVXJpU291cmNlLFxuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICBzdHlsZT17XG4gICAgICAgICAgICAgICFpc0Zsb2F0aW5nICYmIGZpbGVWaWV3ZXJSZWN0XG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBmaWxlVmlld2VyUmVjdC53aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBhcHBEcmF3ZXJPcGVuID8gYCR7Z2V0TWF4TGFuZHNjYXBlSGVpZ2h0KCl9cHhgIDogZmlsZVZpZXdlclJlY3QuaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBmaWxlVmlld2VyUmVjdC54LFxuICAgICAgICAgICAgICAgICAgICB0b3A6XG4gICAgICAgICAgICAgICAgICAgICAgaXNNb2JpbGUgJiYgIXBsYXlpbmdVcmlTb3VyY2VcbiAgICAgICAgICAgICAgICAgICAgICAgID8gSEVBREVSX0hFSUdIVF9NT0JJTEVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZmlsZVZpZXdlclJlY3Qud2luZG93T2Zmc2V0ICsgZmlsZVZpZXdlclJlY3QudG9wIC0gSEVBREVSX0hFSUdIVCxcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzbmFtZXMoJ2NvbnRlbnRfX3dyYXBwZXInLCB7ICdjb250ZW50X193cmFwcGVyLS1mbG9hdGluZyc6IGlzRmxvYXRpbmcgfSl9PlxuICAgICAgICAgICAgICB7aXNGbG9hdGluZyAmJiAoXG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgdGl0bGU9e19fKCdDbG9zZScpfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzQ2xhaW1JblF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZG9PcGVuTW9kYWwoTU9EQUxTLkNPTkZJUk0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBfXygnQ2xvc2UgUGxheWVyJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogX18oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjbG9zZSB0aGUgcGxheWVyIGFuZCBjbGVhciB0aGUgY3VycmVudCBRdWV1ZT8nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybTogKGNsb3NlTW9kYWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9DbGVhclBsYXlpbmdVcmkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9DbGVhclF1ZXVlTGlzdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZU1vZGFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGRvQ2xlYXJQbGF5aW5nVXJpKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBpY29uPXtJQ09OUy5SRU1PVkV9XG4gICAgICAgICAgICAgICAgICBidXR0b249XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNvbnRlbnRfX2Zsb2F0aW5nLWNsb3NlXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgIHtpc1JlYWR5VG9QbGF5ICYmICFpc01hdHVyZSA/IChcbiAgICAgICAgICAgICAgICA8RmlsZVJlbmRlciBjbGFzc05hbWU9e2NsYXNzbmFtZXMoeyBkcmFnZ2FibGU6ICFpc01vYmlsZSB9KX0gdXJpPXt1cml9IC8+XG4gICAgICAgICAgICAgICkgOiBpc0xvYWRpbmcgPyAoXG4gICAgICAgICAgICAgICAgPExvYWRpbmdTY3JlZW4gc3RhdHVzPXtfXygnTG9hZGluZycpfSAvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICghY29sbGVjdGlvbklkIHx8ICFjYW5WaWV3RmlsZSB8fCBpc01hdHVyZSkgJiYgKFxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50X19sb2FkaW5nXCI+XG4gICAgICAgICAgICAgICAgICAgIDxBdXRvcGxheUNvdW50ZG93blxuICAgICAgICAgICAgICAgICAgICAgIHVyaT17dXJpfVxuICAgICAgICAgICAgICAgICAgICAgIG5leHRSZWNvbW1lbmRlZFVyaT17bmV4dExpc3RVcmkgfHwgZmlyc3RDb2xsZWN0aW9uSXRlbVVybH1cbiAgICAgICAgICAgICAgICAgICAgICBkb05hdmlnYXRlPXsoKSA9PiBzZXREb05hdmlnYXRlKHRydWUpfVxuICAgICAgICAgICAgICAgICAgICAgIGRvUmVwbGF5PXsoKSA9PiBkb1VyaUluaXRpYXRlUGxheSh7IHVyaSwgY29sbGVjdGlvbjogeyBjb2xsZWN0aW9uSWQgfSB9LCBmYWxzZSwgaXNGbG9hdGluZyl9XG4gICAgICAgICAgICAgICAgICAgICAgZG9QcmV2aW91cz17XG4gICAgICAgICAgICAgICAgICAgICAgICAhcHJldmlvdXNMaXN0VXJpXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UGxheU5leHQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0RG9OYXZpZ2F0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2FuY2VsZWQ9eygpID0+IHNldENvdW50ZG93bkNhbmNlbGVkKHRydWUpfVxuICAgICAgICAgICAgICAgICAgICAgIHNraXBQYWlkXG4gICAgICAgICAgICAgICAgICAgICAgc2tpcE1hdHVyZVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgIHtpc0Zsb2F0aW5nICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NuYW1lcygnY29udGVudF9faW5mbycsIHsgZHJhZ2dhYmxlOiAhaXNNb2JpbGUgfSl9PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50LWluZm9fX3RleHRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjbGFpbS1wcmV2aWV3X190aXRsZVwiIHRpdGxlPXt0aXRsZSB8fCB1cml9PlxuICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0aXRsZSB8fCB1cml9XG4gICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0ZT17bmF2aWdhdGVVcmx9XG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b249XCJsaW5rXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNvbnRlbnRfX2Zsb2F0aW5nLWxpbmtcIlxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgIDxVcmlJbmRpY2F0b3IgbGluayB1cmk9e3VyaX0gLz5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICB7cGxheWluZ0NvbGxlY3Rpb24gJiYgY29sbGVjdGlvblNpZGViYXJJZCAhPT0gY29sbGVjdGlvbklkICYmIChcbiAgICAgICAgICAgICAgICAgICAgPFBsYXlsaXN0Q2FyZFxuICAgICAgICAgICAgICAgICAgICAgIGlkPXtjb2xsZWN0aW9uSWR9XG4gICAgICAgICAgICAgICAgICAgICAgdXJpPXt1cml9XG4gICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUNsaWNrTmF2aWdhdGlvblxuICAgICAgICAgICAgICAgICAgICAgIGRvRGlzYWJsZVBsYXllckRyYWc9e3NldEZvcmNlRGlzYWJsZX1cbiAgICAgICAgICAgICAgICAgICAgICBpc0Zsb2F0aW5nXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvRHJhZ2dhYmxlPlxuICAgICAgKX1cbiAgICA8Lz5cbiAgKTtcbn1cblxudHlwZSBHbG9iYWxTdHlsZXNQcm9wcyA9IHtcbiAgdmlkZW9Bc3BlY3RSYXRpbzogbnVtYmVyLFxuICB0aGVhdGVyTW9kZTogYm9vbGVhbixcbiAgYXBwRHJhd2VyT3BlbjogYm9vbGVhbixcbiAgaW5pdGlhbFBsYXllckhlaWdodDogRWxlbWVudFJlZjxhbnk+LFxuICBpc0Zsb2F0aW5nOiBib29sZWFuLFxuICBmaWxlVmlld2VyUmVjdDogYW55LFxuICBtYWluRmlsZVBsYXlpbmc6IGJvb2xlYW4sXG4gIGlzTGFuZHNjYXBlUm90YXRlZDogYm9vbGVhbixcbiAgaXNUYWJsZXRMYW5kc2NhcGU6IGJvb2xlYW4sXG59O1xuXG5jb25zdCBQbGF5ZXJHbG9iYWxTdHlsZXMgPSAocHJvcHM6IEdsb2JhbFN0eWxlc1Byb3BzKSA9PiB7XG4gIGNvbnN0IHtcbiAgICB2aWRlb0FzcGVjdFJhdGlvLFxuICAgIHRoZWF0ZXJNb2RlLFxuICAgIGFwcERyYXdlck9wZW4sXG4gICAgaW5pdGlhbFBsYXllckhlaWdodCxcbiAgICBpc0Zsb2F0aW5nLFxuICAgIGZpbGVWaWV3ZXJSZWN0LFxuICAgIG1haW5GaWxlUGxheWluZyxcbiAgICBpc0xhbmRzY2FwZVJvdGF0ZWQsXG4gICAgaXNUYWJsZXRMYW5kc2NhcGUsXG4gIH0gPSBwcm9wcztcblxuICBjb25zdCBqdXN0Q2hhbmdlZCA9IFJlYWN0LnVzZVJlZigpO1xuXG4gIGNvbnN0IGlzTW9iaWxlID0gdXNlSXNNb2JpbGUoKTtcbiAgY29uc3QgaXNNb2JpbGVQbGF5ZXIgPSBpc01vYmlsZSAmJiAhaXNGbG9hdGluZzsgLy8gdG8gYXZvaWQgbWluaXBsYXllciAtPiBmaWxlIHBhZ2Ugb25seVxuXG4gIGNvbnN0IGhlaWdodEZvclZpZXdlciA9IGdldFBvc3NpYmxlUGxheWVySGVpZ2h0KHZpZGVvQXNwZWN0UmF0aW8gKiBmaWxlVmlld2VyUmVjdC53aWR0aCwgaXNNb2JpbGUpO1xuICBjb25zdCB3aWR0aEZvclZpZXdlciA9IGhlaWdodEZvclZpZXdlciAvIHZpZGVvQXNwZWN0UmF0aW87XG4gIGNvbnN0IG1heExhbmRzY2FwZUhlaWdodCA9IGdldE1heExhbmRzY2FwZUhlaWdodChpc01vYmlsZSA/IHVuZGVmaW5lZCA6IHdpZHRoRm9yVmlld2VyKTtcbiAgY29uc3QgaGVpZ2h0UmVzdWx0ID0gYXBwRHJhd2VyT3BlbiA/IGAke21heExhbmRzY2FwZUhlaWdodH1weGAgOiBgJHtoZWlnaHRGb3JWaWV3ZXJ9cHhgO1xuICBjb25zdCBhbW91bnROZWVkZWRUb0NlbnRlciA9IGdldEFtb3VudE5lZWRlZFRvQ2VudGVyVmlkZW8oaGVpZ2h0Rm9yVmlld2VyLCBtYXhMYW5kc2NhcGVIZWlnaHQpO1xuXG4gIC8vIGZvcmNlRGVmYXVsdHMgPSBubyBzdHlsZXMgc2hvdWxkIGJlIGFwcGxpZWQgdG8gYW55IG9mIHRoZXNlIGNvbmRpdGlvbnNcbiAgLy8gIW1haW5GaWxlUGxheWluZyA9IGVtYmVkcyBvbiBtYXJrZG93biAoY29tbWVudHMgb3IgcG9zdHMpXG4gIGNvbnN0IGZvcmNlRGVmYXVsdHMgPSAhbWFpbkZpbGVQbGF5aW5nIHx8IHRoZWF0ZXJNb2RlIHx8IGlzRmxvYXRpbmcgfHwgaXNNb2JpbGU7XG5cbiAgY29uc3QgdmlkZW9HcmVhdGVyVGhhbkxhbmRzY2FwZSA9IGhlaWdodEZvclZpZXdlciA+IG1heExhbmRzY2FwZUhlaWdodDtcblxuICAvLyBIYW5kbGVzIHZpZGVvIHNocmluayArIGNlbnRlciBvbiBtb2JpbGUgdmlld1xuICAvLyBkaXJlY3QgRE9NIG1hbmlwdWxhdGlvbiBkdWUgdG8gcGVyZm9ybWFuY2UgZm9yIGV2ZXJ5IHNjcm9sbFxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNNb2JpbGVQbGF5ZXIgfHwgIW1haW5GaWxlUGxheWluZyB8fCBpc0xhbmRzY2FwZVJvdGF0ZWQgfHwgaXNUYWJsZXRMYW5kc2NhcGUpIHJldHVybjtcblxuICAgIGNvbnN0IHZpZXdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke0NPTlRFTlRfVklFV0VSX0NMQVNTfWApO1xuICAgIGlmICh2aWV3ZXIpIHtcbiAgICAgIGlmICghYXBwRHJhd2VyT3BlbiAmJiBoZWlnaHRGb3JWaWV3ZXIpIHZpZXdlci5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHRGb3JWaWV3ZXJ9cHhgO1xuXG4gICAgICBpZiAoIWFwcERyYXdlck9wZW4pIHtcbiAgICAgICAgY29uc3QgaHRtbEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpO1xuICAgICAgICBpZiAoaHRtbEVsKSBodG1sRWwuc2Nyb2xsVG9wID0gMDtcbiAgICAgIH1cblxuICAgICAganVzdENoYW5nZWQuY3VycmVudCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGFwcERyYXdlck9wZW4pIHJldHVybjtcblxuICAgIGZ1bmN0aW9uIGhhbmRsZVNjcm9sbCgpIHtcbiAgICAgIGNvbnN0IHJvb3RFbCA9IGdldFJvb3RFbCgpO1xuXG4gICAgICBpZiAoanVzdENoYW5nZWQuY3VycmVudCkge1xuICAgICAgICBqdXN0Q2hhbmdlZC5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgdmlld2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Q09OVEVOVF9WSUVXRVJfQ0xBU1N9YCk7XG4gICAgICBjb25zdCB2aWRlb05vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmpzLXRlY2gnKTtcbiAgICAgIGNvbnN0IHRvdWNoT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52anMtdG91Y2gtb3ZlcmxheScpO1xuXG4gICAgICBpZiAocm9vdEVsICYmIHZpZXdlcikge1xuICAgICAgICBjb25zdCBzY3JvbGxUb3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgcm9vdEVsLnNjcm9sbFRvcDtcbiAgICAgICAgY29uc3QgaXNIaWdoZXJUaGFuTGFuZHNjYXBlID0gc2Nyb2xsVG9wIDwgaW5pdGlhbFBsYXllckhlaWdodC5jdXJyZW50IC0gbWF4TGFuZHNjYXBlSGVpZ2h0O1xuXG4gICAgICAgIGlmICh2aWRlb05vZGUpIHtcbiAgICAgICAgICBpZiAoaXNIaWdoZXJUaGFuTGFuZHNjYXBlKSB7XG4gICAgICAgICAgICBpZiAoaW5pdGlhbFBsYXllckhlaWdodC5jdXJyZW50ID4gbWF4TGFuZHNjYXBlSGVpZ2h0KSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGluaXRpYWxQbGF5ZXJIZWlnaHQuY3VycmVudCAtIHNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgY29uc3QgYW1vdW50TmVlZGVkVG9DZW50ZXIgPSBnZXRBbW91bnROZWVkZWRUb0NlbnRlclZpZGVvKHZpZGVvTm9kZS5vZmZzZXRIZWlnaHQsIHJlc3VsdCk7XG5cbiAgICAgICAgICAgICAgdmlkZW9Ob2RlLnN0eWxlLnRvcCA9IGAke2Ftb3VudE5lZWRlZFRvQ2VudGVyfXB4YDtcbiAgICAgICAgICAgICAgaWYgKHRvdWNoT3ZlcmxheSkgdG91Y2hPdmVybGF5LnN0eWxlLmhlaWdodCA9IGAke3Jlc3VsdH1weGA7XG4gICAgICAgICAgICAgIHZpZXdlci5zdHlsZS5oZWlnaHQgPSBgJHtyZXN1bHR9cHhgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodG91Y2hPdmVybGF5KSB0b3VjaE92ZXJsYXkuc3R5bGUuaGVpZ2h0ID0gYCR7bWF4TGFuZHNjYXBlSGVpZ2h0fXB4YDtcbiAgICAgICAgICAgIHZpZXdlci5zdHlsZS5oZWlnaHQgPSBgJHttYXhMYW5kc2NhcGVIZWlnaHR9cHhgO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBoYW5kbGVTY3JvbGwpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnN0IHRvdWNoT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52anMtdG91Y2gtb3ZlcmxheScpO1xuICAgICAgaWYgKHRvdWNoT3ZlcmxheSkgdG91Y2hPdmVybGF5LnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcblxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGhhbmRsZVNjcm9sbCk7XG4gICAgfTtcbiAgfSwgW1xuICAgIGFwcERyYXdlck9wZW4sXG4gICAgaGVpZ2h0Rm9yVmlld2VyLFxuICAgIGlzTW9iaWxlUGxheWVyLFxuICAgIG1haW5GaWxlUGxheWluZyxcbiAgICBtYXhMYW5kc2NhcGVIZWlnaHQsXG4gICAgaW5pdGlhbFBsYXllckhlaWdodCxcbiAgICBpc0xhbmRzY2FwZVJvdGF0ZWQsXG4gICAgaXNUYWJsZXRMYW5kc2NhcGUsXG4gIF0pO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHZpZGVvR3JlYXRlclRoYW5MYW5kc2NhcGUgJiYgaXNNb2JpbGVQbGF5ZXIpIHtcbiAgICAgIGNvbnN0IHZpZGVvTm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52anMtdGVjaCcpO1xuICAgICAgaWYgKHZpZGVvTm9kZSkge1xuICAgICAgICBjb25zdCB0b3AgPSBhcHBEcmF3ZXJPcGVuID8gYW1vdW50TmVlZGVkVG9DZW50ZXIgOiAwO1xuICAgICAgICB2aWRlb05vZGUuc3R5bGUudG9wID0gYCR7dG9wfXB4YDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaXNNb2JpbGUgJiYgaXNGbG9hdGluZykge1xuICAgICAgY29uc3Qgdmlld2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Q09OVEVOVF9WSUVXRVJfQ0xBU1N9YCk7XG4gICAgICBpZiAodmlld2VyKSB2aWV3ZXIucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgY29uc3QgdG91Y2hPdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZqcy10b3VjaC1vdmVybGF5Jyk7XG4gICAgICBpZiAodG91Y2hPdmVybGF5KSB0b3VjaE92ZXJsYXkucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgY29uc3QgdmlkZW9Ob2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZqcy10ZWNoJyk7XG4gICAgICBpZiAodmlkZW9Ob2RlKSB2aWRlb05vZGUucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgIH1cbiAgfSwgW2Ftb3VudE5lZWRlZFRvQ2VudGVyLCBhcHBEcmF3ZXJPcGVuLCBpc0Zsb2F0aW5nLCBpc01vYmlsZSwgaXNNb2JpbGVQbGF5ZXIsIHZpZGVvR3JlYXRlclRoYW5MYW5kc2NhcGVdKTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc1RhYmxldExhbmRzY2FwZSkge1xuICAgICAgY29uc3QgdmlkZW9Ob2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZqcy10ZWNoJyk7XG4gICAgICBpZiAodmlkZW9Ob2RlKSB2aWRlb05vZGUucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgY29uc3QgdG91Y2hPdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZqcy10b3VjaC1vdmVybGF5Jyk7XG4gICAgICBpZiAodG91Y2hPdmVybGF5KSB0b3VjaE92ZXJsYXkucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgIH1cbiAgfSwgW2lzVGFibGV0TGFuZHNjYXBlXSk7XG5cbiAgLy8gLS0gcmVuZGVyIHN0eWxlcyAtLVxuXG4gIC8vIGRlY2xhcmluZyBzb21lIHN0eWxlIG9iamVjdHMgYXMgdmFyaWFibGVzIG1ha2VzIGl0IGVhc2llciBmb3IgcmVwZWF0ZWQgY2FzZXNcbiAgY29uc3QgdHJhbnNwYXJlbnRCYWNrZ3JvdW5kID0ge1xuICAgIGJhY2tncm91bmQ6IHZpZGVvR3JlYXRlclRoYW5MYW5kc2NhcGUgJiYgbWFpbkZpbGVQbGF5aW5nICYmICFmb3JjZURlZmF1bHRzID8gJ3RyYW5zcGFyZW50ICFpbXBvcnRhbnQnIDogdW5kZWZpbmVkLFxuICB9O1xuICBjb25zdCBtYXhIZWlnaHQgPSB7XG4gICAgbWF4SGVpZ2h0OiAhdGhlYXRlck1vZGUgJiYgIWlzTW9iaWxlID8gJ3ZhcigtLWRlc2t0b3AtcG9ydHJhaXQtcGxheWVyLW1heC1oZWlnaHQpJyA6IHVuZGVmaW5lZCxcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxHbG9iYWxcbiAgICAgIHN0eWxlcz17e1xuICAgICAgICBbYC4ke1BSSU1BUllfUExBWUVSX1dSQVBQRVJfQ0xBU1N9YF06IHtcbiAgICAgICAgICBoZWlnaHQ6XG4gICAgICAgICAgICAhdGhlYXRlck1vZGUgJiYgbWFpbkZpbGVQbGF5aW5nICYmIGZpbGVWaWV3ZXJSZWN0Py5oZWlnaHQgPiAwID8gYCR7aGVpZ2h0UmVzdWx0fSAhaW1wb3J0YW50YCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBvcGFjaXR5OiAhdGhlYXRlck1vZGUgJiYgbWFpbkZpbGVQbGF5aW5nID8gJzAgIWltcG9ydGFudCcgOiB1bmRlZmluZWQsXG4gICAgICAgIH0sXG5cbiAgICAgICAgJy5maWxlLXJlbmRlci0tdmlkZW8nOiB7XG4gICAgICAgICAgLi4udHJhbnNwYXJlbnRCYWNrZ3JvdW5kLFxuICAgICAgICAgIC4uLm1heEhlaWdodCxcblxuICAgICAgICAgIHZpZGVvOiBtYXhIZWlnaHQsXG4gICAgICAgIH0sXG4gICAgICAgICcuY29udGVudF9fd3JhcHBlcic6IHRyYW5zcGFyZW50QmFja2dyb3VuZCxcbiAgICAgICAgJy52aWRlby1qcyc6IHtcbiAgICAgICAgICAuLi50cmFuc3BhcmVudEJhY2tncm91bmQsXG5cbiAgICAgICAgICAnLnZqcy10b3VjaC1vdmVybGF5Jzoge1xuICAgICAgICAgICAgbWF4SGVpZ2h0OiBpc1RhYmxldExhbmRzY2FwZSA/ICd2YXIoLS1kZXNrdG9wLXBvcnRyYWl0LXBsYXllci1tYXgtaGVpZ2h0KSAhaW1wb3J0YW50JyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuXG4gICAgICAgICcudmpzLWZ1bGxzY3JlZW4nOiB7XG4gICAgICAgICAgdmlkZW86IHtcbiAgICAgICAgICAgIHRvcDogJ3Vuc2V0ICFpbXBvcnRhbnQnLFxuICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJSAhaW1wb3J0YW50JyxcbiAgICAgICAgICB9LFxuICAgICAgICAgICcudmpzLXRvdWNoLW92ZXJsYXknOiB7XG4gICAgICAgICAgICBoZWlnaHQ6ICcxMDAlICFpbXBvcnRhbnQnLFxuICAgICAgICAgICAgbWF4SGVpZ2h0OiAndW5zZXQgIWltcG9ydGFudCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcblxuICAgICAgICAnLnZqcy10ZWNoJzoge1xuICAgICAgICAgIG9wYWNpdHk6ICcxJyxcbiAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICB0b3A6IGlzRmxvYXRpbmcgPyAnMHB4ICFpbXBvcnRhbnQnIDogdW5kZWZpbmVkLFxuICAgICAgICB9LFxuXG4gICAgICAgIFtgLiR7Q09OVEVOVF9WSUVXRVJfQ0xBU1N9YF06IHtcbiAgICAgICAgICBoZWlnaHQ6XG4gICAgICAgICAgICAoIWZvcmNlRGVmYXVsdHMgfHwgaXNMYW5kc2NhcGVSb3RhdGVkKSAmJiAoIWlzTW9iaWxlIHx8IGlzTW9iaWxlUGxheWVyKVxuICAgICAgICAgICAgICA/IGAke2hlaWdodFJlc3VsdH0gIWltcG9ydGFudGBcbiAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgLi4ubWF4SGVpZ2h0LFxuICAgICAgICB9LFxuXG4gICAgICAgICcucGxheWxpc3QtY2FyZCc6IHtcbiAgICAgICAgICBtYXhIZWlnaHQ6XG4gICAgICAgICAgICAhaXNNb2JpbGUgJiYgIXRoZWF0ZXJNb2RlICYmIG1haW5GaWxlUGxheWluZ1xuICAgICAgICAgICAgICA/IGAke2hlaWdodEZvclZpZXdlcn1weGBcbiAgICAgICAgICAgICAgOiBpc01vYmlsZVxuICAgICAgICAgICAgICA/ICcxMDAlJ1xuICAgICAgICAgICAgICA6IGZpbGVWaWV3ZXJSZWN0XG4gICAgICAgICAgICAgID8gYCR7ZmlsZVZpZXdlclJlY3QuaGVpZ2h0fXB4YFxuICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgfSxcbiAgICAgIH19XG4gICAgLz5cbiAgKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFVQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFDQTtBQWdEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBNkNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQXBEQTtBQUFBO0FBQUE7QUF3REE7QUFDQTtBQUNBO0FBQ0E7QUEzREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWtFQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBWUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQS9CQTtBQUNBO0FBQ0E7QUFpQ0E7QUFBQTtBQUFBO0FBR0E7QUF0Q0E7QUF5Q0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFjQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFySkE7QUF5SkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBV0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBWEE7QUFDQTtBQUNBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQWZBO0FBOEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQXZCQTtBQUFBO0FBNkJBO0FBQ0E7QUFDQTtBQUZBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVNBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFEQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBUUE7QUF2UkE7QUEyUkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQUE7QUFPQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFZQTtBQVFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVhBO0FBdUJBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBREE7QUFXQTtBQUNBO0FBZkE7QUFpQkE7QUFDQTtBQUNBO0FBbkJBO0FBd0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBSEE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUpBO0FBS0E7QUFJQTtBQUNBO0FBVkE7QUFhQTtBQUFBO0FBYkE7QUFjQTtBQUNBO0FBZkE7QUFzQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVFBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQWdCQTtBQUNBO0FBYUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBYUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBRUE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBSkE7QUFyREE7QUFzRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQWhCQTtBQW1CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBV0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUlBO0FBRUE7QUFFQTtBQUVBO0FBSEE7QUFVQTtBQVhBO0FBaUJBO0FBQ0E7QUFEQTtBQWpCQTtBQXVCQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBUUE7QUF6Q0E7QUFpREE7QUFEQTtBQWpEQTtBQTdJQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../ui/component/fileRenderFloating/view.jsx\n");

/***/ }),

/***/ "../ui/page/embedWrapper/view.jsx":
/*!****************************************!*\
  !*** ../ui/page/embedWrapper/view.jsx ***!
  \****************************************/
/*! exports provided: EmbedContext, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EmbedContext\", function() { return EmbedContext; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EmbedWrapperPage; });\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! config */ \"../config.js\");\n/* harmony import */ var config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(config__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! constants/pages */ \"../ui/constants/pages.js\");\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(constants_pages__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! classnames */ \"../node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var component_fileRender__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! component/fileRender */ \"../ui/component/fileRender/index.js\");\n/* harmony import */ var component_fileViewerEmbeddedTitle__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component/fileViewerEmbeddedTitle */ \"../ui/component/fileViewerEmbeddedTitle/index.js\");\n/* harmony import */ var component_spinner__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! component/spinner */ \"../ui/component/spinner/index.js\");\n/* harmony import */ var component_button__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! component/button */ \"../ui/component/button/index.js\");\n/* harmony import */ var component_common_card__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! component/common/card */ \"../ui/component/common/card.jsx\");\n/* harmony import */ var util_url__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! util/url */ \"../ui/util/url.js\");\n/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-router */ \"../node_modules/react-router/esm/react-router.js\");\n/* harmony import */ var component_yrbl__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! component/yrbl */ \"../ui/component/yrbl/index.jsx\");\n/* harmony import */ var effects_use_fetch_live__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! effects/use-fetch-live */ \"../ui/effects/use-fetch-live.js\");\n/* harmony import */ var effects_use_get_poster__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! effects/use-get-poster */ \"../ui/effects/use-get-poster.js\");\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n // $FlowFixMe cannot resolve ...\n\n\n\nvar EmbedContext = react__WEBPACK_IMPORTED_MODULE_2___default.a.createContext();\nfunction EmbedWrapperPage(props) {\n  var uri = props.uri,\n      claimId = props.claimId,\n      haveClaim = props.haveClaim,\n      nullClaim = props.nullClaim,\n      canonicalUrl = props.canonicalUrl,\n      txid = props.txid,\n      nout = props.nout,\n      channelUri = props.channelUri,\n      channelClaimId = props.channelClaimId,\n      channelTxid = props.channelTxid,\n      channelNout = props.channelNout,\n      costInfo = props.costInfo,\n      streamingUrl = props.streamingUrl,\n      isResolvingUri = props.isResolvingUri,\n      blackListedOutpoints = props.blackListedOutpoints,\n      isCurrentClaimLive = props.isCurrentClaimLive,\n      isLivestreamClaim = props.isLivestreamClaim,\n      claimThumbnail = props.claimThumbnail,\n      obscurePreview = props.obscurePreview,\n      activeLivestreamInitialized = props.activeLivestreamInitialized,\n      geoRestriction = props.geoRestriction,\n      latestClaimUrl = props.latestClaimUrl,\n      isNewestPath = props.isNewestPath,\n      fetchLatestClaimForChannel = props.fetchLatestClaimForChannel,\n      doResolveUri = props.doResolveUri,\n      doPlayUri = props.doPlayUri,\n      doFetchCostInfoForUri = props.doFetchCostInfoForUri,\n      doFetchChannelLiveStatus = props.doFetchChannelLiveStatus,\n      doCommentSocketConnect = props.doCommentSocketConnect,\n      doCommentSocketDisconnect = props.doCommentSocketDisconnect,\n      doFetchActiveLivestreams = props.doFetchActiveLivestreams;\n\n  var _useHistory = Object(react_router__WEBPACK_IMPORTED_MODULE_10__[\"useHistory\"])(),\n      search = _useHistory.location.search;\n\n  var _React$useState = react__WEBPACK_IMPORTED_MODULE_2___default.a.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      livestreamsFetched = _React$useState2[0],\n      setLivestreamsFetched = _React$useState2[1];\n\n  var channelUrl = channelUri && Object(util_url__WEBPACK_IMPORTED_MODULE_9__[\"formatLbryChannelName\"])(channelUri);\n  var urlParams = new URLSearchParams(search);\n  var featureParam = urlParams.get('feature');\n  var latestContentPath = featureParam === constants_pages__WEBPACK_IMPORTED_MODULE_1__[\"LATEST\"];\n  var liveContentPath = featureParam === constants_pages__WEBPACK_IMPORTED_MODULE_1__[\"LIVE_NOW\"];\n  var embedLightBackground = urlParams.get('embedBackgroundLight');\n  var readyToDisplay = isCurrentClaimLive || haveClaim && streamingUrl;\n  var isLiveClaimFetching = isLivestreamClaim && !activeLivestreamInitialized;\n  var isLiveClaimNotPlaying = isLivestreamClaim && !isLiveClaimFetching && !readyToDisplay;\n  var loading = !haveClaim && isResolvingUri || isLiveClaimFetching;\n  var noContentFound = nullClaim && !isResolvingUri;\n  var hasCost = costInfo && costInfo.cost > 0;\n  var contentLink = Object(util_url__WEBPACK_IMPORTED_MODULE_9__[\"formatLbryUrlForWeb\"])(uri);\n  var isClaimBlackListed = haveClaim && blackListedOutpoints && blackListedOutpoints.some(function (outpoint) {\n    return channelUrl && outpoint.txid === channelTxid && outpoint.nout === channelNout || outpoint.txid === txid && outpoint.nout === nout;\n  });\n  var thumbnail = Object(effects_use_get_poster__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(claimThumbnail);\n  react__WEBPACK_IMPORTED_MODULE_2___default.a.useEffect(function () {\n    if (!latestClaimUrl && liveContentPath && channelClaimId) {\n      doFetchChannelLiveStatus(channelClaimId);\n    }\n  }, [channelClaimId, doFetchChannelLiveStatus, latestClaimUrl, liveContentPath]);\n  react__WEBPACK_IMPORTED_MODULE_2___default.a.useEffect(function () {\n    if (!latestClaimUrl && latestContentPath && canonicalUrl) {\n      fetchLatestClaimForChannel(canonicalUrl, true);\n    }\n  }, [canonicalUrl, fetchLatestClaimForChannel, latestClaimUrl, latestContentPath]);\n  react__WEBPACK_IMPORTED_MODULE_2___default.a.useEffect(function () {\n    if (doFetchActiveLivestreams && isLivestreamClaim) {\n      doFetchActiveLivestreams();\n      setLivestreamsFetched(true);\n    }\n  }, [doFetchActiveLivestreams, isLivestreamClaim]); // Establish web socket connection for viewer count.\n\n  react__WEBPACK_IMPORTED_MODULE_2___default.a.useEffect(function () {\n    if (!isLivestreamClaim || !claimId || !channelUrl || !canonicalUrl) return;\n    var channelName = Object(util_url__WEBPACK_IMPORTED_MODULE_9__[\"formatLbryChannelName\"])(channelUrl); // TODO: reverse claim ID if it's a protected stream\n\n    doCommentSocketConnect(canonicalUrl, channelName, claimId);\n    return function () {\n      if (claimId) {\n        doCommentSocketDisconnect(claimId, channelName);\n      }\n    };\n  }, [canonicalUrl, channelUrl, claimId, doCommentSocketConnect, doCommentSocketDisconnect, isLivestreamClaim]);\n  react__WEBPACK_IMPORTED_MODULE_2___default.a.useEffect(function () {\n    if (doResolveUri && uri && !haveClaim) {\n      doResolveUri(uri);\n    }\n\n    if (uri && !isLivestreamClaim && (isNewestPath ? latestClaimUrl : haveClaim) && costInfo && costInfo.cost === 0) {\n      doPlayUri(uri);\n    }\n  }, [doPlayUri, isLivestreamClaim, doResolveUri, haveClaim, costInfo, uri, isNewestPath, latestClaimUrl]);\n  react__WEBPACK_IMPORTED_MODULE_2___default.a.useEffect(function () {\n    if (haveClaim && uri && doFetchCostInfoForUri) {\n      doFetchCostInfoForUri(uri);\n    }\n  }, [uri, haveClaim, doFetchCostInfoForUri]);\n  Object(effects_use_fetch_live__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(livestreamsFetched ? channelClaimId : undefined, doFetchChannelLiveStatus); // Wait for latest claim fetch\n\n  if (isNewestPath && latestClaimUrl === undefined) {\n    return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n      className: \"main--empty\"\n    }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_spinner__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n      delayed: true\n    }));\n  }\n\n  if (isClaimBlackListed) {\n    return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_common_card__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n      title: uri,\n      subtitle: __('In response to a complaint we received under the US Digital Millennium Copyright Act, we have blocked access to this content from our applications.'),\n      actions: react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n        className: \"section__actions\"\n      }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_button__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n        button: \"link\",\n        href: \"https://odysee.com/@OdyseeHelp:b/copyright:f\",\n        label: __('Read More')\n      }))\n    });\n  }\n\n  if (geoRestriction) {\n    return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n      className: \"main--empty\"\n    }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_yrbl__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n      title: __('Content unavailable'),\n      subtitle: __(geoRestriction.message || ''),\n      type: \"sad\",\n      alwaysShow: true\n    }));\n  }\n\n  if (isLiveClaimNotPlaying) {\n    return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n      className: \"embed__inline-button\",\n      style: thumbnail && !obscurePreview ? {\n        backgroundImage: \"url(\\\"\".concat(thumbnail, \"\\\")\"),\n        height: '100%'\n      } : {}\n    }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_fileViewerEmbeddedTitle__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n      uri: uri\n    }), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"a\", {\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      href: Object(util_url__WEBPACK_IMPORTED_MODULE_9__[\"formatLbryUrlForWeb\"])(uri)\n    }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_button__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n      iconSize: 30,\n      title: __('View'),\n      className: \"button--icon button--view\"\n    })));\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_3___default()('embed__wrapper', {\n      'embed__wrapper--light-background': embedLightBackground\n    })\n  }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(EmbedContext.Provider, {\n    value: true\n  }, readyToDisplay ? react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_fileRender__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n    uri: uri,\n    embedded: true\n  }) : react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"embed__loading\"\n  }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_fileViewerEmbeddedTitle__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n    uri: uri\n  }), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"embed__loading-text\"\n  }, (loading || !haveClaim && !noContentFound) && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_spinner__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n    delayed: true,\n    light: true\n  }), noContentFound && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"h1\", null, __('No content found.')), hasCost && react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"h1\", null, __('Paid content cannot be embedded.')), react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(\"div\", {\n    className: \"section__actions--centered\"\n  }, react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(component_button__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n    label: __('Watch on %SITE_NAME%', {\n      SITE_NAME: config__WEBPACK_IMPORTED_MODULE_0__[\"SITE_NAME\"]\n    }),\n    button: \"primary\",\n    href: contentLink\n  })))))));\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvcGFnZS9lbWJlZFdyYXBwZXIvdmlldy5qc3guanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vdWkvcGFnZS9lbWJlZFdyYXBwZXIvdmlldy5qc3g/ZGEyNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuaW1wb3J0IHsgU0lURV9OQU1FIH0gZnJvbSAnY29uZmlnJztcbmltcG9ydCAqIGFzIFBBR0VTIGZyb20gJ2NvbnN0YW50cy9wYWdlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgRmlsZVJlbmRlciBmcm9tICdjb21wb25lbnQvZmlsZVJlbmRlcic7XG5pbXBvcnQgRmlsZVZpZXdlckVtYmVkZGVkVGl0bGUgZnJvbSAnY29tcG9uZW50L2ZpbGVWaWV3ZXJFbWJlZGRlZFRpdGxlJztcbmltcG9ydCBTcGlubmVyIGZyb20gJ2NvbXBvbmVudC9zcGlubmVyJztcbmltcG9ydCBCdXR0b24gZnJvbSAnY29tcG9uZW50L2J1dHRvbic7XG5pbXBvcnQgQ2FyZCBmcm9tICdjb21wb25lbnQvY29tbW9uL2NhcmQnO1xuaW1wb3J0IHsgZm9ybWF0TGJyeVVybEZvcldlYiwgZm9ybWF0TGJyeUNoYW5uZWxOYW1lIH0gZnJvbSAndXRpbC91cmwnO1xuaW1wb3J0IHsgdXNlSGlzdG9yeSB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG5pbXBvcnQgWXJibCBmcm9tICdjb21wb25lbnQveXJibCc7XG4vLyAkRmxvd0ZpeE1lIGNhbm5vdCByZXNvbHZlIC4uLlxuaW1wb3J0IHVzZUZldGNoTGl2ZVN0YXR1cyBmcm9tICdlZmZlY3RzL3VzZS1mZXRjaC1saXZlJztcbmltcG9ydCB1c2VHZXRQb3N0ZXIgZnJvbSAnZWZmZWN0cy91c2UtZ2V0LXBvc3Rlcic7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHVyaTogc3RyaW5nLFxuICBjbGFpbUlkOiA/c3RyaW5nLFxuICBoYXZlQ2xhaW06IGJvb2xlYW4sXG4gIG51bGxDbGFpbTogYm9vbGVhbixcbiAgY2Fub25pY2FsVXJsOiA/c3RyaW5nLFxuICB0eGlkOiA/c3RyaW5nLFxuICBub3V0OiA/c3RyaW5nLFxuICBjaGFubmVsVXJpOiA/c3RyaW5nLFxuICBjaGFubmVsQ2xhaW1JZDogP3N0cmluZyxcbiAgY2hhbm5lbFR4aWQ6ID9zdHJpbmcsXG4gIGNoYW5uZWxOb3V0OiA/c3RyaW5nLFxuICBjb3N0SW5mbzogYW55LFxuICBzdHJlYW1pbmdVcmw6IHN0cmluZyxcbiAgaXNSZXNvbHZpbmdVcmk6IGJvb2xlYW4sXG4gIGJsYWNrTGlzdGVkT3V0cG9pbnRzOiBBcnJheTx7IHR4aWQ6IHN0cmluZywgbm91dDogbnVtYmVyIH0+LFxuICBpc0N1cnJlbnRDbGFpbUxpdmU6IGJvb2xlYW4sXG4gIGlzTGl2ZXN0cmVhbUNsYWltOiBib29sZWFuLFxuICBjbGFpbVRodW1ibmFpbD86IHN0cmluZyxcbiAgb2JzY3VyZVByZXZpZXc6IGJvb2xlYW4sXG4gIGFjdGl2ZUxpdmVzdHJlYW1Jbml0aWFsaXplZDogYm9vbGVhbixcbiAgZ2VvUmVzdHJpY3Rpb246ID9HZW9SZXN0cmljdGlvbixcbiAgbGF0ZXN0Q2xhaW1Vcmw6ID9zdHJpbmcsXG4gIGlzTmV3ZXN0UGF0aDogP2Jvb2xlYW4sXG4gIGZldGNoTGF0ZXN0Q2xhaW1Gb3JDaGFubmVsOiAodXJpOiBzdHJpbmcsIGlzRW1iZWQ6IGJvb2xlYW4pID0+IHZvaWQsXG4gIGRvUmVzb2x2ZVVyaTogKHVyaTogc3RyaW5nKSA9PiB2b2lkLFxuICBkb1BsYXlVcmk6ICh1cmk6IHN0cmluZykgPT4gdm9pZCxcbiAgZG9GZXRjaENvc3RJbmZvRm9yVXJpOiAodXJpOiBzdHJpbmcpID0+IHZvaWQsXG4gIGRvRmV0Y2hDaGFubmVsTGl2ZVN0YXR1czogKHN0cmluZykgPT4gdm9pZCxcbiAgZG9Db21tZW50U29ja2V0Q29ubmVjdDogKHN0cmluZywgc3RyaW5nLCBzdHJpbmcpID0+IHZvaWQsXG4gIGRvQ29tbWVudFNvY2tldERpc2Nvbm5lY3Q6IChzdHJpbmcsIHN0cmluZykgPT4gdm9pZCxcbiAgZG9GZXRjaEFjdGl2ZUxpdmVzdHJlYW1zOiAoKSA9PiB2b2lkLFxufTtcblxuZXhwb3J0IGNvbnN0IEVtYmVkQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQ8YW55PigpO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBFbWJlZFdyYXBwZXJQYWdlKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7XG4gICAgdXJpLFxuICAgIGNsYWltSWQsXG4gICAgaGF2ZUNsYWltLFxuICAgIG51bGxDbGFpbSxcbiAgICBjYW5vbmljYWxVcmwsXG4gICAgdHhpZCxcbiAgICBub3V0LFxuICAgIGNoYW5uZWxVcmksXG4gICAgY2hhbm5lbENsYWltSWQsXG4gICAgY2hhbm5lbFR4aWQsXG4gICAgY2hhbm5lbE5vdXQsXG4gICAgY29zdEluZm8sXG4gICAgc3RyZWFtaW5nVXJsLFxuICAgIGlzUmVzb2x2aW5nVXJpLFxuICAgIGJsYWNrTGlzdGVkT3V0cG9pbnRzLFxuICAgIGlzQ3VycmVudENsYWltTGl2ZSxcbiAgICBpc0xpdmVzdHJlYW1DbGFpbSxcbiAgICBjbGFpbVRodW1ibmFpbCxcbiAgICBvYnNjdXJlUHJldmlldyxcbiAgICBhY3RpdmVMaXZlc3RyZWFtSW5pdGlhbGl6ZWQsXG4gICAgZ2VvUmVzdHJpY3Rpb24sXG4gICAgbGF0ZXN0Q2xhaW1VcmwsXG4gICAgaXNOZXdlc3RQYXRoLFxuICAgIGZldGNoTGF0ZXN0Q2xhaW1Gb3JDaGFubmVsLFxuICAgIGRvUmVzb2x2ZVVyaSxcbiAgICBkb1BsYXlVcmksXG4gICAgZG9GZXRjaENvc3RJbmZvRm9yVXJpLFxuICAgIGRvRmV0Y2hDaGFubmVsTGl2ZVN0YXR1cyxcbiAgICBkb0NvbW1lbnRTb2NrZXRDb25uZWN0LFxuICAgIGRvQ29tbWVudFNvY2tldERpc2Nvbm5lY3QsXG4gICAgZG9GZXRjaEFjdGl2ZUxpdmVzdHJlYW1zLFxuICB9ID0gcHJvcHM7XG5cbiAgY29uc3Qge1xuICAgIGxvY2F0aW9uOiB7IHNlYXJjaCB9LFxuICB9ID0gdXNlSGlzdG9yeSgpO1xuXG4gIGNvbnN0IFtsaXZlc3RyZWFtc0ZldGNoZWQsIHNldExpdmVzdHJlYW1zRmV0Y2hlZF0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG5cbiAgY29uc3QgY2hhbm5lbFVybCA9IGNoYW5uZWxVcmkgJiYgZm9ybWF0TGJyeUNoYW5uZWxOYW1lKGNoYW5uZWxVcmkpO1xuICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHNlYXJjaCk7XG4gIGNvbnN0IGZlYXR1cmVQYXJhbSA9IHVybFBhcmFtcy5nZXQoJ2ZlYXR1cmUnKTtcbiAgY29uc3QgbGF0ZXN0Q29udGVudFBhdGggPSBmZWF0dXJlUGFyYW0gPT09IFBBR0VTLkxBVEVTVDtcbiAgY29uc3QgbGl2ZUNvbnRlbnRQYXRoID0gZmVhdHVyZVBhcmFtID09PSBQQUdFUy5MSVZFX05PVztcbiAgY29uc3QgZW1iZWRMaWdodEJhY2tncm91bmQgPSB1cmxQYXJhbXMuZ2V0KCdlbWJlZEJhY2tncm91bmRMaWdodCcpO1xuICBjb25zdCByZWFkeVRvRGlzcGxheSA9IGlzQ3VycmVudENsYWltTGl2ZSB8fCAoaGF2ZUNsYWltICYmIHN0cmVhbWluZ1VybCk7XG4gIGNvbnN0IGlzTGl2ZUNsYWltRmV0Y2hpbmcgPSBpc0xpdmVzdHJlYW1DbGFpbSAmJiAhYWN0aXZlTGl2ZXN0cmVhbUluaXRpYWxpemVkO1xuICBjb25zdCBpc0xpdmVDbGFpbU5vdFBsYXlpbmcgPSBpc0xpdmVzdHJlYW1DbGFpbSAmJiAhaXNMaXZlQ2xhaW1GZXRjaGluZyAmJiAhcmVhZHlUb0Rpc3BsYXk7XG4gIGNvbnN0IGxvYWRpbmcgPSAoIWhhdmVDbGFpbSAmJiBpc1Jlc29sdmluZ1VyaSkgfHwgaXNMaXZlQ2xhaW1GZXRjaGluZztcbiAgY29uc3Qgbm9Db250ZW50Rm91bmQgPSBudWxsQ2xhaW0gJiYgIWlzUmVzb2x2aW5nVXJpO1xuICBjb25zdCBoYXNDb3N0ID0gY29zdEluZm8gJiYgY29zdEluZm8uY29zdCA+IDA7XG4gIGNvbnN0IGNvbnRlbnRMaW5rID0gZm9ybWF0TGJyeVVybEZvcldlYih1cmkpO1xuICBjb25zdCBpc0NsYWltQmxhY2tMaXN0ZWQgPVxuICAgIGhhdmVDbGFpbSAmJlxuICAgIGJsYWNrTGlzdGVkT3V0cG9pbnRzICYmXG4gICAgYmxhY2tMaXN0ZWRPdXRwb2ludHMuc29tZShcbiAgICAgIChvdXRwb2ludCkgPT5cbiAgICAgICAgKGNoYW5uZWxVcmwgJiYgb3V0cG9pbnQudHhpZCA9PT0gY2hhbm5lbFR4aWQgJiYgb3V0cG9pbnQubm91dCA9PT0gY2hhbm5lbE5vdXQpIHx8XG4gICAgICAgIChvdXRwb2ludC50eGlkID09PSB0eGlkICYmIG91dHBvaW50Lm5vdXQgPT09IG5vdXQpXG4gICAgKTtcblxuICBjb25zdCB0aHVtYm5haWwgPSB1c2VHZXRQb3N0ZXIoY2xhaW1UaHVtYm5haWwpO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFsYXRlc3RDbGFpbVVybCAmJiBsaXZlQ29udGVudFBhdGggJiYgY2hhbm5lbENsYWltSWQpIHtcbiAgICAgIGRvRmV0Y2hDaGFubmVsTGl2ZVN0YXR1cyhjaGFubmVsQ2xhaW1JZCk7XG4gICAgfVxuICB9LCBbY2hhbm5lbENsYWltSWQsIGRvRmV0Y2hDaGFubmVsTGl2ZVN0YXR1cywgbGF0ZXN0Q2xhaW1VcmwsIGxpdmVDb250ZW50UGF0aF0pO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFsYXRlc3RDbGFpbVVybCAmJiBsYXRlc3RDb250ZW50UGF0aCAmJiBjYW5vbmljYWxVcmwpIHtcbiAgICAgIGZldGNoTGF0ZXN0Q2xhaW1Gb3JDaGFubmVsKGNhbm9uaWNhbFVybCwgdHJ1ZSk7XG4gICAgfVxuICB9LCBbY2Fub25pY2FsVXJsLCBmZXRjaExhdGVzdENsYWltRm9yQ2hhbm5lbCwgbGF0ZXN0Q2xhaW1VcmwsIGxhdGVzdENvbnRlbnRQYXRoXSk7XG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZG9GZXRjaEFjdGl2ZUxpdmVzdHJlYW1zICYmIGlzTGl2ZXN0cmVhbUNsYWltKSB7XG4gICAgICBkb0ZldGNoQWN0aXZlTGl2ZXN0cmVhbXMoKTtcbiAgICAgIHNldExpdmVzdHJlYW1zRmV0Y2hlZCh0cnVlKTtcbiAgICB9XG4gIH0sIFtkb0ZldGNoQWN0aXZlTGl2ZXN0cmVhbXMsIGlzTGl2ZXN0cmVhbUNsYWltXSk7XG5cbiAgLy8gRXN0YWJsaXNoIHdlYiBzb2NrZXQgY29ubmVjdGlvbiBmb3Igdmlld2VyIGNvdW50LlxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNMaXZlc3RyZWFtQ2xhaW0gfHwgIWNsYWltSWQgfHwgIWNoYW5uZWxVcmwgfHwgIWNhbm9uaWNhbFVybCkgcmV0dXJuO1xuXG4gICAgY29uc3QgY2hhbm5lbE5hbWUgPSBmb3JtYXRMYnJ5Q2hhbm5lbE5hbWUoY2hhbm5lbFVybCk7XG5cbiAgICAvLyBUT0RPOiByZXZlcnNlIGNsYWltIElEIGlmIGl0J3MgYSBwcm90ZWN0ZWQgc3RyZWFtXG4gICAgZG9Db21tZW50U29ja2V0Q29ubmVjdChjYW5vbmljYWxVcmwsIGNoYW5uZWxOYW1lLCBjbGFpbUlkKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoY2xhaW1JZCkge1xuICAgICAgICBkb0NvbW1lbnRTb2NrZXREaXNjb25uZWN0KGNsYWltSWQsIGNoYW5uZWxOYW1lKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbY2Fub25pY2FsVXJsLCBjaGFubmVsVXJsLCBjbGFpbUlkLCBkb0NvbW1lbnRTb2NrZXRDb25uZWN0LCBkb0NvbW1lbnRTb2NrZXREaXNjb25uZWN0LCBpc0xpdmVzdHJlYW1DbGFpbV0pO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGRvUmVzb2x2ZVVyaSAmJiB1cmkgJiYgIWhhdmVDbGFpbSkge1xuICAgICAgZG9SZXNvbHZlVXJpKHVyaSk7XG4gICAgfVxuXG4gICAgaWYgKHVyaSAmJiAhaXNMaXZlc3RyZWFtQ2xhaW0gJiYgKGlzTmV3ZXN0UGF0aCA/IGxhdGVzdENsYWltVXJsIDogaGF2ZUNsYWltKSAmJiBjb3N0SW5mbyAmJiBjb3N0SW5mby5jb3N0ID09PSAwKSB7XG4gICAgICBkb1BsYXlVcmkodXJpKTtcbiAgICB9XG4gIH0sIFtkb1BsYXlVcmksIGlzTGl2ZXN0cmVhbUNsYWltLCBkb1Jlc29sdmVVcmksIGhhdmVDbGFpbSwgY29zdEluZm8sIHVyaSwgaXNOZXdlc3RQYXRoLCBsYXRlc3RDbGFpbVVybF0pO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGhhdmVDbGFpbSAmJiB1cmkgJiYgZG9GZXRjaENvc3RJbmZvRm9yVXJpKSB7XG4gICAgICBkb0ZldGNoQ29zdEluZm9Gb3JVcmkodXJpKTtcbiAgICB9XG4gIH0sIFt1cmksIGhhdmVDbGFpbSwgZG9GZXRjaENvc3RJbmZvRm9yVXJpXSk7XG5cbiAgdXNlRmV0Y2hMaXZlU3RhdHVzKGxpdmVzdHJlYW1zRmV0Y2hlZCA/IGNoYW5uZWxDbGFpbUlkIDogdW5kZWZpbmVkLCBkb0ZldGNoQ2hhbm5lbExpdmVTdGF0dXMpO1xuXG4gIC8vIFdhaXQgZm9yIGxhdGVzdCBjbGFpbSBmZXRjaFxuICBpZiAoaXNOZXdlc3RQYXRoICYmIGxhdGVzdENsYWltVXJsID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYWluLS1lbXB0eVwiPlxuICAgICAgICA8U3Bpbm5lciBkZWxheWVkIC8+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgaWYgKGlzQ2xhaW1CbGFja0xpc3RlZCkge1xuICAgIHJldHVybiAoXG4gICAgICA8Q2FyZFxuICAgICAgICB0aXRsZT17dXJpfVxuICAgICAgICBzdWJ0aXRsZT17X18oXG4gICAgICAgICAgJ0luIHJlc3BvbnNlIHRvIGEgY29tcGxhaW50IHdlIHJlY2VpdmVkIHVuZGVyIHRoZSBVUyBEaWdpdGFsIE1pbGxlbm5pdW0gQ29weXJpZ2h0IEFjdCwgd2UgaGF2ZSBibG9ja2VkIGFjY2VzcyB0byB0aGlzIGNvbnRlbnQgZnJvbSBvdXIgYXBwbGljYXRpb25zLidcbiAgICAgICAgKX1cbiAgICAgICAgYWN0aW9ucz17XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZWN0aW9uX19hY3Rpb25zXCI+XG4gICAgICAgICAgICA8QnV0dG9uIGJ1dHRvbj1cImxpbmtcIiBocmVmPVwiaHR0cHM6Ly9vZHlzZWUuY29tL0BPZHlzZWVIZWxwOmIvY29weXJpZ2h0OmZcIiBsYWJlbD17X18oJ1JlYWQgTW9yZScpfSAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICBpZiAoZ2VvUmVzdHJpY3Rpb24pIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYWluLS1lbXB0eVwiPlxuICAgICAgICA8WXJibCB0aXRsZT17X18oJ0NvbnRlbnQgdW5hdmFpbGFibGUnKX0gc3VidGl0bGU9e19fKGdlb1Jlc3RyaWN0aW9uLm1lc3NhZ2UgfHwgJycpfSB0eXBlPVwic2FkXCIgYWx3YXlzU2hvdyAvPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIGlmIChpc0xpdmVDbGFpbU5vdFBsYXlpbmcpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9XCJlbWJlZF9faW5saW5lLWJ1dHRvblwiXG4gICAgICAgIHN0eWxlPXt0aHVtYm5haWwgJiYgIW9ic2N1cmVQcmV2aWV3ID8geyBiYWNrZ3JvdW5kSW1hZ2U6IGB1cmwoXCIke3RodW1ibmFpbH1cIilgLCBoZWlnaHQ6ICcxMDAlJyB9IDoge319XG4gICAgICA+XG4gICAgICAgIDxGaWxlVmlld2VyRW1iZWRkZWRUaXRsZSB1cmk9e3VyaX0gLz5cblxuICAgICAgICA8YSB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCIgaHJlZj17Zm9ybWF0TGJyeVVybEZvcldlYih1cmkpfT5cbiAgICAgICAgICA8QnV0dG9uIGljb25TaXplPXszMH0gdGl0bGU9e19fKCdWaWV3Jyl9IGNsYXNzTmFtZT1cImJ1dHRvbi0taWNvbiBidXR0b24tLXZpZXdcIiAvPlxuICAgICAgICA8L2E+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NuYW1lcygnZW1iZWRfX3dyYXBwZXInLCB7ICdlbWJlZF9fd3JhcHBlci0tbGlnaHQtYmFja2dyb3VuZCc6IGVtYmVkTGlnaHRCYWNrZ3JvdW5kIH0pfT5cbiAgICAgIDxFbWJlZENvbnRleHQuUHJvdmlkZXIgdmFsdWU+XG4gICAgICAgIHtyZWFkeVRvRGlzcGxheSA/IChcbiAgICAgICAgICA8RmlsZVJlbmRlciB1cmk9e3VyaX0gZW1iZWRkZWQgLz5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVtYmVkX19sb2FkaW5nXCI+XG4gICAgICAgICAgICA8RmlsZVZpZXdlckVtYmVkZGVkVGl0bGUgdXJpPXt1cml9IC8+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZW1iZWRfX2xvYWRpbmctdGV4dFwiPlxuICAgICAgICAgICAgICB7KGxvYWRpbmcgfHwgKCFoYXZlQ2xhaW0gJiYgIW5vQ29udGVudEZvdW5kKSkgJiYgPFNwaW5uZXIgZGVsYXllZCBsaWdodCAvPn1cblxuICAgICAgICAgICAgICB7bm9Db250ZW50Rm91bmQgJiYgPGgxPntfXygnTm8gY29udGVudCBmb3VuZC4nKX08L2gxPn1cblxuICAgICAgICAgICAgICB7aGFzQ29zdCAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxoMT57X18oJ1BhaWQgY29udGVudCBjYW5ub3QgYmUgZW1iZWRkZWQuJyl9PC9oMT5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2VjdGlvbl9fYWN0aW9ucy0tY2VudGVyZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBsYWJlbD17X18oJ1dhdGNoIG9uICVTSVRFX05BTUUlJywgeyBTSVRFX05BTUUgfSl9IGJ1dHRvbj1cInByaW1hcnlcIiBocmVmPXtjb250ZW50TGlua30gLz5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L0VtYmVkQ29udGV4dC5Qcm92aWRlcj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW9DQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUF3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSkE7QUFTQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVJBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQVBBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBSUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFPQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBVUE7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../ui/page/embedWrapper/view.jsx\n");

/***/ }),

/***/ "../ui/page/file/view.jsx":
/*!********************************!*\
  !*** ../ui/page/file/view.jsx ***!
  \********************************/
/*! exports provided: PRIMARY_PLAYER_WRAPPER_CLASS, PRIMARY_IMAGE_WRAPPER_CLASS, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PRIMARY_PLAYER_WRAPPER_CLASS\", function() { return PRIMARY_PLAYER_WRAPPER_CLASS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PRIMARY_IMAGE_WRAPPER_CLASS\", function() { return PRIMARY_IMAGE_WRAPPER_CLASS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return FilePage; });\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! constants/pages */ \"../ui/constants/pages.js\");\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(constants_pages__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var constants_player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! constants/player */ \"../ui/constants/player.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! classnames */ \"../node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var util_lazyImport__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! util/lazyImport */ \"../ui/util/lazyImport.js\");\n/* harmony import */ var component_page__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component/page */ \"../ui/component/page/index.js\");\n/* harmony import */ var component_common_icon__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! component/common/icon */ \"../ui/component/common/icon.jsx\");\n/* harmony import */ var constants_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! constants/icons */ \"../ui/constants/icons.js\");\n/* harmony import */ var constants_drawer_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! constants/drawer_types */ \"../ui/constants/drawer_types.js\");\n/* harmony import */ var constants_file_render_modes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! constants/file_render_modes */ \"../ui/constants/file_render_modes.js\");\n/* harmony import */ var constants_collections__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! constants/collections */ \"../ui/constants/collections.js\");\n/* harmony import */ var component_fileTitleSection__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! component/fileTitleSection */ \"../ui/component/fileTitleSection/index.js\");\n/* harmony import */ var component_fileRenderInitiator__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! component/fileRenderInitiator */ \"../ui/component/fileRenderInitiator/index.js\");\n/* harmony import */ var component_fileRenderInline__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! component/fileRenderInline */ \"../ui/component/fileRenderInline/index.js\");\n/* harmony import */ var component_fileRenderDownload__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! component/fileRenderDownload */ \"../ui/component/fileRenderDownload/index.js\");\n/* harmony import */ var component_recommendedContent__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! component/recommendedContent */ \"../ui/component/recommendedContent/index.js\");\n/* harmony import */ var component_playlistCard__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! component/playlistCard */ \"../ui/component/playlistCard/index.js\");\n/* harmony import */ var component_button__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! component/button */ \"../ui/component/button/index.js\");\n/* harmony import */ var component_common_empty__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! component/common/empty */ \"../ui/component/common/empty.jsx\");\n/* harmony import */ var component_swipeableDrawer__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! component/swipeableDrawer */ \"../ui/component/swipeableDrawer/index.js\");\n/* harmony import */ var component_swipeableDrawerExpand__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! component/swipeableDrawerExpand */ \"../ui/component/swipeableDrawerExpand/index.js\");\n/* harmony import */ var component_preorderAndPurchaseContentButton__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! component/preorderAndPurchaseContentButton */ \"../ui/component/preorderAndPurchaseContentButton/index.js\");\n/* harmony import */ var effects_use_screensize__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! effects/use-screensize */ \"../ui/effects/use-screensize.js\");\n/* harmony import */ var component_protectedContentOverlay__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! component/protectedContentOverlay */ \"../ui/component/protectedContentOverlay/index.js\");\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar CommentsList = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_4__[\"lazyImport\"])(function () {\n  return Promise.all(/*! import() | comments */[__webpack_require__.e(\"chat~comments~modalRemoveComment~modalSendTip~popoutChat~reportContent\"), __webpack_require__.e(\"chat~comments~modalRemoveComment~popoutChat~reportContent\"), __webpack_require__.e(\"comments~modalRemoveComment~reportContent\"), __webpack_require__.e(\"comments\")]).then(__webpack_require__.bind(null, /*! component/commentsList */ \"../ui/component/commentsList/index.js\"));\n});\nvar PostViewer = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_4__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | postViewer */ \"postViewer\").then(__webpack_require__.bind(null, /*! component/postViewer */ \"../ui/component/postViewer/index.js\"));\n});\nvar PRIMARY_PLAYER_WRAPPER_CLASS = 'file-page__video-container';\nvar PRIMARY_IMAGE_WRAPPER_CLASS = 'file-render__img-container';\nfunction FilePage(props) {\n  var playingCollectionId = props.playingCollectionId,\n      uri = props.uri,\n      channelId = props.channelId,\n      renderMode = props.renderMode,\n      fileInfo = props.fileInfo,\n      obscureNsfw = props.obscureNsfw,\n      isMature = props.isMature,\n      costInfo = props.costInfo,\n      linkedCommentId = props.linkedCommentId,\n      threadCommentId = props.threadCommentId,\n      videoTheaterMode = props.videoTheaterMode,\n      commentSettingDisabled = props.commentSettingDisabled,\n      audioVideoDuration = props.audioVideoDuration,\n      claimId = props.claimId,\n      claimIsMine = props.claimIsMine,\n      claimWasPurchased = props.claimWasPurchased,\n      clearPosition = props.clearPosition,\n      commentsListTitle = props.commentsListTitle,\n      doCheckIfPurchasedClaimId = props.doCheckIfPurchasedClaimId,\n      doFetchCostInfoForUri = props.doFetchCostInfoForUri,\n      doFileGet = props.doFileGet,\n      doGetMembershipTiersForContentClaimId = props.doGetMembershipTiersForContentClaimId,\n      doMembershipMine = props.doMembershipMine,\n      doSetContentHistoryItem = props.doSetContentHistoryItem,\n      doSetMainPlayerDimension = props.doSetMainPlayerDimension,\n      doSetPrimaryUri = props.doSetPrimaryUri,\n      doToggleAppDrawer = props.doToggleAppDrawer,\n      isLivestream = props.isLivestream,\n      isUriPlaying = props.isUriPlaying,\n      location = props.location,\n      myActiveMemberships = props.myActiveMemberships,\n      position = props.position,\n      preorderTag = props.preorderTag,\n      purchaseTag = props.purchaseTag,\n      rentalTag = props.rentalTag,\n      settingsByChannelId = props.settingsByChannelId,\n      unauthorizedForContent = props.unauthorizedForContent;\n  var search = location.search;\n  var urlParams = new URLSearchParams(search);\n  var colParam = urlParams.get(constants_collections__WEBPACK_IMPORTED_MODULE_10__[\"COLLECTION_ID\"]);\n  var initialPlayingCol = react__WEBPACK_IMPORTED_MODULE_2__[\"useRef\"](playingCollectionId);\n  var collectionId = react__WEBPACK_IMPORTED_MODULE_2__[\"useMemo\"](function () {\n    var startedPlayingOtherPlaylist = (isUriPlaying || playingCollectionId === null) && playingCollectionId !== undefined && !initialPlayingCol.current !== playingCollectionId;\n    return startedPlayingOtherPlaylist ? playingCollectionId : colParam;\n  }, [colParam, isUriPlaying, playingCollectionId]);\n  var isMobile = Object(effects_use_screensize__WEBPACK_IMPORTED_MODULE_22__[\"useIsMobile\"])();\n  var isMediumScreen = Object(effects_use_screensize__WEBPACK_IMPORTED_MODULE_22__[\"useIsMediumScreen\"])() && !isMobile;\n  var isLandscapeRotated = Object(effects_use_screensize__WEBPACK_IMPORTED_MODULE_22__[\"useIsMobileLandscape\"])();\n  var theaterMode = renderMode === 'video' || renderMode === 'audio' ? videoTheaterMode : false;\n  var cost = costInfo ? costInfo.cost : null;\n  var hasFileInfo = fileInfo !== undefined;\n  var isMarkdown = renderMode === constants_file_render_modes__WEBPACK_IMPORTED_MODULE_9__[\"MARKDOWN\"];\n  var videoPlayedEnoughToResetPosition = react__WEBPACK_IMPORTED_MODULE_2__[\"useMemo\"](function () {\n    // I've never seen 'fileInfo' contain metadata lately, but retaining as historical fallback.\n    var durationInSecs = audioVideoDuration || (fileInfo && fileInfo.metadata && fileInfo.metadata.video ? fileInfo.metadata.video.duration : 0);\n    var isVideoTooShort = durationInSecs <= 45;\n    var almostFinishedPlaying = position / durationInSecs >= constants_player__WEBPACK_IMPORTED_MODULE_1__[\"VIDEO_ALMOST_FINISHED_THRESHOLD\"];\n    return durationInSecs ? isVideoTooShort || almostFinishedPlaying : false;\n  }, [audioVideoDuration, fileInfo, position]);\n  react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"](function () {\n    if ((linkedCommentId || threadCommentId) && isMobile) {\n      doToggleAppDrawer(constants_drawer_types__WEBPACK_IMPORTED_MODULE_8__[\"CHAT\"]);\n    } // only on mount, otherwise clicking on a comments timestamp and linking it\n    // would trigger the drawer\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n  react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"](function () {\n    if (myActiveMemberships === undefined) {\n      doMembershipMine();\n    }\n  }, [doMembershipMine, myActiveMemberships]);\n  react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"](function () {\n    var aPurchaseOrPreorder = purchaseTag || preorderTag || rentalTag;\n    if (aPurchaseOrPreorder && claimId) doCheckIfPurchasedClaimId(claimId); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [purchaseTag, preorderTag, rentalTag, claimId]);\n  react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"](function () {\n    if (claimId) {\n      doGetMembershipTiersForContentClaimId(claimId);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [claimId]);\n  react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"](function () {\n    // always refresh file info when entering file page to see if we have the file\n    // this could probably be refactored into more direct components now\n    if (fileInfo && videoPlayedEnoughToResetPosition) {\n      clearPosition(uri);\n    } // See https://github.com/lbryio/lbry-desktop/pull/1563 for discussion\n\n\n    doFetchCostInfoForUri(uri);\n    doSetContentHistoryItem(uri);\n    doSetPrimaryUri(uri);\n    if (claimWasPurchased && !hasFileInfo) doFileGet(uri);\n    return function () {\n      return doSetPrimaryUri(null);\n    };\n  }, [uri, hasFileInfo, fileInfo, videoPlayedEnoughToResetPosition, collectionId, clearPosition, doFetchCostInfoForUri, doSetContentHistoryItem, doSetPrimaryUri, doFileGet, claimWasPurchased]);\n  var playerRef = react__WEBPACK_IMPORTED_MODULE_2__[\"useCallback\"](function (node) {\n    if (node) {\n      var rect = node.getBoundingClientRect();\n      doSetMainPlayerDimension({\n        height: rect.height,\n        width: rect.width\n      });\n    }\n  }, [doSetMainPlayerDimension]);\n\n  function renderFilePageLayout() {\n    if (constants_file_render_modes__WEBPACK_IMPORTED_MODULE_9__[\"FLOATING_MODES\"].includes(renderMode)) {\n      return react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"div\", {\n        className: PRIMARY_PLAYER_WRAPPER_CLASS,\n        ref: playerRef\n      }, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_protectedContentOverlay__WEBPACK_IMPORTED_MODULE_23__[\"default\"], {\n        uri: uri\n      }), react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_fileRenderInitiator__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n        uri: uri,\n        videoTheaterMode: theaterMode\n      }), react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"div\", {\n        className: \"unlocked-membership-content\"\n      }, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"div\", null, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_common_icon__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n        icon: constants_icons__WEBPACK_IMPORTED_MODULE_7__[\"UNLOCK\"]\n      }))));\n    }\n\n    if (constants_file_render_modes__WEBPACK_IMPORTED_MODULE_9__[\"UNRENDERABLE_MODES\"].includes(renderMode) && !isMature) {\n      return react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_2__[\"Fragment\"], null, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_fileTitleSection__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n        uri: uri\n      }), react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_fileRenderDownload__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n        uri: uri,\n        isFree: cost === 0\n      }));\n    }\n\n    if (isMarkdown) {\n      return react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_2__[\"Suspense\"], {\n        fallback: null\n      }, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_protectedContentOverlay__WEBPACK_IMPORTED_MODULE_23__[\"default\"], {\n        uri: uri\n      }), react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](PostViewer, {\n        uri: uri\n      }));\n    }\n\n    if (constants_file_render_modes__WEBPACK_IMPORTED_MODULE_9__[\"TEXT_MODES\"].includes(renderMode)) {\n      return react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_2__[\"Fragment\"], null, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_fileRenderInline__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n        uri: uri\n      }), react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_protectedContentOverlay__WEBPACK_IMPORTED_MODULE_23__[\"default\"], {\n        uri: uri\n      }), react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_fileRenderInitiator__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n        uri: uri\n      }), react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_fileTitleSection__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n        uri: uri\n      }));\n    }\n\n    if (renderMode === constants_file_render_modes__WEBPACK_IMPORTED_MODULE_9__[\"IMAGE\"]) {\n      return react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_2__[\"Fragment\"], null, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"div\", {\n        className: PRIMARY_IMAGE_WRAPPER_CLASS\n      }, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_protectedContentOverlay__WEBPACK_IMPORTED_MODULE_23__[\"default\"], {\n        uri: uri\n      }), react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_fileRenderInitiator__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n        uri: uri\n      }), react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_fileRenderInline__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n        uri: uri\n      })), react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_fileTitleSection__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n        uri: uri\n      }));\n    }\n\n    return react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_2__[\"Fragment\"], null, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_fileRenderInitiator__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n      uri: uri,\n      videoTheaterMode: theaterMode\n    }), react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_fileRenderInline__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n      uri: uri\n    }), react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_fileTitleSection__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n      uri: uri\n    }));\n  }\n\n  var rightSideProps = {\n    collectionId: collectionId,\n    uri: uri,\n    isMediumScreen: isMediumScreen\n  };\n\n  if (obscureNsfw && isMature) {\n    return react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_page__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n      className: \"file-page\",\n      filePage: true,\n      isMarkdown: isMarkdown\n    }, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"div\", {\n      className: classnames__WEBPACK_IMPORTED_MODULE_3___default()('section card-stack', \"file-page__\".concat(renderMode))\n    }, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_fileTitleSection__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n      uri: uri,\n      isNsfwBlocked: true\n    })), !isMarkdown && !theaterMode && react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](RightSideContent, rightSideProps));\n  }\n\n  var commentsListProps = {\n    uri: uri,\n    linkedCommentId: linkedCommentId,\n    threadCommentId: threadCommentId\n  };\n  var emptyMsgProps = {\n    padded: !isMobile\n  };\n  return react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_page__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n    className: \"file-page\",\n    filePage: true,\n    isMarkdown: isMarkdown\n  }, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_3___default()('section card-stack', \"file-page__\".concat(renderMode))\n  }, renderFilePageLayout(), !isMarkdown && react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"div\", {\n    className: \"file-page__secondary-content\"\n  }, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"section\", {\n    className: \"file-page__media-actions\"\n  }, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_preorderAndPurchaseContentButton__WEBPACK_IMPORTED_MODULE_21__[\"default\"], {\n    uri: uri\n  }), claimIsMine && isLivestream && react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"div\", {\n    className: \"livestream__creator-message\"\n  }, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"h4\", null, __('Only visible to you')), __('People who view this link will be redirected to your livestream. Make sure to use this for sharing so your title and thumbnail are displayed properly.'), react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"div\", {\n    className: \"section__actions\"\n  }, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_button__WEBPACK_IMPORTED_MODULE_17__[\"default\"], {\n    button: \"primary\",\n    navigate: \"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"LIVESTREAM\"]),\n    label: __('View livestream')\n  }))), isMediumScreen && react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_playlistCard__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n    id: collectionId,\n    uri: uri,\n    colorHeader: true,\n    useDrawer: isMobile\n  }), constants_file_render_modes__WEBPACK_IMPORTED_MODULE_9__[\"FLOATING_MODES\"].includes(renderMode) && react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_fileTitleSection__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n    uri: uri\n  }), react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_2__[\"Suspense\"], {\n    fallback: null\n  }, commentSettingDisabled ? react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_common_empty__WEBPACK_IMPORTED_MODULE_18__[\"default\"], _extends({}, emptyMsgProps, {\n    text: __('The creator of this content has disabled comments.')\n  })) : isMobile && !isLandscapeRotated ? react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_2__[\"Fragment\"], null, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_swipeableDrawer__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n    type: constants_drawer_types__WEBPACK_IMPORTED_MODULE_8__[\"CHAT\"],\n    title: commentsListTitle\n  }, !unauthorizedForContent && react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](CommentsList, commentsListProps)), react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_swipeableDrawerExpand__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n    icon: constants_icons__WEBPACK_IMPORTED_MODULE_7__[\"CHAT\"],\n    label: commentsListTitle,\n    type: constants_drawer_types__WEBPACK_IMPORTED_MODULE_8__[\"CHAT\"]\n  })) : react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_2__[\"Fragment\"], null, !unauthorizedForContent && react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](CommentsList, _extends({}, commentsListProps, {\n    notInDrawer: true\n  }))))), theaterMode && react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](RightSideContent, rightSideProps))), !isMarkdown ? !theaterMode && react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](RightSideContent, rightSideProps) : !commentSettingDisabled && react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"div\", {\n    className: \"file-page__post-comments\"\n  }, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_2__[\"Suspense\"], {\n    fallback: null\n  }, react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_2__[\"Fragment\"], null, !unauthorizedForContent && react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](CommentsList, _extends({}, commentsListProps, {\n    commentsAreExpanded: true,\n    notInDrawer: true\n  }))))));\n}\n\nvar RightSideContent = function RightSideContent(rightSideProps) {\n  var collectionId = rightSideProps.collectionId,\n      uri = rightSideProps.uri,\n      isMediumScreen = rightSideProps.isMediumScreen;\n  var isMobile = Object(effects_use_screensize__WEBPACK_IMPORTED_MODULE_22__[\"useIsMobile\"])();\n  return react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](\"div\", {\n    className: \"card-stack--spacing-m\"\n  }, !isMediumScreen && react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_playlistCard__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n    id: collectionId,\n    uri: uri,\n    colorHeader: true,\n    useDrawer: isMobile\n  }), react__WEBPACK_IMPORTED_MODULE_2__[\"createElement\"](component_recommendedContent__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n    uri: uri\n  }));\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvcGFnZS9maWxlL3ZpZXcuanN4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL3VpL3BhZ2UvZmlsZS92aWV3LmpzeD9lYzEyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5pbXBvcnQgKiBhcyBQQUdFUyBmcm9tICdjb25zdGFudHMvcGFnZXMnO1xuaW1wb3J0IHsgVklERU9fQUxNT1NUX0ZJTklTSEVEX1RIUkVTSE9MRCB9IGZyb20gJ2NvbnN0YW50cy9wbGF5ZXInO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgeyBsYXp5SW1wb3J0IH0gZnJvbSAndXRpbC9sYXp5SW1wb3J0JztcbmltcG9ydCBQYWdlIGZyb20gJ2NvbXBvbmVudC9wYWdlJztcbmltcG9ydCBJY29uIGZyb20gJ2NvbXBvbmVudC9jb21tb24vaWNvbic7XG5pbXBvcnQgKiBhcyBJQ09OUyBmcm9tICdjb25zdGFudHMvaWNvbnMnO1xuaW1wb3J0ICogYXMgRFJBV0VSUyBmcm9tICdjb25zdGFudHMvZHJhd2VyX3R5cGVzJztcbmltcG9ydCAqIGFzIFJFTkRFUl9NT0RFUyBmcm9tICdjb25zdGFudHMvZmlsZV9yZW5kZXJfbW9kZXMnO1xuaW1wb3J0ICogYXMgQ09MTEVDVElPTlNfQ09OU1RTIGZyb20gJ2NvbnN0YW50cy9jb2xsZWN0aW9ucyc7XG5pbXBvcnQgRmlsZVRpdGxlU2VjdGlvbiBmcm9tICdjb21wb25lbnQvZmlsZVRpdGxlU2VjdGlvbic7XG5pbXBvcnQgRmlsZVJlbmRlckluaXRpYXRvciBmcm9tICdjb21wb25lbnQvZmlsZVJlbmRlckluaXRpYXRvcic7XG5pbXBvcnQgRmlsZVJlbmRlcklubGluZSBmcm9tICdjb21wb25lbnQvZmlsZVJlbmRlcklubGluZSc7XG5pbXBvcnQgRmlsZVJlbmRlckRvd25sb2FkIGZyb20gJ2NvbXBvbmVudC9maWxlUmVuZGVyRG93bmxvYWQnO1xuaW1wb3J0IFJlY29tbWVuZGVkQ29udGVudCBmcm9tICdjb21wb25lbnQvcmVjb21tZW5kZWRDb250ZW50JztcbmltcG9ydCBQbGF5bGlzdENhcmQgZnJvbSAnY29tcG9uZW50L3BsYXlsaXN0Q2FyZCc7XG5pbXBvcnQgQnV0dG9uIGZyb20gJ2NvbXBvbmVudC9idXR0b24nO1xuaW1wb3J0IEVtcHR5IGZyb20gJ2NvbXBvbmVudC9jb21tb24vZW1wdHknO1xuaW1wb3J0IFN3aXBlYWJsZURyYXdlciBmcm9tICdjb21wb25lbnQvc3dpcGVhYmxlRHJhd2VyJztcbmltcG9ydCBEcmF3ZXJFeHBhbmRCdXR0b24gZnJvbSAnY29tcG9uZW50L3N3aXBlYWJsZURyYXdlckV4cGFuZCc7XG5pbXBvcnQgUHJlb3JkZXJBbmRQdXJjaGFzZUNvbnRlbnRCdXR0b24gZnJvbSAnY29tcG9uZW50L3ByZW9yZGVyQW5kUHVyY2hhc2VDb250ZW50QnV0dG9uJztcbmltcG9ydCB7IHVzZUlzTW9iaWxlLCB1c2VJc01vYmlsZUxhbmRzY2FwZSwgdXNlSXNNZWRpdW1TY3JlZW4gfSBmcm9tICdlZmZlY3RzL3VzZS1zY3JlZW5zaXplJztcbmltcG9ydCBQcm90ZWN0ZWRDb250ZW50T3ZlcmxheSBmcm9tICdjb21wb25lbnQvcHJvdGVjdGVkQ29udGVudE92ZXJsYXknO1xuXG5jb25zdCBDb21tZW50c0xpc3QgPSBsYXp5SW1wb3J0KCgpID0+IGltcG9ydCgnY29tcG9uZW50L2NvbW1lbnRzTGlzdCcgLyogd2VicGFja0NodW5rTmFtZTogXCJjb21tZW50c1wiICovKSk7XG5jb25zdCBQb3N0Vmlld2VyID0gbGF6eUltcG9ydCgoKSA9PiBpbXBvcnQoJ2NvbXBvbmVudC9wb3N0Vmlld2VyJyAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcInBvc3RWaWV3ZXJcIiAqLykpO1xuXG5leHBvcnQgY29uc3QgUFJJTUFSWV9QTEFZRVJfV1JBUFBFUl9DTEFTUyA9ICdmaWxlLXBhZ2VfX3ZpZGVvLWNvbnRhaW5lcic7XG5leHBvcnQgY29uc3QgUFJJTUFSWV9JTUFHRV9XUkFQUEVSX0NMQVNTID0gJ2ZpbGUtcmVuZGVyX19pbWctY29udGFpbmVyJztcblxudHlwZSBQcm9wcyA9IHtcbiAgYXVkaW9WaWRlb0R1cmF0aW9uOiA/bnVtYmVyLFxuICBjaGFubmVsSWQ/OiBzdHJpbmcsXG4gIGNsYWltSWQ6IHN0cmluZyxcbiAgY2xhaW1Jc01pbmU6IGJvb2xlYW4sXG4gIGNsYWltV2FzUHVyY2hhc2VkOiBib29sZWFuLFxuICBjbGVhclBvc2l0aW9uOiAodXJpOiBzdHJpbmcpID0+IHZvaWQsXG4gIGNvbW1lbnRzTGlzdFRpdGxlOiBzdHJpbmcsXG4gIGNvc3RJbmZvOiA/eyBpbmNsdWRlc0RhdGE6IGJvb2xlYW4sIGNvc3Q6IG51bWJlciB9LFxuICBkb0NoZWNrSWZQdXJjaGFzZWRDbGFpbUlkOiAoY2xhaW1JZDogc3RyaW5nKSA9PiB2b2lkLFxuICBkb0NsZWFyUGxheWluZ1VyaTogKCkgPT4gdm9pZCxcbiAgZG9GZXRjaENvc3RJbmZvRm9yVXJpOiAodXJpOiBzdHJpbmcpID0+IHZvaWQsXG4gIGRvRmlsZUdldDogKHVyaTogc3RyaW5nKSA9PiB2b2lkLFxuICBkb1NldENvbnRlbnRIaXN0b3J5SXRlbTogKHVyaTogc3RyaW5nKSA9PiB2b2lkLFxuICBkb1NldE1haW5QbGF5ZXJEaW1lbnNpb246IChkaW1lbnNpb25zOiB7IGhlaWdodDogbnVtYmVyLCB3aWR0aDogbnVtYmVyIH0pID0+IHZvaWQsXG4gIGRvU2V0UHJpbWFyeVVyaTogKHVyaTogP3N0cmluZykgPT4gdm9pZCxcbiAgZG9Ub2dnbGVBcHBEcmF3ZXI6ICh0eXBlOiBzdHJpbmcpID0+IHZvaWQsXG4gIGRvR2V0TWVtYmVyc2hpcFRpZXJzRm9yQ29udGVudENsYWltSWQ6ICh0eXBlOiBzdHJpbmcpID0+IHZvaWQsXG4gIGZpbGVJbmZvOiBGaWxlTGlzdEl0ZW0sXG4gIGlzTGl2ZXN0cmVhbTogYm9vbGVhbixcbiAgaXNNYXR1cmU6IGJvb2xlYW4sXG4gIGlzUGxheWluZz86IGJvb2xlYW4sXG4gIGlzVXJpUGxheWluZzogYm9vbGVhbixcbiAgbGlua2VkQ29tbWVudElkPzogc3RyaW5nLFxuICBsb2NhdGlvbjogeyBzZWFyY2g6IHN0cmluZyB9LFxuICBvYnNjdXJlTnNmdzogYm9vbGVhbixcbiAgcGxheWluZ0NvbGxlY3Rpb25JZDogP3N0cmluZyxcbiAgcG9zaXRpb246IG51bWJlcixcbiAgcHJlb3JkZXJUYWc6IG51bWJlcixcbiAgcHVyY2hhc2VUYWc6IG51bWJlcixcbiAgcmVuZGVyTW9kZTogc3RyaW5nLFxuICByZW50YWxUYWc6IHN0cmluZyxcbiAgc2V0dGluZ3NCeUNoYW5uZWxJZDogeyBbY2hhbm5lbElkOiBzdHJpbmddOiBQZXJDaGFubmVsU2V0dGluZ3MgfSxcbiAgY29tbWVudFNldHRpbmdEaXNhYmxlZDogP2Jvb2xlYW4sXG4gIHRocmVhZENvbW1lbnRJZD86IHN0cmluZyxcbiAgdXJpOiBzdHJpbmcsXG4gIHZpZGVvVGhlYXRlck1vZGU6IGJvb2xlYW4sXG4gIG15QWN0aXZlTWVtYmVyc2hpcHM6ID9NZW1iZXJzaGlwTWluZURhdGFCeUtleSxcbiAgZG9NZW1iZXJzaGlwTWluZTogKCkgPT4gdm9pZCxcbiAgcHJvdGVjdGVkTWVtYmVyc2hpcElkcz86IEFycmF5PG51bWJlcj4sXG4gIHZhbGlkTWVtYmVyc2hpcElkcz86IEFycmF5PG51bWJlcj4sXG4gIHByb3RlY3RlZENvbnRlbnRUYWc/OiBzdHJpbmcsXG4gIHVuYXV0aG9yaXplZEZvckNvbnRlbnQ6IGJvb2xlYW4sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBGaWxlUGFnZShwcm9wczogUHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIHBsYXlpbmdDb2xsZWN0aW9uSWQsXG4gICAgdXJpLFxuICAgIGNoYW5uZWxJZCxcbiAgICByZW5kZXJNb2RlLFxuICAgIGZpbGVJbmZvLFxuICAgIG9ic2N1cmVOc2Z3LFxuICAgIGlzTWF0dXJlLFxuICAgIGNvc3RJbmZvLFxuICAgIGxpbmtlZENvbW1lbnRJZCxcbiAgICB0aHJlYWRDb21tZW50SWQsXG4gICAgdmlkZW9UaGVhdGVyTW9kZSxcbiAgICBjb21tZW50U2V0dGluZ0Rpc2FibGVkLFxuICAgIGF1ZGlvVmlkZW9EdXJhdGlvbixcbiAgICBjbGFpbUlkLFxuICAgIGNsYWltSXNNaW5lLFxuICAgIGNsYWltV2FzUHVyY2hhc2VkLFxuICAgIGNsZWFyUG9zaXRpb24sXG4gICAgY29tbWVudHNMaXN0VGl0bGUsXG4gICAgZG9DaGVja0lmUHVyY2hhc2VkQ2xhaW1JZCxcbiAgICBkb0ZldGNoQ29zdEluZm9Gb3JVcmksXG4gICAgZG9GaWxlR2V0LFxuICAgIGRvR2V0TWVtYmVyc2hpcFRpZXJzRm9yQ29udGVudENsYWltSWQsXG4gICAgZG9NZW1iZXJzaGlwTWluZSxcbiAgICBkb1NldENvbnRlbnRIaXN0b3J5SXRlbSxcbiAgICBkb1NldE1haW5QbGF5ZXJEaW1lbnNpb24sXG4gICAgZG9TZXRQcmltYXJ5VXJpLFxuICAgIGRvVG9nZ2xlQXBwRHJhd2VyLFxuICAgIGlzTGl2ZXN0cmVhbSxcbiAgICBpc1VyaVBsYXlpbmcsXG4gICAgbG9jYXRpb24sXG4gICAgbXlBY3RpdmVNZW1iZXJzaGlwcyxcbiAgICBwb3NpdGlvbixcbiAgICBwcmVvcmRlclRhZyxcbiAgICBwdXJjaGFzZVRhZyxcbiAgICByZW50YWxUYWcsXG4gICAgc2V0dGluZ3NCeUNoYW5uZWxJZCxcbiAgICB1bmF1dGhvcml6ZWRGb3JDb250ZW50LFxuICB9ID0gcHJvcHM7XG5cbiAgY29uc3QgeyBzZWFyY2ggfSA9IGxvY2F0aW9uO1xuICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHNlYXJjaCk7XG4gIGNvbnN0IGNvbFBhcmFtID0gdXJsUGFyYW1zLmdldChDT0xMRUNUSU9OU19DT05TVFMuQ09MTEVDVElPTl9JRCk7XG4gIGNvbnN0IGluaXRpYWxQbGF5aW5nQ29sID0gUmVhY3QudXNlUmVmKHBsYXlpbmdDb2xsZWN0aW9uSWQpO1xuXG4gIGNvbnN0IGNvbGxlY3Rpb25JZCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHN0YXJ0ZWRQbGF5aW5nT3RoZXJQbGF5bGlzdCA9XG4gICAgICAoaXNVcmlQbGF5aW5nIHx8IHBsYXlpbmdDb2xsZWN0aW9uSWQgPT09IG51bGwpICYmXG4gICAgICBwbGF5aW5nQ29sbGVjdGlvbklkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICFpbml0aWFsUGxheWluZ0NvbC5jdXJyZW50ICE9PSBwbGF5aW5nQ29sbGVjdGlvbklkO1xuXG4gICAgcmV0dXJuIHN0YXJ0ZWRQbGF5aW5nT3RoZXJQbGF5bGlzdCA/IHBsYXlpbmdDb2xsZWN0aW9uSWQgOiBjb2xQYXJhbTtcbiAgfSwgW2NvbFBhcmFtLCBpc1VyaVBsYXlpbmcsIHBsYXlpbmdDb2xsZWN0aW9uSWRdKTtcblxuICBjb25zdCBpc01vYmlsZSA9IHVzZUlzTW9iaWxlKCk7XG4gIGNvbnN0IGlzTWVkaXVtU2NyZWVuID0gdXNlSXNNZWRpdW1TY3JlZW4oKSAmJiAhaXNNb2JpbGU7XG4gIGNvbnN0IGlzTGFuZHNjYXBlUm90YXRlZCA9IHVzZUlzTW9iaWxlTGFuZHNjYXBlKCk7XG4gIGNvbnN0IHRoZWF0ZXJNb2RlID0gcmVuZGVyTW9kZSA9PT0gJ3ZpZGVvJyB8fCByZW5kZXJNb2RlID09PSAnYXVkaW8nID8gdmlkZW9UaGVhdGVyTW9kZSA6IGZhbHNlO1xuXG4gIGNvbnN0IGNvc3QgPSBjb3N0SW5mbyA/IGNvc3RJbmZvLmNvc3QgOiBudWxsO1xuICBjb25zdCBoYXNGaWxlSW5mbyA9IGZpbGVJbmZvICE9PSB1bmRlZmluZWQ7XG4gIGNvbnN0IGlzTWFya2Rvd24gPSByZW5kZXJNb2RlID09PSBSRU5ERVJfTU9ERVMuTUFSS0RPV047XG4gIGNvbnN0IHZpZGVvUGxheWVkRW5vdWdoVG9SZXNldFBvc2l0aW9uID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgLy8gSSd2ZSBuZXZlciBzZWVuICdmaWxlSW5mbycgY29udGFpbiBtZXRhZGF0YSBsYXRlbHksIGJ1dCByZXRhaW5pbmcgYXMgaGlzdG9yaWNhbCBmYWxsYmFjay5cbiAgICBjb25zdCBkdXJhdGlvbkluU2VjcyA9XG4gICAgICBhdWRpb1ZpZGVvRHVyYXRpb24gfHxcbiAgICAgIChmaWxlSW5mbyAmJiBmaWxlSW5mby5tZXRhZGF0YSAmJiBmaWxlSW5mby5tZXRhZGF0YS52aWRlbyA/IGZpbGVJbmZvLm1ldGFkYXRhLnZpZGVvLmR1cmF0aW9uIDogMCk7XG4gICAgY29uc3QgaXNWaWRlb1Rvb1Nob3J0ID0gZHVyYXRpb25JblNlY3MgPD0gNDU7XG4gICAgY29uc3QgYWxtb3N0RmluaXNoZWRQbGF5aW5nID0gcG9zaXRpb24gLyBkdXJhdGlvbkluU2VjcyA+PSBWSURFT19BTE1PU1RfRklOSVNIRURfVEhSRVNIT0xEO1xuXG4gICAgcmV0dXJuIGR1cmF0aW9uSW5TZWNzID8gaXNWaWRlb1Rvb1Nob3J0IHx8IGFsbW9zdEZpbmlzaGVkUGxheWluZyA6IGZhbHNlO1xuICB9LCBbYXVkaW9WaWRlb0R1cmF0aW9uLCBmaWxlSW5mbywgcG9zaXRpb25dKTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICgobGlua2VkQ29tbWVudElkIHx8IHRocmVhZENvbW1lbnRJZCkgJiYgaXNNb2JpbGUpIHtcbiAgICAgIGRvVG9nZ2xlQXBwRHJhd2VyKERSQVdFUlMuQ0hBVCk7XG4gICAgfVxuICAgIC8vIG9ubHkgb24gbW91bnQsIG90aGVyd2lzZSBjbGlja2luZyBvbiBhIGNvbW1lbnRzIHRpbWVzdGFtcCBhbmQgbGlua2luZyBpdFxuICAgIC8vIHdvdWxkIHRyaWdnZXIgdGhlIGRyYXdlclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW10pO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKG15QWN0aXZlTWVtYmVyc2hpcHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZG9NZW1iZXJzaGlwTWluZSgpO1xuICAgIH1cbiAgfSwgW2RvTWVtYmVyc2hpcE1pbmUsIG15QWN0aXZlTWVtYmVyc2hpcHNdKTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGFQdXJjaGFzZU9yUHJlb3JkZXIgPSBwdXJjaGFzZVRhZyB8fCBwcmVvcmRlclRhZyB8fCByZW50YWxUYWc7XG4gICAgaWYgKGFQdXJjaGFzZU9yUHJlb3JkZXIgJiYgY2xhaW1JZCkgZG9DaGVja0lmUHVyY2hhc2VkQ2xhaW1JZChjbGFpbUlkKTtcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW3B1cmNoYXNlVGFnLCBwcmVvcmRlclRhZywgcmVudGFsVGFnLCBjbGFpbUlkXSk7XG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2xhaW1JZCkge1xuICAgICAgZG9HZXRNZW1iZXJzaGlwVGllcnNGb3JDb250ZW50Q2xhaW1JZChjbGFpbUlkKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbY2xhaW1JZF0pO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gYWx3YXlzIHJlZnJlc2ggZmlsZSBpbmZvIHdoZW4gZW50ZXJpbmcgZmlsZSBwYWdlIHRvIHNlZSBpZiB3ZSBoYXZlIHRoZSBmaWxlXG4gICAgLy8gdGhpcyBjb3VsZCBwcm9iYWJseSBiZSByZWZhY3RvcmVkIGludG8gbW9yZSBkaXJlY3QgY29tcG9uZW50cyBub3dcbiAgICBpZiAoZmlsZUluZm8gJiYgdmlkZW9QbGF5ZWRFbm91Z2hUb1Jlc2V0UG9zaXRpb24pIHtcbiAgICAgIGNsZWFyUG9zaXRpb24odXJpKTtcbiAgICB9XG5cbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2xicnlpby9sYnJ5LWRlc2t0b3AvcHVsbC8xNTYzIGZvciBkaXNjdXNzaW9uXG4gICAgZG9GZXRjaENvc3RJbmZvRm9yVXJpKHVyaSk7XG4gICAgZG9TZXRDb250ZW50SGlzdG9yeUl0ZW0odXJpKTtcbiAgICBkb1NldFByaW1hcnlVcmkodXJpKTtcbiAgICBpZiAoY2xhaW1XYXNQdXJjaGFzZWQgJiYgIWhhc0ZpbGVJbmZvKSBkb0ZpbGVHZXQodXJpKTtcblxuICAgIHJldHVybiAoKSA9PiBkb1NldFByaW1hcnlVcmkobnVsbCk7XG4gIH0sIFtcbiAgICB1cmksXG4gICAgaGFzRmlsZUluZm8sXG4gICAgZmlsZUluZm8sXG4gICAgdmlkZW9QbGF5ZWRFbm91Z2hUb1Jlc2V0UG9zaXRpb24sXG4gICAgY29sbGVjdGlvbklkLFxuICAgIGNsZWFyUG9zaXRpb24sXG4gICAgZG9GZXRjaENvc3RJbmZvRm9yVXJpLFxuICAgIGRvU2V0Q29udGVudEhpc3RvcnlJdGVtLFxuICAgIGRvU2V0UHJpbWFyeVVyaSxcbiAgICBkb0ZpbGVHZXQsXG4gICAgY2xhaW1XYXNQdXJjaGFzZWQsXG4gIF0pO1xuXG4gIGNvbnN0IHBsYXllclJlZiA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChub2RlKSA9PiB7XG4gICAgICBpZiAobm9kZSkge1xuICAgICAgICBjb25zdCByZWN0ID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgZG9TZXRNYWluUGxheWVyRGltZW5zaW9uKHsgaGVpZ2h0OiByZWN0LmhlaWdodCwgd2lkdGg6IHJlY3Qud2lkdGggfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbZG9TZXRNYWluUGxheWVyRGltZW5zaW9uXVxuICApO1xuXG4gIGZ1bmN0aW9uIHJlbmRlckZpbGVQYWdlTGF5b3V0KCkge1xuICAgIGlmIChSRU5ERVJfTU9ERVMuRkxPQVRJTkdfTU9ERVMuaW5jbHVkZXMocmVuZGVyTW9kZSkpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtQUklNQVJZX1BMQVlFUl9XUkFQUEVSX0NMQVNTfSByZWY9e3BsYXllclJlZn0+XG4gICAgICAgICAgPFByb3RlY3RlZENvbnRlbnRPdmVybGF5IHVyaT17dXJpfSAvPlxuICAgICAgICAgIHsvKiBwbGF5YWJsZXMgd2lsbCBiZSByZW5kZXJlZCBhbmQgaW5qZWN0ZWQgYnkgPEZpbGVSZW5kZXJGbG9hdGluZz4gKi99XG4gICAgICAgICAgPEZpbGVSZW5kZXJJbml0aWF0b3IgdXJpPXt1cml9IHZpZGVvVGhlYXRlck1vZGU9e3RoZWF0ZXJNb2RlfSAvPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidW5sb2NrZWQtbWVtYmVyc2hpcC1jb250ZW50XCI+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8SWNvbiBpY29uPXtJQ09OUy5VTkxPQ0t9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChSRU5ERVJfTU9ERVMuVU5SRU5ERVJBQkxFX01PREVTLmluY2x1ZGVzKHJlbmRlck1vZGUpICYmICFpc01hdHVyZSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPD5cbiAgICAgICAgICA8RmlsZVRpdGxlU2VjdGlvbiB1cmk9e3VyaX0gLz5cbiAgICAgICAgICA8RmlsZVJlbmRlckRvd25sb2FkIHVyaT17dXJpfSBpc0ZyZWU9e2Nvc3QgPT09IDB9IC8+XG4gICAgICAgIDwvPlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoaXNNYXJrZG93bikge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFJlYWN0LlN1c3BlbnNlIGZhbGxiYWNrPXtudWxsfT5cbiAgICAgICAgICA8UHJvdGVjdGVkQ29udGVudE92ZXJsYXkgdXJpPXt1cml9IC8+XG4gICAgICAgICAgPFBvc3RWaWV3ZXIgdXJpPXt1cml9IC8+XG4gICAgICAgIDwvUmVhY3QuU3VzcGVuc2U+XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChSRU5ERVJfTU9ERVMuVEVYVF9NT0RFUy5pbmNsdWRlcyhyZW5kZXJNb2RlKSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPD5cbiAgICAgICAgICA8RmlsZVJlbmRlcklubGluZSB1cmk9e3VyaX0gLz5cbiAgICAgICAgICA8UHJvdGVjdGVkQ29udGVudE92ZXJsYXkgdXJpPXt1cml9IC8+XG4gICAgICAgICAgPEZpbGVSZW5kZXJJbml0aWF0b3IgdXJpPXt1cml9IC8+XG4gICAgICAgICAgPEZpbGVUaXRsZVNlY3Rpb24gdXJpPXt1cml9IC8+XG4gICAgICAgIDwvPlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAocmVuZGVyTW9kZSA9PT0gUkVOREVSX01PREVTLklNQUdFKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtQUklNQVJZX0lNQUdFX1dSQVBQRVJfQ0xBU1N9PlxuICAgICAgICAgICAgPFByb3RlY3RlZENvbnRlbnRPdmVybGF5IHVyaT17dXJpfSAvPlxuICAgICAgICAgICAgPEZpbGVSZW5kZXJJbml0aWF0b3IgdXJpPXt1cml9IC8+XG4gICAgICAgICAgICA8RmlsZVJlbmRlcklubGluZSB1cmk9e3VyaX0gLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8RmlsZVRpdGxlU2VjdGlvbiB1cmk9e3VyaX0gLz5cbiAgICAgICAgPC8+XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICA8RmlsZVJlbmRlckluaXRpYXRvciB1cmk9e3VyaX0gdmlkZW9UaGVhdGVyTW9kZT17dGhlYXRlck1vZGV9IC8+XG4gICAgICAgIDxGaWxlUmVuZGVySW5saW5lIHVyaT17dXJpfSAvPlxuICAgICAgICA8RmlsZVRpdGxlU2VjdGlvbiB1cmk9e3VyaX0gLz5cbiAgICAgIDwvPlxuICAgICk7XG4gIH1cblxuICBjb25zdCByaWdodFNpZGVQcm9wcyA9IHsgY29sbGVjdGlvbklkLCB1cmksIGlzTWVkaXVtU2NyZWVuIH07XG5cbiAgaWYgKG9ic2N1cmVOc2Z3ICYmIGlzTWF0dXJlKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxQYWdlIGNsYXNzTmFtZT1cImZpbGUtcGFnZVwiIGZpbGVQYWdlIGlzTWFya2Rvd249e2lzTWFya2Rvd259PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NuYW1lcygnc2VjdGlvbiBjYXJkLXN0YWNrJywgYGZpbGUtcGFnZV9fJHtyZW5kZXJNb2RlfWApfT5cbiAgICAgICAgICA8RmlsZVRpdGxlU2VjdGlvbiB1cmk9e3VyaX0gaXNOc2Z3QmxvY2tlZCAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgeyFpc01hcmtkb3duICYmICF0aGVhdGVyTW9kZSAmJiA8UmlnaHRTaWRlQ29udGVudCB7Li4ucmlnaHRTaWRlUHJvcHN9IC8+fVxuICAgICAgPC9QYWdlPlxuICAgICk7XG4gIH1cblxuICBjb25zdCBjb21tZW50c0xpc3RQcm9wcyA9IHsgdXJpLCBsaW5rZWRDb21tZW50SWQsIHRocmVhZENvbW1lbnRJZCB9O1xuICBjb25zdCBlbXB0eU1zZ1Byb3BzID0geyBwYWRkZWQ6ICFpc01vYmlsZSB9O1xuXG4gIHJldHVybiAoXG4gICAgPFBhZ2UgY2xhc3NOYW1lPVwiZmlsZS1wYWdlXCIgZmlsZVBhZ2UgaXNNYXJrZG93bj17aXNNYXJrZG93bn0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NuYW1lcygnc2VjdGlvbiBjYXJkLXN0YWNrJywgYGZpbGUtcGFnZV9fJHtyZW5kZXJNb2RlfWApfT5cbiAgICAgICAge3JlbmRlckZpbGVQYWdlTGF5b3V0KCl9XG5cbiAgICAgICAgeyFpc01hcmtkb3duICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpbGUtcGFnZV9fc2Vjb25kYXJ5LWNvbnRlbnRcIj5cbiAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cImZpbGUtcGFnZV9fbWVkaWEtYWN0aW9uc1wiPlxuICAgICAgICAgICAgICA8UHJlb3JkZXJBbmRQdXJjaGFzZUNvbnRlbnRCdXR0b24gdXJpPXt1cml9IC8+XG4gICAgICAgICAgICAgIHtjbGFpbUlzTWluZSAmJiBpc0xpdmVzdHJlYW0gJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGl2ZXN0cmVhbV9fY3JlYXRvci1tZXNzYWdlXCI+XG4gICAgICAgICAgICAgICAgICA8aDQ+e19fKCdPbmx5IHZpc2libGUgdG8geW91Jyl9PC9oND5cbiAgICAgICAgICAgICAgICAgIHtfXyhcbiAgICAgICAgICAgICAgICAgICAgJ1Blb3BsZSB3aG8gdmlldyB0aGlzIGxpbmsgd2lsbCBiZSByZWRpcmVjdGVkIHRvIHlvdXIgbGl2ZXN0cmVhbS4gTWFrZSBzdXJlIHRvIHVzZSB0aGlzIGZvciBzaGFyaW5nIHNvIHlvdXIgdGl0bGUgYW5kIHRodW1ibmFpbCBhcmUgZGlzcGxheWVkIHByb3Blcmx5LidcbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlY3Rpb25fX2FjdGlvbnNcIj5cbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBidXR0b249XCJwcmltYXJ5XCIgbmF2aWdhdGU9e2AvJC8ke1BBR0VTLkxJVkVTVFJFQU19YH0gbGFiZWw9e19fKCdWaWV3IGxpdmVzdHJlYW0nKX0gLz5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgIHtpc01lZGl1bVNjcmVlbiAmJiA8UGxheWxpc3RDYXJkIGlkPXtjb2xsZWN0aW9uSWR9IHVyaT17dXJpfSBjb2xvckhlYWRlciB1c2VEcmF3ZXI9e2lzTW9iaWxlfSAvPn1cblxuICAgICAgICAgICAgICB7UkVOREVSX01PREVTLkZMT0FUSU5HX01PREVTLmluY2x1ZGVzKHJlbmRlck1vZGUpICYmIDxGaWxlVGl0bGVTZWN0aW9uIHVyaT17dXJpfSAvPn1cblxuICAgICAgICAgICAgICA8UmVhY3QuU3VzcGVuc2UgZmFsbGJhY2s9e251bGx9PlxuICAgICAgICAgICAgICAgIHtjb21tZW50U2V0dGluZ0Rpc2FibGVkID8gKFxuICAgICAgICAgICAgICAgICAgPEVtcHR5IHsuLi5lbXB0eU1zZ1Byb3BzfSB0ZXh0PXtfXygnVGhlIGNyZWF0b3Igb2YgdGhpcyBjb250ZW50IGhhcyBkaXNhYmxlZCBjb21tZW50cy4nKX0gLz5cbiAgICAgICAgICAgICAgICApIDogaXNNb2JpbGUgJiYgIWlzTGFuZHNjYXBlUm90YXRlZCA/IChcbiAgICAgICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgICAgICAgPFN3aXBlYWJsZURyYXdlciB0eXBlPXtEUkFXRVJTLkNIQVR9IHRpdGxlPXtjb21tZW50c0xpc3RUaXRsZX0+XG4gICAgICAgICAgICAgICAgICAgICAgeyF1bmF1dGhvcml6ZWRGb3JDb250ZW50ICYmIDxDb21tZW50c0xpc3Qgey4uLmNvbW1lbnRzTGlzdFByb3BzfSAvPn1cbiAgICAgICAgICAgICAgICAgICAgPC9Td2lwZWFibGVEcmF3ZXI+XG5cbiAgICAgICAgICAgICAgICAgICAgPERyYXdlckV4cGFuZEJ1dHRvbiBpY29uPXtJQ09OUy5DSEFUfSBsYWJlbD17Y29tbWVudHNMaXN0VGl0bGV9IHR5cGU9e0RSQVdFUlMuQ0hBVH0gLz5cbiAgICAgICAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgIHsvKiBub3JtYWwgY29tbWVudHMgbGlzdCAqL31cbiAgICAgICAgICAgICAgICAgICAgeyF1bmF1dGhvcml6ZWRGb3JDb250ZW50ICYmIDxDb21tZW50c0xpc3Qgey4uLmNvbW1lbnRzTGlzdFByb3BzfSBub3RJbkRyYXdlciAvPn1cbiAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvUmVhY3QuU3VzcGVuc2U+XG4gICAgICAgICAgICA8L3NlY3Rpb24+XG5cbiAgICAgICAgICAgIHt0aGVhdGVyTW9kZSAmJiA8UmlnaHRTaWRlQ29udGVudCB7Li4ucmlnaHRTaWRlUHJvcHN9IC8+fVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG5cbiAgICAgIHshaXNNYXJrZG93blxuICAgICAgICA/ICF0aGVhdGVyTW9kZSAmJiA8UmlnaHRTaWRlQ29udGVudCB7Li4ucmlnaHRTaWRlUHJvcHN9IC8+XG4gICAgICAgIDogIWNvbW1lbnRTZXR0aW5nRGlzYWJsZWQgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaWxlLXBhZ2VfX3Bvc3QtY29tbWVudHNcIj5cbiAgICAgICAgICAgICAgPFJlYWN0LlN1c3BlbnNlIGZhbGxiYWNrPXtudWxsfT5cbiAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgeyF1bmF1dGhvcml6ZWRGb3JDb250ZW50ICYmIDxDb21tZW50c0xpc3Qgey4uLmNvbW1lbnRzTGlzdFByb3BzfSBjb21tZW50c0FyZUV4cGFuZGVkIG5vdEluRHJhd2VyIC8+fVxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICA8L1JlYWN0LlN1c3BlbnNlPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICA8L1BhZ2U+XG4gICk7XG59XG5cbnR5cGUgUmlnaHRTaWRlUHJvcHMgPSB7XG4gIGNvbGxlY3Rpb25JZDogP3N0cmluZyxcbiAgdXJpOiBzdHJpbmcsXG4gIGlzTWVkaXVtU2NyZWVuOiBib29sZWFuLFxufTtcblxuY29uc3QgUmlnaHRTaWRlQ29udGVudCA9IChyaWdodFNpZGVQcm9wczogUmlnaHRTaWRlUHJvcHMpID0+IHtcbiAgY29uc3QgeyBjb2xsZWN0aW9uSWQsIHVyaSwgaXNNZWRpdW1TY3JlZW4gfSA9IHJpZ2h0U2lkZVByb3BzO1xuXG4gIGNvbnN0IGlzTW9iaWxlID0gdXNlSXNNb2JpbGUoKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1zdGFjay0tc3BhY2luZy1tXCI+XG4gICAgICB7IWlzTWVkaXVtU2NyZWVuICYmIDxQbGF5bGlzdENhcmQgaWQ9e2NvbGxlY3Rpb25JZH0gdXJpPXt1cml9IGNvbG9ySGVhZGVyIHVzZURyYXdlcj17aXNNb2JpbGV9IC8+fVxuICAgICAgPFJlY29tbWVuZGVkQ29udGVudCB1cmk9e3VyaX0gLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBK0NBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQTBDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFOQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBUkE7QUFXQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQURBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBYkE7QUE0QkE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUxBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUlBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFLQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUFFQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUFBO0FBY0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFPQTtBQUNBO0FBT0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBUkE7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../ui/page/file/view.jsx\n");

/***/ }),

/***/ "../ui/redux/selectors/memberships.js":
/*!********************************************!*\
  !*** ../ui/redux/selectors/memberships.js ***!
  \********************************************/
/*! exports provided: selectMembershipMineData, selectMyActiveMembershipsById, selectMyCanceledMembershipsById, selectMyPurchasedMembershipsById, selectMembershipFetchingIdsByChannel, selectPendingBuyMembershipIds, selectPendingCancelMembershipIds, selectChannelMembershipsByCreatorId, selectById, selectDidFetchMembershipsDataById, selectMembershipPerks, selectMySupportersList, selectProtectedContentClaimsById, selectIsListingAllMyTiers, selectMyTotalSupportersAmount, selectMyTotalMonthlyIncome, selectSupportersForChannelId, selectSupportersAmountForChannelId, selectMonthlyIncomeForChannelId, selectMembershipMineFetched, selectMyActiveMembershipsForChannelClaimId, selectMyValidMembershipsById, selectMyValidMembershipsForCreatorId, selectUserHasValidMembershipForCreatorId, selectMyValidMembershipIds, selectMyActiveOdyseeMembership, selectUserHasActiveOdyseeMembership, selectMyCanceledMembershipsForChannelClaimId, selectMyPurchasedMembershipsForChannelClaimId, selectPurchaseIsPendingForMembershipId, selectCancelIsPendingForMembershipId, selectFetchingIdsForMembershipChannelId, selectChannelMembershipsForCreatorId, selectMembershipForCreatorIdAndChannelId, selectOdyseeMembershipForChannelId, selectOdyseeMembershipIsPremiumPlus, selectMembershipTiersForChannelId, selectMembershipsByIdForChannelIds, selectMyMembershipTiersChannelById, userHasMembershipTiers, selectMembershipTiersForChannelUri, selectOdyseeMembershipTiers, selectCreatorMembershipsFetchedByUri, selectCreatorHasMembershipsByUri, selectMyPurchasedMembershipTierForCreatorUri, selectUserValidMembershipForChannelUri, selectProtectedContentClaimsForId, selectProtectedContentMembershipsForClaimId, selectMyMembershipTiersWithExclusiveContentPerk, selectMyMembershipTiersWithExclusiveLivestreamPerk, selectMyMembershipTiersWithMembersOnlyChatPerk, selectMembershipTierIdsWithMembersOnlyChatPerk, selectIfUnauthorizedForContent, selectIfChannelHasMembershipTiers */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMembershipMineData\", function() { return selectMembershipMineData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyActiveMembershipsById\", function() { return selectMyActiveMembershipsById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyCanceledMembershipsById\", function() { return selectMyCanceledMembershipsById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyPurchasedMembershipsById\", function() { return selectMyPurchasedMembershipsById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMembershipFetchingIdsByChannel\", function() { return selectMembershipFetchingIdsByChannel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectPendingBuyMembershipIds\", function() { return selectPendingBuyMembershipIds; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectPendingCancelMembershipIds\", function() { return selectPendingCancelMembershipIds; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectChannelMembershipsByCreatorId\", function() { return selectChannelMembershipsByCreatorId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectById\", function() { return selectById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectDidFetchMembershipsDataById\", function() { return selectDidFetchMembershipsDataById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMembershipPerks\", function() { return selectMembershipPerks; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMySupportersList\", function() { return selectMySupportersList; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectProtectedContentClaimsById\", function() { return selectProtectedContentClaimsById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectIsListingAllMyTiers\", function() { return selectIsListingAllMyTiers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyTotalSupportersAmount\", function() { return selectMyTotalSupportersAmount; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyTotalMonthlyIncome\", function() { return selectMyTotalMonthlyIncome; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectSupportersForChannelId\", function() { return selectSupportersForChannelId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectSupportersAmountForChannelId\", function() { return selectSupportersAmountForChannelId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMonthlyIncomeForChannelId\", function() { return selectMonthlyIncomeForChannelId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMembershipMineFetched\", function() { return selectMembershipMineFetched; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyActiveMembershipsForChannelClaimId\", function() { return selectMyActiveMembershipsForChannelClaimId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyValidMembershipsById\", function() { return selectMyValidMembershipsById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyValidMembershipsForCreatorId\", function() { return selectMyValidMembershipsForCreatorId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectUserHasValidMembershipForCreatorId\", function() { return selectUserHasValidMembershipForCreatorId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyValidMembershipIds\", function() { return selectMyValidMembershipIds; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyActiveOdyseeMembership\", function() { return selectMyActiveOdyseeMembership; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectUserHasActiveOdyseeMembership\", function() { return selectUserHasActiveOdyseeMembership; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyCanceledMembershipsForChannelClaimId\", function() { return selectMyCanceledMembershipsForChannelClaimId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyPurchasedMembershipsForChannelClaimId\", function() { return selectMyPurchasedMembershipsForChannelClaimId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectPurchaseIsPendingForMembershipId\", function() { return selectPurchaseIsPendingForMembershipId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectCancelIsPendingForMembershipId\", function() { return selectCancelIsPendingForMembershipId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectFetchingIdsForMembershipChannelId\", function() { return selectFetchingIdsForMembershipChannelId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectChannelMembershipsForCreatorId\", function() { return selectChannelMembershipsForCreatorId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMembershipForCreatorIdAndChannelId\", function() { return selectMembershipForCreatorIdAndChannelId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectOdyseeMembershipForChannelId\", function() { return selectOdyseeMembershipForChannelId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectOdyseeMembershipIsPremiumPlus\", function() { return selectOdyseeMembershipIsPremiumPlus; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMembershipTiersForChannelId\", function() { return selectMembershipTiersForChannelId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMembershipsByIdForChannelIds\", function() { return selectMembershipsByIdForChannelIds; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyMembershipTiersChannelById\", function() { return selectMyMembershipTiersChannelById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"userHasMembershipTiers\", function() { return userHasMembershipTiers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMembershipTiersForChannelUri\", function() { return selectMembershipTiersForChannelUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectOdyseeMembershipTiers\", function() { return selectOdyseeMembershipTiers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectCreatorMembershipsFetchedByUri\", function() { return selectCreatorMembershipsFetchedByUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectCreatorHasMembershipsByUri\", function() { return selectCreatorHasMembershipsByUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyPurchasedMembershipTierForCreatorUri\", function() { return selectMyPurchasedMembershipTierForCreatorUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectUserValidMembershipForChannelUri\", function() { return selectUserValidMembershipForChannelUri; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectProtectedContentClaimsForId\", function() { return selectProtectedContentClaimsForId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectProtectedContentMembershipsForClaimId\", function() { return selectProtectedContentMembershipsForClaimId; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyMembershipTiersWithExclusiveContentPerk\", function() { return selectMyMembershipTiersWithExclusiveContentPerk; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyMembershipTiersWithExclusiveLivestreamPerk\", function() { return selectMyMembershipTiersWithExclusiveLivestreamPerk; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMyMembershipTiersWithMembersOnlyChatPerk\", function() { return selectMyMembershipTiersWithMembersOnlyChatPerk; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectMembershipTierIdsWithMembersOnlyChatPerk\", function() { return selectMembershipTierIdsWithMembersOnlyChatPerk; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectIfUnauthorizedForContent\", function() { return selectIfUnauthorizedForContent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectIfChannelHasMembershipTiers\", function() { return selectIfChannelHasMembershipTiers; });\n/* harmony import */ var reselect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! reselect */ \"../node_modules/reselect/es/index.js\");\n/* harmony import */ var re_reselect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! re-reselect */ \"../node_modules/re-reselect/dist/index.js\");\n/* harmony import */ var re_reselect__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(re_reselect__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var redux_selectors_claims__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! redux/selectors/claims */ \"../ui/redux/selectors/claims.js\");\n/* harmony import */ var constants_channels__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! constants/channels */ \"../ui/constants/channels.js\");\n/* harmony import */ var constants_memberships__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! constants/memberships */ \"../ui/constants/memberships.js\");\n\n\n\n\n\n\nvar selectState = function selectState(state) {\n  return state.memberships || {};\n};\n\nvar selectMembershipMineData = function selectMembershipMineData(state) {\n  return selectState(state).membershipMineByKey;\n};\nvar selectMyActiveMembershipsById = function selectMyActiveMembershipsById(state) {\n  var _selectMembershipMine;\n\n  return (_selectMembershipMine = selectMembershipMineData(state)) === null || _selectMembershipMine === void 0 ? void 0 : _selectMembershipMine.activeById;\n};\nvar selectMyCanceledMembershipsById = function selectMyCanceledMembershipsById(state) {\n  var _selectMembershipMine2;\n\n  return (_selectMembershipMine2 = selectMembershipMineData(state)) === null || _selectMembershipMine2 === void 0 ? void 0 : _selectMembershipMine2.canceledById;\n};\nvar selectMyPurchasedMembershipsById = function selectMyPurchasedMembershipsById(state) {\n  var _selectMembershipMine3;\n\n  return (_selectMembershipMine3 = selectMembershipMineData(state)) === null || _selectMembershipMine3 === void 0 ? void 0 : _selectMembershipMine3.purchasedById;\n};\nvar selectMembershipFetchingIdsByChannel = function selectMembershipFetchingIdsByChannel(state) {\n  return selectState(state).fetchingIdsByCreatorId;\n};\nvar selectPendingBuyMembershipIds = function selectPendingBuyMembershipIds(state) {\n  return selectState(state).pendingBuyIds;\n};\nvar selectPendingCancelMembershipIds = function selectPendingCancelMembershipIds(state) {\n  return selectState(state).pendingCancelIds;\n};\nvar selectChannelMembershipsByCreatorId = function selectChannelMembershipsByCreatorId(state) {\n  return selectState(state).channelMembershipsByCreatorId;\n};\nvar selectById = function selectById(state) {\n  return selectState(state).membershipListById || {};\n};\nvar selectDidFetchMembershipsDataById = function selectDidFetchMembershipsDataById(state) {\n  return selectState(state).didFetchMembershipsDataById;\n};\nvar selectMembershipPerks = function selectMembershipPerks(state) {\n  return selectState(state).membershipPerks;\n};\nvar selectMySupportersList = function selectMySupportersList(state) {\n  return selectState(state).mySupportersList;\n};\nvar selectProtectedContentClaimsById = function selectProtectedContentClaimsById(state) {\n  return selectState(state).protectedContentClaimsByCreatorId;\n};\nvar selectIsListingAllMyTiers = function selectIsListingAllMyTiers(state) {\n  return selectState(state).listingAllMyTiers;\n};\nvar selectMyTotalSupportersAmount = function selectMyTotalSupportersAmount(state) {\n  var _selectMySupportersLi;\n\n  return ((_selectMySupportersLi = selectMySupportersList(state)) === null || _selectMySupportersLi === void 0 ? void 0 : _selectMySupportersLi.length) || 0;\n};\nvar selectMyTotalMonthlyIncome = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectMySupportersList, function (supportersList) {\n  var value = 0;\n\n  if (supportersList) {\n    supportersList.forEach(function (supporter) {\n      value += supporter.Price;\n    });\n  }\n\n  return value;\n});\nvar selectSupportersForChannelId = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_2__[\"selectNameForClaimId\"], selectMySupportersList, function (channelName, supportersList) {\n  return supportersList && supportersList.filter(function (supporter) {\n    return supporter.ChannelBeingSupported === channelName;\n  });\n});\nvar selectSupportersAmountForChannelId = function selectSupportersAmountForChannelId(state, channelId) {\n  var _selectSupportersForC;\n\n  return ((_selectSupportersForC = selectSupportersForChannelId(state, channelId)) === null || _selectSupportersForC === void 0 ? void 0 : _selectSupportersForC.length) || 0;\n};\nvar selectMonthlyIncomeForChannelId = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectSupportersForChannelId, function (channelSupporters) {\n  var value = 0;\n\n  if (channelSupporters) {\n    channelSupporters.forEach(function (supporter) {\n      value += supporter.Price;\n    });\n  }\n\n  return value;\n});\nvar selectMembershipMineFetched = function selectMembershipMineFetched(state) {\n  return selectMembershipMineData(state) !== undefined;\n};\nvar selectMyActiveMembershipsForChannelClaimId = function selectMyActiveMembershipsForChannelClaimId(state, id) {\n  var byId = selectMyActiveMembershipsById(state);\n  return byId && byId[id];\n};\nvar selectMyValidMembershipsById = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectMyPurchasedMembershipsById, function (purchasedMembershipsById) {\n  var validMembershipsById = {};\n\n  for (var creatorChannelId in purchasedMembershipsById) {\n    var purchasedCreatorMemberships = purchasedMembershipsById[creatorChannelId];\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = purchasedCreatorMemberships[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var membership = _step.value;\n\n        if (membership.Subscription.current_period_end * 1000 > Date.now()) {\n          validMembershipsById[creatorChannelId] = new Set(validMembershipsById[creatorChannelId]);\n          validMembershipsById[creatorChannelId].add(membership); // $FlowFixMe\n\n          validMembershipsById[creatorChannelId] = Array.from(validMembershipsById[creatorChannelId]);\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n          _iterator[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n  }\n\n  return validMembershipsById;\n});\nvar selectMyValidMembershipsForCreatorId = function selectMyValidMembershipsForCreatorId(state, id) {\n  return selectMyValidMembershipsById(state)[id];\n};\nvar selectUserHasValidMembershipForCreatorId = function selectUserHasValidMembershipForCreatorId(state, id) {\n  var validMemberships = selectMyValidMembershipsForCreatorId(state, id);\n  return Boolean(validMemberships && validMemberships.length > 0);\n};\nvar selectMyValidMembershipIds = function selectMyValidMembershipIds(state) {\n  var validMembershipsById = selectMyValidMembershipsById(state);\n  var validMembershipIds = new Set([]);\n\n  for (var creatorId in validMembershipsById) {\n    var memberships = validMembershipsById[creatorId];\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = memberships[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var membership = _step2.value;\n        validMembershipIds.add(membership.MembershipDetails.id);\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n          _iterator2[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n  } // $FlowFixMe\n\n\n  return validMembershipIds.size ? Array.from(validMembershipIds) : null;\n};\nvar selectMyActiveOdyseeMembership = function selectMyActiveOdyseeMembership(state) {\n  return selectMyActiveMembershipsForChannelClaimId(state, constants_channels__WEBPACK_IMPORTED_MODULE_3__[\"ODYSEE_CHANNEL\"].ID);\n};\nvar selectUserHasActiveOdyseeMembership = function selectUserHasActiveOdyseeMembership(state, id) {\n  return Boolean(selectMyActiveOdyseeMembership(state));\n};\nvar selectMyCanceledMembershipsForChannelClaimId = function selectMyCanceledMembershipsForChannelClaimId(state, id) {\n  var byId = selectMyCanceledMembershipsById(state);\n  return byId && byId[id];\n};\nvar selectMyPurchasedMembershipsForChannelClaimId = function selectMyPurchasedMembershipsForChannelClaimId(state, id) {\n  var byId = selectMyPurchasedMembershipsById(state);\n  return byId && byId[id];\n};\nvar selectPurchaseIsPendingForMembershipId = function selectPurchaseIsPendingForMembershipId(state, id) {\n  return new Set(selectPendingBuyMembershipIds(state)).has(id);\n};\nvar selectCancelIsPendingForMembershipId = function selectCancelIsPendingForMembershipId(state, id) {\n  return new Set(selectPendingCancelMembershipIds(state)).has(id);\n};\nvar selectFetchingIdsForMembershipChannelId = function selectFetchingIdsForMembershipChannelId(state, channelId) {\n  return selectMembershipFetchingIdsByChannel(state)[channelId];\n};\nvar selectChannelMembershipsForCreatorId = function selectChannelMembershipsForCreatorId(state, channelId) {\n  return selectChannelMembershipsByCreatorId(state)[channelId];\n};\nvar selectMembershipForCreatorIdAndChannelId = Object(re_reselect__WEBPACK_IMPORTED_MODULE_1__[\"createCachedSelector\"])(function (state, creatorId, channelId) {\n  return channelId;\n}, selectChannelMembershipsForCreatorId, selectMyValidMembershipsForCreatorId, redux_selectors_claims__WEBPACK_IMPORTED_MODULE_2__[\"selectMyChannelClaimIds\"], function (channelId, creatorMemberships, myValidCreatorMemberships, myChannelClaimIds) {\n  var channelIsMine = new Set(myChannelClaimIds).has(channelId);\n\n  if (channelIsMine && myValidCreatorMemberships) {\n    // -- For checking my own memberships, it is better to use the result of the 'mine'\n    // call, which is cached and will be more up to date.\n    var myMembership = myValidCreatorMemberships.find(function (membership) {\n      return membership.Membership.channel_id === channelId;\n    });\n    return myMembership && myMembership.MembershipDetails.name;\n  }\n\n  return creatorMemberships && creatorMemberships[channelId];\n})(function (state, creatorId, channelId) {\n  return \"\".concat(String(creatorId), \":\").concat(String(channelId));\n});\nvar selectOdyseeMembershipForChannelId = function selectOdyseeMembershipForChannelId(state, channelId) {\n  return selectMembershipForCreatorIdAndChannelId(state, constants_channels__WEBPACK_IMPORTED_MODULE_3__[\"ODYSEE_CHANNEL\"].ID, channelId);\n};\nvar selectOdyseeMembershipIsPremiumPlus = function selectOdyseeMembershipIsPremiumPlus(state, channelId) {\n  return selectOdyseeMembershipForChannelId(state, channelId) === constants_memberships__WEBPACK_IMPORTED_MODULE_4__[\"ODYSEE_TIER_NAMES\"].PREMIUM_PLUS;\n};\nvar selectMembershipTiersForChannelId = function selectMembershipTiersForChannelId(state, channelId) {\n  return selectById(state)[channelId];\n};\nvar selectMembershipsByIdForChannelIds = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(function (state, ids) {\n  return ids;\n}, selectById, function (ids, byId) {\n  var membershipsById = {};\n  ids.forEach(function (id) {\n    var membershipForId = byId[id];\n    if (membershipForId) membershipsById[id] = membershipForId;\n  });\n  return membershipsById;\n});\nvar selectMyMembershipTiersChannelById = function selectMyMembershipTiersChannelById(state) {\n  var myChannelClaimIds = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_2__[\"selectMyChannelClaimIds\"])(state);\n  if (!myChannelClaimIds) return myChannelClaimIds;\n  return selectMembershipsByIdForChannelIds(state, myChannelClaimIds);\n};\nvar userHasMembershipTiers = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectMyMembershipTiersChannelById, function (myMembershipsById) {\n  return Boolean(myMembershipsById && Object.values(myMembershipsById).length > 0);\n});\nvar selectMembershipTiersForChannelUri = function selectMembershipTiersForChannelUri(state, uri) {\n  return selectMembershipTiersForChannelId(state, Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_2__[\"selectChannelClaimIdForUri\"])(state, uri) || '');\n};\nvar selectOdyseeMembershipTiers = function selectOdyseeMembershipTiers(state) {\n  return selectMembershipTiersForChannelId(state, constants_channels__WEBPACK_IMPORTED_MODULE_3__[\"ODYSEE_CHANNEL\"].ID);\n};\nvar selectCreatorMembershipsFetchedByUri = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectMembershipTiersForChannelUri, function (memberships) {\n  return memberships !== undefined;\n});\nvar selectCreatorHasMembershipsByUri = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(selectMembershipTiersForChannelUri, function (memberships) {\n  return Boolean((memberships === null || memberships === void 0 ? void 0 : memberships.length) > 0);\n});\nvar selectMyPurchasedMembershipTierForCreatorUri = function selectMyPurchasedMembershipTierForCreatorUri(state, creatorId) {\n  var myPurchasedCreatorMembership = selectMyPurchasedMembershipsForChannelClaimId(state, creatorId);\n  if (!myPurchasedCreatorMembership) return myPurchasedCreatorMembership;\n  var creatorMembershipTiers = selectMembershipTiersForChannelId(state, creatorId);\n  if (!creatorMembershipTiers) return creatorMembershipTiers; // This is needed because some data like Perks is present in membership_list call,\n  // but returns null on membership_mine\n\n  return Object.assign({}, myPurchasedCreatorMembership[0], creatorMembershipTiers.find(function (membership) {\n    return membership.Membership.id === myPurchasedCreatorMembership[0].MembershipDetails.id;\n  }));\n};\nvar selectUserValidMembershipForChannelUri = Object(reselect__WEBPACK_IMPORTED_MODULE_0__[\"createSelector\"])(function (state, uri) {\n  return selectMyPurchasedMembershipsForChannelClaimId(state, Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_2__[\"selectChannelClaimIdForUri\"])(state, uri) || '');\n}, function (purchasedMembershipForChannel) {\n  var _purchasedMembershipF;\n\n  if (!purchasedMembershipForChannel) return purchasedMembershipForChannel; // $FlowFixMe\n\n  var subscriptionEndTime = (_purchasedMembershipF = purchasedMembershipForChannel[0].Subscription) === null || _purchasedMembershipF === void 0 ? void 0 : _purchasedMembershipF.current_period_end;\n  var currentTimeInStripeFormat = new Date().getTime() / 1000;\n  var membershipIsValid = subscriptionEndTime && currentTimeInStripeFormat < subscriptionEndTime;\n  return membershipIsValid ? purchasedMembershipForChannel[0] : null;\n});\nvar selectProtectedContentClaimsForId = function selectProtectedContentClaimsForId(state, channelId) {\n  return selectProtectedContentClaimsById(state)[channelId];\n};\nvar selectProtectedContentMembershipsForClaimId = function selectProtectedContentMembershipsForClaimId(state, channelId, claimId) {\n  var protectedClaimsById = selectProtectedContentClaimsForId(state, channelId);\n  return protectedClaimsById && protectedClaimsById[claimId] && protectedClaimsById[claimId].memberships;\n};\nvar selectMyMembershipTiersWithExclusiveContentPerk = function selectMyMembershipTiersWithExclusiveContentPerk(state, activeChannelClaimId) {\n  var membershipTiers = selectMembershipTiersForChannelId(state, activeChannelClaimId);\n  if (!membershipTiers) return [];\n  var perkName = 'Exclusive content';\n  var tiers = membershipTiers.filter(function (membershipTier) {\n    return membershipTier.Perks && membershipTier.Perks.some(function (perk) {\n      return perk.name === perkName;\n    });\n  });\n  return tiers;\n};\nvar selectMyMembershipTiersWithExclusiveLivestreamPerk = function selectMyMembershipTiersWithExclusiveLivestreamPerk(state, activeChannelClaimId) {\n  var membershipTiers = selectMembershipTiersForChannelId(state, activeChannelClaimId);\n  if (!membershipTiers) return [];\n  var perkName = 'Exclusive livestreams';\n  var tiers = membershipTiers.filter(function (membershipTier) {\n    return membershipTier.Perks && membershipTier.Perks.some(function (perk) {\n      return perk.name === perkName;\n    });\n  });\n  return tiers;\n};\nvar selectMyMembershipTiersWithMembersOnlyChatPerk = function selectMyMembershipTiersWithMembersOnlyChatPerk(state, channelId) {\n  var membershipTiers = selectMembershipTiersForChannelId(state, channelId);\n  if (!membershipTiers) return [];\n  var perkName = 'Members-only chat';\n  var tiers = membershipTiers.filter(function (membershipTier) {\n    return membershipTier.Perks && membershipTier.Perks.some(function (perk) {\n      return perk.name === perkName;\n    });\n  });\n  return tiers;\n};\nvar selectMembershipTierIdsWithMembersOnlyChatPerk = function selectMembershipTierIdsWithMembersOnlyChatPerk(state, channelId) {\n  var memberships = selectMyMembershipTiersWithMembersOnlyChatPerk(state, channelId);\n  var membershipIds = memberships.map(function (membership) {\n    return membership.Membership.id;\n  });\n  return membershipIds;\n};\nvar selectIfUnauthorizedForContent = function selectIfUnauthorizedForContent(state, channelId, claimId, uri) {\n  // TODO: add a check for claimIsMine here\n  var protectedMembershipIdsForClaim = selectProtectedContentMembershipsForClaimId(state, channelId, claimId);\n  var myValidMembershipIds = selectMyValidMembershipIds(state);\n  var protectedContentTag = Object(redux_selectors_claims__WEBPACK_IMPORTED_MODULE_2__[\"selectProtectedContentTagForUri\"])(state, uri);\n  var isAnAuthorizedMember = protectedMembershipIdsForClaim && myValidMembershipIds && protectedMembershipIdsForClaim.filter(function (m) {\n    return myValidMembershipIds.includes(m);\n  }).length;\n  var isNotAuthorizedForProtectedContent = protectedContentTag && !isAnAuthorizedMember;\n  return isNotAuthorizedForProtectedContent || false;\n};\nvar selectIfChannelHasMembershipTiers = function selectIfChannelHasMembershipTiers(state, channelId) {\n  var memberships = selectMembershipTiersForChannelId(state, channelId);\n  return memberships && memberships.length;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvcmVkdXgvc2VsZWN0b3JzL21lbWJlcnNoaXBzLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uL3VpL3JlZHV4L3NlbGVjdG9ycy9tZW1iZXJzaGlwcy5qcz80ODYzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5pbXBvcnQgeyBjcmVhdGVTZWxlY3RvciB9IGZyb20gJ3Jlc2VsZWN0JztcbmltcG9ydCB7IGNyZWF0ZUNhY2hlZFNlbGVjdG9yIH0gZnJvbSAncmUtcmVzZWxlY3QnO1xuaW1wb3J0IHtcbiAgc2VsZWN0Q2hhbm5lbENsYWltSWRGb3JVcmksXG4gIHNlbGVjdE15Q2hhbm5lbENsYWltSWRzLFxuICBzZWxlY3ROYW1lRm9yQ2xhaW1JZCxcbiAgc2VsZWN0UHJvdGVjdGVkQ29udGVudFRhZ0ZvclVyaSxcbn0gZnJvbSAncmVkdXgvc2VsZWN0b3JzL2NsYWltcyc7XG5pbXBvcnQgeyBPRFlTRUVfQ0hBTk5FTCB9IGZyb20gJ2NvbnN0YW50cy9jaGFubmVscyc7XG5pbXBvcnQgKiBhcyBNRU1CRVJTSElQX0NPTlNUUyBmcm9tICdjb25zdGFudHMvbWVtYmVyc2hpcHMnO1xuXG50eXBlIFN0YXRlID0geyBjbGFpbXM6IGFueSwgdXNlcjogYW55LCBtZW1iZXJzaGlwczogYW55IH07XG5cbmNvbnN0IHNlbGVjdFN0YXRlID0gKHN0YXRlOiBTdGF0ZSkgPT4gc3RhdGUubWVtYmVyc2hpcHMgfHwge307XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RNZW1iZXJzaGlwTWluZURhdGEgPSAoc3RhdGU6IFN0YXRlKSA9PiBzZWxlY3RTdGF0ZShzdGF0ZSkubWVtYmVyc2hpcE1pbmVCeUtleTtcbmV4cG9ydCBjb25zdCBzZWxlY3RNeUFjdGl2ZU1lbWJlcnNoaXBzQnlJZCA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdE1lbWJlcnNoaXBNaW5lRGF0YShzdGF0ZSk/LmFjdGl2ZUJ5SWQ7XG5leHBvcnQgY29uc3Qgc2VsZWN0TXlDYW5jZWxlZE1lbWJlcnNoaXBzQnlJZCA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdE1lbWJlcnNoaXBNaW5lRGF0YShzdGF0ZSk/LmNhbmNlbGVkQnlJZDtcbmV4cG9ydCBjb25zdCBzZWxlY3RNeVB1cmNoYXNlZE1lbWJlcnNoaXBzQnlJZCA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdE1lbWJlcnNoaXBNaW5lRGF0YShzdGF0ZSk/LnB1cmNoYXNlZEJ5SWQ7XG5leHBvcnQgY29uc3Qgc2VsZWN0TWVtYmVyc2hpcEZldGNoaW5nSWRzQnlDaGFubmVsID0gKHN0YXRlOiBTdGF0ZSkgPT4gc2VsZWN0U3RhdGUoc3RhdGUpLmZldGNoaW5nSWRzQnlDcmVhdG9ySWQ7XG5leHBvcnQgY29uc3Qgc2VsZWN0UGVuZGluZ0J1eU1lbWJlcnNoaXBJZHMgPSAoc3RhdGU6IFN0YXRlKSA9PiBzZWxlY3RTdGF0ZShzdGF0ZSkucGVuZGluZ0J1eUlkcztcbmV4cG9ydCBjb25zdCBzZWxlY3RQZW5kaW5nQ2FuY2VsTWVtYmVyc2hpcElkcyA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdFN0YXRlKHN0YXRlKS5wZW5kaW5nQ2FuY2VsSWRzO1xuZXhwb3J0IGNvbnN0IHNlbGVjdENoYW5uZWxNZW1iZXJzaGlwc0J5Q3JlYXRvcklkID0gKHN0YXRlOiBTdGF0ZSkgPT4gc2VsZWN0U3RhdGUoc3RhdGUpLmNoYW5uZWxNZW1iZXJzaGlwc0J5Q3JlYXRvcklkO1xuZXhwb3J0IGNvbnN0IHNlbGVjdEJ5SWQgPSAoc3RhdGU6IFN0YXRlKSA9PiBzZWxlY3RTdGF0ZShzdGF0ZSkubWVtYmVyc2hpcExpc3RCeUlkIHx8IHt9O1xuZXhwb3J0IGNvbnN0IHNlbGVjdERpZEZldGNoTWVtYmVyc2hpcHNEYXRhQnlJZCA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdFN0YXRlKHN0YXRlKS5kaWRGZXRjaE1lbWJlcnNoaXBzRGF0YUJ5SWQ7XG5leHBvcnQgY29uc3Qgc2VsZWN0TWVtYmVyc2hpcFBlcmtzID0gKHN0YXRlOiBTdGF0ZSkgPT4gc2VsZWN0U3RhdGUoc3RhdGUpLm1lbWJlcnNoaXBQZXJrcztcbmV4cG9ydCBjb25zdCBzZWxlY3RNeVN1cHBvcnRlcnNMaXN0ID0gKHN0YXRlOiBTdGF0ZSkgPT4gc2VsZWN0U3RhdGUoc3RhdGUpLm15U3VwcG9ydGVyc0xpc3Q7XG5leHBvcnQgY29uc3Qgc2VsZWN0UHJvdGVjdGVkQ29udGVudENsYWltc0J5SWQgPSAoc3RhdGU6IFN0YXRlKSA9PiBzZWxlY3RTdGF0ZShzdGF0ZSkucHJvdGVjdGVkQ29udGVudENsYWltc0J5Q3JlYXRvcklkO1xuZXhwb3J0IGNvbnN0IHNlbGVjdElzTGlzdGluZ0FsbE15VGllcnMgPSAoc3RhdGU6IFN0YXRlKSA9PiBzZWxlY3RTdGF0ZShzdGF0ZSkubGlzdGluZ0FsbE15VGllcnM7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RNeVRvdGFsU3VwcG9ydGVyc0Ftb3VudCA9IChzdGF0ZTogU3RhdGUpID0+IHNlbGVjdE15U3VwcG9ydGVyc0xpc3Qoc3RhdGUpPy5sZW5ndGggfHwgMDtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdE15VG90YWxNb250aGx5SW5jb21lID0gY3JlYXRlU2VsZWN0b3Ioc2VsZWN0TXlTdXBwb3J0ZXJzTGlzdCwgKHN1cHBvcnRlcnNMaXN0KSA9PiB7XG4gIGxldCB2YWx1ZSA9IDA7XG5cbiAgaWYgKHN1cHBvcnRlcnNMaXN0KSB7XG4gICAgc3VwcG9ydGVyc0xpc3QuZm9yRWFjaCgoc3VwcG9ydGVyKSA9PiB7XG4gICAgICB2YWx1ZSArPSBzdXBwb3J0ZXIuUHJpY2U7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gdmFsdWU7XG59KTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdFN1cHBvcnRlcnNGb3JDaGFubmVsSWQgPSBjcmVhdGVTZWxlY3RvcihcbiAgc2VsZWN0TmFtZUZvckNsYWltSWQsXG4gIHNlbGVjdE15U3VwcG9ydGVyc0xpc3QsXG4gIChjaGFubmVsTmFtZSwgc3VwcG9ydGVyc0xpc3QpID0+XG4gICAgc3VwcG9ydGVyc0xpc3QgJiYgc3VwcG9ydGVyc0xpc3QuZmlsdGVyKChzdXBwb3J0ZXIpID0+IHN1cHBvcnRlci5DaGFubmVsQmVpbmdTdXBwb3J0ZWQgPT09IGNoYW5uZWxOYW1lKVxuKTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdFN1cHBvcnRlcnNBbW91bnRGb3JDaGFubmVsSWQgPSAoc3RhdGU6IFN0YXRlLCBjaGFubmVsSWQ6IENsYWltSWQpID0+XG4gIHNlbGVjdFN1cHBvcnRlcnNGb3JDaGFubmVsSWQoc3RhdGUsIGNoYW5uZWxJZCk/Lmxlbmd0aCB8fCAwO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0TW9udGhseUluY29tZUZvckNoYW5uZWxJZCA9IGNyZWF0ZVNlbGVjdG9yKHNlbGVjdFN1cHBvcnRlcnNGb3JDaGFubmVsSWQsIChjaGFubmVsU3VwcG9ydGVycykgPT4ge1xuICBsZXQgdmFsdWUgPSAwO1xuXG4gIGlmIChjaGFubmVsU3VwcG9ydGVycykge1xuICAgIGNoYW5uZWxTdXBwb3J0ZXJzLmZvckVhY2goKHN1cHBvcnRlcikgPT4ge1xuICAgICAgdmFsdWUgKz0gc3VwcG9ydGVyLlByaWNlO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlO1xufSk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RNZW1iZXJzaGlwTWluZUZldGNoZWQgPSAoc3RhdGU6IFN0YXRlKSA9PiBzZWxlY3RNZW1iZXJzaGlwTWluZURhdGEoc3RhdGUpICE9PSB1bmRlZmluZWQ7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RNeUFjdGl2ZU1lbWJlcnNoaXBzRm9yQ2hhbm5lbENsYWltSWQgPSAoc3RhdGU6IFN0YXRlLCBpZDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGJ5SWQgPSBzZWxlY3RNeUFjdGl2ZU1lbWJlcnNoaXBzQnlJZChzdGF0ZSk7XG4gIHJldHVybiBieUlkICYmIGJ5SWRbaWRdO1xufTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdE15VmFsaWRNZW1iZXJzaGlwc0J5SWQgPSBjcmVhdGVTZWxlY3RvcihcbiAgc2VsZWN0TXlQdXJjaGFzZWRNZW1iZXJzaGlwc0J5SWQsXG4gIChwdXJjaGFzZWRNZW1iZXJzaGlwc0J5SWQpID0+IHtcbiAgICBjb25zdCB2YWxpZE1lbWJlcnNoaXBzQnlJZCA9IHt9O1xuXG4gICAgZm9yIChjb25zdCBjcmVhdG9yQ2hhbm5lbElkIGluIHB1cmNoYXNlZE1lbWJlcnNoaXBzQnlJZCkge1xuICAgICAgY29uc3QgcHVyY2hhc2VkQ3JlYXRvck1lbWJlcnNoaXBzID0gcHVyY2hhc2VkTWVtYmVyc2hpcHNCeUlkW2NyZWF0b3JDaGFubmVsSWRdO1xuXG4gICAgICBmb3IgKGNvbnN0IG1lbWJlcnNoaXAgb2YgcHVyY2hhc2VkQ3JlYXRvck1lbWJlcnNoaXBzKSB7XG4gICAgICAgIGlmIChtZW1iZXJzaGlwLlN1YnNjcmlwdGlvbi5jdXJyZW50X3BlcmlvZF9lbmQgKiAxMDAwID4gRGF0ZS5ub3coKSkge1xuICAgICAgICAgIHZhbGlkTWVtYmVyc2hpcHNCeUlkW2NyZWF0b3JDaGFubmVsSWRdID0gbmV3IFNldCh2YWxpZE1lbWJlcnNoaXBzQnlJZFtjcmVhdG9yQ2hhbm5lbElkXSk7XG4gICAgICAgICAgdmFsaWRNZW1iZXJzaGlwc0J5SWRbY3JlYXRvckNoYW5uZWxJZF0uYWRkKG1lbWJlcnNoaXApO1xuICAgICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgICB2YWxpZE1lbWJlcnNoaXBzQnlJZFtjcmVhdG9yQ2hhbm5lbElkXSA9IEFycmF5LmZyb20odmFsaWRNZW1iZXJzaGlwc0J5SWRbY3JlYXRvckNoYW5uZWxJZF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbGlkTWVtYmVyc2hpcHNCeUlkO1xuICB9XG4pO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0TXlWYWxpZE1lbWJlcnNoaXBzRm9yQ3JlYXRvcklkID0gKHN0YXRlOiBTdGF0ZSwgaWQ6IHN0cmluZykgPT5cbiAgc2VsZWN0TXlWYWxpZE1lbWJlcnNoaXBzQnlJZChzdGF0ZSlbaWRdO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0VXNlckhhc1ZhbGlkTWVtYmVyc2hpcEZvckNyZWF0b3JJZCA9IChzdGF0ZTogU3RhdGUsIGlkOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgdmFsaWRNZW1iZXJzaGlwcyA9IHNlbGVjdE15VmFsaWRNZW1iZXJzaGlwc0ZvckNyZWF0b3JJZChzdGF0ZSwgaWQpO1xuICByZXR1cm4gQm9vbGVhbih2YWxpZE1lbWJlcnNoaXBzICYmIHZhbGlkTWVtYmVyc2hpcHMubGVuZ3RoID4gMCk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0TXlWYWxpZE1lbWJlcnNoaXBJZHMgPSAoc3RhdGU6IFN0YXRlKSA9PiB7XG4gIGNvbnN0IHZhbGlkTWVtYmVyc2hpcHNCeUlkID0gc2VsZWN0TXlWYWxpZE1lbWJlcnNoaXBzQnlJZChzdGF0ZSk7XG5cbiAgY29uc3QgdmFsaWRNZW1iZXJzaGlwSWRzID0gbmV3IFNldChbXSk7XG4gIGZvciAoY29uc3QgY3JlYXRvcklkIGluIHZhbGlkTWVtYmVyc2hpcHNCeUlkKSB7XG4gICAgY29uc3QgbWVtYmVyc2hpcHMgPSB2YWxpZE1lbWJlcnNoaXBzQnlJZFtjcmVhdG9ySWRdO1xuXG4gICAgZm9yIChjb25zdCBtZW1iZXJzaGlwIG9mIG1lbWJlcnNoaXBzKSB7XG4gICAgICB2YWxpZE1lbWJlcnNoaXBJZHMuYWRkKG1lbWJlcnNoaXAuTWVtYmVyc2hpcERldGFpbHMuaWQpO1xuICAgIH1cbiAgfVxuXG4gIC8vICRGbG93Rml4TWVcbiAgcmV0dXJuIHZhbGlkTWVtYmVyc2hpcElkcy5zaXplID8gQXJyYXkuZnJvbSh2YWxpZE1lbWJlcnNoaXBJZHMpIDogbnVsbDtcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RNeUFjdGl2ZU9keXNlZU1lbWJlcnNoaXAgPSAoc3RhdGU6IFN0YXRlKSA9PlxuICBzZWxlY3RNeUFjdGl2ZU1lbWJlcnNoaXBzRm9yQ2hhbm5lbENsYWltSWQoc3RhdGUsIE9EWVNFRV9DSEFOTkVMLklEKTtcbmV4cG9ydCBjb25zdCBzZWxlY3RVc2VySGFzQWN0aXZlT2R5c2VlTWVtYmVyc2hpcCA9IChzdGF0ZTogU3RhdGUsIGlkOiBzdHJpbmcpID0+XG4gIEJvb2xlYW4oc2VsZWN0TXlBY3RpdmVPZHlzZWVNZW1iZXJzaGlwKHN0YXRlKSk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RNeUNhbmNlbGVkTWVtYmVyc2hpcHNGb3JDaGFubmVsQ2xhaW1JZCA9IChzdGF0ZTogU3RhdGUsIGlkOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgYnlJZCA9IHNlbGVjdE15Q2FuY2VsZWRNZW1iZXJzaGlwc0J5SWQoc3RhdGUpO1xuICByZXR1cm4gYnlJZCAmJiBieUlkW2lkXTtcbn07XG5leHBvcnQgY29uc3Qgc2VsZWN0TXlQdXJjaGFzZWRNZW1iZXJzaGlwc0ZvckNoYW5uZWxDbGFpbUlkID0gKHN0YXRlOiBTdGF0ZSwgaWQ6IHN0cmluZykgPT4ge1xuICBjb25zdCBieUlkID0gc2VsZWN0TXlQdXJjaGFzZWRNZW1iZXJzaGlwc0J5SWQoc3RhdGUpO1xuICByZXR1cm4gYnlJZCAmJiBieUlkW2lkXTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RQdXJjaGFzZUlzUGVuZGluZ0Zvck1lbWJlcnNoaXBJZCA9IChzdGF0ZTogU3RhdGUsIGlkOiBzdHJpbmcpID0+XG4gIG5ldyBTZXQoc2VsZWN0UGVuZGluZ0J1eU1lbWJlcnNoaXBJZHMoc3RhdGUpKS5oYXMoaWQpO1xuZXhwb3J0IGNvbnN0IHNlbGVjdENhbmNlbElzUGVuZGluZ0Zvck1lbWJlcnNoaXBJZCA9IChzdGF0ZTogU3RhdGUsIGlkOiBzdHJpbmcpID0+XG4gIG5ldyBTZXQoc2VsZWN0UGVuZGluZ0NhbmNlbE1lbWJlcnNoaXBJZHMoc3RhdGUpKS5oYXMoaWQpO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0RmV0Y2hpbmdJZHNGb3JNZW1iZXJzaGlwQ2hhbm5lbElkID0gKHN0YXRlOiBTdGF0ZSwgY2hhbm5lbElkOiBzdHJpbmcpID0+XG4gIHNlbGVjdE1lbWJlcnNoaXBGZXRjaGluZ0lkc0J5Q2hhbm5lbChzdGF0ZSlbY2hhbm5lbElkXTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdENoYW5uZWxNZW1iZXJzaGlwc0ZvckNyZWF0b3JJZCA9IChzdGF0ZTogU3RhdGUsIGNoYW5uZWxJZDogc3RyaW5nKSA9PlxuICBzZWxlY3RDaGFubmVsTWVtYmVyc2hpcHNCeUNyZWF0b3JJZChzdGF0ZSlbY2hhbm5lbElkXTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdE1lbWJlcnNoaXBGb3JDcmVhdG9ySWRBbmRDaGFubmVsSWQgPSBjcmVhdGVDYWNoZWRTZWxlY3RvcihcbiAgKHN0YXRlLCBjcmVhdG9ySWQsIGNoYW5uZWxJZCkgPT4gY2hhbm5lbElkLFxuICBzZWxlY3RDaGFubmVsTWVtYmVyc2hpcHNGb3JDcmVhdG9ySWQsXG4gIHNlbGVjdE15VmFsaWRNZW1iZXJzaGlwc0ZvckNyZWF0b3JJZCxcbiAgc2VsZWN0TXlDaGFubmVsQ2xhaW1JZHMsXG4gIChjaGFubmVsSWQsIGNyZWF0b3JNZW1iZXJzaGlwcywgbXlWYWxpZENyZWF0b3JNZW1iZXJzaGlwcywgbXlDaGFubmVsQ2xhaW1JZHMpID0+IHtcbiAgICBjb25zdCBjaGFubmVsSXNNaW5lID0gbmV3IFNldChteUNoYW5uZWxDbGFpbUlkcykuaGFzKGNoYW5uZWxJZCk7XG5cbiAgICBpZiAoY2hhbm5lbElzTWluZSAmJiBteVZhbGlkQ3JlYXRvck1lbWJlcnNoaXBzKSB7XG4gICAgICAvLyAtLSBGb3IgY2hlY2tpbmcgbXkgb3duIG1lbWJlcnNoaXBzLCBpdCBpcyBiZXR0ZXIgdG8gdXNlIHRoZSByZXN1bHQgb2YgdGhlICdtaW5lJ1xuICAgICAgLy8gY2FsbCwgd2hpY2ggaXMgY2FjaGVkIGFuZCB3aWxsIGJlIG1vcmUgdXAgdG8gZGF0ZS5cbiAgICAgIGNvbnN0IG15TWVtYmVyc2hpcCA9IG15VmFsaWRDcmVhdG9yTWVtYmVyc2hpcHMuZmluZChcbiAgICAgICAgKG1lbWJlcnNoaXA6IE1lbWJlcnNoaXBUaWVyKSA9PiBtZW1iZXJzaGlwLk1lbWJlcnNoaXAuY2hhbm5lbF9pZCA9PT0gY2hhbm5lbElkXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gbXlNZW1iZXJzaGlwICYmIG15TWVtYmVyc2hpcC5NZW1iZXJzaGlwRGV0YWlscy5uYW1lO1xuICAgIH1cblxuICAgIHJldHVybiBjcmVhdG9yTWVtYmVyc2hpcHMgJiYgY3JlYXRvck1lbWJlcnNoaXBzW2NoYW5uZWxJZF07XG4gIH1cbikoKHN0YXRlLCBjcmVhdG9ySWQsIGNoYW5uZWxJZCkgPT4gYCR7U3RyaW5nKGNyZWF0b3JJZCl9OiR7U3RyaW5nKGNoYW5uZWxJZCl9YCk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RPZHlzZWVNZW1iZXJzaGlwRm9yQ2hhbm5lbElkID0gKHN0YXRlOiBTdGF0ZSwgY2hhbm5lbElkOiBzdHJpbmcpID0+XG4gIHNlbGVjdE1lbWJlcnNoaXBGb3JDcmVhdG9ySWRBbmRDaGFubmVsSWQoc3RhdGUsIE9EWVNFRV9DSEFOTkVMLklELCBjaGFubmVsSWQpO1xuZXhwb3J0IGNvbnN0IHNlbGVjdE9keXNlZU1lbWJlcnNoaXBJc1ByZW1pdW1QbHVzID0gKHN0YXRlOiBTdGF0ZSwgY2hhbm5lbElkOiBzdHJpbmcpID0+XG4gIHNlbGVjdE9keXNlZU1lbWJlcnNoaXBGb3JDaGFubmVsSWQoc3RhdGUsIGNoYW5uZWxJZCkgPT09IE1FTUJFUlNISVBfQ09OU1RTLk9EWVNFRV9USUVSX05BTUVTLlBSRU1JVU1fUExVUztcblxuZXhwb3J0IGNvbnN0IHNlbGVjdE1lbWJlcnNoaXBUaWVyc0ZvckNoYW5uZWxJZCA9IChzdGF0ZTogU3RhdGUsIGNoYW5uZWxJZDogc3RyaW5nKSA9PiBzZWxlY3RCeUlkKHN0YXRlKVtjaGFubmVsSWRdO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0TWVtYmVyc2hpcHNCeUlkRm9yQ2hhbm5lbElkcyA9IGNyZWF0ZVNlbGVjdG9yKFxuICAoc3RhdGUsIGlkcykgPT4gaWRzLFxuICBzZWxlY3RCeUlkLFxuICAoaWRzLCBieUlkKSA9PiB7XG4gICAgY29uc3QgbWVtYmVyc2hpcHNCeUlkID0ge307XG5cbiAgICBpZHMuZm9yRWFjaCgoaWQpID0+IHtcbiAgICAgIGNvbnN0IG1lbWJlcnNoaXBGb3JJZCA9IGJ5SWRbaWRdO1xuICAgICAgaWYgKG1lbWJlcnNoaXBGb3JJZCkgbWVtYmVyc2hpcHNCeUlkW2lkXSA9IG1lbWJlcnNoaXBGb3JJZDtcbiAgICB9KTtcblxuICAgIHJldHVybiBtZW1iZXJzaGlwc0J5SWQ7XG4gIH1cbik7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RNeU1lbWJlcnNoaXBUaWVyc0NoYW5uZWxCeUlkID0gKHN0YXRlOiBTdGF0ZSkgPT4ge1xuICBjb25zdCBteUNoYW5uZWxDbGFpbUlkcyA9IHNlbGVjdE15Q2hhbm5lbENsYWltSWRzKHN0YXRlKTtcbiAgaWYgKCFteUNoYW5uZWxDbGFpbUlkcykgcmV0dXJuIG15Q2hhbm5lbENsYWltSWRzO1xuXG4gIHJldHVybiBzZWxlY3RNZW1iZXJzaGlwc0J5SWRGb3JDaGFubmVsSWRzKHN0YXRlLCBteUNoYW5uZWxDbGFpbUlkcyk7XG59O1xuXG5leHBvcnQgY29uc3QgdXNlckhhc01lbWJlcnNoaXBUaWVycyA9IGNyZWF0ZVNlbGVjdG9yKHNlbGVjdE15TWVtYmVyc2hpcFRpZXJzQ2hhbm5lbEJ5SWQsIChteU1lbWJlcnNoaXBzQnlJZCkgPT5cbiAgQm9vbGVhbihteU1lbWJlcnNoaXBzQnlJZCAmJiBPYmplY3QudmFsdWVzKG15TWVtYmVyc2hpcHNCeUlkKS5sZW5ndGggPiAwKVxuKTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdE1lbWJlcnNoaXBUaWVyc0ZvckNoYW5uZWxVcmkgPSAoc3RhdGU6IFN0YXRlLCB1cmk6IHN0cmluZykgPT5cbiAgc2VsZWN0TWVtYmVyc2hpcFRpZXJzRm9yQ2hhbm5lbElkKHN0YXRlLCBzZWxlY3RDaGFubmVsQ2xhaW1JZEZvclVyaShzdGF0ZSwgdXJpKSB8fCAnJyk7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RPZHlzZWVNZW1iZXJzaGlwVGllcnMgPSAoc3RhdGU6IFN0YXRlKSA9PlxuICBzZWxlY3RNZW1iZXJzaGlwVGllcnNGb3JDaGFubmVsSWQoc3RhdGUsIE9EWVNFRV9DSEFOTkVMLklEKTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdENyZWF0b3JNZW1iZXJzaGlwc0ZldGNoZWRCeVVyaSA9IGNyZWF0ZVNlbGVjdG9yKFxuICBzZWxlY3RNZW1iZXJzaGlwVGllcnNGb3JDaGFubmVsVXJpLFxuICAobWVtYmVyc2hpcHMpID0+IG1lbWJlcnNoaXBzICE9PSB1bmRlZmluZWRcbik7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RDcmVhdG9ySGFzTWVtYmVyc2hpcHNCeVVyaSA9IGNyZWF0ZVNlbGVjdG9yKHNlbGVjdE1lbWJlcnNoaXBUaWVyc0ZvckNoYW5uZWxVcmksIChtZW1iZXJzaGlwcykgPT5cbiAgQm9vbGVhbihtZW1iZXJzaGlwcz8ubGVuZ3RoID4gMClcbik7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RNeVB1cmNoYXNlZE1lbWJlcnNoaXBUaWVyRm9yQ3JlYXRvclVyaSA9IChzdGF0ZTogU3RhdGUsIGNyZWF0b3JJZDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IG15UHVyY2hhc2VkQ3JlYXRvck1lbWJlcnNoaXAgPSBzZWxlY3RNeVB1cmNoYXNlZE1lbWJlcnNoaXBzRm9yQ2hhbm5lbENsYWltSWQoc3RhdGUsIGNyZWF0b3JJZCk7XG4gIGlmICghbXlQdXJjaGFzZWRDcmVhdG9yTWVtYmVyc2hpcCkgcmV0dXJuIG15UHVyY2hhc2VkQ3JlYXRvck1lbWJlcnNoaXA7XG5cbiAgY29uc3QgY3JlYXRvck1lbWJlcnNoaXBUaWVycyA9IHNlbGVjdE1lbWJlcnNoaXBUaWVyc0ZvckNoYW5uZWxJZChzdGF0ZSwgY3JlYXRvcklkKTtcbiAgaWYgKCFjcmVhdG9yTWVtYmVyc2hpcFRpZXJzKSByZXR1cm4gY3JlYXRvck1lbWJlcnNoaXBUaWVycztcblxuICAvLyBUaGlzIGlzIG5lZWRlZCBiZWNhdXNlIHNvbWUgZGF0YSBsaWtlIFBlcmtzIGlzIHByZXNlbnQgaW4gbWVtYmVyc2hpcF9saXN0IGNhbGwsXG4gIC8vIGJ1dCByZXR1cm5zIG51bGwgb24gbWVtYmVyc2hpcF9taW5lXG4gIHJldHVybiBPYmplY3QuYXNzaWduKFxuICAgIHt9LFxuICAgIG15UHVyY2hhc2VkQ3JlYXRvck1lbWJlcnNoaXBbMF0sXG4gICAgY3JlYXRvck1lbWJlcnNoaXBUaWVycy5maW5kKFxuICAgICAgKG1lbWJlcnNoaXApID0+IG1lbWJlcnNoaXAuTWVtYmVyc2hpcC5pZCA9PT0gbXlQdXJjaGFzZWRDcmVhdG9yTWVtYmVyc2hpcFswXS5NZW1iZXJzaGlwRGV0YWlscy5pZFxuICAgIClcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RVc2VyVmFsaWRNZW1iZXJzaGlwRm9yQ2hhbm5lbFVyaSA9IGNyZWF0ZVNlbGVjdG9yKFxuICAoc3RhdGUsIHVyaSkgPT4gc2VsZWN0TXlQdXJjaGFzZWRNZW1iZXJzaGlwc0ZvckNoYW5uZWxDbGFpbUlkKHN0YXRlLCBzZWxlY3RDaGFubmVsQ2xhaW1JZEZvclVyaShzdGF0ZSwgdXJpKSB8fCAnJyksXG4gIChwdXJjaGFzZWRNZW1iZXJzaGlwRm9yQ2hhbm5lbCkgPT4ge1xuICAgIGlmICghcHVyY2hhc2VkTWVtYmVyc2hpcEZvckNoYW5uZWwpIHJldHVybiBwdXJjaGFzZWRNZW1iZXJzaGlwRm9yQ2hhbm5lbDtcblxuICAgIC8vICRGbG93Rml4TWVcbiAgICBjb25zdCBzdWJzY3JpcHRpb25FbmRUaW1lID0gcHVyY2hhc2VkTWVtYmVyc2hpcEZvckNoYW5uZWxbMF0uU3Vic2NyaXB0aW9uPy5jdXJyZW50X3BlcmlvZF9lbmQ7XG4gICAgY29uc3QgY3VycmVudFRpbWVJblN0cmlwZUZvcm1hdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMDtcbiAgICBjb25zdCBtZW1iZXJzaGlwSXNWYWxpZCA9IHN1YnNjcmlwdGlvbkVuZFRpbWUgJiYgY3VycmVudFRpbWVJblN0cmlwZUZvcm1hdCA8IHN1YnNjcmlwdGlvbkVuZFRpbWU7XG5cbiAgICByZXR1cm4gbWVtYmVyc2hpcElzVmFsaWQgPyBwdXJjaGFzZWRNZW1iZXJzaGlwRm9yQ2hhbm5lbFswXSA6IG51bGw7XG4gIH1cbik7XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RQcm90ZWN0ZWRDb250ZW50Q2xhaW1zRm9ySWQgPSAoc3RhdGU6IFN0YXRlLCBjaGFubmVsSWQ6IHN0cmluZykgPT5cbiAgc2VsZWN0UHJvdGVjdGVkQ29udGVudENsYWltc0J5SWQoc3RhdGUpW2NoYW5uZWxJZF07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RQcm90ZWN0ZWRDb250ZW50TWVtYmVyc2hpcHNGb3JDbGFpbUlkID0gKHN0YXRlOiBTdGF0ZSwgY2hhbm5lbElkOiBzdHJpbmcsIGNsYWltSWQ6IHN0cmluZykgPT4ge1xuICBjb25zdCBwcm90ZWN0ZWRDbGFpbXNCeUlkID0gc2VsZWN0UHJvdGVjdGVkQ29udGVudENsYWltc0ZvcklkKHN0YXRlLCBjaGFubmVsSWQpO1xuXG4gIHJldHVybiBwcm90ZWN0ZWRDbGFpbXNCeUlkICYmIHByb3RlY3RlZENsYWltc0J5SWRbY2xhaW1JZF0gJiYgcHJvdGVjdGVkQ2xhaW1zQnlJZFtjbGFpbUlkXS5tZW1iZXJzaGlwcztcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RNeU1lbWJlcnNoaXBUaWVyc1dpdGhFeGNsdXNpdmVDb250ZW50UGVyayA9IChzdGF0ZTogU3RhdGUsIGFjdGl2ZUNoYW5uZWxDbGFpbUlkOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgbWVtYmVyc2hpcFRpZXJzOiBNZW1iZXJzaGlwVGllcnMgPSBzZWxlY3RNZW1iZXJzaGlwVGllcnNGb3JDaGFubmVsSWQoc3RhdGUsIGFjdGl2ZUNoYW5uZWxDbGFpbUlkKTtcblxuICBpZiAoIW1lbWJlcnNoaXBUaWVycykgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IHBlcmtOYW1lID0gJ0V4Y2x1c2l2ZSBjb250ZW50JztcblxuICBjb25zdCB0aWVyczogTWVtYmVyc2hpcFRpZXJzID0gbWVtYmVyc2hpcFRpZXJzLmZpbHRlcigobWVtYmVyc2hpcFRpZXI6IE1lbWJlcnNoaXBUaWVyKSA9PiB7XG4gICAgcmV0dXJuIG1lbWJlcnNoaXBUaWVyLlBlcmtzICYmIG1lbWJlcnNoaXBUaWVyLlBlcmtzLnNvbWUoKHBlcms6IE1lbWJlcnNoaXBQZXJrKSA9PiBwZXJrLm5hbWUgPT09IHBlcmtOYW1lKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHRpZXJzO1xufTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdE15TWVtYmVyc2hpcFRpZXJzV2l0aEV4Y2x1c2l2ZUxpdmVzdHJlYW1QZXJrID0gKHN0YXRlOiBTdGF0ZSwgYWN0aXZlQ2hhbm5lbENsYWltSWQ6IHN0cmluZykgPT4ge1xuICBjb25zdCBtZW1iZXJzaGlwVGllcnM6IE1lbWJlcnNoaXBUaWVycyA9IHNlbGVjdE1lbWJlcnNoaXBUaWVyc0ZvckNoYW5uZWxJZChzdGF0ZSwgYWN0aXZlQ2hhbm5lbENsYWltSWQpO1xuXG4gIGlmICghbWVtYmVyc2hpcFRpZXJzKSByZXR1cm4gW107XG5cbiAgY29uc3QgcGVya05hbWUgPSAnRXhjbHVzaXZlIGxpdmVzdHJlYW1zJztcblxuICBjb25zdCB0aWVyczogTWVtYmVyc2hpcFRpZXJzID0gbWVtYmVyc2hpcFRpZXJzLmZpbHRlcigobWVtYmVyc2hpcFRpZXI6IE1lbWJlcnNoaXBUaWVyKSA9PiB7XG4gICAgcmV0dXJuIG1lbWJlcnNoaXBUaWVyLlBlcmtzICYmIG1lbWJlcnNoaXBUaWVyLlBlcmtzLnNvbWUoKHBlcms6IE1lbWJlcnNoaXBQZXJrKSA9PiBwZXJrLm5hbWUgPT09IHBlcmtOYW1lKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHRpZXJzO1xufTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdE15TWVtYmVyc2hpcFRpZXJzV2l0aE1lbWJlcnNPbmx5Q2hhdFBlcmsgPSAoc3RhdGU6IFN0YXRlLCBjaGFubmVsSWQ6IHN0cmluZykgPT4ge1xuICBjb25zdCBtZW1iZXJzaGlwVGllcnM6IE1lbWJlcnNoaXBUaWVycyA9IHNlbGVjdE1lbWJlcnNoaXBUaWVyc0ZvckNoYW5uZWxJZChzdGF0ZSwgY2hhbm5lbElkKTtcblxuICBpZiAoIW1lbWJlcnNoaXBUaWVycykgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IHBlcmtOYW1lID0gJ01lbWJlcnMtb25seSBjaGF0JztcblxuICBjb25zdCB0aWVyczogTWVtYmVyc2hpcFRpZXJzID0gbWVtYmVyc2hpcFRpZXJzLmZpbHRlcigobWVtYmVyc2hpcFRpZXI6IE1lbWJlcnNoaXBUaWVyKSA9PiB7XG4gICAgcmV0dXJuIG1lbWJlcnNoaXBUaWVyLlBlcmtzICYmIG1lbWJlcnNoaXBUaWVyLlBlcmtzLnNvbWUoKHBlcms6IE1lbWJlcnNoaXBQZXJrKSA9PiBwZXJrLm5hbWUgPT09IHBlcmtOYW1lKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHRpZXJzO1xufTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdE1lbWJlcnNoaXBUaWVySWRzV2l0aE1lbWJlcnNPbmx5Q2hhdFBlcmsgPSAoc3RhdGU6IFN0YXRlLCBjaGFubmVsSWQ6IHN0cmluZykgPT4ge1xuICBjb25zdCBtZW1iZXJzaGlwczogTWVtYmVyc2hpcFRpZXJzID0gc2VsZWN0TXlNZW1iZXJzaGlwVGllcnNXaXRoTWVtYmVyc09ubHlDaGF0UGVyayhzdGF0ZSwgY2hhbm5lbElkKTtcbiAgY29uc3QgbWVtYmVyc2hpcElkczogQXJyYXk8bnVtYmVyPiA9IG1lbWJlcnNoaXBzLm1hcCgobWVtYmVyc2hpcDogTWVtYmVyc2hpcFRpZXIpID0+IG1lbWJlcnNoaXAuTWVtYmVyc2hpcC5pZCk7XG5cbiAgcmV0dXJuIG1lbWJlcnNoaXBJZHM7XG59O1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0SWZVbmF1dGhvcml6ZWRGb3JDb250ZW50ID0gKHN0YXRlOiBTdGF0ZSwgY2hhbm5lbElkOiBzdHJpbmcsIGNsYWltSWQ6IHN0cmluZywgdXJpOiBzdHJpbmcpID0+IHtcbiAgLy8gVE9ETzogYWRkIGEgY2hlY2sgZm9yIGNsYWltSXNNaW5lIGhlcmVcbiAgY29uc3QgcHJvdGVjdGVkTWVtYmVyc2hpcElkc0ZvckNsYWltID0gc2VsZWN0UHJvdGVjdGVkQ29udGVudE1lbWJlcnNoaXBzRm9yQ2xhaW1JZChzdGF0ZSwgY2hhbm5lbElkLCBjbGFpbUlkKTtcbiAgY29uc3QgbXlWYWxpZE1lbWJlcnNoaXBJZHMgPSBzZWxlY3RNeVZhbGlkTWVtYmVyc2hpcElkcyhzdGF0ZSk7XG4gIGNvbnN0IHByb3RlY3RlZENvbnRlbnRUYWcgPSBzZWxlY3RQcm90ZWN0ZWRDb250ZW50VGFnRm9yVXJpKHN0YXRlLCB1cmkpO1xuXG4gIGNvbnN0IGlzQW5BdXRob3JpemVkTWVtYmVyID1cbiAgICBwcm90ZWN0ZWRNZW1iZXJzaGlwSWRzRm9yQ2xhaW0gJiZcbiAgICBteVZhbGlkTWVtYmVyc2hpcElkcyAmJlxuICAgIHByb3RlY3RlZE1lbWJlcnNoaXBJZHNGb3JDbGFpbS5maWx0ZXIoKG0pID0+IG15VmFsaWRNZW1iZXJzaGlwSWRzLmluY2x1ZGVzKG0pKS5sZW5ndGg7XG5cbiAgY29uc3QgaXNOb3RBdXRob3JpemVkRm9yUHJvdGVjdGVkQ29udGVudCA9IHByb3RlY3RlZENvbnRlbnRUYWcgJiYgIWlzQW5BdXRob3JpemVkTWVtYmVyO1xuXG4gIHJldHVybiBpc05vdEF1dGhvcml6ZWRGb3JQcm90ZWN0ZWRDb250ZW50IHx8IGZhbHNlO1xufTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdElmQ2hhbm5lbEhhc01lbWJlcnNoaXBUaWVycyA9IChzdGF0ZTogU3RhdGUsIGNoYW5uZWxJZDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IG1lbWJlcnNoaXBzID0gc2VsZWN0TWVtYmVyc2hpcFRpZXJzRm9yQ2hhbm5lbElkKHN0YXRlLCBjaGFubmVsSWQpO1xuXG4gIHJldHVybiBtZW1iZXJzaGlwcyAmJiBtZW1iZXJzaGlwcy5sZW5ndGg7XG59O1xuIl0sIm1hcHBpbmdzIjoiQUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBVEE7QUFZQTtBQUdBO0FBQ0E7QUFEQTtBQUhBO0FBT0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBVEE7QUFZQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBV0E7QUFDQTtBQUNBO0FBbEJBO0FBc0JBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBTEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUpBO0FBQ0E7QUFDQTtBQVdBO0FBYkE7QUFnQkE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFEQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQWxCQTtBQW9CQTtBQXBCQTtBQXNCQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBREE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFYQTtBQWVBO0FBQ0E7QUFDQTtBQUVBO0FBSkE7QUFPQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBRkE7QUFLQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBSUE7QUFKQTtBQVRBO0FBa0JBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFWQTtBQWNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFFQTtBQUhBO0FBTUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQURBO0FBSUE7QUFYQTtBQWNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFEQTtBQUlBO0FBWEE7QUFjQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBREE7QUFJQTtBQVhBO0FBY0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBSkE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBRUE7QUFFQTtBQWJBO0FBZ0JBO0FBQ0E7QUFFQTtBQUhBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../ui/redux/selectors/memberships.js\n");

/***/ })

})