webpackHotUpdate("ui-202210030702",{

/***/ "../ui/component/app/view.jsx":
/*!************************************!*\
  !*** ../ui/component/app/view.jsx ***!
  \************************************/
/*! exports provided: MAIN_WRAPPER_CLASS, IS_MAC, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(__) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MAIN_WRAPPER_CLASS\", function() { return MAIN_WRAPPER_CLASS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"IS_MAC\", function() { return IS_MAC; });\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! constants/pages */ \"../ui/constants/pages.js\");\n/* harmony import */ var constants_pages__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(constants_pages__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var util_lazyImport__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! util/lazyImport */ \"../ui/util/lazyImport.js\");\n/* harmony import */ var util_tus__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! util/tus */ \"../ui/util/tus.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! analytics */ \"../ui/analytics.js\");\n/* harmony import */ var redux_actions_search__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! redux/actions/search */ \"../ui/redux/actions/search.js\");\n/* harmony import */ var util_lbryURI__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! util/lbryURI */ \"../ui/util/lbryURI.js\");\n/* harmony import */ var util_url__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! util/url */ \"../ui/util/url.js\");\n/* harmony import */ var component_router_index__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! component/router/index */ \"../ui/component/router/index.js\");\n/* harmony import */ var modal_modalRouter__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! modal/modalRouter */ \"../ui/modal/modalRouter/index.js\");\n/* harmony import */ var react_modal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-modal */ \"../node_modules/react-modal/lib/index.js\");\n/* harmony import */ var react_modal__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_modal__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var util_enhanced_layout__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! util/enhanced-layout */ \"../ui/util/enhanced-layout.js\");\n/* harmony import */ var component_yrbl__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! component/yrbl */ \"../ui/component/yrbl/index.jsx\");\n/* harmony import */ var component_fileRenderFloating__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! component/fileRenderFloating */ \"../ui/component/fileRenderFloating/index.js\");\n/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react-router */ \"../node_modules/react-router/esm/react-router.js\");\n/* harmony import */ var effects_use_previous__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! effects/use-previous */ \"../ui/effects/use-previous.js\");\n/* harmony import */ var component_nag__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! component/nag */ \"../ui/component/nag/index.js\");\n/* harmony import */ var rewards__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rewards */ \"../ui/rewards.js\");\n/* harmony import */ var effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! effects/use-persisted-state */ \"../ui/effects/use-persisted-state.js\");\n/* harmony import */ var effects_use_connection_status__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! effects/use-connection-status */ \"../ui/effects/use-connection-status.js\");\n/* harmony import */ var component_spinner__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! component/spinner */ \"../ui/component/spinner/index.js\");\n/* harmony import */ var constants_languages__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! constants/languages */ \"../ui/constants/languages.js\");\n/* harmony import */ var util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! util/beforeUnload */ \"../ui/util/beforeUnload.js\");\n/* harmony import */ var web_component_adBlockTester__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! web/component/adBlockTester */ \"./component/adBlockTester/index.js\");\n/* harmony import */ var web_component_adsSticky__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! web/component/adsSticky */ \"./component/adsSticky/index.js\");\n/* harmony import */ var web_component_youtubeReferralWelcome__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! web/component/youtubeReferralWelcome */ \"./component/youtubeReferralWelcome/index.js\");\n/* harmony import */ var web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! web/effects/use-degraded-performance */ \"./effects/use-degraded-performance.js\");\n/* harmony import */ var constants_language_migrations__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! constants/language-migrations */ \"../ui/constants/language-migrations.js\");\n/* harmony import */ var effects_use_screensize__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! effects/use-screensize */ \"../ui/effects/use-screensize.js\");\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // import useAdOutbrain from 'effects/use-ad-outbrain';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar FileDrop = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | fileDrop */ \"fileDrop\").then(__webpack_require__.bind(null, /*! component/fileDrop */ \"../ui/component/fileDrop/index.js\"));\n});\nvar NagContinueFirstRun = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | nagCFR */ \"nagCFR\").then(__webpack_require__.bind(null, /*! component/nagContinueFirstRun */ \"../ui/component/nagContinueFirstRun/index.js\"));\n});\nvar NagDegradedPerformance = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | NagDegradedPerformance */ \"NagDegradedPerformance\").then(__webpack_require__.bind(null, /*! web/component/nag-degraded-performance */ \"./component/nag-degraded-performance.jsx\"));\n});\nvar NagNoUser = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | nag-no-user */ \"nag-no-user\").then(__webpack_require__.bind(null, /*! web/component/nag-no-user */ \"./component/nag-no-user.jsx\"));\n});\nvar NagSunset = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | nag-sunset */ \"nag-sunset\").then(__webpack_require__.bind(null, /*! web/component/nag-sunset */ \"./component/nag-sunset.jsx\"));\n});\nvar SyncFatalError = Object(util_lazyImport__WEBPACK_IMPORTED_MODULE_2__[\"lazyImport\"])(function () {\n  return __webpack_require__.e(/*! import() | syncFatalError */ \"syncFatalError\").then(__webpack_require__.bind(null, /*! component/syncFatalError */ \"../ui/component/syncFatalError/index.js\"));\n}); // ****************************************************************************\n\nvar MAIN_WRAPPER_CLASS = 'main-wrapper';\nvar IS_MAC = navigator.userAgent.indexOf('Mac OS X') !== -1; // const imaLibraryPath = 'https://imasdk.googleapis.com/js/sdkloader/ima3.js';\n\nvar oneTrustScriptSrc = 'https://cdn.cookielaw.org/scripttemplates/otSDKStub.js';\nvar LATEST_PATH = \"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"LATEST\"], \"/\");\nvar LIVE_PATH = \"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"LIVE_NOW\"], \"/\");\nvar EMBED_PATH = \"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"EMBED\"], \"/\");\n\nfunction App(props) {\n  var theme = props.theme,\n      user = props.user,\n      locale = props.locale,\n      location = props.location,\n      fetchChannelListMine = props.fetchChannelListMine,\n      fetchCollectionListMine = props.fetchCollectionListMine,\n      signIn = props.signIn,\n      isReloadRequired = props.isReloadRequired,\n      uploadCount = props.uploadCount,\n      history = props.history,\n      syncError = props.syncError,\n      syncIsLocked = props.syncIsLocked,\n      prefsReady = props.prefsReady,\n      language = props.language,\n      languages = props.languages,\n      setLanguage = props.setLanguage,\n      fetchLanguage = props.fetchLanguage,\n      rewards = props.rewards,\n      doUserSetReferrer = props.doUserSetReferrer,\n      isAuthenticated = props.isAuthenticated,\n      syncLoop = props.syncLoop,\n      currentModal = props.currentModal,\n      syncFatalError = props.syncFatalError,\n      myChannelClaimIds = props.myChannelClaimIds,\n      activeChannelClaim = props.activeChannelClaim,\n      setIncognito = props.setIncognito,\n      fetchModBlockedList = props.fetchModBlockedList,\n      fetchModAmIList = props.fetchModAmIList,\n      defaultChannelClaim = props.defaultChannelClaim,\n      nagsShown = props.nagsShown,\n      announcement = props.announcement,\n      doOpenAnnouncements = props.doOpenAnnouncements,\n      doSetLastViewedAnnouncement = props.doSetLastViewedAnnouncement,\n      doSetDefaultChannel = props.doSetDefaultChannel,\n      doSetGdprConsentList = props.doSetGdprConsentList;\n  var isMobile = Object(effects_use_screensize__WEBPACK_IMPORTED_MODULE_28__[\"useIsMobile\"])();\n  var isEnhancedLayout = Object(util_enhanced_layout__WEBPACK_IMPORTED_MODULE_11__[\"default\"])();\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasSignedIn = _useState2[0],\n      setHasSignedIn = _useState2[1];\n\n  var hasVerifiedEmail = user && Boolean(user.has_verified_email);\n  var isRewardApproved = user && user.is_reward_approved;\n  var previousHasVerifiedEmail = Object(effects_use_previous__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(hasVerifiedEmail);\n  var previousRewardApproved = Object(effects_use_previous__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(isRewardApproved);\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_26__[\"STATUS_OK\"]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      lbryTvApiStatus = _useState4[0],\n      setLbryTvApiStatus = _useState4[1]; // const [sidebarOpen] = usePersistedState('sidebar', false);\n\n\n  var pathname = location.pathname,\n      hash = location.hash,\n      search = location.search,\n      hostname = location.hostname;\n\n  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      retryingSync = _useState6[0],\n      setRetryingSync = _useState6[1];\n\n  var _useState7 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      langRenderKey = _useState8[0],\n      setLangRenderKey = _useState8[1];\n\n  var _usePersistedState = Object(effects_use_persisted_state__WEBPACK_IMPORTED_MODULE_18__[\"default\"])('lbrytv-sunset', false),\n      _usePersistedState2 = _slicedToArray(_usePersistedState, 2),\n      seenSunsestMessage = _usePersistedState2[0],\n      setSeenSunsetMessage = _usePersistedState2[1]; // referral claiming\n\n\n  var referredRewardAvailable = rewards && rewards.some(function (reward) {\n    return reward.reward_type === rewards__WEBPACK_IMPORTED_MODULE_17__[\"default\"].TYPE_REFEREE;\n  });\n  var urlParams = new URLSearchParams(search);\n  var rawReferrerParam = urlParams.get('r');\n  var fromLbrytvParam = urlParams.get('sunset');\n  var sanitizedReferrerParam = rawReferrerParam && rawReferrerParam.replace(':', '#');\n  var embedPath = pathname.startsWith(EMBED_PATH);\n  var shouldHideNag = embedPath || pathname.startsWith(\"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"AUTH_VERIFY\"]));\n  var userId = user && user.id;\n  var hasMyChannels = myChannelClaimIds && myChannelClaimIds.length > 0;\n  var hasNoChannels = myChannelClaimIds && myChannelClaimIds.length === 0;\n  var shouldMigrateLanguage = constants_language_migrations__WEBPACK_IMPORTED_MODULE_27__[\"default\"][language];\n  var renderFiledrop = !isMobile && isAuthenticated;\n  var connectionStatus = Object(effects_use_connection_status__WEBPACK_IMPORTED_MODULE_19__[\"default\"])();\n  var urlPath = pathname + hash;\n  var latestContentPath = urlPath.startsWith(LATEST_PATH);\n  var liveContentPath = urlPath.startsWith(LIVE_PATH);\n  var featureParam = urlParams.get('feature');\n  var embedLatestPath = embedPath && (featureParam === constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"LATEST\"] || featureParam === constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"LIVE_NOW\"]);\n  var isNewestPath = latestContentPath || liveContentPath || embedLatestPath;\n  var path;\n\n  if (isNewestPath) {\n    path = urlPath.replace(embedLatestPath ? EMBED_PATH : latestContentPath ? LATEST_PATH : LIVE_PATH, '');\n  } else {\n    // Remove the leading \"/\" added by the browser\n    path = urlPath.slice(1);\n  }\n\n  path = path.replace(/:/g, '#');\n\n  if (isNewestPath && !path.startsWith('@')) {\n    path = \"@\".concat(path);\n  }\n\n  if (search && search.startsWith('?q=cache:')) {\n    Object(util_url__WEBPACK_IMPORTED_MODULE_7__[\"generateGoogleCacheUrl\"])(search, path);\n  }\n\n  var uri;\n\n  try {\n    // here queryString and startTime are \"removed\" from the buildURI process\n    // to build only the uri itself\n    var _parseURI = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_6__[\"parseURI\"])(path),\n        queryString = _parseURI.queryString,\n        startTime = _parseURI.startTime,\n        parsedUri = _objectWithoutProperties(_parseURI, [\"queryString\", \"startTime\"]);\n\n    uri = Object(util_lbryURI__WEBPACK_IMPORTED_MODULE_6__[\"buildURI\"])(_objectSpread({}, parsedUri));\n  } catch (e) {\n    var match = path.match(/[#/:]/);\n\n    if (!path.startsWith('$/') && match && match.index) {\n      uri = \"lbry://\".concat(path.slice(0, match.index));\n    }\n  }\n\n  function getStatusNag() {\n    // Handle \"offline\" first. Everything else is meaningless if it's offline.\n    if (!connectionStatus.online) {\n      return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_nag__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n        type: \"helpful\",\n        message: __('You are offline. Check your internet connection.')\n      });\n    } // Only 1 nag is possible, so show the most important:\n\n\n    if (user === null) {\n      return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(NagNoUser, null);\n    }\n\n    if (lbryTvApiStatus === web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_26__[\"STATUS_DEGRADED\"] || lbryTvApiStatus === web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_26__[\"STATUS_FAILING\"]) {\n      if (!shouldHideNag) {\n        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(NagDegradedPerformance, {\n          onClose: function onClose() {\n            return setLbryTvApiStatus(web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_26__[\"STATUS_OK\"]);\n          }\n        });\n      }\n    }\n\n    if (syncFatalError) {\n      if (!retryingSync) {\n        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_nag__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n          type: \"error\",\n          message: __('Failed to synchronize settings. Wait a while before retrying.'),\n          actionText: __('Retry'),\n          onClick: function onClick() {\n            syncLoop(true);\n            setRetryingSync(true);\n            setTimeout(function () {\n              return setRetryingSync(false);\n            }, 4000);\n          }\n        });\n      }\n    } else if (isReloadRequired) {\n      return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_nag__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n        message: __('A new version of Odysee is available.'),\n        actionText: __('Refresh'),\n        onClick: function onClick() {\n          return window.location.reload();\n        }\n      });\n    }\n  }\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (userId) {\n      analytics__WEBPACK_IMPORTED_MODULE_4__[\"default\"].setUser(userId);\n      Object(redux_actions_search__WEBPACK_IMPORTED_MODULE_5__[\"setSearchUserId\"])(userId);\n    }\n  }, [userId]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (syncIsLocked) {\n      var msg = 'There are unsaved settings. Exit the Settings Page to finalize them.';\n\n      var handleBeforeUnload = function handleBeforeUnload(event) {\n        event.preventDefault();\n        event.returnValue = msg;\n      };\n\n      util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"BeforeUnload\"].register(handleBeforeUnload, msg);\n      return function () {\n        return util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"BeforeUnload\"].unregister(handleBeforeUnload);\n      };\n    }\n  }, [syncIsLocked]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!uploadCount) return;\n    var msg = 'Unfinished uploads.';\n\n    var handleUnload = function handleUnload(event) {\n      return Object(util_tus__WEBPACK_IMPORTED_MODULE_3__[\"tusUnlockAndNotify\"])();\n    };\n\n    var handleBeforeUnload = function handleBeforeUnload(event) {\n      event.preventDefault();\n      event.returnValue = __(msg); // without setting this to something it doesn't work in some browsers.\n    };\n\n    util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"Unload\"].register(handleUnload);\n    util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"BeforeUnload\"].register(handleBeforeUnload, msg);\n    return function () {\n      util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"Unload\"].unregister(handleUnload);\n      util_beforeUnload__WEBPACK_IMPORTED_MODULE_22__[\"BeforeUnload\"].unregister(handleBeforeUnload);\n    };\n  }, [uploadCount]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!uploadCount) return;\n\n    var onStorageUpdate = function onStorageUpdate(e) {\n      return Object(util_tus__WEBPACK_IMPORTED_MODULE_3__[\"tusHandleTabUpdates\"])(e.key);\n    };\n\n    window.addEventListener('storage', onStorageUpdate);\n    return function () {\n      return window.removeEventListener('storage', onStorageUpdate);\n    };\n  }, [uploadCount]); // allows user to pause miniplayer using the spacebar without the page scrolling down\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    var handleKeyPress = function handleKeyPress(e) {\n      if (e.key === ' ' && e.target === document.body) {\n        e.preventDefault();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyPress);\n    return function () {\n      return window.removeEventListener('keydown', handleKeyPress);\n    };\n  }, []);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (referredRewardAvailable && sanitizedReferrerParam) {\n      doUserSetReferrer(sanitizedReferrerParam);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [sanitizedReferrerParam, referredRewardAvailable]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {}, [fetchChannelListMine, fetchCollectionListMine]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // $FlowFixMe\n    document.documentElement.setAttribute('theme', theme);\n  }, [theme]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // $FlowFixMe\n    document.body.style.overflowY = currentModal ? 'hidden' : '';\n  }, [currentModal]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (hasNoChannels) {\n      setIncognito(true);\n    }\n\n    if (hasMyChannels) {\n      fetchModBlockedList();\n      fetchModAmIList();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [hasMyChannels, hasNoChannels, setIncognito]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (hasMyChannels && activeChannelClaim && !defaultChannelClaim && prefsReady) {\n      doSetDefaultChannel(activeChannelClaim.claim_id);\n    }\n  }, [activeChannelClaim, defaultChannelClaim, doSetDefaultChannel, hasMyChannels, prefsReady]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // $FlowFixMe\n    document.documentElement.setAttribute('lang', language);\n  }, [language]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!languages.includes(language)) {\n      fetchLanguage(language);\n\n      if (document && document.documentElement && constants_languages__WEBPACK_IMPORTED_MODULE_21__[\"default\"][language].length >= 3) {\n        document.documentElement.dir = constants_languages__WEBPACK_IMPORTED_MODULE_21__[\"default\"][language][2];\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [language, languages]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (shouldMigrateLanguage) {\n      setLanguage(shouldMigrateLanguage);\n    }\n  }, [shouldMigrateLanguage, setLanguage]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // Check that previousHasVerifiedEmail was not undefined instead of just not truthy\n    // This ensures we don't fire the emailVerified event on the initial user fetch\n    if (previousHasVerifiedEmail === false && hasVerifiedEmail) {\n      analytics__WEBPACK_IMPORTED_MODULE_4__[\"default\"].event.emailVerified();\n    }\n  }, [previousHasVerifiedEmail, hasVerifiedEmail, signIn]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (previousRewardApproved === false && isRewardApproved) {\n      analytics__WEBPACK_IMPORTED_MODULE_4__[\"default\"].event.rewardEligible();\n    }\n  }, [previousRewardApproved, isRewardApproved]); // Load IMA3 SDK for aniview\n  // useEffect(() => {\n  //   if (!isAuthenticated && SHOW_ADS) {\n  //     const script = document.createElement('script');\n  //     script.src = imaLibraryPath;\n  //     script.async = true;\n  //     // $FlowFixMe\n  //     document.body.appendChild(script);\n  //     return () => {\n  //       // $FlowFixMe\n  //       document.body.removeChild(script);\n  //     };\n  //   }\n  // }, []);\n  // add OneTrust script\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // don't add script for embedded content\n    function inIframe() {\n      try {\n        return window.self !== window.top;\n      } catch (e) {\n        return true;\n      }\n    }\n\n    if (inIframe() || !locale || !locale.gdpr_required || window.cordova) {\n      return;\n    } // $FlowFixMe\n\n\n    var useProductionOneTrust =  false && false;\n    var script = document.createElement('script');\n    script.src = oneTrustScriptSrc;\n    script.setAttribute('charset', 'UTF-8');\n\n    if (useProductionOneTrust) {\n      script.setAttribute('data-domain-script', '8a792d84-50a5-4b69-b080-6954ad4d4606');\n    } else {\n      script.setAttribute('data-domain-script', '8a792d84-50a5-4b69-b080-6954ad4d4606-test');\n    }\n\n    var secondScript = document.createElement('script'); // OneTrust asks to add this\n\n    secondScript.innerHTML = 'function OptanonWrapper() { window.gdprCallback() }';\n\n    window.gdprCallback = function () {\n      doSetGdprConsentList(window.OnetrustActiveGroups);\n\n      if (window.OnetrustActiveGroups.indexOf('C0002') !== -1) {\n        var ad = document.getElementsByClassName('OUTBRAIN')[0];\n        if (ad && !window.nagsShown) ad.classList.add('VISIBLE');\n      }\n    }; // $FlowFixMe\n\n\n    document.head.appendChild(script); // $FlowFixMe\n\n    document.head.appendChild(secondScript);\n    return function () {\n      try {\n        // $FlowFixMe\n        document.head.removeChild(script); // $FlowFixMe\n\n        document.head.removeChild(secondScript);\n      } catch (err) {// eslint-disable-next-line no-console\n        // console.log(err); <-- disabling this ... it's clogging up Sentry logs.\n      }\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps -- one time after locale is fetched\n  }, [locale]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    window.nagsShown = nagsShown;\n\n    if (nagsShown) {\n      var ad = document.getElementsByClassName('VISIBLE')[0];\n      if (ad) ad.classList.remove('VISIBLE');\n    } else {\n      var _ad = document.getElementsByClassName('OUTBRAIN')[0];\n      if (_ad) _ad.classList.add('VISIBLE');\n    }\n  }, [nagsShown]); // ready for sync syncs, however after signin when hasVerifiedEmail, that syncs too.\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    // signInSyncPref is cleared after sharedState loop.\n    var syncLoopWithoutInterval = function syncLoopWithoutInterval() {\n      return syncLoop(true);\n    };\n\n    if (hasSignedIn && hasVerifiedEmail) {\n      // In case we are syncing.\n      syncLoop();\n      window.addEventListener('focus', syncLoopWithoutInterval);\n    }\n\n    return function () {\n      window.removeEventListener('focus', syncLoopWithoutInterval);\n    };\n  }, [hasSignedIn, hasVerifiedEmail, syncLoop]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (syncError && isAuthenticated && !pathname.includes(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"AUTH_WALLET_PASSWORD\"]) && !currentModal) {\n      history.push(\"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"AUTH_WALLET_PASSWORD\"], \"?redirect=\").concat(pathname));\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [syncError, pathname, isAuthenticated]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (prefsReady && isAuthenticated && (pathname === '/' || pathname === \"/$/\".concat(constants_pages__WEBPACK_IMPORTED_MODULE_0__[\"HELP\"])) && announcement !== '') {\n      doOpenAnnouncements();\n    }\n  }, [announcement, isAuthenticated, pathname, prefsReady]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    window.clearLastViewedAnnouncement = function () {\n      console.log('Clearing history. Please wait ...'); // eslint-disable-line no-console\n\n      doSetLastViewedAnnouncement('clear');\n    };\n  }, []); // Keep this at the end to ensure initial setup effects are run first\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!hasSignedIn && hasVerifiedEmail) {\n      signIn();\n      setHasSignedIn(true);\n    }\n  }, [hasVerifiedEmail, signIn, hasSignedIn]);\n  Object(web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_26__[\"useDegradedPerformance\"])(setLbryTvApiStatus, user); // useAdOutbrain(Boolean(hasPremiumPlus), isAuthenticated, history?.location?.pathname);\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!syncIsLocked) {\n      // When language is changed or translations are fetched, we render.\n      setLangRenderKey(Date.now());\n    } // eslint-disable-next-line react-hooks/exhaustive-deps -- don't respond to syncIsLocked, but skip action when locked.\n\n  }, [language, languages]);\n  var appRef = react__WEBPACK_IMPORTED_MODULE_1___default.a.useCallback(function (wrapperElement) {\n    if (wrapperElement) {\n      react_modal__WEBPACK_IMPORTED_MODULE_10___default.a.setAppElement(wrapperElement);\n    }\n  }, []); // Require an internal-api user on lbry.tv\n  // This also prevents the site from loading in the un-authed state while we wait for internal-apis to return for the first time\n  // It's not needed on desktop since there is no un-authed state\n\n  if (user === undefined) {\n    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n      className: \"main--empty\"\n    }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_spinner__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n      delayed: true\n    }));\n  }\n\n  if (connectionStatus.online && lbryTvApiStatus === web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_26__[\"STATUS_DOWN\"]) {\n    // TODO: Rename `SyncFatalError` since it has nothing to do with syncing.\n    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Suspense, {\n      fallback: null\n    }, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(SyncFatalError, {\n      lbryTvApiStatus: lbryTvApiStatus\n    }));\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"div\", {\n    className: MAIN_WRAPPER_CLASS,\n    ref: appRef,\n    key: langRenderKey\n  }, lbryTvApiStatus === web_effects_use_degraded_performance__WEBPACK_IMPORTED_MODULE_26__[\"STATUS_DOWN\"] ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_yrbl__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n    className: \"main--empty\",\n    title: __('odysee.com is currently down'),\n    subtitle: __('My wheel broke, but the good news is that someone from LBRY is working on it.')\n  }) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(web_component_adBlockTester__WEBPACK_IMPORTED_MODULE_23__[\"default\"], null), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_router_index__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n    uri: uri\n  }), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(modal_modalRouter__WEBPACK_IMPORTED_MODULE_9__[\"default\"], null), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Suspense, {\n    fallback: null\n  }, renderFiledrop && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(FileDrop, null)), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_fileRenderFloating__WEBPACK_IMPORTED_MODULE_13__[\"default\"], null), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Suspense, {\n    fallback: null\n  }, isEnhancedLayout && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(component_yrbl__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n    className: \"yrbl--enhanced\"\n  }), react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(web_component_youtubeReferralWelcome__WEBPACK_IMPORTED_MODULE_25__[\"default\"], null), !shouldHideNag && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(NagContinueFirstRun, null), fromLbrytvParam && !seenSunsestMessage && !shouldHideNag && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(NagSunset, {\n    email: hasVerifiedEmail,\n    onClose: function onClose() {\n      return setSeenSunsetMessage(true);\n    }\n  }), getStatusNag())));\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_router__WEBPACK_IMPORTED_MODULE_14__[\"withRouter\"])(App));\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! i18n.js */ \"../ui/i18n.js\")[\"__\"]))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vdWkvY29tcG9uZW50L2FwcC92aWV3LmpzeC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi91aS9jb21wb25lbnQvYXBwL3ZpZXcuanN4P2JkNzgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcbmltcG9ydCAqIGFzIFBBR0VTIGZyb20gJ2NvbnN0YW50cy9wYWdlcyc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGxhenlJbXBvcnQgfSBmcm9tICd1dGlsL2xhenlJbXBvcnQnO1xuaW1wb3J0IHsgdHVzVW5sb2NrQW5kTm90aWZ5LCB0dXNIYW5kbGVUYWJVcGRhdGVzIH0gZnJvbSAndXRpbC90dXMnO1xuaW1wb3J0IGFuYWx5dGljcyBmcm9tICdhbmFseXRpY3MnO1xuaW1wb3J0IHsgc2V0U2VhcmNoVXNlcklkIH0gZnJvbSAncmVkdXgvYWN0aW9ucy9zZWFyY2gnO1xuaW1wb3J0IHsgcGFyc2VVUkksIGJ1aWxkVVJJIH0gZnJvbSAndXRpbC9sYnJ5VVJJJztcbmltcG9ydCB7IGdlbmVyYXRlR29vZ2xlQ2FjaGVVcmwgfSBmcm9tICd1dGlsL3VybCc7XG5pbXBvcnQgUm91dGVyIGZyb20gJ2NvbXBvbmVudC9yb3V0ZXIvaW5kZXgnO1xuaW1wb3J0IE1vZGFsUm91dGVyIGZyb20gJ21vZGFsL21vZGFsUm91dGVyJztcbmltcG9ydCBSZWFjdE1vZGFsIGZyb20gJ3JlYWN0LW1vZGFsJztcbmltcG9ydCB1c2VLb25hbWlMaXN0ZW5lciBmcm9tICd1dGlsL2VuaGFuY2VkLWxheW91dCc7XG5pbXBvcnQgWXJibCBmcm9tICdjb21wb25lbnQveXJibCc7XG5pbXBvcnQgRmlsZVJlbmRlckZsb2F0aW5nIGZyb20gJ2NvbXBvbmVudC9maWxlUmVuZGVyRmxvYXRpbmcnO1xuaW1wb3J0IHsgd2l0aFJvdXRlciB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XG4vLyBpbXBvcnQgdXNlQWRPdXRicmFpbiBmcm9tICdlZmZlY3RzL3VzZS1hZC1vdXRicmFpbic7XG5pbXBvcnQgdXNlUHJldmlvdXMgZnJvbSAnZWZmZWN0cy91c2UtcHJldmlvdXMnO1xuaW1wb3J0IE5hZyBmcm9tICdjb21wb25lbnQvbmFnJztcbmltcG9ydCBSRVdBUkRTIGZyb20gJ3Jld2FyZHMnO1xuaW1wb3J0IHVzZVBlcnNpc3RlZFN0YXRlIGZyb20gJ2VmZmVjdHMvdXNlLXBlcnNpc3RlZC1zdGF0ZSc7XG5pbXBvcnQgdXNlQ29ubmVjdGlvblN0YXR1cyBmcm9tICdlZmZlY3RzL3VzZS1jb25uZWN0aW9uLXN0YXR1cyc7XG5pbXBvcnQgU3Bpbm5lciBmcm9tICdjb21wb25lbnQvc3Bpbm5lcic7XG5pbXBvcnQgTEFOR1VBR0VTIGZyb20gJ2NvbnN0YW50cy9sYW5ndWFnZXMnO1xuaW1wb3J0IHsgQmVmb3JlVW5sb2FkLCBVbmxvYWQgfSBmcm9tICd1dGlsL2JlZm9yZVVubG9hZCc7XG5pbXBvcnQgQWRCbG9ja1Rlc3RlciBmcm9tICd3ZWIvY29tcG9uZW50L2FkQmxvY2tUZXN0ZXInO1xuaW1wb3J0IEFkc1N0aWNreSBmcm9tICd3ZWIvY29tcG9uZW50L2Fkc1N0aWNreSc7XG5pbXBvcnQgWW91dHViZVdlbGNvbWUgZnJvbSAnd2ViL2NvbXBvbmVudC95b3V0dWJlUmVmZXJyYWxXZWxjb21lJztcbmltcG9ydCB7XG4gIHVzZURlZ3JhZGVkUGVyZm9ybWFuY2UsXG4gIFNUQVRVU19PSyxcbiAgU1RBVFVTX0RFR1JBREVELFxuICBTVEFUVVNfRkFJTElORyxcbiAgU1RBVFVTX0RPV04sXG59IGZyb20gJ3dlYi9lZmZlY3RzL3VzZS1kZWdyYWRlZC1wZXJmb3JtYW5jZSc7XG5pbXBvcnQgTEFOR1VBR0VfTUlHUkFUSU9OUyBmcm9tICdjb25zdGFudHMvbGFuZ3VhZ2UtbWlncmF0aW9ucyc7XG5pbXBvcnQgeyB1c2VJc01vYmlsZSB9IGZyb20gJ2VmZmVjdHMvdXNlLXNjcmVlbnNpemUnO1xuXG5jb25zdCBGaWxlRHJvcCA9IGxhenlJbXBvcnQoKCkgPT4gaW1wb3J0KCdjb21wb25lbnQvZmlsZURyb3AnIC8qIHdlYnBhY2tDaHVua05hbWU6IFwiZmlsZURyb3BcIiAqLykpO1xuY29uc3QgTmFnQ29udGludWVGaXJzdFJ1biA9IGxhenlJbXBvcnQoKCkgPT4gaW1wb3J0KCdjb21wb25lbnQvbmFnQ29udGludWVGaXJzdFJ1bicgLyogd2VicGFja0NodW5rTmFtZTogXCJuYWdDRlJcIiAqLykpO1xuY29uc3QgTmFnRGVncmFkZWRQZXJmb3JtYW5jZSA9IGxhenlJbXBvcnQoKCkgPT5cbiAgaW1wb3J0KCd3ZWIvY29tcG9uZW50L25hZy1kZWdyYWRlZC1wZXJmb3JtYW5jZScgLyogd2VicGFja0NodW5rTmFtZTogXCJOYWdEZWdyYWRlZFBlcmZvcm1hbmNlXCIgKi8pXG4pO1xuY29uc3QgTmFnTm9Vc2VyID0gbGF6eUltcG9ydCgoKSA9PiBpbXBvcnQoJ3dlYi9jb21wb25lbnQvbmFnLW5vLXVzZXInIC8qIHdlYnBhY2tDaHVua05hbWU6IFwibmFnLW5vLXVzZXJcIiAqLykpO1xuY29uc3QgTmFnU3Vuc2V0ID0gbGF6eUltcG9ydCgoKSA9PiBpbXBvcnQoJ3dlYi9jb21wb25lbnQvbmFnLXN1bnNldCcgLyogd2VicGFja0NodW5rTmFtZTogXCJuYWctc3Vuc2V0XCIgKi8pKTtcbmNvbnN0IFN5bmNGYXRhbEVycm9yID0gbGF6eUltcG9ydCgoKSA9PiBpbXBvcnQoJ2NvbXBvbmVudC9zeW5jRmF0YWxFcnJvcicgLyogd2VicGFja0NodW5rTmFtZTogXCJzeW5jRmF0YWxFcnJvclwiICovKSk7XG5cbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuZXhwb3J0IGNvbnN0IE1BSU5fV1JBUFBFUl9DTEFTUyA9ICdtYWluLXdyYXBwZXInO1xuZXhwb3J0IGNvbnN0IElTX01BQyA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignTWFjIE9TIFgnKSAhPT0gLTE7XG5cbi8vIGNvbnN0IGltYUxpYnJhcnlQYXRoID0gJ2h0dHBzOi8vaW1hc2RrLmdvb2dsZWFwaXMuY29tL2pzL3Nka2xvYWRlci9pbWEzLmpzJztcbmNvbnN0IG9uZVRydXN0U2NyaXB0U3JjID0gJ2h0dHBzOi8vY2RuLmNvb2tpZWxhdy5vcmcvc2NyaXB0dGVtcGxhdGVzL290U0RLU3R1Yi5qcyc7XG5cbmNvbnN0IExBVEVTVF9QQVRIID0gYC8kLyR7UEFHRVMuTEFURVNUfS9gO1xuY29uc3QgTElWRV9QQVRIID0gYC8kLyR7UEFHRVMuTElWRV9OT1d9L2A7XG5jb25zdCBFTUJFRF9QQVRIID0gYC8kLyR7UEFHRVMuRU1CRUR9L2A7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIGxhbmd1YWdlOiBzdHJpbmcsXG4gIGxhbmd1YWdlczogQXJyYXk8c3RyaW5nPixcbiAgdGhlbWU6IHN0cmluZyxcbiAgdXNlcjogP3sgaWQ6IHN0cmluZywgaGFzX3ZlcmlmaWVkX2VtYWlsOiBib29sZWFuLCBpc19yZXdhcmRfYXBwcm92ZWQ6IGJvb2xlYW4gfSxcbiAgbG9jYWxlOiA/TG9jYWxlSW5mbyxcbiAgbG9jYXRpb246IHsgcGF0aG5hbWU6IHN0cmluZywgaGFzaDogc3RyaW5nLCBzZWFyY2g6IHN0cmluZywgaG9zdG5hbWU6IHN0cmluZywgcmVsb2FkOiAoKSA9PiB2b2lkIH0sXG4gIGhpc3Rvcnk6IHsgcHVzaDogKHN0cmluZykgPT4gdm9pZCwgbG9jYXRpb246IHsgcGF0aG5hbWU6IHN0cmluZyB9LCByZXBsYWNlOiAoc3RyaW5nKSA9PiB2b2lkIH0sXG4gIGZldGNoQ2hhbm5lbExpc3RNaW5lOiAoKSA9PiB2b2lkLFxuICBmZXRjaENvbGxlY3Rpb25MaXN0TWluZTogKCkgPT4gdm9pZCxcbiAgc2lnbkluOiAoKSA9PiB2b2lkLFxuICBzZXRMYW5ndWFnZTogKHN0cmluZykgPT4gdm9pZCxcbiAgZmV0Y2hMYW5ndWFnZTogKHN0cmluZykgPT4gdm9pZCxcbiAgaXNSZWxvYWRSZXF1aXJlZDogYm9vbGVhbixcbiAgdXBsb2FkQ291bnQ6IG51bWJlcixcbiAgYmFsYW5jZTogP251bWJlcixcbiAgc3luY0lzTG9ja2VkOiBib29sZWFuLFxuICBzeW5jRXJyb3I6ID9zdHJpbmcsXG4gIHByZWZzUmVhZHk6IGJvb2xlYW4sXG4gIHJld2FyZHM6IEFycmF5PFJld2FyZD4sXG4gIGRvVXNlclNldFJlZmVycmVyOiAocmVmZXJyZXJVcmk6IHN0cmluZykgPT4gdm9pZCxcbiAgaXNBdXRoZW50aWNhdGVkOiBib29sZWFuLFxuICBzeW5jTG9vcDogKD9ib29sZWFuKSA9PiB2b2lkLFxuICBjdXJyZW50TW9kYWw6IGFueSxcbiAgc3luY0ZhdGFsRXJyb3I6IGJvb2xlYW4sXG4gIGFjdGl2ZUNoYW5uZWxDbGFpbTogP0NoYW5uZWxDbGFpbSxcbiAgbXlDaGFubmVsQ2xhaW1JZHM6ID9BcnJheTxzdHJpbmc+LFxuICAvLyBoYXNQcmVtaXVtUGx1czogP2Jvb2xlYW4sXG4gIHNldEluY29nbml0bzogKGJvb2xlYW4pID0+IHZvaWQsXG4gIGZldGNoTW9kQmxvY2tlZExpc3Q6ICgpID0+IHZvaWQsXG4gIGZldGNoTW9kQW1JTGlzdDogKCkgPT4gdm9pZCxcbiAgaG9tZXBhZ2VGZXRjaGVkOiBib29sZWFuLFxuICBkZWZhdWx0Q2hhbm5lbENsYWltOiA/YW55LFxuICBuYWdzU2hvd246IGJvb2xlYW4sXG4gIGFubm91bmNlbWVudDogc3RyaW5nLFxuICBkb09wZW5Bbm5vdW5jZW1lbnRzOiAoKSA9PiB2b2lkLFxuICBkb1NldExhc3RWaWV3ZWRBbm5vdW5jZW1lbnQ6IChoYXNoOiBzdHJpbmcpID0+IHZvaWQsXG4gIGRvU2V0RGVmYXVsdENoYW5uZWw6IChjbGFpbUlkOiBzdHJpbmcpID0+IHZvaWQsXG4gIGRvU2V0R2RwckNvbnNlbnRMaXN0OiAoY3N2OiBzdHJpbmcpID0+IHZvaWQsXG59O1xuXG5mdW5jdGlvbiBBcHAocHJvcHM6IFByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICB0aGVtZSxcbiAgICB1c2VyLFxuICAgIGxvY2FsZSxcbiAgICBsb2NhdGlvbixcbiAgICBmZXRjaENoYW5uZWxMaXN0TWluZSxcbiAgICBmZXRjaENvbGxlY3Rpb25MaXN0TWluZSxcbiAgICBzaWduSW4sXG4gICAgaXNSZWxvYWRSZXF1aXJlZCxcbiAgICB1cGxvYWRDb3VudCxcbiAgICBoaXN0b3J5LFxuICAgIHN5bmNFcnJvcixcbiAgICBzeW5jSXNMb2NrZWQsXG4gICAgcHJlZnNSZWFkeSxcbiAgICBsYW5ndWFnZSxcbiAgICBsYW5ndWFnZXMsXG4gICAgc2V0TGFuZ3VhZ2UsXG4gICAgZmV0Y2hMYW5ndWFnZSxcbiAgICByZXdhcmRzLFxuICAgIGRvVXNlclNldFJlZmVycmVyLFxuICAgIGlzQXV0aGVudGljYXRlZCxcbiAgICBzeW5jTG9vcCxcbiAgICBjdXJyZW50TW9kYWwsXG4gICAgc3luY0ZhdGFsRXJyb3IsXG4gICAgbXlDaGFubmVsQ2xhaW1JZHMsXG4gICAgYWN0aXZlQ2hhbm5lbENsYWltLFxuICAgIHNldEluY29nbml0byxcbiAgICBmZXRjaE1vZEJsb2NrZWRMaXN0LFxuICAgIC8vIGhhc1ByZW1pdW1QbHVzLFxuICAgIGZldGNoTW9kQW1JTGlzdCxcbiAgICBkZWZhdWx0Q2hhbm5lbENsYWltLFxuICAgIG5hZ3NTaG93bixcbiAgICBhbm5vdW5jZW1lbnQsXG4gICAgZG9PcGVuQW5ub3VuY2VtZW50cyxcbiAgICBkb1NldExhc3RWaWV3ZWRBbm5vdW5jZW1lbnQsXG4gICAgZG9TZXREZWZhdWx0Q2hhbm5lbCxcbiAgICBkb1NldEdkcHJDb25zZW50TGlzdCxcbiAgfSA9IHByb3BzO1xuXG4gIGNvbnN0IGlzTW9iaWxlID0gdXNlSXNNb2JpbGUoKTtcbiAgY29uc3QgaXNFbmhhbmNlZExheW91dCA9IHVzZUtvbmFtaUxpc3RlbmVyKCk7XG4gIGNvbnN0IFtoYXNTaWduZWRJbiwgc2V0SGFzU2lnbmVkSW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBoYXNWZXJpZmllZEVtYWlsID0gdXNlciAmJiBCb29sZWFuKHVzZXIuaGFzX3ZlcmlmaWVkX2VtYWlsKTtcbiAgY29uc3QgaXNSZXdhcmRBcHByb3ZlZCA9IHVzZXIgJiYgdXNlci5pc19yZXdhcmRfYXBwcm92ZWQ7XG4gIGNvbnN0IHByZXZpb3VzSGFzVmVyaWZpZWRFbWFpbCA9IHVzZVByZXZpb3VzKGhhc1ZlcmlmaWVkRW1haWwpO1xuICBjb25zdCBwcmV2aW91c1Jld2FyZEFwcHJvdmVkID0gdXNlUHJldmlvdXMoaXNSZXdhcmRBcHByb3ZlZCk7XG5cbiAgY29uc3QgW2xicnlUdkFwaVN0YXR1cywgc2V0TGJyeVR2QXBpU3RhdHVzXSA9IHVzZVN0YXRlKFNUQVRVU19PSyk7XG4gIC8vIGNvbnN0IFtzaWRlYmFyT3Blbl0gPSB1c2VQZXJzaXN0ZWRTdGF0ZSgnc2lkZWJhcicsIGZhbHNlKTtcblxuICBjb25zdCB7IHBhdGhuYW1lLCBoYXNoLCBzZWFyY2gsIGhvc3RuYW1lIH0gPSBsb2NhdGlvbjtcbiAgY29uc3QgW3JldHJ5aW5nU3luYywgc2V0UmV0cnlpbmdTeW5jXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xhbmdSZW5kZXJLZXksIHNldExhbmdSZW5kZXJLZXldID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFtzZWVuU3Vuc2VzdE1lc3NhZ2UsIHNldFNlZW5TdW5zZXRNZXNzYWdlXSA9IHVzZVBlcnNpc3RlZFN0YXRlKCdsYnJ5dHYtc3Vuc2V0JywgZmFsc2UpO1xuICAvLyByZWZlcnJhbCBjbGFpbWluZ1xuICBjb25zdCByZWZlcnJlZFJld2FyZEF2YWlsYWJsZSA9IHJld2FyZHMgJiYgcmV3YXJkcy5zb21lKChyZXdhcmQpID0+IHJld2FyZC5yZXdhcmRfdHlwZSA9PT0gUkVXQVJEUy5UWVBFX1JFRkVSRUUpO1xuICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHNlYXJjaCk7XG4gIGNvbnN0IHJhd1JlZmVycmVyUGFyYW0gPSB1cmxQYXJhbXMuZ2V0KCdyJyk7XG4gIGNvbnN0IGZyb21MYnJ5dHZQYXJhbSA9IHVybFBhcmFtcy5nZXQoJ3N1bnNldCcpO1xuICBjb25zdCBzYW5pdGl6ZWRSZWZlcnJlclBhcmFtID0gcmF3UmVmZXJyZXJQYXJhbSAmJiByYXdSZWZlcnJlclBhcmFtLnJlcGxhY2UoJzonLCAnIycpO1xuICBjb25zdCBlbWJlZFBhdGggPSBwYXRobmFtZS5zdGFydHNXaXRoKEVNQkVEX1BBVEgpO1xuICBjb25zdCBzaG91bGRIaWRlTmFnID0gZW1iZWRQYXRoIHx8IHBhdGhuYW1lLnN0YXJ0c1dpdGgoYC8kLyR7UEFHRVMuQVVUSF9WRVJJRll9YCk7XG4gIGNvbnN0IHVzZXJJZCA9IHVzZXIgJiYgdXNlci5pZDtcbiAgY29uc3QgaGFzTXlDaGFubmVscyA9IG15Q2hhbm5lbENsYWltSWRzICYmIG15Q2hhbm5lbENsYWltSWRzLmxlbmd0aCA+IDA7XG4gIGNvbnN0IGhhc05vQ2hhbm5lbHMgPSBteUNoYW5uZWxDbGFpbUlkcyAmJiBteUNoYW5uZWxDbGFpbUlkcy5sZW5ndGggPT09IDA7XG4gIGNvbnN0IHNob3VsZE1pZ3JhdGVMYW5ndWFnZSA9IExBTkdVQUdFX01JR1JBVElPTlNbbGFuZ3VhZ2VdO1xuICBjb25zdCByZW5kZXJGaWxlZHJvcCA9ICFpc01vYmlsZSAmJiBpc0F1dGhlbnRpY2F0ZWQ7XG4gIGNvbnN0IGNvbm5lY3Rpb25TdGF0dXMgPSB1c2VDb25uZWN0aW9uU3RhdHVzKCk7XG5cbiAgY29uc3QgdXJsUGF0aCA9IHBhdGhuYW1lICsgaGFzaDtcbiAgY29uc3QgbGF0ZXN0Q29udGVudFBhdGggPSB1cmxQYXRoLnN0YXJ0c1dpdGgoTEFURVNUX1BBVEgpO1xuICBjb25zdCBsaXZlQ29udGVudFBhdGggPSB1cmxQYXRoLnN0YXJ0c1dpdGgoTElWRV9QQVRIKTtcbiAgY29uc3QgZmVhdHVyZVBhcmFtID0gdXJsUGFyYW1zLmdldCgnZmVhdHVyZScpO1xuICBjb25zdCBlbWJlZExhdGVzdFBhdGggPSBlbWJlZFBhdGggJiYgKGZlYXR1cmVQYXJhbSA9PT0gUEFHRVMuTEFURVNUIHx8IGZlYXR1cmVQYXJhbSA9PT0gUEFHRVMuTElWRV9OT1cpO1xuICBjb25zdCBpc05ld2VzdFBhdGggPSBsYXRlc3RDb250ZW50UGF0aCB8fCBsaXZlQ29udGVudFBhdGggfHwgZW1iZWRMYXRlc3RQYXRoO1xuXG4gIGxldCBwYXRoO1xuICBpZiAoaXNOZXdlc3RQYXRoKSB7XG4gICAgcGF0aCA9IHVybFBhdGgucmVwbGFjZShlbWJlZExhdGVzdFBhdGggPyBFTUJFRF9QQVRIIDogbGF0ZXN0Q29udGVudFBhdGggPyBMQVRFU1RfUEFUSCA6IExJVkVfUEFUSCwgJycpO1xuICB9IGVsc2Uge1xuICAgIC8vIFJlbW92ZSB0aGUgbGVhZGluZyBcIi9cIiBhZGRlZCBieSB0aGUgYnJvd3NlclxuICAgIHBhdGggPSB1cmxQYXRoLnNsaWNlKDEpO1xuICB9XG4gIHBhdGggPSBwYXRoLnJlcGxhY2UoLzovZywgJyMnKTtcblxuICBpZiAoaXNOZXdlc3RQYXRoICYmICFwYXRoLnN0YXJ0c1dpdGgoJ0AnKSkge1xuICAgIHBhdGggPSBgQCR7cGF0aH1gO1xuICB9XG5cbiAgaWYgKHNlYXJjaCAmJiBzZWFyY2guc3RhcnRzV2l0aCgnP3E9Y2FjaGU6JykpIHtcbiAgICBnZW5lcmF0ZUdvb2dsZUNhY2hlVXJsKHNlYXJjaCwgcGF0aCk7XG4gIH1cblxuICBsZXQgdXJpO1xuICB0cnkge1xuICAgIC8vIGhlcmUgcXVlcnlTdHJpbmcgYW5kIHN0YXJ0VGltZSBhcmUgXCJyZW1vdmVkXCIgZnJvbSB0aGUgYnVpbGRVUkkgcHJvY2Vzc1xuICAgIC8vIHRvIGJ1aWxkIG9ubHkgdGhlIHVyaSBpdHNlbGZcbiAgICBjb25zdCB7IHF1ZXJ5U3RyaW5nLCBzdGFydFRpbWUsIC4uLnBhcnNlZFVyaSB9ID0gcGFyc2VVUkkocGF0aCk7XG4gICAgdXJpID0gYnVpbGRVUkkoeyAuLi5wYXJzZWRVcmkgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zdCBtYXRjaCA9IHBhdGgubWF0Y2goL1sjLzpdLyk7XG5cbiAgICBpZiAoIXBhdGguc3RhcnRzV2l0aCgnJC8nKSAmJiBtYXRjaCAmJiBtYXRjaC5pbmRleCkge1xuICAgICAgdXJpID0gYGxicnk6Ly8ke3BhdGguc2xpY2UoMCwgbWF0Y2guaW5kZXgpfWA7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0U3RhdHVzTmFnKCkge1xuICAgIC8vIEhhbmRsZSBcIm9mZmxpbmVcIiBmaXJzdC4gRXZlcnl0aGluZyBlbHNlIGlzIG1lYW5pbmdsZXNzIGlmIGl0J3Mgb2ZmbGluZS5cbiAgICBpZiAoIWNvbm5lY3Rpb25TdGF0dXMub25saW5lKSB7XG4gICAgICByZXR1cm4gPE5hZyB0eXBlPVwiaGVscGZ1bFwiIG1lc3NhZ2U9e19fKCdZb3UgYXJlIG9mZmxpbmUuIENoZWNrIHlvdXIgaW50ZXJuZXQgY29ubmVjdGlvbi4nKX0gLz47XG4gICAgfVxuXG4gICAgLy8gT25seSAxIG5hZyBpcyBwb3NzaWJsZSwgc28gc2hvdyB0aGUgbW9zdCBpbXBvcnRhbnQ6XG5cbiAgICBpZiAodXNlciA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIDxOYWdOb1VzZXIgLz47XG4gICAgfVxuXG4gICAgaWYgKGxicnlUdkFwaVN0YXR1cyA9PT0gU1RBVFVTX0RFR1JBREVEIHx8IGxicnlUdkFwaVN0YXR1cyA9PT0gU1RBVFVTX0ZBSUxJTkcpIHtcbiAgICAgIGlmICghc2hvdWxkSGlkZU5hZykge1xuICAgICAgICByZXR1cm4gPE5hZ0RlZ3JhZGVkUGVyZm9ybWFuY2Ugb25DbG9zZT17KCkgPT4gc2V0TGJyeVR2QXBpU3RhdHVzKFNUQVRVU19PSyl9IC8+O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzeW5jRmF0YWxFcnJvcikge1xuICAgICAgaWYgKCFyZXRyeWluZ1N5bmMpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8TmFnXG4gICAgICAgICAgICB0eXBlPVwiZXJyb3JcIlxuICAgICAgICAgICAgbWVzc2FnZT17X18oJ0ZhaWxlZCB0byBzeW5jaHJvbml6ZSBzZXR0aW5ncy4gV2FpdCBhIHdoaWxlIGJlZm9yZSByZXRyeWluZy4nKX1cbiAgICAgICAgICAgIGFjdGlvblRleHQ9e19fKCdSZXRyeScpfVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICBzeW5jTG9vcCh0cnVlKTtcbiAgICAgICAgICAgICAgc2V0UmV0cnlpbmdTeW5jKHRydWUpO1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHNldFJldHJ5aW5nU3luYyhmYWxzZSksIDQwMDApO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNSZWxvYWRSZXF1aXJlZCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPE5hZ1xuICAgICAgICAgIG1lc3NhZ2U9e19fKCdBIG5ldyB2ZXJzaW9uIG9mIE9keXNlZSBpcyBhdmFpbGFibGUuJyl9XG4gICAgICAgICAgYWN0aW9uVGV4dD17X18oJ1JlZnJlc2gnKX1cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCl9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHVzZXJJZCkge1xuICAgICAgYW5hbHl0aWNzLnNldFVzZXIodXNlcklkKTtcbiAgICAgIHNldFNlYXJjaFVzZXJJZCh1c2VySWQpO1xuICAgIH1cbiAgfSwgW3VzZXJJZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN5bmNJc0xvY2tlZCkge1xuICAgICAgY29uc3QgbXNnID0gJ1RoZXJlIGFyZSB1bnNhdmVkIHNldHRpbmdzLiBFeGl0IHRoZSBTZXR0aW5ncyBQYWdlIHRvIGZpbmFsaXplIHRoZW0uJztcbiAgICAgIGNvbnN0IGhhbmRsZUJlZm9yZVVubG9hZCA9IChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IG1zZztcbiAgICAgIH07XG5cbiAgICAgIEJlZm9yZVVubG9hZC5yZWdpc3RlcihoYW5kbGVCZWZvcmVVbmxvYWQsIG1zZyk7XG4gICAgICByZXR1cm4gKCkgPT4gQmVmb3JlVW5sb2FkLnVucmVnaXN0ZXIoaGFuZGxlQmVmb3JlVW5sb2FkKTtcbiAgICB9XG4gIH0sIFtzeW5jSXNMb2NrZWRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdXBsb2FkQ291bnQpIHJldHVybjtcblxuICAgIGNvbnN0IG1zZyA9ICdVbmZpbmlzaGVkIHVwbG9hZHMuJztcbiAgICBjb25zdCBoYW5kbGVVbmxvYWQgPSAoZXZlbnQpID0+IHR1c1VubG9ja0FuZE5vdGlmeSgpO1xuICAgIGNvbnN0IGhhbmRsZUJlZm9yZVVubG9hZCA9IChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gX18obXNnKTsgLy8gd2l0aG91dCBzZXR0aW5nIHRoaXMgdG8gc29tZXRoaW5nIGl0IGRvZXNuJ3Qgd29yayBpbiBzb21lIGJyb3dzZXJzLlxuICAgIH07XG5cbiAgICBVbmxvYWQucmVnaXN0ZXIoaGFuZGxlVW5sb2FkKTtcbiAgICBCZWZvcmVVbmxvYWQucmVnaXN0ZXIoaGFuZGxlQmVmb3JlVW5sb2FkLCBtc2cpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIFVubG9hZC51bnJlZ2lzdGVyKGhhbmRsZVVubG9hZCk7XG4gICAgICBCZWZvcmVVbmxvYWQudW5yZWdpc3RlcihoYW5kbGVCZWZvcmVVbmxvYWQpO1xuICAgIH07XG4gIH0sIFt1cGxvYWRDb3VudF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF1cGxvYWRDb3VudCkgcmV0dXJuO1xuXG4gICAgY29uc3Qgb25TdG9yYWdlVXBkYXRlID0gKGUpID0+IHR1c0hhbmRsZVRhYlVwZGF0ZXMoZS5rZXkpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgb25TdG9yYWdlVXBkYXRlKTtcblxuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIG9uU3RvcmFnZVVwZGF0ZSk7XG4gIH0sIFt1cGxvYWRDb3VudF0pO1xuXG4gIC8vIGFsbG93cyB1c2VyIHRvIHBhdXNlIG1pbmlwbGF5ZXIgdXNpbmcgdGhlIHNwYWNlYmFyIHdpdGhvdXQgdGhlIHBhZ2Ugc2Nyb2xsaW5nIGRvd25cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVLZXlQcmVzcyA9IChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICcgJyAmJiBlLnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleVByZXNzKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlQcmVzcyk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChyZWZlcnJlZFJld2FyZEF2YWlsYWJsZSAmJiBzYW5pdGl6ZWRSZWZlcnJlclBhcmFtKSB7XG4gICAgICBkb1VzZXJTZXRSZWZlcnJlcihzYW5pdGl6ZWRSZWZlcnJlclBhcmFtKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbc2FuaXRpemVkUmVmZXJyZXJQYXJhbSwgcmVmZXJyZWRSZXdhcmRBdmFpbGFibGVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICB9LCBbZmV0Y2hDaGFubmVsTGlzdE1pbmUsIGZldGNoQ29sbGVjdGlvbkxpc3RNaW5lXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyAkRmxvd0ZpeE1lXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgndGhlbWUnLCB0aGVtZSk7XG4gIH0sIFt0aGVtZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gJEZsb3dGaXhNZVxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3dZID0gY3VycmVudE1vZGFsID8gJ2hpZGRlbicgOiAnJztcbiAgfSwgW2N1cnJlbnRNb2RhbF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGhhc05vQ2hhbm5lbHMpIHtcbiAgICAgIHNldEluY29nbml0byh0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAoaGFzTXlDaGFubmVscykge1xuICAgICAgZmV0Y2hNb2RCbG9ja2VkTGlzdCgpO1xuICAgICAgZmV0Y2hNb2RBbUlMaXN0KCk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW2hhc015Q2hhbm5lbHMsIGhhc05vQ2hhbm5lbHMsIHNldEluY29nbml0b10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGhhc015Q2hhbm5lbHMgJiYgYWN0aXZlQ2hhbm5lbENsYWltICYmICFkZWZhdWx0Q2hhbm5lbENsYWltICYmIHByZWZzUmVhZHkpIHtcbiAgICAgIGRvU2V0RGVmYXVsdENoYW5uZWwoYWN0aXZlQ2hhbm5lbENsYWltLmNsYWltX2lkKTtcbiAgICB9XG4gIH0sIFthY3RpdmVDaGFubmVsQ2xhaW0sIGRlZmF1bHRDaGFubmVsQ2xhaW0sIGRvU2V0RGVmYXVsdENoYW5uZWwsIGhhc015Q2hhbm5lbHMsIHByZWZzUmVhZHldKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vICRGbG93Rml4TWVcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdsYW5nJywgbGFuZ3VhZ2UpO1xuICB9LCBbbGFuZ3VhZ2VdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghbGFuZ3VhZ2VzLmluY2x1ZGVzKGxhbmd1YWdlKSkge1xuICAgICAgZmV0Y2hMYW5ndWFnZShsYW5ndWFnZSk7XG5cbiAgICAgIGlmIChkb2N1bWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgTEFOR1VBR0VTW2xhbmd1YWdlXS5sZW5ndGggPj0gMykge1xuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZGlyID0gTEFOR1VBR0VTW2xhbmd1YWdlXVsyXTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbbGFuZ3VhZ2UsIGxhbmd1YWdlc10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNob3VsZE1pZ3JhdGVMYW5ndWFnZSkge1xuICAgICAgc2V0TGFuZ3VhZ2Uoc2hvdWxkTWlncmF0ZUxhbmd1YWdlKTtcbiAgICB9XG4gIH0sIFtzaG91bGRNaWdyYXRlTGFuZ3VhZ2UsIHNldExhbmd1YWdlXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBDaGVjayB0aGF0IHByZXZpb3VzSGFzVmVyaWZpZWRFbWFpbCB3YXMgbm90IHVuZGVmaW5lZCBpbnN0ZWFkIG9mIGp1c3Qgbm90IHRydXRoeVxuICAgIC8vIFRoaXMgZW5zdXJlcyB3ZSBkb24ndCBmaXJlIHRoZSBlbWFpbFZlcmlmaWVkIGV2ZW50IG9uIHRoZSBpbml0aWFsIHVzZXIgZmV0Y2hcbiAgICBpZiAocHJldmlvdXNIYXNWZXJpZmllZEVtYWlsID09PSBmYWxzZSAmJiBoYXNWZXJpZmllZEVtYWlsKSB7XG4gICAgICBhbmFseXRpY3MuZXZlbnQuZW1haWxWZXJpZmllZCgpO1xuICAgIH1cbiAgfSwgW3ByZXZpb3VzSGFzVmVyaWZpZWRFbWFpbCwgaGFzVmVyaWZpZWRFbWFpbCwgc2lnbkluXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocHJldmlvdXNSZXdhcmRBcHByb3ZlZCA9PT0gZmFsc2UgJiYgaXNSZXdhcmRBcHByb3ZlZCkge1xuICAgICAgYW5hbHl0aWNzLmV2ZW50LnJld2FyZEVsaWdpYmxlKCk7XG4gICAgfVxuICB9LCBbcHJldmlvdXNSZXdhcmRBcHByb3ZlZCwgaXNSZXdhcmRBcHByb3ZlZF0pO1xuXG4gIC8vIExvYWQgSU1BMyBTREsgZm9yIGFuaXZpZXdcbiAgLy8gdXNlRWZmZWN0KCgpID0+IHtcbiAgLy8gICBpZiAoIWlzQXV0aGVudGljYXRlZCAmJiBTSE9XX0FEUykge1xuICAvLyAgICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gIC8vICAgICBzY3JpcHQuc3JjID0gaW1hTGlicmFyeVBhdGg7XG4gIC8vICAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuICAvLyAgICAgLy8gJEZsb3dGaXhNZVxuICAvLyAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAvLyAgICAgcmV0dXJuICgpID0+IHtcbiAgLy8gICAgICAgLy8gJEZsb3dGaXhNZVxuICAvLyAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gIC8vICAgICB9O1xuICAvLyAgIH1cbiAgLy8gfSwgW10pO1xuXG5cbiAgLy8gYWRkIE9uZVRydXN0IHNjcmlwdFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIGRvbid0IGFkZCBzY3JpcHQgZm9yIGVtYmVkZGVkIGNvbnRlbnRcbiAgICBmdW5jdGlvbiBpbklmcmFtZSgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB3aW5kb3cuc2VsZiAhPT0gd2luZG93LnRvcDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGluSWZyYW1lKCkgfHwgIWxvY2FsZSB8fCAhbG9jYWxlLmdkcHJfcmVxdWlyZWQgfHwgd2luZG93LmNvcmRvdmEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAkRmxvd0ZpeE1lXG4gICAgY29uc3QgdXNlUHJvZHVjdGlvbk9uZVRydXN0ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyAmJiBob3N0bmFtZSA9PT0gJ29keXNlZS5jb20nO1xuXG4gICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgc2NyaXB0LnNyYyA9IG9uZVRydXN0U2NyaXB0U3JjO1xuICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ2NoYXJzZXQnLCAnVVRGLTgnKTtcbiAgICBpZiAodXNlUHJvZHVjdGlvbk9uZVRydXN0KSB7XG4gICAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdkYXRhLWRvbWFpbi1zY3JpcHQnLCAnOGE3OTJkODQtNTBhNS00YjY5LWIwODAtNjk1NGFkNGQ0NjA2Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZG9tYWluLXNjcmlwdCcsICc4YTc5MmQ4NC01MGE1LTRiNjktYjA4MC02OTU0YWQ0ZDQ2MDYtdGVzdCcpO1xuICAgIH1cblxuICAgIGNvbnN0IHNlY29uZFNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgIC8vIE9uZVRydXN0IGFza3MgdG8gYWRkIHRoaXNcbiAgICBzZWNvbmRTY3JpcHQuaW5uZXJIVE1MID0gJ2Z1bmN0aW9uIE9wdGFub25XcmFwcGVyKCkgeyB3aW5kb3cuZ2RwckNhbGxiYWNrKCkgfSc7XG5cbiAgICB3aW5kb3cuZ2RwckNhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgZG9TZXRHZHByQ29uc2VudExpc3Qod2luZG93Lk9uZXRydXN0QWN0aXZlR3JvdXBzKTtcbiAgICAgIGlmICh3aW5kb3cuT25ldHJ1c3RBY3RpdmVHcm91cHMuaW5kZXhPZignQzAwMDInKSAhPT0gLTEpIHtcbiAgICAgICAgY29uc3QgYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdPVVRCUkFJTicpWzBdO1xuICAgICAgICBpZiAoYWQgJiYgIXdpbmRvdy5uYWdzU2hvd24pIGFkLmNsYXNzTGlzdC5hZGQoJ1ZJU0lCTEUnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gJEZsb3dGaXhNZVxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAvLyAkRmxvd0ZpeE1lXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzZWNvbmRTY3JpcHQpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgIGRvY3VtZW50LmhlYWQucmVtb3ZlQ2hpbGQoc2Vjb25kU2NyaXB0KTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhlcnIpOyA8LS0gZGlzYWJsaW5nIHRoaXMgLi4uIGl0J3MgY2xvZ2dpbmcgdXAgU2VudHJ5IGxvZ3MuXG4gICAgICB9XG4gICAgfTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzIC0tIG9uZSB0aW1lIGFmdGVyIGxvY2FsZSBpcyBmZXRjaGVkXG4gIH0sIFtsb2NhbGVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHdpbmRvdy5uYWdzU2hvd24gPSBuYWdzU2hvd247XG4gICAgaWYgKG5hZ3NTaG93bikge1xuICAgICAgY29uc3QgYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdWSVNJQkxFJylbMF07XG4gICAgICBpZiAoYWQpIGFkLmNsYXNzTGlzdC5yZW1vdmUoJ1ZJU0lCTEUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdPVVRCUkFJTicpWzBdO1xuICAgICAgaWYgKGFkKSBhZC5jbGFzc0xpc3QuYWRkKCdWSVNJQkxFJyk7XG4gICAgfVxuICB9LCBbbmFnc1Nob3duXSk7XG5cbiAgLy8gcmVhZHkgZm9yIHN5bmMgc3luY3MsIGhvd2V2ZXIgYWZ0ZXIgc2lnbmluIHdoZW4gaGFzVmVyaWZpZWRFbWFpbCwgdGhhdCBzeW5jcyB0b28uXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gc2lnbkluU3luY1ByZWYgaXMgY2xlYXJlZCBhZnRlciBzaGFyZWRTdGF0ZSBsb29wLlxuICAgIGNvbnN0IHN5bmNMb29wV2l0aG91dEludGVydmFsID0gKCkgPT4gc3luY0xvb3AodHJ1ZSk7XG4gICAgaWYgKGhhc1NpZ25lZEluICYmIGhhc1ZlcmlmaWVkRW1haWwpIHtcbiAgICAgIC8vIEluIGNhc2Ugd2UgYXJlIHN5bmNpbmcuXG4gICAgICBzeW5jTG9vcCgpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgc3luY0xvb3BXaXRob3V0SW50ZXJ2YWwpO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgc3luY0xvb3BXaXRob3V0SW50ZXJ2YWwpO1xuICAgIH07XG4gIH0sIFtoYXNTaWduZWRJbiwgaGFzVmVyaWZpZWRFbWFpbCwgc3luY0xvb3BdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzeW5jRXJyb3IgJiYgaXNBdXRoZW50aWNhdGVkICYmICFwYXRobmFtZS5pbmNsdWRlcyhQQUdFUy5BVVRIX1dBTExFVF9QQVNTV09SRCkgJiYgIWN1cnJlbnRNb2RhbCkge1xuICAgICAgaGlzdG9yeS5wdXNoKGAvJC8ke1BBR0VTLkFVVEhfV0FMTEVUX1BBU1NXT1JEfT9yZWRpcmVjdD0ke3BhdGhuYW1lfWApO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFtzeW5jRXJyb3IsIHBhdGhuYW1lLCBpc0F1dGhlbnRpY2F0ZWRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChwcmVmc1JlYWR5ICYmIGlzQXV0aGVudGljYXRlZCAmJiAocGF0aG5hbWUgPT09ICcvJyB8fCBwYXRobmFtZSA9PT0gYC8kLyR7UEFHRVMuSEVMUH1gKSAmJiBhbm5vdW5jZW1lbnQgIT09ICcnKSB7XG4gICAgICBkb09wZW5Bbm5vdW5jZW1lbnRzKCk7XG4gICAgfVxuICB9LCBbYW5ub3VuY2VtZW50LCBpc0F1dGhlbnRpY2F0ZWQsIHBhdGhuYW1lLCBwcmVmc1JlYWR5XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB3aW5kb3cuY2xlYXJMYXN0Vmlld2VkQW5ub3VuY2VtZW50ID0gKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0NsZWFyaW5nIGhpc3RvcnkuIFBsZWFzZSB3YWl0IC4uLicpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGRvU2V0TGFzdFZpZXdlZEFubm91bmNlbWVudCgnY2xlYXInKTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gS2VlcCB0aGlzIGF0IHRoZSBlbmQgdG8gZW5zdXJlIGluaXRpYWwgc2V0dXAgZWZmZWN0cyBhcmUgcnVuIGZpcnN0XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFoYXNTaWduZWRJbiAmJiBoYXNWZXJpZmllZEVtYWlsKSB7XG4gICAgICBzaWduSW4oKTtcbiAgICAgIHNldEhhc1NpZ25lZEluKHRydWUpO1xuICAgIH1cbiAgfSwgW2hhc1ZlcmlmaWVkRW1haWwsIHNpZ25JbiwgaGFzU2lnbmVkSW5dKTtcblxuICB1c2VEZWdyYWRlZFBlcmZvcm1hbmNlKHNldExicnlUdkFwaVN0YXR1cywgdXNlcik7XG5cbiAgLy8gdXNlQWRPdXRicmFpbihCb29sZWFuKGhhc1ByZW1pdW1QbHVzKSwgaXNBdXRoZW50aWNhdGVkLCBoaXN0b3J5Py5sb2NhdGlvbj8ucGF0aG5hbWUpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFzeW5jSXNMb2NrZWQpIHtcbiAgICAgIC8vIFdoZW4gbGFuZ3VhZ2UgaXMgY2hhbmdlZCBvciB0cmFuc2xhdGlvbnMgYXJlIGZldGNoZWQsIHdlIHJlbmRlci5cbiAgICAgIHNldExhbmdSZW5kZXJLZXkoRGF0ZS5ub3coKSk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHMgLS0gZG9uJ3QgcmVzcG9uZCB0byBzeW5jSXNMb2NrZWQsIGJ1dCBza2lwIGFjdGlvbiB3aGVuIGxvY2tlZC5cbiAgfSwgW2xhbmd1YWdlLCBsYW5ndWFnZXNdKTtcblxuICBjb25zdCBhcHBSZWYgPSBSZWFjdC51c2VDYWxsYmFjaygod3JhcHBlckVsZW1lbnQpID0+IHtcbiAgICBpZiAod3JhcHBlckVsZW1lbnQpIHtcbiAgICAgIFJlYWN0TW9kYWwuc2V0QXBwRWxlbWVudCh3cmFwcGVyRWxlbWVudCk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8gUmVxdWlyZSBhbiBpbnRlcm5hbC1hcGkgdXNlciBvbiBsYnJ5LnR2XG4gIC8vIFRoaXMgYWxzbyBwcmV2ZW50cyB0aGUgc2l0ZSBmcm9tIGxvYWRpbmcgaW4gdGhlIHVuLWF1dGhlZCBzdGF0ZSB3aGlsZSB3ZSB3YWl0IGZvciBpbnRlcm5hbC1hcGlzIHRvIHJldHVybiBmb3IgdGhlIGZpcnN0IHRpbWVcbiAgLy8gSXQncyBub3QgbmVlZGVkIG9uIGRlc2t0b3Agc2luY2UgdGhlcmUgaXMgbm8gdW4tYXV0aGVkIHN0YXRlXG4gIGlmICh1c2VyID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYWluLS1lbXB0eVwiPlxuICAgICAgICA8U3Bpbm5lciBkZWxheWVkIC8+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgaWYgKGNvbm5lY3Rpb25TdGF0dXMub25saW5lICYmIGxicnlUdkFwaVN0YXR1cyA9PT0gU1RBVFVTX0RPV04pIHtcbiAgICAvLyBUT0RPOiBSZW5hbWUgYFN5bmNGYXRhbEVycm9yYCBzaW5jZSBpdCBoYXMgbm90aGluZyB0byBkbyB3aXRoIHN5bmNpbmcuXG4gICAgcmV0dXJuIChcbiAgICAgIDxSZWFjdC5TdXNwZW5zZSBmYWxsYmFjaz17bnVsbH0+XG4gICAgICAgIDxTeW5jRmF0YWxFcnJvciBsYnJ5VHZBcGlTdGF0dXM9e2xicnlUdkFwaVN0YXR1c30gLz5cbiAgICAgIDwvUmVhY3QuU3VzcGVuc2U+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e01BSU5fV1JBUFBFUl9DTEFTU30gcmVmPXthcHBSZWZ9IGtleT17bGFuZ1JlbmRlcktleX0+XG4gICAgICB7bGJyeVR2QXBpU3RhdHVzID09PSBTVEFUVVNfRE9XTiA/IChcbiAgICAgICAgPFlyYmxcbiAgICAgICAgICBjbGFzc05hbWU9XCJtYWluLS1lbXB0eVwiXG4gICAgICAgICAgdGl0bGU9e19fKCdvZHlzZWUuY29tIGlzIGN1cnJlbnRseSBkb3duJyl9XG4gICAgICAgICAgc3VidGl0bGU9e19fKCdNeSB3aGVlbCBicm9rZSwgYnV0IHRoZSBnb29kIG5ld3MgaXMgdGhhdCBzb21lb25lIGZyb20gTEJSWSBpcyB3b3JraW5nIG9uIGl0LicpfVxuICAgICAgICAvPlxuICAgICAgKSA6IChcbiAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgIDxBZEJsb2NrVGVzdGVyIC8+XG4gICAgICAgICAgey8qIDxBZHNTdGlja3kgdXJpPXt1cml9IC8+ICovfSBcbiAgICAgICAgICA8Um91dGVyIHVyaT17dXJpfSAvPlxuICAgICAgICAgIDxNb2RhbFJvdXRlciAvPlxuXG4gICAgICAgICAgPFJlYWN0LlN1c3BlbnNlIGZhbGxiYWNrPXtudWxsfT57cmVuZGVyRmlsZWRyb3AgJiYgPEZpbGVEcm9wIC8+fTwvUmVhY3QuU3VzcGVuc2U+XG5cbiAgICAgICAgICA8RmlsZVJlbmRlckZsb2F0aW5nIC8+XG5cbiAgICAgICAgICA8UmVhY3QuU3VzcGVuc2UgZmFsbGJhY2s9e251bGx9PlxuICAgICAgICAgICAge2lzRW5oYW5jZWRMYXlvdXQgJiYgPFlyYmwgY2xhc3NOYW1lPVwieXJibC0tZW5oYW5jZWRcIiAvPn1cblxuICAgICAgICAgICAgPFlvdXR1YmVXZWxjb21lIC8+XG4gICAgICAgICAgICB7IXNob3VsZEhpZGVOYWcgJiYgPE5hZ0NvbnRpbnVlRmlyc3RSdW4gLz59XG4gICAgICAgICAgICB7ZnJvbUxicnl0dlBhcmFtICYmICFzZWVuU3Vuc2VzdE1lc3NhZ2UgJiYgIXNob3VsZEhpZGVOYWcgJiYgKFxuICAgICAgICAgICAgICA8TmFnU3Vuc2V0IGVtYWlsPXtoYXNWZXJpZmllZEVtYWlsfSBvbkNsb3NlPXsoKSA9PiBzZXRTZWVuU3Vuc2V0TWVzc2FnZSh0cnVlKX0gLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7Z2V0U3RhdHVzTmFnKCl9XG4gICAgICAgICAgPC9SZWFjdC5TdXNwZW5zZT5cbiAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhSb3V0ZXIoQXBwKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUEsZ09BQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQTBDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUF3Q0E7QUFDQTtBQUNBO0FBMUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUEwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQS9DQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFzREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSEE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBUkE7QUFXQTtBQWRBO0FBZ0JBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQVZBO0FBYUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFiQTtBQW1CQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBTkE7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFQQTtBQVVBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFEQTtBQU9BO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQUNBO0FBREE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFEQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQUNBO0FBQ0E7QUFhQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQW5DQTtBQUNBO0FBQ0E7QUFxQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUNBO0FBcERBO0FBQUE7QUF5REE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBUkE7QUFhQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUZBO0FBREE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFEQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUhBO0FBU0E7QUFBQTtBQUdBO0FBQUE7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFRQTtBQUNBO0FBQ0E7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../ui/component/app/view.jsx\n");

/***/ })

})